function p6(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var g6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Um(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var uk={exports:{}},Hx={},dk={exports:{}},Et={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $m=Symbol.for("react.element"),v6=Symbol.for("react.portal"),x6=Symbol.for("react.fragment"),y6=Symbol.for("react.strict_mode"),_6=Symbol.for("react.profiler"),w6=Symbol.for("react.provider"),b6=Symbol.for("react.context"),j6=Symbol.for("react.forward_ref"),N6=Symbol.for("react.suspense"),S6=Symbol.for("react.memo"),E6=Symbol.for("react.lazy"),ZS=Symbol.iterator;function C6(t){return t===null||typeof t!="object"?null:(t=ZS&&t[ZS]||t["@@iterator"],typeof t=="function"?t:null)}var hk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fk=Object.assign,mk={};function Zd(t,e,n){this.props=t,this.context=e,this.refs=mk,this.updater=n||hk}Zd.prototype.isReactComponent={};Zd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Zd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function pk(){}pk.prototype=Zd.prototype;function H1(t,e,n){this.props=t,this.context=e,this.refs=mk,this.updater=n||hk}var G1=H1.prototype=new pk;G1.constructor=H1;fk(G1,Zd.prototype);G1.isPureReactComponent=!0;var KS=Array.isArray,gk=Object.prototype.hasOwnProperty,Z1={current:null},vk={key:!0,ref:!0,__self:!0,__source:!0};function xk(t,e,n){var r,i={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)gk.call(e,r)&&!vk.hasOwnProperty(r)&&(i[r]=e[r]);var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){for(var u=Array(c),h=0;h<c;h++)u[h]=arguments[h+2];i.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)i[r]===void 0&&(i[r]=c[r]);return{$$typeof:$m,type:t,key:a,ref:o,props:i,_owner:Z1.current}}function T6(t,e){return{$$typeof:$m,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function K1(t){return typeof t=="object"&&t!==null&&t.$$typeof===$m}function k6(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var YS=/\/+/g;function j0(t,e){return typeof t=="object"&&t!==null&&t.key!=null?k6(""+t.key):e.toString(36)}function Wg(t,e,n,r,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case $m:case v6:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+j0(o,0):r,KS(i)?(n="",t!=null&&(n=t.replace(YS,"$&/")+"/"),Wg(i,e,n,"",function(h){return h})):i!=null&&(K1(i)&&(i=T6(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(YS,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",KS(t))for(var c=0;c<t.length;c++){a=t[c];var u=r+j0(a,c);o+=Wg(a,e,n,u,i)}else if(u=C6(t),typeof u=="function")for(t=u.call(t),c=0;!(a=t.next()).done;)a=a.value,u=r+j0(a,c++),o+=Wg(a,e,n,u,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ag(t,e,n){if(t==null)return t;var r=[],i=0;return Wg(t,r,"","",function(a){return e.call(n,a,i++)}),r}function P6(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Kr={current:null},qg={transition:null},I6={ReactCurrentDispatcher:Kr,ReactCurrentBatchConfig:qg,ReactCurrentOwner:Z1};function yk(){throw Error("act(...) is not supported in production builds of React.")}Et.Children={map:ag,forEach:function(t,e,n){ag(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ag(t,function(){e++}),e},toArray:function(t){return ag(t,function(e){return e})||[]},only:function(t){if(!K1(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Et.Component=Zd;Et.Fragment=x6;Et.Profiler=_6;Et.PureComponent=H1;Et.StrictMode=y6;Et.Suspense=N6;Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I6;Et.act=yk;Et.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=fk({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=Z1.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)gk.call(e,u)&&!vk.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var h=0;h<u;h++)c[h]=arguments[h+2];r.children=c}return{$$typeof:$m,type:t.type,key:i,ref:a,props:r,_owner:o}};Et.createContext=function(t){return t={$$typeof:b6,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:w6,_context:t},t.Consumer=t};Et.createElement=xk;Et.createFactory=function(t){var e=xk.bind(null,t);return e.type=t,e};Et.createRef=function(){return{current:null}};Et.forwardRef=function(t){return{$$typeof:j6,render:t}};Et.isValidElement=K1;Et.lazy=function(t){return{$$typeof:E6,_payload:{_status:-1,_result:t},_init:P6}};Et.memo=function(t,e){return{$$typeof:S6,type:t,compare:e===void 0?null:e}};Et.startTransition=function(t){var e=qg.transition;qg.transition={};try{t()}finally{qg.transition=e}};Et.unstable_act=yk;Et.useCallback=function(t,e){return Kr.current.useCallback(t,e)};Et.useContext=function(t){return Kr.current.useContext(t)};Et.useDebugValue=function(){};Et.useDeferredValue=function(t){return Kr.current.useDeferredValue(t)};Et.useEffect=function(t,e){return Kr.current.useEffect(t,e)};Et.useId=function(){return Kr.current.useId()};Et.useImperativeHandle=function(t,e,n){return Kr.current.useImperativeHandle(t,e,n)};Et.useInsertionEffect=function(t,e){return Kr.current.useInsertionEffect(t,e)};Et.useLayoutEffect=function(t,e){return Kr.current.useLayoutEffect(t,e)};Et.useMemo=function(t,e){return Kr.current.useMemo(t,e)};Et.useReducer=function(t,e,n){return Kr.current.useReducer(t,e,n)};Et.useRef=function(t){return Kr.current.useRef(t)};Et.useState=function(t){return Kr.current.useState(t)};Et.useSyncExternalStore=function(t,e,n){return Kr.current.useSyncExternalStore(t,e,n)};Et.useTransition=function(){return Kr.current.useTransition()};Et.version="18.3.1";dk.exports=Et;var x=dk.exports;const Me=Um(x),_k=p6({__proto__:null,default:Me},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A6=x,R6=Symbol.for("react.element"),M6=Symbol.for("react.fragment"),D6=Object.prototype.hasOwnProperty,O6=A6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,L6={key:!0,ref:!0,__self:!0,__source:!0};function wk(t,e,n){var r,i={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)D6.call(e,r)&&!L6.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:R6,type:t,key:a,ref:o,props:i,_owner:O6.current}}Hx.Fragment=M6;Hx.jsx=wk;Hx.jsxs=wk;uk.exports=Hx;var s=uk.exports,bk={exports:{}},Ps={},jk={exports:{}},Nk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,W){var H=U.length;U.push(W);e:for(;0<H;){var Q=H-1>>>1,fe=U[Q];if(0<i(fe,W))U[Q]=W,U[H]=fe,H=Q;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var W=U[0],H=U.pop();if(H!==W){U[0]=H;e:for(var Q=0,fe=U.length,ke=fe>>>1;Q<ke;){var Ze=2*(Q+1)-1,Ye=U[Ze],se=Ze+1,de=U[se];if(0>i(Ye,H))se<fe&&0>i(de,Ye)?(U[Q]=de,U[se]=H,Q=se):(U[Q]=Ye,U[Ze]=H,Q=Ze);else if(se<fe&&0>i(de,H))U[Q]=de,U[se]=H,Q=se;else break e}}return W}function i(U,W){var H=U.sortIndex-W.sortIndex;return H!==0?H:U.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],h=[],f=1,p=null,v=3,_=!1,b=!1,N=!1,S=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(U){for(var W=n(h);W!==null;){if(W.callback===null)r(h);else if(W.startTime<=U)r(h),W.sortIndex=W.expirationTime,e(u,W);else break;W=n(h)}}function R(U){if(N=!1,C(U),!b)if(n(u)!==null)b=!0,re(M);else{var W=n(h);W!==null&&K(R,W.startTime-U)}}function M(U,W){b=!1,N&&(N=!1,w(D),D=-1),_=!0;var H=v;try{for(C(W),p=n(u);p!==null&&(!(p.expirationTime>W)||U&&!V());){var Q=p.callback;if(typeof Q=="function"){p.callback=null,v=p.priorityLevel;var fe=Q(p.expirationTime<=W);W=t.unstable_now(),typeof fe=="function"?p.callback=fe:p===n(u)&&r(u),C(W)}else r(u);p=n(u)}if(p!==null)var ke=!0;else{var Ze=n(h);Ze!==null&&K(R,Ze.startTime-W),ke=!1}return ke}finally{p=null,v=H,_=!1}}var B=!1,O=null,D=-1,F=5,I=-1;function V(){return!(t.unstable_now()-I<F)}function k(){if(O!==null){var U=t.unstable_now();I=U;var W=!0;try{W=O(!0,U)}finally{W?P():(B=!1,O=null)}}else B=!1}var P;if(typeof y=="function")P=function(){y(k)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,te=q.port2;q.port1.onmessage=k,P=function(){te.postMessage(null)}}else P=function(){S(k,0)};function re(U){O=U,B||(B=!0,P())}function K(U,W){D=S(function(){U(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){b||_||(b=!0,re(M))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(U){switch(v){case 1:case 2:case 3:var W=3;break;default:W=v}var H=v;v=W;try{return U()}finally{v=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,W){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var H=v;v=U;try{return W()}finally{v=H}},t.unstable_scheduleCallback=function(U,W,H){var Q=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?Q+H:Q):H=Q,U){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=H+fe,U={id:f++,callback:W,priorityLevel:U,startTime:H,expirationTime:fe,sortIndex:-1},H>Q?(U.sortIndex=H,e(h,U),n(u)===null&&U===n(h)&&(N?(w(D),D=-1):N=!0,K(R,H-Q))):(U.sortIndex=fe,e(u,U),b||_||(b=!0,re(M))),U},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(U){var W=v;return function(){var H=v;v=W;try{return U.apply(this,arguments)}finally{v=H}}}})(Nk);jk.exports=Nk;var V6=jk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F6=x,Ts=V6;function be(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Sk=new Set,$f={};function $c(t,e){vd(t,e),vd(t+"Capture",e)}function vd(t,e){for($f[t]=e,t=0;t<e.length;t++)Sk.add(e[t])}var Ga=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),U_=Object.prototype.hasOwnProperty,z6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,QS={},XS={};function U6(t){return U_.call(XS,t)?!0:U_.call(QS,t)?!1:z6.test(t)?XS[t]=!0:(QS[t]=!0,!1)}function $6(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function B6(t,e,n,r){if(e===null||typeof e>"u"||$6(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Yr(t,e,n,r,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var yr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){yr[t]=new Yr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];yr[e]=new Yr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){yr[t]=new Yr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){yr[t]=new Yr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){yr[t]=new Yr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){yr[t]=new Yr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){yr[t]=new Yr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){yr[t]=new Yr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){yr[t]=new Yr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Y1=/[\-:]([a-z])/g;function Q1(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Y1,Q1);yr[e]=new Yr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Y1,Q1);yr[e]=new Yr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Y1,Q1);yr[e]=new Yr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){yr[t]=new Yr(t,1,!1,t.toLowerCase(),null,!1,!1)});yr.xlinkHref=new Yr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){yr[t]=new Yr(t,1,!1,t.toLowerCase(),null,!0,!0)});function X1(t,e,n,r){var i=yr.hasOwnProperty(e)?yr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(B6(e,n,i,r)&&(n=null),r||i===null?U6(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var uo=F6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,og=Symbol.for("react.element"),Vu=Symbol.for("react.portal"),Fu=Symbol.for("react.fragment"),J1=Symbol.for("react.strict_mode"),$_=Symbol.for("react.profiler"),Ek=Symbol.for("react.provider"),Ck=Symbol.for("react.context"),eb=Symbol.for("react.forward_ref"),B_=Symbol.for("react.suspense"),W_=Symbol.for("react.suspense_list"),tb=Symbol.for("react.memo"),Do=Symbol.for("react.lazy"),Tk=Symbol.for("react.offscreen"),JS=Symbol.iterator;function Gh(t){return t===null||typeof t!="object"?null:(t=JS&&t[JS]||t["@@iterator"],typeof t=="function"?t:null)}var En=Object.assign,N0;function cf(t){if(N0===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);N0=e&&e[1]||""}return`
`+N0+t}var S0=!1;function E0(t,e){if(!t||S0)return"";S0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),a=r.stack.split(`
`),o=i.length-1,c=a.length-1;1<=o&&0<=c&&i[o]!==a[c];)c--;for(;1<=o&&0<=c;o--,c--)if(i[o]!==a[c]){if(o!==1||c!==1)do if(o--,c--,0>c||i[o]!==a[c]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{S0=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?cf(t):""}function W6(t){switch(t.tag){case 5:return cf(t.type);case 16:return cf("Lazy");case 13:return cf("Suspense");case 19:return cf("SuspenseList");case 0:case 2:case 15:return t=E0(t.type,!1),t;case 11:return t=E0(t.type.render,!1),t;case 1:return t=E0(t.type,!0),t;default:return""}}function q_(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Fu:return"Fragment";case Vu:return"Portal";case $_:return"Profiler";case J1:return"StrictMode";case B_:return"Suspense";case W_:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ck:return(t.displayName||"Context")+".Consumer";case Ek:return(t._context.displayName||"Context")+".Provider";case eb:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case tb:return e=t.displayName||null,e!==null?e:q_(t.type)||"Memo";case Do:e=t._payload,t=t._init;try{return q_(t(e))}catch{}}return null}function q6(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q_(e);case 8:return e===J1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ul(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function kk(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function H6(t){var e=kk(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function lg(t){t._valueTracker||(t._valueTracker=H6(t))}function Pk(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=kk(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function bv(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function H_(t,e){var n=e.checked;return En({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function eE(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ul(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ik(t,e){e=e.checked,e!=null&&X1(t,"checked",e,!1)}function G_(t,e){Ik(t,e);var n=ul(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Z_(t,e.type,n):e.hasOwnProperty("defaultValue")&&Z_(t,e.type,ul(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function tE(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Z_(t,e,n){(e!=="number"||bv(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var uf=Array.isArray;function ed(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ul(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function K_(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(be(91));return En({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function nE(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(be(92));if(uf(n)){if(1<n.length)throw Error(be(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ul(n)}}function Ak(t,e){var n=ul(e.value),r=ul(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function rE(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Rk(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Y_(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Rk(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var cg,Mk=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(cg=cg||document.createElement("div"),cg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=cg.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Bf(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Nf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},G6=["Webkit","ms","Moz","O"];Object.keys(Nf).forEach(function(t){G6.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Nf[e]=Nf[t]})});function Dk(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Nf.hasOwnProperty(t)&&Nf[t]?(""+e).trim():e+"px"}function Ok(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Dk(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Z6=En({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Q_(t,e){if(e){if(Z6[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(be(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(be(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(be(61))}if(e.style!=null&&typeof e.style!="object")throw Error(be(62))}}function X_(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var J_=null;function nb(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ew=null,td=null,nd=null;function sE(t){if(t=qm(t)){if(typeof ew!="function")throw Error(be(280));var e=t.stateNode;e&&(e=Qx(e),ew(t.stateNode,t.type,e))}}function Lk(t){td?nd?nd.push(t):nd=[t]:td=t}function Vk(){if(td){var t=td,e=nd;if(nd=td=null,sE(t),e)for(t=0;t<e.length;t++)sE(e[t])}}function Fk(t,e){return t(e)}function zk(){}var C0=!1;function Uk(t,e,n){if(C0)return t(e,n);C0=!0;try{return Fk(t,e,n)}finally{C0=!1,(td!==null||nd!==null)&&(zk(),Vk())}}function Wf(t,e){var n=t.stateNode;if(n===null)return null;var r=Qx(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(be(231,e,typeof n));return n}var tw=!1;if(Ga)try{var Zh={};Object.defineProperty(Zh,"passive",{get:function(){tw=!0}}),window.addEventListener("test",Zh,Zh),window.removeEventListener("test",Zh,Zh)}catch{tw=!1}function K6(t,e,n,r,i,a,o,c,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(f){this.onError(f)}}var Sf=!1,jv=null,Nv=!1,nw=null,Y6={onError:function(t){Sf=!0,jv=t}};function Q6(t,e,n,r,i,a,o,c,u){Sf=!1,jv=null,K6.apply(Y6,arguments)}function X6(t,e,n,r,i,a,o,c,u){if(Q6.apply(this,arguments),Sf){if(Sf){var h=jv;Sf=!1,jv=null}else throw Error(be(198));Nv||(Nv=!0,nw=h)}}function Bc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function $k(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function iE(t){if(Bc(t)!==t)throw Error(be(188))}function J6(t){var e=t.alternate;if(!e){if(e=Bc(t),e===null)throw Error(be(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return iE(i),t;if(a===r)return iE(i),e;a=a.sibling}throw Error(be(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,c=i.child;c;){if(c===n){o=!0,n=i,r=a;break}if(c===r){o=!0,r=i,n=a;break}c=c.sibling}if(!o){for(c=a.child;c;){if(c===n){o=!0,n=a,r=i;break}if(c===r){o=!0,r=a,n=i;break}c=c.sibling}if(!o)throw Error(be(189))}}if(n.alternate!==r)throw Error(be(190))}if(n.tag!==3)throw Error(be(188));return n.stateNode.current===n?t:e}function Bk(t){return t=J6(t),t!==null?Wk(t):null}function Wk(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Wk(t);if(e!==null)return e;t=t.sibling}return null}var qk=Ts.unstable_scheduleCallback,aE=Ts.unstable_cancelCallback,eV=Ts.unstable_shouldYield,tV=Ts.unstable_requestPaint,Fn=Ts.unstable_now,nV=Ts.unstable_getCurrentPriorityLevel,rb=Ts.unstable_ImmediatePriority,Hk=Ts.unstable_UserBlockingPriority,Sv=Ts.unstable_NormalPriority,rV=Ts.unstable_LowPriority,Gk=Ts.unstable_IdlePriority,Gx=null,Yi=null;function sV(t){if(Yi&&typeof Yi.onCommitFiberRoot=="function")try{Yi.onCommitFiberRoot(Gx,t,void 0,(t.current.flags&128)===128)}catch{}}var vi=Math.clz32?Math.clz32:oV,iV=Math.log,aV=Math.LN2;function oV(t){return t>>>=0,t===0?32:31-(iV(t)/aV|0)|0}var ug=64,dg=4194304;function df(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ev(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~i;c!==0?r=df(c):(a&=o,a!==0&&(r=df(a)))}else o=n&~i,o!==0?r=df(o):a!==0&&(r=df(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-vi(e),i=1<<n,r|=t[n],e&=~i;return r}function lV(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cV(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-vi(a),c=1<<o,u=i[o];u===-1?(!(c&n)||c&r)&&(i[o]=lV(c,e)):u<=e&&(t.expiredLanes|=c),a&=~c}}function rw(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Zk(){var t=ug;return ug<<=1,!(ug&4194240)&&(ug=64),t}function T0(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Bm(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vi(e),t[e]=n}function uV(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-vi(n),a=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~a}}function sb(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-vi(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Gt=0;function Kk(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Yk,ib,Qk,Xk,Jk,sw=!1,hg=[],Qo=null,Xo=null,Jo=null,qf=new Map,Hf=new Map,Vo=[],dV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function oE(t,e){switch(t){case"focusin":case"focusout":Qo=null;break;case"dragenter":case"dragleave":Xo=null;break;case"mouseover":case"mouseout":Jo=null;break;case"pointerover":case"pointerout":qf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hf.delete(e.pointerId)}}function Kh(t,e,n,r,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},e!==null&&(e=qm(e),e!==null&&ib(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function hV(t,e,n,r,i){switch(e){case"focusin":return Qo=Kh(Qo,t,e,n,r,i),!0;case"dragenter":return Xo=Kh(Xo,t,e,n,r,i),!0;case"mouseover":return Jo=Kh(Jo,t,e,n,r,i),!0;case"pointerover":var a=i.pointerId;return qf.set(a,Kh(qf.get(a)||null,t,e,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Hf.set(a,Kh(Hf.get(a)||null,t,e,n,r,i)),!0}return!1}function eP(t){var e=sc(t.target);if(e!==null){var n=Bc(e);if(n!==null){if(e=n.tag,e===13){if(e=$k(n),e!==null){t.blockedOn=e,Jk(t.priority,function(){Qk(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Hg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=iw(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);J_=r,n.target.dispatchEvent(r),J_=null}else return e=qm(n),e!==null&&ib(e),t.blockedOn=n,!1;e.shift()}return!0}function lE(t,e,n){Hg(t)&&n.delete(e)}function fV(){sw=!1,Qo!==null&&Hg(Qo)&&(Qo=null),Xo!==null&&Hg(Xo)&&(Xo=null),Jo!==null&&Hg(Jo)&&(Jo=null),qf.forEach(lE),Hf.forEach(lE)}function Yh(t,e){t.blockedOn===e&&(t.blockedOn=null,sw||(sw=!0,Ts.unstable_scheduleCallback(Ts.unstable_NormalPriority,fV)))}function Gf(t){function e(i){return Yh(i,t)}if(0<hg.length){Yh(hg[0],t);for(var n=1;n<hg.length;n++){var r=hg[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Qo!==null&&Yh(Qo,t),Xo!==null&&Yh(Xo,t),Jo!==null&&Yh(Jo,t),qf.forEach(e),Hf.forEach(e),n=0;n<Vo.length;n++)r=Vo[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Vo.length&&(n=Vo[0],n.blockedOn===null);)eP(n),n.blockedOn===null&&Vo.shift()}var rd=uo.ReactCurrentBatchConfig,Cv=!0;function mV(t,e,n,r){var i=Gt,a=rd.transition;rd.transition=null;try{Gt=1,ab(t,e,n,r)}finally{Gt=i,rd.transition=a}}function pV(t,e,n,r){var i=Gt,a=rd.transition;rd.transition=null;try{Gt=4,ab(t,e,n,r)}finally{Gt=i,rd.transition=a}}function ab(t,e,n,r){if(Cv){var i=iw(t,e,n,r);if(i===null)V0(t,e,r,Tv,n),oE(t,r);else if(hV(i,t,e,n,r))r.stopPropagation();else if(oE(t,r),e&4&&-1<dV.indexOf(t)){for(;i!==null;){var a=qm(i);if(a!==null&&Yk(a),a=iw(t,e,n,r),a===null&&V0(t,e,r,Tv,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else V0(t,e,r,null,n)}}var Tv=null;function iw(t,e,n,r){if(Tv=null,t=nb(r),t=sc(t),t!==null)if(e=Bc(t),e===null)t=null;else if(n=e.tag,n===13){if(t=$k(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Tv=t,null}function tP(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nV()){case rb:return 1;case Hk:return 4;case Sv:case rV:return 16;case Gk:return 536870912;default:return 16}default:return 16}}var Go=null,ob=null,Gg=null;function nP(){if(Gg)return Gg;var t,e=ob,n=e.length,r,i="value"in Go?Go.value:Go.textContent,a=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[a-r];r++);return Gg=i.slice(t,1<r?1-r:void 0)}function Zg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function fg(){return!0}function cE(){return!1}function Is(t){function e(n,r,i,a,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(a):a[c]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?fg:cE,this.isPropagationStopped=cE,this}return En(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=fg)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=fg)},persist:function(){},isPersistent:fg}),e}var Kd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lb=Is(Kd),Wm=En({},Kd,{view:0,detail:0}),gV=Is(Wm),k0,P0,Qh,Zx=En({},Wm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cb,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Qh&&(Qh&&t.type==="mousemove"?(k0=t.screenX-Qh.screenX,P0=t.screenY-Qh.screenY):P0=k0=0,Qh=t),k0)},movementY:function(t){return"movementY"in t?t.movementY:P0}}),uE=Is(Zx),vV=En({},Zx,{dataTransfer:0}),xV=Is(vV),yV=En({},Wm,{relatedTarget:0}),I0=Is(yV),_V=En({},Kd,{animationName:0,elapsedTime:0,pseudoElement:0}),wV=Is(_V),bV=En({},Kd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),jV=Is(bV),NV=En({},Kd,{data:0}),dE=Is(NV),SV={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},EV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},CV={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function TV(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=CV[t])?!!e[t]:!1}function cb(){return TV}var kV=En({},Wm,{key:function(t){if(t.key){var e=SV[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Zg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?EV[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cb,charCode:function(t){return t.type==="keypress"?Zg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Zg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),PV=Is(kV),IV=En({},Zx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hE=Is(IV),AV=En({},Wm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cb}),RV=Is(AV),MV=En({},Kd,{propertyName:0,elapsedTime:0,pseudoElement:0}),DV=Is(MV),OV=En({},Zx,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),LV=Is(OV),VV=[9,13,27,32],ub=Ga&&"CompositionEvent"in window,Ef=null;Ga&&"documentMode"in document&&(Ef=document.documentMode);var FV=Ga&&"TextEvent"in window&&!Ef,rP=Ga&&(!ub||Ef&&8<Ef&&11>=Ef),fE=" ",mE=!1;function sP(t,e){switch(t){case"keyup":return VV.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iP(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var zu=!1;function zV(t,e){switch(t){case"compositionend":return iP(e);case"keypress":return e.which!==32?null:(mE=!0,fE);case"textInput":return t=e.data,t===fE&&mE?null:t;default:return null}}function UV(t,e){if(zu)return t==="compositionend"||!ub&&sP(t,e)?(t=nP(),Gg=ob=Go=null,zu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return rP&&e.locale!=="ko"?null:e.data;default:return null}}var $V={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!$V[t.type]:e==="textarea"}function aP(t,e,n,r){Lk(r),e=kv(e,"onChange"),0<e.length&&(n=new lb("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Cf=null,Zf=null;function BV(t){vP(t,0)}function Kx(t){var e=Bu(t);if(Pk(e))return t}function WV(t,e){if(t==="change")return e}var oP=!1;if(Ga){var A0;if(Ga){var R0="oninput"in document;if(!R0){var gE=document.createElement("div");gE.setAttribute("oninput","return;"),R0=typeof gE.oninput=="function"}A0=R0}else A0=!1;oP=A0&&(!document.documentMode||9<document.documentMode)}function vE(){Cf&&(Cf.detachEvent("onpropertychange",lP),Zf=Cf=null)}function lP(t){if(t.propertyName==="value"&&Kx(Zf)){var e=[];aP(e,Zf,t,nb(t)),Uk(BV,e)}}function qV(t,e,n){t==="focusin"?(vE(),Cf=e,Zf=n,Cf.attachEvent("onpropertychange",lP)):t==="focusout"&&vE()}function HV(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Kx(Zf)}function GV(t,e){if(t==="click")return Kx(e)}function ZV(t,e){if(t==="input"||t==="change")return Kx(e)}function KV(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ni=typeof Object.is=="function"?Object.is:KV;function Kf(t,e){if(Ni(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!U_.call(e,i)||!Ni(t[i],e[i]))return!1}return!0}function xE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function yE(t,e){var n=xE(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=xE(n)}}function cP(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?cP(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function uP(){for(var t=window,e=bv();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=bv(t.document)}return e}function db(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function YV(t){var e=uP(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&cP(n.ownerDocument.documentElement,n)){if(r!==null&&db(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!t.extend&&a>r&&(i=r,r=a,a=i),i=yE(n,a);var o=yE(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var QV=Ga&&"documentMode"in document&&11>=document.documentMode,Uu=null,aw=null,Tf=null,ow=!1;function _E(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ow||Uu==null||Uu!==bv(r)||(r=Uu,"selectionStart"in r&&db(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Tf&&Kf(Tf,r)||(Tf=r,r=kv(aw,"onSelect"),0<r.length&&(e=new lb("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Uu)))}function mg(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var $u={animationend:mg("Animation","AnimationEnd"),animationiteration:mg("Animation","AnimationIteration"),animationstart:mg("Animation","AnimationStart"),transitionend:mg("Transition","TransitionEnd")},M0={},dP={};Ga&&(dP=document.createElement("div").style,"AnimationEvent"in window||(delete $u.animationend.animation,delete $u.animationiteration.animation,delete $u.animationstart.animation),"TransitionEvent"in window||delete $u.transitionend.transition);function Yx(t){if(M0[t])return M0[t];if(!$u[t])return t;var e=$u[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in dP)return M0[t]=e[n];return t}var hP=Yx("animationend"),fP=Yx("animationiteration"),mP=Yx("animationstart"),pP=Yx("transitionend"),gP=new Map,wE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tl(t,e){gP.set(t,e),$c(e,[t])}for(var D0=0;D0<wE.length;D0++){var O0=wE[D0],XV=O0.toLowerCase(),JV=O0[0].toUpperCase()+O0.slice(1);Tl(XV,"on"+JV)}Tl(hP,"onAnimationEnd");Tl(fP,"onAnimationIteration");Tl(mP,"onAnimationStart");Tl("dblclick","onDoubleClick");Tl("focusin","onFocus");Tl("focusout","onBlur");Tl(pP,"onTransitionEnd");vd("onMouseEnter",["mouseout","mouseover"]);vd("onMouseLeave",["mouseout","mouseover"]);vd("onPointerEnter",["pointerout","pointerover"]);vd("onPointerLeave",["pointerout","pointerover"]);$c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$c("onBeforeInput",["compositionend","keypress","textInput","paste"]);$c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eF=new Set("cancel close invalid load scroll toggle".split(" ").concat(hf));function bE(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,X6(r,e,void 0,t),t.currentTarget=null}function vP(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,h=c.currentTarget;if(c=c.listener,u!==a&&i.isPropagationStopped())break e;bE(i,c,h),a=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,h=c.currentTarget,c=c.listener,u!==a&&i.isPropagationStopped())break e;bE(i,c,h),a=u}}}if(Nv)throw t=nw,Nv=!1,nw=null,t}function ln(t,e){var n=e[hw];n===void 0&&(n=e[hw]=new Set);var r=t+"__bubble";n.has(r)||(xP(e,t,2,!1),n.add(r))}function L0(t,e,n){var r=0;e&&(r|=4),xP(n,t,r,e)}var pg="_reactListening"+Math.random().toString(36).slice(2);function Yf(t){if(!t[pg]){t[pg]=!0,Sk.forEach(function(n){n!=="selectionchange"&&(eF.has(n)||L0(n,!1,t),L0(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[pg]||(e[pg]=!0,L0("selectionchange",!1,e))}}function xP(t,e,n,r){switch(tP(e)){case 1:var i=mV;break;case 4:i=pV;break;default:i=ab}n=i.bind(null,e,n,t),i=void 0,!tw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function V0(t,e,n,r,i){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;c!==null;){if(o=sc(c),o===null)return;if(u=o.tag,u===5||u===6){r=a=o;continue e}c=c.parentNode}}r=r.return}Uk(function(){var h=a,f=nb(n),p=[];e:{var v=gP.get(t);if(v!==void 0){var _=lb,b=t;switch(t){case"keypress":if(Zg(n)===0)break e;case"keydown":case"keyup":_=PV;break;case"focusin":b="focus",_=I0;break;case"focusout":b="blur",_=I0;break;case"beforeblur":case"afterblur":_=I0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=uE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=xV;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=RV;break;case hP:case fP:case mP:_=wV;break;case pP:_=DV;break;case"scroll":_=gV;break;case"wheel":_=LV;break;case"copy":case"cut":case"paste":_=jV;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=hE}var N=(e&4)!==0,S=!N&&t==="scroll",w=N?v!==null?v+"Capture":null:v;N=[];for(var y=h,C;y!==null;){C=y;var R=C.stateNode;if(C.tag===5&&R!==null&&(C=R,w!==null&&(R=Wf(y,w),R!=null&&N.push(Qf(y,R,C)))),S)break;y=y.return}0<N.length&&(v=new _(v,b,null,n,f),p.push({event:v,listeners:N}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",v&&n!==J_&&(b=n.relatedTarget||n.fromElement)&&(sc(b)||b[Za]))break e;if((_||v)&&(v=f.window===f?f:(v=f.ownerDocument)?v.defaultView||v.parentWindow:window,_?(b=n.relatedTarget||n.toElement,_=h,b=b?sc(b):null,b!==null&&(S=Bc(b),b!==S||b.tag!==5&&b.tag!==6)&&(b=null)):(_=null,b=h),_!==b)){if(N=uE,R="onMouseLeave",w="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(N=hE,R="onPointerLeave",w="onPointerEnter",y="pointer"),S=_==null?v:Bu(_),C=b==null?v:Bu(b),v=new N(R,y+"leave",_,n,f),v.target=S,v.relatedTarget=C,R=null,sc(f)===h&&(N=new N(w,y+"enter",b,n,f),N.target=C,N.relatedTarget=S,R=N),S=R,_&&b)t:{for(N=_,w=b,y=0,C=N;C;C=Eu(C))y++;for(C=0,R=w;R;R=Eu(R))C++;for(;0<y-C;)N=Eu(N),y--;for(;0<C-y;)w=Eu(w),C--;for(;y--;){if(N===w||w!==null&&N===w.alternate)break t;N=Eu(N),w=Eu(w)}N=null}else N=null;_!==null&&jE(p,v,_,N,!1),b!==null&&S!==null&&jE(p,S,b,N,!0)}}e:{if(v=h?Bu(h):window,_=v.nodeName&&v.nodeName.toLowerCase(),_==="select"||_==="input"&&v.type==="file")var M=WV;else if(pE(v))if(oP)M=ZV;else{M=HV;var B=qV}else(_=v.nodeName)&&_.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(M=GV);if(M&&(M=M(t,h))){aP(p,M,n,f);break e}B&&B(t,v,h),t==="focusout"&&(B=v._wrapperState)&&B.controlled&&v.type==="number"&&Z_(v,"number",v.value)}switch(B=h?Bu(h):window,t){case"focusin":(pE(B)||B.contentEditable==="true")&&(Uu=B,aw=h,Tf=null);break;case"focusout":Tf=aw=Uu=null;break;case"mousedown":ow=!0;break;case"contextmenu":case"mouseup":case"dragend":ow=!1,_E(p,n,f);break;case"selectionchange":if(QV)break;case"keydown":case"keyup":_E(p,n,f)}var O;if(ub)e:{switch(t){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else zu?sP(t,n)&&(D="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(rP&&n.locale!=="ko"&&(zu||D!=="onCompositionStart"?D==="onCompositionEnd"&&zu&&(O=nP()):(Go=f,ob="value"in Go?Go.value:Go.textContent,zu=!0)),B=kv(h,D),0<B.length&&(D=new dE(D,t,null,n,f),p.push({event:D,listeners:B}),O?D.data=O:(O=iP(n),O!==null&&(D.data=O)))),(O=FV?zV(t,n):UV(t,n))&&(h=kv(h,"onBeforeInput"),0<h.length&&(f=new dE("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:h}),f.data=O))}vP(p,e)})}function Qf(t,e,n){return{instance:t,listener:e,currentTarget:n}}function kv(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Wf(t,n),a!=null&&r.unshift(Qf(t,a,i)),a=Wf(t,e),a!=null&&r.push(Qf(t,a,i))),t=t.return}return r}function Eu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function jE(t,e,n,r,i){for(var a=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,h=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&h!==null&&(c=h,i?(u=Wf(n,a),u!=null&&o.unshift(Qf(n,u,c))):i||(u=Wf(n,a),u!=null&&o.push(Qf(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var tF=/\r\n?/g,nF=/\u0000|\uFFFD/g;function NE(t){return(typeof t=="string"?t:""+t).replace(tF,`
`).replace(nF,"")}function gg(t,e,n){if(e=NE(e),NE(t)!==e&&n)throw Error(be(425))}function Pv(){}var lw=null,cw=null;function uw(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var dw=typeof setTimeout=="function"?setTimeout:void 0,rF=typeof clearTimeout=="function"?clearTimeout:void 0,SE=typeof Promise=="function"?Promise:void 0,sF=typeof queueMicrotask=="function"?queueMicrotask:typeof SE<"u"?function(t){return SE.resolve(null).then(t).catch(iF)}:dw;function iF(t){setTimeout(function(){throw t})}function F0(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Gf(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Gf(e)}function el(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function EE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Yd=Math.random().toString(36).slice(2),$i="__reactFiber$"+Yd,Xf="__reactProps$"+Yd,Za="__reactContainer$"+Yd,hw="__reactEvents$"+Yd,aF="__reactListeners$"+Yd,oF="__reactHandles$"+Yd;function sc(t){var e=t[$i];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Za]||n[$i]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=EE(t);t!==null;){if(n=t[$i])return n;t=EE(t)}return e}t=n,n=t.parentNode}return null}function qm(t){return t=t[$i]||t[Za],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Bu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(be(33))}function Qx(t){return t[Xf]||null}var fw=[],Wu=-1;function kl(t){return{current:t}}function hn(t){0>Wu||(t.current=fw[Wu],fw[Wu]=null,Wu--)}function sn(t,e){Wu++,fw[Wu]=t.current,t.current=e}var dl={},Pr=kl(dl),as=kl(!1),bc=dl;function xd(t,e){var n=t.type.contextTypes;if(!n)return dl;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function os(t){return t=t.childContextTypes,t!=null}function Iv(){hn(as),hn(Pr)}function CE(t,e,n){if(Pr.current!==dl)throw Error(be(168));sn(Pr,e),sn(as,n)}function yP(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(be(108,q6(t)||"Unknown",i));return En({},n,r)}function Av(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||dl,bc=Pr.current,sn(Pr,t),sn(as,as.current),!0}function TE(t,e,n){var r=t.stateNode;if(!r)throw Error(be(169));n?(t=yP(t,e,bc),r.__reactInternalMemoizedMergedChildContext=t,hn(as),hn(Pr),sn(Pr,t)):hn(as),sn(as,n)}var Oa=null,Xx=!1,z0=!1;function _P(t){Oa===null?Oa=[t]:Oa.push(t)}function lF(t){Xx=!0,_P(t)}function Pl(){if(!z0&&Oa!==null){z0=!0;var t=0,e=Gt;try{var n=Oa;for(Gt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Oa=null,Xx=!1}catch(i){throw Oa!==null&&(Oa=Oa.slice(t+1)),qk(rb,Pl),i}finally{Gt=e,z0=!1}}return null}var qu=[],Hu=0,Rv=null,Mv=0,$s=[],Bs=0,jc=null,Va=1,Fa="";function ec(t,e){qu[Hu++]=Mv,qu[Hu++]=Rv,Rv=t,Mv=e}function wP(t,e,n){$s[Bs++]=Va,$s[Bs++]=Fa,$s[Bs++]=jc,jc=t;var r=Va;t=Fa;var i=32-vi(r)-1;r&=~(1<<i),n+=1;var a=32-vi(e)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Va=1<<32-vi(e)+i|n<<i|r,Fa=a+t}else Va=1<<a|n<<i|r,Fa=t}function hb(t){t.return!==null&&(ec(t,1),wP(t,1,0))}function fb(t){for(;t===Rv;)Rv=qu[--Hu],qu[Hu]=null,Mv=qu[--Hu],qu[Hu]=null;for(;t===jc;)jc=$s[--Bs],$s[Bs]=null,Fa=$s[--Bs],$s[Bs]=null,Va=$s[--Bs],$s[Bs]=null}var js=null,_s=null,vn=!1,hi=null;function bP(t,e){var n=qs(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function kE(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,js=t,_s=el(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,js=t,_s=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=jc!==null?{id:Va,overflow:Fa}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=qs(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,js=t,_s=null,!0):!1;default:return!1}}function mw(t){return(t.mode&1)!==0&&(t.flags&128)===0}function pw(t){if(vn){var e=_s;if(e){var n=e;if(!kE(t,e)){if(mw(t))throw Error(be(418));e=el(n.nextSibling);var r=js;e&&kE(t,e)?bP(r,n):(t.flags=t.flags&-4097|2,vn=!1,js=t)}}else{if(mw(t))throw Error(be(418));t.flags=t.flags&-4097|2,vn=!1,js=t}}}function PE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;js=t}function vg(t){if(t!==js)return!1;if(!vn)return PE(t),vn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!uw(t.type,t.memoizedProps)),e&&(e=_s)){if(mw(t))throw jP(),Error(be(418));for(;e;)bP(t,e),e=el(e.nextSibling)}if(PE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(be(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){_s=el(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}_s=null}}else _s=js?el(t.stateNode.nextSibling):null;return!0}function jP(){for(var t=_s;t;)t=el(t.nextSibling)}function yd(){_s=js=null,vn=!1}function mb(t){hi===null?hi=[t]:hi.push(t)}var cF=uo.ReactCurrentBatchConfig;function Xh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(be(309));var r=n.stateNode}if(!r)throw Error(be(147,t));var i=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var c=i.refs;o===null?delete c[a]:c[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(be(284));if(!n._owner)throw Error(be(290,t))}return t}function xg(t,e){throw t=Object.prototype.toString.call(e),Error(be(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function IE(t){var e=t._init;return e(t._payload)}function NP(t){function e(w,y){if(t){var C=w.deletions;C===null?(w.deletions=[y],w.flags|=16):C.push(y)}}function n(w,y){if(!t)return null;for(;y!==null;)e(w,y),y=y.sibling;return null}function r(w,y){for(w=new Map;y!==null;)y.key!==null?w.set(y.key,y):w.set(y.index,y),y=y.sibling;return w}function i(w,y){return w=sl(w,y),w.index=0,w.sibling=null,w}function a(w,y,C){return w.index=C,t?(C=w.alternate,C!==null?(C=C.index,C<y?(w.flags|=2,y):C):(w.flags|=2,y)):(w.flags|=1048576,y)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function c(w,y,C,R){return y===null||y.tag!==6?(y=G0(C,w.mode,R),y.return=w,y):(y=i(y,C),y.return=w,y)}function u(w,y,C,R){var M=C.type;return M===Fu?f(w,y,C.props.children,R,C.key):y!==null&&(y.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Do&&IE(M)===y.type)?(R=i(y,C.props),R.ref=Xh(w,y,C),R.return=w,R):(R=tv(C.type,C.key,C.props,null,w.mode,R),R.ref=Xh(w,y,C),R.return=w,R)}function h(w,y,C,R){return y===null||y.tag!==4||y.stateNode.containerInfo!==C.containerInfo||y.stateNode.implementation!==C.implementation?(y=Z0(C,w.mode,R),y.return=w,y):(y=i(y,C.children||[]),y.return=w,y)}function f(w,y,C,R,M){return y===null||y.tag!==7?(y=dc(C,w.mode,R,M),y.return=w,y):(y=i(y,C),y.return=w,y)}function p(w,y,C){if(typeof y=="string"&&y!==""||typeof y=="number")return y=G0(""+y,w.mode,C),y.return=w,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case og:return C=tv(y.type,y.key,y.props,null,w.mode,C),C.ref=Xh(w,null,y),C.return=w,C;case Vu:return y=Z0(y,w.mode,C),y.return=w,y;case Do:var R=y._init;return p(w,R(y._payload),C)}if(uf(y)||Gh(y))return y=dc(y,w.mode,C,null),y.return=w,y;xg(w,y)}return null}function v(w,y,C,R){var M=y!==null?y.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return M!==null?null:c(w,y,""+C,R);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case og:return C.key===M?u(w,y,C,R):null;case Vu:return C.key===M?h(w,y,C,R):null;case Do:return M=C._init,v(w,y,M(C._payload),R)}if(uf(C)||Gh(C))return M!==null?null:f(w,y,C,R,null);xg(w,C)}return null}function _(w,y,C,R,M){if(typeof R=="string"&&R!==""||typeof R=="number")return w=w.get(C)||null,c(y,w,""+R,M);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case og:return w=w.get(R.key===null?C:R.key)||null,u(y,w,R,M);case Vu:return w=w.get(R.key===null?C:R.key)||null,h(y,w,R,M);case Do:var B=R._init;return _(w,y,C,B(R._payload),M)}if(uf(R)||Gh(R))return w=w.get(C)||null,f(y,w,R,M,null);xg(y,R)}return null}function b(w,y,C,R){for(var M=null,B=null,O=y,D=y=0,F=null;O!==null&&D<C.length;D++){O.index>D?(F=O,O=null):F=O.sibling;var I=v(w,O,C[D],R);if(I===null){O===null&&(O=F);break}t&&O&&I.alternate===null&&e(w,O),y=a(I,y,D),B===null?M=I:B.sibling=I,B=I,O=F}if(D===C.length)return n(w,O),vn&&ec(w,D),M;if(O===null){for(;D<C.length;D++)O=p(w,C[D],R),O!==null&&(y=a(O,y,D),B===null?M=O:B.sibling=O,B=O);return vn&&ec(w,D),M}for(O=r(w,O);D<C.length;D++)F=_(O,w,D,C[D],R),F!==null&&(t&&F.alternate!==null&&O.delete(F.key===null?D:F.key),y=a(F,y,D),B===null?M=F:B.sibling=F,B=F);return t&&O.forEach(function(V){return e(w,V)}),vn&&ec(w,D),M}function N(w,y,C,R){var M=Gh(C);if(typeof M!="function")throw Error(be(150));if(C=M.call(C),C==null)throw Error(be(151));for(var B=M=null,O=y,D=y=0,F=null,I=C.next();O!==null&&!I.done;D++,I=C.next()){O.index>D?(F=O,O=null):F=O.sibling;var V=v(w,O,I.value,R);if(V===null){O===null&&(O=F);break}t&&O&&V.alternate===null&&e(w,O),y=a(V,y,D),B===null?M=V:B.sibling=V,B=V,O=F}if(I.done)return n(w,O),vn&&ec(w,D),M;if(O===null){for(;!I.done;D++,I=C.next())I=p(w,I.value,R),I!==null&&(y=a(I,y,D),B===null?M=I:B.sibling=I,B=I);return vn&&ec(w,D),M}for(O=r(w,O);!I.done;D++,I=C.next())I=_(O,w,D,I.value,R),I!==null&&(t&&I.alternate!==null&&O.delete(I.key===null?D:I.key),y=a(I,y,D),B===null?M=I:B.sibling=I,B=I);return t&&O.forEach(function(k){return e(w,k)}),vn&&ec(w,D),M}function S(w,y,C,R){if(typeof C=="object"&&C!==null&&C.type===Fu&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case og:e:{for(var M=C.key,B=y;B!==null;){if(B.key===M){if(M=C.type,M===Fu){if(B.tag===7){n(w,B.sibling),y=i(B,C.props.children),y.return=w,w=y;break e}}else if(B.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Do&&IE(M)===B.type){n(w,B.sibling),y=i(B,C.props),y.ref=Xh(w,B,C),y.return=w,w=y;break e}n(w,B);break}else e(w,B);B=B.sibling}C.type===Fu?(y=dc(C.props.children,w.mode,R,C.key),y.return=w,w=y):(R=tv(C.type,C.key,C.props,null,w.mode,R),R.ref=Xh(w,y,C),R.return=w,w=R)}return o(w);case Vu:e:{for(B=C.key;y!==null;){if(y.key===B)if(y.tag===4&&y.stateNode.containerInfo===C.containerInfo&&y.stateNode.implementation===C.implementation){n(w,y.sibling),y=i(y,C.children||[]),y.return=w,w=y;break e}else{n(w,y);break}else e(w,y);y=y.sibling}y=Z0(C,w.mode,R),y.return=w,w=y}return o(w);case Do:return B=C._init,S(w,y,B(C._payload),R)}if(uf(C))return b(w,y,C,R);if(Gh(C))return N(w,y,C,R);xg(w,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,y!==null&&y.tag===6?(n(w,y.sibling),y=i(y,C),y.return=w,w=y):(n(w,y),y=G0(C,w.mode,R),y.return=w,w=y),o(w)):n(w,y)}return S}var _d=NP(!0),SP=NP(!1),Dv=kl(null),Ov=null,Gu=null,pb=null;function gb(){pb=Gu=Ov=null}function vb(t){var e=Dv.current;hn(Dv),t._currentValue=e}function gw(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function sd(t,e){Ov=t,pb=Gu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(rs=!0),t.firstContext=null)}function Qs(t){var e=t._currentValue;if(pb!==t)if(t={context:t,memoizedValue:e,next:null},Gu===null){if(Ov===null)throw Error(be(308));Gu=t,Ov.dependencies={lanes:0,firstContext:t}}else Gu=Gu.next=t;return e}var ic=null;function xb(t){ic===null?ic=[t]:ic.push(t)}function EP(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,xb(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ka(t,r)}function Ka(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Oo=!1;function yb(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function CP(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Wa(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function tl(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ot&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ka(t,n)}return i=r.interleaved,i===null?(e.next=e,xb(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ka(t,n)}function Kg(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,sb(t,n)}}function AE(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=e:a=a.next=e}else i=a=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Lv(t,e,n,r){var i=t.updateQueue;Oo=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var u=c,h=u.next;u.next=null,o===null?a=h:o.next=h,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==o&&(c===null?f.firstBaseUpdate=h:c.next=h,f.lastBaseUpdate=u))}if(a!==null){var p=i.baseState;o=0,f=h=u=null,c=a;do{var v=c.lane,_=c.eventTime;if((r&v)===v){f!==null&&(f=f.next={eventTime:_,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var b=t,N=c;switch(v=e,_=n,N.tag){case 1:if(b=N.payload,typeof b=="function"){p=b.call(_,p,v);break e}p=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=N.payload,v=typeof b=="function"?b.call(_,p,v):b,v==null)break e;p=En({},p,v);break e;case 2:Oo=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,v=i.effects,v===null?i.effects=[c]:v.push(c))}else _={eventTime:_,lane:v,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(h=f=_,u=p):f=f.next=_,o|=v;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;v=c,c=v.next,v.next=null,i.lastBaseUpdate=v,i.shared.pending=null}}while(!0);if(f===null&&(u=p),i.baseState=u,i.firstBaseUpdate=h,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);Sc|=o,t.lanes=o,t.memoizedState=p}}function RE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(be(191,i));i.call(r)}}}var Hm={},Qi=kl(Hm),Jf=kl(Hm),em=kl(Hm);function ac(t){if(t===Hm)throw Error(be(174));return t}function _b(t,e){switch(sn(em,e),sn(Jf,t),sn(Qi,Hm),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Y_(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Y_(e,t)}hn(Qi),sn(Qi,e)}function wd(){hn(Qi),hn(Jf),hn(em)}function TP(t){ac(em.current);var e=ac(Qi.current),n=Y_(e,t.type);e!==n&&(sn(Jf,t),sn(Qi,n))}function wb(t){Jf.current===t&&(hn(Qi),hn(Jf))}var jn=kl(0);function Vv(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var U0=[];function bb(){for(var t=0;t<U0.length;t++)U0[t]._workInProgressVersionPrimary=null;U0.length=0}var Yg=uo.ReactCurrentDispatcher,$0=uo.ReactCurrentBatchConfig,Nc=0,Sn=null,nr=null,ur=null,Fv=!1,kf=!1,tm=0,uF=0;function br(){throw Error(be(321))}function jb(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ni(t[n],e[n]))return!1;return!0}function Nb(t,e,n,r,i,a){if(Nc=a,Sn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Yg.current=t===null||t.memoizedState===null?mF:pF,t=n(r,i),kf){a=0;do{if(kf=!1,tm=0,25<=a)throw Error(be(301));a+=1,ur=nr=null,e.updateQueue=null,Yg.current=gF,t=n(r,i)}while(kf)}if(Yg.current=zv,e=nr!==null&&nr.next!==null,Nc=0,ur=nr=Sn=null,Fv=!1,e)throw Error(be(300));return t}function Sb(){var t=tm!==0;return tm=0,t}function Vi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ur===null?Sn.memoizedState=ur=t:ur=ur.next=t,ur}function Xs(){if(nr===null){var t=Sn.alternate;t=t!==null?t.memoizedState:null}else t=nr.next;var e=ur===null?Sn.memoizedState:ur.next;if(e!==null)ur=e,nr=t;else{if(t===null)throw Error(be(310));nr=t,t={memoizedState:nr.memoizedState,baseState:nr.baseState,baseQueue:nr.baseQueue,queue:nr.queue,next:null},ur===null?Sn.memoizedState=ur=t:ur=ur.next=t}return ur}function nm(t,e){return typeof e=="function"?e(t):e}function B0(t){var e=Xs(),n=e.queue;if(n===null)throw Error(be(311));n.lastRenderedReducer=t;var r=nr,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var c=o=null,u=null,h=a;do{var f=h.lane;if((Nc&f)===f)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var p={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(c=u=p,o=r):u=u.next=p,Sn.lanes|=f,Sc|=f}h=h.next}while(h!==null&&h!==a);u===null?o=r:u.next=c,Ni(r,e.memoizedState)||(rs=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do a=i.lane,Sn.lanes|=a,Sc|=a,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function W0(t){var e=Xs(),n=e.queue;if(n===null)throw Error(be(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);Ni(a,e.memoizedState)||(rs=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function kP(){}function PP(t,e){var n=Sn,r=Xs(),i=e(),a=!Ni(r.memoizedState,i);if(a&&(r.memoizedState=i,rs=!0),r=r.queue,Eb(RP.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||ur!==null&&ur.memoizedState.tag&1){if(n.flags|=2048,rm(9,AP.bind(null,n,r,i,e),void 0,null),dr===null)throw Error(be(349));Nc&30||IP(n,e,i)}return i}function IP(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Sn.updateQueue,e===null?(e={lastEffect:null,stores:null},Sn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function AP(t,e,n,r){e.value=n,e.getSnapshot=r,MP(e)&&DP(t)}function RP(t,e,n){return n(function(){MP(e)&&DP(t)})}function MP(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ni(t,n)}catch{return!0}}function DP(t){var e=Ka(t,1);e!==null&&xi(e,t,1,-1)}function ME(t){var e=Vi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nm,lastRenderedState:t},e.queue=t,t=t.dispatch=fF.bind(null,Sn,t),[e.memoizedState,t]}function rm(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Sn.updateQueue,e===null?(e={lastEffect:null,stores:null},Sn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function OP(){return Xs().memoizedState}function Qg(t,e,n,r){var i=Vi();Sn.flags|=t,i.memoizedState=rm(1|e,n,void 0,r===void 0?null:r)}function Jx(t,e,n,r){var i=Xs();r=r===void 0?null:r;var a=void 0;if(nr!==null){var o=nr.memoizedState;if(a=o.destroy,r!==null&&jb(r,o.deps)){i.memoizedState=rm(e,n,a,r);return}}Sn.flags|=t,i.memoizedState=rm(1|e,n,a,r)}function DE(t,e){return Qg(8390656,8,t,e)}function Eb(t,e){return Jx(2048,8,t,e)}function LP(t,e){return Jx(4,2,t,e)}function VP(t,e){return Jx(4,4,t,e)}function FP(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function zP(t,e,n){return n=n!=null?n.concat([t]):null,Jx(4,4,FP.bind(null,e,t),n)}function Cb(){}function UP(t,e){var n=Xs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&jb(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function $P(t,e){var n=Xs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&jb(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function BP(t,e,n){return Nc&21?(Ni(n,e)||(n=Zk(),Sn.lanes|=n,Sc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,rs=!0),t.memoizedState=n)}function dF(t,e){var n=Gt;Gt=n!==0&&4>n?n:4,t(!0);var r=$0.transition;$0.transition={};try{t(!1),e()}finally{Gt=n,$0.transition=r}}function WP(){return Xs().memoizedState}function hF(t,e,n){var r=rl(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},qP(t))HP(e,n);else if(n=EP(t,e,n,r),n!==null){var i=Wr();xi(n,t,r,i),GP(n,e,r)}}function fF(t,e,n){var r=rl(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(qP(t))HP(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,c=a(o,n);if(i.hasEagerState=!0,i.eagerState=c,Ni(c,o)){var u=e.interleaved;u===null?(i.next=i,xb(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=EP(t,e,i,r),n!==null&&(i=Wr(),xi(n,t,r,i),GP(n,e,r))}}function qP(t){var e=t.alternate;return t===Sn||e!==null&&e===Sn}function HP(t,e){kf=Fv=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function GP(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,sb(t,n)}}var zv={readContext:Qs,useCallback:br,useContext:br,useEffect:br,useImperativeHandle:br,useInsertionEffect:br,useLayoutEffect:br,useMemo:br,useReducer:br,useRef:br,useState:br,useDebugValue:br,useDeferredValue:br,useTransition:br,useMutableSource:br,useSyncExternalStore:br,useId:br,unstable_isNewReconciler:!1},mF={readContext:Qs,useCallback:function(t,e){return Vi().memoizedState=[t,e===void 0?null:e],t},useContext:Qs,useEffect:DE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Qg(4194308,4,FP.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Qg(4194308,4,t,e)},useInsertionEffect:function(t,e){return Qg(4,2,t,e)},useMemo:function(t,e){var n=Vi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Vi();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=hF.bind(null,Sn,t),[r.memoizedState,t]},useRef:function(t){var e=Vi();return t={current:t},e.memoizedState=t},useState:ME,useDebugValue:Cb,useDeferredValue:function(t){return Vi().memoizedState=t},useTransition:function(){var t=ME(!1),e=t[0];return t=dF.bind(null,t[1]),Vi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Sn,i=Vi();if(vn){if(n===void 0)throw Error(be(407));n=n()}else{if(n=e(),dr===null)throw Error(be(349));Nc&30||IP(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,DE(RP.bind(null,r,a,t),[t]),r.flags|=2048,rm(9,AP.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=Vi(),e=dr.identifierPrefix;if(vn){var n=Fa,r=Va;n=(r&~(1<<32-vi(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=tm++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=uF++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},pF={readContext:Qs,useCallback:UP,useContext:Qs,useEffect:Eb,useImperativeHandle:zP,useInsertionEffect:LP,useLayoutEffect:VP,useMemo:$P,useReducer:B0,useRef:OP,useState:function(){return B0(nm)},useDebugValue:Cb,useDeferredValue:function(t){var e=Xs();return BP(e,nr.memoizedState,t)},useTransition:function(){var t=B0(nm)[0],e=Xs().memoizedState;return[t,e]},useMutableSource:kP,useSyncExternalStore:PP,useId:WP,unstable_isNewReconciler:!1},gF={readContext:Qs,useCallback:UP,useContext:Qs,useEffect:Eb,useImperativeHandle:zP,useInsertionEffect:LP,useLayoutEffect:VP,useMemo:$P,useReducer:W0,useRef:OP,useState:function(){return W0(nm)},useDebugValue:Cb,useDeferredValue:function(t){var e=Xs();return nr===null?e.memoizedState=t:BP(e,nr.memoizedState,t)},useTransition:function(){var t=W0(nm)[0],e=Xs().memoizedState;return[t,e]},useMutableSource:kP,useSyncExternalStore:PP,useId:WP,unstable_isNewReconciler:!1};function ci(t,e){if(t&&t.defaultProps){e=En({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function vw(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:En({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ey={isMounted:function(t){return(t=t._reactInternals)?Bc(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Wr(),i=rl(t),a=Wa(r,i);a.payload=e,n!=null&&(a.callback=n),e=tl(t,a,i),e!==null&&(xi(e,t,i,r),Kg(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Wr(),i=rl(t),a=Wa(r,i);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=tl(t,a,i),e!==null&&(xi(e,t,i,r),Kg(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Wr(),r=rl(t),i=Wa(n,r);i.tag=2,e!=null&&(i.callback=e),e=tl(t,i,r),e!==null&&(xi(e,t,r,n),Kg(e,t,r))}};function OE(t,e,n,r,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!Kf(n,r)||!Kf(i,a):!0}function ZP(t,e,n){var r=!1,i=dl,a=e.contextType;return typeof a=="object"&&a!==null?a=Qs(a):(i=os(e)?bc:Pr.current,r=e.contextTypes,a=(r=r!=null)?xd(t,i):dl),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ey,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function LE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ey.enqueueReplaceState(e,e.state,null)}function xw(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},yb(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=Qs(a):(a=os(e)?bc:Pr.current,i.context=xd(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(vw(t,e,a,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ey.enqueueReplaceState(i,i.state,null),Lv(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function bd(t,e){try{var n="",r=e;do n+=W6(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function q0(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function yw(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var vF=typeof WeakMap=="function"?WeakMap:Map;function KP(t,e,n){n=Wa(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){$v||($v=!0,kw=r),yw(t,e)},n}function YP(t,e,n){n=Wa(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){yw(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){yw(t,e),typeof r!="function"&&(nl===null?nl=new Set([this]):nl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function VE(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new vF;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=IF.bind(null,t,e,n),e.then(t,t))}function FE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function zE(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Wa(-1,1),e.tag=2,tl(n,e,1))),n.lanes|=1),t)}var xF=uo.ReactCurrentOwner,rs=!1;function Vr(t,e,n,r){e.child=t===null?SP(e,null,n,r):_d(e,t.child,n,r)}function UE(t,e,n,r,i){n=n.render;var a=e.ref;return sd(e,i),r=Nb(t,e,n,r,a,i),n=Sb(),t!==null&&!rs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ya(t,e,i)):(vn&&n&&hb(e),e.flags|=1,Vr(t,e,r,i),e.child)}function $E(t,e,n,r,i){if(t===null){var a=n.type;return typeof a=="function"&&!Db(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,QP(t,e,a,r,i)):(t=tv(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:Kf,n(o,r)&&t.ref===e.ref)return Ya(t,e,i)}return e.flags|=1,t=sl(a,r),t.ref=e.ref,t.return=e,e.child=t}function QP(t,e,n,r,i){if(t!==null){var a=t.memoizedProps;if(Kf(a,r)&&t.ref===e.ref)if(rs=!1,e.pendingProps=r=a,(t.lanes&i)!==0)t.flags&131072&&(rs=!0);else return e.lanes=t.lanes,Ya(t,e,i)}return _w(t,e,n,r,i)}function XP(t,e,n){var r=e.pendingProps,i=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},sn(Ku,xs),xs|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,sn(Ku,xs),xs|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,sn(Ku,xs),xs|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,sn(Ku,xs),xs|=r;return Vr(t,e,i,n),e.child}function JP(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function _w(t,e,n,r,i){var a=os(n)?bc:Pr.current;return a=xd(e,a),sd(e,i),n=Nb(t,e,n,r,a,i),r=Sb(),t!==null&&!rs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ya(t,e,i)):(vn&&r&&hb(e),e.flags|=1,Vr(t,e,n,i),e.child)}function BE(t,e,n,r,i){if(os(n)){var a=!0;Av(e)}else a=!1;if(sd(e,i),e.stateNode===null)Xg(t,e),ZP(e,n,r),xw(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Qs(h):(h=os(n)?bc:Pr.current,h=xd(e,h));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==h)&&LE(e,o,r,h),Oo=!1;var v=e.memoizedState;o.state=v,Lv(e,r,o,i),u=e.memoizedState,c!==r||v!==u||as.current||Oo?(typeof f=="function"&&(vw(e,n,f,r),u=e.memoizedState),(c=Oo||OE(e,n,c,r,v,u,h))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,CP(t,e),c=e.memoizedProps,h=e.type===e.elementType?c:ci(e.type,c),o.props=h,p=e.pendingProps,v=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Qs(u):(u=os(n)?bc:Pr.current,u=xd(e,u));var _=n.getDerivedStateFromProps;(f=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==p||v!==u)&&LE(e,o,r,u),Oo=!1,v=e.memoizedState,o.state=v,Lv(e,r,o,i);var b=e.memoizedState;c!==p||v!==b||as.current||Oo?(typeof _=="function"&&(vw(e,n,_,r),b=e.memoizedState),(h=Oo||OE(e,n,h,r,v,b,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),r=!1)}return ww(t,e,n,r,a,i)}function ww(t,e,n,r,i,a){JP(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&TE(e,n,!1),Ya(t,e,a);r=e.stateNode,xF.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=_d(e,t.child,null,a),e.child=_d(e,null,c,a)):Vr(t,e,c,a),e.memoizedState=r.state,i&&TE(e,n,!0),e.child}function eI(t){var e=t.stateNode;e.pendingContext?CE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&CE(t,e.context,!1),_b(t,e.containerInfo)}function WE(t,e,n,r,i){return yd(),mb(i),e.flags|=256,Vr(t,e,n,r),e.child}var bw={dehydrated:null,treeContext:null,retryLane:0};function jw(t){return{baseLanes:t,cachePool:null,transitions:null}}function tI(t,e,n){var r=e.pendingProps,i=jn.current,a=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(i&2)!==0),c?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),sn(jn,i&1),t===null)return pw(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=ry(o,r,0,null),t=dc(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=jw(n),e.memoizedState=bw,t):Tb(e,o));if(i=t.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return yF(t,e,o,r,c,i,n);if(a){a=r.fallback,o=e.mode,i=t.child,c=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=sl(i,u),r.subtreeFlags=i.subtreeFlags&14680064),c!==null?a=sl(c,a):(a=dc(a,o,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=t.child.memoizedState,o=o===null?jw(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=bw,r}return a=t.child,t=a.sibling,r=sl(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Tb(t,e){return e=ry({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function yg(t,e,n,r){return r!==null&&mb(r),_d(e,t.child,null,n),t=Tb(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function yF(t,e,n,r,i,a,o){if(n)return e.flags&256?(e.flags&=-257,r=q0(Error(be(422))),yg(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=ry({mode:"visible",children:r.children},i,0,null),a=dc(a,i,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&_d(e,t.child,null,o),e.child.memoizedState=jw(o),e.memoizedState=bw,a);if(!(e.mode&1))return yg(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var c=r.dgst;return r=c,a=Error(be(419)),r=q0(a,r,void 0),yg(t,e,o,r)}if(c=(o&t.childLanes)!==0,rs||c){if(r=dr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Ka(t,i),xi(r,t,i,-1))}return Mb(),r=q0(Error(be(421))),yg(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=AF.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,_s=el(i.nextSibling),js=e,vn=!0,hi=null,t!==null&&($s[Bs++]=Va,$s[Bs++]=Fa,$s[Bs++]=jc,Va=t.id,Fa=t.overflow,jc=e),e=Tb(e,r.children),e.flags|=4096,e)}function qE(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),gw(t.return,e,n)}function H0(t,e,n,r,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function nI(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(Vr(t,e,r.children,n),r=jn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&qE(t,n,e);else if(t.tag===19)qE(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(sn(jn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Vv(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),H0(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Vv(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}H0(e,!0,n,null,a);break;case"together":H0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Xg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ya(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Sc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(be(153));if(e.child!==null){for(t=e.child,n=sl(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=sl(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function _F(t,e,n){switch(e.tag){case 3:eI(e),yd();break;case 5:TP(e);break;case 1:os(e.type)&&Av(e);break;case 4:_b(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;sn(Dv,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(sn(jn,jn.current&1),e.flags|=128,null):n&e.child.childLanes?tI(t,e,n):(sn(jn,jn.current&1),t=Ya(t,e,n),t!==null?t.sibling:null);sn(jn,jn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return nI(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),sn(jn,jn.current),r)break;return null;case 22:case 23:return e.lanes=0,XP(t,e,n)}return Ya(t,e,n)}var rI,Nw,sI,iI;rI=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Nw=function(){};sI=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ac(Qi.current);var a=null;switch(n){case"input":i=H_(t,i),r=H_(t,r),a=[];break;case"select":i=En({},i,{value:void 0}),r=En({},r,{value:void 0}),a=[];break;case"textarea":i=K_(t,i),r=K_(t,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Pv)}Q_(n,r);var o;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var c=i[h];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&($f.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in r){var u=r[h];if(c=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&u!==c&&(u!=null||c!=null))if(h==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(a=a||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&($f.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&ln("scroll",t),a||c===u||(a=[])):(a=a||[]).push(h,u))}n&&(a=a||[]).push("style",n);var h=a;(e.updateQueue=h)&&(e.flags|=4)}};iI=function(t,e,n,r){n!==r&&(e.flags|=4)};function Jh(t,e){if(!vn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function jr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function wF(t,e,n){var r=e.pendingProps;switch(fb(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jr(e),null;case 1:return os(e.type)&&Iv(),jr(e),null;case 3:return r=e.stateNode,wd(),hn(as),hn(Pr),bb(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(vg(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,hi!==null&&(Aw(hi),hi=null))),Nw(t,e),jr(e),null;case 5:wb(e);var i=ac(em.current);if(n=e.type,t!==null&&e.stateNode!=null)sI(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(be(166));return jr(e),null}if(t=ac(Qi.current),vg(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[$i]=e,r[Xf]=a,t=(e.mode&1)!==0,n){case"dialog":ln("cancel",r),ln("close",r);break;case"iframe":case"object":case"embed":ln("load",r);break;case"video":case"audio":for(i=0;i<hf.length;i++)ln(hf[i],r);break;case"source":ln("error",r);break;case"img":case"image":case"link":ln("error",r),ln("load",r);break;case"details":ln("toggle",r);break;case"input":eE(r,a),ln("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},ln("invalid",r);break;case"textarea":nE(r,a),ln("invalid",r)}Q_(n,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var c=a[o];o==="children"?typeof c=="string"?r.textContent!==c&&(a.suppressHydrationWarning!==!0&&gg(r.textContent,c,t),i=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(a.suppressHydrationWarning!==!0&&gg(r.textContent,c,t),i=["children",""+c]):$f.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&ln("scroll",r)}switch(n){case"input":lg(r),tE(r,a,!0);break;case"textarea":lg(r),rE(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Pv)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Rk(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[$i]=e,t[Xf]=r,rI(t,e,!1,!1),e.stateNode=t;e:{switch(o=X_(n,r),n){case"dialog":ln("cancel",t),ln("close",t),i=r;break;case"iframe":case"object":case"embed":ln("load",t),i=r;break;case"video":case"audio":for(i=0;i<hf.length;i++)ln(hf[i],t);i=r;break;case"source":ln("error",t),i=r;break;case"img":case"image":case"link":ln("error",t),ln("load",t),i=r;break;case"details":ln("toggle",t),i=r;break;case"input":eE(t,r),i=H_(t,r),ln("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=En({},r,{value:void 0}),ln("invalid",t);break;case"textarea":nE(t,r),i=K_(t,r),ln("invalid",t);break;default:i=r}Q_(n,i),c=i;for(a in c)if(c.hasOwnProperty(a)){var u=c[a];a==="style"?Ok(t,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Mk(t,u)):a==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Bf(t,u):typeof u=="number"&&Bf(t,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&($f.hasOwnProperty(a)?u!=null&&a==="onScroll"&&ln("scroll",t):u!=null&&X1(t,a,u,o))}switch(n){case"input":lg(t),tE(t,r,!1);break;case"textarea":lg(t),rE(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ul(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?ed(t,!!r.multiple,a,!1):r.defaultValue!=null&&ed(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Pv)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return jr(e),null;case 6:if(t&&e.stateNode!=null)iI(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(be(166));if(n=ac(em.current),ac(Qi.current),vg(e)){if(r=e.stateNode,n=e.memoizedProps,r[$i]=e,(a=r.nodeValue!==n)&&(t=js,t!==null))switch(t.tag){case 3:gg(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&gg(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[$i]=e,e.stateNode=r}return jr(e),null;case 13:if(hn(jn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(vn&&_s!==null&&e.mode&1&&!(e.flags&128))jP(),yd(),e.flags|=98560,a=!1;else if(a=vg(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(be(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(be(317));a[$i]=e}else yd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;jr(e),a=!1}else hi!==null&&(Aw(hi),hi=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||jn.current&1?rr===0&&(rr=3):Mb())),e.updateQueue!==null&&(e.flags|=4),jr(e),null);case 4:return wd(),Nw(t,e),t===null&&Yf(e.stateNode.containerInfo),jr(e),null;case 10:return vb(e.type._context),jr(e),null;case 17:return os(e.type)&&Iv(),jr(e),null;case 19:if(hn(jn),a=e.memoizedState,a===null)return jr(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)Jh(a,!1);else{if(rr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Vv(t),o!==null){for(e.flags|=128,Jh(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return sn(jn,jn.current&1|2),e.child}t=t.sibling}a.tail!==null&&Fn()>jd&&(e.flags|=128,r=!0,Jh(a,!1),e.lanes=4194304)}else{if(!r)if(t=Vv(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Jh(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!vn)return jr(e),null}else 2*Fn()-a.renderingStartTime>jd&&n!==1073741824&&(e.flags|=128,r=!0,Jh(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Fn(),e.sibling=null,n=jn.current,sn(jn,r?n&1|2:n&1),e):(jr(e),null);case 22:case 23:return Rb(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?xs&1073741824&&(jr(e),e.subtreeFlags&6&&(e.flags|=8192)):jr(e),null;case 24:return null;case 25:return null}throw Error(be(156,e.tag))}function bF(t,e){switch(fb(e),e.tag){case 1:return os(e.type)&&Iv(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return wd(),hn(as),hn(Pr),bb(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return wb(e),null;case 13:if(hn(jn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(be(340));yd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return hn(jn),null;case 4:return wd(),null;case 10:return vb(e.type._context),null;case 22:case 23:return Rb(),null;case 24:return null;default:return null}}var _g=!1,Er=!1,jF=typeof WeakSet=="function"?WeakSet:Set,Be=null;function Zu(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Pn(t,e,r)}else n.current=null}function Sw(t,e,n){try{n()}catch(r){Pn(t,e,r)}}var HE=!1;function NF(t,e){if(lw=Cv,t=uP(),db(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,h=0,f=0,p=t,v=null;t:for(;;){for(var _;p!==n||i!==0&&p.nodeType!==3||(c=o+i),p!==a||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(_=p.firstChild)!==null;)v=p,p=_;for(;;){if(p===t)break t;if(v===n&&++h===i&&(c=o),v===a&&++f===r&&(u=o),(_=p.nextSibling)!==null)break;p=v,v=p.parentNode}p=_}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(cw={focusedElem:t,selectionRange:n},Cv=!1,Be=e;Be!==null;)if(e=Be,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Be=t;else for(;Be!==null;){e=Be;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var N=b.memoizedProps,S=b.memoizedState,w=e.stateNode,y=w.getSnapshotBeforeUpdate(e.elementType===e.type?N:ci(e.type,N),S);w.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(be(163))}}catch(R){Pn(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,Be=t;break}Be=e.return}return b=HE,HE=!1,b}function Pf(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&Sw(e,n,a)}i=i.next}while(i!==r)}}function ty(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ew(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function aI(t){var e=t.alternate;e!==null&&(t.alternate=null,aI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[$i],delete e[Xf],delete e[hw],delete e[aF],delete e[oF])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function oI(t){return t.tag===5||t.tag===3||t.tag===4}function GE(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||oI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Cw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Pv));else if(r!==4&&(t=t.child,t!==null))for(Cw(t,e,n),t=t.sibling;t!==null;)Cw(t,e,n),t=t.sibling}function Tw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Tw(t,e,n),t=t.sibling;t!==null;)Tw(t,e,n),t=t.sibling}var fr=null,ui=!1;function ko(t,e,n){for(n=n.child;n!==null;)lI(t,e,n),n=n.sibling}function lI(t,e,n){if(Yi&&typeof Yi.onCommitFiberUnmount=="function")try{Yi.onCommitFiberUnmount(Gx,n)}catch{}switch(n.tag){case 5:Er||Zu(n,e);case 6:var r=fr,i=ui;fr=null,ko(t,e,n),fr=r,ui=i,fr!==null&&(ui?(t=fr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):fr.removeChild(n.stateNode));break;case 18:fr!==null&&(ui?(t=fr,n=n.stateNode,t.nodeType===8?F0(t.parentNode,n):t.nodeType===1&&F0(t,n),Gf(t)):F0(fr,n.stateNode));break;case 4:r=fr,i=ui,fr=n.stateNode.containerInfo,ui=!0,ko(t,e,n),fr=r,ui=i;break;case 0:case 11:case 14:case 15:if(!Er&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&Sw(n,e,o),i=i.next}while(i!==r)}ko(t,e,n);break;case 1:if(!Er&&(Zu(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Pn(n,e,c)}ko(t,e,n);break;case 21:ko(t,e,n);break;case 22:n.mode&1?(Er=(r=Er)||n.memoizedState!==null,ko(t,e,n),Er=r):ko(t,e,n);break;default:ko(t,e,n)}}function ZE(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new jF),e.forEach(function(r){var i=RF.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ai(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:fr=c.stateNode,ui=!1;break e;case 3:fr=c.stateNode.containerInfo,ui=!0;break e;case 4:fr=c.stateNode.containerInfo,ui=!0;break e}c=c.return}if(fr===null)throw Error(be(160));lI(a,o,i),fr=null,ui=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(h){Pn(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)cI(e,t),e=e.sibling}function cI(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ai(e,t),Li(t),r&4){try{Pf(3,t,t.return),ty(3,t)}catch(N){Pn(t,t.return,N)}try{Pf(5,t,t.return)}catch(N){Pn(t,t.return,N)}}break;case 1:ai(e,t),Li(t),r&512&&n!==null&&Zu(n,n.return);break;case 5:if(ai(e,t),Li(t),r&512&&n!==null&&Zu(n,n.return),t.flags&32){var i=t.stateNode;try{Bf(i,"")}catch(N){Pn(t,t.return,N)}}if(r&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&a.type==="radio"&&a.name!=null&&Ik(i,a),X_(c,o);var h=X_(c,a);for(o=0;o<u.length;o+=2){var f=u[o],p=u[o+1];f==="style"?Ok(i,p):f==="dangerouslySetInnerHTML"?Mk(i,p):f==="children"?Bf(i,p):X1(i,f,p,h)}switch(c){case"input":G_(i,a);break;case"textarea":Ak(i,a);break;case"select":var v=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var _=a.value;_!=null?ed(i,!!a.multiple,_,!1):v!==!!a.multiple&&(a.defaultValue!=null?ed(i,!!a.multiple,a.defaultValue,!0):ed(i,!!a.multiple,a.multiple?[]:"",!1))}i[Xf]=a}catch(N){Pn(t,t.return,N)}}break;case 6:if(ai(e,t),Li(t),r&4){if(t.stateNode===null)throw Error(be(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(N){Pn(t,t.return,N)}}break;case 3:if(ai(e,t),Li(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Gf(e.containerInfo)}catch(N){Pn(t,t.return,N)}break;case 4:ai(e,t),Li(t);break;case 13:ai(e,t),Li(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(Ib=Fn())),r&4&&ZE(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Er=(h=Er)||f,ai(e,t),Er=h):ai(e,t),Li(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!f&&t.mode&1)for(Be=t,f=t.child;f!==null;){for(p=Be=f;Be!==null;){switch(v=Be,_=v.child,v.tag){case 0:case 11:case 14:case 15:Pf(4,v,v.return);break;case 1:Zu(v,v.return);var b=v.stateNode;if(typeof b.componentWillUnmount=="function"){r=v,n=v.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(N){Pn(r,n,N)}}break;case 5:Zu(v,v.return);break;case 22:if(v.memoizedState!==null){YE(p);continue}}_!==null?(_.return=v,Be=_):YE(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{i=p.stateNode,h?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(c=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=Dk("display",o))}catch(N){Pn(t,t.return,N)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(N){Pn(t,t.return,N)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:ai(e,t),Li(t),r&4&&ZE(t);break;case 21:break;default:ai(e,t),Li(t)}}function Li(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(oI(n)){var r=n;break e}n=n.return}throw Error(be(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Bf(i,""),r.flags&=-33);var a=GE(t);Tw(t,a,i);break;case 3:case 4:var o=r.stateNode.containerInfo,c=GE(t);Cw(t,c,o);break;default:throw Error(be(161))}}catch(u){Pn(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function SF(t,e,n){Be=t,uI(t)}function uI(t,e,n){for(var r=(t.mode&1)!==0;Be!==null;){var i=Be,a=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||_g;if(!o){var c=i.alternate,u=c!==null&&c.memoizedState!==null||Er;c=_g;var h=Er;if(_g=o,(Er=u)&&!h)for(Be=i;Be!==null;)o=Be,u=o.child,o.tag===22&&o.memoizedState!==null?QE(i):u!==null?(u.return=o,Be=u):QE(i);for(;a!==null;)Be=a,uI(a),a=a.sibling;Be=i,_g=c,Er=h}KE(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Be=a):KE(t)}}function KE(t){for(;Be!==null;){var e=Be;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Er||ty(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Er)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:ci(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&RE(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}RE(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&Gf(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(be(163))}Er||e.flags&512&&Ew(e)}catch(v){Pn(e,e.return,v)}}if(e===t){Be=null;break}if(n=e.sibling,n!==null){n.return=e.return,Be=n;break}Be=e.return}}function YE(t){for(;Be!==null;){var e=Be;if(e===t){Be=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Be=n;break}Be=e.return}}function QE(t){for(;Be!==null;){var e=Be;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ty(4,e)}catch(u){Pn(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Pn(e,i,u)}}var a=e.return;try{Ew(e)}catch(u){Pn(e,a,u)}break;case 5:var o=e.return;try{Ew(e)}catch(u){Pn(e,o,u)}}}catch(u){Pn(e,e.return,u)}if(e===t){Be=null;break}var c=e.sibling;if(c!==null){c.return=e.return,Be=c;break}Be=e.return}}var EF=Math.ceil,Uv=uo.ReactCurrentDispatcher,kb=uo.ReactCurrentOwner,Gs=uo.ReactCurrentBatchConfig,Ot=0,dr=null,Hn=null,vr=0,xs=0,Ku=kl(0),rr=0,sm=null,Sc=0,ny=0,Pb=0,If=null,ts=null,Ib=0,jd=1/0,Da=null,$v=!1,kw=null,nl=null,wg=!1,Zo=null,Bv=0,Af=0,Pw=null,Jg=-1,ev=0;function Wr(){return Ot&6?Fn():Jg!==-1?Jg:Jg=Fn()}function rl(t){return t.mode&1?Ot&2&&vr!==0?vr&-vr:cF.transition!==null?(ev===0&&(ev=Zk()),ev):(t=Gt,t!==0||(t=window.event,t=t===void 0?16:tP(t.type)),t):1}function xi(t,e,n,r){if(50<Af)throw Af=0,Pw=null,Error(be(185));Bm(t,n,r),(!(Ot&2)||t!==dr)&&(t===dr&&(!(Ot&2)&&(ny|=n),rr===4&&Fo(t,vr)),ls(t,r),n===1&&Ot===0&&!(e.mode&1)&&(jd=Fn()+500,Xx&&Pl()))}function ls(t,e){var n=t.callbackNode;cV(t,e);var r=Ev(t,t===dr?vr:0);if(r===0)n!==null&&aE(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&aE(n),e===1)t.tag===0?lF(XE.bind(null,t)):_P(XE.bind(null,t)),sF(function(){!(Ot&6)&&Pl()}),n=null;else{switch(Kk(r)){case 1:n=rb;break;case 4:n=Hk;break;case 16:n=Sv;break;case 536870912:n=Gk;break;default:n=Sv}n=xI(n,dI.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function dI(t,e){if(Jg=-1,ev=0,Ot&6)throw Error(be(327));var n=t.callbackNode;if(id()&&t.callbackNode!==n)return null;var r=Ev(t,t===dr?vr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Wv(t,r);else{e=r;var i=Ot;Ot|=2;var a=fI();(dr!==t||vr!==e)&&(Da=null,jd=Fn()+500,uc(t,e));do try{kF();break}catch(c){hI(t,c)}while(!0);gb(),Uv.current=a,Ot=i,Hn!==null?e=0:(dr=null,vr=0,e=rr)}if(e!==0){if(e===2&&(i=rw(t),i!==0&&(r=i,e=Iw(t,i))),e===1)throw n=sm,uc(t,0),Fo(t,r),ls(t,Fn()),n;if(e===6)Fo(t,r);else{if(i=t.current.alternate,!(r&30)&&!CF(i)&&(e=Wv(t,r),e===2&&(a=rw(t),a!==0&&(r=a,e=Iw(t,a))),e===1))throw n=sm,uc(t,0),Fo(t,r),ls(t,Fn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(be(345));case 2:tc(t,ts,Da);break;case 3:if(Fo(t,r),(r&130023424)===r&&(e=Ib+500-Fn(),10<e)){if(Ev(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Wr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=dw(tc.bind(null,t,ts,Da),e);break}tc(t,ts,Da);break;case 4:if(Fo(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-vi(r);a=1<<o,o=e[o],o>i&&(i=o),r&=~a}if(r=i,r=Fn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*EF(r/1960))-r,10<r){t.timeoutHandle=dw(tc.bind(null,t,ts,Da),r);break}tc(t,ts,Da);break;case 5:tc(t,ts,Da);break;default:throw Error(be(329))}}}return ls(t,Fn()),t.callbackNode===n?dI.bind(null,t):null}function Iw(t,e){var n=If;return t.current.memoizedState.isDehydrated&&(uc(t,e).flags|=256),t=Wv(t,e),t!==2&&(e=ts,ts=n,e!==null&&Aw(e)),t}function Aw(t){ts===null?ts=t:ts.push.apply(ts,t)}function CF(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Ni(a(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Fo(t,e){for(e&=~Pb,e&=~ny,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vi(e),r=1<<n;t[n]=-1,e&=~r}}function XE(t){if(Ot&6)throw Error(be(327));id();var e=Ev(t,0);if(!(e&1))return ls(t,Fn()),null;var n=Wv(t,e);if(t.tag!==0&&n===2){var r=rw(t);r!==0&&(e=r,n=Iw(t,r))}if(n===1)throw n=sm,uc(t,0),Fo(t,e),ls(t,Fn()),n;if(n===6)throw Error(be(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,tc(t,ts,Da),ls(t,Fn()),null}function Ab(t,e){var n=Ot;Ot|=1;try{return t(e)}finally{Ot=n,Ot===0&&(jd=Fn()+500,Xx&&Pl())}}function Ec(t){Zo!==null&&Zo.tag===0&&!(Ot&6)&&id();var e=Ot;Ot|=1;var n=Gs.transition,r=Gt;try{if(Gs.transition=null,Gt=1,t)return t()}finally{Gt=r,Gs.transition=n,Ot=e,!(Ot&6)&&Pl()}}function Rb(){xs=Ku.current,hn(Ku)}function uc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,rF(n)),Hn!==null)for(n=Hn.return;n!==null;){var r=n;switch(fb(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Iv();break;case 3:wd(),hn(as),hn(Pr),bb();break;case 5:wb(r);break;case 4:wd();break;case 13:hn(jn);break;case 19:hn(jn);break;case 10:vb(r.type._context);break;case 22:case 23:Rb()}n=n.return}if(dr=t,Hn=t=sl(t.current,null),vr=xs=e,rr=0,sm=null,Pb=ny=Sc=0,ts=If=null,ic!==null){for(e=0;e<ic.length;e++)if(n=ic[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=i,r.next=o}n.pending=r}ic=null}return t}function hI(t,e){do{var n=Hn;try{if(gb(),Yg.current=zv,Fv){for(var r=Sn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Fv=!1}if(Nc=0,ur=nr=Sn=null,kf=!1,tm=0,kb.current=null,n===null||n.return===null){rr=1,sm=e,Hn=null;break}e:{var a=t,o=n.return,c=n,u=e;if(e=vr,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,f=c,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var v=f.alternate;v?(f.updateQueue=v.updateQueue,f.memoizedState=v.memoizedState,f.lanes=v.lanes):(f.updateQueue=null,f.memoizedState=null)}var _=FE(o);if(_!==null){_.flags&=-257,zE(_,o,c,a,e),_.mode&1&&VE(a,h,e),e=_,u=h;var b=e.updateQueue;if(b===null){var N=new Set;N.add(u),e.updateQueue=N}else b.add(u);break e}else{if(!(e&1)){VE(a,h,e),Mb();break e}u=Error(be(426))}}else if(vn&&c.mode&1){var S=FE(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),zE(S,o,c,a,e),mb(bd(u,c));break e}}a=u=bd(u,c),rr!==4&&(rr=2),If===null?If=[a]:If.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var w=KP(a,u,e);AE(a,w);break e;case 1:c=u;var y=a.type,C=a.stateNode;if(!(a.flags&128)&&(typeof y.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(nl===null||!nl.has(C)))){a.flags|=65536,e&=-e,a.lanes|=e;var R=YP(a,c,e);AE(a,R);break e}}a=a.return}while(a!==null)}pI(n)}catch(M){e=M,Hn===n&&n!==null&&(Hn=n=n.return);continue}break}while(!0)}function fI(){var t=Uv.current;return Uv.current=zv,t===null?zv:t}function Mb(){(rr===0||rr===3||rr===2)&&(rr=4),dr===null||!(Sc&268435455)&&!(ny&268435455)||Fo(dr,vr)}function Wv(t,e){var n=Ot;Ot|=2;var r=fI();(dr!==t||vr!==e)&&(Da=null,uc(t,e));do try{TF();break}catch(i){hI(t,i)}while(!0);if(gb(),Ot=n,Uv.current=r,Hn!==null)throw Error(be(261));return dr=null,vr=0,rr}function TF(){for(;Hn!==null;)mI(Hn)}function kF(){for(;Hn!==null&&!eV();)mI(Hn)}function mI(t){var e=vI(t.alternate,t,xs);t.memoizedProps=t.pendingProps,e===null?pI(t):Hn=e,kb.current=null}function pI(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=bF(n,e),n!==null){n.flags&=32767,Hn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{rr=6,Hn=null;return}}else if(n=wF(n,e,xs),n!==null){Hn=n;return}if(e=e.sibling,e!==null){Hn=e;return}Hn=e=t}while(e!==null);rr===0&&(rr=5)}function tc(t,e,n){var r=Gt,i=Gs.transition;try{Gs.transition=null,Gt=1,PF(t,e,n,r)}finally{Gs.transition=i,Gt=r}return null}function PF(t,e,n,r){do id();while(Zo!==null);if(Ot&6)throw Error(be(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(be(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(uV(t,a),t===dr&&(Hn=dr=null,vr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||wg||(wg=!0,xI(Sv,function(){return id(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Gs.transition,Gs.transition=null;var o=Gt;Gt=1;var c=Ot;Ot|=4,kb.current=null,NF(t,n),cI(n,t),YV(cw),Cv=!!lw,cw=lw=null,t.current=n,SF(n),tV(),Ot=c,Gt=o,Gs.transition=a}else t.current=n;if(wg&&(wg=!1,Zo=t,Bv=i),a=t.pendingLanes,a===0&&(nl=null),sV(n.stateNode),ls(t,Fn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if($v)throw $v=!1,t=kw,kw=null,t;return Bv&1&&t.tag!==0&&id(),a=t.pendingLanes,a&1?t===Pw?Af++:(Af=0,Pw=t):Af=0,Pl(),null}function id(){if(Zo!==null){var t=Kk(Bv),e=Gs.transition,n=Gt;try{if(Gs.transition=null,Gt=16>t?16:t,Zo===null)var r=!1;else{if(t=Zo,Zo=null,Bv=0,Ot&6)throw Error(be(331));var i=Ot;for(Ot|=4,Be=t.current;Be!==null;){var a=Be,o=a.child;if(Be.flags&16){var c=a.deletions;if(c!==null){for(var u=0;u<c.length;u++){var h=c[u];for(Be=h;Be!==null;){var f=Be;switch(f.tag){case 0:case 11:case 15:Pf(8,f,a)}var p=f.child;if(p!==null)p.return=f,Be=p;else for(;Be!==null;){f=Be;var v=f.sibling,_=f.return;if(aI(f),f===h){Be=null;break}if(v!==null){v.return=_,Be=v;break}Be=_}}}var b=a.alternate;if(b!==null){var N=b.child;if(N!==null){b.child=null;do{var S=N.sibling;N.sibling=null,N=S}while(N!==null)}}Be=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,Be=o;else e:for(;Be!==null;){if(a=Be,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Pf(9,a,a.return)}var w=a.sibling;if(w!==null){w.return=a.return,Be=w;break e}Be=a.return}}var y=t.current;for(Be=y;Be!==null;){o=Be;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,Be=C;else e:for(o=y;Be!==null;){if(c=Be,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:ty(9,c)}}catch(M){Pn(c,c.return,M)}if(c===o){Be=null;break e}var R=c.sibling;if(R!==null){R.return=c.return,Be=R;break e}Be=c.return}}if(Ot=i,Pl(),Yi&&typeof Yi.onPostCommitFiberRoot=="function")try{Yi.onPostCommitFiberRoot(Gx,t)}catch{}r=!0}return r}finally{Gt=n,Gs.transition=e}}return!1}function JE(t,e,n){e=bd(n,e),e=KP(t,e,1),t=tl(t,e,1),e=Wr(),t!==null&&(Bm(t,1,e),ls(t,e))}function Pn(t,e,n){if(t.tag===3)JE(t,t,n);else for(;e!==null;){if(e.tag===3){JE(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(nl===null||!nl.has(r))){t=bd(n,t),t=YP(e,t,1),e=tl(e,t,1),t=Wr(),e!==null&&(Bm(e,1,t),ls(e,t));break}}e=e.return}}function IF(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Wr(),t.pingedLanes|=t.suspendedLanes&n,dr===t&&(vr&n)===n&&(rr===4||rr===3&&(vr&130023424)===vr&&500>Fn()-Ib?uc(t,0):Pb|=n),ls(t,e)}function gI(t,e){e===0&&(t.mode&1?(e=dg,dg<<=1,!(dg&130023424)&&(dg=4194304)):e=1);var n=Wr();t=Ka(t,e),t!==null&&(Bm(t,e,n),ls(t,n))}function AF(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),gI(t,n)}function RF(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(be(314))}r!==null&&r.delete(e),gI(t,n)}var vI;vI=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||as.current)rs=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return rs=!1,_F(t,e,n);rs=!!(t.flags&131072)}else rs=!1,vn&&e.flags&1048576&&wP(e,Mv,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Xg(t,e),t=e.pendingProps;var i=xd(e,Pr.current);sd(e,n),i=Nb(null,e,r,t,i,n);var a=Sb();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,os(r)?(a=!0,Av(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,yb(e),i.updater=ey,e.stateNode=i,i._reactInternals=e,xw(e,r,t,n),e=ww(null,e,r,!0,a,n)):(e.tag=0,vn&&a&&hb(e),Vr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Xg(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=DF(r),t=ci(r,t),i){case 0:e=_w(null,e,r,t,n);break e;case 1:e=BE(null,e,r,t,n);break e;case 11:e=UE(null,e,r,t,n);break e;case 14:e=$E(null,e,r,ci(r.type,t),n);break e}throw Error(be(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ci(r,i),_w(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ci(r,i),BE(t,e,r,i,n);case 3:e:{if(eI(e),t===null)throw Error(be(387));r=e.pendingProps,a=e.memoizedState,i=a.element,CP(t,e),Lv(e,r,null,n);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=bd(Error(be(423)),e),e=WE(t,e,r,n,i);break e}else if(r!==i){i=bd(Error(be(424)),e),e=WE(t,e,r,n,i);break e}else for(_s=el(e.stateNode.containerInfo.firstChild),js=e,vn=!0,hi=null,n=SP(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(yd(),r===i){e=Ya(t,e,n);break e}Vr(t,e,r,n)}e=e.child}return e;case 5:return TP(e),t===null&&pw(e),r=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,uw(r,i)?o=null:a!==null&&uw(r,a)&&(e.flags|=32),JP(t,e),Vr(t,e,o,n),e.child;case 6:return t===null&&pw(e),null;case 13:return tI(t,e,n);case 4:return _b(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=_d(e,null,r,n):Vr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ci(r,i),UE(t,e,r,i,n);case 7:return Vr(t,e,e.pendingProps,n),e.child;case 8:return Vr(t,e,e.pendingProps.children,n),e.child;case 12:return Vr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,sn(Dv,r._currentValue),r._currentValue=o,a!==null)if(Ni(a.value,o)){if(a.children===i.children&&!as.current){e=Ya(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var c=a.dependencies;if(c!==null){o=a.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(a.tag===1){u=Wa(-1,n&-n),u.tag=2;var h=a.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?u.next=u:(u.next=f.next,f.next=u),h.pending=u}}a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),gw(a.return,n,e),c.lanes|=n;break}u=u.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(be(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),gw(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Vr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,sd(e,n),i=Qs(i),r=r(i),e.flags|=1,Vr(t,e,r,n),e.child;case 14:return r=e.type,i=ci(r,e.pendingProps),i=ci(r.type,i),$E(t,e,r,i,n);case 15:return QP(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ci(r,i),Xg(t,e),e.tag=1,os(r)?(t=!0,Av(e)):t=!1,sd(e,n),ZP(e,r,i),xw(e,r,i,n),ww(null,e,r,!0,t,n);case 19:return nI(t,e,n);case 22:return XP(t,e,n)}throw Error(be(156,e.tag))};function xI(t,e){return qk(t,e)}function MF(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qs(t,e,n,r){return new MF(t,e,n,r)}function Db(t){return t=t.prototype,!(!t||!t.isReactComponent)}function DF(t){if(typeof t=="function")return Db(t)?1:0;if(t!=null){if(t=t.$$typeof,t===eb)return 11;if(t===tb)return 14}return 2}function sl(t,e){var n=t.alternate;return n===null?(n=qs(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function tv(t,e,n,r,i,a){var o=2;if(r=t,typeof t=="function")Db(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Fu:return dc(n.children,i,a,e);case J1:o=8,i|=8;break;case $_:return t=qs(12,n,e,i|2),t.elementType=$_,t.lanes=a,t;case B_:return t=qs(13,n,e,i),t.elementType=B_,t.lanes=a,t;case W_:return t=qs(19,n,e,i),t.elementType=W_,t.lanes=a,t;case Tk:return ry(n,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ek:o=10;break e;case Ck:o=9;break e;case eb:o=11;break e;case tb:o=14;break e;case Do:o=16,r=null;break e}throw Error(be(130,t==null?t:typeof t,""))}return e=qs(o,n,e,i),e.elementType=t,e.type=r,e.lanes=a,e}function dc(t,e,n,r){return t=qs(7,t,r,e),t.lanes=n,t}function ry(t,e,n,r){return t=qs(22,t,r,e),t.elementType=Tk,t.lanes=n,t.stateNode={isHidden:!1},t}function G0(t,e,n){return t=qs(6,t,null,e),t.lanes=n,t}function Z0(t,e,n){return e=qs(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function OF(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=T0(0),this.expirationTimes=T0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=T0(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ob(t,e,n,r,i,a,o,c,u){return t=new OF(t,e,n,c,u),e===1?(e=1,a===!0&&(e|=8)):e=0,a=qs(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},yb(a),t}function LF(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vu,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function yI(t){if(!t)return dl;t=t._reactInternals;e:{if(Bc(t)!==t||t.tag!==1)throw Error(be(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(os(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(be(171))}if(t.tag===1){var n=t.type;if(os(n))return yP(t,n,e)}return e}function _I(t,e,n,r,i,a,o,c,u){return t=Ob(n,r,!0,t,i,a,o,c,u),t.context=yI(null),n=t.current,r=Wr(),i=rl(n),a=Wa(r,i),a.callback=e??null,tl(n,a,i),t.current.lanes=i,Bm(t,i,r),ls(t,r),t}function sy(t,e,n,r){var i=e.current,a=Wr(),o=rl(i);return n=yI(n),e.context===null?e.context=n:e.pendingContext=n,e=Wa(a,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=tl(i,e,o),t!==null&&(xi(t,i,o,a),Kg(t,i,o)),o}function qv(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function e2(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Lb(t,e){e2(t,e),(t=t.alternate)&&e2(t,e)}function VF(){return null}var wI=typeof reportError=="function"?reportError:function(t){console.error(t)};function Vb(t){this._internalRoot=t}iy.prototype.render=Vb.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(be(409));sy(t,e,null,null)};iy.prototype.unmount=Vb.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ec(function(){sy(null,t,null,null)}),e[Za]=null}};function iy(t){this._internalRoot=t}iy.prototype.unstable_scheduleHydration=function(t){if(t){var e=Xk();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Vo.length&&e!==0&&e<Vo[n].priority;n++);Vo.splice(n,0,t),n===0&&eP(t)}};function Fb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ay(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function t2(){}function FF(t,e,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var h=qv(o);a.call(h)}}var o=_I(e,r,t,0,null,!1,!1,"",t2);return t._reactRootContainer=o,t[Za]=o.current,Yf(t.nodeType===8?t.parentNode:t),Ec(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var c=r;r=function(){var h=qv(u);c.call(h)}}var u=Ob(t,0,!1,null,null,!1,!1,"",t2);return t._reactRootContainer=u,t[Za]=u.current,Yf(t.nodeType===8?t.parentNode:t),Ec(function(){sy(e,u,n,r)}),u}function oy(t,e,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var c=i;i=function(){var u=qv(o);c.call(u)}}sy(e,o,t,i)}else o=FF(n,e,t,i,r);return qv(o)}Yk=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=df(e.pendingLanes);n!==0&&(sb(e,n|1),ls(e,Fn()),!(Ot&6)&&(jd=Fn()+500,Pl()))}break;case 13:Ec(function(){var r=Ka(t,1);if(r!==null){var i=Wr();xi(r,t,1,i)}}),Lb(t,1)}};ib=function(t){if(t.tag===13){var e=Ka(t,134217728);if(e!==null){var n=Wr();xi(e,t,134217728,n)}Lb(t,134217728)}};Qk=function(t){if(t.tag===13){var e=rl(t),n=Ka(t,e);if(n!==null){var r=Wr();xi(n,t,e,r)}Lb(t,e)}};Xk=function(){return Gt};Jk=function(t,e){var n=Gt;try{return Gt=t,e()}finally{Gt=n}};ew=function(t,e,n){switch(e){case"input":if(G_(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Qx(r);if(!i)throw Error(be(90));Pk(r),G_(r,i)}}}break;case"textarea":Ak(t,n);break;case"select":e=n.value,e!=null&&ed(t,!!n.multiple,e,!1)}};Fk=Ab;zk=Ec;var zF={usingClientEntryPoint:!1,Events:[qm,Bu,Qx,Lk,Vk,Ab]},ef={findFiberByHostInstance:sc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},UF={bundleType:ef.bundleType,version:ef.version,rendererPackageName:ef.rendererPackageName,rendererConfig:ef.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:uo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Bk(t),t===null?null:t.stateNode},findFiberByHostInstance:ef.findFiberByHostInstance||VF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bg.isDisabled&&bg.supportsFiber)try{Gx=bg.inject(UF),Yi=bg}catch{}}Ps.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zF;Ps.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fb(e))throw Error(be(200));return LF(t,e,null,n)};Ps.createRoot=function(t,e){if(!Fb(t))throw Error(be(299));var n=!1,r="",i=wI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Ob(t,1,!1,null,null,n,!1,r,i),t[Za]=e.current,Yf(t.nodeType===8?t.parentNode:t),new Vb(e)};Ps.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(be(188)):(t=Object.keys(t).join(","),Error(be(268,t)));return t=Bk(e),t=t===null?null:t.stateNode,t};Ps.flushSync=function(t){return Ec(t)};Ps.hydrate=function(t,e,n){if(!ay(e))throw Error(be(200));return oy(null,t,e,!0,n)};Ps.hydrateRoot=function(t,e,n){if(!Fb(t))throw Error(be(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",o=wI;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=_I(e,null,t,1,n??null,i,!1,a,o),t[Za]=e.current,Yf(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new iy(e)};Ps.render=function(t,e,n){if(!ay(e))throw Error(be(200));return oy(null,t,e,!1,n)};Ps.unmountComponentAtNode=function(t){if(!ay(t))throw Error(be(40));return t._reactRootContainer?(Ec(function(){oy(null,null,t,!1,function(){t._reactRootContainer=null,t[Za]=null})}),!0):!1};Ps.unstable_batchedUpdates=Ab;Ps.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ay(n))throw Error(be(200));if(t==null||t._reactInternals===void 0)throw Error(be(38));return oy(t,e,n,!1,r)};Ps.version="18.3.1-next-f1338f8080-20240426";function bI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bI)}catch(t){console.error(t)}}bI(),bk.exports=Ps;var Qd=bk.exports;const $F=Um(Qd);var jI,n2=Qd;jI=n2.createRoot,n2.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function im(){return im=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},im.apply(this,arguments)}var Ko;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ko||(Ko={}));const r2="popstate";function BF(t){t===void 0&&(t={});function e(i,a){let{pathname:o="/",search:c="",hash:u=""}=Wc(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Rw("",{pathname:o,search:c,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){let o=i.document.querySelector("base"),c="";if(o&&o.getAttribute("href")){let u=i.location.href,h=u.indexOf("#");c=h===-1?u:u.slice(0,h)}return c+"#"+(typeof a=="string"?a:Hv(a))}function r(i,a){zb(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return qF(e,n,r,t)}function Un(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function zb(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function WF(){return Math.random().toString(36).substr(2,8)}function s2(t,e){return{usr:t.state,key:t.key,idx:e}}function Rw(t,e,n,r){return n===void 0&&(n=null),im({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Wc(e):e,{state:n,key:e&&e.key||r||WF()})}function Hv(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Wc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function qF(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,c=Ko.Pop,u=null,h=f();h==null&&(h=0,o.replaceState(im({},o.state,{idx:h}),""));function f(){return(o.state||{idx:null}).idx}function p(){c=Ko.Pop;let S=f(),w=S==null?null:S-h;h=S,u&&u({action:c,location:N.location,delta:w})}function v(S,w){c=Ko.Push;let y=Rw(N.location,S,w);n&&n(y,S),h=f()+1;let C=s2(y,h),R=N.createHref(y);try{o.pushState(C,"",R)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(R)}a&&u&&u({action:c,location:N.location,delta:1})}function _(S,w){c=Ko.Replace;let y=Rw(N.location,S,w);n&&n(y,S),h=f();let C=s2(y,h),R=N.createHref(y);o.replaceState(C,"",R),a&&u&&u({action:c,location:N.location,delta:0})}function b(S){let w=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof S=="string"?S:Hv(S);return y=y.replace(/ $/,"%20"),Un(w,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,w)}let N={get action(){return c},get location(){return t(i,o)},listen(S){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(r2,p),u=S,()=>{i.removeEventListener(r2,p),u=null}},createHref(S){return e(i,S)},createURL:b,encodeLocation(S){let w=b(S);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:v,replace:_,go(S){return o.go(S)}};return N}var i2;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(i2||(i2={}));function HF(t,e,n){return n===void 0&&(n="/"),GF(t,e,n,!1)}function GF(t,e,n,r){let i=typeof e=="string"?Wc(e):e,a=Ub(i.pathname||"/",n);if(a==null)return null;let o=NI(t);ZF(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let h=i8(a);c=r8(o[u],h,r)}return c}function NI(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(a,o,c)=>{let u={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};u.relativePath.startsWith("/")&&(Un(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let h=il([r,u.relativePath]),f=n.concat(u);a.children&&a.children.length>0&&(Un(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),NI(a.children,e,f,h)),!(a.path==null&&!a.index)&&e.push({path:h,score:t8(h,a.index),routesMeta:f})};return t.forEach((a,o)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))i(a,o);else for(let u of SI(a.path))i(a,o,u)}),e}function SI(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=SI(r.join("/")),c=[];return c.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function ZF(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:n8(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const KF=/^:[\w-]+$/,YF=3,QF=2,XF=1,JF=10,e8=-2,a2=t=>t==="*";function t8(t,e){let n=t.split("/"),r=n.length;return n.some(a2)&&(r+=e8),e&&(r+=QF),n.filter(i=>!a2(i)).reduce((i,a)=>i+(KF.test(a)?YF:a===""?XF:JF),r)}function n8(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function r8(t,e,n){let{routesMeta:r}=t,i={},a="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],h=c===r.length-1,f=a==="/"?e:e.slice(a.length)||"/",p=o2({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},f),v=u.route;if(!p&&h&&n&&!r[r.length-1].route.index&&(p=o2({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:il([a,p.pathname]),pathnameBase:c8(il([a,p.pathnameBase])),route:v}),p.pathnameBase!=="/"&&(a=il([a,p.pathnameBase]))}return o}function o2(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=s8(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((h,f,p)=>{let{paramName:v,isOptional:_}=f;if(v==="*"){let N=c[p]||"";o=a.slice(0,a.length-N.length).replace(/(.)\/+$/,"$1")}const b=c[p];return _&&!b?h[v]=void 0:h[v]=(b||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:o,pattern:t}}function s8(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),zb(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function i8(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return zb(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ub(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function a8(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Wc(t):t;return{pathname:n?n.startsWith("/")?n:o8(n,e):e,search:u8(r),hash:d8(i)}}function o8(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function K0(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function l8(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function $b(t,e){let n=l8(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Bb(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Wc(t):(i=im({},t),Un(!i.pathname||!i.pathname.includes("?"),K0("?","pathname","search",i)),Un(!i.pathname||!i.pathname.includes("#"),K0("#","pathname","hash",i)),Un(!i.search||!i.search.includes("#"),K0("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,c;if(o==null)c=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let v=o.split("/");for(;v[0]==="..";)v.shift(),p-=1;i.pathname=v.join("/")}c=p>=0?e[p]:"/"}let u=a8(i,c),h=o&&o!=="/"&&o.endsWith("/"),f=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(h||f)&&(u.pathname+="/"),u}const il=t=>t.join("/").replace(/\/\/+/g,"/"),c8=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),u8=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,d8=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function h8(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const EI=["post","put","patch","delete"];new Set(EI);const f8=["get",...EI];new Set(f8);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function am(){return am=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},am.apply(this,arguments)}const Wb=x.createContext(null),m8=x.createContext(null),Il=x.createContext(null),ly=x.createContext(null),ho=x.createContext({outlet:null,matches:[],isDataRoute:!1}),CI=x.createContext(null);function p8(t,e){let{relative:n}=e===void 0?{}:e;Xd()||Un(!1);let{basename:r,navigator:i}=x.useContext(Il),{hash:a,pathname:o,search:c}=kI(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:il([r,o])),i.createHref({pathname:u,search:c,hash:a})}function Xd(){return x.useContext(ly)!=null}function fo(){return Xd()||Un(!1),x.useContext(ly).location}function TI(t){x.useContext(Il).static||x.useLayoutEffect(t)}function ar(){let{isDataRoute:t}=x.useContext(ho);return t?T8():g8()}function g8(){Xd()||Un(!1);let t=x.useContext(Wb),{basename:e,future:n,navigator:r}=x.useContext(Il),{matches:i}=x.useContext(ho),{pathname:a}=fo(),o=JSON.stringify($b(i,n.v7_relativeSplatPath)),c=x.useRef(!1);return TI(()=>{c.current=!0}),x.useCallback(function(h,f){if(f===void 0&&(f={}),!c.current)return;if(typeof h=="number"){r.go(h);return}let p=Bb(h,JSON.parse(o),a,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:il([e,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[e,r,o,a,t])}function qb(){let{matches:t}=x.useContext(ho),e=t[t.length-1];return e?e.params:{}}function kI(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=x.useContext(Il),{matches:i}=x.useContext(ho),{pathname:a}=fo(),o=JSON.stringify($b(i,r.v7_relativeSplatPath));return x.useMemo(()=>Bb(t,JSON.parse(o),a,n==="path"),[t,o,a,n])}function v8(t,e){return x8(t,e)}function x8(t,e,n,r){Xd()||Un(!1);let{navigator:i}=x.useContext(Il),{matches:a}=x.useContext(ho),o=a[a.length-1],c=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let h=fo(),f;if(e){var p;let S=typeof e=="string"?Wc(e):e;u==="/"||(p=S.pathname)!=null&&p.startsWith(u)||Un(!1),f=S}else f=h;let v=f.pathname||"/",_=v;if(u!=="/"){let S=u.replace(/^\//,"").split("/");_="/"+v.replace(/^\//,"").split("/").slice(S.length).join("/")}let b=HF(t,{pathname:_}),N=j8(b&&b.map(S=>Object.assign({},S,{params:Object.assign({},c,S.params),pathname:il([u,i.encodeLocation?i.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?u:il([u,i.encodeLocation?i.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),a,n,r);return e&&N?x.createElement(ly.Provider,{value:{location:am({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Ko.Pop}},N):N}function y8(){let t=C8(),e=h8(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),n?x.createElement("pre",{style:i},n):null,null)}const _8=x.createElement(y8,null);class w8 extends x.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?x.createElement(ho.Provider,{value:this.props.routeContext},x.createElement(CI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function b8(t){let{routeContext:e,match:n,children:r}=t,i=x.useContext(Wb);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),x.createElement(ho.Provider,{value:e},r)}function j8(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,c=(i=n)==null?void 0:i.errors;if(c!=null){let f=o.findIndex(p=>p.route.id&&(c==null?void 0:c[p.route.id])!==void 0);f>=0||Un(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let p=o[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=f),p.route.id){let{loaderData:v,errors:_}=n,b=p.route.loader&&v[p.route.id]===void 0&&(!_||_[p.route.id]===void 0);if(p.route.lazy||b){u=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((f,p,v)=>{let _,b=!1,N=null,S=null;n&&(_=c&&p.route.id?c[p.route.id]:void 0,N=p.route.errorElement||_8,u&&(h<0&&v===0?(b=!0,S=null):h===v&&(b=!0,S=p.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,v+1)),y=()=>{let C;return _?C=N:b?C=S:p.route.Component?C=x.createElement(p.route.Component,null):p.route.element?C=p.route.element:C=f,x.createElement(b8,{match:p,routeContext:{outlet:f,matches:w,isDataRoute:n!=null},children:C})};return n&&(p.route.ErrorBoundary||p.route.errorElement||v===0)?x.createElement(w8,{location:n.location,revalidation:n.revalidation,component:N,error:_,children:y(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):y()},null)}var PI=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(PI||{}),Gv=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Gv||{});function N8(t){let e=x.useContext(Wb);return e||Un(!1),e}function S8(t){let e=x.useContext(m8);return e||Un(!1),e}function E8(t){let e=x.useContext(ho);return e||Un(!1),e}function II(t){let e=E8(),n=e.matches[e.matches.length-1];return n.route.id||Un(!1),n.route.id}function C8(){var t;let e=x.useContext(CI),n=S8(Gv.UseRouteError),r=II(Gv.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function T8(){let{router:t}=N8(PI.UseNavigateStable),e=II(Gv.UseNavigateStable),n=x.useRef(!1);return TI(()=>{n.current=!0}),x.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,am({fromRouteId:e},a)))},[t,e])}function k8(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function P8(t){let{to:e,replace:n,state:r,relative:i}=t;Xd()||Un(!1);let{future:a,static:o}=x.useContext(Il),{matches:c}=x.useContext(ho),{pathname:u}=fo(),h=ar(),f=Bb(e,$b(c,a.v7_relativeSplatPath),u,i==="path"),p=JSON.stringify(f);return x.useEffect(()=>h(JSON.parse(p),{replace:n,state:r,relative:i}),[h,p,i,n,r]),null}function _n(t){Un(!1)}function I8(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Ko.Pop,navigator:a,static:o=!1,future:c}=t;Xd()&&Un(!1);let u=e.replace(/^\/*/,"/"),h=x.useMemo(()=>({basename:u,navigator:a,static:o,future:am({v7_relativeSplatPath:!1},c)}),[u,c,a,o]);typeof r=="string"&&(r=Wc(r));let{pathname:f="/",search:p="",hash:v="",state:_=null,key:b="default"}=r,N=x.useMemo(()=>{let S=Ub(f,u);return S==null?null:{location:{pathname:S,search:p,hash:v,state:_,key:b},navigationType:i}},[u,f,p,v,_,b,i]);return N==null?null:x.createElement(Il.Provider,{value:h},x.createElement(ly.Provider,{children:n,value:N}))}function A8(t){let{children:e,location:n}=t;return v8(Mw(e),n)}new Promise(()=>{});function Mw(t,e){e===void 0&&(e=[]);let n=[];return x.Children.forEach(t,(r,i)=>{if(!x.isValidElement(r))return;let a=[...e,i];if(r.type===x.Fragment){n.push.apply(n,Mw(r.props.children,a));return}r.type!==_n&&Un(!1),!r.props.index||!r.props.children||Un(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Mw(r.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dw(){return Dw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dw.apply(this,arguments)}function R8(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function M8(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function D8(t,e){return t.button===0&&(!e||e==="_self")&&!M8(t)}function Ow(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function O8(t,e){let n=Ow(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}const L8=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],V8="6";try{window.__reactRouterVersion=V8}catch{}const F8="startTransition",l2=_k[F8];function z8(t){let{basename:e,children:n,future:r,window:i}=t,a=x.useRef();a.current==null&&(a.current=BF({window:i,v5Compat:!0}));let o=a.current,[c,u]=x.useState({action:o.action,location:o.location}),{v7_startTransition:h}=r||{},f=x.useCallback(p=>{h&&l2?l2(()=>u(p)):u(p)},[u,h]);return x.useLayoutEffect(()=>o.listen(f),[o,f]),x.useEffect(()=>k8(r),[r]),x.createElement(I8,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:o,future:r})}const U8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,De=x.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:a,replace:o,state:c,target:u,to:h,preventScrollReset:f,viewTransition:p}=e,v=R8(e,L8),{basename:_}=x.useContext(Il),b,N=!1;if(typeof h=="string"&&$8.test(h)&&(b=h,U8))try{let C=new URL(window.location.href),R=h.startsWith("//")?new URL(C.protocol+h):new URL(h),M=Ub(R.pathname,_);R.origin===C.origin&&M!=null?h=M+R.search+R.hash:N=!0}catch{}let S=p8(h,{relative:i}),w=B8(h,{replace:o,state:c,target:u,preventScrollReset:f,relative:i,viewTransition:p});function y(C){r&&r(C),C.defaultPrevented||w(C)}return x.createElement("a",Dw({},v,{href:b||S,onClick:N||a?r:y,ref:n,target:u}))});var c2;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(c2||(c2={}));var u2;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(u2||(u2={}));function B8(t,e){let{target:n,replace:r,state:i,preventScrollReset:a,relative:o,viewTransition:c}=e===void 0?{}:e,u=ar(),h=fo(),f=kI(t,{relative:o});return x.useCallback(p=>{if(D8(p,n)){p.preventDefault();let v=r!==void 0?r:Hv(h)===Hv(f);u(t,{replace:v,state:i,preventScrollReset:a,relative:o,viewTransition:c})}},[h,u,f,r,i,n,t,a,o,c])}function Hb(t){let e=x.useRef(Ow(t)),n=x.useRef(!1),r=fo(),i=x.useMemo(()=>O8(r.search,n.current?null:e.current),[r.search]),a=ar(),o=x.useCallback((c,u)=>{const h=Ow(typeof c=="function"?c(i):c);n.current=!0,a("?"+h,u)},[a,i]);return[i,o]}var Zv=["light","dark"],Gb="(prefers-color-scheme: dark)",W8=typeof window>"u",Zb=x.createContext(void 0),q8={setTheme:t=>{},themes:[]},H8=()=>{var t;return(t=x.useContext(Zb))!=null?t:q8},G8=t=>x.useContext(Zb)?t.children:x.createElement(K8,{...t}),Z8=["light","dark"],K8=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:i="theme",themes:a=Z8,defaultTheme:o=n?"system":"light",attribute:c="data-theme",value:u,children:h,nonce:f})=>{let[p,v]=x.useState(()=>d2(i,o)),[_,b]=x.useState(()=>d2(i)),N=u?Object.values(u):a,S=x.useCallback(R=>{let M=R;if(!M)return;R==="system"&&n&&(M=h2());let B=u?u[M]:M,O=e?Q8():null,D=document.documentElement;if(c==="class"?(D.classList.remove(...N),B&&D.classList.add(B)):B?D.setAttribute(c,B):D.removeAttribute(c),r){let F=Zv.includes(o)?o:null,I=Zv.includes(M)?M:F;D.style.colorScheme=I}O==null||O()},[]),w=x.useCallback(R=>{let M=typeof R=="function"?R(R):R;v(M);try{localStorage.setItem(i,M)}catch{}},[t]),y=x.useCallback(R=>{let M=h2(R);b(M),p==="system"&&n&&!t&&S("system")},[p,t]);x.useEffect(()=>{let R=window.matchMedia(Gb);return R.addListener(y),y(R),()=>R.removeListener(y)},[y]),x.useEffect(()=>{let R=M=>{if(M.key!==i)return;let B=M.newValue||o;w(B)};return window.addEventListener("storage",R),()=>window.removeEventListener("storage",R)},[w]),x.useEffect(()=>{S(t??p)},[t,p]);let C=x.useMemo(()=>({theme:p,setTheme:w,forcedTheme:t,resolvedTheme:p==="system"?_:p,themes:n?[...a,"system"]:a,systemTheme:n?_:void 0}),[p,w,t,_,n,a]);return x.createElement(Zb.Provider,{value:C},x.createElement(Y8,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:n,enableColorScheme:r,storageKey:i,themes:a,defaultTheme:o,attribute:c,value:u,children:h,attrs:N,nonce:f}),h)},Y8=x.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:i,defaultTheme:a,value:o,attrs:c,nonce:u})=>{let h=a==="system",f=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${c.map(b=>`'${b}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,p=i?Zv.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",v=(b,N=!1,S=!0)=>{let w=o?o[b]:b,y=N?b+"|| ''":`'${w}'`,C="";return i&&S&&!N&&Zv.includes(b)&&(C+=`d.style.colorScheme = '${b}';`),n==="class"?N||w?C+=`c.add(${y})`:C+="null":w&&(C+=`d[s](n,${y})`),C},_=t?`!function(){${f}${v(t)}}()`:r?`!function(){try{${f}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${h})){var t='${Gb}',m=window.matchMedia(t);if(m.media!==t||m.matches){${v("dark")}}else{${v("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${v(o?"x[e]":"e",!0)}}${h?"":"else{"+v(a,!1,!1)+"}"}${p}}catch(e){}}()`:`!function(){try{${f}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${v(o?"x[e]":"e",!0)}}else{${v(a,!1,!1)};}${p}}catch(t){}}();`;return x.createElement("script",{nonce:u,dangerouslySetInnerHTML:{__html:_}})}),d2=(t,e)=>{if(W8)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},Q8=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},h2=t=>(t||(t=window.matchMedia(Gb)),t.matches?"dark":"light");let X8={data:""},J8=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||X8,e9=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,t9=/\/\*[^]*?\*\/|  +/g,f2=/\n+/g,zo=(t,e)=>{let n="",r="",i="";for(let a in t){let o=t[a];a[0]=="@"?a[1]=="i"?n=a+" "+o+";":r+=a[1]=="f"?zo(o,a):a+"{"+zo(o,a[1]=="k"?"":e)+"}":typeof o=="object"?r+=zo(o,e?e.replace(/([^,])+/g,c=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,c):c?c+" "+u:u)):a):o!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=zo.p?zo.p(a,o):a+":"+o+";")}return n+(e&&i?e+"{"+i+"}":i)+r},Pa={},AI=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+AI(t[n]);return e}return t},n9=(t,e,n,r,i)=>{let a=AI(t),o=Pa[a]||(Pa[a]=(u=>{let h=0,f=11;for(;h<u.length;)f=101*f+u.charCodeAt(h++)>>>0;return"go"+f})(a));if(!Pa[o]){let u=a!==t?t:(h=>{let f,p,v=[{}];for(;f=e9.exec(h.replace(t9,""));)f[4]?v.shift():f[3]?(p=f[3].replace(f2," ").trim(),v.unshift(v[0][p]=v[0][p]||{})):v[0][f[1]]=f[2].replace(f2," ").trim();return v[0]})(t);Pa[o]=zo(i?{["@keyframes "+o]:u}:u,n?"":"."+o)}let c=n&&Pa.g?Pa.g:null;return n&&(Pa.g=Pa[o]),((u,h,f,p)=>{p?h.data=h.data.replace(p,u):h.data.indexOf(u)===-1&&(h.data=f?u+h.data:h.data+u)})(Pa[o],e,r,c),o},r9=(t,e,n)=>t.reduce((r,i,a)=>{let o=e[a];if(o&&o.call){let c=o(n),u=c&&c.props&&c.props.className||/^go/.test(c)&&c;o=u?"."+u:c&&typeof c=="object"?c.props?"":zo(c,""):c===!1?"":c}return r+i+(o??"")},"");function cy(t){let e=this||{},n=t.call?t(e.p):t;return n9(n.unshift?n.raw?r9(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,J8(e.target),e.g,e.o,e.k)}let RI,Lw,Vw;cy.bind({g:1});let Qa=cy.bind({k:1});function s9(t,e,n,r){zo.p=e,RI=t,Lw=n,Vw=r}function Al(t,e){let n=this||{};return function(){let r=arguments;function i(a,o){let c=Object.assign({},a),u=c.className||i.className;n.p=Object.assign({theme:Lw&&Lw()},c),n.o=/ *go\d+/.test(u),c.className=cy.apply(n,r)+(u?" "+u:"");let h=t;return t[0]&&(h=c.as||t,delete c.as),Vw&&h[0]&&Vw(c),RI(h,c)}return i}}var i9=t=>typeof t=="function",Kv=(t,e)=>i9(t)?t(e):t,a9=(()=>{let t=0;return()=>(++t).toString()})(),MI=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),o9=20,DI=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,o9)};case 1:return{...t,toasts:t.toasts.map(a=>a.id===e.toast.id?{...a,...e.toast}:a)};case 2:let{toast:n}=e;return DI(t,{type:t.toasts.find(a=>a.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=e;return{...t,toasts:t.toasts.map(a=>a.id===r||r===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(a=>a.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+i}))}}},nv=[],oc={toasts:[],pausedAt:void 0},qc=t=>{oc=DI(oc,t),nv.forEach(e=>{e(oc)})},l9={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},c9=(t={})=>{let[e,n]=x.useState(oc),r=x.useRef(oc);x.useEffect(()=>(r.current!==oc&&n(oc),nv.push(n),()=>{let a=nv.indexOf(n);a>-1&&nv.splice(a,1)}),[]);let i=e.toasts.map(a=>{var o,c,u;return{...t,...t[a.type],...a,removeDelay:a.removeDelay||((o=t[a.type])==null?void 0:o.removeDelay)||(t==null?void 0:t.removeDelay),duration:a.duration||((c=t[a.type])==null?void 0:c.duration)||(t==null?void 0:t.duration)||l9[a.type],style:{...t.style,...(u=t[a.type])==null?void 0:u.style,...a.style}}});return{...e,toasts:i}},u9=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||a9()}),Gm=t=>(e,n)=>{let r=u9(e,t,n);return qc({type:2,toast:r}),r.id},Nn=(t,e)=>Gm("blank")(t,e);Nn.error=Gm("error");Nn.success=Gm("success");Nn.loading=Gm("loading");Nn.custom=Gm("custom");Nn.dismiss=t=>{qc({type:3,toastId:t})};Nn.remove=t=>qc({type:4,toastId:t});Nn.promise=(t,e,n)=>{let r=Nn.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let a=e.success?Kv(e.success,i):void 0;return a?Nn.success(a,{id:r,...n,...n==null?void 0:n.success}):Nn.dismiss(r),i}).catch(i=>{let a=e.error?Kv(e.error,i):void 0;a?Nn.error(a,{id:r,...n,...n==null?void 0:n.error}):Nn.dismiss(r)}),t};var d9=(t,e)=>{qc({type:1,toast:{id:t,height:e}})},h9=()=>{qc({type:5,time:Date.now()})},Rf=new Map,f9=1e3,m9=(t,e=f9)=>{if(Rf.has(t))return;let n=setTimeout(()=>{Rf.delete(t),qc({type:4,toastId:t})},e);Rf.set(t,n)},p9=t=>{let{toasts:e,pausedAt:n}=c9(t);x.useEffect(()=>{if(n)return;let a=Date.now(),o=e.map(c=>{if(c.duration===1/0)return;let u=(c.duration||0)+c.pauseDuration-(a-c.createdAt);if(u<0){c.visible&&Nn.dismiss(c.id);return}return setTimeout(()=>Nn.dismiss(c.id),u)});return()=>{o.forEach(c=>c&&clearTimeout(c))}},[e,n]);let r=x.useCallback(()=>{n&&qc({type:6,time:Date.now()})},[n]),i=x.useCallback((a,o)=>{let{reverseOrder:c=!1,gutter:u=8,defaultPosition:h}=o||{},f=e.filter(_=>(_.position||h)===(a.position||h)&&_.height),p=f.findIndex(_=>_.id===a.id),v=f.filter((_,b)=>b<p&&_.visible).length;return f.filter(_=>_.visible).slice(...c?[v+1]:[0,v]).reduce((_,b)=>_+(b.height||0)+u,0)},[e]);return x.useEffect(()=>{e.forEach(a=>{if(a.dismissed)m9(a.id,a.removeDelay);else{let o=Rf.get(a.id);o&&(clearTimeout(o),Rf.delete(a.id))}})},[e]),{toasts:e,handlers:{updateHeight:d9,startPause:h9,endPause:r,calculateOffset:i}}},g9=Qa`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,v9=Qa`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,x9=Qa`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,y9=Al("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${g9} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${v9} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${x9} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,_9=Qa`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,w9=Al("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${_9} 1s linear infinite;
`,b9=Qa`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,j9=Qa`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,N9=Al("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${b9} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${j9} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,S9=Al("div")`
  position: absolute;
`,E9=Al("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,C9=Qa`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,T9=Al("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${C9} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,k9=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?x.createElement(T9,null,e):e:n==="blank"?null:x.createElement(E9,null,x.createElement(w9,{...r}),n!=="loading"&&x.createElement(S9,null,n==="error"?x.createElement(y9,{...r}):x.createElement(N9,{...r})))},P9=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,I9=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,A9="0%{opacity:0;} 100%{opacity:1;}",R9="0%{opacity:1;} 100%{opacity:0;}",M9=Al("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,D9=Al("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,O9=(t,e)=>{let n=t.includes("top")?1:-1,[r,i]=MI()?[A9,R9]:[P9(n),I9(n)];return{animation:e?`${Qa(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Qa(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},L9=x.memo(({toast:t,position:e,style:n,children:r})=>{let i=t.height?O9(t.position||e||"top-center",t.visible):{opacity:0},a=x.createElement(k9,{toast:t}),o=x.createElement(D9,{...t.ariaProps},Kv(t.message,t));return x.createElement(M9,{className:t.className,style:{...i,...n,...t.style}},typeof r=="function"?r({icon:a,message:o}):x.createElement(x.Fragment,null,a,o))});s9(x.createElement);var V9=({id:t,className:e,style:n,onHeightUpdate:r,children:i})=>{let a=x.useCallback(o=>{if(o){let c=()=>{let u=o.getBoundingClientRect().height;r(t,u)};c(),new MutationObserver(c).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return x.createElement("div",{ref:a,className:e,style:n},i)},F9=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:MI()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...i}},z9=cy`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,jg=16,U9=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:i,containerStyle:a,containerClassName:o})=>{let{toasts:c,handlers:u}=p9(n);return x.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:jg,left:jg,right:jg,bottom:jg,pointerEvents:"none",...a},className:o,onMouseEnter:u.startPause,onMouseLeave:u.endPause},c.map(h=>{let f=h.position||e,p=u.calculateOffset(h,{reverseOrder:t,gutter:r,defaultPosition:e}),v=F9(f,p);return x.createElement(V9,{id:h.id,key:h.id,onHeightUpdate:u.updateHeight,className:h.visible?z9:"",style:v},h.type==="custom"?Kv(h.message,h):i?i(h):x.createElement(L9,{toast:h,position:f}))}))},me=Nn,m2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},$9=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],o=t[n++],c=t[n++],u=((i&7)<<18|(a&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},LI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],o=i+1<t.length,c=o?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,f=a>>2,p=(a&3)<<4|c>>4;let v=(c&15)<<2|h>>6,_=h&63;u||(_=64,o||(v=64)),r.push(n[f],n[p],n[v],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(OI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):$9(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||c==null||h==null||p==null)throw new B9;const v=a<<2|c>>4;if(r.push(v),h!==64){const _=c<<4&240|h>>2;if(r.push(_),p!==64){const b=h<<6&192|p;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class B9 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const W9=function(t){const e=OI(t);return LI.encodeByteArray(e,!0)},Yv=function(t){return W9(t).replace(/\./g,"")},VI=function(t){try{return LI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q9(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H9=()=>q9().__FIREBASE_DEFAULTS__,G9=()=>{if(typeof process>"u"||typeof m2>"u")return;const t=m2.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Z9=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&VI(t[1]);return e&&JSON.parse(e)},uy=()=>{try{return H9()||G9()||Z9()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},FI=t=>{var e,n;return(n=(e=uy())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},zI=t=>{const e=FI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},UI=()=>{var t;return(t=uy())===null||t===void 0?void 0:t.config},$I=t=>{var e;return(e=uy())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K9{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Yv(JSON.stringify(n)),Yv(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Y9(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ir())}function Q9(){var t;const e=(t=uy())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function X9(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function J9(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ez(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tz(){const t=Ir();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function nz(){return!Q9()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rz(){try{return typeof indexedDB=="object"}catch{return!1}}function sz(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iz="FirebaseError";class ha extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=iz,Object.setPrototypeOf(this,ha.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zm.prototype.create)}}class Zm{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?az(a,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new ha(i,c,r)}}function az(t,e){return t.replace(oz,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const oz=/\{\$([^}]+)}/g;function lz(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Qv(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],o=e[i];if(p2(a)&&p2(o)){if(!Qv(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function p2(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ff(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function mf(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function cz(t,e){const n=new uz(t,e);return n.subscribe.bind(n)}class uz{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");dz(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Y0),i.error===void 0&&(i.error=Y0),i.complete===void 0&&(i.complete=Y0);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dz(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Y0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(t){return t&&t._delegate?t._delegate:t}class hl{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hz{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new K9;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mz(e))try{this.getOrInitializeService({instanceIdentifier:nc})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=nc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=nc){return this.instances.has(e)}getOptions(e=nc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);r===c&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const o=this.instances.get(i);return o&&e(o,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:fz(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=nc){return this.component?this.component.multipleInstances?e:nc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function fz(t){return t===nc?void 0:t}function mz(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pz{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new hz(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var At;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(At||(At={}));const gz={debug:At.DEBUG,verbose:At.VERBOSE,info:At.INFO,warn:At.WARN,error:At.ERROR,silent:At.SILENT},vz=At.INFO,xz={[At.DEBUG]:"log",[At.VERBOSE]:"log",[At.INFO]:"info",[At.WARN]:"warn",[At.ERROR]:"error"},yz=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=xz[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Kb{constructor(e){this.name=e,this._logLevel=vz,this._logHandler=yz,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in At))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gz[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,At.DEBUG,...e),this._logHandler(this,At.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,At.VERBOSE,...e),this._logHandler(this,At.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,At.INFO,...e),this._logHandler(this,At.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,At.WARN,...e),this._logHandler(this,At.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,At.ERROR,...e),this._logHandler(this,At.ERROR,...e)}}const _z=(t,e)=>e.some(n=>t instanceof n);let g2,v2;function wz(){return g2||(g2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bz(){return v2||(v2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const WI=new WeakMap,Fw=new WeakMap,qI=new WeakMap,Q0=new WeakMap,Yb=new WeakMap;function jz(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(al(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&WI.set(n,t)}).catch(()=>{}),Yb.set(e,t),e}function Nz(t){if(Fw.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});Fw.set(t,e)}let zw={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Fw.get(t);if(e==="objectStoreNames")return t.objectStoreNames||qI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return al(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Sz(t){zw=t(zw)}function Ez(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(X0(this),e,...n);return qI.set(r,e.sort?e.sort():[e]),al(r)}:bz().includes(t)?function(...e){return t.apply(X0(this),e),al(WI.get(this))}:function(...e){return al(t.apply(X0(this),e))}}function Cz(t){return typeof t=="function"?Ez(t):(t instanceof IDBTransaction&&Nz(t),_z(t,wz())?new Proxy(t,zw):t)}function al(t){if(t instanceof IDBRequest)return jz(t);if(Q0.has(t))return Q0.get(t);const e=Cz(t);return e!==t&&(Q0.set(t,e),Yb.set(e,t)),e}const X0=t=>Yb.get(t);function Tz(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(t,e),c=al(o);return r&&o.addEventListener("upgradeneeded",u=>{r(al(o.result),u.oldVersion,u.newVersion,al(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{a&&u.addEventListener("close",()=>a()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const kz=["get","getKey","getAll","getAllKeys","count"],Pz=["put","add","delete","clear"],J0=new Map;function x2(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(J0.get(e))return J0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Pz.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||kz.includes(n)))return;const a=async function(o,...c){const u=this.transaction(o,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(c.shift())),(await Promise.all([h[n](...c),i&&u.done]))[0]};return J0.set(e,a),a}Sz(t=>({...t,get:(e,n,r)=>x2(e,n)||t.get(e,n,r),has:(e,n)=>!!x2(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iz{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Az(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Az(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Uw="@firebase/app",y2="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa=new Kb("@firebase/app"),Rz="@firebase/app-compat",Mz="@firebase/analytics-compat",Dz="@firebase/analytics",Oz="@firebase/app-check-compat",Lz="@firebase/app-check",Vz="@firebase/auth",Fz="@firebase/auth-compat",zz="@firebase/database",Uz="@firebase/data-connect",$z="@firebase/database-compat",Bz="@firebase/functions",Wz="@firebase/functions-compat",qz="@firebase/installations",Hz="@firebase/installations-compat",Gz="@firebase/messaging",Zz="@firebase/messaging-compat",Kz="@firebase/performance",Yz="@firebase/performance-compat",Qz="@firebase/remote-config",Xz="@firebase/remote-config-compat",Jz="@firebase/storage",eU="@firebase/storage-compat",tU="@firebase/firestore",nU="@firebase/vertexai-preview",rU="@firebase/firestore-compat",sU="firebase",iU="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w="[DEFAULT]",aU={[Uw]:"fire-core",[Rz]:"fire-core-compat",[Dz]:"fire-analytics",[Mz]:"fire-analytics-compat",[Lz]:"fire-app-check",[Oz]:"fire-app-check-compat",[Vz]:"fire-auth",[Fz]:"fire-auth-compat",[zz]:"fire-rtdb",[Uz]:"fire-data-connect",[$z]:"fire-rtdb-compat",[Bz]:"fire-fn",[Wz]:"fire-fn-compat",[qz]:"fire-iid",[Hz]:"fire-iid-compat",[Gz]:"fire-fcm",[Zz]:"fire-fcm-compat",[Kz]:"fire-perf",[Yz]:"fire-perf-compat",[Qz]:"fire-rc",[Xz]:"fire-rc-compat",[Jz]:"fire-gcs",[eU]:"fire-gcs-compat",[tU]:"fire-fst",[rU]:"fire-fst-compat",[nU]:"fire-vertex","fire-js":"fire-js",[sU]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv=new Map,oU=new Map,Bw=new Map;function _2(t,e){try{t.container.addComponent(e)}catch(n){Xa.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Cc(t){const e=t.name;if(Bw.has(e))return Xa.debug(`There were multiple attempts to register component ${e}.`),!1;Bw.set(e,t);for(const n of Xv.values())_2(n,t);for(const n of oU.values())_2(n,t);return!0}function dy(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Hs(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ol=new Zm("app","Firebase",lU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ol.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc=iU;function HI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:$w,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ol.create("bad-app-name",{appName:String(i)});if(n||(n=UI()),!n)throw ol.create("no-options");const a=Xv.get(i);if(a){if(Qv(n,a.options)&&Qv(r,a.config))return a;throw ol.create("duplicate-app",{appName:i})}const o=new pz(i);for(const u of Bw.values())o.addComponent(u);const c=new cU(n,r,o);return Xv.set(i,c),c}function Qb(t=$w){const e=Xv.get(t);if(!e&&t===$w&&UI())return HI();if(!e)throw ol.create("no-app",{appName:t});return e}function Xi(t,e,n){var r;let i=(r=aU[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const a=i.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xa.warn(c.join(" "));return}Cc(new hl(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uU="firebase-heartbeat-database",dU=1,om="firebase-heartbeat-store";let e_=null;function GI(){return e_||(e_=Tz(uU,dU,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(om)}catch(n){console.warn(n)}}}}).catch(t=>{throw ol.create("idb-open",{originalErrorMessage:t.message})})),e_}async function hU(t){try{const n=(await GI()).transaction(om),r=await n.objectStore(om).get(ZI(t));return await n.done,r}catch(e){if(e instanceof ha)Xa.warn(e.message);else{const n=ol.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Xa.warn(n.message)}}}async function w2(t,e){try{const r=(await GI()).transaction(om,"readwrite");await r.objectStore(om).put(e,ZI(t)),await r.done}catch(n){if(n instanceof ha)Xa.warn(n.message);else{const r=ol.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Xa.warn(r.message)}}}function ZI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fU=1024,mU=30*24*60*60*1e3;class pU{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new vU(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=b2();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const c=new Date(o.date).valueOf();return Date.now()-c<=mU}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Xa.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=b2(),{heartbeatsToSend:r,unsentEntries:i}=gU(this._heartbeatsCache.heartbeats),a=Yv(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Xa.warn(n),""}}}function b2(){return new Date().toISOString().substring(0,10)}function gU(t,e=fU){const n=[];let r=t.slice();for(const i of t){const a=n.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),j2(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),j2(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class vU{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rz()?sz().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await hU(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return w2(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return w2(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function j2(t){return Yv(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xU(t){Cc(new hl("platform-logger",e=>new Iz(e),"PRIVATE")),Cc(new hl("heartbeat",e=>new pU(e),"PRIVATE")),Xi(Uw,y2,t),Xi(Uw,y2,"esm2017"),Xi("fire-js","")}xU("");var Bi=function(){return Bi=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Bi.apply(this,arguments)};function Ym(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function yU(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function KI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _U=KI,YI=new Zm("auth","Firebase",KI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv=new Kb("@firebase/auth");function wU(t,...e){Jv.logLevel<=At.WARN&&Jv.warn(`Auth (${Hc}): ${t}`,...e)}function rv(t,...e){Jv.logLevel<=At.ERROR&&Jv.error(`Auth (${Hc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Js(t,...e){throw Jb(t,...e)}function Ji(t,...e){return Jb(t,...e)}function Xb(t,e,n){const r=Object.assign(Object.assign({},_U()),{[e]:n});return new Zm("auth","Firebase",r).create(e,{appName:t.name})}function yi(t){return Xb(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bU(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Js(t,"argument-error"),Xb(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Jb(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return YI.create(t,...e)}function it(t,e,...n){if(!t)throw Jb(e,...n)}function za(t){const e="INTERNAL ASSERTION FAILED: "+t;throw rv(e),new Error(e)}function Ja(t,e){t||za(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ww(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function jU(){return N2()==="http:"||N2()==="https:"}function N2(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jU()||J9()||"connection"in navigator)?navigator.onLine:!0}function SU(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ja(n>e,"Short delay should be less than long delay!"),this.isMobile=Y9()||ez()}get(){return NU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ej(t,e){Ja(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;za("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;za("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;za("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CU=new Qm(3e4,6e4);function mo(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ii(t,e,n,r,i={}){return XI(t,i,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const c=Km(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:u},a);return X9()||(h.referrerPolicy="no-referrer"),QI.fetch()(JI(t,t.config.apiHost,n,c),h)})}async function XI(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},EU),e);try{const i=new kU(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw Ng(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const c=a.ok?o.errorMessage:o.error.message,[u,h]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ng(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Ng(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Ng(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Xb(t,f,h);Js(t,f)}}catch(i){if(i instanceof ha)throw i;Js(t,"network-request-failed",{message:String(i)})}}async function Xm(t,e,n,r,i={}){const a=await Ii(t,e,n,r,i);return"mfaPendingCredential"in a&&Js(t,"multi-factor-auth-required",{_serverResponse:a}),a}function JI(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?ej(t.config,i):`${t.config.apiScheme}://${i}`}function TU(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class kU{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ji(this.auth,"network-request-failed")),CU.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ng(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ji(t,e,r);return i.customData._tokenResponse=n,i}function S2(t){return t!==void 0&&t.enterprise!==void 0}class PU{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return TU(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function IU(t,e){return Ii(t,"GET","/v2/recaptchaConfig",mo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AU(t,e){return Ii(t,"POST","/v1/accounts:delete",e)}async function eA(t,e){return Ii(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mf(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function RU(t,e=!1){const n=zt(t),r=await n.getIdToken(e),i=tj(r);it(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:Mf(t_(i.auth_time)),issuedAtTime:Mf(t_(i.iat)),expirationTime:Mf(t_(i.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function t_(t){return Number(t)*1e3}function tj(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return rv("JWT malformed, contained fewer than 3 sections"),null;try{const i=VI(n);return i?JSON.parse(i):(rv("Failed to decode base64 JWT payload"),null)}catch(i){return rv("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function E2(t){const e=tj(t);return it(e,"internal-error"),it(typeof e.exp<"u","internal-error"),it(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ha&&MU(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function MU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mf(this.lastLoginAt),this.creationTime=Mf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ex(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Tc(t,eA(n,{idToken:r}));it(i==null?void 0:i.users.length,n,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?tA(a.providerUserInfo):[],c=OU(t.providerData,o),u=t.isAnonymous,h=!(t.email&&a.passwordHash)&&!(c!=null&&c.length),f=u?h:!1,p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new qw(a.createdAt,a.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function pf(t){const e=zt(t);await ex(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function OU(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function tA(t){return t.map(e=>{var{providerId:n}=e,r=Ym(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LU(t,e){const n=await XI(t,{},async()=>{const r=Km({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,o=JI(t,i,"/v1/token",`key=${a}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",QI.fetch()(o,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function VU(t,e){return Ii(t,"POST","/v2/accounts:revokeToken",mo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){it(e.idToken,"internal-error"),it(typeof e.idToken<"u","internal-error"),it(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):E2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){it(e.length!==0,"internal-error");const n=E2(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(it(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await LU(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,o=new ad;return r&&(it(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(it(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(it(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ad,this.toJSON())}_performRefresh(){return za("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Po(t,e){it(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ua{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,a=Ym(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new DU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new qw(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Tc(this,this.stsTokenManager.getToken(this.auth,e));return it(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return RU(this,e)}reload(){return pf(this)}_assign(e){this!==e&&(it(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ua(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){it(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ex(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Hs(this.auth.app))return Promise.reject(yi(this.auth));const e=await this.getIdToken();return await Tc(this,AU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,a,o,c,u,h,f;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,v=(i=n.email)!==null&&i!==void 0?i:void 0,_=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,b=(o=n.photoURL)!==null&&o!==void 0?o:void 0,N=(c=n.tenantId)!==null&&c!==void 0?c:void 0,S=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,w=(h=n.createdAt)!==null&&h!==void 0?h:void 0,y=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:C,emailVerified:R,isAnonymous:M,providerData:B,stsTokenManager:O}=n;it(C&&O,e,"internal-error");const D=ad.fromJSON(this.name,O);it(typeof C=="string",e,"internal-error"),Po(p,e.name),Po(v,e.name),it(typeof R=="boolean",e,"internal-error"),it(typeof M=="boolean",e,"internal-error"),Po(_,e.name),Po(b,e.name),Po(N,e.name),Po(S,e.name),Po(w,e.name),Po(y,e.name);const F=new Ua({uid:C,auth:e,email:v,emailVerified:R,displayName:p,isAnonymous:M,photoURL:b,phoneNumber:_,tenantId:N,stsTokenManager:D,createdAt:w,lastLoginAt:y});return B&&Array.isArray(B)&&(F.providerData=B.map(I=>Object.assign({},I))),S&&(F._redirectEventId=S),F}static async _fromIdTokenResponse(e,n,r=!1){const i=new ad;i.updateFromServerResponse(n);const a=new Ua({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await ex(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];it(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?tA(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),c=new ad;c.updateFromIdToken(r);const u=new Ua({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new qw(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2=new Map;function $a(t){Ja(t instanceof Function,"Expected a class definition");let e=C2.get(t);return e?(Ja(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,C2.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}nA.type="NONE";const T2=nA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(t,e,n){return`firebase:${t}:${e}:${n}`}class od{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=sv(this.userKey,i.apiKey,a),this.fullPersistenceKey=sv("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ua._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new od($a(T2),e,r);const i=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=i[0]||$a(T2);const o=sv(r,e.config.apiKey,e.name);let c=null;for(const h of n)try{const f=await h._get(o);if(f){const p=Ua._fromJSON(e,f);h!==a&&(c=p),a=h;break}}catch{}const u=i.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new od(a,e,r):(a=u[0],c&&await a._set(o,c.toJSON()),await Promise.all(n.map(async h=>{if(h!==a)try{await h._remove(o)}catch{}})),new od(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k2(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(aA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(rA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lA(e))return"Blackberry";if(cA(e))return"Webos";if(sA(e))return"Safari";if((e.includes("chrome/")||iA(e))&&!e.includes("edge/"))return"Chrome";if(oA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function rA(t=Ir()){return/firefox\//i.test(t)}function sA(t=Ir()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function iA(t=Ir()){return/crios\//i.test(t)}function aA(t=Ir()){return/iemobile/i.test(t)}function oA(t=Ir()){return/android/i.test(t)}function lA(t=Ir()){return/blackberry/i.test(t)}function cA(t=Ir()){return/webos/i.test(t)}function nj(t=Ir()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function FU(t=Ir()){var e;return nj(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function zU(){return tz()&&document.documentMode===10}function uA(t=Ir()){return nj(t)||oA(t)||cA(t)||lA(t)||/windows phone/i.test(t)||aA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(t,e=[]){let n;switch(t){case"Browser":n=k2(Ir());break;case"Worker":n=`${k2(Ir())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Hc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((o,c)=>{try{const u=e(a);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $U(t,e={}){return Ii(t,"GET","/v2/passwordPolicy",mo(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BU=6;class WU{constructor(e){var n,r,i,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:BU,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,a,o,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(a=u.containsUppercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qU{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new P2(this),this.idTokenSubscription=new P2(this),this.beforeStateQueue=new UU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=YI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=$a(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await od.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await eA(this,{idToken:e}),r=await Ua._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Hs(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(i=u.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return it(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ex(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=SU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Hs(this.app))return Promise.reject(yi(this));const n=e?zt(e):null;return n&&it(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&it(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Hs(this.app)?Promise.reject(yi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Hs(this.app)?Promise.reject(yi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($a(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await $U(this),n=new WU(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Zm("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await VU(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&$a(e)||this._popupRedirectResolver;it(n,this,"argument-error"),this.redirectPersistenceManager=await od.create(this,[$a(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(it(c,this,"internal-error"),c.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return it(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=dA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&wU(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function po(t){return zt(t)}class P2{constructor(e){this.auth=e,this.observer=null,this.addObserver=cz(n=>this.observer=n)}get next(){return it(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function HU(t){hy=t}function hA(t){return hy.loadJS(t)}function GU(){return hy.recaptchaEnterpriseScript}function ZU(){return hy.gapiScript}function KU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const YU="recaptcha-enterprise",QU="NO_RECAPTCHA";class XU{constructor(e){this.type=YU,this.auth=po(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,c)=>{IU(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new PU(u);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,o(h.siteKey)}}).catch(u=>{c(u)})})}function i(a,o,c){const u=window.grecaptcha;S2(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(h=>{o(h)}).catch(()=>{o(QU)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,o)=>{r(this.auth).then(c=>{if(!n&&S2(window.grecaptcha))i(c,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=GU();u.length!==0&&(u+=c),hA(u).then(()=>{i(c,a,o)}).catch(h=>{o(h)})}}).catch(c=>{o(c)})})}}async function I2(t,e,n,r=!1){const i=new XU(t);let a;try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Hw(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await I2(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await I2(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JU(t,e){const n=dy(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(Qv(a,e??{}))return i;Js(i,"already-initialized")}return n.initialize({options:e})}function e$(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map($a);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function t$(t,e,n){const r=po(t);it(r._canInitEmulator,r,"emulator-config-failed"),it(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=fA(e),{host:o,port:c}=n$(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${a}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),r$()}function fA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function n$(t){const e=fA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:A2(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:A2(o)}}}function A2(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function r$(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return za("not implemented")}_getIdTokenResponse(e){return za("not implemented")}_linkToIdToken(e,n){return za("not implemented")}_getReauthenticationResolver(e){return za("not implemented")}}async function s$(t,e){return Ii(t,"POST","/v1/accounts:update",e)}async function i$(t,e){return Ii(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a$(t,e){return Xm(t,"POST","/v1/accounts:signInWithPassword",mo(t,e))}async function o$(t,e){return Ii(t,"POST","/v1/accounts:sendOobCode",mo(t,e))}async function l$(t,e){return o$(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c$(t,e){return Xm(t,"POST","/v1/accounts:signInWithEmailLink",mo(t,e))}async function u$(t,e){return Xm(t,"POST","/v1/accounts:signInWithEmailLink",mo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm extends rj{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new lm(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new lm(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hw(e,n,"signInWithPassword",a$);case"emailLink":return c$(e,{email:this._email,oobCode:this._password});default:Js(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hw(e,r,"signUpPassword",i$);case"emailLink":return u$(e,{idToken:n,email:this._email,oobCode:this._password});default:Js(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ld(t,e){return Xm(t,"POST","/v1/accounts:signInWithIdp",mo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d$="http://localhost";class kc extends rj{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new kc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Js("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,a=Ym(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new kc(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ld(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ld(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ld(e,n)}buildRequest(){const e={requestUri:d$,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Km(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h$(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function f$(t){const e=ff(mf(t)).link,n=e?ff(mf(e)).deep_link_id:null,r=ff(mf(t)).deep_link_id;return(r?ff(mf(r)).link:null)||r||n||e||t}class sj{constructor(e){var n,r,i,a,o,c;const u=ff(mf(e)),h=(n=u.apiKey)!==null&&n!==void 0?n:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,p=h$((i=u.mode)!==null&&i!==void 0?i:null);it(h&&f&&p,"argument-error"),this.apiKey=h,this.operation=p,this.code=f,this.continueUrl=(a=u.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=f$(e);try{return new sj(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(){this.providerId=fl.PROVIDER_ID}static credential(e,n){return lm._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=sj.parseLink(n);return it(r,"argument-error"),lm._fromEmailAndCode(e,r.code,r.tenantId)}}fl.PROVIDER_ID="password";fl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";fl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm extends ij{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo extends Jm{constructor(){super("facebook.com")}static credential(e){return kc._fromParams({providerId:Uo.PROVIDER_ID,signInMethod:Uo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Uo.credentialFromTaggedObject(e)}static credentialFromError(e){return Uo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Uo.credential(e.oauthAccessToken)}catch{return null}}}Uo.FACEBOOK_SIGN_IN_METHOD="facebook.com";Uo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La extends Jm{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return kc._fromParams({providerId:La.PROVIDER_ID,signInMethod:La.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return La.credentialFromTaggedObject(e)}static credentialFromError(e){return La.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return La.credential(n,r)}catch{return null}}}La.GOOGLE_SIGN_IN_METHOD="google.com";La.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o extends Jm{constructor(){super("github.com")}static credential(e){return kc._fromParams({providerId:$o.PROVIDER_ID,signInMethod:$o.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $o.credentialFromTaggedObject(e)}static credentialFromError(e){return $o.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $o.credential(e.oauthAccessToken)}catch{return null}}}$o.GITHUB_SIGN_IN_METHOD="github.com";$o.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo extends Jm{constructor(){super("twitter.com")}static credential(e,n){return kc._fromParams({providerId:Bo.PROVIDER_ID,signInMethod:Bo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Bo.credentialFromTaggedObject(e)}static credentialFromError(e){return Bo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Bo.credential(n,r)}catch{return null}}}Bo.TWITTER_SIGN_IN_METHOD="twitter.com";Bo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m$(t,e){return Xm(t,"POST","/v1/accounts:signUp",mo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await Ua._fromIdTokenResponse(e,r,i),o=R2(r);return new Pc({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=R2(r);return new Pc({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function R2(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx extends ha{constructor(e,n,r,i){var a;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,tx.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new tx(e,n,r,i)}}function mA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?tx._fromErrorAndOperation(t,a,e,r):a})}async function p$(t,e,n=!1){const r=await Tc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Pc._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pA(t,e,n=!1){const{auth:r}=t;if(Hs(r.app))return Promise.reject(yi(r));const i="reauthenticate";try{const a=await Tc(t,mA(r,i,e,t),n);it(a.idToken,r,"internal-error");const o=tj(a.idToken);it(o,r,"internal-error");const{sub:c}=o;return it(t.uid===c,r,"user-mismatch"),Pc._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Js(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gA(t,e,n=!1){if(Hs(t.app))return Promise.reject(yi(t));const r="signIn",i=await mA(t,r,e),a=await Pc._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function g$(t,e){return gA(po(t),e)}async function M2(t,e){return pA(zt(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v$(t,e,n){var r;it(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),it(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(it(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(it(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vA(t){const e=po(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function xA(t,e,n){if(Hs(t.app))return Promise.reject(yi(t));const r=po(t),o=await Hw(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",m$).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&vA(t),u}),c=await Pc._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function x$(t,e,n){return Hs(t.app)?Promise.reject(yi(t)):g$(zt(t),fl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&vA(t),r})}async function n_(t,e){const n=zt(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&v$(n.auth,i,e);const{email:a}=await l$(n.auth,i);a!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y$(t,e){return Ii(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cm(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=zt(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Tc(r,y$(r.auth,a));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const c=r.providerData.find(({providerId:u})=>u==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function _$(t,e){const n=zt(t);return Hs(n.auth.app)?Promise.reject(yi(n.auth)):yA(n,e,null)}function w$(t,e){return yA(zt(t),null,e)}async function yA(t,e,n){const{auth:r}=t,a={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(a.email=e),n&&(a.password=n);const o=await Tc(t,s$(r,a));await t._updateTokensIfNecessary(o,!0)}function b$(t,e,n,r){return zt(t).onIdTokenChanged(e,n,r)}function j$(t,e,n){return zt(t).beforeAuthStateChanged(e,n)}function N$(t,e,n,r){return zt(t).onAuthStateChanged(e,n,r)}function S$(t){return zt(t).signOut()}async function E$(t){return zt(t).delete()}const nx="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(nx,"1"),this.storage.removeItem(nx),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C$=1e3,T$=10;class wA extends _A{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=uA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);zU()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,T$):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},C$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}wA.type="LOCAL";const k$=wA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA extends _A{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}bA.type="SESSION";const jA=bA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P$(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new fy(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(o).map(async h=>h(n.origin,a)),u=await P$(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}fy.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aj(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I${constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((c,u)=>{const h=aj("",20);i.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const v=p;if(v.data.eventId===h)switch(v.data.status){case"ack":clearTimeout(f),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(v.data.response);break;default:clearTimeout(f),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ea(){return window}function A$(t){ea().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(){return typeof ea().WorkerGlobalScope<"u"&&typeof ea().importScripts=="function"}async function R$(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function M$(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function D$(){return NA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA="firebaseLocalStorageDb",O$=1,rx="firebaseLocalStorage",EA="fbase_key";class ep{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function my(t,e){return t.transaction([rx],e?"readwrite":"readonly").objectStore(rx)}function L$(){const t=indexedDB.deleteDatabase(SA);return new ep(t).toPromise()}function Gw(){const t=indexedDB.open(SA,O$);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(rx,{keyPath:EA})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(rx)?e(r):(r.close(),await L$(),e(await Gw()))})})}async function D2(t,e,n){const r=my(t,!0).put({[EA]:e,value:n});return new ep(r).toPromise()}async function V$(t,e){const n=my(t,!1).get(e),r=await new ep(n).toPromise();return r===void 0?null:r.value}function O2(t,e){const n=my(t,!0).delete(e);return new ep(n).toPromise()}const F$=800,z$=3;class CA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Gw(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>z$)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return NA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=fy._getInstance(D$()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await R$(),!this.activeServiceWorker)return;this.sender=new I$(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||M$()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Gw();return await D2(e,nx,"1"),await O2(e,nx),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>D2(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>V$(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>O2(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=my(i,!1).getAll();return new ep(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),F$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}CA.type="LOCAL";const U$=CA;new Qm(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(t,e){return e?$a(e):(it(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj extends rj{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ld(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ld(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ld(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function $$(t){return gA(t.auth,new oj(t),t.bypassAuthState)}function B$(t){const{auth:e,user:n}=t;return it(n,e,"internal-error"),pA(n,new oj(t),t.bypassAuthState)}async function W$(t){const{auth:e,user:n}=t;return it(n,e,"internal-error"),p$(n,new oj(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $$;case"linkViaPopup":case"linkViaRedirect":return W$;case"reauthViaPopup":case"reauthViaRedirect":return B$;default:Js(this.auth,"internal-error")}}resolve(e){Ja(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ja(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q$=new Qm(2e3,1e4);class Yu extends kA{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Yu.currentPopupAction&&Yu.currentPopupAction.cancel(),Yu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return it(e,this.auth,"internal-error"),e}async onExecution(){Ja(this.filter.length===1,"Popup operations only handle one event");const e=aj();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ji(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ji(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Yu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ji(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,q$.get())};e()}}Yu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H$="pendingRedirect",iv=new Map;class G$ extends kA{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=iv.get(this.auth._key());if(!e){try{const r=await Z$(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}iv.set(this.auth._key(),e)}return this.bypassAuthState||iv.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Z$(t,e){const n=IA(e),r=PA(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function K$(t,e){return PA(t)._set(IA(e),"true")}function Y$(t,e){iv.set(t._key(),e)}function PA(t){return $a(t._redirectPersistence)}function IA(t){return sv(H$,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q$(t,e,n){return X$(t,e,n)}async function X$(t,e,n){if(Hs(t.app))return Promise.reject(yi(t));const r=po(t);bU(t,e,ij),await r._initializationPromise;const i=TA(r,n);return await K$(i,r),i._openRedirect(r,e,"signInViaRedirect")}async function J$(t,e){return await po(t)._initializationPromise,AA(t,e,!1)}async function AA(t,e,n=!1){if(Hs(t.app))return Promise.reject(yi(t));const r=po(t),i=TA(r,e),o=await new G$(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eB=10*60*1e3;class tB{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!nB(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!RA(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ji(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=eB&&this.cachedEventUids.clear(),this.cachedEventUids.has(L2(e))}saveEventToCache(e){this.cachedEventUids.add(L2(e)),this.lastProcessedEventTime=Date.now()}}function L2(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function RA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function nB(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return RA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rB(t,e={}){return Ii(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iB=/^https?/;async function aB(t){if(t.config.emulator)return;const{authorizedDomains:e}=await rB(t);for(const n of e)try{if(oB(n))return}catch{}Js(t,"unauthorized-domain")}function oB(t){const e=Ww(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!iB.test(n))return!1;if(sB.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lB=new Qm(3e4,6e4);function V2(){const t=ea().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function cB(t){return new Promise((e,n)=>{var r,i,a;function o(){V2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{V2(),n(Ji(t,"network-request-failed"))},timeout:lB.get()})}if(!((i=(r=ea().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=ea().gapi)===null||a===void 0)&&a.load)o();else{const c=KU("iframefcb");return ea()[c]=()=>{gapi.load?o():n(Ji(t,"network-request-failed"))},hA(`${ZU()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw av=null,e})}let av=null;function uB(t){return av=av||cB(t),av}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dB=new Qm(5e3,15e3),hB="__/auth/iframe",fB="emulator/auth/iframe",mB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gB(t){const e=t.config;it(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ej(e,fB):`https://${t.config.authDomain}/${hB}`,r={apiKey:e.apiKey,appName:t.name,v:Hc},i=pB.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Km(r).slice(1)}`}async function vB(t){const e=await uB(t),n=ea().gapi;return it(n,t,"internal-error"),e.open({where:document.body,url:gB(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mB,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const o=Ji(t,"network-request-failed"),c=ea().setTimeout(()=>{a(o)},dB.get());function u(){ea().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yB=500,_B=600,wB="_blank",bB="http://localhost";class F2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function jB(t,e,n,r=yB,i=_B){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},xB),{width:r.toString(),height:i.toString(),top:a,left:o}),h=Ir().toLowerCase();n&&(c=iA(h)?wB:n),rA(h)&&(e=e||bB,u.scrollbars="yes");const f=Object.entries(u).reduce((v,[_,b])=>`${v}${_}=${b},`,"");if(FU(h)&&c!=="_self")return NB(e||"",c),new F2(null);const p=window.open(e||"",c,f);it(p,t,"popup-blocked");try{p.focus()}catch{}return new F2(p)}function NB(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SB="__/auth/handler",EB="emulator/auth/handler",CB=encodeURIComponent("fac");async function z2(t,e,n,r,i,a){it(t.config.authDomain,t,"auth-domain-config-required"),it(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Hc,eventId:i};if(e instanceof ij){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",lz(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof Jm){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const u=await t._getAppCheckToken(),h=u?`#${CB}=${encodeURIComponent(u)}`:"";return`${TB(t)}?${Km(c).slice(1)}${h}`}function TB({config:t}){return t.emulator?ej(t,EB):`https://${t.authDomain}/${SB}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_="webStorageSupport";class kB{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jA,this._completeRedirectFn=AA,this._overrideRedirectResult=Y$}async _openPopup(e,n,r,i){var a;Ja((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await z2(e,n,r,Ww(),i);return jB(e,o,aj())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await z2(e,n,r,Ww(),i);return A$(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(Ja(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await vB(e),r=new tB(e);return n.register("authEvent",i=>(it(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(r_,{type:r_},i=>{var a;const o=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[r_];o!==void 0&&n(!!o),Js(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=aB(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return uA()||sA()||nj()}}const PB=kB;var U2="@firebase/auth",$2="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IB{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){it(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AB(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function RB(t){Cc(new hl("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;it(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dA(t)},h=new qU(r,i,a,u);return e$(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Cc(new hl("auth-internal",e=>{const n=po(e.getProvider("auth").getImmediate());return(r=>new IB(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xi(U2,$2,AB(t)),Xi(U2,$2,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MB=5*60,DB=$I("authIdTokenMaxAge")||MB;let B2=null;const OB=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>DB)return;const i=n==null?void 0:n.token;B2!==i&&(B2=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function LB(t=Qb()){const e=dy(t,"auth");if(e.isInitialized())return e.getImmediate();const n=JU(t,{popupRedirectResolver:PB,persistence:[U$,k$,jA]}),r=$I("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=OB(a.toString());j$(n,o,()=>o(n.currentUser)),b$(n,c=>o(c))}}const i=FI("auth");return i&&t$(n,`http://${i}`),n}function VB(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}HU({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=Ji("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",VB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});RB("Browser");var W2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hc,MA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,D){function F(){}F.prototype=D.prototype,O.D=D.prototype,O.prototype=new F,O.prototype.constructor=O,O.C=function(I,V,k){for(var P=Array(arguments.length-2),q=2;q<arguments.length;q++)P[q-2]=arguments[q];return D.prototype[V].apply(I,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(O,D,F){F||(F=0);var I=Array(16);if(typeof D=="string")for(var V=0;16>V;++V)I[V]=D.charCodeAt(F++)|D.charCodeAt(F++)<<8|D.charCodeAt(F++)<<16|D.charCodeAt(F++)<<24;else for(V=0;16>V;++V)I[V]=D[F++]|D[F++]<<8|D[F++]<<16|D[F++]<<24;D=O.g[0],F=O.g[1],V=O.g[2];var k=O.g[3],P=D+(k^F&(V^k))+I[0]+3614090360&4294967295;D=F+(P<<7&4294967295|P>>>25),P=k+(V^D&(F^V))+I[1]+3905402710&4294967295,k=D+(P<<12&4294967295|P>>>20),P=V+(F^k&(D^F))+I[2]+606105819&4294967295,V=k+(P<<17&4294967295|P>>>15),P=F+(D^V&(k^D))+I[3]+3250441966&4294967295,F=V+(P<<22&4294967295|P>>>10),P=D+(k^F&(V^k))+I[4]+4118548399&4294967295,D=F+(P<<7&4294967295|P>>>25),P=k+(V^D&(F^V))+I[5]+1200080426&4294967295,k=D+(P<<12&4294967295|P>>>20),P=V+(F^k&(D^F))+I[6]+2821735955&4294967295,V=k+(P<<17&4294967295|P>>>15),P=F+(D^V&(k^D))+I[7]+4249261313&4294967295,F=V+(P<<22&4294967295|P>>>10),P=D+(k^F&(V^k))+I[8]+1770035416&4294967295,D=F+(P<<7&4294967295|P>>>25),P=k+(V^D&(F^V))+I[9]+2336552879&4294967295,k=D+(P<<12&4294967295|P>>>20),P=V+(F^k&(D^F))+I[10]+4294925233&4294967295,V=k+(P<<17&4294967295|P>>>15),P=F+(D^V&(k^D))+I[11]+2304563134&4294967295,F=V+(P<<22&4294967295|P>>>10),P=D+(k^F&(V^k))+I[12]+1804603682&4294967295,D=F+(P<<7&4294967295|P>>>25),P=k+(V^D&(F^V))+I[13]+4254626195&4294967295,k=D+(P<<12&4294967295|P>>>20),P=V+(F^k&(D^F))+I[14]+2792965006&4294967295,V=k+(P<<17&4294967295|P>>>15),P=F+(D^V&(k^D))+I[15]+1236535329&4294967295,F=V+(P<<22&4294967295|P>>>10),P=D+(V^k&(F^V))+I[1]+4129170786&4294967295,D=F+(P<<5&4294967295|P>>>27),P=k+(F^V&(D^F))+I[6]+3225465664&4294967295,k=D+(P<<9&4294967295|P>>>23),P=V+(D^F&(k^D))+I[11]+643717713&4294967295,V=k+(P<<14&4294967295|P>>>18),P=F+(k^D&(V^k))+I[0]+3921069994&4294967295,F=V+(P<<20&4294967295|P>>>12),P=D+(V^k&(F^V))+I[5]+3593408605&4294967295,D=F+(P<<5&4294967295|P>>>27),P=k+(F^V&(D^F))+I[10]+38016083&4294967295,k=D+(P<<9&4294967295|P>>>23),P=V+(D^F&(k^D))+I[15]+3634488961&4294967295,V=k+(P<<14&4294967295|P>>>18),P=F+(k^D&(V^k))+I[4]+3889429448&4294967295,F=V+(P<<20&4294967295|P>>>12),P=D+(V^k&(F^V))+I[9]+568446438&4294967295,D=F+(P<<5&4294967295|P>>>27),P=k+(F^V&(D^F))+I[14]+3275163606&4294967295,k=D+(P<<9&4294967295|P>>>23),P=V+(D^F&(k^D))+I[3]+4107603335&4294967295,V=k+(P<<14&4294967295|P>>>18),P=F+(k^D&(V^k))+I[8]+1163531501&4294967295,F=V+(P<<20&4294967295|P>>>12),P=D+(V^k&(F^V))+I[13]+2850285829&4294967295,D=F+(P<<5&4294967295|P>>>27),P=k+(F^V&(D^F))+I[2]+4243563512&4294967295,k=D+(P<<9&4294967295|P>>>23),P=V+(D^F&(k^D))+I[7]+1735328473&4294967295,V=k+(P<<14&4294967295|P>>>18),P=F+(k^D&(V^k))+I[12]+2368359562&4294967295,F=V+(P<<20&4294967295|P>>>12),P=D+(F^V^k)+I[5]+4294588738&4294967295,D=F+(P<<4&4294967295|P>>>28),P=k+(D^F^V)+I[8]+2272392833&4294967295,k=D+(P<<11&4294967295|P>>>21),P=V+(k^D^F)+I[11]+1839030562&4294967295,V=k+(P<<16&4294967295|P>>>16),P=F+(V^k^D)+I[14]+4259657740&4294967295,F=V+(P<<23&4294967295|P>>>9),P=D+(F^V^k)+I[1]+2763975236&4294967295,D=F+(P<<4&4294967295|P>>>28),P=k+(D^F^V)+I[4]+1272893353&4294967295,k=D+(P<<11&4294967295|P>>>21),P=V+(k^D^F)+I[7]+4139469664&4294967295,V=k+(P<<16&4294967295|P>>>16),P=F+(V^k^D)+I[10]+3200236656&4294967295,F=V+(P<<23&4294967295|P>>>9),P=D+(F^V^k)+I[13]+681279174&4294967295,D=F+(P<<4&4294967295|P>>>28),P=k+(D^F^V)+I[0]+3936430074&4294967295,k=D+(P<<11&4294967295|P>>>21),P=V+(k^D^F)+I[3]+3572445317&4294967295,V=k+(P<<16&4294967295|P>>>16),P=F+(V^k^D)+I[6]+76029189&4294967295,F=V+(P<<23&4294967295|P>>>9),P=D+(F^V^k)+I[9]+3654602809&4294967295,D=F+(P<<4&4294967295|P>>>28),P=k+(D^F^V)+I[12]+3873151461&4294967295,k=D+(P<<11&4294967295|P>>>21),P=V+(k^D^F)+I[15]+530742520&4294967295,V=k+(P<<16&4294967295|P>>>16),P=F+(V^k^D)+I[2]+3299628645&4294967295,F=V+(P<<23&4294967295|P>>>9),P=D+(V^(F|~k))+I[0]+4096336452&4294967295,D=F+(P<<6&4294967295|P>>>26),P=k+(F^(D|~V))+I[7]+1126891415&4294967295,k=D+(P<<10&4294967295|P>>>22),P=V+(D^(k|~F))+I[14]+2878612391&4294967295,V=k+(P<<15&4294967295|P>>>17),P=F+(k^(V|~D))+I[5]+4237533241&4294967295,F=V+(P<<21&4294967295|P>>>11),P=D+(V^(F|~k))+I[12]+1700485571&4294967295,D=F+(P<<6&4294967295|P>>>26),P=k+(F^(D|~V))+I[3]+2399980690&4294967295,k=D+(P<<10&4294967295|P>>>22),P=V+(D^(k|~F))+I[10]+4293915773&4294967295,V=k+(P<<15&4294967295|P>>>17),P=F+(k^(V|~D))+I[1]+2240044497&4294967295,F=V+(P<<21&4294967295|P>>>11),P=D+(V^(F|~k))+I[8]+1873313359&4294967295,D=F+(P<<6&4294967295|P>>>26),P=k+(F^(D|~V))+I[15]+4264355552&4294967295,k=D+(P<<10&4294967295|P>>>22),P=V+(D^(k|~F))+I[6]+2734768916&4294967295,V=k+(P<<15&4294967295|P>>>17),P=F+(k^(V|~D))+I[13]+1309151649&4294967295,F=V+(P<<21&4294967295|P>>>11),P=D+(V^(F|~k))+I[4]+4149444226&4294967295,D=F+(P<<6&4294967295|P>>>26),P=k+(F^(D|~V))+I[11]+3174756917&4294967295,k=D+(P<<10&4294967295|P>>>22),P=V+(D^(k|~F))+I[2]+718787259&4294967295,V=k+(P<<15&4294967295|P>>>17),P=F+(k^(V|~D))+I[9]+3951481745&4294967295,O.g[0]=O.g[0]+D&4294967295,O.g[1]=O.g[1]+(V+(P<<21&4294967295|P>>>11))&4294967295,O.g[2]=O.g[2]+V&4294967295,O.g[3]=O.g[3]+k&4294967295}r.prototype.u=function(O,D){D===void 0&&(D=O.length);for(var F=D-this.blockSize,I=this.B,V=this.h,k=0;k<D;){if(V==0)for(;k<=F;)i(this,O,k),k+=this.blockSize;if(typeof O=="string"){for(;k<D;)if(I[V++]=O.charCodeAt(k++),V==this.blockSize){i(this,I),V=0;break}}else for(;k<D;)if(I[V++]=O[k++],V==this.blockSize){i(this,I),V=0;break}}this.h=V,this.o+=D},r.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var D=1;D<O.length-8;++D)O[D]=0;var F=8*this.o;for(D=O.length-8;D<O.length;++D)O[D]=F&255,F/=256;for(this.u(O),O=Array(16),D=F=0;4>D;++D)for(var I=0;32>I;I+=8)O[F++]=this.g[D]>>>I&255;return O};function a(O,D){var F=c;return Object.prototype.hasOwnProperty.call(F,O)?F[O]:F[O]=D(O)}function o(O,D){this.h=D;for(var F=[],I=!0,V=O.length-1;0<=V;V--){var k=O[V]|0;I&&k==D||(F[V]=k,I=!1)}this.g=F}var c={};function u(O){return-128<=O&&128>O?a(O,function(D){return new o([D|0],0>D?-1:0)}):new o([O|0],0>O?-1:0)}function h(O){if(isNaN(O)||!isFinite(O))return p;if(0>O)return S(h(-O));for(var D=[],F=1,I=0;O>=F;I++)D[I]=O/F|0,F*=4294967296;return new o(D,0)}function f(O,D){if(O.length==0)throw Error("number format error: empty string");if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(O.charAt(0)=="-")return S(f(O.substring(1),D));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var F=h(Math.pow(D,8)),I=p,V=0;V<O.length;V+=8){var k=Math.min(8,O.length-V),P=parseInt(O.substring(V,V+k),D);8>k?(k=h(Math.pow(D,k)),I=I.j(k).add(h(P))):(I=I.j(F),I=I.add(h(P)))}return I}var p=u(0),v=u(1),_=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-S(this).m();for(var O=0,D=1,F=0;F<this.g.length;F++){var I=this.i(F);O+=(0<=I?I:4294967296+I)*D,D*=4294967296}return O},t.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(b(this))return"0";if(N(this))return"-"+S(this).toString(O);for(var D=h(Math.pow(O,6)),F=this,I="";;){var V=R(F,D).g;F=w(F,V.j(D));var k=((0<F.g.length?F.g[0]:F.h)>>>0).toString(O);if(F=V,b(F))return k+I;for(;6>k.length;)k="0"+k;I=k+I}},t.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function b(O){if(O.h!=0)return!1;for(var D=0;D<O.g.length;D++)if(O.g[D]!=0)return!1;return!0}function N(O){return O.h==-1}t.l=function(O){return O=w(this,O),N(O)?-1:b(O)?0:1};function S(O){for(var D=O.g.length,F=[],I=0;I<D;I++)F[I]=~O.g[I];return new o(F,~O.h).add(v)}t.abs=function(){return N(this)?S(this):this},t.add=function(O){for(var D=Math.max(this.g.length,O.g.length),F=[],I=0,V=0;V<=D;V++){var k=I+(this.i(V)&65535)+(O.i(V)&65535),P=(k>>>16)+(this.i(V)>>>16)+(O.i(V)>>>16);I=P>>>16,k&=65535,P&=65535,F[V]=P<<16|k}return new o(F,F[F.length-1]&-2147483648?-1:0)};function w(O,D){return O.add(S(D))}t.j=function(O){if(b(this)||b(O))return p;if(N(this))return N(O)?S(this).j(S(O)):S(S(this).j(O));if(N(O))return S(this.j(S(O)));if(0>this.l(_)&&0>O.l(_))return h(this.m()*O.m());for(var D=this.g.length+O.g.length,F=[],I=0;I<2*D;I++)F[I]=0;for(I=0;I<this.g.length;I++)for(var V=0;V<O.g.length;V++){var k=this.i(I)>>>16,P=this.i(I)&65535,q=O.i(V)>>>16,te=O.i(V)&65535;F[2*I+2*V]+=P*te,y(F,2*I+2*V),F[2*I+2*V+1]+=k*te,y(F,2*I+2*V+1),F[2*I+2*V+1]+=P*q,y(F,2*I+2*V+1),F[2*I+2*V+2]+=k*q,y(F,2*I+2*V+2)}for(I=0;I<D;I++)F[I]=F[2*I+1]<<16|F[2*I];for(I=D;I<2*D;I++)F[I]=0;return new o(F,0)};function y(O,D){for(;(O[D]&65535)!=O[D];)O[D+1]+=O[D]>>>16,O[D]&=65535,D++}function C(O,D){this.g=O,this.h=D}function R(O,D){if(b(D))throw Error("division by zero");if(b(O))return new C(p,p);if(N(O))return D=R(S(O),D),new C(S(D.g),S(D.h));if(N(D))return D=R(O,S(D)),new C(S(D.g),D.h);if(30<O.g.length){if(N(O)||N(D))throw Error("slowDivide_ only works with positive integers.");for(var F=v,I=D;0>=I.l(O);)F=M(F),I=M(I);var V=B(F,1),k=B(I,1);for(I=B(I,2),F=B(F,2);!b(I);){var P=k.add(I);0>=P.l(O)&&(V=V.add(F),k=P),I=B(I,1),F=B(F,1)}return D=w(O,V.j(D)),new C(V,D)}for(V=p;0<=O.l(D);){for(F=Math.max(1,Math.floor(O.m()/D.m())),I=Math.ceil(Math.log(F)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),k=h(F),P=k.j(D);N(P)||0<P.l(O);)F-=I,k=h(F),P=k.j(D);b(k)&&(k=v),V=V.add(k),O=w(O,P)}return new C(V,O)}t.A=function(O){return R(this,O).h},t.and=function(O){for(var D=Math.max(this.g.length,O.g.length),F=[],I=0;I<D;I++)F[I]=this.i(I)&O.i(I);return new o(F,this.h&O.h)},t.or=function(O){for(var D=Math.max(this.g.length,O.g.length),F=[],I=0;I<D;I++)F[I]=this.i(I)|O.i(I);return new o(F,this.h|O.h)},t.xor=function(O){for(var D=Math.max(this.g.length,O.g.length),F=[],I=0;I<D;I++)F[I]=this.i(I)^O.i(I);return new o(F,this.h^O.h)};function M(O){for(var D=O.g.length+1,F=[],I=0;I<D;I++)F[I]=O.i(I)<<1|O.i(I-1)>>>31;return new o(F,O.h)}function B(O,D){var F=D>>5;D%=32;for(var I=O.g.length-F,V=[],k=0;k<I;k++)V[k]=0<D?O.i(k+F)>>>D|O.i(k+F+1)<<32-D:O.i(k+F);return new o(V,O.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,MA=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=f,hc=o}).apply(typeof W2<"u"?W2:typeof self<"u"?self:typeof window<"u"?window:{});var Sg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var DA,gf,OA,ov,Zw,LA,VA,FA;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,E,A){return m==Array.prototype||m==Object.prototype||(m[E]=A.value),m};function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sg=="object"&&Sg];for(var E=0;E<m.length;++E){var A=m[E];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var r=n(this);function i(m,E){if(E)e:{var A=r;m=m.split(".");for(var $=0;$<m.length-1;$++){var X=m[$];if(!(X in A))break e;A=A[X]}m=m[m.length-1],$=A[m],E=E($),E!=$&&E!=null&&e(A,m,{configurable:!0,writable:!0,value:E})}}function a(m,E){m instanceof String&&(m+="");var A=0,$=!1,X={next:function(){if(!$&&A<m.length){var oe=A++;return{value:E(oe,m[oe]),done:!1}}return $=!0,{done:!0,value:void 0}}};return X[Symbol.iterator]=function(){return X},X}i("Array.prototype.values",function(m){return m||function(){return a(this,function(E,A){return A})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(m){var E=typeof m;return E=E!="object"?E:m?Array.isArray(m)?"array":E:"null",E=="array"||E=="object"&&typeof m.length=="number"}function h(m){var E=typeof m;return E=="object"&&m!=null||E=="function"}function f(m,E,A){return m.call.apply(m.bind,arguments)}function p(m,E,A){if(!m)throw Error();if(2<arguments.length){var $=Array.prototype.slice.call(arguments,2);return function(){var X=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(X,$),m.apply(E,X)}}return function(){return m.apply(E,arguments)}}function v(m,E,A){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,v.apply(null,arguments)}function _(m,E){var A=Array.prototype.slice.call(arguments,1);return function(){var $=A.slice();return $.push.apply($,arguments),m.apply(this,$)}}function b(m,E){function A(){}A.prototype=E.prototype,m.aa=E.prototype,m.prototype=new A,m.prototype.constructor=m,m.Qb=function($,X,oe){for(var Pe=Array(arguments.length-2),Bt=2;Bt<arguments.length;Bt++)Pe[Bt-2]=arguments[Bt];return E.prototype[X].apply($,Pe)}}function N(m){const E=m.length;if(0<E){const A=Array(E);for(let $=0;$<E;$++)A[$]=m[$];return A}return[]}function S(m,E){for(let A=1;A<arguments.length;A++){const $=arguments[A];if(u($)){const X=m.length||0,oe=$.length||0;m.length=X+oe;for(let Pe=0;Pe<oe;Pe++)m[X+Pe]=$[Pe]}else m.push($)}}class w{constructor(E,A){this.i=E,this.j=A,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function y(m){return/^[\s\xa0]*$/.test(m)}function C(){var m=c.navigator;return m&&(m=m.userAgent)?m:""}function R(m){return R[" "](m),m}R[" "]=function(){};var M=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function B(m,E,A){for(const $ in m)E.call(A,m[$],$,m)}function O(m,E){for(const A in m)E.call(void 0,m[A],A,m)}function D(m){const E={};for(const A in m)E[A]=m[A];return E}const F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(m,E){let A,$;for(let X=1;X<arguments.length;X++){$=arguments[X];for(A in $)m[A]=$[A];for(let oe=0;oe<F.length;oe++)A=F[oe],Object.prototype.hasOwnProperty.call($,A)&&(m[A]=$[A])}}function V(m){var E=1;m=m.split(":");const A=[];for(;0<E&&m.length;)A.push(m.shift()),E--;return m.length&&A.push(m.join(":")),A}function k(m){c.setTimeout(()=>{throw m},0)}function P(){var m=W;let E=null;return m.g&&(E=m.g,m.g=m.g.next,m.g||(m.h=null),E.next=null),E}class q{constructor(){this.h=this.g=null}add(E,A){const $=te.get();$.set(E,A),this.h?this.h.next=$:this.g=$,this.h=$}}var te=new w(()=>new re,m=>m.reset());class re{constructor(){this.next=this.g=this.h=null}set(E,A){this.h=E,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let K,U=!1,W=new q,H=()=>{const m=c.Promise.resolve(void 0);K=()=>{m.then(Q)}};var Q=()=>{for(var m;m=P();){try{m.h.call(m.g)}catch(A){k(A)}var E=te;E.j(m),100>E.h&&(E.h++,m.next=E.g,E.g=m)}U=!1};function fe(){this.s=this.s,this.C=this.C}fe.prototype.s=!1,fe.prototype.ma=function(){this.s||(this.s=!0,this.N())},fe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ke(m,E){this.type=m,this.g=this.target=E,this.defaultPrevented=!1}ke.prototype.h=function(){this.defaultPrevented=!0};var Ze=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,E=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const A=()=>{};c.addEventListener("test",A,E),c.removeEventListener("test",A,E)}catch{}return m}();function Ye(m,E){if(ke.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var A=this.type=m.type,$=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=E,E=m.relatedTarget){if(M){e:{try{R(E.nodeName);var X=!0;break e}catch{}X=!1}X||(E=null)}}else A=="mouseover"?E=m.fromElement:A=="mouseout"&&(E=m.toElement);this.relatedTarget=E,$?(this.clientX=$.clientX!==void 0?$.clientX:$.pageX,this.clientY=$.clientY!==void 0?$.clientY:$.pageY,this.screenX=$.screenX||0,this.screenY=$.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:se[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&Ye.aa.h.call(this)}}b(Ye,ke);var se={2:"touch",3:"pen",4:"mouse"};Ye.prototype.h=function(){Ye.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var de="closure_listenable_"+(1e6*Math.random()|0),ne=0;function ve(m,E,A,$,X){this.listener=m,this.proxy=null,this.src=E,this.type=A,this.capture=!!$,this.ha=X,this.key=++ne,this.da=this.fa=!1}function _e(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function ye(m){this.src=m,this.g={},this.h=0}ye.prototype.add=function(m,E,A,$,X){var oe=m.toString();m=this.g[oe],m||(m=this.g[oe]=[],this.h++);var Pe=ge(m,E,$,X);return-1<Pe?(E=m[Pe],A||(E.fa=!1)):(E=new ve(E,this.src,oe,!!$,X),E.fa=A,m.push(E)),E};function Se(m,E){var A=E.type;if(A in m.g){var $=m.g[A],X=Array.prototype.indexOf.call($,E,void 0),oe;(oe=0<=X)&&Array.prototype.splice.call($,X,1),oe&&(_e(E),m.g[A].length==0&&(delete m.g[A],m.h--))}}function ge(m,E,A,$){for(var X=0;X<m.length;++X){var oe=m[X];if(!oe.da&&oe.listener==E&&oe.capture==!!A&&oe.ha==$)return X}return-1}var Ae="closure_lm_"+(1e6*Math.random()|0),Ke={};function ce(m,E,A,$,X){if(Array.isArray(E)){for(var oe=0;oe<E.length;oe++)ce(m,E[oe],A,$,X);return null}return A=It(A),m&&m[de]?m.K(E,A,h($)?!!$.capture:!!$,X):Ve(m,E,A,!1,$,X)}function Ve(m,E,A,$,X,oe){if(!E)throw Error("Invalid event type");var Pe=h(X)?!!X.capture:!!X,Bt=je(m);if(Bt||(m[Ae]=Bt=new ye(m)),A=Bt.add(E,A,$,Pe,oe),A.proxy)return A;if($=G(),A.proxy=$,$.src=m,$.listener=A,m.addEventListener)Ze||(X=Pe),X===void 0&&(X=!1),m.addEventListener(E.toString(),$,X);else if(m.attachEvent)m.attachEvent(Ce(E.toString()),$);else if(m.addListener&&m.removeListener)m.addListener($);else throw Error("addEventListener and attachEvent are unavailable.");return A}function G(){function m(A){return E.call(m.src,m.listener,A)}const E=Te;return m}function J(m,E,A,$,X){if(Array.isArray(E))for(var oe=0;oe<E.length;oe++)J(m,E[oe],A,$,X);else $=h($)?!!$.capture:!!$,A=It(A),m&&m[de]?(m=m.i,E=String(E).toString(),E in m.g&&(oe=m.g[E],A=ge(oe,A,$,X),-1<A&&(_e(oe[A]),Array.prototype.splice.call(oe,A,1),oe.length==0&&(delete m.g[E],m.h--)))):m&&(m=je(m))&&(E=m.g[E.toString()],m=-1,E&&(m=ge(E,A,$,X)),(A=-1<m?E[m]:null)&&ie(A))}function ie(m){if(typeof m!="number"&&m&&!m.da){var E=m.src;if(E&&E[de])Se(E.i,m);else{var A=m.type,$=m.proxy;E.removeEventListener?E.removeEventListener(A,$,m.capture):E.detachEvent?E.detachEvent(Ce(A),$):E.addListener&&E.removeListener&&E.removeListener($),(A=je(E))?(Se(A,m),A.h==0&&(A.src=null,E[Ae]=null)):_e(m)}}}function Ce(m){return m in Ke?Ke[m]:Ke[m]="on"+m}function Te(m,E){if(m.da)m=!0;else{E=new Ye(E,this);var A=m.listener,$=m.ha||m.src;m.fa&&ie(m),m=A.call($,E)}return m}function je(m){return m=m[Ae],m instanceof ye?m:null}var Xe="__closure_events_fn_"+(1e9*Math.random()>>>0);function It(m){return typeof m=="function"?m:(m[Xe]||(m[Xe]=function(E){return m.handleEvent(E)}),m[Xe])}function bt(){fe.call(this),this.i=new ye(this),this.M=this,this.F=null}b(bt,fe),bt.prototype[de]=!0,bt.prototype.removeEventListener=function(m,E,A,$){J(this,m,E,A,$)};function Nt(m,E){var A,$=m.F;if($)for(A=[];$;$=$.F)A.push($);if(m=m.M,$=E.type||E,typeof E=="string")E=new ke(E,m);else if(E instanceof ke)E.target=E.target||m;else{var X=E;E=new ke($,m),I(E,X)}if(X=!0,A)for(var oe=A.length-1;0<=oe;oe--){var Pe=E.g=A[oe];X=Rr(Pe,$,!0,E)&&X}if(Pe=E.g=m,X=Rr(Pe,$,!0,E)&&X,X=Rr(Pe,$,!1,E)&&X,A)for(oe=0;oe<A.length;oe++)Pe=E.g=A[oe],X=Rr(Pe,$,!1,E)&&X}bt.prototype.N=function(){if(bt.aa.N.call(this),this.i){var m=this.i,E;for(E in m.g){for(var A=m.g[E],$=0;$<A.length;$++)_e(A[$]);delete m.g[E],m.h--}}this.F=null},bt.prototype.K=function(m,E,A,$){return this.i.add(String(m),E,!1,A,$)},bt.prototype.L=function(m,E,A,$){return this.i.add(String(m),E,!0,A,$)};function Rr(m,E,A,$){if(E=m.i.g[String(E)],!E)return!0;E=E.concat();for(var X=!0,oe=0;oe<E.length;++oe){var Pe=E[oe];if(Pe&&!Pe.da&&Pe.capture==A){var Bt=Pe.listener,Bn=Pe.ha||Pe.src;Pe.fa&&Se(m.i,Pe),X=Bt.call(Bn,$)!==!1&&X}}return X&&!$.defaultPrevented}function tu(m,E,A){if(typeof m=="function")A&&(m=v(m,A));else if(m&&typeof m.handleEvent=="function")m=v(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(E)?-1:c.setTimeout(m,E||0)}function ga(m){m.g=tu(()=>{m.g=null,m.i&&(m.i=!1,ga(m))},m.l);const E=m.h;m.h=null,m.m.apply(null,E)}class vo extends fe{constructor(E,A){super(),this.m=E,this.l=A,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:ga(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function va(m){fe.call(this),this.h=m,this.g={}}b(va,fe);var xo=[];function yo(m){B(m.g,function(E,A){this.g.hasOwnProperty(A)&&ie(E)},m),m.g={}}va.prototype.N=function(){va.aa.N.call(this),yo(this)},va.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xa=c.JSON.stringify,p0=c.JSON.parse,zl=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function vh(){}vh.prototype.h=null;function Pp(m){return m.h||(m.h=m.i())}function xh(){}var _o={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function nu(){ke.call(this,"d")}b(nu,ke);function yh(){ke.call(this,"c")}b(yh,ke);var ya={},Ip=null;function ru(){return Ip=Ip||new bt}ya.La="serverreachability";function Ap(m){ke.call(this,ya.La,m)}b(Ap,ke);function Ul(m){const E=ru();Nt(E,new Ap(E))}ya.STAT_EVENT="statevent";function su(m,E){ke.call(this,ya.STAT_EVENT,m),this.stat=E}b(su,ke);function hr(m){const E=ru();Nt(E,new su(E,m))}ya.Ma="timingevent";function Rp(m,E){ke.call(this,ya.Ma,m),this.size=E}b(Rp,ke);function $l(m,E){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},E)}function Bl(){this.g=!0}Bl.prototype.xa=function(){this.g=!1};function Rs(m,E,A,$,X,oe){m.info(function(){if(m.g)if(oe)for(var Pe="",Bt=oe.split("&"),Bn=0;Bn<Bt.length;Bn++){var Rt=Bt[Bn].split("=");if(1<Rt.length){var Yt=Rt[0];Rt=Rt[1];var yn=Yt.split("_");Pe=2<=yn.length&&yn[1]=="type"?Pe+(Yt+"="+Rt+"&"):Pe+(Yt+"=redacted&")}}else Pe=null;else Pe=oe;return"XMLHTTP REQ ("+$+") [attempt "+X+"]: "+E+`
`+A+`
`+Pe})}function et(m,E,A,$,X,oe,Pe){m.info(function(){return"XMLHTTP RESP ("+$+") [ attempt "+X+"]: "+E+`
`+A+`
`+oe+" "+Pe})}function _a(m,E,A,$){m.info(function(){return"XMLHTTP TEXT ("+E+"): "+Dp(m,A)+($?" "+$:"")})}function Mp(m,E){m.info(function(){return"TIMEOUT: "+E})}Bl.prototype.info=function(){};function Dp(m,E){if(!m.g)return E;if(!E)return null;try{var A=JSON.parse(E);if(A){for(m=0;m<A.length;m++)if(Array.isArray(A[m])){var $=A[m];if(!(2>$.length)){var X=$[1];if(Array.isArray(X)&&!(1>X.length)){var oe=X[0];if(oe!="noop"&&oe!="stop"&&oe!="close")for(var Pe=1;Pe<X.length;Pe++)X[Pe]=""}}}}return xa(A)}catch{return E}}var Wl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},iu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},au;function ti(){}b(ti,vh),ti.prototype.g=function(){return new XMLHttpRequest},ti.prototype.i=function(){return{}},au=new ti;function ni(m,E,A,$){this.j=m,this.i=E,this.l=A,this.R=$||1,this.U=new va(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Op}function Op(){this.i=null,this.g="",this.h=!1}var Lp={},_h={};function wh(m,E,A){m.L=1,m.v=Ds(kn(E)),m.m=A,m.P=!0,bh(m,null)}function bh(m,E){m.F=Date.now(),lu(m),m.A=kn(m.v);var A=m.A,$=m.R;Array.isArray($)||($=[String($)]),zp(A.i,"t",$),m.C=0,A=m.j.J,m.h=new Op,m.g=Gp(m.j,A?E:null,!m.m),0<m.O&&(m.M=new vo(v(m.Y,m,m.g),m.O)),E=m.U,A=m.g,$=m.ca;var X="readystatechange";Array.isArray(X)||(X&&(xo[0]=X.toString()),X=xo);for(var oe=0;oe<X.length;oe++){var Pe=ce(A,X[oe],$||E.handleEvent,!1,E.h||E);if(!Pe)break;E.g[Pe.key]=Pe}E=m.H?D(m.H):{},m.m?(m.u||(m.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,E)):(m.u="GET",m.g.ea(m.A,m.u,null,E)),Ul(),Rs(m.i,m.u,m.A,m.l,m.R,m.m)}ni.prototype.ca=function(m){m=m.target;const E=this.M;E&&Mr(m)==3?E.j():this.Y(m)},ni.prototype.Y=function(m){try{if(m==this.g)e:{const yn=Mr(this.g);var E=this.g.Ba();const Co=this.g.Z();if(!(3>yn)&&(yn!=3||this.g&&(this.h.h||this.g.oa()||Vh(this.g)))){this.J||yn!=4||E==7||(E==8||0>=Co?Ul(3):Ul(2)),jh(this);var A=this.g.Z();this.X=A;t:if(Vp(this)){var $=Vh(this.g);m="";var X=$.length,oe=Mr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){wa(this),ql(this);var Pe="";break t}this.h.i=new c.TextDecoder}for(E=0;E<X;E++)this.h.h=!0,m+=this.h.i.decode($[E],{stream:!(oe&&E==X-1)});$.length=0,this.h.g+=m,this.C=0,Pe=this.h.g}else Pe=this.g.oa();if(this.o=A==200,et(this.i,this.u,this.A,this.l,this.R,yn,A),this.o){if(this.T&&!this.K){t:{if(this.g){var Bt,Bn=this.g;if((Bt=Bn.g?Bn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(Bt)){var Rt=Bt;break t}}Rt=null}if(A=Rt)_a(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hl(this,A);else{this.o=!1,this.s=3,hr(12),wa(this),ql(this);break e}}if(this.P){A=!0;let On;for(;!this.J&&this.C<Pe.length;)if(On=ou(this,Pe),On==_h){yn==4&&(this.s=4,hr(14),A=!1),_a(this.i,this.l,null,"[Incomplete Response]");break}else if(On==Lp){this.s=4,hr(15),_a(this.i,this.l,Pe,"[Invalid Chunk]"),A=!1;break}else _a(this.i,this.l,On,null),Hl(this,On);if(Vp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yn!=4||Pe.length!=0||this.h.h||(this.s=1,hr(16),A=!1),this.o=this.o&&A,!A)_a(this.i,this.l,Pe,"[Invalid Chunked Response]"),wa(this),ql(this);else if(0<Pe.length&&!this.W){this.W=!0;var Yt=this.j;Yt.g==this&&Yt.ba&&!Yt.M&&(Yt.j.info("Great, no buffering proxy detected. Bytes received: "+Pe.length),vu(Yt),Yt.M=!0,hr(11))}}else _a(this.i,this.l,Pe,null),Hl(this,Pe);yn==4&&wa(this),this.o&&!this.J&&(yn==4?zh(this.j,this):(this.o=!1,lu(this)))}else g0(this.g),A==400&&0<Pe.indexOf("Unknown SID")?(this.s=3,hr(12)):(this.s=0,hr(13)),wa(this),ql(this)}}}catch{}finally{}};function Vp(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function ou(m,E){var A=m.C,$=E.indexOf(`
`,A);return $==-1?_h:(A=Number(E.substring(A,$)),isNaN(A)?Lp:($+=1,$+A>E.length?_h:(E=E.slice($,$+A),m.C=$+A,E)))}ni.prototype.cancel=function(){this.J=!0,wa(this)};function lu(m){m.S=Date.now()+m.I,Fp(m,m.I)}function Fp(m,E){if(m.B!=null)throw Error("WatchDog timer not null");m.B=$l(v(m.ba,m),E)}function jh(m){m.B&&(c.clearTimeout(m.B),m.B=null)}ni.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(Mp(this.i,this.A),this.L!=2&&(Ul(),hr(17)),wa(this),this.s=2,ql(this)):Fp(this,this.S-m)};function ql(m){m.j.G==0||m.J||zh(m.j,m)}function wa(m){jh(m);var E=m.M;E&&typeof E.ma=="function"&&E.ma(),m.M=null,yo(m.U),m.g&&(E=m.g,m.g=null,E.abort(),E.ma())}function Hl(m,E){try{var A=m.j;if(A.G!=0&&(A.g==m||Ct(A.h,m))){if(!m.K&&Ct(A.h,m)&&A.G==3){try{var $=A.Da.g.parse(E)}catch{$=null}if(Array.isArray($)&&$.length==3){var X=$;if(X[0]==0){e:if(!A.u){if(A.g)if(A.g.F+3e3<m.F)yu(A),pu(A);else break e;gu(A),hr(18)}}else A.za=X[1],0<A.za-A.T&&37500>X[2]&&A.F&&A.v==0&&!A.C&&(A.C=$l(v(A.Za,A),6e3));if(1>=wo(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else Ea(A,11)}else if((m.K||A.g==m)&&yu(A),!y(E))for(X=A.Da.g.parse(E),E=0;E<X.length;E++){let Rt=X[E];if(A.T=Rt[0],Rt=Rt[1],A.G==2)if(Rt[0]=="c"){A.K=Rt[1],A.ia=Rt[2];const Yt=Rt[3];Yt!=null&&(A.la=Yt,A.j.info("VER="+A.la));const yn=Rt[4];yn!=null&&(A.Aa=yn,A.j.info("SVER="+A.Aa));const Co=Rt[5];Co!=null&&typeof Co=="number"&&0<Co&&($=1.5*Co,A.L=$,A.j.info("backChannelRequestTimeoutMs_="+$)),$=A;const On=m.g;if(On){const wu=On.g?On.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wu){var oe=$.h;oe.g||wu.indexOf("spdy")==-1&&wu.indexOf("quic")==-1&&wu.indexOf("h2")==-1||(oe.j=oe.l,oe.g=new Set,oe.h&&(tn(oe,oe.h),oe.h=null))}if($.D){const Di=On.g?On.g.getResponseHeader("X-HTTP-Session-Id"):null;Di&&($.ya=Di,dt($.I,$.D,Di))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-m.F,A.j.info("Handshake RTT: "+A.R+"ms")),$=A;var Pe=m;if($.qa=_u($,$.J?$.ia:null,$.W),Pe.K){Zl($.h,Pe);var Bt=Pe,Bn=$.L;Bn&&(Bt.I=Bn),Bt.B&&(jh(Bt),lu(Bt)),$.g=Pe}else ii($);0<A.i.length&&Eo(A)}else Rt[0]!="stop"&&Rt[0]!="close"||Ea(A,7);else A.G==3&&(Rt[0]=="stop"||Rt[0]=="close"?Rt[0]=="stop"?Ea(A,7):mu(A):Rt[0]!="noop"&&A.l&&A.l.ta(Rt),A.v=0)}}Ul(4)}catch{}}var Gl=class{constructor(m,E){this.g=m,this.map=E}};function Nh(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Sh(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function wo(m){return m.h?1:m.g?m.g.size:0}function Ct(m,E){return m.h?m.h==E:m.g?m.g.has(E):!1}function tn(m,E){m.g?m.g.add(E):m.h=E}function Zl(m,E){m.h&&m.h==E?m.h=null:m.g&&m.g.has(E)&&m.g.delete(E)}Nh.prototype.cancel=function(){if(this.i=ba(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function ba(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let E=m.i;for(const A of m.g.values())E=E.concat(A.D);return E}return N(m.i)}function bo(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(u(m)){for(var E=[],A=m.length,$=0;$<A;$++)E.push(m[$]);return E}E=[],A=0;for($ in m)E[A++]=m[$];return E}function Eh(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(u(m)||typeof m=="string"){var E=[];m=m.length;for(var A=0;A<m;A++)E.push(A);return E}E=[],A=0;for(const $ in m)E[A++]=$;return E}}}function xt(m,E){if(m.forEach&&typeof m.forEach=="function")m.forEach(E,void 0);else if(u(m)||typeof m=="string")Array.prototype.forEach.call(m,E,void 0);else for(var A=Eh(m),$=bo(m),X=$.length,oe=0;oe<X;oe++)E.call(void 0,$[oe],A&&A[oe],m)}var mn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ch(m,E){if(m){m=m.split("&");for(var A=0;A<m.length;A++){var $=m[A].indexOf("="),X=null;if(0<=$){var oe=m[A].substring(0,$);X=m[A].substring($+1)}else oe=m[A];E(oe,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function Ms(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof Ms){this.h=m.h,cu(this,m.j),this.o=m.o,this.g=m.g,ja(this,m.s),this.l=m.l;var E=m.i,A=new Na;A.i=E.i,E.g&&(A.g=new Map(E.g),A.h=E.h),Ri(this,A),this.m=m.m}else m&&(E=String(m).match(mn))?(this.h=!1,cu(this,E[1]||"",!0),this.o=ri(E[2]||""),this.g=ri(E[3]||"",!0),ja(this,E[4]),this.l=ri(E[5]||"",!0),Ri(this,E[6]||"",!0),this.m=ri(E[7]||"")):(this.h=!1,this.i=new Na(null,this.h))}Ms.prototype.toString=function(){var m=[],E=this.j;E&&m.push(si(E,jo,!0),":");var A=this.g;return(A||E=="file")&&(m.push("//"),(E=this.o)&&m.push(si(E,jo,!0),"@"),m.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&m.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&m.push("/"),m.push(si(A,A.charAt(0)=="/"?Ph:kh,!0))),(A=this.i.toString())&&m.push("?",A),(A=this.m)&&m.push("#",si(A,Ih)),m.join("")};function kn(m){return new Ms(m)}function cu(m,E,A){m.j=A?ri(E,!0):E,m.j&&(m.j=m.j.replace(/:$/,""))}function ja(m,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);m.s=E}else m.s=null}function Ri(m,E,A){E instanceof Na?(m.i=E,Os(m.i,m.h)):(A||(E=si(E,uu)),m.i=new Na(E,m.h))}function dt(m,E,A){m.i.set(E,A)}function Ds(m){return dt(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function ri(m,E){return m?E?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function si(m,E,A){return typeof m=="string"?(m=encodeURI(m).replace(E,Th),A&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Th(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var jo=/[#\/\?@]/g,kh=/[#\?:]/g,Ph=/[#\?]/g,uu=/[#\?@]/g,Ih=/#/g;function Na(m,E){this.h=this.g=null,this.i=m||null,this.j=!!E}function fs(m){m.g||(m.g=new Map,m.h=0,m.i&&Ch(m.i,function(E,A){m.add(decodeURIComponent(E.replace(/\+/g," ")),A)}))}t=Na.prototype,t.add=function(m,E){fs(this),this.i=null,m=at(this,m);var A=this.g.get(m);return A||this.g.set(m,A=[]),A.push(E),this.h+=1,this};function Ah(m,E){fs(m),E=at(m,E),m.g.has(E)&&(m.i=null,m.h-=m.g.get(E).length,m.g.delete(E))}function du(m,E){return fs(m),E=at(m,E),m.g.has(E)}t.forEach=function(m,E){fs(this),this.g.forEach(function(A,$){A.forEach(function(X){m.call(E,X,$,this)},this)},this)},t.na=function(){fs(this);const m=Array.from(this.g.values()),E=Array.from(this.g.keys()),A=[];for(let $=0;$<E.length;$++){const X=m[$];for(let oe=0;oe<X.length;oe++)A.push(E[$])}return A},t.V=function(m){fs(this);let E=[];if(typeof m=="string")du(this,m)&&(E=E.concat(this.g.get(at(this,m))));else{m=Array.from(this.g.values());for(let A=0;A<m.length;A++)E=E.concat(m[A])}return E},t.set=function(m,E){return fs(this),this.i=null,m=at(this,m),du(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[E]),this.h+=1,this},t.get=function(m,E){return m?(m=this.V(m),0<m.length?String(m[0]):E):E};function zp(m,E,A){Ah(m,E),0<A.length&&(m.i=null,m.g.set(at(m,E),N(A)),m.h+=A.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],E=Array.from(this.g.keys());for(var A=0;A<E.length;A++){var $=E[A];const oe=encodeURIComponent(String($)),Pe=this.V($);for($=0;$<Pe.length;$++){var X=oe;Pe[$]!==""&&(X+="="+encodeURIComponent(String(Pe[$]))),m.push(X)}}return this.i=m.join("&")};function at(m,E){return E=String(E),m.j&&(E=E.toLowerCase()),E}function Os(m,E){E&&!m.j&&(fs(m),m.i=null,m.g.forEach(function(A,$){var X=$.toLowerCase();$!=X&&(Ah(this,$),zp(this,X,A))},m)),m.j=E}function Kt(m,E){const A=new Bl;if(c.Image){const $=new Image;$.onload=_(Ls,A,"TestLoadImage: loaded",!0,E,$),$.onerror=_(Ls,A,"TestLoadImage: error",!1,E,$),$.onabort=_(Ls,A,"TestLoadImage: abort",!1,E,$),$.ontimeout=_(Ls,A,"TestLoadImage: timeout",!1,E,$),c.setTimeout(function(){$.ontimeout&&$.ontimeout()},1e4),$.src=m}else E(!1)}function Up(m,E){const A=new Bl,$=new AbortController,X=setTimeout(()=>{$.abort(),Ls(A,"TestPingServer: timeout",!1,E)},1e4);fetch(m,{signal:$.signal}).then(oe=>{clearTimeout(X),oe.ok?Ls(A,"TestPingServer: ok",!0,E):Ls(A,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(X),Ls(A,"TestPingServer: error",!1,E)})}function Ls(m,E,A,$,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),$(A)}catch{}}function Rh(){this.g=new zl}function Mh(m,E,A){const $=A||"";try{xt(m,function(X,oe){let Pe=X;h(X)&&(Pe=xa(X)),E.push($+oe+"="+encodeURIComponent(Pe))})}catch(X){throw E.push($+"type="+encodeURIComponent("_badmap")),X}}function Vs(m){this.l=m.Ub||null,this.j=m.eb||!1}b(Vs,vh),Vs.prototype.g=function(){return new No(this.l,this.j)},Vs.prototype.i=function(m){return function(){return m}}({});function No(m,E){bt.call(this),this.D=m,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(No,bt),t=No.prototype,t.open=function(m,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=E,this.readyState=1,ms(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(E.body=m),(this.D||c).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xn(this)),this.readyState=0},t.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,ms(this)),this.g&&(this.readyState=3,ms(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;So(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function So(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}t.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var E=m.value?m.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!m.done}))&&(this.response=this.responseText+=E)}m.done?xn(this):ms(this),this.readyState==3&&So(this)}},t.Ra=function(m){this.g&&(this.response=this.responseText=m,xn(this))},t.Qa=function(m){this.g&&(this.response=m,xn(this))},t.ga=function(){this.g&&xn(this)};function xn(m){m.readyState=4,m.l=null,m.j=null,m.v=null,ms(m)}t.setRequestHeader=function(m,E){this.u.append(m,E)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],E=this.h.entries();for(var A=E.next();!A.done;)A=A.value,m.push(A[0]+": "+A[1]),A=E.next();return m.join(`\r
`)};function ms(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(No.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Dh(m){let E="";return B(m,function(A,$){E+=$,E+=":",E+=A,E+=`\r
`}),E}function hu(m,E,A){e:{for($ in A){var $=!1;break e}$=!0}$||(A=Dh(A),typeof m=="string"?A!=null&&encodeURIComponent(String(A)):dt(m,E,A))}function pn(m){bt.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(pn,bt);var $p=/^https?$/i,Oh=["POST","PUT"];t=pn.prototype,t.Ha=function(m){this.J=m},t.ea=function(m,E,A,$){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);E=E?E.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():au.g(),this.v=this.o?Pp(this.o):Pp(au),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(E,String(m),!0),this.B=!1}catch(oe){Bp(this,oe);return}if(m=A||"",A=new Map(this.headers),$)if(Object.getPrototypeOf($)===Object.prototype)for(var X in $)A.set(X,$[X]);else if(typeof $.keys=="function"&&typeof $.get=="function")for(const oe of $.keys())A.set(oe,$.get(oe));else throw Error("Unknown input type for opt_headers: "+String($));$=Array.from(A.keys()).find(oe=>oe.toLowerCase()=="content-type"),X=c.FormData&&m instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Oh,E,void 0))||$||X||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[oe,Pe]of A)this.g.setRequestHeader(oe,Pe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Xr(this),this.u=!0,this.g.send(m),this.u=!1}catch(oe){Bp(this,oe)}};function Bp(m,E){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=E,m.m=5,Lh(m),fu(m)}function Lh(m){m.A||(m.A=!0,Nt(m,"complete"),Nt(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,Nt(this,"complete"),Nt(this,"abort"),fu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fu(this,!0)),pn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?St(this):this.bb())},t.bb=function(){St(this)};function St(m){if(m.h&&typeof o<"u"&&(!m.v[1]||Mr(m)!=4||m.Z()!=2)){if(m.u&&Mr(m)==4)tu(m.Ea,0,m);else if(Nt(m,"readystatechange"),Mr(m)==4){m.h=!1;try{const Pe=m.Z();e:switch(Pe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var A;if(!(A=E)){var $;if($=Pe===0){var X=String(m.D).match(mn)[1]||null;!X&&c.self&&c.self.location&&(X=c.self.location.protocol.slice(0,-1)),$=!$p.test(X?X.toLowerCase():"")}A=$}if(A)Nt(m,"complete"),Nt(m,"success");else{m.m=6;try{var oe=2<Mr(m)?m.g.statusText:""}catch{oe=""}m.l=oe+" ["+m.Z()+"]",Lh(m)}}finally{fu(m)}}}}function fu(m,E){if(m.g){Xr(m);const A=m.g,$=m.v[0]?()=>{}:null;m.g=null,m.v=null,E||Nt(m,"ready");try{A.onreadystatechange=$}catch{}}}function Xr(m){m.I&&(c.clearTimeout(m.I),m.I=null)}t.isActive=function(){return!!this.g};function Mr(m){return m.g?m.g.readyState:0}t.Z=function(){try{return 2<Mr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(m){if(this.g){var E=this.g.responseText;return m&&E.indexOf(m)==0&&(E=E.substring(m.length)),p0(E)}};function Vh(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function g0(m){const E={};m=(m.g&&2<=Mr(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let $=0;$<m.length;$++){if(y(m[$]))continue;var A=V(m[$]);const X=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const oe=E[X]||[];E[X]=oe,oe.push(A)}O(E,function($){return $.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Sa(m,E,A){return A&&A.internalChannelParams&&A.internalChannelParams[m]||E}function Wp(m){this.Aa=0,this.i=[],this.j=new Bl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Sa("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Sa("baseRetryDelayMs",5e3,m),this.cb=Sa("retryDelaySeedMs",1e4,m),this.Wa=Sa("forwardChannelMaxRetries",2,m),this.wa=Sa("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new Nh(m&&m.concurrentRequestLimit),this.Da=new Rh,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Wp.prototype,t.la=8,t.G=1,t.connect=function(m,E,A,$){hr(0),this.W=m,this.H=E||{},A&&$!==void 0&&(this.H.OSID=A,this.H.OAID=$),this.F=this.X,this.I=_u(this,null,this.W),Eo(this)};function mu(m){if(qp(m),m.G==3){var E=m.U++,A=kn(m.I);if(dt(A,"SID",m.K),dt(A,"RID",E),dt(A,"TYPE","terminate"),Kl(m,A),E=new ni(m,m.j,E),E.L=2,E.v=Ds(kn(A)),A=!1,c.navigator&&c.navigator.sendBeacon)try{A=c.navigator.sendBeacon(E.v.toString(),"")}catch{}!A&&c.Image&&(new Image().src=E.v,A=!0),A||(E.g=Gp(E.j,null),E.g.ea(E.v)),E.F=Date.now(),lu(E)}Hp(m)}function pu(m){m.g&&(vu(m),m.g.cancel(),m.g=null)}function qp(m){pu(m),m.u&&(c.clearTimeout(m.u),m.u=null),yu(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&c.clearTimeout(m.s),m.s=null)}function Eo(m){if(!Sh(m.h)&&!m.s){m.s=!0;var E=m.Ga;K||H(),U||(K(),U=!0),W.add(E,m),m.B=0}}function v0(m,E){return wo(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=E.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=$l(v(m.Ga,m,E),Uh(m,m.B)),m.B++,!0)}t.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const X=new ni(this,this.j,m);let oe=this.o;if(this.S&&(oe?(oe=D(oe),I(oe,this.S)):oe=this.S),this.m!==null||this.O||(X.H=oe,oe=null),this.P)e:{for(var E=0,A=0;A<this.i.length;A++){t:{var $=this.i[A];if("__data__"in $.map&&($=$.map.__data__,typeof $=="string")){$=$.length;break t}$=void 0}if($===void 0)break;if(E+=$,4096<E){E=A;break e}if(E===4096||A===this.i.length-1){E=A+1;break e}}E=1e3}else E=1e3;E=Fh(this,X,E),A=kn(this.I),dt(A,"RID",m),dt(A,"CVER",22),this.D&&dt(A,"X-HTTP-Session-Id",this.D),Kl(this,A),oe&&(this.O?E="headers="+encodeURIComponent(String(Dh(oe)))+"&"+E:this.m&&hu(A,this.m,oe)),tn(this.h,X),this.Ua&&dt(A,"TYPE","init"),this.P?(dt(A,"$req",E),dt(A,"SID","null"),X.T=!0,wh(X,A,null)):wh(X,A,E),this.G=2}}else this.G==3&&(m?ps(this,m):this.i.length==0||Sh(this.h)||ps(this))};function ps(m,E){var A;E?A=E.l:A=m.U++;const $=kn(m.I);dt($,"SID",m.K),dt($,"RID",A),dt($,"AID",m.T),Kl(m,$),m.m&&m.o&&hu($,m.m,m.o),A=new ni(m,m.j,A,m.B+1),m.m===null&&(A.H=m.o),E&&(m.i=E.D.concat(m.i)),E=Fh(m,A,1e3),A.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),tn(m.h,A),wh(A,$,E)}function Kl(m,E){m.H&&B(m.H,function(A,$){dt(E,$,A)}),m.l&&xt({},function(A,$){dt(E,$,A)})}function Fh(m,E,A){A=Math.min(m.i.length,A);var $=m.l?v(m.l.Na,m.l,m):null;e:{var X=m.i;let oe=-1;for(;;){const Pe=["count="+A];oe==-1?0<A?(oe=X[0].g,Pe.push("ofs="+oe)):oe=0:Pe.push("ofs="+oe);let Bt=!0;for(let Bn=0;Bn<A;Bn++){let Rt=X[Bn].g;const Yt=X[Bn].map;if(Rt-=oe,0>Rt)oe=Math.max(0,X[Bn].g-100),Bt=!1;else try{Mh(Yt,Pe,"req"+Rt+"_")}catch{$&&$(Yt)}}if(Bt){$=Pe.join("&");break e}}}return m=m.i.splice(0,A),E.D=m,$}function ii(m){if(!m.g&&!m.u){m.Y=1;var E=m.Fa;K||H(),U||(K(),U=!0),W.add(E,m),m.v=0}}function gu(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=$l(v(m.Fa,m),Uh(m,m.v)),m.v++,!0)}t.Fa=function(){if(this.u=null,xu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=$l(v(this.ab,this),m)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,hr(10),pu(this),xu(this))};function vu(m){m.A!=null&&(c.clearTimeout(m.A),m.A=null)}function xu(m){m.g=new ni(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var E=kn(m.qa);dt(E,"RID","rpc"),dt(E,"SID",m.K),dt(E,"AID",m.T),dt(E,"CI",m.F?"0":"1"),!m.F&&m.ja&&dt(E,"TO",m.ja),dt(E,"TYPE","xmlhttp"),Kl(m,E),m.m&&m.o&&hu(E,m.m,m.o),m.L&&(m.g.I=m.L);var A=m.g;m=m.ia,A.L=1,A.v=Ds(kn(E)),A.m=null,A.P=!0,bh(A,m)}t.Za=function(){this.C!=null&&(this.C=null,pu(this),gu(this),hr(19))};function yu(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function zh(m,E){var A=null;if(m.g==E){yu(m),vu(m),m.g=null;var $=2}else if(Ct(m.h,E))A=E.D,Zl(m.h,E),$=1;else return;if(m.G!=0){if(E.o)if($==1){A=E.m?E.m.length:0,E=Date.now()-E.F;var X=m.B;$=ru(),Nt($,new Rp($,A)),Eo(m)}else ii(m);else if(X=E.s,X==3||X==0&&0<E.X||!($==1&&v0(m,E)||$==2&&gu(m)))switch(A&&0<A.length&&(E=m.h,E.i=E.i.concat(A)),X){case 1:Ea(m,5);break;case 4:Ea(m,10);break;case 3:Ea(m,6);break;default:Ea(m,2)}}}function Uh(m,E){let A=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(A*=2),A*E}function Ea(m,E){if(m.j.info("Error code "+E),E==2){var A=v(m.fb,m),$=m.Xa;const X=!$;$=new Ms($||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||cu($,"https"),Ds($),X?Kt($.toString(),A):Up($.toString(),A)}else hr(2);m.G=0,m.l&&m.l.sa(E),Hp(m),qp(m)}t.fb=function(m){m?(this.j.info("Successfully pinged google.com"),hr(2)):(this.j.info("Failed to ping google.com"),hr(1))};function Hp(m){if(m.G=0,m.ka=[],m.l){const E=ba(m.h);(E.length!=0||m.i.length!=0)&&(S(m.ka,E),S(m.ka,m.i),m.h.i.length=0,N(m.i),m.i.length=0),m.l.ra()}}function _u(m,E,A){var $=A instanceof Ms?kn(A):new Ms(A);if($.g!="")E&&($.g=E+"."+$.g),ja($,$.s);else{var X=c.location;$=X.protocol,E=E?E+"."+X.hostname:X.hostname,X=+X.port;var oe=new Ms(null);$&&cu(oe,$),E&&(oe.g=E),X&&ja(oe,X),A&&(oe.l=A),$=oe}return A=m.D,E=m.ya,A&&E&&dt($,A,E),dt($,"VER",m.la),Kl(m,$),$}function Gp(m,E,A){if(E&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return E=m.Ca&&!m.pa?new pn(new Vs({eb:A})):new pn(m.pa),E.Ha(m.J),E}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function $h(){}t=$h.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Yl(){}Yl.prototype.g=function(m,E){return new or(m,E)};function or(m,E){bt.call(this),this.g=new Wp(E),this.l=m,this.h=E&&E.messageUrlParams||null,m=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(m?m["X-WebChannel-Content-Type"]=E.messageContentType:m={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(m?m["X-WebChannel-Client-Profile"]=E.va:m={"X-WebChannel-Client-Profile":E.va}),this.g.S=m,(m=E&&E.Sb)&&!y(m)&&(this.g.m=m),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!y(E)&&(this.g.D=E,m=this.h,m!==null&&E in m&&(m=this.h,E in m&&delete m[E])),this.j=new Fs(this)}b(or,bt),or.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},or.prototype.close=function(){mu(this.g)},or.prototype.o=function(m){var E=this.g;if(typeof m=="string"){var A={};A.__data__=m,m=A}else this.u&&(A={},A.__data__=xa(m),m=A);E.i.push(new Gl(E.Ya++,m)),E.G==3&&Eo(E)},or.prototype.N=function(){this.g.l=null,delete this.j,mu(this.g),delete this.g,or.aa.N.call(this)};function Mi(m){nu.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var E=m.__sm__;if(E){e:{for(const A in E){m=A;break e}m=void 0}(this.i=m)&&(m=this.i,E=E!==null&&m in E?E[m]:void 0),this.data=E}else this.data=m}b(Mi,nu);function Zp(){yh.call(this),this.status=1}b(Zp,yh);function Fs(m){this.g=m}b(Fs,$h),Fs.prototype.ua=function(){Nt(this.g,"a")},Fs.prototype.ta=function(m){Nt(this.g,new Mi(m))},Fs.prototype.sa=function(m){Nt(this.g,new Zp)},Fs.prototype.ra=function(){Nt(this.g,"b")},Yl.prototype.createWebChannel=Yl.prototype.g,or.prototype.send=or.prototype.o,or.prototype.open=or.prototype.m,or.prototype.close=or.prototype.close,FA=function(){return new Yl},VA=function(){return ru()},LA=ya,Zw={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Wl.NO_ERROR=0,Wl.TIMEOUT=8,Wl.HTTP_ERROR=6,ov=Wl,iu.COMPLETE="complete",OA=iu,xh.EventType=_o,_o.OPEN="a",_o.CLOSE="b",_o.ERROR="c",_o.MESSAGE="d",bt.prototype.listen=bt.prototype.K,gf=xh,pn.prototype.listenOnce=pn.prototype.L,pn.prototype.getLastError=pn.prototype.Ka,pn.prototype.getLastErrorCode=pn.prototype.Ba,pn.prototype.getStatus=pn.prototype.Z,pn.prototype.getResponseJson=pn.prototype.Oa,pn.prototype.getResponseText=pn.prototype.oa,pn.prototype.send=pn.prototype.ea,pn.prototype.setWithCredentials=pn.prototype.Ha,DA=pn}).apply(typeof Sg<"u"?Sg:typeof self<"u"?self:typeof window<"u"?window:{});const q2="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sr=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Sr.UNAUTHENTICATED=new Sr(null),Sr.GOOGLE_CREDENTIALS=new Sr("google-credentials-uid"),Sr.FIRST_PARTY=new Sr("first-party-uid"),Sr.MOCK_USER=new Sr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jd="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic=new Kb("@firebase/firestore");function tf(){return Ic.logLevel}function Qe(t,...e){if(Ic.logLevel<=At.DEBUG){const n=e.map(lj);Ic.debug(`Firestore (${Jd}): ${t}`,...n)}}function eo(t,...e){if(Ic.logLevel<=At.ERROR){const n=e.map(lj);Ic.error(`Firestore (${Jd}): ${t}`,...n)}}function Nd(t,...e){if(Ic.logLevel<=At.WARN){const n=e.map(lj);Ic.warn(`Firestore (${Jd}): ${t}`,...n)}}function lj(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(t="Unexpected state"){const e=`FIRESTORE (${Jd}) INTERNAL ASSERTION FAILED: `+t;throw eo(e),new Error(e)}function Zt(t,e){t||ht()}function gt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends ha{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class FB{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Sr.UNAUTHENTICATED))}shutdown(){}}class zB{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class UB{constructor(e){this.t=e,this.currentUser=Sr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Zt(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let a=new qa;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new qa,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=a;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},c=u=>{Qe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Qe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new qa)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Qe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Zt(typeof r.accessToken=="string"),new zA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Zt(e===null||typeof e=="string"),new Sr(e)}}class $B{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Sr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class BB{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new $B(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Sr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class WB{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qB{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Zt(this.o===void 0);const r=a=>{a.error!=null&&Qe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.R;return this.R=a.token,Qe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Qe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):Qe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Zt(typeof n.token=="string"),this.R=n.token,new WB(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HB(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=HB(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%e.length))}return r}}function Lt(t,e){return t<e?-1:t>e?1:0}function Sd(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Re(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Re(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Re(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Kn.fromMillis(Date.now())}static fromDate(e){return Kn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Kn(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Lt(this.nanoseconds,e.nanoseconds):Lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new mt(e)}static min(){return new mt(new Kn(0,0))}static max(){return new mt(new Kn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,n,r){n===void 0?n=0:n>e.length&&ht(),r===void 0?r=e.length-n:r>e.length-n&&ht(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return um.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof um?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=e.get(i),o=n.get(i);if(a<o)return-1;if(a>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class rn extends um{construct(e,n,r){return new rn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(he.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new rn(n)}static emptyPath(){return new rn([])}}const GB=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pr extends um{construct(e,n,r){return new pr(e,n,r)}static isValidIdentifier(e){return GB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new pr(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Re(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new Re(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Re(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(a(),i++)}if(a(),o)throw new Re(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pr(n)}static emptyPath(){return new pr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.path=e}static fromPath(e){return new rt(rn.fromString(e))}static fromName(e){return new rt(rn.fromString(e).popFirst(5))}static empty(){return new rt(rn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return rn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new rt(new rn(e.slice()))}}function ZB(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=mt.fromTimestamp(r===1e9?new Kn(n+1,0):new Kn(n,r));return new ml(i,rt.empty(),e)}function KB(t){return new ml(t.readTime,t.key,-1)}class ml{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ml(mt.min(),rt.empty(),-1)}static max(){return new ml(mt.max(),rt.empty(),-1)}}function YB(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=rt.comparator(t.documentKey,e.documentKey),n!==0?n:Lt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class XB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tp(t){if(t.code!==he.FAILED_PRECONDITION||t.message!==QB)throw t;Qe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ht(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new we((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof we?n:we.resolve(n)}catch(n){return we.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):we.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):we.reject(n)}static resolve(e){return new we((n,r)=>{n(e)})}static reject(e){return new we((n,r)=>{r(e)})}static waitFor(e){return new we((n,r)=>{let i=0,a=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++a,o&&a===i&&n()},u=>r(u))}),o=!0,a===i&&n()})}static or(e){let n=we.resolve(!1);for(const r of e)n=n.next(i=>i?we.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,a)=>{r.push(n.call(this,i,a))}),this.waitFor(r)}static mapArray(e,n){return new we((r,i)=>{const a=e.length,o=new Array(a);let c=0;for(let u=0;u<a;u++){const h=u;n(e[h]).next(f=>{o[h]=f,++c,c===a&&r(o)},f=>i(f))}})}static doWhile(e,n){return new we((r,i)=>{const a=()=>{e()===!0?n().next(()=>{a()},i):r()};a()})}}function JB(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function np(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}cj.oe=-1;function py(t){return t==null}function sx(t){return t===0&&1/t==-1/0}function e7(t){return typeof t=="number"&&Number.isInteger(t)&&!sx(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H2(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Gc(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function $A(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e,n){this.comparator=e,this.root=n||mr.EMPTY}insert(e,n){return new Cn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,mr.BLACK,null,null))}remove(e){return new Cn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Eg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Eg(this.root,e,this.comparator,!1)}getReverseIterator(){return new Eg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Eg(this.root,e,this.comparator,!0)}}class Eg{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mr{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??mr.RED,this.left=i??mr.EMPTY,this.right=a??mr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new mr(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return mr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return mr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ht();const e=this.left.check();if(e!==this.right.check())throw ht();return e+(this.isRed()?0:1)}}mr.EMPTY=null,mr.RED=!0,mr.BLACK=!1;mr.EMPTY=new class{constructor(){this.size=0}get key(){throw ht()}get value(){throw ht()}get color(){throw ht()}get left(){throw ht()}get right(){throw ht()}copy(e,n,r,i,a){return this}insert(e,n,r){return new mr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e){this.comparator=e,this.data=new Cn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new G2(this.data.getIterator())}getIteratorFrom(e){return new G2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof xr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new xr(this.comparator);return n.data=e,n}}class G2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e){this.fields=e,e.sort(pr.comparator)}static empty(){return new ws([])}unionWith(e){let n=new xr(pr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ws(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Sd(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new BA("Invalid base64 string: "+a):a}}(e);return new _r(n)}static fromUint8Array(e){const n=function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a}(e);return new _r(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_r.EMPTY_BYTE_STRING=new _r("");const t7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pl(t){if(Zt(!!t),typeof t=="string"){let e=0;const n=t7.exec(t);if(Zt(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Vn(t.seconds),nanos:Vn(t.nanos)}}function Vn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ac(t){return typeof t=="string"?_r.fromBase64String(t):_r.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gy(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function uj(t){const e=t.mapValue.fields.__previous_value__;return gy(e)?uj(e):e}function dm(t){const e=pl(t.mapValue.fields.__local_write_time__.timestampValue);return new Kn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n7{constructor(e,n,r,i,a,o,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=h}}class hm{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new hm("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof hm&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cg={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Rc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?gy(t)?4:s7(t)?9007199254740991:r7(t)?10:11:ht()}function aa(t,e){if(t===e)return!0;const n=Rc(t);if(n!==Rc(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return dm(t).isEqual(dm(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=pl(i.timestampValue),c=pl(a.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return Ac(i.bytesValue).isEqual(Ac(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return Vn(i.geoPointValue.latitude)===Vn(a.geoPointValue.latitude)&&Vn(i.geoPointValue.longitude)===Vn(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return Vn(i.integerValue)===Vn(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=Vn(i.doubleValue),c=Vn(a.doubleValue);return o===c?sx(o)===sx(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return Sd(t.arrayValue.values||[],e.arrayValue.values||[],aa);case 10:case 11:return function(i,a){const o=i.mapValue.fields||{},c=a.mapValue.fields||{};if(H2(o)!==H2(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!aa(o[u],c[u])))return!1;return!0}(t,e);default:return ht()}}function fm(t,e){return(t.values||[]).find(n=>aa(n,e))!==void 0}function Ed(t,e){if(t===e)return 0;const n=Rc(t),r=Rc(e);if(n!==r)return Lt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Lt(t.booleanValue,e.booleanValue);case 2:return function(a,o){const c=Vn(a.integerValue||a.doubleValue),u=Vn(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return Z2(t.timestampValue,e.timestampValue);case 4:return Z2(dm(t),dm(e));case 5:return Lt(t.stringValue,e.stringValue);case 6:return function(a,o){const c=Ac(a),u=Ac(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const c=a.split("/"),u=o.split("/");for(let h=0;h<c.length&&h<u.length;h++){const f=Lt(c[h],u[h]);if(f!==0)return f}return Lt(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const c=Lt(Vn(a.latitude),Vn(o.latitude));return c!==0?c:Lt(Vn(a.longitude),Vn(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return K2(t.arrayValue,e.arrayValue);case 10:return function(a,o){var c,u,h,f;const p=a.fields||{},v=o.fields||{},_=(c=p.value)===null||c===void 0?void 0:c.arrayValue,b=(u=v.value)===null||u===void 0?void 0:u.arrayValue,N=Lt(((h=_==null?void 0:_.values)===null||h===void 0?void 0:h.length)||0,((f=b==null?void 0:b.values)===null||f===void 0?void 0:f.length)||0);return N!==0?N:K2(_,b)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===Cg.mapValue&&o===Cg.mapValue)return 0;if(a===Cg.mapValue)return 1;if(o===Cg.mapValue)return-1;const c=a.fields||{},u=Object.keys(c),h=o.fields||{},f=Object.keys(h);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){const v=Lt(u[p],f[p]);if(v!==0)return v;const _=Ed(c[u[p]],h[f[p]]);if(_!==0)return _}return Lt(u.length,f.length)}(t.mapValue,e.mapValue);default:throw ht()}}function Z2(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Lt(t,e);const n=pl(t),r=pl(e),i=Lt(n.seconds,r.seconds);return i!==0?i:Lt(n.nanos,r.nanos)}function K2(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=Ed(n[i],r[i]);if(a)return a}return Lt(n.length,r.length)}function Cd(t){return Kw(t)}function Kw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=pl(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ac(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return rt.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=Kw(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const o of r)a?a=!1:i+=",",i+=`${o}:${Kw(n.fields[o])}`;return i+"}"}(t.mapValue):ht()}function ix(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Yw(t){return!!t&&"integerValue"in t}function dj(t){return!!t&&"arrayValue"in t}function Y2(t){return!!t&&"nullValue"in t}function Q2(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function lv(t){return!!t&&"mapValue"in t}function r7(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Df(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Gc(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Df(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Df(t.arrayValue.values[n]);return e}return Object.assign({},t)}function s7(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e){this.value=e}static empty(){return new ns({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!lv(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Df(n)}setAll(e){let n=pr.emptyPath(),r={},i=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}o?r[c.lastSegment()]=Df(o):i.push(c.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());lv(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return aa(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];lv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Gc(n,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new ns(Df(this.value))}}function WA(t){const e=[];return Gc(t.fields,(n,r)=>{const i=new pr([n]);if(lv(r)){const a=WA(r.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)}),new ws(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,n,r,i,a,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=c}static newInvalidDocument(e){return new Cr(e,0,mt.min(),mt.min(),mt.min(),ns.empty(),0)}static newFoundDocument(e,n,r,i){return new Cr(e,1,n,mt.min(),r,i,0)}static newNoDocument(e,n){return new Cr(e,2,n,mt.min(),mt.min(),ns.empty(),0)}static newUnknownDocument(e,n){return new Cr(e,3,n,mt.min(),mt.min(),ns.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(mt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ns.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ns.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=mt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Cr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Cr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,n){this.position=e,this.inclusive=n}}function X2(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],o=t.position[i];if(a.field.isKeyField()?r=rt.comparator(rt.fromName(o.referenceValue),n.key):r=Ed(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function J2(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!aa(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e,n="asc"){this.field=e,this.dir=n}}function i7(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qA=class{};class Gn extends qA{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new o7(e,n,r):n==="array-contains"?new u7(e,r):n==="in"?new d7(e,r):n==="not-in"?new h7(e,r):n==="array-contains-any"?new f7(e,r):new Gn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new l7(e,r):new c7(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ed(n,this.value)):n!==null&&Rc(this.value)===Rc(n)&&this.matchesComparison(Ed(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ht()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Si extends qA{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Si(e,n)}matches(e){return HA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function HA(t){return t.op==="and"}function GA(t){return a7(t)&&HA(t)}function a7(t){for(const e of t.filters)if(e instanceof Si)return!1;return!0}function Qw(t){if(t instanceof Gn)return t.field.canonicalString()+t.op.toString()+Cd(t.value);if(GA(t))return t.filters.map(e=>Qw(e)).join(",");{const e=t.filters.map(n=>Qw(n)).join(",");return`${t.op}(${e})`}}function ZA(t,e){return t instanceof Gn?function(r,i){return i instanceof Gn&&r.op===i.op&&r.field.isEqual(i.field)&&aa(r.value,i.value)}(t,e):t instanceof Si?function(r,i){return i instanceof Si&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,o,c)=>a&&ZA(o,i.filters[c]),!0):!1}(t,e):void ht()}function KA(t){return t instanceof Gn?function(n){return`${n.field.canonicalString()} ${n.op} ${Cd(n.value)}`}(t):t instanceof Si?function(n){return n.op.toString()+" {"+n.getFilters().map(KA).join(" ,")+"}"}(t):"Filter"}class o7 extends Gn{constructor(e,n,r){super(e,n,r),this.key=rt.fromName(r.referenceValue)}matches(e){const n=rt.comparator(e.key,this.key);return this.matchesComparison(n)}}class l7 extends Gn{constructor(e,n){super(e,"in",n),this.keys=YA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class c7 extends Gn{constructor(e,n){super(e,"not-in",n),this.keys=YA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function YA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>rt.fromName(r.referenceValue))}class u7 extends Gn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return dj(n)&&fm(n.arrayValue,this.value)}}class d7 extends Gn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&fm(this.value.arrayValue,n)}}class h7 extends Gn{constructor(e,n){super(e,"not-in",n)}matches(e){if(fm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!fm(this.value.arrayValue,n)}}class f7 extends Gn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!dj(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>fm(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m7{constructor(e,n=null,r=[],i=[],a=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=c,this.ue=null}}function eC(t,e=null,n=[],r=[],i=null,a=null,o=null){return new m7(t,e,n,r,i,a,o)}function hj(t){const e=gt(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Qw(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),py(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Cd(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Cd(r)).join(",")),e.ue=n}return e.ue}function fj(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!i7(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ZA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!J2(t.startAt,e.startAt)&&J2(t.endAt,e.endAt)}function Xw(t){return rt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,n=null,r=[],i=[],a=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function p7(t,e,n,r,i,a,o,c){return new Zc(t,e,n,r,i,a,o,c)}function vy(t){return new Zc(t)}function tC(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function mj(t){return t.collectionGroup!==null}function cd(t){const e=gt(t);if(e.ce===null){e.ce=[];const n=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new xr(pr.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(c=c.add(h.field))})}),c})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.ce.push(new mm(a,r))}),n.has(pr.keyField().canonicalString())||e.ce.push(new mm(pr.keyField(),r))}return e.ce}function ta(t){const e=gt(t);return e.le||(e.le=g7(e,cd(t))),e.le}function g7(t,e){if(t.limitType==="F")return eC(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new mm(i.field,a)});const n=t.endAt?new Td(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Td(t.startAt.position,t.startAt.inclusive):null;return eC(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Jw(t,e){const n=t.filters.concat([e]);return new Zc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ax(t,e,n){return new Zc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function xy(t,e){return fj(ta(t),ta(e))&&t.limitType===e.limitType}function QA(t){return`${hj(ta(t))}|lt:${t.limitType}`}function Mu(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>KA(i)).join(", ")}]`),py(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Cd(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Cd(i)).join(",")),`Target(${r})`}(ta(t))}; limitType=${t.limitType})`}function yy(t,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):rt.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,i){for(const a of cd(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,c,u){const h=X2(o,c,u);return o.inclusive?h<=0:h<0}(r.startAt,cd(r),i)||r.endAt&&!function(o,c,u){const h=X2(o,c,u);return o.inclusive?h>=0:h>0}(r.endAt,cd(r),i))}(t,e)}function v7(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function XA(t){return(e,n)=>{let r=!1;for(const i of cd(t)){const a=x7(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function x7(t,e,n){const r=t.field.isKeyField()?rt.comparator(e.key,n.key):function(a,o,c){const u=o.data.field(a),h=c.data.field(a);return u!==null&&h!==null?Ed(u,h):ht()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ht()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Gc(this.inner,(n,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return $A(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y7=new Cn(rt.comparator);function to(){return y7}const JA=new Cn(rt.comparator);function vf(...t){let e=JA;for(const n of t)e=e.insert(n.key,n);return e}function eR(t){let e=JA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function lc(){return Of()}function tR(){return Of()}function Of(){return new eh(t=>t.toString(),(t,e)=>t.isEqual(e))}const _7=new Cn(rt.comparator),w7=new xr(rt.comparator);function kt(...t){let e=w7;for(const n of t)e=e.add(n);return e}const b7=new xr(Lt);function j7(){return b7}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pj(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sx(e)?"-0":e}}function nR(t){return{integerValue:""+t}}function N7(t,e){return e7(e)?nR(e):pj(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(){this._=void 0}}function S7(t,e,n){return t instanceof pm?function(i,a){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&gy(a)&&(a=uj(a)),a&&(o.fields.__previous_value__=a),{mapValue:o}}(n,e):t instanceof gm?sR(t,e):t instanceof vm?iR(t,e):function(i,a){const o=rR(i,a),c=nC(o)+nC(i.Pe);return Yw(o)&&Yw(i.Pe)?nR(c):pj(i.serializer,c)}(t,e)}function E7(t,e,n){return t instanceof gm?sR(t,e):t instanceof vm?iR(t,e):n}function rR(t,e){return t instanceof ox?function(r){return Yw(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class pm extends _y{}class gm extends _y{constructor(e){super(),this.elements=e}}function sR(t,e){const n=aR(e);for(const r of t.elements)n.some(i=>aa(i,r))||n.push(r);return{arrayValue:{values:n}}}class vm extends _y{constructor(e){super(),this.elements=e}}function iR(t,e){let n=aR(e);for(const r of t.elements)n=n.filter(i=>!aa(i,r));return{arrayValue:{values:n}}}class ox extends _y{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function nC(t){return Vn(t.integerValue||t.doubleValue)}function aR(t){return dj(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C7{constructor(e,n){this.field=e,this.transform=n}}function T7(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof gm&&i instanceof gm||r instanceof vm&&i instanceof vm?Sd(r.elements,i.elements,aa):r instanceof ox&&i instanceof ox?aa(r.Pe,i.Pe):r instanceof pm&&i instanceof pm}(t.transform,e.transform)}class k7{constructor(e,n){this.version=e,this.transformResults=n}}class qr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new qr}static exists(e){return new qr(void 0,e)}static updateTime(e){return new qr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function cv(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class wy{}function oR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new by(t.key,qr.none()):new rp(t.key,t.data,qr.none());{const n=t.data,r=ns.empty();let i=new xr(pr.comparator);for(let a of e.fields)if(!i.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),i=i.add(a)}return new Rl(t.key,r,new ws(i.toArray()),qr.none())}}function P7(t,e,n){t instanceof rp?function(i,a,o){const c=i.value.clone(),u=sC(i.fieldTransforms,a,o.transformResults);c.setAll(u),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Rl?function(i,a,o){if(!cv(i.precondition,a))return void a.convertToUnknownDocument(o.version);const c=sC(i.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(lR(i)),u.setAll(c),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Lf(t,e,n,r){return t instanceof rp?function(a,o,c,u){if(!cv(a.precondition,o))return c;const h=a.value.clone(),f=iC(a.fieldTransforms,u,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Rl?function(a,o,c,u){if(!cv(a.precondition,o))return c;const h=iC(a.fieldTransforms,u,o),f=o.data;return f.setAll(lR(a)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(a,o,c){return cv(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function I7(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=rR(r.transform,i||null);a!=null&&(n===null&&(n=ns.empty()),n.set(r.field,a))}return n||null}function rC(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Sd(r,i,(a,o)=>T7(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class rp extends wy{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Rl extends wy{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function lR(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function sC(t,e,n){const r=new Map;Zt(t.length===n.length);for(let i=0;i<n.length;i++){const a=t[i],o=a.transform,c=e.data.field(a.field);r.set(a.field,E7(o,c,n[i]))}return r}function iC(t,e,n){const r=new Map;for(const i of t){const a=i.transform,o=n.data.field(i.field);r.set(i.field,S7(a,o,e))}return r}class by extends wy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class A7 extends wy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R7{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&P7(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Lf(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Lf(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=tR();return this.mutations.forEach(i=>{const a=e.get(i.key),o=a.overlayedDocument;let c=this.applyToLocalView(o,a.mutatedFields);c=n.has(i.key)?null:c;const u=oR(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(mt.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),kt())}isEqual(e){return this.batchId===e.batchId&&Sd(this.mutations,e.mutations,(n,r)=>rC(n,r))&&Sd(this.baseMutations,e.baseMutations,(n,r)=>rC(n,r))}}class gj{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Zt(e.mutations.length===r.length);let i=function(){return _7}();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new gj(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let M7=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D7{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qn,Mt;function O7(t){switch(t){default:return ht();case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0}}function cR(t){if(t===void 0)return eo("GRPC error has no .code"),he.UNKNOWN;switch(t){case qn.OK:return he.OK;case qn.CANCELLED:return he.CANCELLED;case qn.UNKNOWN:return he.UNKNOWN;case qn.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case qn.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case qn.INTERNAL:return he.INTERNAL;case qn.UNAVAILABLE:return he.UNAVAILABLE;case qn.UNAUTHENTICATED:return he.UNAUTHENTICATED;case qn.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case qn.NOT_FOUND:return he.NOT_FOUND;case qn.ALREADY_EXISTS:return he.ALREADY_EXISTS;case qn.PERMISSION_DENIED:return he.PERMISSION_DENIED;case qn.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case qn.ABORTED:return he.ABORTED;case qn.OUT_OF_RANGE:return he.OUT_OF_RANGE;case qn.UNIMPLEMENTED:return he.UNIMPLEMENTED;case qn.DATA_LOSS:return he.DATA_LOSS;default:return ht()}}(Mt=qn||(qn={}))[Mt.OK=0]="OK",Mt[Mt.CANCELLED=1]="CANCELLED",Mt[Mt.UNKNOWN=2]="UNKNOWN",Mt[Mt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Mt[Mt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Mt[Mt.NOT_FOUND=5]="NOT_FOUND",Mt[Mt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Mt[Mt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Mt[Mt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Mt[Mt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Mt[Mt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Mt[Mt.ABORTED=10]="ABORTED",Mt[Mt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Mt[Mt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Mt[Mt.INTERNAL=13]="INTERNAL",Mt[Mt.UNAVAILABLE=14]="UNAVAILABLE",Mt[Mt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L7(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V7=new hc([4294967295,4294967295],0);function aC(t){const e=L7().encode(t),n=new MA;return n.update(e),new Uint8Array(n.digest())}function oC(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new hc([n,r],0),new hc([i,a],0)]}class vj{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new xf(`Invalid padding: ${n}`);if(r<0)throw new xf(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new xf(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new xf(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=hc.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(hc.fromNumber(r)));return i.compare(V7)===1&&(i=new hc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=aC(e),[r,i]=oC(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,i,a);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new vj(a,i,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;const n=aC(e),[r,i]=oC(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,i,a);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class xf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,sp.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new jy(mt.min(),i,new Cn(Lt),to(),kt())}}class sp{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new sp(r,n,kt(),kt(),kt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class uR{constructor(e,n){this.targetId=e,this.me=n}}class dR{constructor(e,n,r=_r.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class lC{constructor(){this.fe=0,this.ge=uC(),this.pe=_r.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=kt(),n=kt(),r=kt();return this.ge.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ht()}}),new sp(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=uC()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Zt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class F7{constructor(e){this.Le=e,this.Be=new Map,this.ke=to(),this.qe=cC(),this.Qe=new Cn(Lt)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ht()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const a=i.target;if(Xw(a))if(r===0){const o=new rt(a.path);this.Ue(n,o,Cr.newNoDocument(o,mt.min()))}else Zt(r===1);else{const o=this.Ye(n);if(o!==r){const c=this.Ze(e),u=c?this.Xe(c,e,o):1;if(u!==0){this.je(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let o,c;try{o=Ac(r).toUint8Array()}catch(u){if(u instanceof BA)return Nd("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new vj(o,i,a)}catch(u){return Nd(u instanceof xf?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(a=>{const o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,a,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((a,o)=>{const c=this.Je(o);if(c){if(a.current&&Xw(c.target)){const u=new rt(c.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Cr.newNoDocument(u,e))}a.be&&(n.set(o,a.ve()),a.Ce())}});let r=kt();this.qe.forEach((a,o)=>{let c=!0;o.forEachWhile(u=>{const h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(a))}),this.ke.forEach((a,o)=>o.setReadTime(e));const i=new jy(e,n,this.Qe,this.ke,r);return this.ke=to(),this.qe=cC(),this.Qe=new Cn(Lt),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new lC,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new xr(Lt),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Qe("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new lC),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function cC(){return new Cn(rt.comparator)}function uC(){return new Cn(rt.comparator)}const z7={asc:"ASCENDING",desc:"DESCENDING"},U7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$7={and:"AND",or:"OR"};class B7{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function e1(t,e){return t.useProto3Json||py(e)?e:{value:e}}function lx(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function W7(t,e){return lx(t,e.toTimestamp())}function na(t){return Zt(!!t),mt.fromTimestamp(function(n){const r=pl(n);return new Kn(r.seconds,r.nanos)}(t))}function xj(t,e){return t1(t,e).canonicalString()}function t1(t,e){const n=function(i){return new rn(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function fR(t){const e=rn.fromString(t);return Zt(xR(e)),e}function n1(t,e){return xj(t.databaseId,e.path)}function s_(t,e){const n=fR(e);if(n.get(1)!==t.databaseId.projectId)throw new Re(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Re(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new rt(pR(n))}function mR(t,e){return xj(t.databaseId,e)}function q7(t){const e=fR(t);return e.length===4?rn.emptyPath():pR(e)}function r1(t){return new rn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function pR(t){return Zt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function dC(t,e,n){return{name:n1(t,e),fields:n.value.mapValue.fields}}function H7(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ht()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(h,f){return h.useProto3Json?(Zt(f===void 0||typeof f=="string"),_r.fromBase64String(f||"")):(Zt(f===void 0||f instanceof Buffer||f instanceof Uint8Array),_r.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(h){const f=h.code===void 0?he.UNKNOWN:cR(h.code);return new Re(f,h.message||"")}(o);n=new dR(r,i,a,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=s_(t,r.document.name),a=na(r.document.updateTime),o=r.document.createTime?na(r.document.createTime):mt.min(),c=new ns({mapValue:{fields:r.document.fields}}),u=Cr.newFoundDocument(i,a,o,c),h=r.targetIds||[],f=r.removedTargetIds||[];n=new uv(h,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=s_(t,r.document),a=r.readTime?na(r.readTime):mt.min(),o=Cr.newNoDocument(i,a),c=r.removedTargetIds||[];n=new uv([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=s_(t,r.document),a=r.removedTargetIds||[];n=new uv([],a,i,null)}else{if(!("filter"in e))return ht();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,o=new D7(i,a),c=r.targetId;n=new uR(c,o)}}return n}function G7(t,e){let n;if(e instanceof rp)n={update:dC(t,e.key,e.value)};else if(e instanceof by)n={delete:n1(t,e.key)};else if(e instanceof Rl)n={update:dC(t,e.key,e.data),updateMask:nW(e.fieldMask)};else{if(!(e instanceof A7))return ht();n={verify:n1(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,o){const c=o.transform;if(c instanceof pm)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof gm)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof vm)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof ox)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw ht()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:W7(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ht()}(t,e.precondition)),n}function Z7(t,e){return t&&t.length>0?(Zt(e!==void 0),t.map(n=>function(i,a){let o=i.updateTime?na(i.updateTime):na(a);return o.isEqual(mt.min())&&(o=na(a)),new k7(o,i.transformResults||[])}(n,e))):[]}function K7(t,e){return{documents:[mR(t,e.path)]}}function Y7(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=mR(t,i);const a=function(h){if(h.length!==0)return vR(Si.create(h,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const o=function(h){if(h.length!==0)return h.map(f=>function(v){return{field:Du(v.field),direction:J7(v.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=e1(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:i}}function Q7(t){let e=q7(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Zt(r===1);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let a=[];n.where&&(a=function(p){const v=gR(p);return v instanceof Si&&GA(v)?v.getFilters():[v]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(v=>function(b){return new mm(Ou(b.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(v))}(n.orderBy));let c=null;n.limit&&(c=function(p){let v;return v=typeof p=="object"?p.value:p,py(v)?null:v}(n.limit));let u=null;n.startAt&&(u=function(p){const v=!!p.before,_=p.values||[];return new Td(_,v)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const v=!p.before,_=p.values||[];return new Td(_,v)}(n.endAt)),p7(e,i,o,a,c,"F",u,h)}function X7(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ht()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function gR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ou(n.unaryFilter.field);return Gn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ou(n.unaryFilter.field);return Gn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ou(n.unaryFilter.field);return Gn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ou(n.unaryFilter.field);return Gn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ht()}}(t):t.fieldFilter!==void 0?function(n){return Gn.create(Ou(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ht()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Si.create(n.compositeFilter.filters.map(r=>gR(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ht()}}(n.compositeFilter.op))}(t):ht()}function J7(t){return z7[t]}function eW(t){return U7[t]}function tW(t){return $7[t]}function Du(t){return{fieldPath:t.canonicalString()}}function Ou(t){return pr.fromServerFormat(t.fieldPath)}function vR(t){return t instanceof Gn?function(n){if(n.op==="=="){if(Q2(n.value))return{unaryFilter:{field:Du(n.field),op:"IS_NAN"}};if(Y2(n.value))return{unaryFilter:{field:Du(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Q2(n.value))return{unaryFilter:{field:Du(n.field),op:"IS_NOT_NAN"}};if(Y2(n.value))return{unaryFilter:{field:Du(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Du(n.field),op:eW(n.op),value:n.value}}}(t):t instanceof Si?function(n){const r=n.getFilters().map(i=>vR(i));return r.length===1?r[0]:{compositeFilter:{op:tW(n.op),filters:r}}}(t):ht()}function nW(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function xR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,n,r,i,a=mt.min(),o=mt.min(),c=_r.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new Yo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Yo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Yo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Yo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rW{constructor(e){this.ct=e}}function sW(t){const e=Q7({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ax(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iW{constructor(){this.un=new aW}addToCollectionParentIndex(e,n){return this.un.add(n),we.resolve()}getCollectionParents(e,n){return we.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return we.resolve()}deleteFieldIndex(e,n){return we.resolve()}deleteAllFieldIndexes(e){return we.resolve()}createTargetIndexes(e,n){return we.resolve()}getDocumentsMatchingTarget(e,n){return we.resolve(null)}getIndexType(e,n){return we.resolve(0)}getFieldIndexes(e,n){return we.resolve([])}getNextCollectionGroupToUpdate(e){return we.resolve(null)}getMinOffset(e,n){return we.resolve(ml.min())}getMinOffsetFromCollectionGroup(e,n){return we.resolve(ml.min())}updateCollectionGroup(e,n,r){return we.resolve()}updateIndexEntries(e,n){return we.resolve()}}class aW{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new xr(rn.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new xr(rn.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new kd(0)}static kn(){return new kd(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oW{constructor(){this.changes=new eh(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Cr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?we.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lW{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cW{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Lf(r.mutation,i,ws.empty(),Kn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,kt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=kt()){const i=lc();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(a=>{let o=vf();return a.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=lc();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,kt()))}populateOverlays(e,n,r){const i=[];return r.forEach(a=>{n.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,i){let a=to();const o=Of(),c=function(){return Of()}();return n.forEach((u,h)=>{const f=r.get(h.key);i.has(h.key)&&(f===void 0||f.mutation instanceof Rl)?a=a.insert(h.key,h):f!==void 0?(o.set(h.key,f.mutation.getFieldMask()),Lf(f.mutation,h,f.mutation.getFieldMask(),Kn.now())):o.set(h.key,ws.empty())}),this.recalculateAndSaveOverlays(e,a).next(u=>(u.forEach((h,f)=>o.set(h,f)),n.forEach((h,f)=>{var p;return c.set(h,new lW(f,(p=o.get(h))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,n){const r=Of();let i=new Cn((o,c)=>o-c),a=kt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let f=r.get(u)||ws.empty();f=c.applyToLocalView(h,f),r.set(u,f);const p=(i.get(c.batchId)||kt()).add(u);i=i.insert(c.batchId,p)})}).next(()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),h=u.key,f=u.value,p=tR();f.forEach(v=>{if(!a.has(v)){const _=oR(n.get(v),r.get(v));_!==null&&p.set(v,_),a=a.add(v)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return we.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return rt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):mj(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):we.resolve(lc());let c=-1,u=a;return o.next(h=>we.forEach(h,(f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),a.get(f)?we.resolve():this.remoteDocumentCache.getEntry(e,f).next(v=>{u=u.insert(f,v)}))).next(()=>this.populateOverlays(e,h,a)).next(()=>this.computeViews(e,u,h,kt())).next(f=>({batchId:c,changes:eR(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new rt(n)).next(r=>{let i=vf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let o=vf();return this.indexManager.getCollectionParents(e,a).next(c=>we.forEach(c,u=>{const h=function(p,v){return new Zc(v,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(f=>{f.forEach((p,v)=>{o=o.insert(p,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i))).next(o=>{a.forEach((u,h)=>{const f=h.getKey();o.get(f)===null&&(o=o.insert(f,Cr.newInvalidDocument(f)))});let c=vf();return o.forEach((u,h)=>{const f=a.get(u);f!==void 0&&Lf(f.mutation,h,ws.empty(),Kn.now()),yy(n,h)&&(c=c.insert(u,h))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uW{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return we.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:na(i.createTime)}}(n)),we.resolve()}getNamedQuery(e,n){return we.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:sW(i.bundledQuery),readTime:na(i.readTime)}}(n)),we.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dW{constructor(){this.overlays=new Cn(rt.comparator),this.Ir=new Map}getOverlay(e,n){return we.resolve(this.overlays.get(n))}getOverlays(e,n){const r=lc();return we.forEach(n,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,a)=>{this.ht(e,n,a)}),we.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(r)),we.resolve()}getOverlaysForCollection(e,n,r){const i=lc(),a=n.length+1,o=new rt(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===a&&u.largestBatchId>r&&i.set(u.getKey(),u)}return we.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new Cn((h,f)=>h-f);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let f=a.get(h.largestBatchId);f===null&&(f=lc(),a=a.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const c=lc(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,f)=>c.set(h,f)),!(c.size()>=i)););return we.resolve(c)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new M7(n,r));let a=this.Ir.get(n);a===void 0&&(a=kt(),this.Ir.set(n,a)),this.Ir.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hW{constructor(){this.sessionToken=_r.EMPTY_BYTE_STRING}getSessionToken(e){return we.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,we.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(){this.Tr=new xr(cr.Er),this.dr=new xr(cr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new cr(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new cr(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new rt(new rn([])),r=new cr(n,e),i=new cr(n,e+1),a=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),a.push(o.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new rt(new rn([])),r=new cr(n,e),i=new cr(n,e+1);let a=kt();return this.dr.forEachInRange([r,i],o=>{a=a.add(o.key)}),a}containsKey(e){const n=new cr(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class cr{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return rt.comparator(e.key,n.key)||Lt(e.wr,n.wr)}static Ar(e,n){return Lt(e.wr,n.wr)||rt.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fW{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new xr(cr.Er)}checkEmpty(e){return we.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new R7(a,n,r,i);this.mutationQueue.push(o);for(const c of i)this.br=this.br.add(new cr(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return we.resolve(o)}lookupMutationBatch(e,n){return we.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),a=i<0?0:i;return we.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return we.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return we.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new cr(n,0),i=new cr(n,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,i],o=>{const c=this.Dr(o.wr);a.push(c)}),we.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new xr(Lt);return n.forEach(i=>{const a=new cr(i,0),o=new cr(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,o],c=>{r=r.add(c.wr)})}),we.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;rt.isDocumentKey(a)||(a=a.child(""));const o=new cr(new rt(a),0);let c=new xr(Lt);return this.br.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(c=c.add(u.wr)),!0)},o),we.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Zt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return we.forEach(n.mutations,i=>{const a=new cr(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new cr(n,0),i=this.br.firstAfterOrEqual(r);return we.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,we.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mW{constructor(e){this.Mr=e,this.docs=function(){return new Cn(rt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return we.resolve(r?r.document.mutableCopy():Cr.newInvalidDocument(n))}getEntries(e,n){let r=to();return n.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Cr.newInvalidDocument(i))}),we.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=to();const o=n.path,c=new rt(o.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:h,value:{document:f}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||YB(KB(f),r)<=0||(i.has(f.key)||yy(n,f))&&(a=a.insert(f.key,f.mutableCopy()))}return we.resolve(a)}getAllFromCollectionGroup(e,n,r,i){ht()}Or(e,n){return we.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new pW(this)}getSize(e){return we.resolve(this.size)}}class pW extends oW{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),we.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gW{constructor(e){this.persistence=e,this.Nr=new eh(n=>hj(n),fj),this.lastRemoteSnapshotVersion=mt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new yj,this.targetCount=0,this.kr=kd.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),we.resolve()}getLastRemoteSnapshotVersion(e){return we.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return we.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),we.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),we.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new kd(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,we.resolve()}updateTargetData(e,n){return this.Kn(n),we.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,we.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(o),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),we.waitFor(a).next(()=>i)}getTargetCount(e){return we.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return we.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),we.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach(o=>{a.push(i.markPotentiallyOrphaned(e,o))}),we.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),we.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return we.resolve(r)}containsKey(e,n){return we.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vW{constructor(e,n){this.qr={},this.overlays={},this.Qr=new cj(0),this.Kr=!1,this.Kr=!0,this.$r=new hW,this.referenceDelegate=e(this),this.Ur=new gW(this),this.indexManager=new iW,this.remoteDocumentCache=function(i){return new mW(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new rW(n),this.Gr=new uW(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new dW,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new fW(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Qe("MemoryPersistence","Starting transaction:",e);const i=new xW(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(a=>this.referenceDelegate.jr(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Hr(e,n){return we.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class xW extends XB{constructor(e){super(),this.currentSequenceNumber=e}}class _j{constructor(e){this.persistence=e,this.Jr=new yj,this.Yr=null}static Zr(e){return new _j(e)}get Xr(){if(this.Yr)return this.Yr;throw ht()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),we.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),we.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),we.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(a=>this.Xr.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return we.forEach(this.Xr,r=>{const i=rt.fromPath(r);return this.ei(e,i).next(a=>{a||n.removeEntry(i,mt.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return we.or([()=>we.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=kt(),i=kt();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new wj(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yW{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _W{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return nz()?8:JB(Ir())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.Yi(e,n).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.Zi(e,n,i,r).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new yW;return this.Xi(e,n,o).next(c=>{if(a.result=c,this.zi)return this.es(e,n,o,c.size)})}).next(()=>a.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(tf()<=At.DEBUG&&Qe("QueryEngine","SDK will not create cache indexes for query:",Mu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),we.resolve()):(tf()<=At.DEBUG&&Qe("QueryEngine","Query:",Mu(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(tf()<=At.DEBUG&&Qe("QueryEngine","The SDK decides to create cache indexes for query:",Mu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ta(n))):we.resolve())}Yi(e,n){if(tC(n))return we.resolve(null);let r=ta(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=ax(n,null,"F"),r=ta(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const o=kt(...a);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.ts(n,c);return this.ns(n,h,o,u.readTime)?this.Yi(e,ax(n,null,"F")):this.rs(e,h,n,u)}))})))}Zi(e,n,r,i){return tC(n)||i.isEqual(mt.min())?we.resolve(null):this.Ji.getDocuments(e,r).next(a=>{const o=this.ts(n,a);return this.ns(n,o,r,i)?we.resolve(null):(tf()<=At.DEBUG&&Qe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Mu(n)),this.rs(e,o,n,ZB(i,-1)).next(c=>c))})}ts(e,n){let r=new xr(XA(e));return n.forEach((i,a)=>{yy(e,a)&&(r=r.add(a))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Xi(e,n,r){return tf()<=At.DEBUG&&Qe("QueryEngine","Using full collection scan to execute query:",Mu(n)),this.Ji.getDocumentsMatchingQuery(e,n,ml.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(a=>(n.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wW{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Cn(Lt),this._s=new eh(a=>hj(a),fj),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cW(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function bW(t,e,n,r){return new wW(t,e,n,r)}async function yR(t,e){const n=gt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const o=[],c=[];let u=kt();for(const h of i){o.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}for(const h of a){c.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:c}))})})}function jW(t,e){const n=gt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,h,f){const p=h.batch,v=p.keys();let _=we.resolve();return v.forEach(b=>{_=_.next(()=>f.getEntry(u,b)).next(N=>{const S=h.docVersions.get(b);Zt(S!==null),N.version.compareTo(S)<0&&(p.applyToRemoteDocument(N,h),N.isValidDocument()&&(N.setReadTime(h.commitVersion),f.addEntry(N)))})}),_.next(()=>c.mutationQueue.removeMutationBatch(u,p))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=kt();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(u=u.add(c.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function _R(t){const e=gt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function NW(t,e){const n=gt(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const c=[];e.targetChanges.forEach((f,p)=>{const v=i.get(p);if(!v)return;c.push(n.Ur.removeMatchingKeys(a,f.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(a,f.addedDocuments,p)));let _=v.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(_r.EMPTY_BYTE_STRING,mt.min()).withLastLimboFreeSnapshotVersion(mt.min()):f.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(f.resumeToken,r)),i=i.insert(p,_),function(N,S,w){return N.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(v,_,f)&&c.push(n.Ur.updateTargetData(a,_))});let u=to(),h=kt();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(a,f))}),c.push(SW(a,o,e.documentUpdates).next(f=>{u=f.Ps,h=f.Is})),!r.isEqual(mt.min())){const f=n.Ur.getLastRemoteSnapshotVersion(a).next(p=>n.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r));c.push(f)}return we.waitFor(c).next(()=>o.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,u,h)).next(()=>u)}).then(a=>(n.os=i,a))}function SW(t,e,n){let r=kt(),i=kt();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let o=to();return n.forEach((c,u)=>{const h=a.get(c);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(mt.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):Qe("LocalStore","Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function EW(t,e){const n=gt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function CW(t,e){const n=gt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(a=>a?(i=a,we.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Yo(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function s1(t,e,n){const r=gt(t),i=r.os.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!np(o))throw o;Qe("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function hC(t,e,n){const r=gt(t);let i=mt.min(),a=kt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,f){const p=gt(u),v=p._s.get(f);return v!==void 0?we.resolve(p.os.get(v)):p.Ur.getTargetData(h,f)}(r,o,ta(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,c.targetId).next(u=>{a=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:mt.min(),n?a:kt())).next(c=>(TW(r,v7(e),c),{documents:c,Ts:a})))}function TW(t,e,n){let r=t.us.get(e)||mt.min();n.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.us.set(e,r)}class fC{constructor(){this.activeTargetIds=j7()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kW{constructor(){this.so=new fC,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new fC,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PW{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Qe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Qe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tg=null;function i_(){return Tg===null?Tg=function(){return 268435456+Math.round(2147483648*Math.random())}():Tg++,"0x"+Tg.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AW{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr="WebChannelConnection";class RW extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${a}`}get Fo(){return!1}Mo(n,r,i,a,o){const c=i_(),u=this.xo(n,r.toUriEncodedString());Qe("RestConnection",`Sending RPC '${n}' ${c}:`,u,i);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,a,o),this.No(n,u,h,i).then(f=>(Qe("RestConnection",`Received RPC '${n}' ${c}: `,f),f),f=>{throw Nd("RestConnection",`RPC '${n}' ${c} failed with error: `,f,"url: ",u,"request:",i),f})}Lo(n,r,i,a,o,c){return this.Mo(n,r,i,a,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Jd}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,o)=>n[o]=a),i&&i.headers.forEach((a,o)=>n[o]=a)}xo(n,r){const i=IW[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const a=i_();return new Promise((o,c)=>{const u=new DA;u.setWithCredentials(!0),u.listenOnce(OA.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ov.NO_ERROR:const f=u.getResponseJson();Qe(Nr,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(f)),o(f);break;case ov.TIMEOUT:Qe(Nr,`RPC '${e}' ${a} timed out`),c(new Re(he.DEADLINE_EXCEEDED,"Request time out"));break;case ov.HTTP_ERROR:const p=u.getStatus();if(Qe(Nr,`RPC '${e}' ${a} failed with status:`,p,"response text:",u.getResponseText()),p>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const _=v==null?void 0:v.error;if(_&&_.status&&_.message){const b=function(S){const w=S.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(w)>=0?w:he.UNKNOWN}(_.status);c(new Re(b,_.message))}else c(new Re(he.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Re(he.UNAVAILABLE,"Connection failed."));break;default:ht()}}finally{Qe(Nr,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(i);Qe(Nr,`RPC '${e}' ${a} sending request:`,i),u.send(n,"POST",h,r,15)})}Bo(e,n,r){const i=i_(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=FA(),c=VA(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=a.join("");Qe(Nr,`Creating RPC '${e}' stream ${i}: ${f}`,u);const p=o.createWebChannel(f,u);let v=!1,_=!1;const b=new AW({Io:S=>{_?Qe(Nr,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(v||(Qe(Nr,`Opening RPC '${e}' stream ${i} transport.`),p.open(),v=!0),Qe(Nr,`RPC '${e}' stream ${i} sending:`,S),p.send(S))},To:()=>p.close()}),N=(S,w,y)=>{S.listen(w,C=>{try{y(C)}catch(R){setTimeout(()=>{throw R},0)}})};return N(p,gf.EventType.OPEN,()=>{_||(Qe(Nr,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),N(p,gf.EventType.CLOSE,()=>{_||(_=!0,Qe(Nr,`RPC '${e}' stream ${i} transport closed`),b.So())}),N(p,gf.EventType.ERROR,S=>{_||(_=!0,Nd(Nr,`RPC '${e}' stream ${i} transport errored:`,S),b.So(new Re(he.UNAVAILABLE,"The operation could not be completed")))}),N(p,gf.EventType.MESSAGE,S=>{var w;if(!_){const y=S.data[0];Zt(!!y);const C=y,R=C.error||((w=C[0])===null||w===void 0?void 0:w.error);if(R){Qe(Nr,`RPC '${e}' stream ${i} received error:`,R);const M=R.status;let B=function(F){const I=qn[F];if(I!==void 0)return cR(I)}(M),O=R.message;B===void 0&&(B=he.INTERNAL,O="Unknown error status: "+M+" with message "+R.message),_=!0,b.So(new Re(B,O)),p.close()}else Qe(Nr,`RPC '${e}' stream ${i} received:`,y),b.bo(y)}}),N(c,LA.STAT_EVENT,S=>{S.stat===Zw.PROXY?Qe(Nr,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===Zw.NOPROXY&&Qe(Nr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}function a_(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ny(t){return new B7(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e,n,r=1e3,i=1.5,a=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&Qe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e,n,r,i,a,o,c,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new wR(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===he.RESOURCE_EXHAUSTED?(eo(n.toString()),eo("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===he.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new Re(he.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Qe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Qe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class MW extends bR{constructor(e,n,r,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=a}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=H7(this.serializer,e),r=function(a){if(!("targetChange"in a))return mt.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?mt.min():o.readTime?na(o.readTime):mt.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=r1(this.serializer),n.addTarget=function(a,o){let c;const u=o.target;if(c=Xw(u)?{documents:K7(a,u)}:{query:Y7(a,u)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=hR(a,o.resumeToken);const h=e1(a,o.expectedCount);h!==null&&(c.expectedCount=h)}else if(o.snapshotVersion.compareTo(mt.min())>0){c.readTime=lx(a,o.snapshotVersion.toTimestamp());const h=e1(a,o.expectedCount);h!==null&&(c.expectedCount=h)}return c}(this.serializer,e);const r=X7(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=r1(this.serializer),n.removeTarget=e,this.a_(n)}}class DW extends bR{constructor(e,n,r,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Zt(!!e.streamToken),this.lastStreamToken=e.streamToken,Zt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Zt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Z7(e.writeResults,e.commitTime),r=na(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=r1(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>G7(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OW extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Re(he.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Mo(e,t1(n,r),i,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Re(he.UNKNOWN,a.toString())})}Lo(e,n,r,i,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,t1(n,r),i,o,c,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Re(he.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class LW{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(eo(n),this.D_=!1):Qe("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VW{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(o=>{r.enqueueAndForget(async()=>{Kc(this)&&(Qe("RemoteStore","Restarting streams for network reachability change."),await async function(u){const h=gt(u);h.L_.add(4),await ip(h),h.q_.set("Unknown"),h.L_.delete(4),await Sy(h)}(this))})}),this.q_=new LW(r,i)}}async function Sy(t){if(Kc(t))for(const e of t.B_)await e(!0)}async function ip(t){for(const e of t.B_)await e(!1)}function jR(t,e){const n=gt(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Sj(n)?Nj(n):th(n).r_()&&jj(n,e))}function bj(t,e){const n=gt(t),r=th(n);n.N_.delete(e),r.r_()&&NR(n,e),n.N_.size===0&&(r.r_()?r.o_():Kc(n)&&n.q_.set("Unknown"))}function jj(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(mt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}th(t).A_(e)}function NR(t,e){t.Q_.xe(e),th(t).R_(e)}function Nj(t){t.Q_=new F7({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),th(t).start(),t.q_.v_()}function Sj(t){return Kc(t)&&!th(t).n_()&&t.N_.size>0}function Kc(t){return gt(t).L_.size===0}function SR(t){t.Q_=void 0}async function FW(t){t.q_.set("Online")}async function zW(t){t.N_.forEach((e,n)=>{jj(t,e)})}async function UW(t,e){SR(t),Sj(t)?(t.q_.M_(e),Nj(t)):t.q_.set("Unknown")}async function $W(t,e,n){if(t.q_.set("Online"),e instanceof dR&&e.state===2&&e.cause)try{await async function(i,a){const o=a.cause;for(const c of a.targetIds)i.N_.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.N_.delete(c),i.Q_.removeTarget(c))}(t,e)}catch(r){Qe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await cx(t,r)}else if(e instanceof uv?t.Q_.Ke(e):e instanceof uR?t.Q_.He(e):t.Q_.We(e),!n.isEqual(mt.min()))try{const r=await _R(t.localStore);n.compareTo(r)>=0&&await function(a,o){const c=a.Q_.rt(o);return c.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const f=a.N_.get(h);f&&a.N_.set(h,f.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,h)=>{const f=a.N_.get(u);if(!f)return;a.N_.set(u,f.withResumeToken(_r.EMPTY_BYTE_STRING,f.snapshotVersion)),NR(a,u);const p=new Yo(f.target,u,h,f.sequenceNumber);jj(a,p)}),a.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){Qe("RemoteStore","Failed to raise snapshot:",r),await cx(t,r)}}async function cx(t,e,n){if(!np(e))throw e;t.L_.add(1),await ip(t),t.q_.set("Offline"),n||(n=()=>_R(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Qe("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Sy(t)})}function ER(t,e){return e().catch(n=>cx(t,n,e))}async function Ey(t){const e=gt(t),n=gl(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;BW(e);)try{const i=await EW(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,WW(e,i)}catch(i){await cx(e,i)}CR(e)&&TR(e)}function BW(t){return Kc(t)&&t.O_.length<10}function WW(t,e){t.O_.push(e);const n=gl(t);n.r_()&&n.V_&&n.m_(e.mutations)}function CR(t){return Kc(t)&&!gl(t).n_()&&t.O_.length>0}function TR(t){gl(t).start()}async function qW(t){gl(t).p_()}async function HW(t){const e=gl(t);for(const n of t.O_)e.m_(n.mutations)}async function GW(t,e,n){const r=t.O_.shift(),i=gj.from(r,e,n);await ER(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Ey(t)}async function ZW(t,e){e&&gl(t).V_&&await async function(r,i){if(function(o){return O7(o)&&o!==he.ABORTED}(i.code)){const a=r.O_.shift();gl(r).s_(),await ER(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await Ey(r)}}(t,e),CR(t)&&TR(t)}async function pC(t,e){const n=gt(t);n.asyncQueue.verifyOperationInProgress(),Qe("RemoteStore","RemoteStore received new credentials");const r=Kc(n);n.L_.add(3),await ip(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Sy(n)}async function KW(t,e){const n=gt(t);e?(n.L_.delete(2),await Sy(n)):e||(n.L_.add(2),await ip(n),n.q_.set("Unknown"))}function th(t){return t.K_||(t.K_=function(n,r,i){const a=gt(n);return a.w_(),new MW(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Eo:FW.bind(null,t),Ro:zW.bind(null,t),mo:UW.bind(null,t),d_:$W.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Sj(t)?Nj(t):t.q_.set("Unknown")):(await t.K_.stop(),SR(t))})),t.K_}function gl(t){return t.U_||(t.U_=function(n,r,i){const a=gt(n);return a.w_(),new DW(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:qW.bind(null,t),mo:ZW.bind(null,t),f_:HW.bind(null,t),g_:GW.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Ey(t)):(await t.U_.stop(),t.O_.length>0&&(Qe("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new qa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const o=Date.now()+r,c=new Ej(e,n,o,i,a);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Re(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cj(t,e){if(eo("AsyncQueue",`${e}: ${t}`),np(t))return new Re(he.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e){this.comparator=e?(n,r)=>e(n,r)||rt.comparator(n.key,r.key):(n,r)=>rt.comparator(n.key,r.key),this.keyedMap=vf(),this.sortedSet=new Cn(this.comparator)}static emptySet(e){return new ud(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ud)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ud;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(){this.W_=new Cn(rt.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ht():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Pd{constructor(e,n,r,i,a,o,c,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,a){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new Pd(e,n,ud.emptySet(n),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YW{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class QW{constructor(){this.queries=vC(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=gt(n),a=i.queries;i.queries=vC(),a.forEach((o,c)=>{for(const u of c.j_)u.onError(r)})})(this,new Re(he.ABORTED,"Firestore shutting down"))}}function vC(){return new eh(t=>QA(t),xy)}async function Tj(t,e){const n=gt(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.H_()&&e.J_()&&(r=2):(a=new YW,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await n.onListen(i,!0);break;case 1:a.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const c=Cj(o,`Initialization of query '${Mu(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,a),a.j_.push(e),e.Z_(n.onlineState),a.z_&&e.X_(a.z_)&&Pj(n)}async function kj(t,e){const n=gt(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const o=a.j_.indexOf(e);o>=0&&(a.j_.splice(o,1),a.j_.length===0?i=e.J_()?0:1:!a.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function XW(t,e){const n=gt(t);let r=!1;for(const i of e){const a=i.query,o=n.queries.get(a);if(o){for(const c of o.j_)c.X_(i)&&(r=!0);o.z_=i}}r&&Pj(n)}function JW(t,e,n){const r=gt(t),i=r.queries.get(e);if(i)for(const a of i.j_)a.onError(n);r.queries.delete(e)}function Pj(t){t.Y_.forEach(e=>{e.next()})}var i1,xC;(xC=i1||(i1={})).ea="default",xC.Cache="cache";class Ij{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Pd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Pd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==i1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e){this.key=e}}class PR{constructor(e){this.key=e}}class eq{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=kt(),this.mutatedKeys=kt(),this.Aa=XA(e),this.Ra=new ud(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new gC,i=n?n.Ra:this.Ra;let a=n?n.mutatedKeys:this.mutatedKeys,o=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{const v=i.get(f),_=yy(this.query,p)?p:null,b=!!v&&this.mutatedKeys.has(v.key),N=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let S=!1;v&&_?v.data.isEqual(_.data)?b!==N&&(r.track({type:3,doc:_}),S=!0):this.ga(v,_)||(r.track({type:2,doc:_}),S=!0,(u&&this.Aa(_,u)>0||h&&this.Aa(_,h)<0)&&(c=!0)):!v&&_?(r.track({type:0,doc:_}),S=!0):v&&!_&&(r.track({type:1,doc:v}),S=!0,(u||h)&&(c=!0)),S&&(_?(o=o.add(_),a=N?a.add(f):a.delete(f)):(o=o.delete(f),a=a.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),a=a.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:c,mutatedKeys:a}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,p)=>function(_,b){const N=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ht()}};return N(_)-N(b)}(f.type,p.type)||this.Aa(f.doc,p.doc)),this.pa(r),i=i!=null&&i;const c=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,h=u!==this.Ea;return this.Ea=u,o.length!==0||h?{snapshot:new Pd(this.query,e.Ra,a,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new gC,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=kt(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new PR(r))}),this.da.forEach(r=>{e.has(r)||n.push(new kR(r))}),n}ba(e){this.Ta=e.Ts,this.da=kt();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Pd.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class tq{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class nq{constructor(e){this.key=e,this.va=!1}}class rq{constructor(e,n,r,i,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new eh(c=>QA(c),xy),this.Ma=new Map,this.xa=new Set,this.Oa=new Cn(rt.comparator),this.Na=new Map,this.La=new yj,this.Ba={},this.ka=new Map,this.qa=kd.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function sq(t,e,n=!0){const r=OR(t);let i;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Da()):i=await IR(r,e,n,!0),i}async function iq(t,e){const n=OR(t);await IR(n,e,!0,!1)}async function IR(t,e,n,r){const i=await CW(t.localStore,ta(e)),a=i.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let c;return r&&(c=await aq(t,e,a,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&jR(t.remoteStore,i),c}async function aq(t,e,n,r,i){t.Ka=(p,v,_)=>async function(N,S,w,y){let C=S.view.ma(w);C.ns&&(C=await hC(N.localStore,S.query,!1).then(({documents:O})=>S.view.ma(O,C)));const R=y&&y.targetChanges.get(S.targetId),M=y&&y.targetMismatches.get(S.targetId)!=null,B=S.view.applyChanges(C,N.isPrimaryClient,R,M);return _C(N,S.targetId,B.wa),B.snapshot}(t,p,v,_);const a=await hC(t.localStore,e,!0),o=new eq(e,a.Ts),c=o.ma(a.documents),u=sp.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=o.applyChanges(c,t.isPrimaryClient,u);_C(t,n,h.wa);const f=new tq(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function oq(t,e,n){const r=gt(t),i=r.Fa.get(e),a=r.Ma.get(i.targetId);if(a.length>1)return r.Ma.set(i.targetId,a.filter(o=>!xy(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await s1(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&bj(r.remoteStore,i.targetId),a1(r,i.targetId)}).catch(tp)):(a1(r,i.targetId),await s1(r.localStore,i.targetId,!0))}async function lq(t,e){const n=gt(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),bj(n.remoteStore,r.targetId))}async function cq(t,e,n){const r=gq(t);try{const i=await function(o,c){const u=gt(o),h=Kn.now(),f=c.reduce((_,b)=>_.add(b.key),kt());let p,v;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let b=to(),N=kt();return u.cs.getEntries(_,f).next(S=>{b=S,b.forEach((w,y)=>{y.isValidDocument()||(N=N.add(w))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,b)).next(S=>{p=S;const w=[];for(const y of c){const C=I7(y,p.get(y.key).overlayedDocument);C!=null&&w.push(new Rl(y.key,C,WA(C.value.mapValue),qr.exists(!0)))}return u.mutationQueue.addMutationBatch(_,h,w,c)}).next(S=>{v=S;const w=S.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(_,S.batchId,w)})}).then(()=>({batchId:v.batchId,changes:eR(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,c,u){let h=o.Ba[o.currentUser.toKey()];h||(h=new Cn(Lt)),h=h.insert(c,u),o.Ba[o.currentUser.toKey()]=h}(r,i.batchId,n),await ap(r,i.changes),await Ey(r.remoteStore)}catch(i){const a=Cj(i,"Failed to persist write");n.reject(a)}}async function AR(t,e){const n=gt(t);try{const r=await NW(n.localStore,e);e.targetChanges.forEach((i,a)=>{const o=n.Na.get(a);o&&(Zt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Zt(o.va):i.removedDocuments.size>0&&(Zt(o.va),o.va=!1))}),await ap(n,r,e)}catch(r){await tp(r)}}function yC(t,e,n){const r=gt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((a,o)=>{const c=o.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),function(o,c){const u=gt(o);u.onlineState=c;let h=!1;u.queries.forEach((f,p)=>{for(const v of p.j_)v.Z_(c)&&(h=!0)}),h&&Pj(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function uq(t,e,n){const r=gt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),a=i&&i.key;if(a){let o=new Cn(rt.comparator);o=o.insert(a,Cr.newNoDocument(a,mt.min()));const c=kt().add(a),u=new jy(mt.min(),new Map,new Cn(Lt),o,c);await AR(r,u),r.Oa=r.Oa.remove(a),r.Na.delete(e),Aj(r)}else await s1(r.localStore,e,!1).then(()=>a1(r,e,n)).catch(tp)}async function dq(t,e){const n=gt(t),r=e.batch.batchId;try{const i=await jW(n.localStore,e);MR(n,r,null),RR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ap(n,i)}catch(i){await tp(i)}}async function hq(t,e,n){const r=gt(t);try{const i=await function(o,c){const u=gt(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return u.mutationQueue.lookupMutationBatch(h,c).next(p=>(Zt(p!==null),f=p.keys(),u.mutationQueue.removeMutationBatch(h,p))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>u.localDocuments.getDocuments(h,f))})}(r.localStore,e);MR(r,e,n),RR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ap(r,i)}catch(i){await tp(i)}}function RR(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function MR(t,e,n){const r=gt(t);let i=r.Ba[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function a1(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||DR(t,r)})}function DR(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(bj(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Aj(t))}function _C(t,e,n){for(const r of n)r instanceof kR?(t.La.addReference(r.key,e),fq(t,r)):r instanceof PR?(Qe("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||DR(t,r.key)):ht()}function fq(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Qe("SyncEngine","New document in limbo: "+n),t.xa.add(r),Aj(t))}function Aj(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new rt(rn.fromString(e)),r=t.qa.next();t.Na.set(r,new nq(n)),t.Oa=t.Oa.insert(n,r),jR(t.remoteStore,new Yo(ta(vy(n.path)),r,"TargetPurposeLimboResolution",cj.oe))}}async function ap(t,e,n){const r=gt(t),i=[],a=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{o.push(r.Ka(u,e,n).then(h=>{var f;if((h||n)&&r.isPrimaryClient){const p=h?!h.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(h){i.push(h);const p=wj.Wi(u.targetId,h);a.push(p)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(u,h){const f=gt(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>we.forEach(h,v=>we.forEach(v.$i,_=>f.persistence.referenceDelegate.addReference(p,v.targetId,_)).next(()=>we.forEach(v.Ui,_=>f.persistence.referenceDelegate.removeReference(p,v.targetId,_)))))}catch(p){if(!np(p))throw p;Qe("LocalStore","Failed to update sequence numbers: "+p)}for(const p of h){const v=p.targetId;if(!p.fromCache){const _=f.os.get(v),b=_.snapshotVersion,N=_.withLastLimboFreeSnapshotVersion(b);f.os=f.os.insert(v,N)}}}(r.localStore,a))}async function mq(t,e){const n=gt(t);if(!n.currentUser.isEqual(e)){Qe("SyncEngine","User change. New user:",e.toKey());const r=await yR(n.localStore,e);n.currentUser=e,function(a,o){a.ka.forEach(c=>{c.forEach(u=>{u.reject(new Re(he.CANCELLED,o))})}),a.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ap(n,r.hs)}}function pq(t,e){const n=gt(t),r=n.Na.get(e);if(r&&r.va)return kt().add(r.key);{let i=kt();const a=n.Ma.get(e);if(!a)return i;for(const o of a){const c=n.Fa.get(o);i=i.unionWith(c.view.Va)}return i}}function OR(t){const e=gt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=AR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uq.bind(null,e),e.Ca.d_=XW.bind(null,e.eventManager),e.Ca.$a=JW.bind(null,e.eventManager),e}function gq(t){const e=gt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hq.bind(null,e),e}class ux{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ny(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return bW(this.persistence,new _W,e.initialUser,this.serializer)}Ga(e){return new vW(_j.Zr,this.serializer)}Wa(e){return new kW}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ux.provider={build:()=>new ux};class o1{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>yC(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=mq.bind(null,this.syncEngine),await KW(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new QW}()}createDatastore(e){const n=Ny(e.databaseInfo.databaseId),r=function(a){return new RW(a)}(e.databaseInfo);return function(a,o,c,u){return new OW(a,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,a,o,c){return new VW(r,i,a,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>yC(this.syncEngine,n,0),function(){return mC.D()?new mC:new PW}())}createSyncEngine(e,n){return function(i,a,o,c,u,h,f){const p=new rq(i,a,o,c,u,h);return f&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const a=gt(i);Qe("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await ip(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}o1.provider={build:()=>new o1};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):eo("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vq{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Sr.UNAUTHENTICATED,this.clientId=UA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async o=>{Qe("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Qe("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Cj(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function o_(t,e){t.asyncQueue.verifyOperationInProgress(),Qe("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await yR(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function wC(t,e){t.asyncQueue.verifyOperationInProgress();const n=await xq(t);Qe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>pC(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>pC(e.remoteStore,i)),t._onlineComponents=e}async function xq(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Qe("FirestoreClient","Using user provided OfflineComponentProvider");try{await o_(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===he.FAILED_PRECONDITION||i.code===he.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Nd("Error using user provided cache. Falling back to memory cache: "+n),await o_(t,new ux)}}else Qe("FirestoreClient","Using default OfflineComponentProvider"),await o_(t,new ux);return t._offlineComponents}async function LR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Qe("FirestoreClient","Using user provided OnlineComponentProvider"),await wC(t,t._uninitializedComponentsProvider._online)):(Qe("FirestoreClient","Using default OnlineComponentProvider"),await wC(t,new o1))),t._onlineComponents}function yq(t){return LR(t).then(e=>e.syncEngine)}async function dx(t){const e=await LR(t),n=e.eventManager;return n.onListen=sq.bind(null,e.syncEngine),n.onUnlisten=oq.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=iq.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=lq.bind(null,e.syncEngine),n}function _q(t,e,n={}){const r=new qa;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,c,u,h){const f=new Rj({next:v=>{f.Za(),o.enqueueAndForget(()=>kj(a,p));const _=v.docs.has(c);!_&&v.fromCache?h.reject(new Re(he.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&v.fromCache&&u&&u.source==="server"?h.reject(new Re(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(v)},error:v=>h.reject(v)}),p=new Ij(vy(c.path),f,{includeMetadataChanges:!0,_a:!0});return Tj(a,p)}(await dx(t),t.asyncQueue,e,n,r)),r.promise}function wq(t,e,n={}){const r=new qa;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,c,u,h){const f=new Rj({next:v=>{f.Za(),o.enqueueAndForget(()=>kj(a,p)),v.fromCache&&u.source==="server"?h.reject(new Re(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(v)},error:v=>h.reject(v)}),p=new Ij(c,f,{includeMetadataChanges:!0,_a:!0});return Tj(a,p)}(await dx(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(t,e,n){if(!n)throw new Re(he.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function bq(t,e,n,r){if(e===!0&&r===!0)throw new Re(he.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function jC(t){if(!rt.isDocumentKey(t))throw new Re(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function NC(t){if(rt.isDocumentKey(t))throw new Re(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Cy(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ht()}function Hr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Re(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Cy(t);throw new Re(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function jq(t,e){if(e<=0)throw new Re(he.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Re(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Re(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bq("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=VR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Re(he.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Re(he.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Re(he.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ty{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new SC({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Re(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Re(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new SC(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new FB;switch(r.type){case"firstParty":return new BB(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Re(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=bC.get(n);r&&(Qe("ComponentProvider","Removing Datastore"),bC.delete(n),r.terminate())}(this),Promise.resolve()}}function Nq(t,e,n,r={}){var i;const a=(t=Hr(t,Ty))._getSettings(),o=`${e}:${n}`;if(a.host!=="firestore.googleapis.com"&&a.host!==o&&Nd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=Sr.MOCK_USER;else{c=BI(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new Re(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Sr(h)}t._authCredentials=new zB(new zA(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new fa(this.firestore,e,this._query)}}class kr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ll(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kr(this.firestore,e,this._key)}}class ll extends fa{constructor(e,n,r){super(e,n,vy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kr(this.firestore,null,new rt(e))}withConverter(e){return new ll(this.firestore,e,this._path)}}function Vt(t,e,...n){if(t=zt(t),FR("collection","path",e),t instanceof Ty){const r=rn.fromString(e,...n);return NC(r),new ll(t,null,r)}{if(!(t instanceof kr||t instanceof ll))throw new Re(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(rn.fromString(e,...n));return NC(r),new ll(t.firestore,null,r)}}function pt(t,e,...n){if(t=zt(t),arguments.length===1&&(e=UA.newId()),FR("doc","path",e),t instanceof Ty){const r=rn.fromString(e,...n);return jC(r),new kr(t,null,new rt(r))}{if(!(t instanceof kr||t instanceof ll))throw new Re(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(rn.fromString(e,...n));return jC(r),new kr(t.firestore,t instanceof ll?t.converter:null,new rt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new wR(this,"async_queue_retry"),this.Vu=()=>{const r=a_();r&&Qe("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=a_();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=a_();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new qa;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!np(e))throw e;Qe("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(r);throw eo("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Ej.createAndSchedule(this,e,n,r,a=>this.yu(a));return this.Tu.push(i),i}fu(){this.Eu&&ht()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function CC(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1}(t,["next","error","complete"])}class oa extends Ty{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new EC,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new EC(e),this._firestoreClient=void 0,await e}}}function Sq(t,e){const n=typeof t=="object"?t:Qb(),r=typeof t=="string"?t:"(default)",i=dy(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=zI("firestore");a&&Nq(i,...a)}return i}function op(t){if(t._terminated)throw new Re(he.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Eq(t),t._firestoreClient}function Eq(t){var e,n,r;const i=t._freezeSettings(),a=function(c,u,h,f){return new n7(c,u,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,VR(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new vq(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Id(_r.fromBase64String(e))}catch(n){throw new Re(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Id(_r.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Re(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Re(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Re(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Lt(this._lat,e._lat)||Lt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cq=/^__.*__$/;class Tq{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Rl(e,this.data,this.fieldMask,n,this.fieldTransforms):new rp(e,this.data,n,this.fieldTransforms)}}class zR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Rl(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function UR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ht()}}class Oj{constructor(e,n,r,i,a,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Oj(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return hx(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(UR(this.Cu)&&Cq.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class kq{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ny(e)}Qu(e,n,r,i=!1){return new Oj({Cu:e,methodName:n,qu:r,path:pr.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nh(t){const e=t._freezeSettings(),n=Ny(t._databaseId);return new kq(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Lj(t,e,n,r,i,a={}){const o=t.Qu(a.merge||a.mergeFields?2:0,e,n,i);Fj("Data must be an object, but it was:",o,r);const c=qR(r,o);let u,h;if(a.merge)u=new ws(o.fieldMask),h=o.fieldTransforms;else if(a.mergeFields){const f=[];for(const p of a.mergeFields){const v=l1(e,p,n);if(!o.contains(v))throw new Re(he.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);GR(f,v)||f.push(v)}u=new ws(f),h=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,h=o.fieldTransforms;return new Tq(new ns(c),u,h)}class Py extends ky{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Py}}class Vj extends ky{_toFieldTransform(e){return new C7(e.path,new pm)}isEqual(e){return e instanceof Vj}}function $R(t,e,n,r){const i=t.Qu(1,e,n);Fj("Data must be an object, but it was:",i,r);const a=[],o=ns.empty();Gc(r,(u,h)=>{const f=zj(e,u,n);h=zt(h);const p=i.Nu(f);if(h instanceof Py)a.push(f);else{const v=cp(h,p);v!=null&&(a.push(f),o.set(f,v))}});const c=new ws(a);return new zR(o,c,i.fieldTransforms)}function BR(t,e,n,r,i,a){const o=t.Qu(1,e,n),c=[l1(e,r,n)],u=[i];if(a.length%2!=0)throw new Re(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<a.length;v+=2)c.push(l1(e,a[v])),u.push(a[v+1]);const h=[],f=ns.empty();for(let v=c.length-1;v>=0;--v)if(!GR(h,c[v])){const _=c[v];let b=u[v];b=zt(b);const N=o.Nu(_);if(b instanceof Py)h.push(_);else{const S=cp(b,N);S!=null&&(h.push(_),f.set(_,S))}}const p=new ws(h);return new zR(f,p,o.fieldTransforms)}function WR(t,e,n,r=!1){return cp(n,t.Qu(r?4:3,e))}function cp(t,e){if(HR(t=zt(t)))return Fj("Unsupported field value:",e,t),qR(t,e);if(t instanceof ky)return function(r,i){if(!UR(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const a=[];let o=0;for(const c of r){let u=cp(c,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}}(t,e)}return function(r,i){if((r=zt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return N7(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Kn.fromDate(r);return{timestampValue:lx(i.serializer,a)}}if(r instanceof Kn){const a=new Kn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:lx(i.serializer,a)}}if(r instanceof Mj)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Id)return{bytesValue:hR(i.serializer,r._byteString)};if(r instanceof kr){const a=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:xj(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Dj)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return pj(c.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Cy(r)}`)}(t,e)}function qR(t,e){const n={};return $A(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gc(t,(r,i)=>{const a=cp(i,e.Mu(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function HR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Kn||t instanceof Mj||t instanceof Id||t instanceof kr||t instanceof ky||t instanceof Dj)}function Fj(t,e,n){if(!HR(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Cy(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function l1(t,e,n){if((e=zt(e))instanceof lp)return e._internalPath;if(typeof e=="string")return zj(t,e);throw hx("Field path arguments must be of type string or ",t,!1,void 0,n)}const Pq=new RegExp("[~\\*/\\[\\]]");function zj(t,e,n){if(e.search(Pq)>=0)throw hx(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new lp(...e.split("."))._internalPath}catch{throw hx(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function hx(t,e,n,r,i){const a=r&&!r.isEmpty(),o=i!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Re(he.INVALID_ARGUMENT,c+t+u)}function GR(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new kr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Iq(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Iy("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Iq extends Uj{data(){return super.data()}}function Iy(t,e){return typeof e=="string"?zj(t,e):e instanceof lp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Re(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $j{}class Ay extends $j{}function cn(t,e,...n){let r=[];e instanceof $j&&r.push(e),r=r.concat(n),function(a){const o=a.filter(u=>u instanceof Bj).length,c=a.filter(u=>u instanceof Ry).length;if(o>1||o>0&&c>0)throw new Re(he.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Ry extends Ay{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ry(e,n,r)}_apply(e){const n=this._parse(e);return KR(e._query,n),new fa(e.firestore,e.converter,Jw(e._query,n))}_parse(e){const n=nh(e.firestore);return function(a,o,c,u,h,f,p){let v;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Re(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){PC(p,f);const _=[];for(const b of p)_.push(kC(u,a,b));v={arrayValue:{values:_}}}else v=kC(u,a,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||PC(p,f),v=WR(c,o,p,f==="in"||f==="not-in");return Gn.create(h,f,v)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function In(t,e,n){const r=e,i=Iy("where",t);return Ry._create(i,r,n)}class Bj extends $j{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Bj(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Si.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,a){let o=i;const c=a.getFlattenedFilters();for(const u of c)KR(o,u),o=Jw(o,u)}(e._query,n),new fa(e.firestore,e.converter,Jw(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Wj extends Ay{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Wj(e,n)}_apply(e){const n=function(i,a,o){if(i.startAt!==null)throw new Re(he.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Re(he.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new mm(a,o)}(e._query,this._field,this._direction);return new fa(e.firestore,e.converter,function(i,a){const o=i.explicitOrderBy.concat([a]);return new Zc(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function TC(t,e="asc"){const n=e,r=Iy("orderBy",t);return Wj._create(r,n)}class qj extends Ay{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new qj(e,n,r)}_apply(e){return new fa(e.firestore,e.converter,ax(e._query,this._limit,this._limitType))}}function Zs(t){return jq("limit",t),qj._create("limit",t,"F")}class Hj extends Ay{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Hj(e,n,r)}_apply(e){const n=Rq(e,this.type,this._docOrFields,this._inclusive);return new fa(e.firestore,e.converter,function(i,a){return new Zc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,a,i.endAt)}(e._query,n))}}function Aq(...t){return Hj._create("startAfter",t,!1)}function Rq(t,e,n,r){if(n[0]=zt(n[0]),n[0]instanceof Uj)return function(a,o,c,u,h){if(!u)throw new Re(he.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const f=[];for(const p of cd(a))if(p.field.isKeyField())f.push(ix(o,u.key));else{const v=u.data.field(p.field);if(gy(v))throw new Re(he.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(v===null){const _=p.field.canonicalString();throw new Re(he.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${_}' (used as the orderBy) does not exist.`)}f.push(v)}return new Td(f,h)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=nh(t.firestore);return function(o,c,u,h,f,p){const v=o.explicitOrderBy;if(f.length>v.length)throw new Re(he.INVALID_ARGUMENT,`Too many arguments provided to ${h}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const _=[];for(let b=0;b<f.length;b++){const N=f[b];if(v[b].field.isKeyField()){if(typeof N!="string")throw new Re(he.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${h}(), but got a ${typeof N}`);if(!mj(o)&&N.indexOf("/")!==-1)throw new Re(he.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${h}() must be a plain document ID, but '${N}' contains a slash.`);const S=o.path.child(rn.fromString(N));if(!rt.isDocumentKey(S))throw new Re(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${h}() must result in a valid document path, but '${S}' is not because it contains an odd number of segments.`);const w=new rt(S);_.push(ix(c,w))}else{const S=WR(u,h,N);_.push(S)}}return new Td(_,p)}(t._query,t.firestore._databaseId,i,e,n,r)}}function kC(t,e,n){if(typeof(n=zt(n))=="string"){if(n==="")throw new Re(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mj(e)&&n.indexOf("/")!==-1)throw new Re(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(rn.fromString(n));if(!rt.isDocumentKey(r))throw new Re(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ix(t,new rt(r))}if(n instanceof kr)return ix(t,n._key);throw new Re(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cy(n)}.`)}function PC(t,e){if(!Array.isArray(t)||t.length===0)throw new Re(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function KR(t,e){const n=function(i,a){for(const o of i)for(const c of o.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Re(he.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Re(he.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Mq{convertValue(e,n="none"){switch(Rc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ac(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ht()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Gc(e,(i,a)=>{r[i]=this.convertValue(a,n)}),r}convertVectorValue(e){var n,r,i;const a=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Vn(o.doubleValue));return new Dj(a)}convertGeoPoint(e){return new Mj(Vn(e.latitude),Vn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=uj(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(dm(e));default:return null}}convertTimestamp(e){const n=pl(e);return new Kn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=rn.fromString(e);Zt(xR(r));const i=new hm(r.get(1),r.get(3)),a=new rt(r.popFirst(5));return i.isEqual(n)||eo(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gj(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class YR extends Uj{constructor(e,n,r,i,a,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new dv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Iy("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class dv extends YR{data(e={}){return super.data(e)}}class QR{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new yf(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new dv(this._firestore,this._userDataWriter,r.key,r,new yf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Re(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{const u=new dv(i._firestore,i._userDataWriter,c.doc.key,c.doc,new yf(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>a||c.type!==3).map(c=>{const u=new dv(i._firestore,i._userDataWriter,c.doc.key,c.doc,new yf(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,f=-1;return c.type!==0&&(h=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:Dq(c.type),doc:u,oldIndex:h,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Dq(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ht()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cs(t){t=Hr(t,kr);const e=Hr(t.firestore,oa);return _q(op(e),t._key).then(n=>XR(e,t,n))}class Zj extends Mq{constructor(e){super(),this.firestore=e}convertBytes(e){return new Id(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new kr(this.firestore,null,n)}}function An(t){t=Hr(t,fa);const e=Hr(t.firestore,oa),n=op(e),r=new Zj(e);return ZR(t._query),wq(n,t._query).then(i=>new QR(e,r,t,i))}function Qu(t,e,n){t=Hr(t,kr);const r=Hr(t.firestore,oa),i=Gj(t.converter,e,n);return up(r,[Lj(nh(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,qr.none())])}function nn(t,e,n,...r){t=Hr(t,kr);const i=Hr(t.firestore,oa),a=nh(i);let o;return o=typeof(e=zt(e))=="string"||e instanceof lp?BR(a,"updateDoc",t._key,e,n,r):$R(a,"updateDoc",t._key,e),up(i,[o.toMutation(t._key,qr.exists(!0))])}function Ad(t){return up(Hr(t.firestore,oa),[new by(t._key,qr.none())])}function vl(t,e){const n=Hr(t.firestore,oa),r=pt(t),i=Gj(t.converter,e);return up(n,[Lj(nh(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,qr.exists(!1))]).then(()=>r)}function IC(t,...e){var n,r,i;t=zt(t);let a={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||CC(e[o])||(a=e[o],o++);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(CC(e[o])){const p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,h,f;if(t instanceof kr)h=Hr(t.firestore,oa),f=vy(t._key.path),u={next:p=>{e[o]&&e[o](XR(h,t,p))},error:e[o+1],complete:e[o+2]};else{const p=Hr(t,fa);h=Hr(p.firestore,oa),f=p._query;const v=new Zj(h);u={next:_=>{e[o]&&e[o](new QR(h,v,p,_))},error:e[o+1],complete:e[o+2]},ZR(t._query)}return function(v,_,b,N){const S=new Rj(N),w=new Ij(_,S,b);return v.asyncQueue.enqueueAndForget(async()=>Tj(await dx(v),w)),()=>{S.Za(),v.asyncQueue.enqueueAndForget(async()=>kj(await dx(v),w))}}(op(h),f,c,u)}function up(t,e){return function(r,i){const a=new qa;return r.asyncQueue.enqueueAndForget(async()=>cq(await yq(r),i,a)),a.promise}(op(t),e)}function XR(t,e,n){const r=n.docs.get(e._key),i=new Zj(t);return new YR(t,i,e._key,r,new yf(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oq{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=nh(e)}set(e,n,r){this._verifyNotCommitted();const i=l_(e,this._firestore),a=Gj(i.converter,n,r),o=Lj(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,qr.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const a=l_(e,this._firestore);let o;return o=typeof(n=zt(n))=="string"||n instanceof lp?BR(this._dataReader,"WriteBatch.update",a._key,n,r,i):$R(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(o.toMutation(a._key,qr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=l_(e,this._firestore);return this._mutations=this._mutations.concat(new by(n._key,qr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(he.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function l_(t,e){if((t=zt(t)).firestore!==e)throw new Re(he.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function tr(){return new Vj("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lq(t){return op(t=Hr(t,oa)),new Oq(t,e=>up(t,e))}(function(e,n=!0){(function(i){Jd=i})(Hc),Cc(new hl("firestore",(r,{instanceIdentifier:i,options:a})=>{const o=r.getProvider("app").getImmediate(),c=new oa(new UB(r.getProvider("auth-internal")),new qB(r.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Re(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hm(h.options.projectId,f)}(o,i),o);return a=Object.assign({useFetchStreams:n},a),c._setSettings(a),c},"PUBLIC").setMultipleInstances(!0)),Xi(q2,"4.7.3",e),Xi(q2,"4.7.3","esm2017")})();var Vq="firebase",Fq="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xi(Vq,Fq,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR="firebasestorage.googleapis.com",e4="storageBucket",zq=2*60*1e3,Uq=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn extends ha{constructor(e,n,r=0){super(c_(e),`Firebase Storage: ${n} (${c_(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Dn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return c_(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Mn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Mn||(Mn={}));function c_(t){return"storage/"+t}function Kj(){const t="An unknown error occurred, please check the error payload for server response.";return new Dn(Mn.UNKNOWN,t)}function $q(t){return new Dn(Mn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Bq(t){return new Dn(Mn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Wq(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Dn(Mn.UNAUTHENTICATED,t)}function qq(){return new Dn(Mn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Hq(t){return new Dn(Mn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Gq(){return new Dn(Mn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Zq(){return new Dn(Mn.CANCELED,"User canceled the upload/download.")}function Kq(t){return new Dn(Mn.INVALID_URL,"Invalid URL '"+t+"'.")}function Yq(t){return new Dn(Mn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Qq(){return new Dn(Mn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+e4+"' property when initializing the app?")}function Xq(){return new Dn(Mn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Jq(){return new Dn(Mn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function eH(t){return new Dn(Mn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function c1(t){return new Dn(Mn.INVALID_ARGUMENT,t)}function t4(){return new Dn(Mn.APP_DELETED,"The Firebase app was deleted.")}function tH(t){return new Dn(Mn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Vf(t,e){return new Dn(Mn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function nf(t){throw new Dn(Mn.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=bs.makeFromUrl(e,n)}catch{return new bs(e,"")}if(r.path==="")return r;throw Yq(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function a(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function h(R){R.path_=decodeURIComponent(R.path)}const f="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",_=new RegExp(`^https?://${p}/${f}/b/${i}/o${v}`,"i"),b={bucket:1,path:3},N=n===JR?"(?:storage.googleapis.com|storage.cloud.google.com)":n,S="([^?#]*)",w=new RegExp(`^https?://${N}/${i}/${S}`,"i"),C=[{regex:c,indices:u,postModify:a},{regex:_,indices:b,postModify:h},{regex:w,indices:{bucket:1,path:2},postModify:h}];for(let R=0;R<C.length;R++){const M=C[R],B=M.regex.exec(e);if(B){const O=B[M.indices.bucket];let D=B[M.indices.path];D||(D=""),r=new bs(O,D),M.postModify(r);break}}if(r==null)throw Kq(e);return r}}class nH{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rH(t,e,n){let r=1,i=null,a=null,o=!1,c=0;function u(){return c===2}let h=!1;function f(...S){h||(h=!0,e.apply(null,S))}function p(S){i=setTimeout(()=>{i=null,t(_,u())},S)}function v(){a&&clearTimeout(a)}function _(S,...w){if(h){v();return}if(S){v(),f.call(null,S,...w);return}if(u()||o){v(),f.call(null,S,...w);return}r<64&&(r*=2);let C;c===1?(c=2,C=0):C=(r+Math.random())*1e3,p(C)}let b=!1;function N(S){b||(b=!0,v(),!h&&(i!==null?(S||(c=2),clearTimeout(i),p(0)):S||(c=1)))}return p(0),a=setTimeout(()=>{o=!0,N(!0)},n),N}function sH(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iH(t){return t!==void 0}function aH(t){return typeof t=="object"&&!Array.isArray(t)}function Yj(t){return typeof t=="string"||t instanceof String}function AC(t){return Qj()&&t instanceof Blob}function Qj(){return typeof Blob<"u"}function RC(t,e,n,r){if(r<e)throw c1(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw c1(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xj(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function n4(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var fc;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(fc||(fc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oH(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lH{constructor(e,n,r,i,a,o,c,u,h,f,p,v=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=u,this.timeout_=h,this.progressCallback_=f,this.connectionFactory_=p,this.retry=v,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,b)=>{this.resolve_=_,this.reject_=b,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new kg(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=c=>{const u=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,h)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const c=a.getErrorCode()===fc.NO_ERROR,u=a.getStatus();if(!c||oH(u,this.additionalRetryCodes_)&&this.retry){const f=a.getErrorCode()===fc.ABORT;r(!1,new kg(!1,null,f));return}const h=this.successCodes_.indexOf(u)!==-1;r(!0,new kg(h,a))})},n=(r,i)=>{const a=this.resolve_,o=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());iH(u)?a(u):a()}catch(u){o(u)}else if(c!==null){const u=Kj();u.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,u)):o(u)}else if(i.canceled){const u=this.appDelete_?t4():Zq();o(u)}else{const u=Gq();o(u)}};this.canceled_?n(!1,new kg(!1,null,!0)):this.backoffId_=rH(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&sH(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class kg{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function cH(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function uH(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function dH(t,e){e&&(t["X-Firebase-GMPID"]=e)}function hH(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function fH(t,e,n,r,i,a,o=!0){const c=n4(t.urlParams),u=t.url+c,h=Object.assign({},t.headers);return dH(h,e),cH(h,n),uH(h,a),hH(h,r),new lH(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mH(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function pH(...t){const e=mH();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Qj())return new Blob(t);throw new Dn(Mn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function gH(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vH(t){if(typeof atob>"u")throw eH("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class u_{constructor(e,n){this.data=e,this.contentType=n||null}}function xH(t,e){switch(t){case Hi.RAW:return new u_(r4(e));case Hi.BASE64:case Hi.BASE64URL:return new u_(s4(t,e));case Hi.DATA_URL:return new u_(_H(e),wH(e))}throw Kj()}function r4(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=r,o=t.charCodeAt(++n);r=65536|(a&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function yH(t){let e;try{e=decodeURIComponent(t)}catch{throw Vf(Hi.DATA_URL,"Malformed data URL.")}return r4(e)}function s4(t,e){switch(t){case Hi.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw Vf(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Hi.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw Vf(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=vH(e)}catch(i){throw i.message.includes("polyfill")?i:Vf(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class i4{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Vf(Hi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=bH(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function _H(t){const e=new i4(t);return e.base64?s4(Hi.BASE64,e.rest):yH(e.rest)}function wH(t){return new i4(t).contentType}function bH(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e,n){let r=0,i="";AC(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(AC(this.data_)){const r=this.data_,i=gH(r,e,n);return i===null?null:new Wo(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Wo(r,!0)}}static getBlob(...e){if(Qj()){const n=e.map(r=>r instanceof Wo?r.data_:r);return new Wo(pH.apply(null,n))}else{const n=e.map(o=>Yj(o)?xH(Hi.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let a=0;return n.forEach(o=>{for(let c=0;c<o.length;c++)i[a++]=o[c]}),new Wo(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a4(t){let e;try{e=JSON.parse(t)}catch{return null}return aH(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jH(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function NH(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function o4(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SH(t,e){return e}class Or{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||SH}}let Pg=null;function EH(t){return!Yj(t)||t.length<2?t:o4(t)}function l4(){if(Pg)return Pg;const t=[];t.push(new Or("bucket")),t.push(new Or("generation")),t.push(new Or("metageneration")),t.push(new Or("name","fullPath",!0));function e(a,o){return EH(o)}const n=new Or("name");n.xform=e,t.push(n);function r(a,o){return o!==void 0?Number(o):o}const i=new Or("size");return i.xform=r,t.push(i),t.push(new Or("timeCreated")),t.push(new Or("updated")),t.push(new Or("md5Hash",null,!0)),t.push(new Or("cacheControl",null,!0)),t.push(new Or("contentDisposition",null,!0)),t.push(new Or("contentEncoding",null,!0)),t.push(new Or("contentLanguage",null,!0)),t.push(new Or("contentType",null,!0)),t.push(new Or("metadata","customMetadata",!0)),Pg=t,Pg}function CH(t,e){function n(){const r=t.bucket,i=t.fullPath,a=new bs(r,i);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function TH(t,e,n){const r={};r.type="file";const i=n.length;for(let a=0;a<i;a++){const o=n[a];r[o.local]=o.xform(r,e[o.server])}return CH(r,t),r}function c4(t,e,n){const r=a4(e);return r===null?null:TH(t,r,n)}function kH(t,e,n,r){const i=a4(e);if(i===null||!Yj(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const o=encodeURIComponent;return a.split(",").map(h=>{const f=t.bucket,p=t.fullPath,v="/b/"+o(f)+"/o/"+o(p),_=Xj(v,n,r),b=n4({alt:"media",token:h});return _+b})[0]}function PH(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class u4{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d4(t){if(!t)throw Kj()}function IH(t,e){function n(r,i){const a=c4(t,i,e);return d4(a!==null),a}return n}function AH(t,e){function n(r,i){const a=c4(t,i,e);return d4(a!==null),kH(a,i,t.host,t._protocol)}return n}function h4(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=qq():i=Wq():n.getStatus()===402?i=Bq(t.bucket):n.getStatus()===403?i=Hq(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function RH(t){const e=h4(t);function n(r,i){let a=e(r,i);return r.getStatus()===404&&(a=$q(t.path)),a.serverResponse=i.serverResponse,a}return n}function MH(t,e,n){const r=e.fullServerUrl(),i=Xj(r,t.host,t._protocol),a="GET",o=t.maxOperationRetryTime,c=new u4(i,a,AH(t,n),o);return c.errorHandler=RH(e),c}function DH(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function OH(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=DH(null,e)),r}function LH(t,e,n,r,i){const a=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function c(){let C="";for(let R=0;R<2;R++)C=C+Math.random().toString().slice(2);return C}const u=c();o["Content-Type"]="multipart/related; boundary="+u;const h=OH(e,r,i),f=PH(h,n),p="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+u+`\r
Content-Type: `+h.contentType+`\r
\r
`,v=`\r
--`+u+"--",_=Wo.getBlob(p,r,v);if(_===null)throw Xq();const b={name:h.fullPath},N=Xj(a,t.host,t._protocol),S="POST",w=t.maxUploadRetryTime,y=new u4(N,S,IH(t,n),w);return y.urlParams=b,y.headers=o,y.body=_.uploadData(),y.errorHandler=h4(e),y}class VH{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=fc.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=fc.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=fc.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw nf("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw nf("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw nf("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw nf("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw nf("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class FH extends VH{initXhr(){this.xhr_.responseType="text"}}function f4(){return new FH}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,n){this._service=e,n instanceof bs?this._location=n:this._location=bs.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Mc(e,n)}get root(){const e=new bs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return o4(this._location.path)}get storage(){return this._service}get parent(){const e=jH(this._location.path);if(e===null)return null;const n=new bs(this._location.bucket,e);return new Mc(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw tH(e)}}function zH(t,e,n){t._throwIfRoot("uploadBytes");const r=LH(t.storage,t._location,l4(),new Wo(e,!0),n);return t.storage.makeRequestWithTokens(r,f4).then(i=>({metadata:i,ref:t}))}function UH(t){t._throwIfRoot("getDownloadURL");const e=MH(t.storage,t._location,l4());return t.storage.makeRequestWithTokens(e,f4).then(n=>{if(n===null)throw Jq();return n})}function $H(t,e){const n=NH(t._location.path,e),r=new bs(t._location.bucket,n);return new Mc(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BH(t){return/^[A-Za-z]+:\/\//.test(t)}function WH(t,e){return new Mc(t,e)}function m4(t,e){if(t instanceof Jj){const n=t;if(n._bucket==null)throw Qq();const r=new Mc(n,n._bucket);return e!=null?m4(r,e):r}else return e!==void 0?$H(t,e):t}function qH(t,e){if(e&&BH(e)){if(t instanceof Jj)return WH(t,e);throw c1("To use ref(service, url), the first argument must be a Storage instance.")}else return m4(t,e)}function MC(t,e){const n=e==null?void 0:e[e4];return n==null?null:bs.makeFromBucketSpec(n,t)}function HH(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:BI(i,t.app.options.projectId))}class Jj{constructor(e,n,r,i,a){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=JR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=zq,this._maxUploadRetryTime=Uq,this._requests=new Set,i!=null?this._bucket=bs.makeFromBucketSpec(i,this._host):this._bucket=MC(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=bs.makeFromBucketSpec(this._url,e):this._bucket=MC(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){RC("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){RC("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Mc(this,e)}_makeRequest(e,n,r,i,a=!0){if(this._deleted)return new nH(t4());{const o=fH(e,this._appId,r,i,n,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const DC="@firebase/storage",OC="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p4="storage";function eN(t,e,n){return t=zt(t),zH(t,e,n)}function tN(t){return t=zt(t),UH(t)}function nN(t,e){return t=zt(t),qH(t,e)}function GH(t=Qb(),e){t=zt(t);const r=dy(t,p4).getImmediate({identifier:e}),i=zI("storage");return i&&ZH(r,...i),r}function ZH(t,e,n,r={}){HH(t,e,n,r)}function KH(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Jj(n,r,i,e,Hc)}function YH(){Cc(new hl(p4,KH,"PUBLIC").setMultipleInstances(!0)),Xi(DC,OC,""),Xi(DC,OC,"esm2017")}YH();const QH={apiKey:"AIzaSyDXD6WpZoQNLNU0DAqH1wd3q9Q4vthOWv4",authDomain:"annonces-app-44d27.firebaseapp.com",projectId:"annonces-app-44d27",storageBucket:"annonces-app-44d27.firebasestorage.app",messagingSenderId:"603697837611",appId:"1:603697837611:web:858cf99bb80004d0f25c6e",measurementId:"G-35RWYRR568"},rN=HI(QH),Ui=LB(rN),Oe=Sq(rN),sN=GH(rN),g4=x.createContext(null),d_=t=>{const e={};return Object.keys(t).forEach(n=>{t[n]!==void 0&&(e[n]=t[n])}),e},Tn=()=>{const t=x.useContext(g4);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},XH=({children:t})=>{const[e,n]=x.useState(null),[r,i]=x.useState(null),[a,o]=x.useState(!0),c=async N=>{try{const S=localStorage.getItem("pendingUserData");if(S){const w=JSON.parse(S);console.log("🚨 Données récupérées depuis localStorage:",w);const y=pt(Oe,"users",N.uid),C=await cs(y);if(C.exists()){const R=C.data();console.log("📊 Données actuelles dans Firestore:",R);const M={...R,...w,id:N.uid,email:N.email,createdAt:R.createdAt||new Date,lastSeen:new Date},B=d_(M);return await nn(y,B),console.log("✅ Données récupérées et mises à jour !"),i(M),localStorage.removeItem("pendingUserData"),localStorage.removeItem("pendingUserEmail"),me.success("Données de profil récupérées !"),!0}}return!1}catch(S){return console.error("❌ Erreur récupération:",S),!1}},u=async(N,S)=>{const w=pt(Oe,"users",N.uid),y=await cs(w);if(y.exists()){const C=y.data();if(console.log("📊 Données existantes trouvées:",C),!await c(N)){const M={id:N.uid,email:N.email,lastSeen:new Date};C.displayName||(M.displayName=N.displayName||"Utilisateur"),C.university||(M.university="Université non spécifiée"),C.fieldOfStudy||(M.fieldOfStudy="Non spécifié");const B=d_(M);await nn(w,B);const O={...C,...B};i(O),console.log("✅ Profil mis à jour sans écraser les données existantes")}}else{const C={id:N.uid,email:N.email,displayName:N.displayName||(S==null?void 0:S.displayName)||"Utilisateur",photoURL:N.photoURL||(S==null?void 0:S.photoURL)||void 0,phone:(S==null?void 0:S.phone)||void 0,isVerified:!1,verificationStatus:"pending",university:(S==null?void 0:S.university)||"Université non spécifiée",otherUniversity:(S==null?void 0:S.otherUniversity)||void 0,studentId:(S==null?void 0:S.studentId)||void 0,graduationYear:(S==null?void 0:S.graduationYear)||new Date().getFullYear()+2,fieldOfStudy:(S==null?void 0:S.fieldOfStudy)||"Non spécifié",otherFieldOfStudy:(S==null?void 0:S.otherFieldOfStudy)||void 0,campus:(S==null?void 0:S.campus)||"Campus principal",bio:(S==null?void 0:S.bio)||void 0,rating:0,reviewCount:0,trustScore:0,co2Saved:0,transactionsCount:0,donationsCount:0,location:"Paris, France",notificationPreferences:{email:!0,push:!0,sms:!1,alerts:!0},createdAt:new Date,lastSeen:new Date},R=d_(C);await Qu(w,R),i(C)}},h=async(N,S)=>{try{await x$(Ui,N,S),me.success("Connexion réussie !")}catch(w){const y=w instanceof Error?w.message:"Erreur inconnue";throw me.error("Erreur de connexion : "+y),w}},f=async(N,S,w,y)=>{try{const{user:C}=await xA(Ui,N,S);await cm(C,{displayName:w}),await u(C,y),me.success("Compte créé avec succès !")}catch(C){const R=C instanceof Error?C.message:"Erreur inconnue";throw me.error("Erreur lors de la création du compte : "+R),C}},p=async()=>{try{const N=new La;N.setCustomParameters({prompt:"select_account"}),N.addScope("email"),N.addScope("profile"),await Q$(Ui,N)}catch(N){console.error("Google sign in error:",N);const S=N instanceof Error?N.message:"Erreur inconnue";throw me.error("Erreur de connexion Google : "+S),N}},v=async()=>{try{await S$(Ui),i(null),me.success("Déconnexion réussie !")}catch(N){throw me.error("Erreur lors de la déconnexion"),N}},_=async N=>{if(!(!e||!r))try{const S=pt(Oe,"users",e.uid),w=Object.fromEntries(Object.entries(N).filter(([,y])=>y!==void 0));if(w.updatedAt=new Date,Object.keys(w).length===0){console.warn("Aucune donnée valide à mettre à jour");return}await nn(S,w),i({...r,...w}),console.log("Profil mis à jour avec:",w),me.success("Profil mis à jour !")}catch(S){throw console.error("Erreur mise à jour profil:",S),me.error("Erreur lors de la mise à jour du profil"),S}};x.useEffect(()=>{const N=N$(Ui,async w=>{n(w),w?await u(w):i(null),o(!1)});return(async()=>{try{const w=await J$(Ui);w!=null&&w.user&&(await u(w.user),me.success("Connexion Google réussie !"))}catch(w){if(console.error("Redirect result error:",w),w&&typeof w=="object"&&"code"in w&&w.code!=="auth/null-user"){const y=w instanceof Error?w.message:"Erreur inconnue";me.error("Erreur de connexion Google : "+y)}}})(),N},[]);const b={currentUser:e,userProfile:r,loading:a,signIn:h,signUp:f,signInWithGoogle:p,logout:v,updateUserProfile:_};return s.jsx(g4.Provider,{value:b,children:!a&&t})};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JH=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),v4=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var eG={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tG=x.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...c},u)=>x.createElement("svg",{ref:u,...eG,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:v4("lucide",i),...c},[...o.map(([h,f])=>x.createElement(h,f)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=(t,e)=>{const n=x.forwardRef(({className:r,...i},a)=>x.createElement(tG,{ref:a,iconNode:e,className:v4(`lucide-${JH(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nG=pe("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h_=pe("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=pe("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=pe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xm=pe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LC=pe("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f_=pe("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=pe("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rG=pe("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=pe("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const di=pe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sG=pe("Bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iG=pe("Blocks",[["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["path",{d:"M10 21V8a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1H3",key:"1fpvtg"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=pe("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=pe("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=pe("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=pe("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aG=pe("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mi=pe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pc=pe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=pe("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=pe("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oG=pe("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lG=pe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cG=pe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gi=pe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ff=pe("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=pe("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fx=pe("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=pe("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=pe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=pe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=pe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=pe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VC=pe("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uG=pe("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mx=pe("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=pe("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dG=pe("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Md=pe("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hG=pe("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fG=pe("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mG=pe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=pe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cc=pe("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pG=pe("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dd=pe("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=pe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rh=pe("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gG=pe("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=pe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const px=pe("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=pe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xl=pe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vG=pe("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xG=pe("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _i=pe("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=pe("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yG=pe("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=pe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dc=pe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _G=pe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wG=pe("MailCheck",[["path",{d:"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h8",key:"12jkf8"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"m16 19 2 2 4-4",key:"1b14m6"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=pe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=pe("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bG=pe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=pe("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FC=pe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=pe("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jG=pe("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=pe("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NG=pe("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SG=pe("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zC=pe("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sh=pe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EG=pe("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gc=pe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CG=pe("Recycle",[["path",{d:"M7 19H4.815a1.83 1.83 0 0 1-1.57-.881 1.785 1.785 0 0 1-.004-1.784L7.196 9.5",key:"x6z5xu"}],["path",{d:"M11 19h8.203a1.83 1.83 0 0 0 1.556-.89 1.784 1.784 0 0 0 0-1.775l-1.226-2.12",key:"1x4zh5"}],["path",{d:"m14 16-3 3 3 3",key:"f6jyew"}],["path",{d:"M8.293 13.596 7.196 9.5 3.1 10.598",key:"wf1obh"}],["path",{d:"m9.344 5.811 1.093-1.892A1.83 1.83 0 0 1 11.985 3a1.784 1.784 0 0 1 1.546.888l3.943 6.843",key:"9tzpgr"}],["path",{d:"m13.378 9.633 4.096 1.098 1.097-4.096",key:"1oe83g"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=pe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m_=pe("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TG=pe("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=pe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Od=pe("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=pe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=pe("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=pe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oN=pe("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vc=pe("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yl=pe("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yc=pe("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=pe("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kG=pe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pi=pe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PG=pe("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ym=pe("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ql=pe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=pe("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=pe("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=pe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IG=pe("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dp=pe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=pe("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=pe("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AG=pe("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d1=pe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=pe("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=pe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hp=pe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=pe("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RG=pe("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h1=pe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ih=pe("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function MG(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function Ly(...t){return e=>t.forEach(n=>MG(n,e))}function vt(...t){return x.useCallback(Ly(...t),t)}var ro=x.forwardRef((t,e)=>{const{children:n,...r}=t,i=x.Children.toArray(n),a=i.find(OG);if(a){const o=a.props.children,c=i.map(u=>u===a?x.Children.count(o)>1?x.Children.only(null):x.isValidElement(o)?o.props.children:null:u);return s.jsx(f1,{...r,ref:e,children:x.isValidElement(o)?x.cloneElement(o,void 0,c):null})}return s.jsx(f1,{...r,ref:e,children:n})});ro.displayName="Slot";var f1=x.forwardRef((t,e)=>{const{children:n,...r}=t;if(x.isValidElement(n)){const i=VG(n);return x.cloneElement(n,{...LG(r,n.props),ref:e?Ly(e,i):i})}return x.Children.count(n)>1?x.Children.only(null):null});f1.displayName="SlotClone";var DG=({children:t})=>s.jsx(s.Fragment,{children:t});function OG(t){return x.isValidElement(t)&&t.type===DG}function LG(t,e){const n={...e};for(const r in e){const i=t[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?n[r]=(...c)=>{a(...c),i(...c)}:i&&(n[r]=i):r==="style"?n[r]={...i,...a}:r==="className"&&(n[r]=[i,a].filter(Boolean).join(" "))}return{...t,...n}}function VG(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function D4(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=D4(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function FG(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=D4(t))&&(r&&(r+=" "),r+=e);return r}const UC=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,$C=FG,Vy=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return $C(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:a}=e,o=Object.keys(i).map(h=>{const f=n==null?void 0:n[h],p=a==null?void 0:a[h];if(f===null)return null;const v=UC(f)||UC(p);return i[h][v]}),c=n&&Object.entries(n).reduce((h,f)=>{let[p,v]=f;return v===void 0||(h[p]=v),h},{}),u=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((h,f)=>{let{class:p,className:v,..._}=f;return Object.entries(_).every(b=>{let[N,S]=b;return Array.isArray(S)?S.includes({...a,...c}[N]):{...a,...c}[N]===S})?[...h,p,v]:h},[]);return $C(t,o,u,n==null?void 0:n.class,n==null?void 0:n.className)};function O4(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=O4(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function zG(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=O4(t))&&(r&&(r+=" "),r+=e);return r}const lN="-",UG=t=>{const e=BG(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const c=o.split(lN);return c[0]===""&&c.length!==1&&c.shift(),L4(c,e)||$G(o)},getConflictingClassGroupIds:(o,c)=>{const u=n[o]||[];return c&&r[o]?[...u,...r[o]]:u}}},L4=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?L4(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const a=t.join(lN);return(o=e.validators.find(({validator:c})=>c(a)))==null?void 0:o.classGroupId},BC=/^\[(.+)\]$/,$G=t=>{if(BC.test(t)){const e=BC.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},BG=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return qG(Object.entries(t.classGroups),n).forEach(([a,o])=>{m1(o,r,a,e)}),r},m1=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const a=i===""?e:WC(e,i);a.classGroupId=n;return}if(typeof i=="function"){if(WG(i)){m1(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([a,o])=>{m1(o,WC(e,a),n,r)})})},WC=(t,e)=>{let n=t;return e.split(lN).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},WG=t=>t.isThemeGetter,qG=(t,e)=>e?t.map(([n,r])=>{const i=r.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,c])=>[e+o,c])):a);return[n,i]}):t,HG=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(a,o)=>{n.set(a,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(a){let o=n.get(a);if(o!==void 0)return o;if((o=r.get(a))!==void 0)return i(a,o),o},set(a,o){n.has(a)?n.set(a,o):i(a,o)}}},V4="!",GG=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],a=e.length,o=c=>{const u=[];let h=0,f=0,p;for(let S=0;S<c.length;S++){let w=c[S];if(h===0){if(w===i&&(r||c.slice(S,S+a)===e)){u.push(c.slice(f,S)),f=S+a;continue}if(w==="/"){p=S;continue}}w==="["?h++:w==="]"&&h--}const v=u.length===0?c:c.substring(f),_=v.startsWith(V4),b=_?v.substring(1):v,N=p&&p>f?p-f:void 0;return{modifiers:u,hasImportantModifier:_,baseClassName:b,maybePostfixModifierPosition:N}};return n?c=>n({className:c,parseClassName:o}):o},ZG=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},KG=t=>({cache:HG(t.cacheSize),parseClassName:GG(t),...UG(t)}),YG=/\s+/,QG=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,a=[],o=t.trim().split(YG);let c="";for(let u=o.length-1;u>=0;u-=1){const h=o[u],{modifiers:f,hasImportantModifier:p,baseClassName:v,maybePostfixModifierPosition:_}=n(h);let b=!!_,N=r(b?v.substring(0,_):v);if(!N){if(!b){c=h+(c.length>0?" "+c:c);continue}if(N=r(v),!N){c=h+(c.length>0?" "+c:c);continue}b=!1}const S=ZG(f).join(":"),w=p?S+V4:S,y=w+N;if(a.includes(y))continue;a.push(y);const C=i(N,b);for(let R=0;R<C.length;++R){const M=C[R];a.push(w+M)}c=h+(c.length>0?" "+c:c)}return c};function XG(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=F4(e))&&(r&&(r+=" "),r+=n);return r}const F4=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=F4(t[r]))&&(n&&(n+=" "),n+=e);return n};function JG(t,...e){let n,r,i,a=o;function o(u){const h=e.reduce((f,p)=>p(f),t());return n=KG(h),r=n.cache.get,i=n.cache.set,a=c,c(u)}function c(u){const h=r(u);if(h)return h;const f=QG(u,n);return i(u,f),f}return function(){return a(XG.apply(null,arguments))}}const on=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},z4=/^\[(?:([a-z-]+):)?(.+)\]$/i,eZ=/^\d+\/\d+$/,tZ=new Set(["px","full","screen"]),nZ=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,rZ=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,sZ=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,iZ=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,aZ=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ia=t=>dd(t)||tZ.has(t)||eZ.test(t),Io=t=>ah(t,"length",mZ),dd=t=>!!t&&!Number.isNaN(Number(t)),p_=t=>ah(t,"number",dd),rf=t=>!!t&&Number.isInteger(Number(t)),oZ=t=>t.endsWith("%")&&dd(t.slice(0,-1)),_t=t=>z4.test(t),Ao=t=>nZ.test(t),lZ=new Set(["length","size","percentage"]),cZ=t=>ah(t,lZ,U4),uZ=t=>ah(t,"position",U4),dZ=new Set(["image","url"]),hZ=t=>ah(t,dZ,gZ),fZ=t=>ah(t,"",pZ),sf=()=>!0,ah=(t,e,n)=>{const r=z4.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},mZ=t=>rZ.test(t)&&!sZ.test(t),U4=()=>!1,pZ=t=>iZ.test(t),gZ=t=>aZ.test(t),vZ=()=>{const t=on("colors"),e=on("spacing"),n=on("blur"),r=on("brightness"),i=on("borderColor"),a=on("borderRadius"),o=on("borderSpacing"),c=on("borderWidth"),u=on("contrast"),h=on("grayscale"),f=on("hueRotate"),p=on("invert"),v=on("gap"),_=on("gradientColorStops"),b=on("gradientColorStopPositions"),N=on("inset"),S=on("margin"),w=on("opacity"),y=on("padding"),C=on("saturate"),R=on("scale"),M=on("sepia"),B=on("skew"),O=on("space"),D=on("translate"),F=()=>["auto","contain","none"],I=()=>["auto","hidden","clip","visible","scroll"],V=()=>["auto",_t,e],k=()=>[_t,e],P=()=>["",Ia,Io],q=()=>["auto",dd,_t],te=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],re=()=>["solid","dashed","dotted","double","none"],K=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],U=()=>["start","end","center","between","around","evenly","stretch"],W=()=>["","0",_t],H=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Q=()=>[dd,_t];return{cacheSize:500,separator:":",theme:{colors:[sf],spacing:[Ia,Io],blur:["none","",Ao,_t],brightness:Q(),borderColor:[t],borderRadius:["none","","full",Ao,_t],borderSpacing:k(),borderWidth:P(),contrast:Q(),grayscale:W(),hueRotate:Q(),invert:W(),gap:k(),gradientColorStops:[t],gradientColorStopPositions:[oZ,Io],inset:V(),margin:V(),opacity:Q(),padding:k(),saturate:Q(),scale:Q(),sepia:W(),skew:Q(),space:k(),translate:k()},classGroups:{aspect:[{aspect:["auto","square","video",_t]}],container:["container"],columns:[{columns:[Ao]}],"break-after":[{"break-after":H()}],"break-before":[{"break-before":H()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...te(),_t]}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:F()}],"overscroll-x":[{"overscroll-x":F()}],"overscroll-y":[{"overscroll-y":F()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[N]}],"inset-x":[{"inset-x":[N]}],"inset-y":[{"inset-y":[N]}],start:[{start:[N]}],end:[{end:[N]}],top:[{top:[N]}],right:[{right:[N]}],bottom:[{bottom:[N]}],left:[{left:[N]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",rf,_t]}],basis:[{basis:V()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",_t]}],grow:[{grow:W()}],shrink:[{shrink:W()}],order:[{order:["first","last","none",rf,_t]}],"grid-cols":[{"grid-cols":[sf]}],"col-start-end":[{col:["auto",{span:["full",rf,_t]},_t]}],"col-start":[{"col-start":q()}],"col-end":[{"col-end":q()}],"grid-rows":[{"grid-rows":[sf]}],"row-start-end":[{row:["auto",{span:[rf,_t]},_t]}],"row-start":[{"row-start":q()}],"row-end":[{"row-end":q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",_t]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",_t]}],gap:[{gap:[v]}],"gap-x":[{"gap-x":[v]}],"gap-y":[{"gap-y":[v]}],"justify-content":[{justify:["normal",...U()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...U(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...U(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[S]}],mx:[{mx:[S]}],my:[{my:[S]}],ms:[{ms:[S]}],me:[{me:[S]}],mt:[{mt:[S]}],mr:[{mr:[S]}],mb:[{mb:[S]}],ml:[{ml:[S]}],"space-x":[{"space-x":[O]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[O]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",_t,e]}],"min-w":[{"min-w":[_t,e,"min","max","fit"]}],"max-w":[{"max-w":[_t,e,"none","full","min","max","fit","prose",{screen:[Ao]},Ao]}],h:[{h:[_t,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[_t,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[_t,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[_t,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Ao,Io]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",p_]}],"font-family":[{font:[sf]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",_t]}],"line-clamp":[{"line-clamp":["none",dd,p_]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ia,_t]}],"list-image":[{"list-image":["none",_t]}],"list-style-type":[{list:["none","disc","decimal",_t]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...re(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ia,Io]}],"underline-offset":[{"underline-offset":["auto",Ia,_t]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",_t]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",_t]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...te(),uZ]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",cZ]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},hZ]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[_]}],"gradient-via":[{via:[_]}],"gradient-to":[{to:[_]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...re(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:re()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...re()]}],"outline-offset":[{"outline-offset":[Ia,_t]}],"outline-w":[{outline:[Ia,Io]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[Ia,Io]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Ao,fZ]}],"shadow-color":[{shadow:[sf]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...K(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":K()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",Ao,_t]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[p]}],saturate:[{saturate:[C]}],sepia:[{sepia:[M]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[M]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",_t]}],duration:[{duration:Q()}],ease:[{ease:["linear","in","out","in-out",_t]}],delay:[{delay:Q()}],animate:[{animate:["none","spin","ping","pulse","bounce",_t]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[R]}],"scale-x":[{"scale-x":[R]}],"scale-y":[{"scale-y":[R]}],rotate:[{rotate:[rf,_t]}],"translate-x":[{"translate-x":[D]}],"translate-y":[{"translate-y":[D]}],"skew-x":[{"skew-x":[B]}],"skew-y":[{"skew-y":[B]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",_t]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",_t]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",_t]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ia,Io,p_]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},xZ=JG(vZ);function Je(...t){return xZ(zG(t))}const p1=Vy("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Y=x.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},a)=>{const o=r?ro:"button";return s.jsx(o,{className:Je(p1({variant:e,size:n,className:t})),ref:a,...i})});Y.displayName="Button";const qe=x.forwardRef(({className:t,type:e,...n},r)=>s.jsx("input",{type:e,className:Je("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));qe.displayName="Input";function Ie(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function yZ(t,e){const n=x.createContext(e),r=a=>{const{children:o,...c}=a,u=x.useMemo(()=>c,Object.values(c));return s.jsx(n.Provider,{value:u,children:o})};r.displayName=t+"Provider";function i(a){const o=x.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${t}\``)}return[r,i]}function As(t,e=[]){let n=[];function r(a,o){const c=x.createContext(o),u=n.length;n=[...n,o];const h=p=>{var w;const{scope:v,children:_,...b}=p,N=((w=v==null?void 0:v[t])==null?void 0:w[u])||c,S=x.useMemo(()=>b,Object.values(b));return s.jsx(N.Provider,{value:S,children:_})};h.displayName=a+"Provider";function f(p,v){var N;const _=((N=v==null?void 0:v[t])==null?void 0:N[u])||c,b=x.useContext(_);if(b)return b;if(o!==void 0)return o;throw new Error(`\`${p}\` must be used within \`${a}\``)}return[h,f]}const i=()=>{const a=n.map(o=>x.createContext(o));return function(c){const u=(c==null?void 0:c[t])||a;return x.useMemo(()=>({[`__scope${t}`]:{...c,[t]:u}}),[c,u])}};return i.scopeName=t,[r,_Z(i,...e)]}function _Z(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((c,{useScope:u,scopeName:h})=>{const p=u(a)[`__scope${h}`];return{...c,...p}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Zn(t){const e=x.useRef(t);return x.useEffect(()=>{e.current=t}),x.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function ks({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=wZ({defaultProp:e,onChange:n}),a=t!==void 0,o=a?t:r,c=Zn(n),u=x.useCallback(h=>{if(a){const p=typeof h=="function"?h(t):h;p!==t&&c(p)}else i(h)},[a,t,i,c]);return[o,u]}function wZ({defaultProp:t,onChange:e}){const n=x.useState(t),[r]=n,i=x.useRef(r),a=Zn(e);return x.useEffect(()=>{i.current!==r&&(a(r),i.current=r)},[r,i,a]),n}var bZ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ge=bZ.reduce((t,e)=>{const n=x.forwardRef((r,i)=>{const{asChild:a,...o}=r,c=a?ro:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...o,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function $4(t,e){t&&Qd.flushSync(()=>t.dispatchEvent(e))}function jZ(t,e=[]){let n=[];function r(a,o){const c=x.createContext(o),u=n.length;n=[...n,o];function h(p){const{scope:v,children:_,...b}=p,N=(v==null?void 0:v[t][u])||c,S=x.useMemo(()=>b,Object.values(b));return s.jsx(N.Provider,{value:S,children:_})}function f(p,v){const _=(v==null?void 0:v[t][u])||c,b=x.useContext(_);if(b)return b;if(o!==void 0)return o;throw new Error(`\`${p}\` must be used within \`${a}\``)}return h.displayName=a+"Provider",[h,f]}const i=()=>{const a=n.map(o=>x.createContext(o));return function(c){const u=(c==null?void 0:c[t])||a;return x.useMemo(()=>({[`__scope${t}`]:{...c,[t]:u}}),[c,u])}};return i.scopeName=t,[r,NZ(i,...e)]}function NZ(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((c,{useScope:u,scopeName:h})=>{const p=u(a)[`__scope${h}`];return{...c,...p}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function fp(t){const e=t+"CollectionProvider",[n,r]=jZ(e),[i,a]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=_=>{const{scope:b,children:N}=_,S=Me.useRef(null),w=Me.useRef(new Map).current;return s.jsx(i,{scope:b,itemMap:w,collectionRef:S,children:N})};o.displayName=e;const c=t+"CollectionSlot",u=Me.forwardRef((_,b)=>{const{scope:N,children:S}=_,w=a(c,N),y=vt(b,w.collectionRef);return s.jsx(ro,{ref:y,children:S})});u.displayName=c;const h=t+"CollectionItemSlot",f="data-radix-collection-item",p=Me.forwardRef((_,b)=>{const{scope:N,children:S,...w}=_,y=Me.useRef(null),C=vt(b,y),R=a(h,N);return Me.useEffect(()=>(R.itemMap.set(y,{ref:y,...w}),()=>void R.itemMap.delete(y))),s.jsx(ro,{[f]:"",ref:C,children:S})});p.displayName=h;function v(_){const b=a(t+"CollectionConsumer",_);return Me.useCallback(()=>{const S=b.collectionRef.current;if(!S)return[];const w=Array.from(S.querySelectorAll(`[${f}]`));return Array.from(b.itemMap.values()).sort((R,M)=>w.indexOf(R.ref.current)-w.indexOf(M.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:o,Slot:u,ItemSlot:p},v,r]}var SZ=x.createContext(void 0);function Qc(t){const e=x.useContext(SZ);return t||e||"ltr"}function EZ(t,e=globalThis==null?void 0:globalThis.document){const n=Zn(t);x.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var CZ="DismissableLayer",g1="dismissableLayer.update",TZ="dismissableLayer.pointerDownOutside",kZ="dismissableLayer.focusOutside",qC,B4=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),mp=x.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:o,onDismiss:c,...u}=t,h=x.useContext(B4),[f,p]=x.useState(null),v=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,_]=x.useState({}),b=vt(e,O=>p(O)),N=Array.from(h.layers),[S]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),w=N.indexOf(S),y=f?N.indexOf(f):-1,C=h.layersWithOutsidePointerEventsDisabled.size>0,R=y>=w,M=AZ(O=>{const D=O.target,F=[...h.branches].some(I=>I.contains(D));!R||F||(i==null||i(O),o==null||o(O),O.defaultPrevented||c==null||c())},v),B=RZ(O=>{const D=O.target;[...h.branches].some(I=>I.contains(D))||(a==null||a(O),o==null||o(O),O.defaultPrevented||c==null||c())},v);return EZ(O=>{y===h.layers.size-1&&(r==null||r(O),!O.defaultPrevented&&c&&(O.preventDefault(),c()))},v),x.useEffect(()=>{if(f)return n&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(qC=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(f)),h.layers.add(f),HC(),()=>{n&&h.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=qC)}},[f,v,n,h]),x.useEffect(()=>()=>{f&&(h.layers.delete(f),h.layersWithOutsidePointerEventsDisabled.delete(f),HC())},[f,h]),x.useEffect(()=>{const O=()=>_({});return document.addEventListener(g1,O),()=>document.removeEventListener(g1,O)},[]),s.jsx(Ge.div,{...u,ref:b,style:{pointerEvents:C?R?"auto":"none":void 0,...t.style},onFocusCapture:Ie(t.onFocusCapture,B.onFocusCapture),onBlurCapture:Ie(t.onBlurCapture,B.onBlurCapture),onPointerDownCapture:Ie(t.onPointerDownCapture,M.onPointerDownCapture)})});mp.displayName=CZ;var PZ="DismissableLayerBranch",IZ=x.forwardRef((t,e)=>{const n=x.useContext(B4),r=x.useRef(null),i=vt(e,r);return x.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),s.jsx(Ge.div,{...t,ref:i})});IZ.displayName=PZ;function AZ(t,e=globalThis==null?void 0:globalThis.document){const n=Zn(t),r=x.useRef(!1),i=x.useRef(()=>{});return x.useEffect(()=>{const a=c=>{if(c.target&&!r.current){let u=function(){W4(TZ,n,h,{discrete:!0})};const h={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=u,e.addEventListener("click",i.current,{once:!0})):u()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function RZ(t,e=globalThis==null?void 0:globalThis.document){const n=Zn(t),r=x.useRef(!1);return x.useEffect(()=>{const i=a=>{a.target&&!r.current&&W4(kZ,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function HC(){const t=new CustomEvent(g1);document.dispatchEvent(t)}function W4(t,e,n,{discrete:r}){const i=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?$4(i,a):i.dispatchEvent(a)}var g_=0;function Fy(){x.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??GC()),document.body.insertAdjacentElement("beforeend",t[1]??GC()),g_++,()=>{g_===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),g_--}},[])}function GC(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var v_="focusScope.autoFocusOnMount",x_="focusScope.autoFocusOnUnmount",ZC={bubbles:!1,cancelable:!0},MZ="FocusScope",pp=x.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...o}=t,[c,u]=x.useState(null),h=Zn(i),f=Zn(a),p=x.useRef(null),v=vt(e,N=>u(N)),_=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(r){let N=function(C){if(_.paused||!c)return;const R=C.target;c.contains(R)?p.current=R:Mo(p.current,{select:!0})},S=function(C){if(_.paused||!c)return;const R=C.relatedTarget;R!==null&&(c.contains(R)||Mo(p.current,{select:!0}))},w=function(C){if(document.activeElement===document.body)for(const M of C)M.removedNodes.length>0&&Mo(c)};document.addEventListener("focusin",N),document.addEventListener("focusout",S);const y=new MutationObserver(w);return c&&y.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",N),document.removeEventListener("focusout",S),y.disconnect()}}},[r,c,_.paused]),x.useEffect(()=>{if(c){YC.add(_);const N=document.activeElement;if(!c.contains(N)){const w=new CustomEvent(v_,ZC);c.addEventListener(v_,h),c.dispatchEvent(w),w.defaultPrevented||(DZ(zZ(q4(c)),{select:!0}),document.activeElement===N&&Mo(c))}return()=>{c.removeEventListener(v_,h),setTimeout(()=>{const w=new CustomEvent(x_,ZC);c.addEventListener(x_,f),c.dispatchEvent(w),w.defaultPrevented||Mo(N??document.body,{select:!0}),c.removeEventListener(x_,f),YC.remove(_)},0)}}},[c,h,f,_]);const b=x.useCallback(N=>{if(!n&&!r||_.paused)return;const S=N.key==="Tab"&&!N.altKey&&!N.ctrlKey&&!N.metaKey,w=document.activeElement;if(S&&w){const y=N.currentTarget,[C,R]=OZ(y);C&&R?!N.shiftKey&&w===R?(N.preventDefault(),n&&Mo(C,{select:!0})):N.shiftKey&&w===C&&(N.preventDefault(),n&&Mo(R,{select:!0})):w===y&&N.preventDefault()}},[n,r,_.paused]);return s.jsx(Ge.div,{tabIndex:-1,...o,ref:v,onKeyDown:b})});pp.displayName=MZ;function DZ(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Mo(r,{select:e}),document.activeElement!==n)return}function OZ(t){const e=q4(t),n=KC(e,t),r=KC(e.reverse(),t);return[n,r]}function q4(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function KC(t,e){for(const n of t)if(!LZ(n,{upTo:e}))return n}function LZ(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function VZ(t){return t instanceof HTMLInputElement&&"select"in t}function Mo(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&VZ(t)&&e&&t.select()}}var YC=FZ();function FZ(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=QC(t,e),t.unshift(e)},remove(e){var n;t=QC(t,e),(n=t[0])==null||n.resume()}}}function QC(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function zZ(t){return t.filter(e=>e.tagName!=="A")}var ir=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},UZ=_k.useId||(()=>{}),$Z=0;function Ns(t){const[e,n]=x.useState(UZ());return ir(()=>{n(r=>r??String($Z++))},[t]),e?`radix-${e}`:""}const BZ=["top","right","bottom","left"],_l=Math.min,ys=Math.max,gx=Math.round,Ig=Math.floor,wl=t=>({x:t,y:t}),WZ={left:"right",right:"left",bottom:"top",top:"bottom"},qZ={start:"end",end:"start"};function v1(t,e,n){return ys(t,_l(e,n))}function so(t,e){return typeof t=="function"?t(e):t}function io(t){return t.split("-")[0]}function oh(t){return t.split("-")[1]}function cN(t){return t==="x"?"y":"x"}function uN(t){return t==="y"?"height":"width"}function bl(t){return["top","bottom"].includes(io(t))?"y":"x"}function dN(t){return cN(bl(t))}function HZ(t,e,n){n===void 0&&(n=!1);const r=oh(t),i=dN(t),a=uN(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(o=vx(o)),[o,vx(o)]}function GZ(t){const e=vx(t);return[x1(t),e,x1(e)]}function x1(t){return t.replace(/start|end/g,e=>qZ[e])}function ZZ(t,e,n){const r=["left","right"],i=["right","left"],a=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?a:o;default:return[]}}function KZ(t,e,n,r){const i=oh(t);let a=ZZ(io(t),n==="start",r);return i&&(a=a.map(o=>o+"-"+i),e&&(a=a.concat(a.map(x1)))),a}function vx(t){return t.replace(/left|right|bottom|top/g,e=>WZ[e])}function YZ(t){return{top:0,right:0,bottom:0,left:0,...t}}function H4(t){return typeof t!="number"?YZ(t):{top:t,right:t,bottom:t,left:t}}function xx(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function XC(t,e,n){let{reference:r,floating:i}=t;const a=bl(e),o=dN(e),c=uN(o),u=io(e),h=a==="y",f=r.x+r.width/2-i.width/2,p=r.y+r.height/2-i.height/2,v=r[c]/2-i[c]/2;let _;switch(u){case"top":_={x:f,y:r.y-i.height};break;case"bottom":_={x:f,y:r.y+r.height};break;case"right":_={x:r.x+r.width,y:p};break;case"left":_={x:r.x-i.width,y:p};break;default:_={x:r.x,y:r.y}}switch(oh(e)){case"start":_[o]-=v*(n&&h?-1:1);break;case"end":_[o]+=v*(n&&h?-1:1);break}return _}const QZ=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:o}=n,c=a.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(e));let h=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:f,y:p}=XC(h,r,u),v=r,_={},b=0;for(let N=0;N<c.length;N++){const{name:S,fn:w}=c[N],{x:y,y:C,data:R,reset:M}=await w({x:f,y:p,initialPlacement:r,placement:v,strategy:i,middlewareData:_,rects:h,platform:o,elements:{reference:t,floating:e}});f=y??f,p=C??p,_={..._,[S]:{..._[S],...R}},M&&b<=50&&(b++,typeof M=="object"&&(M.placement&&(v=M.placement),M.rects&&(h=M.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):M.rects),{x:f,y:p}=XC(h,v,u)),N=-1)}return{x:f,y:p,placement:v,strategy:i,middlewareData:_}};async function _m(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:a,rects:o,elements:c,strategy:u}=t,{boundary:h="clippingAncestors",rootBoundary:f="viewport",elementContext:p="floating",altBoundary:v=!1,padding:_=0}=so(e,t),b=H4(_),S=c[v?p==="floating"?"reference":"floating":p],w=xx(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(S)))==null||n?S:S.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(c.floating)),boundary:h,rootBoundary:f,strategy:u})),y=p==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,C=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c.floating)),R=await(a.isElement==null?void 0:a.isElement(C))?await(a.getScale==null?void 0:a.getScale(C))||{x:1,y:1}:{x:1,y:1},M=xx(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:y,offsetParent:C,strategy:u}):y);return{top:(w.top-M.top+b.top)/R.y,bottom:(M.bottom-w.bottom+b.bottom)/R.y,left:(w.left-M.left+b.left)/R.x,right:(M.right-w.right+b.right)/R.x}}const XZ=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:a,platform:o,elements:c,middlewareData:u}=e,{element:h,padding:f=0}=so(t,e)||{};if(h==null)return{};const p=H4(f),v={x:n,y:r},_=dN(i),b=uN(_),N=await o.getDimensions(h),S=_==="y",w=S?"top":"left",y=S?"bottom":"right",C=S?"clientHeight":"clientWidth",R=a.reference[b]+a.reference[_]-v[_]-a.floating[b],M=v[_]-a.reference[_],B=await(o.getOffsetParent==null?void 0:o.getOffsetParent(h));let O=B?B[C]:0;(!O||!await(o.isElement==null?void 0:o.isElement(B)))&&(O=c.floating[C]||a.floating[b]);const D=R/2-M/2,F=O/2-N[b]/2-1,I=_l(p[w],F),V=_l(p[y],F),k=I,P=O-N[b]-V,q=O/2-N[b]/2+D,te=v1(k,q,P),re=!u.arrow&&oh(i)!=null&&q!==te&&a.reference[b]/2-(q<k?I:V)-N[b]/2<0,K=re?q<k?q-k:q-P:0;return{[_]:v[_]+K,data:{[_]:te,centerOffset:q-te-K,...re&&{alignmentOffset:K}},reset:re}}}),JZ=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:a,rects:o,initialPlacement:c,platform:u,elements:h}=e,{mainAxis:f=!0,crossAxis:p=!0,fallbackPlacements:v,fallbackStrategy:_="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:N=!0,...S}=so(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const w=io(i),y=bl(c),C=io(c)===c,R=await(u.isRTL==null?void 0:u.isRTL(h.floating)),M=v||(C||!N?[vx(c)]:GZ(c)),B=b!=="none";!v&&B&&M.push(...KZ(c,N,b,R));const O=[c,...M],D=await _m(e,S),F=[];let I=((r=a.flip)==null?void 0:r.overflows)||[];if(f&&F.push(D[w]),p){const q=HZ(i,o,R);F.push(D[q[0]],D[q[1]])}if(I=[...I,{placement:i,overflows:F}],!F.every(q=>q<=0)){var V,k;const q=(((V=a.flip)==null?void 0:V.index)||0)+1,te=O[q];if(te)return{data:{index:q,overflows:I},reset:{placement:te}};let re=(k=I.filter(K=>K.overflows[0]<=0).sort((K,U)=>K.overflows[1]-U.overflows[1])[0])==null?void 0:k.placement;if(!re)switch(_){case"bestFit":{var P;const K=(P=I.filter(U=>{if(B){const W=bl(U.placement);return W===y||W==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(W=>W>0).reduce((W,H)=>W+H,0)]).sort((U,W)=>U[1]-W[1])[0])==null?void 0:P[0];K&&(re=K);break}case"initialPlacement":re=c;break}if(i!==re)return{reset:{placement:re}}}return{}}}};function JC(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function eT(t){return BZ.some(e=>t[e]>=0)}const eK=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=so(t,e);switch(r){case"referenceHidden":{const a=await _m(e,{...i,elementContext:"reference"}),o=JC(a,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:eT(o)}}}case"escaped":{const a=await _m(e,{...i,altBoundary:!0}),o=JC(a,n.floating);return{data:{escapedOffsets:o,escaped:eT(o)}}}default:return{}}}}};async function tK(t,e){const{placement:n,platform:r,elements:i}=t,a=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=io(n),c=oh(n),u=bl(n)==="y",h=["left","top"].includes(o)?-1:1,f=a&&u?-1:1,p=so(e,t);let{mainAxis:v,crossAxis:_,alignmentAxis:b}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return c&&typeof b=="number"&&(_=c==="end"?b*-1:b),u?{x:_*f,y:v*h}:{x:v*h,y:_*f}}const nK=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:a,placement:o,middlewareData:c}=e,u=await tK(e,t);return o===((n=c.offset)==null?void 0:n.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:a+u.y,data:{...u,placement:o}}}}},rK=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:a=!0,crossAxis:o=!1,limiter:c={fn:S=>{let{x:w,y}=S;return{x:w,y}}},...u}=so(t,e),h={x:n,y:r},f=await _m(e,u),p=bl(io(i)),v=cN(p);let _=h[v],b=h[p];if(a){const S=v==="y"?"top":"left",w=v==="y"?"bottom":"right",y=_+f[S],C=_-f[w];_=v1(y,_,C)}if(o){const S=p==="y"?"top":"left",w=p==="y"?"bottom":"right",y=b+f[S],C=b-f[w];b=v1(y,b,C)}const N=c.fn({...e,[v]:_,[p]:b});return{...N,data:{x:N.x-n,y:N.y-r,enabled:{[v]:a,[p]:o}}}}}},sK=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:a,middlewareData:o}=e,{offset:c=0,mainAxis:u=!0,crossAxis:h=!0}=so(t,e),f={x:n,y:r},p=bl(i),v=cN(p);let _=f[v],b=f[p];const N=so(c,e),S=typeof N=="number"?{mainAxis:N,crossAxis:0}:{mainAxis:0,crossAxis:0,...N};if(u){const C=v==="y"?"height":"width",R=a.reference[v]-a.floating[C]+S.mainAxis,M=a.reference[v]+a.reference[C]-S.mainAxis;_<R?_=R:_>M&&(_=M)}if(h){var w,y;const C=v==="y"?"width":"height",R=["top","left"].includes(io(i)),M=a.reference[p]-a.floating[C]+(R&&((w=o.offset)==null?void 0:w[p])||0)+(R?0:S.crossAxis),B=a.reference[p]+a.reference[C]+(R?0:((y=o.offset)==null?void 0:y[p])||0)-(R?S.crossAxis:0);b<M?b=M:b>B&&(b=B)}return{[v]:_,[p]:b}}}},iK=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:a,platform:o,elements:c}=e,{apply:u=()=>{},...h}=so(t,e),f=await _m(e,h),p=io(i),v=oh(i),_=bl(i)==="y",{width:b,height:N}=a.floating;let S,w;p==="top"||p==="bottom"?(S=p,w=v===(await(o.isRTL==null?void 0:o.isRTL(c.floating))?"start":"end")?"left":"right"):(w=p,S=v==="end"?"top":"bottom");const y=N-f.top-f.bottom,C=b-f.left-f.right,R=_l(N-f[S],y),M=_l(b-f[w],C),B=!e.middlewareData.shift;let O=R,D=M;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(D=C),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(O=y),B&&!v){const I=ys(f.left,0),V=ys(f.right,0),k=ys(f.top,0),P=ys(f.bottom,0);_?D=b-2*(I!==0||V!==0?I+V:ys(f.left,f.right)):O=N-2*(k!==0||P!==0?k+P:ys(f.top,f.bottom))}await u({...e,availableWidth:D,availableHeight:O});const F=await o.getDimensions(c.floating);return b!==F.width||N!==F.height?{reset:{rects:!0}}:{}}}};function zy(){return typeof window<"u"}function lh(t){return G4(t)?(t.nodeName||"").toLowerCase():"#document"}function Ss(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ma(t){var e;return(e=(G4(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function G4(t){return zy()?t instanceof Node||t instanceof Ss(t).Node:!1}function Ei(t){return zy()?t instanceof Element||t instanceof Ss(t).Element:!1}function la(t){return zy()?t instanceof HTMLElement||t instanceof Ss(t).HTMLElement:!1}function tT(t){return!zy()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ss(t).ShadowRoot}function gp(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Ci(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function aK(t){return["table","td","th"].includes(lh(t))}function Uy(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function hN(t){const e=fN(),n=Ei(t)?Ci(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function oK(t){let e=jl(t);for(;la(e)&&!Ld(e);){if(hN(e))return e;if(Uy(e))return null;e=jl(e)}return null}function fN(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ld(t){return["html","body","#document"].includes(lh(t))}function Ci(t){return Ss(t).getComputedStyle(t)}function $y(t){return Ei(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function jl(t){if(lh(t)==="html")return t;const e=t.assignedSlot||t.parentNode||tT(t)&&t.host||ma(t);return tT(e)?e.host:e}function Z4(t){const e=jl(t);return Ld(e)?t.ownerDocument?t.ownerDocument.body:t.body:la(e)&&gp(e)?e:Z4(e)}function wm(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=Z4(t),a=i===((r=t.ownerDocument)==null?void 0:r.body),o=Ss(i);if(a){const c=y1(o);return e.concat(o,o.visualViewport||[],gp(i)?i:[],c&&n?wm(c):[])}return e.concat(i,wm(i,[],n))}function y1(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function K4(t){const e=Ci(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=la(t),a=i?t.offsetWidth:n,o=i?t.offsetHeight:r,c=gx(n)!==a||gx(r)!==o;return c&&(n=a,r=o),{width:n,height:r,$:c}}function mN(t){return Ei(t)?t:t.contextElement}function hd(t){const e=mN(t);if(!la(e))return wl(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:a}=K4(e);let o=(a?gx(n.width):n.width)/r,c=(a?gx(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!c||!Number.isFinite(c))&&(c=1),{x:o,y:c}}const lK=wl(0);function Y4(t){const e=Ss(t);return!fN()||!e.visualViewport?lK:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function cK(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Ss(t)?!1:e}function Oc(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),a=mN(t);let o=wl(1);e&&(r?Ei(r)&&(o=hd(r)):o=hd(t));const c=cK(a,n,r)?Y4(a):wl(0);let u=(i.left+c.x)/o.x,h=(i.top+c.y)/o.y,f=i.width/o.x,p=i.height/o.y;if(a){const v=Ss(a),_=r&&Ei(r)?Ss(r):r;let b=v,N=y1(b);for(;N&&r&&_!==b;){const S=hd(N),w=N.getBoundingClientRect(),y=Ci(N),C=w.left+(N.clientLeft+parseFloat(y.paddingLeft))*S.x,R=w.top+(N.clientTop+parseFloat(y.paddingTop))*S.y;u*=S.x,h*=S.y,f*=S.x,p*=S.y,u+=C,h+=R,b=Ss(N),N=y1(b)}}return xx({width:f,height:p,x:u,y:h})}function uK(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const a=i==="fixed",o=ma(r),c=e?Uy(e.floating):!1;if(r===o||c&&a)return n;let u={scrollLeft:0,scrollTop:0},h=wl(1);const f=wl(0),p=la(r);if((p||!p&&!a)&&((lh(r)!=="body"||gp(o))&&(u=$y(r)),la(r))){const v=Oc(r);h=hd(r),f.x=v.x+r.clientLeft,f.y=v.y+r.clientTop}return{width:n.width*h.x,height:n.height*h.y,x:n.x*h.x-u.scrollLeft*h.x+f.x,y:n.y*h.y-u.scrollTop*h.y+f.y}}function dK(t){return Array.from(t.getClientRects())}function _1(t,e){const n=$y(t).scrollLeft;return e?e.left+n:Oc(ma(t)).left+n}function hK(t){const e=ma(t),n=$y(t),r=t.ownerDocument.body,i=ys(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=ys(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+_1(t);const c=-n.scrollTop;return Ci(r).direction==="rtl"&&(o+=ys(e.clientWidth,r.clientWidth)-i),{width:i,height:a,x:o,y:c}}function fK(t,e){const n=Ss(t),r=ma(t),i=n.visualViewport;let a=r.clientWidth,o=r.clientHeight,c=0,u=0;if(i){a=i.width,o=i.height;const h=fN();(!h||h&&e==="fixed")&&(c=i.offsetLeft,u=i.offsetTop)}return{width:a,height:o,x:c,y:u}}function mK(t,e){const n=Oc(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,a=la(t)?hd(t):wl(1),o=t.clientWidth*a.x,c=t.clientHeight*a.y,u=i*a.x,h=r*a.y;return{width:o,height:c,x:u,y:h}}function nT(t,e,n){let r;if(e==="viewport")r=fK(t,n);else if(e==="document")r=hK(ma(t));else if(Ei(e))r=mK(e,n);else{const i=Y4(t);r={...e,x:e.x-i.x,y:e.y-i.y}}return xx(r)}function Q4(t,e){const n=jl(t);return n===e||!Ei(n)||Ld(n)?!1:Ci(n).position==="fixed"||Q4(n,e)}function pK(t,e){const n=e.get(t);if(n)return n;let r=wm(t,[],!1).filter(c=>Ei(c)&&lh(c)!=="body"),i=null;const a=Ci(t).position==="fixed";let o=a?jl(t):t;for(;Ei(o)&&!Ld(o);){const c=Ci(o),u=hN(o);!u&&c.position==="fixed"&&(i=null),(a?!u&&!i:!u&&c.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||gp(o)&&!u&&Q4(t,o))?r=r.filter(f=>f!==o):i=c,o=jl(o)}return e.set(t,r),r}function gK(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?Uy(e)?[]:pK(e,this._c):[].concat(n),r],c=o[0],u=o.reduce((h,f)=>{const p=nT(e,f,i);return h.top=ys(p.top,h.top),h.right=_l(p.right,h.right),h.bottom=_l(p.bottom,h.bottom),h.left=ys(p.left,h.left),h},nT(e,c,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function vK(t){const{width:e,height:n}=K4(t);return{width:e,height:n}}function xK(t,e,n){const r=la(e),i=ma(e),a=n==="fixed",o=Oc(t,!0,a,e);let c={scrollLeft:0,scrollTop:0};const u=wl(0);if(r||!r&&!a)if((lh(e)!=="body"||gp(i))&&(c=$y(e)),r){const _=Oc(e,!0,a,e);u.x=_.x+e.clientLeft,u.y=_.y+e.clientTop}else i&&(u.x=_1(i));let h=0,f=0;if(i&&!r&&!a){const _=i.getBoundingClientRect();f=_.top+c.scrollTop,h=_.left+c.scrollLeft-_1(i,_)}const p=o.left+c.scrollLeft-u.x-h,v=o.top+c.scrollTop-u.y-f;return{x:p,y:v,width:o.width,height:o.height}}function y_(t){return Ci(t).position==="static"}function rT(t,e){if(!la(t)||Ci(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ma(t)===n&&(n=n.ownerDocument.body),n}function X4(t,e){const n=Ss(t);if(Uy(t))return n;if(!la(t)){let i=jl(t);for(;i&&!Ld(i);){if(Ei(i)&&!y_(i))return i;i=jl(i)}return n}let r=rT(t,e);for(;r&&aK(r)&&y_(r);)r=rT(r,e);return r&&Ld(r)&&y_(r)&&!hN(r)?n:r||oK(t)||n}const yK=async function(t){const e=this.getOffsetParent||X4,n=this.getDimensions,r=await n(t.floating);return{reference:xK(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function _K(t){return Ci(t).direction==="rtl"}const wK={convertOffsetParentRelativeRectToViewportRelativeRect:uK,getDocumentElement:ma,getClippingRect:gK,getOffsetParent:X4,getElementRects:yK,getClientRects:dK,getDimensions:vK,getScale:hd,isElement:Ei,isRTL:_K};function bK(t,e){let n=null,r;const i=ma(t);function a(){var c;clearTimeout(r),(c=n)==null||c.disconnect(),n=null}function o(c,u){c===void 0&&(c=!1),u===void 0&&(u=1),a();const{left:h,top:f,width:p,height:v}=t.getBoundingClientRect();if(c||e(),!p||!v)return;const _=Ig(f),b=Ig(i.clientWidth-(h+p)),N=Ig(i.clientHeight-(f+v)),S=Ig(h),y={rootMargin:-_+"px "+-b+"px "+-N+"px "+-S+"px",threshold:ys(0,_l(1,u))||1};let C=!0;function R(M){const B=M[0].intersectionRatio;if(B!==u){if(!C)return o();B?o(!1,B):r=setTimeout(()=>{o(!1,1e-7)},1e3)}C=!1}try{n=new IntersectionObserver(R,{...y,root:i.ownerDocument})}catch{n=new IntersectionObserver(R,y)}n.observe(t)}return o(!0),a}function jK(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,h=mN(t),f=i||a?[...h?wm(h):[],...wm(e)]:[];f.forEach(w=>{i&&w.addEventListener("scroll",n,{passive:!0}),a&&w.addEventListener("resize",n)});const p=h&&c?bK(h,n):null;let v=-1,_=null;o&&(_=new ResizeObserver(w=>{let[y]=w;y&&y.target===h&&_&&(_.unobserve(e),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var C;(C=_)==null||C.observe(e)})),n()}),h&&!u&&_.observe(h),_.observe(e));let b,N=u?Oc(t):null;u&&S();function S(){const w=Oc(t);N&&(w.x!==N.x||w.y!==N.y||w.width!==N.width||w.height!==N.height)&&n(),N=w,b=requestAnimationFrame(S)}return n(),()=>{var w;f.forEach(y=>{i&&y.removeEventListener("scroll",n),a&&y.removeEventListener("resize",n)}),p==null||p(),(w=_)==null||w.disconnect(),_=null,u&&cancelAnimationFrame(b)}}const NK=nK,SK=rK,EK=JZ,CK=iK,TK=eK,sT=XZ,kK=sK,PK=(t,e,n)=>{const r=new Map,i={platform:wK,...n},a={...i.platform,_c:r};return QZ(t,e,{...i,platform:a})};var hv=typeof document<"u"?x.useLayoutEffect:x.useEffect;function yx(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!yx(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const a=i[r];if(!(a==="_owner"&&t.$$typeof)&&!yx(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function J4(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function iT(t,e){const n=J4(t);return Math.round(e*n)/n}function __(t){const e=x.useRef(t);return hv(()=>{e.current=t}),e}function IK(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:a,floating:o}={},transform:c=!0,whileElementsMounted:u,open:h}=t,[f,p]=x.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[v,_]=x.useState(r);yx(v,r)||_(r);const[b,N]=x.useState(null),[S,w]=x.useState(null),y=x.useCallback(U=>{U!==B.current&&(B.current=U,N(U))},[]),C=x.useCallback(U=>{U!==O.current&&(O.current=U,w(U))},[]),R=a||b,M=o||S,B=x.useRef(null),O=x.useRef(null),D=x.useRef(f),F=u!=null,I=__(u),V=__(i),k=__(h),P=x.useCallback(()=>{if(!B.current||!O.current)return;const U={placement:e,strategy:n,middleware:v};V.current&&(U.platform=V.current),PK(B.current,O.current,U).then(W=>{const H={...W,isPositioned:k.current!==!1};q.current&&!yx(D.current,H)&&(D.current=H,Qd.flushSync(()=>{p(H)}))})},[v,e,n,V,k]);hv(()=>{h===!1&&D.current.isPositioned&&(D.current.isPositioned=!1,p(U=>({...U,isPositioned:!1})))},[h]);const q=x.useRef(!1);hv(()=>(q.current=!0,()=>{q.current=!1}),[]),hv(()=>{if(R&&(B.current=R),M&&(O.current=M),R&&M){if(I.current)return I.current(R,M,P);P()}},[R,M,P,I,F]);const te=x.useMemo(()=>({reference:B,floating:O,setReference:y,setFloating:C}),[y,C]),re=x.useMemo(()=>({reference:R,floating:M}),[R,M]),K=x.useMemo(()=>{const U={position:n,left:0,top:0};if(!re.floating)return U;const W=iT(re.floating,f.x),H=iT(re.floating,f.y);return c?{...U,transform:"translate("+W+"px, "+H+"px)",...J4(re.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:W,top:H}},[n,c,re.floating,f.x,f.y]);return x.useMemo(()=>({...f,update:P,refs:te,elements:re,floatingStyles:K}),[f,P,te,re,K])}const AK=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?sT({element:r.current,padding:i}).fn(n):{}:r?sT({element:r,padding:i}).fn(n):{}}}},RK=(t,e)=>({...NK(t),options:[t,e]}),MK=(t,e)=>({...SK(t),options:[t,e]}),DK=(t,e)=>({...kK(t),options:[t,e]}),OK=(t,e)=>({...EK(t),options:[t,e]}),LK=(t,e)=>({...CK(t),options:[t,e]}),VK=(t,e)=>({...TK(t),options:[t,e]}),FK=(t,e)=>({...AK(t),options:[t,e]});var zK="Arrow",eM=x.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...a}=t;return s.jsx(Ge.svg,{...a,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});eM.displayName=zK;var UK=eM;function $K(t,e=[]){let n=[];function r(a,o){const c=x.createContext(o),u=n.length;n=[...n,o];function h(p){const{scope:v,children:_,...b}=p,N=(v==null?void 0:v[t][u])||c,S=x.useMemo(()=>b,Object.values(b));return s.jsx(N.Provider,{value:S,children:_})}function f(p,v){const _=(v==null?void 0:v[t][u])||c,b=x.useContext(_);if(b)return b;if(o!==void 0)return o;throw new Error(`\`${p}\` must be used within \`${a}\``)}return h.displayName=a+"Provider",[h,f]}const i=()=>{const a=n.map(o=>x.createContext(o));return function(c){const u=(c==null?void 0:c[t])||a;return x.useMemo(()=>({[`__scope${t}`]:{...c,[t]:u}}),[c,u])}};return i.scopeName=t,[r,BK(i,...e)]}function BK(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((c,{useScope:u,scopeName:h})=>{const p=u(a)[`__scope${h}`];return{...c,...p}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function By(t){const[e,n]=x.useState(void 0);return ir(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let o,c;if("borderBoxSize"in a){const u=a.borderBoxSize,h=Array.isArray(u)?u[0]:u;o=h.inlineSize,c=h.blockSize}else o=t.offsetWidth,c=t.offsetHeight;n({width:o,height:c})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var pN="Popper",[tM,ch]=$K(pN),[WK,nM]=tM(pN),rM=t=>{const{__scopePopper:e,children:n}=t,[r,i]=x.useState(null);return s.jsx(WK,{scope:e,anchor:r,onAnchorChange:i,children:n})};rM.displayName=pN;var sM="PopperAnchor",iM=x.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,a=nM(sM,n),o=x.useRef(null),c=vt(e,o);return x.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:s.jsx(Ge.div,{...i,ref:c})});iM.displayName=sM;var gN="PopperContent",[qK,HK]=tM(gN),aM=x.forwardRef((t,e)=>{var de,ne,ve,_e,ye,Se;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:a="center",alignOffset:o=0,arrowPadding:c=0,avoidCollisions:u=!0,collisionBoundary:h=[],collisionPadding:f=0,sticky:p="partial",hideWhenDetached:v=!1,updatePositionStrategy:_="optimized",onPlaced:b,...N}=t,S=nM(gN,n),[w,y]=x.useState(null),C=vt(e,ge=>y(ge)),[R,M]=x.useState(null),B=By(R),O=(B==null?void 0:B.width)??0,D=(B==null?void 0:B.height)??0,F=r+(a!=="center"?"-"+a:""),I=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},V=Array.isArray(h)?h:[h],k=V.length>0,P={padding:I,boundary:V.filter(ZK),altBoundary:k},{refs:q,floatingStyles:te,placement:re,isPositioned:K,middlewareData:U}=IK({strategy:"fixed",placement:F,whileElementsMounted:(...ge)=>jK(...ge,{animationFrame:_==="always"}),elements:{reference:S.anchor},middleware:[RK({mainAxis:i+D,alignmentAxis:o}),u&&MK({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?DK():void 0,...P}),u&&OK({...P}),LK({...P,apply:({elements:ge,rects:Ae,availableWidth:Ke,availableHeight:ce})=>{const{width:Ve,height:G}=Ae.reference,J=ge.floating.style;J.setProperty("--radix-popper-available-width",`${Ke}px`),J.setProperty("--radix-popper-available-height",`${ce}px`),J.setProperty("--radix-popper-anchor-width",`${Ve}px`),J.setProperty("--radix-popper-anchor-height",`${G}px`)}}),R&&FK({element:R,padding:c}),KK({arrowWidth:O,arrowHeight:D}),v&&VK({strategy:"referenceHidden",...P})]}),[W,H]=cM(re),Q=Zn(b);ir(()=>{K&&(Q==null||Q())},[K,Q]);const fe=(de=U.arrow)==null?void 0:de.x,ke=(ne=U.arrow)==null?void 0:ne.y,Ze=((ve=U.arrow)==null?void 0:ve.centerOffset)!==0,[Ye,se]=x.useState();return ir(()=>{w&&se(window.getComputedStyle(w).zIndex)},[w]),s.jsx("div",{ref:q.setFloating,"data-radix-popper-content-wrapper":"",style:{...te,transform:K?te.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ye,"--radix-popper-transform-origin":[(_e=U.transformOrigin)==null?void 0:_e.x,(ye=U.transformOrigin)==null?void 0:ye.y].join(" "),...((Se=U.hide)==null?void 0:Se.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:s.jsx(qK,{scope:n,placedSide:W,onArrowChange:M,arrowX:fe,arrowY:ke,shouldHideArrow:Ze,children:s.jsx(Ge.div,{"data-side":W,"data-align":H,...N,ref:C,style:{...N.style,animation:K?void 0:"none"}})})})});aM.displayName=gN;var oM="PopperArrow",GK={top:"bottom",right:"left",bottom:"top",left:"right"},lM=x.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,a=HK(oM,r),o=GK[a.placedSide];return s.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:s.jsx(UK,{...i,ref:n,style:{...i.style,display:"block"}})})});lM.displayName=oM;function ZK(t){return t!==null}var KK=t=>({name:"transformOrigin",options:t,fn(e){var S,w,y;const{placement:n,rects:r,middlewareData:i}=e,o=((S=i.arrow)==null?void 0:S.centerOffset)!==0,c=o?0:t.arrowWidth,u=o?0:t.arrowHeight,[h,f]=cM(n),p={start:"0%",center:"50%",end:"100%"}[f],v=(((w=i.arrow)==null?void 0:w.x)??0)+c/2,_=(((y=i.arrow)==null?void 0:y.y)??0)+u/2;let b="",N="";return h==="bottom"?(b=o?p:`${v}px`,N=`${-u}px`):h==="top"?(b=o?p:`${v}px`,N=`${r.floating.height+u}px`):h==="right"?(b=`${-u}px`,N=o?p:`${_}px`):h==="left"&&(b=`${r.floating.width+u}px`,N=o?p:`${_}px`),{data:{x:b,y:N}}}});function cM(t){const[e,n="center"]=t.split("-");return[e,n]}var vN=rM,Wy=iM,xN=aM,yN=lM,YK="Portal",vp=x.forwardRef((t,e)=>{var c;const{container:n,...r}=t,[i,a]=x.useState(!1);ir(()=>a(!0),[]);const o=n||i&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return o?$F.createPortal(s.jsx(Ge.div,{...r,ref:e}),o):null});vp.displayName=YK;function QK(t,e){return x.useReducer((n,r)=>e[n][r]??n,t)}var wr=t=>{const{present:e,children:n}=t,r=XK(e),i=typeof n=="function"?n({present:r.isPresent}):x.Children.only(n),a=vt(r.ref,JK(i));return typeof n=="function"||r.isPresent?x.cloneElement(i,{ref:a}):null};wr.displayName="Presence";function XK(t){const[e,n]=x.useState(),r=x.useRef({}),i=x.useRef(t),a=x.useRef("none"),o=t?"mounted":"unmounted",[c,u]=QK(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const h=Ag(r.current);a.current=c==="mounted"?h:"none"},[c]),ir(()=>{const h=r.current,f=i.current;if(f!==t){const v=a.current,_=Ag(h);t?u("MOUNT"):_==="none"||(h==null?void 0:h.display)==="none"?u("UNMOUNT"):u(f&&v!==_?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,u]),ir(()=>{if(e){let h;const f=e.ownerDocument.defaultView??window,p=_=>{const N=Ag(r.current).includes(_.animationName);if(_.target===e&&N&&(u("ANIMATION_END"),!i.current)){const S=e.style.animationFillMode;e.style.animationFillMode="forwards",h=f.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=S)})}},v=_=>{_.target===e&&(a.current=Ag(r.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",p),e.addEventListener("animationend",p),()=>{f.clearTimeout(h),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",p),e.removeEventListener("animationend",p)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:x.useCallback(h=>{h&&(r.current=getComputedStyle(h)),n(h)},[])}}function Ag(t){return(t==null?void 0:t.animationName)||"none"}function JK(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function eY(t,e=[]){let n=[];function r(a,o){const c=x.createContext(o),u=n.length;n=[...n,o];function h(p){const{scope:v,children:_,...b}=p,N=(v==null?void 0:v[t][u])||c,S=x.useMemo(()=>b,Object.values(b));return s.jsx(N.Provider,{value:S,children:_})}function f(p,v){const _=(v==null?void 0:v[t][u])||c,b=x.useContext(_);if(b)return b;if(o!==void 0)return o;throw new Error(`\`${p}\` must be used within \`${a}\``)}return h.displayName=a+"Provider",[h,f]}const i=()=>{const a=n.map(o=>x.createContext(o));return function(c){const u=(c==null?void 0:c[t])||a;return x.useMemo(()=>({[`__scope${t}`]:{...c,[t]:u}}),[c,u])}};return i.scopeName=t,[r,tY(i,...e)]}function tY(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((c,{useScope:u,scopeName:h})=>{const p=u(a)[`__scope${h}`];return{...c,...p}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var w_="rovingFocusGroup.onEntryFocus",nY={bubbles:!1,cancelable:!0},qy="RovingFocusGroup",[w1,uM,rY]=fp(qy),[sY,Hy]=eY(qy,[rY]),[iY,aY]=sY(qy),dM=x.forwardRef((t,e)=>s.jsx(w1.Provider,{scope:t.__scopeRovingFocusGroup,children:s.jsx(w1.Slot,{scope:t.__scopeRovingFocusGroup,children:s.jsx(oY,{...t,ref:e})})}));dM.displayName=qy;var oY=x.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:u,onEntryFocus:h,preventScrollOnEntryFocus:f=!1,...p}=t,v=x.useRef(null),_=vt(e,v),b=Qc(a),[N=null,S]=ks({prop:o,defaultProp:c,onChange:u}),[w,y]=x.useState(!1),C=Zn(h),R=uM(n),M=x.useRef(!1),[B,O]=x.useState(0);return x.useEffect(()=>{const D=v.current;if(D)return D.addEventListener(w_,C),()=>D.removeEventListener(w_,C)},[C]),s.jsx(iY,{scope:n,orientation:r,dir:b,loop:i,currentTabStopId:N,onItemFocus:x.useCallback(D=>S(D),[S]),onItemShiftTab:x.useCallback(()=>y(!0),[]),onFocusableItemAdd:x.useCallback(()=>O(D=>D+1),[]),onFocusableItemRemove:x.useCallback(()=>O(D=>D-1),[]),children:s.jsx(Ge.div,{tabIndex:w||B===0?-1:0,"data-orientation":r,...p,ref:_,style:{outline:"none",...t.style},onMouseDown:Ie(t.onMouseDown,()=>{M.current=!0}),onFocus:Ie(t.onFocus,D=>{const F=!M.current;if(D.target===D.currentTarget&&F&&!w){const I=new CustomEvent(w_,nY);if(D.currentTarget.dispatchEvent(I),!I.defaultPrevented){const V=R().filter(re=>re.focusable),k=V.find(re=>re.active),P=V.find(re=>re.id===N),te=[k,P,...V].filter(Boolean).map(re=>re.ref.current);mM(te,f)}}M.current=!1}),onBlur:Ie(t.onBlur,()=>y(!1))})})}),hM="RovingFocusGroupItem",fM=x.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:a,...o}=t,c=Ns(),u=a||c,h=aY(hM,n),f=h.currentTabStopId===u,p=uM(n),{onFocusableItemAdd:v,onFocusableItemRemove:_}=h;return x.useEffect(()=>{if(r)return v(),()=>_()},[r,v,_]),s.jsx(w1.ItemSlot,{scope:n,id:u,focusable:r,active:i,children:s.jsx(Ge.span,{tabIndex:f?0:-1,"data-orientation":h.orientation,...o,ref:e,onMouseDown:Ie(t.onMouseDown,b=>{r?h.onItemFocus(u):b.preventDefault()}),onFocus:Ie(t.onFocus,()=>h.onItemFocus(u)),onKeyDown:Ie(t.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){h.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const N=uY(b,h.orientation,h.dir);if(N!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let w=p().filter(y=>y.focusable).map(y=>y.ref.current);if(N==="last")w.reverse();else if(N==="prev"||N==="next"){N==="prev"&&w.reverse();const y=w.indexOf(b.currentTarget);w=h.loop?dY(w,y+1):w.slice(y+1)}setTimeout(()=>mM(w))}})})})});fM.displayName=hM;var lY={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function cY(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function uY(t,e,n){const r=cY(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return lY[r]}function mM(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function dY(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var pM=dM,gM=fM,hY=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Cu=new WeakMap,Rg=new WeakMap,Mg={},b_=0,vM=function(t){return t&&(t.host||vM(t.parentNode))},fY=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=vM(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},mY=function(t,e,n,r){var i=fY(e,Array.isArray(t)?t:[t]);Mg[n]||(Mg[n]=new WeakMap);var a=Mg[n],o=[],c=new Set,u=new Set(i),h=function(p){!p||c.has(p)||(c.add(p),h(p.parentNode))};i.forEach(h);var f=function(p){!p||u.has(p)||Array.prototype.forEach.call(p.children,function(v){if(c.has(v))f(v);else try{var _=v.getAttribute(r),b=_!==null&&_!=="false",N=(Cu.get(v)||0)+1,S=(a.get(v)||0)+1;Cu.set(v,N),a.set(v,S),o.push(v),N===1&&b&&Rg.set(v,!0),S===1&&v.setAttribute(n,"true"),b||v.setAttribute(r,"true")}catch(w){console.error("aria-hidden: cannot operate on ",v,w)}})};return f(e),c.clear(),b_++,function(){o.forEach(function(p){var v=Cu.get(p)-1,_=a.get(p)-1;Cu.set(p,v),a.set(p,_),v||(Rg.has(p)||p.removeAttribute(r),Rg.delete(p)),_||p.removeAttribute(n)}),b_--,b_||(Cu=new WeakMap,Cu=new WeakMap,Rg=new WeakMap,Mg={})}},Gy=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=hY(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),mY(r,i,n,"aria-hidden")):function(){return null}},fv="right-scroll-bar-position",mv="width-before-scroll-bar",pY="with-scroll-bars-hidden",gY="--removed-body-scroll-bar-size";function j_(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function vY(t,e){var n=x.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var xY=typeof window<"u"?x.useLayoutEffect:x.useEffect,aT=new WeakMap;function yY(t,e){var n=vY(null,function(r){return t.forEach(function(i){return j_(i,r)})});return xY(function(){var r=aT.get(n);if(r){var i=new Set(r),a=new Set(t),o=n.current;i.forEach(function(c){a.has(c)||j_(c,null)}),a.forEach(function(c){i.has(c)||j_(c,o)})}aT.set(n,t)},[t]),n}function _Y(t){return t}function wY(t,e){e===void 0&&(e=_Y);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(a){var o=e(a,r);return n.push(o),function(){n=n.filter(function(c){return c!==o})}},assignSyncMedium:function(a){for(r=!0;n.length;){var o=n;n=[],o.forEach(a)}n={push:function(c){return a(c)},filter:function(){return n}}},assignMedium:function(a){r=!0;var o=[];if(n.length){var c=n;n=[],c.forEach(a),o=n}var u=function(){var f=o;o=[],f.forEach(a)},h=function(){return Promise.resolve().then(u)};h(),n={push:function(f){o.push(f),h()},filter:function(f){return o=o.filter(f),n}}}};return i}function bY(t){t===void 0&&(t={});var e=wY(null);return e.options=Bi({async:!0,ssr:!1},t),e}var xM=function(t){var e=t.sideCar,n=Ym(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return x.createElement(r,Bi({},n))};xM.isSideCarExport=!0;function jY(t,e){return t.useMedium(e),xM}var yM=bY(),N_=function(){},Zy=x.forwardRef(function(t,e){var n=x.useRef(null),r=x.useState({onScrollCapture:N_,onWheelCapture:N_,onTouchMoveCapture:N_}),i=r[0],a=r[1],o=t.forwardProps,c=t.children,u=t.className,h=t.removeScrollBar,f=t.enabled,p=t.shards,v=t.sideCar,_=t.noIsolation,b=t.inert,N=t.allowPinchZoom,S=t.as,w=S===void 0?"div":S,y=t.gapMode,C=Ym(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),R=v,M=yY([n,e]),B=Bi(Bi({},C),i);return x.createElement(x.Fragment,null,f&&x.createElement(R,{sideCar:yM,removeScrollBar:h,shards:p,noIsolation:_,inert:b,setCallbacks:a,allowPinchZoom:!!N,lockRef:n,gapMode:y}),o?x.cloneElement(x.Children.only(c),Bi(Bi({},B),{ref:M})):x.createElement(w,Bi({},B,{className:u,ref:M}),c))});Zy.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Zy.classNames={fullWidth:mv,zeroRight:fv};var NY=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function SY(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=NY();return e&&t.setAttribute("nonce",e),t}function EY(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function CY(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var TY=function(){var t=0,e=null;return{add:function(n){t==0&&(e=SY())&&(EY(e,n),CY(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},kY=function(){var t=TY();return function(e,n){x.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},_M=function(){var t=kY(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},PY={left:0,top:0,right:0,gap:0},S_=function(t){return parseInt(t||"",10)||0},IY=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[S_(n),S_(r),S_(i)]},AY=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return PY;var e=IY(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},RY=_M(),fd="data-scroll-locked",MY=function(t,e,n,r){var i=t.left,a=t.top,o=t.right,c=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(pY,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(c,"px ").concat(r,`;
  }
  body[`).concat(fd,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(c,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(fv,` {
    right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(mv,` {
    margin-right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(fv," .").concat(fv,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(mv," .").concat(mv,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(fd,`] {
    `).concat(gY,": ").concat(c,`px;
  }
`)},oT=function(){var t=parseInt(document.body.getAttribute(fd)||"0",10);return isFinite(t)?t:0},DY=function(){x.useEffect(function(){return document.body.setAttribute(fd,(oT()+1).toString()),function(){var t=oT()-1;t<=0?document.body.removeAttribute(fd):document.body.setAttribute(fd,t.toString())}},[])},OY=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;DY();var a=x.useMemo(function(){return AY(i)},[i]);return x.createElement(RY,{styles:MY(a,!e,i,n?"":"!important")})},b1=!1;if(typeof window<"u")try{var Dg=Object.defineProperty({},"passive",{get:function(){return b1=!0,!0}});window.addEventListener("test",Dg,Dg),window.removeEventListener("test",Dg,Dg)}catch{b1=!1}var Tu=b1?{passive:!1}:!1,LY=function(t){return t.tagName==="TEXTAREA"},wM=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!LY(t)&&n[e]==="visible")},VY=function(t){return wM(t,"overflowY")},FY=function(t){return wM(t,"overflowX")},lT=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=bM(t,r);if(i){var a=jM(t,r),o=a[1],c=a[2];if(o>c)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},zY=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},UY=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},bM=function(t,e){return t==="v"?VY(e):FY(e)},jM=function(t,e){return t==="v"?zY(e):UY(e)},$Y=function(t,e){return t==="h"&&e==="rtl"?-1:1},BY=function(t,e,n,r,i){var a=$Y(t,window.getComputedStyle(e).direction),o=a*r,c=n.target,u=e.contains(c),h=!1,f=o>0,p=0,v=0;do{var _=jM(t,c),b=_[0],N=_[1],S=_[2],w=N-S-a*b;(b||w)&&bM(t,c)&&(p+=w,v+=b),c instanceof ShadowRoot?c=c.host:c=c.parentNode}while(!u&&c!==document.body||u&&(e.contains(c)||e===c));return(f&&(Math.abs(p)<1||!i)||!f&&(Math.abs(v)<1||!i))&&(h=!0),h},Og=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},cT=function(t){return[t.deltaX,t.deltaY]},uT=function(t){return t&&"current"in t?t.current:t},WY=function(t,e){return t[0]===e[0]&&t[1]===e[1]},qY=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},HY=0,ku=[];function GY(t){var e=x.useRef([]),n=x.useRef([0,0]),r=x.useRef(),i=x.useState(HY++)[0],a=x.useState(_M)[0],o=x.useRef(t);x.useEffect(function(){o.current=t},[t]),x.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var N=yU([t.lockRef.current],(t.shards||[]).map(uT),!0).filter(Boolean);return N.forEach(function(S){return S.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),N.forEach(function(S){return S.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var c=x.useCallback(function(N,S){if("touches"in N&&N.touches.length===2||N.type==="wheel"&&N.ctrlKey)return!o.current.allowPinchZoom;var w=Og(N),y=n.current,C="deltaX"in N?N.deltaX:y[0]-w[0],R="deltaY"in N?N.deltaY:y[1]-w[1],M,B=N.target,O=Math.abs(C)>Math.abs(R)?"h":"v";if("touches"in N&&O==="h"&&B.type==="range")return!1;var D=lT(O,B);if(!D)return!0;if(D?M=O:(M=O==="v"?"h":"v",D=lT(O,B)),!D)return!1;if(!r.current&&"changedTouches"in N&&(C||R)&&(r.current=M),!M)return!0;var F=r.current||M;return BY(F,S,N,F==="h"?C:R,!0)},[]),u=x.useCallback(function(N){var S=N;if(!(!ku.length||ku[ku.length-1]!==a)){var w="deltaY"in S?cT(S):Og(S),y=e.current.filter(function(M){return M.name===S.type&&(M.target===S.target||S.target===M.shadowParent)&&WY(M.delta,w)})[0];if(y&&y.should){S.cancelable&&S.preventDefault();return}if(!y){var C=(o.current.shards||[]).map(uT).filter(Boolean).filter(function(M){return M.contains(S.target)}),R=C.length>0?c(S,C[0]):!o.current.noIsolation;R&&S.cancelable&&S.preventDefault()}}},[]),h=x.useCallback(function(N,S,w,y){var C={name:N,delta:S,target:w,should:y,shadowParent:ZY(w)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(R){return R!==C})},1)},[]),f=x.useCallback(function(N){n.current=Og(N),r.current=void 0},[]),p=x.useCallback(function(N){h(N.type,cT(N),N.target,c(N,t.lockRef.current))},[]),v=x.useCallback(function(N){h(N.type,Og(N),N.target,c(N,t.lockRef.current))},[]);x.useEffect(function(){return ku.push(a),t.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:v}),document.addEventListener("wheel",u,Tu),document.addEventListener("touchmove",u,Tu),document.addEventListener("touchstart",f,Tu),function(){ku=ku.filter(function(N){return N!==a}),document.removeEventListener("wheel",u,Tu),document.removeEventListener("touchmove",u,Tu),document.removeEventListener("touchstart",f,Tu)}},[]);var _=t.removeScrollBar,b=t.inert;return x.createElement(x.Fragment,null,b?x.createElement(a,{styles:qY(i)}):null,_?x.createElement(OY,{gapMode:t.gapMode}):null)}function ZY(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const KY=jY(yM,GY);var xp=x.forwardRef(function(t,e){return x.createElement(Zy,Bi({},t,{ref:e,sideCar:KY}))});xp.classNames=Zy.classNames;var j1=["Enter"," "],YY=["ArrowDown","PageUp","Home"],NM=["ArrowUp","PageDown","End"],QY=[...YY,...NM],XY={ltr:[...j1,"ArrowRight"],rtl:[...j1,"ArrowLeft"]},JY={ltr:["ArrowLeft"],rtl:["ArrowRight"]},yp="Menu",[bm,eQ,tQ]=fp(yp),[Xc,SM]=As(yp,[tQ,ch,Hy]),Ky=ch(),EM=Hy(),[nQ,Jc]=Xc(yp),[rQ,_p]=Xc(yp),CM=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:i,onOpenChange:a,modal:o=!0}=t,c=Ky(e),[u,h]=x.useState(null),f=x.useRef(!1),p=Zn(a),v=Qc(i);return x.useEffect(()=>{const _=()=>{f.current=!0,document.addEventListener("pointerdown",b,{capture:!0,once:!0}),document.addEventListener("pointermove",b,{capture:!0,once:!0})},b=()=>f.current=!1;return document.addEventListener("keydown",_,{capture:!0}),()=>{document.removeEventListener("keydown",_,{capture:!0}),document.removeEventListener("pointerdown",b,{capture:!0}),document.removeEventListener("pointermove",b,{capture:!0})}},[]),s.jsx(vN,{...c,children:s.jsx(nQ,{scope:e,open:n,onOpenChange:p,content:u,onContentChange:h,children:s.jsx(rQ,{scope:e,onClose:x.useCallback(()=>p(!1),[p]),isUsingKeyboardRef:f,dir:v,modal:o,children:r})})})};CM.displayName=yp;var sQ="MenuAnchor",_N=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=Ky(n);return s.jsx(Wy,{...i,...r,ref:e})});_N.displayName=sQ;var wN="MenuPortal",[iQ,TM]=Xc(wN,{forceMount:void 0}),kM=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:i}=t,a=Jc(wN,e);return s.jsx(iQ,{scope:e,forceMount:n,children:s.jsx(wr,{present:n||a.open,children:s.jsx(vp,{asChild:!0,container:i,children:r})})})};kM.displayName=wN;var Ys="MenuContent",[aQ,bN]=Xc(Ys),PM=x.forwardRef((t,e)=>{const n=TM(Ys,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,a=Jc(Ys,t.__scopeMenu),o=_p(Ys,t.__scopeMenu);return s.jsx(bm.Provider,{scope:t.__scopeMenu,children:s.jsx(wr,{present:r||a.open,children:s.jsx(bm.Slot,{scope:t.__scopeMenu,children:o.modal?s.jsx(oQ,{...i,ref:e}):s.jsx(lQ,{...i,ref:e})})})})}),oQ=x.forwardRef((t,e)=>{const n=Jc(Ys,t.__scopeMenu),r=x.useRef(null),i=vt(e,r);return x.useEffect(()=>{const a=r.current;if(a)return Gy(a)},[]),s.jsx(jN,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Ie(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),lQ=x.forwardRef((t,e)=>{const n=Jc(Ys,t.__scopeMenu);return s.jsx(jN,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),jN=x.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:c,onEntryFocus:u,onEscapeKeyDown:h,onPointerDownOutside:f,onFocusOutside:p,onInteractOutside:v,onDismiss:_,disableOutsideScroll:b,...N}=t,S=Jc(Ys,n),w=_p(Ys,n),y=Ky(n),C=EM(n),R=eQ(n),[M,B]=x.useState(null),O=x.useRef(null),D=vt(e,O,S.onContentChange),F=x.useRef(0),I=x.useRef(""),V=x.useRef(0),k=x.useRef(null),P=x.useRef("right"),q=x.useRef(0),te=b?xp:x.Fragment,re=b?{as:ro,allowPinchZoom:!0}:void 0,K=W=>{var de,ne;const H=I.current+W,Q=R().filter(ve=>!ve.disabled),fe=document.activeElement,ke=(de=Q.find(ve=>ve.ref.current===fe))==null?void 0:de.textValue,Ze=Q.map(ve=>ve.textValue),Ye=_Q(Ze,H,ke),se=(ne=Q.find(ve=>ve.textValue===Ye))==null?void 0:ne.ref.current;(function ve(_e){I.current=_e,window.clearTimeout(F.current),_e!==""&&(F.current=window.setTimeout(()=>ve(""),1e3))})(H),se&&setTimeout(()=>se.focus())};x.useEffect(()=>()=>window.clearTimeout(F.current),[]),Fy();const U=x.useCallback(W=>{var Q,fe;return P.current===((Q=k.current)==null?void 0:Q.side)&&bQ(W,(fe=k.current)==null?void 0:fe.area)},[]);return s.jsx(aQ,{scope:n,searchRef:I,onItemEnter:x.useCallback(W=>{U(W)&&W.preventDefault()},[U]),onItemLeave:x.useCallback(W=>{var H;U(W)||((H=O.current)==null||H.focus(),B(null))},[U]),onTriggerLeave:x.useCallback(W=>{U(W)&&W.preventDefault()},[U]),pointerGraceTimerRef:V,onPointerGraceIntentChange:x.useCallback(W=>{k.current=W},[]),children:s.jsx(te,{...re,children:s.jsx(pp,{asChild:!0,trapped:i,onMountAutoFocus:Ie(a,W=>{var H;W.preventDefault(),(H=O.current)==null||H.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:s.jsx(mp,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:h,onPointerDownOutside:f,onFocusOutside:p,onInteractOutside:v,onDismiss:_,children:s.jsx(pM,{asChild:!0,...C,dir:w.dir,orientation:"vertical",loop:r,currentTabStopId:M,onCurrentTabStopIdChange:B,onEntryFocus:Ie(u,W=>{w.isUsingKeyboardRef.current||W.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(xN,{role:"menu","aria-orientation":"vertical","data-state":HM(S.open),"data-radix-menu-content":"",dir:w.dir,...y,...N,ref:D,style:{outline:"none",...N.style},onKeyDown:Ie(N.onKeyDown,W=>{const Q=W.target.closest("[data-radix-menu-content]")===W.currentTarget,fe=W.ctrlKey||W.altKey||W.metaKey,ke=W.key.length===1;Q&&(W.key==="Tab"&&W.preventDefault(),!fe&&ke&&K(W.key));const Ze=O.current;if(W.target!==Ze||!QY.includes(W.key))return;W.preventDefault();const se=R().filter(de=>!de.disabled).map(de=>de.ref.current);NM.includes(W.key)&&se.reverse(),xQ(se)}),onBlur:Ie(t.onBlur,W=>{W.currentTarget.contains(W.target)||(window.clearTimeout(F.current),I.current="")}),onPointerMove:Ie(t.onPointerMove,jm(W=>{const H=W.target,Q=q.current!==W.clientX;if(W.currentTarget.contains(H)&&Q){const fe=W.clientX>q.current?"right":"left";P.current=fe,q.current=W.clientX}}))})})})})})})});PM.displayName=Ys;var cQ="MenuGroup",NN=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return s.jsx(Ge.div,{role:"group",...r,ref:e})});NN.displayName=cQ;var uQ="MenuLabel",IM=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return s.jsx(Ge.div,{...r,ref:e})});IM.displayName=uQ;var _x="MenuItem",dT="menu.itemSelect",Yy=x.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...i}=t,a=x.useRef(null),o=_p(_x,t.__scopeMenu),c=bN(_x,t.__scopeMenu),u=vt(e,a),h=x.useRef(!1),f=()=>{const p=a.current;if(!n&&p){const v=new CustomEvent(dT,{bubbles:!0,cancelable:!0});p.addEventListener(dT,_=>r==null?void 0:r(_),{once:!0}),$4(p,v),v.defaultPrevented?h.current=!1:o.onClose()}};return s.jsx(AM,{...i,ref:u,disabled:n,onClick:Ie(t.onClick,f),onPointerDown:p=>{var v;(v=t.onPointerDown)==null||v.call(t,p),h.current=!0},onPointerUp:Ie(t.onPointerUp,p=>{var v;h.current||(v=p.currentTarget)==null||v.click()}),onKeyDown:Ie(t.onKeyDown,p=>{const v=c.searchRef.current!=="";n||v&&p.key===" "||j1.includes(p.key)&&(p.currentTarget.click(),p.preventDefault())})})});Yy.displayName=_x;var AM=x.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...a}=t,o=bN(_x,n),c=EM(n),u=x.useRef(null),h=vt(e,u),[f,p]=x.useState(!1),[v,_]=x.useState("");return x.useEffect(()=>{const b=u.current;b&&_((b.textContent??"").trim())},[a.children]),s.jsx(bm.ItemSlot,{scope:n,disabled:r,textValue:i??v,children:s.jsx(gM,{asChild:!0,...c,focusable:!r,children:s.jsx(Ge.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:h,onPointerMove:Ie(t.onPointerMove,jm(b=>{r?o.onItemLeave(b):(o.onItemEnter(b),b.defaultPrevented||b.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ie(t.onPointerLeave,jm(b=>o.onItemLeave(b))),onFocus:Ie(t.onFocus,()=>p(!0)),onBlur:Ie(t.onBlur,()=>p(!1))})})})}),dQ="MenuCheckboxItem",RM=x.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...i}=t;return s.jsx(VM,{scope:t.__scopeMenu,checked:n,children:s.jsx(Yy,{role:"menuitemcheckbox","aria-checked":wx(n)?"mixed":n,...i,ref:e,"data-state":EN(n),onSelect:Ie(i.onSelect,()=>r==null?void 0:r(wx(n)?!0:!n),{checkForDefaultPrevented:!1})})})});RM.displayName=dQ;var MM="MenuRadioGroup",[hQ,fQ]=Xc(MM,{value:void 0,onValueChange:()=>{}}),DM=x.forwardRef((t,e)=>{const{value:n,onValueChange:r,...i}=t,a=Zn(r);return s.jsx(hQ,{scope:t.__scopeMenu,value:n,onValueChange:a,children:s.jsx(NN,{...i,ref:e})})});DM.displayName=MM;var OM="MenuRadioItem",LM=x.forwardRef((t,e)=>{const{value:n,...r}=t,i=fQ(OM,t.__scopeMenu),a=n===i.value;return s.jsx(VM,{scope:t.__scopeMenu,checked:a,children:s.jsx(Yy,{role:"menuitemradio","aria-checked":a,...r,ref:e,"data-state":EN(a),onSelect:Ie(r.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,n)},{checkForDefaultPrevented:!1})})})});LM.displayName=OM;var SN="MenuItemIndicator",[VM,mQ]=Xc(SN,{checked:!1}),FM=x.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...i}=t,a=mQ(SN,n);return s.jsx(wr,{present:r||wx(a.checked)||a.checked===!0,children:s.jsx(Ge.span,{...i,ref:e,"data-state":EN(a.checked)})})});FM.displayName=SN;var pQ="MenuSeparator",zM=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return s.jsx(Ge.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});zM.displayName=pQ;var gQ="MenuArrow",UM=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=Ky(n);return s.jsx(yN,{...i,...r,ref:e})});UM.displayName=gQ;var vQ="MenuSub",[uce,$M]=Xc(vQ),_f="MenuSubTrigger",BM=x.forwardRef((t,e)=>{const n=Jc(_f,t.__scopeMenu),r=_p(_f,t.__scopeMenu),i=$M(_f,t.__scopeMenu),a=bN(_f,t.__scopeMenu),o=x.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:u}=a,h={__scopeMenu:t.__scopeMenu},f=x.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return x.useEffect(()=>f,[f]),x.useEffect(()=>{const p=c.current;return()=>{window.clearTimeout(p),u(null)}},[c,u]),s.jsx(_N,{asChild:!0,...h,children:s.jsx(AM,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":HM(n.open),...t,ref:Ly(e,i.onTriggerChange),onClick:p=>{var v;(v=t.onClick)==null||v.call(t,p),!(t.disabled||p.defaultPrevented)&&(p.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Ie(t.onPointerMove,jm(p=>{a.onItemEnter(p),!p.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100))})),onPointerLeave:Ie(t.onPointerLeave,jm(p=>{var _,b;f();const v=(_=n.content)==null?void 0:_.getBoundingClientRect();if(v){const N=(b=n.content)==null?void 0:b.dataset.side,S=N==="right",w=S?-5:5,y=v[S?"left":"right"],C=v[S?"right":"left"];a.onPointerGraceIntentChange({area:[{x:p.clientX+w,y:p.clientY},{x:y,y:v.top},{x:C,y:v.top},{x:C,y:v.bottom},{x:y,y:v.bottom}],side:N}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(p),p.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:Ie(t.onKeyDown,p=>{var _;const v=a.searchRef.current!=="";t.disabled||v&&p.key===" "||XY[r.dir].includes(p.key)&&(n.onOpenChange(!0),(_=n.content)==null||_.focus(),p.preventDefault())})})})});BM.displayName=_f;var WM="MenuSubContent",qM=x.forwardRef((t,e)=>{const n=TM(Ys,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,a=Jc(Ys,t.__scopeMenu),o=_p(Ys,t.__scopeMenu),c=$M(WM,t.__scopeMenu),u=x.useRef(null),h=vt(e,u);return s.jsx(bm.Provider,{scope:t.__scopeMenu,children:s.jsx(wr,{present:r||a.open,children:s.jsx(bm.Slot,{scope:t.__scopeMenu,children:s.jsx(jN,{id:c.contentId,"aria-labelledby":c.triggerId,...i,ref:h,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var p;o.isUsingKeyboardRef.current&&((p=u.current)==null||p.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:Ie(t.onFocusOutside,f=>{f.target!==c.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:Ie(t.onEscapeKeyDown,f=>{o.onClose(),f.preventDefault()}),onKeyDown:Ie(t.onKeyDown,f=>{var _;const p=f.currentTarget.contains(f.target),v=JY[o.dir].includes(f.key);p&&v&&(a.onOpenChange(!1),(_=c.trigger)==null||_.focus(),f.preventDefault())})})})})})});qM.displayName=WM;function HM(t){return t?"open":"closed"}function wx(t){return t==="indeterminate"}function EN(t){return wx(t)?"indeterminate":t?"checked":"unchecked"}function xQ(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function yQ(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function _Q(t,e,n){const i=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let o=yQ(t,Math.max(a,0));i.length===1&&(o=o.filter(h=>h!==n));const u=o.find(h=>h.toLowerCase().startsWith(i.toLowerCase()));return u!==n?u:void 0}function wQ(t,e){const{x:n,y:r}=t;let i=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const c=e[a].x,u=e[a].y,h=e[o].x,f=e[o].y;u>r!=f>r&&n<(h-c)*(r-u)/(f-u)+c&&(i=!i)}return i}function bQ(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return wQ(n,e)}function jm(t){return e=>e.pointerType==="mouse"?t(e):void 0}var jQ=CM,NQ=_N,SQ=kM,EQ=PM,CQ=NN,TQ=IM,kQ=Yy,PQ=RM,IQ=DM,AQ=LM,RQ=FM,MQ=zM,DQ=UM,OQ=BM,LQ=qM,CN="DropdownMenu",[VQ,dce]=As(CN,[SM]),Qr=SM(),[FQ,GM]=VQ(CN),ZM=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:i,defaultOpen:a,onOpenChange:o,modal:c=!0}=t,u=Qr(e),h=x.useRef(null),[f=!1,p]=ks({prop:i,defaultProp:a,onChange:o});return s.jsx(FQ,{scope:e,triggerId:Ns(),triggerRef:h,contentId:Ns(),open:f,onOpenChange:p,onOpenToggle:x.useCallback(()=>p(v=>!v),[p]),modal:c,children:s.jsx(jQ,{...u,open:f,onOpenChange:p,dir:r,modal:c,children:n})})};ZM.displayName=CN;var KM="DropdownMenuTrigger",YM=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=t,a=GM(KM,n),o=Qr(n);return s.jsx(NQ,{asChild:!0,...o,children:s.jsx(Ge.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:Ly(e,a.triggerRef),onPointerDown:Ie(t.onPointerDown,c=>{!r&&c.button===0&&c.ctrlKey===!1&&(a.onOpenToggle(),a.open||c.preventDefault())}),onKeyDown:Ie(t.onKeyDown,c=>{r||(["Enter"," "].includes(c.key)&&a.onOpenToggle(),c.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});YM.displayName=KM;var zQ="DropdownMenuPortal",QM=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Qr(e);return s.jsx(SQ,{...r,...n})};QM.displayName=zQ;var XM="DropdownMenuContent",JM=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=GM(XM,n),a=Qr(n),o=x.useRef(!1);return s.jsx(EQ,{id:i.contentId,"aria-labelledby":i.triggerId,...a,...r,ref:e,onCloseAutoFocus:Ie(t.onCloseAutoFocus,c=>{var u;o.current||(u=i.triggerRef.current)==null||u.focus(),o.current=!1,c.preventDefault()}),onInteractOutside:Ie(t.onInteractOutside,c=>{const u=c.detail.originalEvent,h=u.button===0&&u.ctrlKey===!0,f=u.button===2||h;(!i.modal||f)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});JM.displayName=XM;var UQ="DropdownMenuGroup",$Q=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qr(n);return s.jsx(CQ,{...i,...r,ref:e})});$Q.displayName=UQ;var BQ="DropdownMenuLabel",eD=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qr(n);return s.jsx(TQ,{...i,...r,ref:e})});eD.displayName=BQ;var WQ="DropdownMenuItem",tD=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qr(n);return s.jsx(kQ,{...i,...r,ref:e})});tD.displayName=WQ;var qQ="DropdownMenuCheckboxItem",nD=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qr(n);return s.jsx(PQ,{...i,...r,ref:e})});nD.displayName=qQ;var HQ="DropdownMenuRadioGroup",GQ=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qr(n);return s.jsx(IQ,{...i,...r,ref:e})});GQ.displayName=HQ;var ZQ="DropdownMenuRadioItem",rD=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qr(n);return s.jsx(AQ,{...i,...r,ref:e})});rD.displayName=ZQ;var KQ="DropdownMenuItemIndicator",sD=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qr(n);return s.jsx(RQ,{...i,...r,ref:e})});sD.displayName=KQ;var YQ="DropdownMenuSeparator",iD=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qr(n);return s.jsx(MQ,{...i,...r,ref:e})});iD.displayName=YQ;var QQ="DropdownMenuArrow",XQ=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qr(n);return s.jsx(DQ,{...i,...r,ref:e})});XQ.displayName=QQ;var JQ="DropdownMenuSubTrigger",aD=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qr(n);return s.jsx(OQ,{...i,...r,ref:e})});aD.displayName=JQ;var eX="DropdownMenuSubContent",oD=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qr(n);return s.jsx(LQ,{...i,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});oD.displayName=eX;var tX=ZM,nX=YM,rX=QM,lD=JM,cD=eD,uD=tD,dD=nD,hD=rD,fD=sD,mD=iD,pD=aD,gD=oD;function Ml(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var sX=["color"],iX=x.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Ml(t,sX);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),x.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),aX=["color"],TN=x.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Ml(t,aX);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),x.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),oX=["color"],vD=x.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Ml(t,oX);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),x.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),lX=["color"],cX=x.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Ml(t,lX);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),x.createElement("path",{d:"M8.84182 3.13514C9.04327 3.32401 9.05348 3.64042 8.86462 3.84188L5.43521 7.49991L8.86462 11.1579C9.05348 11.3594 9.04327 11.6758 8.84182 11.8647C8.64036 12.0535 8.32394 12.0433 8.13508 11.8419L4.38508 7.84188C4.20477 7.64955 4.20477 7.35027 4.38508 7.15794L8.13508 3.15794C8.32394 2.95648 8.64036 2.94628 8.84182 3.13514Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),uX=["color"],xD=x.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Ml(t,uX);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),x.createElement("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),dX=["color"],hX=x.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Ml(t,dX);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),x.createElement("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),fX=["color"],mX=x.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Ml(t,fX);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),x.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),pX=["color"],gX=x.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Ml(t,pX);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),x.createElement("path",{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:r}))});const N1=tX,S1=nX,vX=x.forwardRef(({className:t,inset:e,children:n,...r},i)=>s.jsxs(pD,{ref:i,className:Je("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[n,s.jsx(xD,{className:"ml-auto h-4 w-4"})]}));vX.displayName=pD.displayName;const xX=x.forwardRef(({className:t,...e},n)=>s.jsx(gD,{ref:n,className:Je("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));xX.displayName=gD.displayName;const bx=x.forwardRef(({className:t,sideOffset:e=4,...n},r)=>s.jsx(rX,{children:s.jsx(lD,{ref:r,sideOffset:e,className:Je("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));bx.displayName=lD.displayName;const Xt=x.forwardRef(({className:t,inset:e,...n},r)=>s.jsx(uD,{ref:r,className:Je("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));Xt.displayName=uD.displayName;const yX=x.forwardRef(({className:t,children:e,checked:n,...r},i)=>s.jsxs(dD,{ref:i,className:Je("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(fD,{children:s.jsx(TN,{className:"h-4 w-4"})})}),e]}));yX.displayName=dD.displayName;const _X=x.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(hD,{ref:r,className:Je("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(fD,{children:s.jsx(gX,{className:"h-4 w-4 fill-current"})})}),e]}));_X.displayName=hD.displayName;const wX=x.forwardRef(({className:t,inset:e,...n},r)=>s.jsx(cD,{ref:r,className:Je("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));wX.displayName=cD.displayName;const Fi=x.forwardRef(({className:t,...e},n)=>s.jsx(mD,{ref:n,className:Je("-mx-1 my-1 h-px bg-muted",t),...e}));Fi.displayName=mD.displayName;var kN="Avatar",[bX,hce]=As(kN),[jX,yD]=bX(kN),_D=x.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[i,a]=x.useState("idle");return s.jsx(jX,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:s.jsx(Ge.span,{...r,ref:e})})});_D.displayName=kN;var wD="AvatarImage",bD=x.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:i=()=>{},...a}=t,o=yD(wD,n),c=NX(r,a.referrerPolicy),u=Zn(h=>{i(h),o.onImageLoadingStatusChange(h)});return ir(()=>{c!=="idle"&&u(c)},[c,u]),c==="loaded"?s.jsx(Ge.img,{...a,ref:e,src:r}):null});bD.displayName=wD;var jD="AvatarFallback",ND=x.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...i}=t,a=yD(jD,n),[o,c]=x.useState(r===void 0);return x.useEffect(()=>{if(r!==void 0){const u=window.setTimeout(()=>c(!0),r);return()=>window.clearTimeout(u)}},[r]),o&&a.imageLoadingStatus!=="loaded"?s.jsx(Ge.span,{...i,ref:e}):null});ND.displayName=jD;function NX(t,e){const[n,r]=x.useState("idle");return ir(()=>{if(!t){r("error");return}let i=!0;const a=new window.Image,o=c=>()=>{i&&r(c)};return r("loading"),a.onload=o("loaded"),a.onerror=o("error"),a.src=t,e&&(a.referrerPolicy=e),()=>{i=!1}},[t,e]),n}var SD=_D,ED=bD,CD=ND;const ao=x.forwardRef(({className:t,...e},n)=>s.jsx(SD,{ref:n,className:Je("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));ao.displayName=SD.displayName;const oo=x.forwardRef(({className:t,...e},n)=>s.jsx(ED,{ref:n,className:Je("aspect-square h-full w-full",t),...e}));oo.displayName=ED.displayName;const lo=x.forwardRef(({className:t,...e},n)=>s.jsx(CD,{ref:n,className:Je("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));lo.displayName=CD.displayName;const SX=Vy("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function tt({className:t,variant:e,...n}){return s.jsx("div",{className:Je(SX({variant:e}),t),...n})}const EX={BASE_URL:"/StudyMarket/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyDXD6WpZoQNLNU0DAqH1wd3q9Q4vthOWv4",VITE_FIREBASE_APP_ID:"1:603697837611:web:858cf99bb80004d0f25c6e",VITE_FIREBASE_AUTH_DOMAIN:"annonces-app-44d27.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"603697837611",VITE_FIREBASE_PROJECT_ID:"annonces-app-44d27",VITE_FIREBASE_STORAGE_BUCKET:"annonces-app-44d27.firebasestorage.app"},hT=t=>{let e;const n=new Set,r=(f,p)=>{const v=typeof f=="function"?f(e):f;if(!Object.is(v,e)){const _=e;e=p??(typeof v!="object"||v===null)?v:Object.assign({},e,v),n.forEach(b=>b(e,_))}},i=()=>e,u={setState:r,getState:i,getInitialState:()=>h,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{(EX?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},h=e=t(r,i,u);return u},CX=t=>t?hT(t):hT;var TD={exports:{}},kD={},PD={exports:{}},ID={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vd=x;function TX(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var kX=typeof Object.is=="function"?Object.is:TX,PX=Vd.useState,IX=Vd.useEffect,AX=Vd.useLayoutEffect,RX=Vd.useDebugValue;function MX(t,e){var n=e(),r=PX({inst:{value:n,getSnapshot:e}}),i=r[0].inst,a=r[1];return AX(function(){i.value=n,i.getSnapshot=e,E_(i)&&a({inst:i})},[t,n,e]),IX(function(){return E_(i)&&a({inst:i}),t(function(){E_(i)&&a({inst:i})})},[t]),RX(n),n}function E_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!kX(t,n)}catch{return!0}}function DX(t,e){return e()}var OX=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?DX:MX;ID.useSyncExternalStore=Vd.useSyncExternalStore!==void 0?Vd.useSyncExternalStore:OX;PD.exports=ID;var LX=PD.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qy=x,VX=LX;function FX(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var zX=typeof Object.is=="function"?Object.is:FX,UX=VX.useSyncExternalStore,$X=Qy.useRef,BX=Qy.useEffect,WX=Qy.useMemo,qX=Qy.useDebugValue;kD.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var a=$X(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=WX(function(){function u(_){if(!h){if(h=!0,f=_,_=r(_),i!==void 0&&o.hasValue){var b=o.value;if(i(b,_))return p=b}return p=_}if(b=p,zX(f,_))return b;var N=r(_);return i!==void 0&&i(b,N)?(f=_,b):(f=_,p=N)}var h=!1,f,p,v=n===void 0?null:n;return[function(){return u(e())},v===null?void 0:function(){return u(v())}]},[e,n,r,i]);var c=UX(t,a[0],a[1]);return BX(function(){o.hasValue=!0,o.value=c},[c]),qX(c),c};TD.exports=kD;var HX=TD.exports;const GX=Um(HX),AD={BASE_URL:"/StudyMarket/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyDXD6WpZoQNLNU0DAqH1wd3q9Q4vthOWv4",VITE_FIREBASE_APP_ID:"1:603697837611:web:858cf99bb80004d0f25c6e",VITE_FIREBASE_AUTH_DOMAIN:"annonces-app-44d27.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"603697837611",VITE_FIREBASE_PROJECT_ID:"annonces-app-44d27",VITE_FIREBASE_STORAGE_BUCKET:"annonces-app-44d27.firebasestorage.app"},{useDebugValue:ZX}=Me,{useSyncExternalStoreWithSelector:KX}=GX;let fT=!1;const YX=t=>t;function QX(t,e=YX,n){(AD?"production":void 0)!=="production"&&n&&!fT&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),fT=!0);const r=KX(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return ZX(r),r}const mT=t=>{(AD?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?CX(t):t,n=(r,i)=>QX(e,r,i);return Object.assign(n,e),n},uh=t=>t?mT(t):mT,Xl=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},XX=(t,e,n)=>{const r=[t,e].sort();return`${r[0]}_${r[1]}_${n}`},JX=async(t,e,n,r,i,a,o)=>{try{if(!t||!t.includes("@")){console.log("No valid email address for notification");return}const c=`${window.location.origin}/messages?conversation=${o}`,u=await fetch("/api/send-message-notification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recipientEmail:t,recipientName:e,senderName:n,senderUniversity:r,listingTitle:i,messagePreview:a,conversationUrl:c})});u.ok?console.log("Email notification sent successfully"):console.error("Failed to send email notification:",await u.text())}catch(c){console.error("Error sending email notification:",c)}},Xy=uh((t,e)=>({conversations:[],currentConversation:null,messages:[],loading:!1,fetchConversations:n=>{t({loading:!0});const{unsubscribeConversations:r}=e();r&&r();try{const i=cn(Vt(Oe,"conversations"),In("participants","array-contains",n)),a=IC(i,o=>{const c=[];o.docs.forEach(u=>{const h=u.data();h.deletedFor&&h.deletedFor.includes(n)||h.blockedBy&&h.blockedBy.includes(n)||c.push({id:u.id,participants:h.participants||[],listingId:h.listingId||"",listingTitle:h.listingTitle||"",listingImage:h.listingImage,listingPrice:h.listingPrice||0,participantDetails:h.participantDetails||{},lastMessage:h.lastMessage?{...h.lastMessage,sentAt:Xl(h.lastMessage.sentAt)}:void 0,unreadCount:h.unreadCount||{},blockedBy:h.blockedBy||[],deletedFor:h.deletedFor||[],status:h.status||"active",createdAt:Xl(h.createdAt),updatedAt:Xl(h.updatedAt)})}),c.sort((u,h)=>h.updatedAt.getTime()-u.updatedAt.getTime()),t({conversations:c,loading:!1,unsubscribeConversations:a})},o=>{console.error("Error fetching conversations:",o),me.error("Erreur lors du chargement des conversations"),t({loading:!1})})}catch(i){console.error("Error setting up conversations listener:",i),t({loading:!1})}},fetchMessages:n=>{const{unsubscribeMessages:r}=e();r&&r();try{const i=cn(Vt(Oe,"conversations",n,"messages")),a=IC(i,o=>{const c=o.docs.map(u=>{const h=u.data();return{id:u.id,conversationId:n,senderId:h.senderId,senderName:h.senderName,senderAvatar:h.senderAvatar,text:h.text,type:h.type||"text",attachments:h.attachments||[],seen:h.seen||!1,sentAt:Xl(h.sentAt)}});c.sort((u,h)=>u.sentAt.getTime()-h.sentAt.getTime()),t({messages:c,unsubscribeMessages:a})},o=>{console.error("Error fetching messages:",o),me.error("Erreur lors du chargement des messages")})}catch(i){console.error("Error setting up messages listener:",i)}},sendMessage:async(n,r,i,a,o)=>{try{console.log("Sending message:",{conversationId:n,text:r,senderId:i,senderName:a});const c=e().currentConversation;if(!c){console.error("No current conversation");return}if(c.blockedBy&&c.blockedBy.includes(i)){me.error("Vous ne pouvez pas envoyer de message dans cette conversation");return}const u={conversationId:n,senderId:i,senderName:a,senderAvatar:o||null,text:r,type:"text",seen:!1,sentAt:tr()};console.log("Adding message to Firestore:",u);const h=await vl(Vt(Oe,"conversations",n,"messages"),u);console.log("Message added with ID:",h.id);const f=c.participants.filter(v=>v!==i),p={};f.forEach(v=>{p[`unreadCount.${v}`]=(c.unreadCount[v]||0)+1}),console.log("Updating conversation with:",{lastMessage:{text:r,sentAt:tr(),senderId:i,senderName:a},updatedAt:tr(),...p}),await nn(pt(Oe,"conversations",n),{lastMessage:{text:r,sentAt:tr(),senderId:i,senderName:a},updatedAt:tr(),...p}),f.forEach(async v=>{const _=c.participantDetails[v];if(_&&_.email){const b=c.participantDetails[i];await JX(_.email,_.name,a,(b==null?void 0:b.university)||"Université non spécifiée",c.listingTitle,r,n)}}),console.log("Message sent successfully")}catch(c){console.error("Error sending message:",c),me.error("Erreur lors de l'envoi du message")}},createConversation:async(n,r,i,a,o,c,u,h,f)=>{try{console.log("Creating conversation:",{listingId:n,buyerId:o,sellerId:c});const p=XX(o,c,n);console.log("Generated conversation ID:",p);const v=await cs(pt(Oe,"conversations",p));if(v.exists()){console.log("Conversation already exists, sending message");const N=v.data(),S={id:p,participants:N.participants||[],listingId:N.listingId||"",listingTitle:N.listingTitle||"",listingImage:N.listingImage,listingPrice:N.listingPrice||0,participantDetails:N.participantDetails||{},lastMessage:N.lastMessage?{...N.lastMessage,sentAt:Xl(N.lastMessage.sentAt)}:void 0,unreadCount:N.unreadCount||{},blockedBy:N.blockedBy||[],deletedFor:N.deletedFor||[],status:N.status||"active",createdAt:Xl(N.createdAt),updatedAt:Xl(N.updatedAt)};return t({currentConversation:S}),await e().sendMessage(p,f,o,u.displayName,u.photoURL),p}console.log("Creating new conversation");const _={participants:[o,c],listingId:n,listingTitle:r,listingImage:a||null,listingPrice:i,participantDetails:{[o]:{name:u.displayName,avatar:u.photoURL||null,university:u.university,verified:u.isVerified||!1,email:u.email||null},[c]:{name:h.sellerName,avatar:h.sellerAvatar||null,university:h.sellerUniversity,verified:h.sellerVerified||!1,email:h.email||null}},unreadCount:{[o]:0,[c]:1},status:"active",createdAt:tr(),updatedAt:tr()};console.log("Setting conversation document:",_),await Qu(pt(Oe,"conversations",p),_);const b={id:p,participants:[o,c],listingId:n,listingTitle:r,listingImage:a||void 0,listingPrice:i,participantDetails:_.participantDetails,unreadCount:_.unreadCount,status:"active",createdAt:new Date,updatedAt:new Date};return t({currentConversation:b}),console.log("Sending initial message"),await e().sendMessage(p,f,o,u.displayName,u.photoURL),p}catch(p){throw console.error("Error creating conversation:",p),me.error("Erreur lors de la création de la conversation"),p}},markMessagesAsSeen:async(n,r)=>{try{const i=pt(Oe,"conversations",n);await nn(i,{[`unreadCount.${r}`]:0})}catch(i){console.error("Error marking messages as seen:",i)}},setCurrentConversation:n=>{t({currentConversation:n})},blockUser:async(n,r)=>{try{const i=pt(Oe,"conversations",n),a=await cs(i);if(a.exists()){const c=a.data().blockedBy||[];c.includes(r)||(await nn(i,{blockedBy:[...c,r],status:"blocked",updatedAt:tr()}),me.success("Utilisateur bloqué"))}}catch(i){console.error("Error blocking user:",i),me.error("Erreur lors du blocage")}},reportUser:async(n,r,i,a,o)=>{try{const c={reporterId:r,reportedUserId:i,conversationId:n,reason:a,description:o,status:"pending",createdAt:tr()};await vl(Vt(Oe,"reports"),c),me.success("Signalement envoyé")}catch(c){console.error("Error reporting user:",c),me.error("Erreur lors du signalement")}},deleteConversation:async(n,r)=>{try{const i=pt(Oe,"conversations",n),a=await cs(i);if(a.exists()){const o=a.data(),c=o.deletedFor||[];if(!c.includes(r)){const u=[...c,r];u.length===o.participants.length?await Ad(i):await nn(i,{deletedFor:u,updatedAt:tr()}),me.success("Conversation supprimée")}}}catch(i){console.error("Error deleting conversation:",i),me.error("Erreur lors de la suppression")}},findConversationByListing:(n,r)=>{const{conversations:i}=e();return i.find(a=>a.listingId===n&&a.participants.includes(r))||null},cleanup:()=>{const{unsubscribeConversations:n,unsubscribeMessages:r}=e();n&&n(),r&&r(),t({conversations:[],currentConversation:null,messages:[],unsubscribeConversations:void 0,unsubscribeMessages:void 0})}})),eJ={BASE_URL:"/StudyMarket/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyDXD6WpZoQNLNU0DAqH1wd3q9Q4vthOWv4",VITE_FIREBASE_APP_ID:"1:603697837611:web:858cf99bb80004d0f25c6e",VITE_FIREBASE_AUTH_DOMAIN:"annonces-app-44d27.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"603697837611",VITE_FIREBASE_PROJECT_ID:"annonces-app-44d27",VITE_FIREBASE_STORAGE_BUCKET:"annonces-app-44d27.firebasestorage.app"};function tJ(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var a;const o=u=>u===null?null:JSON.parse(u,void 0),c=(a=n.getItem(i))!=null?a:null;return c instanceof Promise?c.then(o):o(c)},setItem:(i,a)=>n.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>n.removeItem(i)}}const Nm=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Nm(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Nm(r)(n)}}}},nJ=(t,e)=>(n,r,i)=>{let a={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:S=>S,version:0,merge:(S,w)=>({...w,...S}),...e},o=!1;const c=new Set,u=new Set;let h;try{h=a.getStorage()}catch{}if(!h)return t((...S)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...S)},r,i);const f=Nm(a.serialize),p=()=>{const S=a.partialize({...r()});let w;const y=f({state:S,version:a.version}).then(C=>h.setItem(a.name,C)).catch(C=>{w=C});if(w)throw w;return y},v=i.setState;i.setState=(S,w)=>{v(S,w),p()};const _=t((...S)=>{n(...S),p()},r,i);let b;const N=()=>{var S;if(!h)return;o=!1,c.forEach(y=>y(r()));const w=((S=a.onRehydrateStorage)==null?void 0:S.call(a,r()))||void 0;return Nm(h.getItem.bind(h))(a.name).then(y=>{if(y)return a.deserialize(y)}).then(y=>{if(y)if(typeof y.version=="number"&&y.version!==a.version){if(a.migrate)return a.migrate(y.state,y.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return y.state}).then(y=>{var C;return b=a.merge(y,(C=r())!=null?C:_),n(b,!0),p()}).then(()=>{w==null||w(b,void 0),o=!0,u.forEach(y=>y(b))}).catch(y=>{w==null||w(void 0,y)})};return i.persist={setOptions:S=>{a={...a,...S},S.getStorage&&(h=S.getStorage())},clearStorage:()=>{h==null||h.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>N(),hasHydrated:()=>o,onHydrate:S=>(c.add(S),()=>{c.delete(S)}),onFinishHydration:S=>(u.add(S),()=>{u.delete(S)})},N(),b||_},rJ=(t,e)=>(n,r,i)=>{let a={storage:tJ(()=>localStorage),partialize:N=>N,version:0,merge:(N,S)=>({...S,...N}),...e},o=!1;const c=new Set,u=new Set;let h=a.storage;if(!h)return t((...N)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...N)},r,i);const f=()=>{const N=a.partialize({...r()});return h.setItem(a.name,{state:N,version:a.version})},p=i.setState;i.setState=(N,S)=>{p(N,S),f()};const v=t((...N)=>{n(...N),f()},r,i);i.getInitialState=()=>v;let _;const b=()=>{var N,S;if(!h)return;o=!1,c.forEach(y=>{var C;return y((C=r())!=null?C:v)});const w=((S=a.onRehydrateStorage)==null?void 0:S.call(a,(N=r())!=null?N:v))||void 0;return Nm(h.getItem.bind(h))(a.name).then(y=>{if(y)if(typeof y.version=="number"&&y.version!==a.version){if(a.migrate)return[!0,a.migrate(y.state,y.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,y.state];return[!1,void 0]}).then(y=>{var C;const[R,M]=y;if(_=a.merge(M,(C=r())!=null?C:v),n(_,!0),R)return f()}).then(()=>{w==null||w(_,void 0),_=r(),o=!0,u.forEach(y=>y(_))}).catch(y=>{w==null||w(void 0,y)})};return i.persist={setOptions:N=>{a={...a,...N},N.storage&&(h=N.storage)},clearStorage:()=>{h==null||h.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>b(),hasHydrated:()=>o,onHydrate:N=>(c.add(N),()=>{c.delete(N)}),onFinishHydration:N=>(u.add(N),()=>{u.delete(N)})},a.skipHydration||b(),_||v},sJ=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((eJ?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),nJ(t,e)):rJ(t,e),iJ=sJ,dh=uh()(iJ((t,e)=>({cart:[],cartTotal:0,addToCart:n=>{const{cart:r}=e(),i=r.find(a=>a.id===n.id);t(i?{cart:r.map(a=>a.id===n.id?{...a,quantity:a.quantity+1}:a),cartTotal:e().cartTotal+n.price}:{cart:[...r,{...n,quantity:1}],cartTotal:e().cartTotal+n.price}),me.success("Article ajouté au panier")},removeFromCart:n=>{const{cart:r}=e(),i=r.find(a=>a.id===n);i&&t({cart:r.filter(a=>a.id!==n),cartTotal:e().cartTotal-i.price*i.quantity})},updateQuantity:(n,r)=>{const{cart:i}=e(),a=i.find(o=>o.id===n);if(a){const o=r-a.quantity;t({cart:i.map(c=>c.id===n?{...c,quantity:r}:c),cartTotal:e().cartTotal+a.price*o})}},clearCart:()=>{t({cart:[],cartTotal:0})},getCartItemCount:()=>e().cart.reduce((n,r)=>n+r.quantity,0)}),{name:"cart-storage",partialize:t=>({cart:t.cart,cartTotal:t.cartTotal})})),aJ=()=>{var y,C;const{currentUser:t,userProfile:e,logout:n}=Tn(),{conversations:r,fetchConversations:i}=Xy(),{getCartItemCount:a}=dh(),{theme:o,setTheme:c}=H8(),u=ar(),[h,f]=x.useState(""),p=Me.useMemo(()=>!t||!r.length?0:r.reduce((R,M)=>{const B=M.unreadCount[t.uid]||0;return R+B},0),[r,t]);x.useEffect(()=>{t&&i(t.uid)},[t,i]);const v=R=>{R.preventDefault(),h.trim()&&u(`/listings?q=${encodeURIComponent(h.trim())}`)},_=async()=>{try{await n(),u("/")}catch(R){console.error("Logout error:",R)}},b=a(),N=localStorage.getItem("pendingUserData"),S=N?JSON.parse(N):{};let w=(e==null?void 0:e.displayName)||S.displayName||"";return!w&&(t!=null&&t.displayName)&&(w=t.displayName),!w&&(t!=null&&t.email)&&(w=t.email.split("@")[0]),w||(w="Utilisateur"),e!=null&&e.university||S.university,((e==null?void 0:e.university)==="Autre université"&&e.otherUniversity||S.university==="Autre université"&&S.otherUniversity)&&(e&&e.otherUniversity||S.otherUniversity),x.useEffect(()=>{N&&(t!=null&&t.emailVerified)},[t,N]),s.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-background/95 backdrop-blur-sm border-b border-border",children:s.jsxs("div",{className:"container mx-auto px-4 h-16 flex items-center justify-between",children:[s.jsxs(De,{to:"/",className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-primary to-secondary rounded-lg flex items-center justify-center",children:s.jsx(rh,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{className:"hidden sm:block",children:[s.jsx("span",{className:"font-bold text-xl bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"StudyMarket"}),s.jsx("div",{className:"text-xs text-muted-foreground -mt-1",children:"Étudiants certifiés"})]})]}),s.jsx("form",{onSubmit:v,className:"flex-1 max-w-lg mx-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(gr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(qe,{type:"text",placeholder:"Rechercher entre étudiants...",value:h,onChange:R=>f(R.target.value),className:"pl-10 w-full"})]})}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("div",{onClick:()=>c(o==="dark"?"light":"dark"),className:"relative cursor-pointer text-foreground hover:text-primary transition-colors","aria-label":"Changer le thème",children:[s.jsx(PG,{className:"h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),s.jsx(jG,{className:"absolute top-0 left-0 h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"})]}),t?s.jsxs(s.Fragment,{children:[s.jsx(Y,{asChild:!0,className:"hidden sm:flex bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90",children:s.jsxs(De,{to:"/create",children:[s.jsx(gc,{className:"w-4 h-4 mr-2"}),"Publier"]})}),s.jsxs("div",{className:"relative hidden sm:block",children:[s.jsx(Y,{variant:"ghost",size:"icon",asChild:!0,children:s.jsx(De,{to:"/cart",children:s.jsx(yl,{className:"w-4 h-4"})})}),b>0&&s.jsx(tt,{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full border-2 border-background",children:b>99?"99+":b})]}),s.jsx(Y,{variant:"ghost",size:"icon",asChild:!0,children:s.jsx(De,{to:"/saved-searches",children:s.jsx(di,{className:"w-4 h-4"})})}),s.jsxs("div",{className:"relative hidden sm:block",children:[s.jsx(Y,{variant:"ghost",size:"icon",asChild:!0,children:s.jsx(De,{to:"/messages",children:s.jsx(fn,{className:"w-4 h-4"})})}),p>0&&s.jsx(tt,{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full border-2 border-background",children:p>99?"99+":p})]}),s.jsxs(N1,{children:[s.jsx(S1,{asChild:!0,children:s.jsxs(Y,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:[s.jsxs(ao,{className:"h-8 w-8",children:[s.jsx(oo,{src:e==null?void 0:e.photoURL}),s.jsx(lo,{children:((C=(y=e==null?void 0:e.displayName)==null?void 0:y[0])==null?void 0:C.toUpperCase())||"U"})]}),(e==null?void 0:e.isVerified)&&s.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full flex items-center justify-center",children:s.jsx(Ft,{className:"w-2 h-2 text-white"})})]})}),s.jsxs(bx,{className:"w-64",align:"end",children:[s.jsx("div",{className:"flex items-center justify-start gap-2 p-2",children:s.jsxs("div",{className:"flex flex-col space-y-1 leading-none",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"font-medium",children:w}),(e==null?void 0:e.isVerified)&&s.jsxs(tt,{variant:"secondary",className:"text-xs bg-green-100 text-green-800",children:[s.jsx(Ft,{className:"w-3 h-3 mr-1"}),"Vérifié"]})]}),e&&s.jsx("div",{children:s.jsx("div",{className:"text-xs text-muted-foreground",children:e.university==="Autre université"?e.otherUniversity:e.university})}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[s.jsx(_i,{className:"w-3 h-3 text-green-600"}),s.jsxs("span",{children:[(e==null?void 0:e.co2Saved)||0," kg CO₂ économisés"]})]})]})}),s.jsx(Fi,{}),s.jsx(Xt,{asChild:!0,children:s.jsxs(De,{to:"/profile",className:"cursor-pointer",children:[s.jsx(Gr,{className:"w-4 h-4 mr-2"}),"Mon profil"]})}),s.jsx(Xt,{asChild:!0,children:s.jsxs(De,{to:"/settings",className:"cursor-pointer",children:[s.jsx(Dy,{className:"w-4 h-4 mr-2"}),"Paramètres"]})}),s.jsx(Fi,{}),s.jsx(Xt,{asChild:!0,children:s.jsxs(De,{to:"/orders",className:"cursor-pointer",children:[s.jsx(gn,{className:"w-4 h-4 mr-2"}),"Mes commandes"]})}),s.jsx(Xt,{asChild:!0,children:s.jsxs(De,{to:"/payments",className:"cursor-pointer",children:[s.jsx(dp,{className:"w-4 h-4 mr-2"}),"Paiements"]})}),s.jsx(Fi,{}),s.jsx(Xt,{asChild:!0,children:s.jsxs(De,{to:"/favorites",className:"cursor-pointer",children:[s.jsx(Br,{className:"w-4 h-4 mr-2"}),"Mes favoris"]})}),s.jsx(Xt,{asChild:!0,children:s.jsxs(De,{to:"/saved-searches",className:"cursor-pointer",children:[s.jsx(iN,{className:"w-4 h-4 mr-2"}),"Alertes sauvegardées"]})}),s.jsx(Fi,{}),s.jsx(Xt,{asChild:!0,children:s.jsxs(De,{to:"/messages",className:"cursor-pointer relative",children:[s.jsx(fn,{className:"w-4 h-4 mr-2"}),"Messages",p>0&&s.jsx(tt,{className:"ml-auto bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1",children:p>99?"99+":p})]})}),s.jsx(Fi,{}),s.jsx(Xt,{asChild:!0,children:s.jsxs(De,{to:"/impact",className:"cursor-pointer",children:[s.jsx(_i,{className:"w-4 h-4 mr-2"}),"Mon impact écologique"]})}),s.jsx(Fi,{}),s.jsx(Xt,{asChild:!0,children:s.jsxs(De,{to:"/help",className:"cursor-pointer",children:[s.jsx(Rn,{className:"w-4 h-4 mr-2"}),"Aide & Support"]})}),s.jsx(Xt,{asChild:!0,children:s.jsxs(De,{to:"/safety",className:"cursor-pointer",children:[s.jsx(Ft,{className:"w-4 h-4 mr-2"}),"Conseils de sécurité"]})}),s.jsx(Fi,{}),s.jsxs(Xt,{onClick:_,className:"cursor-pointer text-destructive",children:[s.jsx(_G,{className:"w-4 h-4 mr-2"}),"Se déconnecter"]})]})]}),s.jsx(Y,{size:"icon",asChild:!0,className:"sm:hidden bg-gradient-to-r from-primary to-secondary",children:s.jsx(De,{to:"/create",children:s.jsx(gc,{className:"w-4 h-4"})})})]}):s.jsxs(s.Fragment,{children:[s.jsx(Y,{variant:"ghost",asChild:!0,children:s.jsx(De,{to:"/auth",children:"Se connecter"})}),s.jsx(Y,{asChild:!0,className:"bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90",children:s.jsx(De,{to:"/auth",children:"Rejoindre"})})]}),s.jsxs(N1,{children:[s.jsx(S1,{asChild:!0,className:"sm:hidden",children:s.jsx(Y,{className:"p-2 text-foreground hover:text-primary transition-colors","aria-label":"Menu",children:s.jsx(bG,{className:"w-5 h-5"})})}),s.jsxs(bx,{className:"w-56",align:"end",children:[s.jsx(Xt,{asChild:!0,children:s.jsx(De,{to:"/listings",className:"cursor-pointer",children:"Toutes les annonces"})}),s.jsx(Xt,{asChild:!0,children:s.jsx(De,{to:"/listings?transactionType=donation",className:"cursor-pointer",children:"Dons entre étudiants"})}),s.jsx(Xt,{asChild:!0,children:s.jsx(De,{to:"/listings?transactionType=exchange",className:"cursor-pointer",children:"Troc & Échanges"})}),s.jsx(Xt,{asChild:!0,children:s.jsx(De,{to:"/listings?category=services",className:"cursor-pointer",children:"Services étudiants"})}),s.jsx(Xt,{asChild:!0,children:s.jsx(De,{to:"/listings?category=housing",className:"cursor-pointer",children:"Logement & Colocation"})}),s.jsx(Xt,{asChild:!0,children:s.jsx(De,{to:"/products",className:"cursor-pointer",children:"Boutique"})}),t&&s.jsxs(s.Fragment,{children:[s.jsx(Fi,{}),s.jsx(Xt,{asChild:!0,children:s.jsxs(De,{to:"/create",className:"cursor-pointer",children:[s.jsx(gc,{className:"w-4 h-4 mr-2"}),"Publier une annonce"]})}),s.jsx(Xt,{asChild:!0,children:s.jsxs(De,{to:"/cart",className:"cursor-pointer relative",children:[s.jsx(yl,{className:"w-4 h-4 mr-2 "}),"Panier",b>0&&s.jsx(tt,{className:"ml-auto bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1 ",children:b})]})}),s.jsx(Xt,{asChild:!0,children:s.jsxs(De,{to:"/messages",className:"cursor-pointer relative",children:[s.jsx(fn,{className:"w-4 h-4 mr-2"}),"Messages",p>0&&s.jsx(tt,{className:"ml-auto bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1",children:p>99?"99+":p})]})}),s.jsx(Xt,{asChild:!0,children:s.jsxs(De,{to:"/favorites",className:"cursor-pointer",children:[s.jsx(Br,{className:"w-4 h-4 mr-2"}),"Mes favoris"]})})]})]})]})]})]})})};function oJ({icon:t,size:e=32,gradientId:n}){return s.jsxs("svg",{width:e,height:e,viewBox:`0 0 ${e} ${e}`,xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:n,x1:"0",y1:"0",x2:"1",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:"#2ECC71"}),s.jsx("stop",{offset:"100%",stopColor:"#4A90E2"})]})}),s.jsx(t,{width:e,height:e,fill:`url(#${n})`})]})}const lJ=()=>s.jsx("footer",{className:"bg-muted/50 border-t border-border mt-auto",children:s.jsxs("div",{className:"container mx-auto px-4 py-12",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(oJ,{icon:rh,gradientId:"gradient-footer",size:32}),s.jsxs("div",{children:[s.jsx("span",{className:"font-bold text-xl bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"StudyMarket"}),s.jsx("div",{className:"text-xs text-muted-foreground -mt-1",children:"Étudiants certifiés"})]})]}),s.jsx("p",{className:"text-muted-foreground text-sm",children:"La première plateforme d'échange entre étudiants vérifiés. Achetez, vendez, donnez et échangez en toute sécurité au sein de votre communauté universitaire."}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsx("a",{href:"https://facebook.com/studymarket",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors",children:s.jsx(hG,{className:"w-5 h-5"})}),s.jsx("a",{href:"https://twitter.com/studymarket",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors",children:s.jsx(AG,{className:"w-5 h-5"})}),s.jsx("a",{href:"https://instagram.com/studymarket",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors",children:s.jsx(vG,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold",children:"Navigation"}),s.jsxs("ul",{className:"space-y-2 text-sm",children:[s.jsx("li",{children:s.jsx(De,{to:"/listings",className:"text-muted-foreground hover:text-primary transition-colors",children:"Toutes les annonces"})}),s.jsx("li",{children:s.jsx(De,{to:"/listings?transactionType=donation",className:"text-muted-foreground hover:text-primary transition-colors",children:"Dons entre étudiants"})}),s.jsx("li",{children:s.jsx(De,{to:"/listings?transactionType=exchange",className:"text-muted-foreground hover:text-primary transition-colors",children:"Troc & Échanges"})}),s.jsx("li",{children:s.jsx(De,{to:"/create",className:"text-muted-foreground hover:text-primary transition-colors",children:"Publier une annonce"})}),s.jsx("li",{children:s.jsx(De,{to:"/how-it-works",className:"text-muted-foreground hover:text-primary transition-colors",children:"Comment ça marche"})})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold",children:"Catégories populaires"}),s.jsxs("ul",{className:"space-y-2 text-sm",children:[s.jsx("li",{children:s.jsx(De,{to:"/listings?category=books",className:"text-muted-foreground hover:text-primary transition-colors",children:"Livres & Cours"})}),s.jsx("li",{children:s.jsx(De,{to:"/listings?category=electronics",className:"text-muted-foreground hover:text-primary transition-colors",children:"Électronique"})}),s.jsx("li",{children:s.jsx(De,{to:"/listings?category=housing",className:"text-muted-foreground hover:text-primary transition-colors",children:"Logement & Colocation"})}),s.jsx("li",{children:s.jsx(De,{to:"/listings?category=services",className:"text-muted-foreground hover:text-primary transition-colors",children:"Services étudiants"})}),s.jsx("li",{children:s.jsx(De,{to:"/listings?category=jobs",className:"text-muted-foreground hover:text-primary transition-colors",children:"Jobs & Stages"})})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold",children:"Sécurité & Confiance"}),s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[s.jsx(Ft,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{children:"Étudiants 100% vérifiés"})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[s.jsx(_i,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{children:"Impact écologique mesuré"})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[s.jsx(us,{className:"w-4 h-4"}),s.jsx("span",{children:"support@studymarket.fr"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(De,{to:"/safety",className:"block text-muted-foreground hover:text-primary transition-colors text-sm",children:"Conseils de sécurité"}),s.jsx(De,{to:"/verification",className:"block text-muted-foreground hover:text-primary transition-colors text-sm",children:"Processus de vérification"}),s.jsx(De,{to:"/community-guidelines",className:"block text-muted-foreground hover:text-primary transition-colors text-sm",children:"Règles de la communauté"}),s.jsx(De,{to:"/help",className:"block text-muted-foreground hover:text-primary transition-colors text-sm",children:"Centre d'aide"})]})]})]}),s.jsxs("div",{className:"border-t border-border mt-8 pt-8 flex flex-col sm:flex-row justify-between items-center",children:[s.jsx("p",{className:"text-muted-foreground text-sm",children:"© 2024 StudyMarket. Tous droits réservés. Plateforme dédiée aux étudiants vérifiés."}),s.jsxs("div",{className:"flex space-x-6 mt-4 sm:mt-0",children:[s.jsx(De,{to:"/terms",className:"text-muted-foreground hover:text-primary transition-colors text-sm",children:"Conditions d'utilisation"}),s.jsx(De,{to:"/privacy",className:"text-muted-foreground hover:text-primary transition-colors text-sm",children:"Politique de confidentialité"}),s.jsx(De,{to:"/cookies",className:"text-muted-foreground hover:text-primary transition-colors text-sm",children:"Cookies"}),s.jsxs("a",{href:"mailto:support@studymarket.fr",className:"text-muted-foreground hover:text-primary transition-colors text-sm flex items-center gap-1",children:[s.jsx(ss,{className:"w-3 h-3"}),"Contact"]})]})]})]})}),le=x.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:Je("rounded-xl border bg-card text-card-foreground shadow",t),...e}));le.displayName="Card";const We=x.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:Je("flex flex-col space-y-1.5 p-6",t),...e}));We.displayName="CardHeader";const He=x.forwardRef(({className:t,...e},n)=>s.jsx("h3",{ref:n,className:Je("font-semibold leading-none tracking-tight",t),...e}));He.displayName="CardTitle";const Pt=x.forwardRef(({className:t,...e},n)=>s.jsx("p",{ref:n,className:Je("text-sm text-muted-foreground",t),...e}));Pt.displayName="CardDescription";const ue=x.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:Je("p-6 pt-0",t),...e}));ue.displayName="CardContent";const RD=x.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:Je("flex items-center p-6 pt-0",t),...e}));RD.displayName="CardFooter";const jx=t=>{if(t==null)return null;if(Array.isArray(t))return t.map(jx).filter(e=>e!==void 0);if(typeof t=="object"&&t!==null){const e={};return Object.keys(t).forEach(n=>{const r=jx(t[n]);r!==void 0&&(e[n]=r)}),e}return t},pT=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch(e){return console.warn("Error converting timestamp:",e),new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},C_=t=>{var n,r,i,a,o,c;const e=t.data();return{id:t.id,...e,createdAt:pT(e.createdAt),updatedAt:pT(e.updatedAt),title:e.title||"Sans titre",description:e.description||"",price:e.price||0,currency:e.currency||"EUR",category:e.category||"electronics",condition:e.condition||"good",images:e.images||[],tags:e.tags||[],location:{city:((n=e.location)==null?void 0:n.city)||"Paris",state:((r=e.location)==null?void 0:r.state)||"Île-de-France",country:((i=e.location)==null?void 0:i.country)||"France",campus:((a=e.location)==null?void 0:a.campus)||null,university:((o=e.location)==null?void 0:o.university)||null,coordinates:((c=e.location)==null?void 0:c.coordinates)||null},transactionType:e.transactionType||"sale",sellerId:e.sellerId||"",sellerName:e.sellerName||"Utilisateur",sellerAvatar:e.sellerAvatar||null,sellerUniversity:e.sellerUniversity||"Université non spécifiée",sellerVerified:e.sellerVerified||!1,status:e.status||"active",views:e.views||0,likes:e.likes||0,saves:e.saves||0,reportCount:e.reportCount||0,moderationStatus:e.moderationStatus||"approved"}},wp=uh((t,e)=>({listings:[],featuredListings:[],currentListing:null,loading:!1,hasMore:!0,lastDoc:null,fetchListings:async(n={},r=!1)=>{const{listings:i,lastDoc:a}=e();if(!(!r&&!a)){t({loading:!0});try{let o=cn(Vt(Oe,"listings"),TC("createdAt","desc"),Zs(20));!r&&a&&(o=cn(o,Aq(a)));const c=await An(o);let u=c.docs.map(C_);if(n.category&&n.category!=="all"&&(u=u.filter(f=>f.category===n.category)),n.minPrice!==void 0&&(u=u.filter(f=>f.price>=n.minPrice)),n.maxPrice!==void 0&&(u=u.filter(f=>f.price<=n.maxPrice)),n.query){const f=n.query.toLowerCase();u=u.filter(p=>{var v;return p.title.toLowerCase().includes(f)||p.description.toLowerCase().includes(f)||((v=p.tags)==null?void 0:v.some(_=>_.toLowerCase().includes(f)))})}if(n.condition&&n.condition.length>0&&(u=u.filter(f=>n.condition.includes(f.condition))),n.sortBy)switch(n.sortBy){case"price-asc":u.sort((f,p)=>f.price-p.price);break;case"price-desc":u.sort((f,p)=>p.price-f.price);break;case"date":default:u.sort((f,p)=>new Date(p.createdAt).getTime()-new Date(f.createdAt).getTime());break}const h=c.docs[c.docs.length-1];t({listings:r?u:[...i,...u],lastDoc:h,hasMore:c.docs.length===20,loading:!1})}catch(o){console.error("Error fetching listings:",o),me.error("Erreur lors du chargement des annonces"),t({loading:!1})}}},fetchFeaturedListings:async()=>{try{console.log("🔍 Fetching featured listings...");const n=cn(Vt(Oe,"listings"),TC("createdAt","desc"),Zs(6)),r=await An(n);console.log(`📊 Found ${r.docs.length} documents`);const i=r.docs.map((a,o)=>{try{console.log(`🔄 Processing document ${o+1}:`,a.id);const c=C_(a);return console.log(`✅ Successfully converted listing: ${c.title}`),c}catch(c){return console.error(`❌ Error converting document ${a.id}:`,c),{id:a.id,title:"Annonce non disponible",description:"Cette annonce ne peut pas être affichée pour le moment.",price:0,currency:"EUR",category:"electronics",condition:"good",images:[],tags:[],location:{city:"Paris",state:"Île-de-France",country:"France",campus:null,university:null,coordinates:null},transactionType:"sale",sellerId:"",sellerName:"Utilisateur",sellerAvatar:null,sellerUniversity:"Université non spécifiée",sellerVerified:!1,status:"active",views:0,likes:0,saves:0,reportCount:0,moderationStatus:"approved",createdAt:new Date,updatedAt:new Date}}});console.log(`🎉 Successfully processed ${i.length} featured listings`),t({featuredListings:i})}catch(n){console.error("❌ Error fetching featured listings:",n),t({featuredListings:[]})}},fetchListingById:async n=>{t({loading:!0});try{const r=pt(Oe,"listings",n),i=await cs(r);if(i.exists()){const a=C_(i);await nn(r,{views:(a.views||0)+1}),t({currentListing:a,loading:!1})}else t({currentListing:null,loading:!1}),me.error("Annonce introuvable")}catch(r){console.error("Error fetching listing:",r),me.error("Erreur lors du chargement de l'annonce"),t({currentListing:null,loading:!1})}},createListing:async n=>{var r,i,a,o,c,u;try{const h=jx({...n,views:0,likes:0,saves:0,reportCount:0,moderationStatus:"approved",status:"active",createdAt:new Date,updatedAt:new Date,location:{city:((r=n.location)==null?void 0:r.city)||"Paris",state:((i=n.location)==null?void 0:i.state)||"Île-de-France",country:((a=n.location)==null?void 0:a.country)||"France",campus:((o=n.location)==null?void 0:o.campus)||null,university:((c=n.location)==null?void 0:c.university)||null,coordinates:((u=n.location)==null?void 0:u.coordinates)||null},currency:n.currency||"EUR",images:n.images||[],tags:n.tags||[],condition:n.condition||"good",transactionType:n.transactionType||"sale"});console.log("Creating listing with data:",h);const f=await vl(Vt(Oe,"listings"),h);return me.success("Annonce créée avec succès !"),f.id}catch(h){throw console.error("Error creating listing:",h),me.error("Erreur lors de la création de l'annonce"),h}},updateListing:async(n,r)=>{try{const i=pt(Oe,"listings",n),a=jx({...r,updatedAt:new Date});await nn(i,a);const{listings:o,currentListing:c}=e(),u=o.map(h=>h.id===n?{...h,...r}:h);t({listings:u,currentListing:(c==null?void 0:c.id)===n?{...c,...r}:c}),me.success("Annonce mise à jour !")}catch(i){throw console.error("Error updating listing:",i),me.error("Erreur lors de la mise à jour"),i}},deleteListing:async n=>{try{await Ad(pt(Oe,"listings",n));const{listings:r}=e(),i=r.filter(a=>a.id!==n);t({listings:i}),me.success("Annonce supprimée !")}catch(r){throw console.error("Error deleting listing:",r),me.error("Erreur lors de la suppression"),r}},searchListings:async n=>{await e().fetchListings(n,!0)},clearListings:()=>{t({listings:[],lastDoc:null,hasMore:!0,currentListing:null})}})),gT=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},MD=uh((t,e)=>({favorites:[],userFavoriteIds:new Set,loading:!1,fetchUserFavorites:async n=>{if(n){t({loading:!0});try{const r=cn(Vt(Oe,"favorites"),In("userId","==",n),Zs(100)),i=await An(r),a=[],o=new Set;i.forEach(c=>{const u=c.data(),h={id:c.id,...u,createdAt:gT(u.createdAt),updatedAt:gT(u.updatedAt)};a.push(h),o.add(h.listingId)}),a.sort((c,u)=>u.createdAt.getTime()-c.createdAt.getTime()),t({favorites:a,userFavoriteIds:o,loading:!1})}catch(r){console.error("Erreur lors du chargement des favoris:",r),me.error("Erreur lors du chargement des favoris"),t({loading:!1})}}},addToFavorites:async(n,r)=>{var i;if(!(!n||!r))try{if(e().userFavoriteIds.has(r.id)){me.info("Déjà dans vos favoris");return}const a={userId:n,listingId:r.id,listingTitle:r.title,listingPrice:r.price,listingImage:((i=r.images)==null?void 0:i[0])||null,listingCategory:r.category,listingTransactionType:r.transactionType,sellerName:r.sellerName,sellerUniversity:r.sellerUniversity,notes:"",tags:r.tags||[],createdAt:tr(),updatedAt:tr()},c={id:(await vl(Vt(Oe,"favorites"),a)).id,...a,createdAt:new Date,updatedAt:new Date},{favorites:u,userFavoriteIds:h}=e(),f=new Set(h);f.add(r.id),t({favorites:[c,...u],userFavoriteIds:f});try{await nn(pt(Oe,"listings",r.id),{likes:(r.likes||0)+1})}catch(p){console.error("Erreur lors de la mise à jour du compteur de likes:",p)}me.success("Ajouté aux favoris ❤️")}catch(a){console.error("Erreur lors de l'ajout aux favoris:",a),me.error("Erreur lors de l'ajout aux favoris")}},removeFromFavorites:async(n,r)=>{if(!(!n||!r))try{const i=cn(Vt(Oe,"favorites"),In("userId","==",n),In("listingId","==",r)),a=await An(i);if(a.empty){me.info("Pas dans vos favoris");return}const o=a.docs[0];await Ad(pt(Oe,"favorites",o.id));const{favorites:c,userFavoriteIds:u}=e(),h=new Set(u);h.delete(r),t({favorites:c.filter(f=>f.listingId!==r),userFavoriteIds:h});try{const f=pt(Oe,"listings",r),p=await An(cn(Vt(Oe,"listings"),In("__name__","==",r)));if(!p.empty){const v=p.docs[0].data().likes||0;await nn(f,{likes:Math.max(0,v-1)})}}catch(f){console.error("Erreur lors de la mise à jour du compteur de likes:",f)}me.success("Retiré des favoris")}catch(i){console.error("Erreur lors de la suppression des favoris:",i),me.error("Erreur lors de la suppression des favoris")}},isFavorite:n=>e().userFavoriteIds.has(n),toggleFavorite:async(n,r)=>{const{isFavorite:i,addToFavorites:a,removeFromFavorites:o}=e();i(r.id)?await o(n,r.id):await a(n,r)},clearFavorites:()=>{t({favorites:[],userFavoriteIds:new Set,loading:!1})}})),DD=({listing:t,size:e="default",className:n=""})=>{const{currentUser:r}=Tn(),{isFavorite:i,toggleFavorite:a}=MD(),o=ar(),c=i(t.id),u=f=>{if(f.preventDefault(),f.stopPropagation(),!r){me.error("Connectez-vous pour ajouter aux favoris"),o("/auth");return}a(r.uid,t)},h=()=>{switch(e){case"sm":return"h-8 w-8";case"lg":return"h-10 w-10";default:return"h-9 w-9"}};return s.jsx(Y,{variant:"ghost",size:"icon",onClick:u,className:`${h()} ${c?"text-red-500 hover:text-red-600":"text-blue-500 hover:text-red-500"} ${n}`,"aria-label":c?"Retirer des favoris":"Ajouter aux favoris",children:s.jsx(Br,{className:`w-4 h-4 ${c?"fill-current text-red-500":"stroke-current text-blue-500"}`,strokeWidth:2,fill:c?"currentColor":"none"})})},OD=({listing:t,size:e="default",showText:n=!0,className:r=""})=>{const i=async o=>{o.preventDefault(),o.stopPropagation();const c={title:t.title,text:`Découvrez cette annonce sur StudyMarket: ${t.title}`,url:window.location.href};try{navigator.share?await navigator.share(c):(await navigator.clipboard.writeText(window.location.href),me.success("Lien copié dans le presse-papiers"))}catch(u){console.error("Error sharing:",u)}},a=()=>{switch(e){case"sm":return"h-8 w-8";case"lg":return"h-10 w-10";default:return"h-9 w-9"}};return s.jsx(Y,{variant:"ghost",size:"icon",onClick:i,className:`${a()} ${r}`,"aria-label":"Partager",children:s.jsx(aN,{className:"w-4 h-4"})})};function ft(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function hs(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function Fr(t,e){const n=ft(t);return isNaN(e)?hs(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function Ti(t,e){const n=ft(t);if(isNaN(e))return hs(t,NaN);if(!e)return n;const r=n.getDate(),i=hs(t,n.getTime());i.setMonth(n.getMonth()+e+1,0);const a=i.getDate();return r>=a?i:(n.setFullYear(i.getFullYear(),i.getMonth(),r),n)}const PN=6048e5,cJ=864e5,Lg=43200,vT=1440;let uJ={};function hh(){return uJ}function ca(t,e){var c,u,h,f;const n=hh(),r=(e==null?void 0:e.weekStartsOn)??((u=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((f=(h=n.locale)==null?void 0:h.options)==null?void 0:f.weekStartsOn)??0,i=ft(t),a=i.getDay(),o=(a<r?7:0)+a-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function Lc(t){return ca(t,{weekStartsOn:1})}function LD(t){const e=ft(t),n=e.getFullYear(),r=hs(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=Lc(r),a=hs(t,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const o=Lc(a);return e.getTime()>=i.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function Fd(t){const e=ft(t);return e.setHours(0,0,0,0),e}function zd(t){const e=ft(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Zi(t,e){const n=Fd(t),r=Fd(e),i=+n-zd(n),a=+r-zd(r);return Math.round((i-a)/cJ)}function dJ(t){const e=LD(t),n=hs(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Lc(n)}function E1(t,e){const n=e*7;return Fr(t,n)}function hJ(t,e){return Ti(t,e*12)}function fJ(t){let e;return t.forEach(function(n){const r=ft(n);(e===void 0||e<r||isNaN(Number(r)))&&(e=r)}),e||new Date(NaN)}function mJ(t){let e;return t.forEach(n=>{const r=ft(n);(!e||e>r||isNaN(+r))&&(e=r)}),e||new Date(NaN)}function pv(t,e){const n=ft(t),r=ft(e),i=n.getTime()-r.getTime();return i<0?-1:i>0?1:i}function pJ(t){return hs(t,Date.now())}function is(t,e){const n=Fd(t),r=Fd(e);return+n==+r}function IN(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function gJ(t){if(!IN(t)&&typeof t!="number")return!1;const e=ft(t);return!isNaN(Number(e))}function Ud(t,e){const n=ft(t),r=ft(e),i=n.getFullYear()-r.getFullYear(),a=n.getMonth()-r.getMonth();return i*12+a}function vJ(t,e,n){const r=ca(t,n),i=ca(e,n),a=+r-zd(r),o=+i-zd(i);return Math.round((a-o)/PN)}function xJ(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function yJ(t,e){return+ft(t)-+ft(e)}function _J(t){const e=ft(t);return e.setHours(23,59,59,999),e}function Jy(t){const e=ft(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function wJ(t){const e=ft(t);return+_J(e)==+Jy(e)}function bJ(t,e){const n=ft(t),r=ft(e),i=pv(n,r),a=Math.abs(Ud(n,r));let o;if(a<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-i*a);let c=pv(n,r)===-i;wJ(ft(t))&&a===1&&pv(t,r)===1&&(c=!1),o=i*(a-Number(c))}return o===0?0:o}function jJ(t,e,n){const r=yJ(t,e)/1e3;return xJ(n==null?void 0:n.roundingMethod)(r)}function ds(t){const e=ft(t);return e.setDate(1),e.setHours(0,0,0,0),e}function VD(t){const e=ft(t),n=hs(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function AN(t,e){var c,u,h,f;const n=hh(),r=(e==null?void 0:e.weekStartsOn)??((u=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((f=(h=n.locale)==null?void 0:h.options)==null?void 0:f.weekStartsOn)??0,i=ft(t),a=i.getDay(),o=(a<r?-7:0)+6-(a-r);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function FD(t){return AN(t,{weekStartsOn:1})}const NJ={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},SJ=(t,e,n)=>{let r;const i=NJ[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function md(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const EJ={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},CJ={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},TJ={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},kJ={date:md({formats:EJ,defaultWidth:"full"}),time:md({formats:CJ,defaultWidth:"full"}),dateTime:md({formats:TJ,defaultWidth:"full"})},PJ={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},IJ=(t,e,n,r)=>PJ[t];function Wi(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,c=n!=null&&n.width?String(n.width):o;i=t.formattingValues[c]||t.formattingValues[o]}else{const o=t.defaultWidth,c=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[c]||t.values[o]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const AJ={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},RJ={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},MJ={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},DJ={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},OJ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},LJ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},VJ=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},FJ={ordinalNumber:VJ,era:Wi({values:AJ,defaultWidth:"wide"}),quarter:Wi({values:RJ,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Wi({values:MJ,defaultWidth:"wide"}),day:Wi({values:DJ,defaultWidth:"wide"}),dayPeriod:Wi({values:OJ,defaultWidth:"wide",formattingValues:LJ,defaultFormattingWidth:"wide"})};function qi(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const o=a[0],c=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(c)?UJ(c,p=>p.test(o)):zJ(c,p=>p.test(o));let h;h=t.valueCallback?t.valueCallback(u):u,h=n.valueCallback?n.valueCallback(h):h;const f=e.slice(o.length);return{value:h,rest:f}}}function zJ(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function UJ(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function zD(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],a=e.match(t.parsePattern);if(!a)return null;let o=t.valueCallback?t.valueCallback(a[0]):a[0];o=n.valueCallback?n.valueCallback(o):o;const c=e.slice(i.length);return{value:o,rest:c}}}const $J=/^(\d+)(th|st|nd|rd)?/i,BJ=/\d+/i,WJ={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},qJ={any:[/^b/i,/^(a|c)/i]},HJ={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},GJ={any:[/1/i,/2/i,/3/i,/4/i]},ZJ={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},KJ={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},YJ={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},QJ={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},XJ={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},JJ={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},eee={ordinalNumber:zD({matchPattern:$J,parsePattern:BJ,valueCallback:t=>parseInt(t,10)}),era:qi({matchPatterns:WJ,defaultMatchWidth:"wide",parsePatterns:qJ,defaultParseWidth:"any"}),quarter:qi({matchPatterns:HJ,defaultMatchWidth:"wide",parsePatterns:GJ,defaultParseWidth:"any",valueCallback:t=>t+1}),month:qi({matchPatterns:ZJ,defaultMatchWidth:"wide",parsePatterns:KJ,defaultParseWidth:"any"}),day:qi({matchPatterns:YJ,defaultMatchWidth:"wide",parsePatterns:QJ,defaultParseWidth:"any"}),dayPeriod:qi({matchPatterns:XJ,defaultMatchWidth:"any",parsePatterns:JJ,defaultParseWidth:"any"})},RN={code:"en-US",formatDistance:SJ,formatLong:kJ,formatRelative:IJ,localize:FJ,match:eee,options:{weekStartsOn:0,firstWeekContainsDate:1}};function tee(t){const e=ft(t);return Zi(e,VD(e))+1}function UD(t){const e=ft(t),n=+Lc(e)-+dJ(e);return Math.round(n/PN)+1}function $D(t,e){var f,p,v,_;const n=ft(t),r=n.getFullYear(),i=hh(),a=(e==null?void 0:e.firstWeekContainsDate)??((p=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??i.firstWeekContainsDate??((_=(v=i.locale)==null?void 0:v.options)==null?void 0:_.firstWeekContainsDate)??1,o=hs(t,0);o.setFullYear(r+1,0,a),o.setHours(0,0,0,0);const c=ca(o,e),u=hs(t,0);u.setFullYear(r,0,a),u.setHours(0,0,0,0);const h=ca(u,e);return n.getTime()>=c.getTime()?r+1:n.getTime()>=h.getTime()?r:r-1}function nee(t,e){var c,u,h,f;const n=hh(),r=(e==null?void 0:e.firstWeekContainsDate)??((u=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(h=n.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??1,i=$D(t,e),a=hs(t,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),ca(a,e)}function BD(t,e){const n=ft(t),r=+ca(n,e)-+nee(n,e);return Math.round(r/PN)+1}function Wt(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Ro={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Wt(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Wt(n+1,2)},d(t,e){return Wt(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Wt(t.getHours()%12||12,e.length)},H(t,e){return Wt(t.getHours(),e.length)},m(t,e){return Wt(t.getMinutes(),e.length)},s(t,e){return Wt(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Wt(i,e.length)}},Pu={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},xT={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Ro.y(t,e)},Y:function(t,e,n,r){const i=$D(t,r),a=i>0?i:1-i;if(e==="YY"){const o=a%100;return Wt(o,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):Wt(a,e.length)},R:function(t,e){const n=LD(t);return Wt(n,e.length)},u:function(t,e){const n=t.getFullYear();return Wt(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Wt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Wt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Ro.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Wt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=BD(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):Wt(i,e.length)},I:function(t,e,n){const r=UD(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Wt(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Ro.d(t,e)},D:function(t,e,n){const r=tee(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Wt(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return Wt(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return Wt(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Wt(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=Pu.noon:r===0?i=Pu.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=Pu.evening:r>=12?i=Pu.afternoon:r>=4?i=Pu.morning:i=Pu.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Ro.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Ro.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Wt(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Wt(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Ro.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Ro.s(t,e)},S:function(t,e){return Ro.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return _T(r);case"XXXX":case"XX":return rc(r);case"XXXXX":case"XXX":default:return rc(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return _T(r);case"xxxx":case"xx":return rc(r);case"xxxxx":case"xxx":default:return rc(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+yT(r,":");case"OOOO":default:return"GMT"+rc(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+yT(r,":");case"zzzz":default:return"GMT"+rc(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return Wt(r,e.length)},T:function(t,e,n){const r=t.getTime();return Wt(r,e.length)}};function yT(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),a=r%60;return a===0?n+String(i):n+String(i)+e+Wt(a,2)}function _T(t,e){return t%60===0?(t>0?"-":"+")+Wt(Math.abs(t)/60,2):rc(t,e)}function rc(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Wt(Math.trunc(r/60),2),a=Wt(r%60,2);return n+i+e+a}const wT=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},WD=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},ree=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return wT(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",wT(r,e)).replace("{{time}}",WD(i,e))},see={p:WD,P:ree},iee=/^D+$/,aee=/^Y+$/,oee=["D","DD","YY","YYYY"];function lee(t){return iee.test(t)}function cee(t){return aee.test(t)}function uee(t,e,n){const r=dee(t,e,n);if(console.warn(r),oee.includes(t))throw new RangeError(r)}function dee(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const hee=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,fee=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,mee=/^'([^]*?)'?$/,pee=/''/g,gee=/[a-zA-Z]/;function sr(t,e,n){var f,p,v,_,b,N,S,w;const r=hh(),i=(n==null?void 0:n.locale)??r.locale??RN,a=(n==null?void 0:n.firstWeekContainsDate)??((p=(f=n==null?void 0:n.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??r.firstWeekContainsDate??((_=(v=r.locale)==null?void 0:v.options)==null?void 0:_.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((N=(b=n==null?void 0:n.locale)==null?void 0:b.options)==null?void 0:N.weekStartsOn)??r.weekStartsOn??((w=(S=r.locale)==null?void 0:S.options)==null?void 0:w.weekStartsOn)??0,c=ft(t);if(!gJ(c))throw new RangeError("Invalid time value");let u=e.match(fee).map(y=>{const C=y[0];if(C==="p"||C==="P"){const R=see[C];return R(y,i.formatLong)}return y}).join("").match(hee).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const C=y[0];if(C==="'")return{isToken:!1,value:vee(y)};if(xT[C])return{isToken:!0,value:y};if(C.match(gee))throw new RangeError("Format string contains an unescaped latin alphabet character `"+C+"`");return{isToken:!1,value:y}});i.localize.preprocessor&&(u=i.localize.preprocessor(c,u));const h={firstWeekContainsDate:a,weekStartsOn:o,locale:i};return u.map(y=>{if(!y.isToken)return y.value;const C=y.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&cee(C)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&lee(C))&&uee(C,e,String(t));const R=xT[C[0]];return R(c,C,i.localize,h)}).join("")}function vee(t){const e=t.match(mee);return e?e[1].replace(pee,"'"):t}function xee(t,e,n){const r=hh(),i=(n==null?void 0:n.locale)??r.locale??RN,a=2520,o=pv(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const c=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o});let u,h;o>0?(u=ft(e),h=ft(t)):(u=ft(t),h=ft(e));const f=jJ(h,u),p=(zd(h)-zd(u))/1e3,v=Math.round((f-p)/60);let _;if(v<2)return n!=null&&n.includeSeconds?f<5?i.formatDistance("lessThanXSeconds",5,c):f<10?i.formatDistance("lessThanXSeconds",10,c):f<20?i.formatDistance("lessThanXSeconds",20,c):f<40?i.formatDistance("halfAMinute",0,c):f<60?i.formatDistance("lessThanXMinutes",1,c):i.formatDistance("xMinutes",1,c):v===0?i.formatDistance("lessThanXMinutes",1,c):i.formatDistance("xMinutes",v,c);if(v<45)return i.formatDistance("xMinutes",v,c);if(v<90)return i.formatDistance("aboutXHours",1,c);if(v<vT){const b=Math.round(v/60);return i.formatDistance("aboutXHours",b,c)}else{if(v<a)return i.formatDistance("xDays",1,c);if(v<Lg){const b=Math.round(v/vT);return i.formatDistance("xDays",b,c)}else if(v<Lg*2)return _=Math.round(v/Lg),i.formatDistance("aboutXMonths",_,c)}if(_=bJ(h,u),_<12){const b=Math.round(v/Lg);return i.formatDistance("xMonths",b,c)}else{const b=_%12,N=Math.trunc(_/12);return b<3?i.formatDistance("aboutXYears",N,c):b<9?i.formatDistance("overXYears",N,c):i.formatDistance("almostXYears",N+1,c)}}function fh(t,e){return xee(t,pJ(t),e)}function yee(t){const e=ft(t),n=e.getFullYear(),r=e.getMonth(),i=hs(t,0);return i.setFullYear(n,r+1,0),i.setHours(0,0,0,0),i.getDate()}function _ee(t){return Math.trunc(+ft(t)/1e3)}function wee(t){const e=ft(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(0,0,0,0),e}function bee(t,e){return vJ(wee(t),ds(t),e)+1}function C1(t,e){const n=ft(t),r=ft(e);return n.getTime()>r.getTime()}function qD(t,e){const n=ft(t),r=ft(e);return+n<+r}function MN(t,e){const n=ft(t),r=ft(e);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function jee(t,e){const n=ft(t),r=ft(e);return n.getFullYear()===r.getFullYear()}function T_(t,e){return Fr(t,-e)}function k_(t,e){const n=ft(t),r=n.getFullYear(),i=n.getDate(),a=hs(t,0);a.setFullYear(r,e,15),a.setHours(0,0,0,0);const o=yee(a);return n.setMonth(e,Math.min(i,o)),n}function bT(t,e){const n=ft(t);return isNaN(+n)?hs(t,NaN):(n.setFullYear(e),n)}const Nee={lessThanXSeconds:{one:"moins d’une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d’une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d’un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu’un an",other:"presque {{count}} ans"}},See=(t,e,n)=>{let r;const i=Nee[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",String(e)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"dans "+r:"il y a "+r:r},Eee={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},Cee={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Tee={full:"{{date}} 'à' {{time}}",long:"{{date}} 'à' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},kee={date:md({formats:Eee,defaultWidth:"full"}),time:md({formats:Cee,defaultWidth:"full"}),dateTime:md({formats:Tee,defaultWidth:"full"})},Pee={lastWeek:"eeee 'dernier à' p",yesterday:"'hier à' p",today:"'aujourd’hui à' p",tomorrow:"'demain à' p'",nextWeek:"eeee 'prochain à' p",other:"P"},Iee=(t,e,n,r)=>Pee[t],Aee={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jésus-Christ","après Jésus-Christ"]},Ree={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2ème trim.","3ème trim.","4ème trim."],wide:["1er trimestre","2ème trimestre","3ème trimestre","4ème trimestre"]},Mee={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],wide:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},Dee={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},Oee={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"après-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l’après-midi",evening:"du soir",night:"du matin"}},Lee=(t,e)=>{const n=Number(t),r=e==null?void 0:e.unit;if(n===0)return"0";const i=["year","week","hour","minute","second"];let a;return n===1?a=r&&i.includes(r)?"ère":"er":a="ème",n+a},Vee=["MMM","MMMM"],Fee={preprocessor:(t,e)=>t.getDate()===1||!e.some(r=>r.isToken&&Vee.includes(r.value))?e:e.map(r=>r.isToken&&r.value==="do"?{isToken:!0,value:"d"}:r),ordinalNumber:Lee,era:Wi({values:Aee,defaultWidth:"wide"}),quarter:Wi({values:Ree,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Wi({values:Mee,defaultWidth:"wide"}),day:Wi({values:Dee,defaultWidth:"wide"}),dayPeriod:Wi({values:Oee,defaultWidth:"wide"})},zee=/^(\d+)(ième|ère|ème|er|e)?/i,Uee=/\d+/i,$ee={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jésus-Christ|après Jésus-Christ)/i},Bee={any:[/^av/i,/^ap/i]},Wee={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|ème|e)? trim\.?/i,wide:/^[1234](er|ème|e)? trimestre/i},qee={any:[/1/i,/2/i,/3/i,/4/i]},Hee={narrow:/^[jfmasond]/i,abbreviated:/^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\.?/i,wide:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i},Gee={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},Zee={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},Kee={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},Yee={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'après[-\s]midi|du soir|de la nuit)/i},Qee={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},Xee={ordinalNumber:zD({matchPattern:zee,parsePattern:Uee,valueCallback:t=>parseInt(t)}),era:qi({matchPatterns:$ee,defaultMatchWidth:"wide",parsePatterns:Bee,defaultParseWidth:"any"}),quarter:qi({matchPatterns:Wee,defaultMatchWidth:"wide",parsePatterns:qee,defaultParseWidth:"any",valueCallback:t=>t+1}),month:qi({matchPatterns:Hee,defaultMatchWidth:"wide",parsePatterns:Gee,defaultParseWidth:"any"}),day:qi({matchPatterns:Zee,defaultMatchWidth:"wide",parsePatterns:Kee,defaultParseWidth:"any"}),dayPeriod:qi({matchPatterns:Yee,defaultMatchWidth:"any",parsePatterns:Qee,defaultParseWidth:"any"})},Tr={code:"fr",formatDistance:See,formatLong:kee,formatRelative:Iee,localize:Fee,match:Xee,options:{weekStartsOn:1,firstWeekContainsDate:4}},Sm=({listing:t})=>{var p,v,_,b,N,S;const e=(w,y)=>{if(t.transactionType==="donation")return"Gratuit";if(t.transactionType==="exchange")return"Échange";const C=y||"EUR";try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:C}).format(w)}catch{return`${w} €`}},n=w=>{switch(w){case"new":return"bg-emerald-100 text-emerald-700 border-emerald-200";case"like-new":return"bg-blue-100 text-blue-700 border-blue-200";case"good":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"fair":return"bg-orange-100 text-orange-700 border-orange-200";case"poor":return"bg-red-100 text-red-700 border-red-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},r=w=>{switch(w){case"new":return"Neuf";case"like-new":return"Comme neuf";case"good":return"Bon état";case"fair":return"État correct";case"poor":return"Mauvais état";default:return w}},i=()=>{switch(t.transactionType){case"donation":return s.jsx(Dd,{className:"w-3 h-3"});case"exchange":return s.jsx(no,{className:"w-3 h-3"});default:return null}},a=()=>{switch(t.transactionType){case"donation":return"bg-green-500 text-white hover:bg-green-600";case"exchange":return"bg-purple-500 text-white hover:bg-purple-600";default:return"bg-primary text-white hover:bg-primary/90"}},o=w=>{try{let y;if(!w)return"Date inconnue";if(w instanceof Date)y=w;else if(typeof w=="string"||typeof w=="number")y=new Date(w);else if(w&&typeof w.toDate=="function")y=w.toDate();else if(w&&typeof w=="object"&&w.seconds)y=new Date(w.seconds*1e3);else return"Date inconnue";return isNaN(y.getTime())?"Date inconnue":fh(y,{addSuffix:!0,locale:Tr})}catch{return"Date inconnue"}},c=t.price||0,u=t.currency||"EUR",h=t.condition||"good",f=t.transactionType||"sale";return s.jsxs(le,{className:"group relative bg-white rounded-xl border border-gray-200 hover:border-gray-300 shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden w-full max-w-sm",children:[s.jsx(De,{to:`/listing/${t.id}`,className:"block",children:s.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden bg-gray-100",children:[s.jsx("img",{src:((p=t.images)==null?void 0:p[0])||"/assets/image.png",alt:t.title,className:"w-full h-full object-cover group-hover:scale-[1.02] transition-transform duration-500"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/10 via-transparent to-black/20 pointer-events-none"}),s.jsxs("div",{className:"absolute top-3 right-3 flex flex-col gap-2",children:[s.jsx(DD,{listing:t,size:"sm",className:"bg-white/90 backdrop-blur-sm hover:bg-white shadow-sm border-0 rounded-full p-2"}),s.jsx(OD,{listing:t,size:"sm",className:"bg-white/90 backdrop-blur-sm hover:bg-white shadow-sm border-0 rounded-full p-2"})]}),f!=="sale"&&s.jsxs(tt,{className:`absolute top-3 left-3 ${a()} border-0 shadow-sm font-medium px-3 py-1.5 rounded-full`,children:[i(),s.jsx("span",{className:"ml-1.5 text-sm",children:f==="donation"?"Don":"Troc"})]}),f==="sale"&&s.jsx(tt,{className:`absolute top-3 left-3 ${n(h)} font-medium px-3 py-1.5 rounded-full shadow-sm`,children:r(h)}),t.environmentalImpact&&s.jsxs(tt,{className:"absolute bottom-3 left-3 bg-emerald-500 text-white border-0 shadow-sm font-medium px-3 py-1.5 rounded-full",children:[s.jsx(_i,{className:"w-3 h-3 mr-1.5"}),"-",t.environmentalImpact.co2Saved,"kg CO₂"]}),t.images&&t.images.length>1&&s.jsxs("div",{className:"absolute bottom-3 right-3 bg-black/70 backdrop-blur-sm text-white text-sm px-2.5 py-1 rounded-full font-medium",children:["+",t.images.length-1]})]})}),s.jsxs(ue,{className:"p-6 space-y-4",children:[s.jsxs(De,{to:`/listing/${t.id}`,className:"block",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("span",{className:`text-2xl font-bold ${f==="donation"?"text-green-600":f==="exchange"?"text-purple-600":"text-slate-900"}`,children:e(c,u)}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500 bg-gray-50 px-2.5 py-1 rounded-full",children:[s.jsx(Md,{className:"w-3.5 h-3.5"}),s.jsx("span",{className:"font-medium",children:t.views||0})]})]}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 line-clamp-2 mb-3 leading-tight text-left",children:t.title||"Sans titre"}),f==="exchange"&&t.exchangeFor&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 bg-purple-50 px-3 py-2 rounded-lg mb-4",children:[s.jsx(no,{className:"w-4 h-4 text-purple-500"}),s.jsxs("span",{children:[s.jsx("span",{className:"font-medium",children:"Contre:"})," ",t.exchangeFor]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-4",children:[s.jsxs("div",{className:"flex items-center gap-1.5 flex-1 min-w-0",children:[s.jsx($r,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:((v=t.location)==null?void 0:v.campus)||((_=t.location)!=null&&_.city&&((b=t.location)!=null&&b.state)?`${t.location.city}, ${t.location.state}`:"Localisation non spécifiée")})]}),s.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0 ml-3",children:[s.jsx($n,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"whitespace-nowrap",children:o(t.createdAt)})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsxs(ao,{className:"w-9 h-9 border-2 border-gray-100",children:[s.jsx(oo,{src:t.sellerAvatar}),s.jsx(lo,{className:"text-sm bg-gray-100 text-gray-600 font-medium",children:((S=(N=t.sellerName)==null?void 0:N[0])==null?void 0:S.toUpperCase())||"U"})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:"text-sm font-medium text-gray-900 truncate",children:t.sellerName||"Utilisateur"}),t.sellerVerified&&s.jsx(Ft,{className:"w-4 h-4 text-green-500 flex-shrink-0"})]}),s.jsx("span",{className:"text-xs text-gray-500 truncate block text-left",children:t.sellerUniversity||"Université non spécifiée"})]})]}),t.aiPriceEstimate&&f==="sale"&&s.jsx(tt,{className:"bg-green-50 text-green-700 border-green-200 hover:bg-green-100 text-xs font-medium px-2.5 py-1 rounded-full flex-shrink-0 ml-2",children:"Prix juste ✓"})]})]})]})};var HD={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},jT=Me.createContext&&Me.createContext(HD),Jee=["attr","size","title"];function ete(t,e){if(t==null)return{};var n=tte(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function tte(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Nx(){return Nx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nx.apply(this,arguments)}function NT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Sx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NT(Object(n),!0).forEach(function(r){nte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nte(t,e,n){return e=rte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rte(t){var e=ste(t,"string");return typeof e=="symbol"?e:e+""}function ste(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function GD(t){return t&&t.map((e,n)=>Me.createElement(e.tag,Sx({key:n},e.attr),GD(e.child)))}function Dl(t){return e=>Me.createElement(ite,Nx({attr:Sx({},t.attr)},e),GD(t.child))}function ite(t){var e=n=>{var{attr:r,size:i,title:a}=t,o=ete(t,Jee),c=i||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),Me.createElement("svg",Nx({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:u,style:Sx(Sx({color:t.color||n.color},n.style),t.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),a&&Me.createElement("title",null,a),t.children)};return jT!==void 0?Me.createElement(jT.Consumer,null,n=>e(n)):e(HD)}function ate(t){return Dl({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M16 9.226l-8-6.21-8 6.21v-2.532l8-6.21 8 6.21zM14 9v6h-4v-4h-4v4h-4v-6l6-4.5z"},child:[]}]})(t)}function ote(t){return Dl({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M14 2v13h-10.5c-0.829 0-1.5-0.672-1.5-1.5s0.671-1.5 1.5-1.5h9.5v-12h-10c-1.1 0-2 0.9-2 2v12c0 1.1 0.9 2 2 2h12v-14h-1z"},child:[]},{tag:"path",attr:{d:"M3.501 13v0c-0 0-0.001 0-0.001 0-0.276 0-0.5 0.224-0.5 0.5s0.224 0.5 0.5 0.5c0 0 0.001-0 0.001-0v0h9.498v-1h-9.498z"},child:[]}]})(t)}function lte(t){return Dl({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0c-2.761 0-5 2.239-5 5 0 5 5 11 5 11s5-6 5-11c0-2.761-2.239-5-5-5zM8 8c-1.657 0-3-1.343-3-3s1.343-3 3-3 3 1.343 3 3-1.343 3-3 3z"},child:[]}]})(t)}function cte(t){return Dl({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M11.5 0h-7c-0.825 0-1.5 0.675-1.5 1.5v13c0 0.825 0.675 1.5 1.5 1.5h7c0.825 0 1.5-0.675 1.5-1.5v-13c0-0.825-0.675-1.5-1.5-1.5zM6 0.75h4v0.5h-4v-0.5zM8 15c-0.552 0-1-0.448-1-1s0.448-1 1-1 1 0.448 1 1-0.448 1-1 1zM12 12h-8v-10h8v10z"},child:[]}]})(t)}function ute(t){return Dl({tag:"svg",attr:{version:"1.1",viewBox:"0 0 18 16"},child:[{tag:"path",attr:{d:"M12 12.041v-0.825c1.102-0.621 2-2.168 2-3.716 0-2.485 0-4.5-3-4.5s-3 2.015-3 4.5c0 1.548 0.898 3.095 2 3.716v0.825c-3.392 0.277-6 1.944-6 3.959h14c0-2.015-2.608-3.682-6-3.959z"},child:[]},{tag:"path",attr:{d:"M5.112 12.427c0.864-0.565 1.939-0.994 3.122-1.256-0.235-0.278-0.449-0.588-0.633-0.922-0.475-0.863-0.726-1.813-0.726-2.748 0-1.344 0-2.614 0.478-3.653 0.464-1.008 1.299-1.633 2.488-1.867-0.264-1.195-0.968-1.98-2.841-1.98-3 0-3 2.015-3 4.5 0 1.548 0.898 3.095 2 3.716v0.825c-3.392 0.277-6 1.944-6 3.959h4.359c0.227-0.202 0.478-0.393 0.753-0.573z"},child:[]}]})(t)}function dte(t){return Dl({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5 3c0-1.657 1.343-3 3-3s3 1.343 3 3c0 1.657-1.343 3-3 3s-3-1.343-3-3zM12.001 7h-0.553l-3.111 6.316 1.163-5.816-1.5-1.5-1.5 1.5 1.163 5.816-3.111-6.316h-0.554c-1.999 0-1.999 1.344-1.999 3v5h12v-5c0-1.656 0-3-1.999-3z"},child:[]}]})(t)}function hte(t){return Dl({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0c-4.355 0-7.898 3.481-7.998 7.812 0.092-3.779 2.966-6.812 6.498-6.812 3.59 0 6.5 3.134 6.5 7 0 0.828 0.672 1.5 1.5 1.5s1.5-0.672 1.5-1.5c0-4.418-3.582-8-8-8zM8 16c4.355 0 7.898-3.481 7.998-7.812-0.092 3.779-2.966 6.812-6.498 6.812-3.59 0-6.5-3.134-6.5-7 0-0.828-0.672-1.5-1.5-1.5s-1.5 0.672-1.5 1.5c0 4.418 3.582 8 8 8z"},child:[]}]})(t)}function fte(t){return Dl({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M12.055 5c0.283-0.201 0.555-0.425 0.804-0.674 0.522-0.522 0.871-1.164 0.983-1.808 0.123-0.706-0.057-1.362-0.494-1.798-0.348-0.348-0.82-0.533-1.365-0.533-0.775 0-1.593 0.372-2.242 1.021-1.039 1.039-1.644 2.472-1.97 3.496-0.241-1.028-0.722-2.416-1.657-3.351-0.501-0.501-1.142-0.759-1.748-0.759-0.495 0-0.965 0.172-1.317 0.523-0.781 0.781-0.675 2.153 0.236 3.064 0.325 0.325 0.705 0.595 1.105 0.819h-3.391v4h1v7h12v-7h1v-4h-2.945zM10.536 2.003c0.433-0.433 0.974-0.692 1.446-0.692 0.167 0 0.402 0.035 0.57 0.203 0.407 0.407 0.178 1.349-0.489 2.016-0.687 0.687-1.61 1.159-2.413 1.47h-0.792c0.29-0.899 0.813-2.132 1.678-2.997zM3.655 2.514c-0.011-0.143-0.001-0.41 0.191-0.601 0.16-0.16 0.372-0.194 0.521-0.194v0c0.332 0 0.679 0.157 0.952 0.429 0.529 0.529 0.965 1.371 1.26 2.436 0.008 0.029 0.016 0.057 0.023 0.086-0.028-0.008-0.057-0.015-0.086-0.023-1.064-0.295-1.906-0.731-2.436-1.26-0.247-0.247-0.403-0.565-0.426-0.872zM7 15h-4v-6.5h4v6.5zM7 8h-5v-2h5v2zM13 15h-4v-6.5h4v6.5zM14 8h-5v-2h5v2z"},child:[]}]})(t)}const mte=()=>{const[t,e]=x.useState(""),n=ar(),r=i=>{i.preventDefault(),t.trim()&&n(`/listings?q=${encodeURIComponent(t.trim())}`)};return s.jsxs("form",{onSubmit:r,className:"flex items-center w-full max-w-2xl mx-auto rounded-full border-2 border-primary/40 bg-white shadow-sm focus-within:ring-2 focus-within:ring-primary/30 transition px-1 sm:px-1",role:"search","aria-label":"Recherche",children:[s.jsx("span",{className:"pl-0 sm:pl-4 text-gray-400",children:s.jsx(gr,{className:"w-5 h-5"})}),s.jsx("input",{type:"text",className:"flex-1 bg-transparent outline-none border-0 px-2 sm:px-4 py-2 sm:py-3 text-base rounded-l-full min-w-0",placeholder:"Rechercher parmi les étudiants de votre région...",value:t,onChange:i=>e(i.target.value),"aria-label":"Rechercher"}),s.jsx("button",{type:"submit",className:"rounded-full bg-gradient-to-r from-primary to-secondary text-white font-semibold px-3 sm:px-6 py-2 m-1 transition hover:from-primary/90 hover:to-secondary/90 focus:outline-none whitespace-nowrap text-sm sm:text-base",children:"Rechercher"})]})},pte={electronics:"/StudyMarket/assets/Icon/Gradient/electronic.svg",books:"/StudyMarket/assets/Icon/Gradient/livre.svg",furniture:"/StudyMarket/assets/Icon/Gradient/mobilier.svg",housing:"/StudyMarket/assets/Icon/Gradient/logement.svg",services:"/StudyMarket/assets/Icon/Gradient/services.svg",jobs:"/StudyMarket/assets/Icon/Gradient/job.svg",donations:"/StudyMarket/assets/Icon/Gradient/don.svg",exchange:"/StudyMarket/assets/Icon/Gradient/troc.svg"},gte=()=>s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/launch.svg",alt:"Trending Up",className:"w-50 h-50"}),vte=()=>s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/handshake.svg",alt:"Trending Up",className:"w-50 h-50"}),xte=()=>s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/refresh.svg",alt:"Trending Up",className:"w-50 h-50"}),yte=()=>s.jsx("img",{src:"/StudyMarket/assets/Icon/Bleu/chat.svg",alt:"Trending Up",className:"w-50 h-50"}),_te=[{id:"electronics",name:"Électronique",icon:cte,color:"text-blue-600",description:"Ordinateurs, téléphones, accessoires tech"},{id:"books",name:"Livres & Cours",icon:ote,color:"text-blue-600",description:"Manuels, livres, notes de cours"},{id:"furniture",name:"Mobilier",icon:ate,color:"text-blue-600",description:"Meubles, déco, électroménager"},{id:"housing",name:"Logement",icon:lte,color:"text-blue-600",description:"Colocations, studios, chambres"},{id:"services",name:"Services",icon:ute,color:"text-blue-600",description:"Cours particuliers, aide, babysitting"},{id:"jobs",name:"Jobs & Stages",icon:dte,color:"text-blue-600",description:"Petits boulots, stages, missions"},{id:"donations",name:"Dons",icon:fte,color:"text-blue-600",description:"Objets gratuits, entraide"},{id:"exchange",name:"Troc",icon:hte,color:"text-blue-600",description:"Échanges de services et objets"}],wte=[{icon:Ft,title:"Étudiants vérifiés uniquement",description:'Chaque membre est vérifié avec son adresse universitaire. Badge "Étudiant certifié" sur tous les profils.'},{icon:yte,title:"Chat sécurisé intégré",description:"Messagerie avec proposition de rendez-vous, points de rencontre campus et protection des données."},{icon:_i,title:"Impact écologique mesuré",description:"Suivez votre impact environnemental : CO₂ économisé, ressources préservées grâce à vos achats d'occasion."},{icon:y4,title:"Avis publics et réputation",description:"Système de notation transparent. Consultez les avis avant chaque transaction pour échanger en confiance."}],bte=[{title:"Vendre rapidement",description:"Publiez votre annonce en moins d'une minute",icon:gte,link:"/create",color:"border-2 border-green-500 text-green-500"},{title:"Donner gratuitement",description:"Offrez ce dont vous n'avez plus besoin",icon:vte,link:"/create?type=donation",color:"border-2 border-green-500 text-green-500"},{title:"Proposer un troc",description:"Échangez services et objets sans argent",icon:xte,link:"/create?type=exchange",color:"border-2 border-green-500 text-green-500"}],jte=()=>{const{featuredListings:t,fetchFeaturedListings:e}=wp();return x.useEffect(()=>{e()},[e]),s.jsxs("div",{className:"min-h-screen w-full overflow-x-hidden",children:[s.jsx("section",{className:"relative bg-gradient-to-br from-primary/10 via-background to-secondary/10 py-8 sm:py-16 px-4",children:s.jsxs("div",{className:"container mx-auto text-center max-w-4xl",children:[s.jsx("div",{className:"flex items-center justify-center mb-4 sm:mb-6",children:s.jsxs(tt,{className:"bg-green-100 text-green-800 border-green-200 px-3 py-1.5 sm:px-4 sm:py-2",children:[s.jsx(Ft,{className:"w-4 h-4 mr-2"}),"Communauté 100% étudiants vérifiés"]})}),s.jsx("h1",{className:"text-2xl sm:text-4xl md:text-5xl font-bold mb-4 sm:mb-6 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"La marketplace des étudiants"}),s.jsx("p",{className:"text-base sm:text-lg text-muted-foreground mb-6 sm:mb-8 max-w-2xl mx-auto",children:"Achetez, vendez, donnez et échangez entre étudiants certifiés de votre région. Sécurisé, écologique et pensé pour la vie étudiante."}),s.jsx("div",{className:"mb-6 sm:mb-8 px-4",children:s.jsx(mte,{})}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-6 sm:mb-8",children:bte.map((n,r)=>s.jsx(De,{to:n.link,className:"group",children:s.jsx(le,{className:"border-2 hover:border-primary/20 transition-all duration-300 hover:shadow-lg hover:-translate-y-1",children:s.jsxs(ue,{className:"p-4 text-center",children:[s.jsx("div",{className:`w-12 h-12 ${n.color} rounded-full flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform`,children:s.jsx(n.icon,{})}),s.jsx("h3",{className:"font-semibold mb-1",children:n.title}),s.jsx("p",{className:"text-sm text-muted-foreground",children:n.description})]})})},r))}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[s.jsx(Y,{size:"lg",asChild:!0,className:"bg-gradient-to-r from-primary to-secondary w-full sm:w-auto",children:s.jsxs(De,{to:"/listings",children:["Parcourir les annonces",s.jsx(xm,{className:"w-4 h-4 ml-2"})]})}),s.jsx(Y,{size:"lg",variant:"outline",asChild:!0,className:"w-full sm:w-auto",children:s.jsx(De,{to:"/auth",children:"Rejoindre la communauté"})})]})]})}),s.jsx("section",{className:"py-10 sm:py-16 px-4",children:s.jsxs("div",{className:"container mx-auto",children:[s.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-center mb-3 sm:mb-4",children:"Catégories étudiantes"}),s.jsx("p",{className:"text-center text-muted-foreground mb-8 sm:mb-12 max-w-2xl mx-auto text-sm sm:text-base",children:"Des catégories pensées spécifiquement pour la vie étudiante, avec des filtres adaptés à vos besoins"}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:_te.map(n=>s.jsx(De,{to:`/listings?category=${n.id}`,className:"group",children:s.jsx(le,{className:"h-full transition-all duration-300 hover:shadow-lg hover:-translate-y-1 border-2 hover:border-primary/20",children:s.jsxs(ue,{className:"p-4 text-center",children:[s.jsx("img",{src:pte[n.id],alt:n.name,className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-3"}),s.jsx("h3",{className:"font-semibold text-sm mb-1",children:n.name}),s.jsx("p",{className:"text-xs text-muted-foreground",children:n.description})]})})},n.id))})]})}),t.length>0&&s.jsx("section",{className:"py-16 px-4 bg-muted/30",children:s.jsxs("div",{className:"container mx-auto",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-8 sm:mb-12 gap-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-2",children:"Annonces récentes"}),s.jsx("p",{className:"text-muted-foreground",children:"Les dernières offres de la communauté étudiante"})]}),s.jsx(Y,{variant:"outline",asChild:!0,children:s.jsxs(De,{to:"/listings",children:["Voir tout",s.jsx(xm,{className:"w-4 h-4 ml-2"})]})})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.slice(0,6).map(n=>s.jsx(Sm,{listing:n},n.id))})]})}),s.jsx("section",{className:"py-16 px-4",children:s.jsxs("div",{className:"container mx-auto",children:[s.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-center mb-4",children:"Pourquoi StudyMarket ?"}),s.jsx("p",{className:"text-center text-muted-foreground mb-12 max-w-2xl mx-auto",children:"Une plateforme pensée par et pour les étudiants, avec des fonctionnalités uniques pour votre sécurité et votre tranquillité d'esprit"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:wte.map((n,r)=>s.jsx(le,{className:"border-0 shadow-none",children:s.jsx(ue,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0",children:s.jsx(n.icon,{className:"w-5 h-5 sm:w-6 sm:h-6 text-primary"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-2",children:n.title}),s.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:n.description})]})]})})},r))})]})}),s.jsx("section",{className:"py-16 px-4 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-950/20 dark:to-emerald-950/20",children:s.jsx("div",{className:"container mx-auto text-center",children:s.jsxs("div",{className:"max-w-3xl mx-auto",children:[s.jsx(_i,{className:"w-12 h-12 sm:w-16 sm:h-16 text-green-600 mx-auto mb-6"}),s.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-4",children:"Votre impact écologique compte"}),s.jsx("p",{className:"text-base sm:text-xl text-muted-foreground mb-8",children:"Chaque achat d'occasion évite la production d'un objet neuf. Suivez votre impact environnemental et découvrez combien de CO₂ vous économisez grâce à vos échanges étudiants."}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6 mb-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-green-600 mb-2",children:"2.5T"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"CO₂ économisé par la communauté"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-green-600 mb-2",children:"15K"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Objets donnés cette année"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-green-600 mb-2",children:"8K"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Étudiants engagés"})]})]}),s.jsx(Y,{size:"lg",variant:"outline",className:"border-green-600 text-green-600 hover:bg-green-600 hover:text-white",children:s.jsx(De,{to:"/impact",className:"cursor-pointer",children:"Découvrir mon impact"})})]})})}),s.jsx("section",{className:"py-16 px-4 bg-gradient-to-r from-primary to-secondary",children:s.jsxs("div",{className:"container mx-auto text-center",children:[s.jsx(rh,{className:"w-12 h-12 sm:w-16 sm:h-16 text-white mx-auto mb-6"}),s.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-4",children:"Rejoignez la communauté étudiante"}),s.jsx("p",{className:"text-base sm:text-xl text-white/90 mb-8 max-w-2xl mx-auto",children:"Plus de 10 000 étudiants font déjà confiance à StudyMarket pour leurs achats, ventes et échanges. Rejoignez une communauté sûre, vérifiée et solidaire."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsx(Y,{size:"lg",variant:"secondary",asChild:!0,children:s.jsxs(De,{to:"/auth",children:[s.jsx(Ft,{className:"w-4 h-4 mr-2"}),"Inscription vérifiée"]})}),s.jsx(Y,{size:"lg",variant:"outline",className:"border-white text-white bg-transparent hover:bg-white hover:text-primary",asChild:!0,children:s.jsx(De,{to:"/listings",children:"Commencer à explorer"})})]})]})})]})};function Em(t,[e,n]){return Math.min(n,Math.max(e,t))}function e0(t){const e=x.useRef({value:t,previous:t});return x.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Nte="VisuallyHidden",ZD=x.forwardRef((t,e)=>s.jsx(Ge.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));ZD.displayName=Nte;var Ste=[" ","Enter","ArrowUp","ArrowDown"],Ete=[" ","Enter"],bp="Select",[t0,n0,Cte]=fp(bp),[mh,fce]=As(bp,[Cte,ch]),r0=ch(),[Tte,Ol]=mh(bp),[kte,Pte]=mh(bp),KD=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:a,value:o,defaultValue:c,onValueChange:u,dir:h,name:f,autoComplete:p,disabled:v,required:_,form:b}=t,N=r0(e),[S,w]=x.useState(null),[y,C]=x.useState(null),[R,M]=x.useState(!1),B=Qc(h),[O=!1,D]=ks({prop:r,defaultProp:i,onChange:a}),[F,I]=ks({prop:o,defaultProp:c,onChange:u}),V=x.useRef(null),k=S?b||!!S.closest("form"):!0,[P,q]=x.useState(new Set),te=Array.from(P).map(re=>re.props.value).join(";");return s.jsx(vN,{...N,children:s.jsxs(Tte,{required:_,scope:e,trigger:S,onTriggerChange:w,valueNode:y,onValueNodeChange:C,valueNodeHasChildren:R,onValueNodeHasChildrenChange:M,contentId:Ns(),value:F,onValueChange:I,open:O,onOpenChange:D,dir:B,triggerPointerDownPosRef:V,disabled:v,children:[s.jsx(t0.Provider,{scope:e,children:s.jsx(kte,{scope:t.__scopeSelect,onNativeOptionAdd:x.useCallback(re=>{q(K=>new Set(K).add(re))},[]),onNativeOptionRemove:x.useCallback(re=>{q(K=>{const U=new Set(K);return U.delete(re),U})},[]),children:n})}),k?s.jsxs(_O,{"aria-hidden":!0,required:_,tabIndex:-1,name:f,autoComplete:p,value:F,onChange:re=>I(re.target.value),disabled:v,form:b,children:[F===void 0?s.jsx("option",{value:""}):null,Array.from(P)]},te):null]})})};KD.displayName=bp;var YD="SelectTrigger",QD=x.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,a=r0(n),o=Ol(YD,n),c=o.disabled||r,u=vt(e,o.onTriggerChange),h=n0(n),f=x.useRef("touch"),[p,v,_]=wO(N=>{const S=h().filter(C=>!C.disabled),w=S.find(C=>C.value===o.value),y=bO(S,N,w);y!==void 0&&o.onValueChange(y.value)}),b=N=>{c||(o.onOpenChange(!0),_()),N&&(o.triggerPointerDownPosRef.current={x:Math.round(N.pageX),y:Math.round(N.pageY)})};return s.jsx(Wy,{asChild:!0,...a,children:s.jsx(Ge.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":yO(o.value)?"":void 0,...i,ref:u,onClick:Ie(i.onClick,N=>{N.currentTarget.focus(),f.current!=="mouse"&&b(N)}),onPointerDown:Ie(i.onPointerDown,N=>{f.current=N.pointerType;const S=N.target;S.hasPointerCapture(N.pointerId)&&S.releasePointerCapture(N.pointerId),N.button===0&&N.ctrlKey===!1&&N.pointerType==="mouse"&&(b(N),N.preventDefault())}),onKeyDown:Ie(i.onKeyDown,N=>{const S=p.current!=="";!(N.ctrlKey||N.altKey||N.metaKey)&&N.key.length===1&&v(N.key),!(S&&N.key===" ")&&Ste.includes(N.key)&&(b(),N.preventDefault())})})})});QD.displayName=YD;var XD="SelectValue",JD=x.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:a,placeholder:o="",...c}=t,u=Ol(XD,n),{onValueNodeHasChildrenChange:h}=u,f=a!==void 0,p=vt(e,u.onValueNodeChange);return ir(()=>{h(f)},[h,f]),s.jsx(Ge.span,{...c,ref:p,style:{pointerEvents:"none"},children:yO(u.value)?s.jsx(s.Fragment,{children:o}):a})});JD.displayName=XD;var Ite="SelectIcon",eO=x.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return s.jsx(Ge.span,{"aria-hidden":!0,...i,ref:e,children:r||"▼"})});eO.displayName=Ite;var Ate="SelectPortal",tO=t=>s.jsx(vp,{asChild:!0,...t});tO.displayName=Ate;var Vc="SelectContent",nO=x.forwardRef((t,e)=>{const n=Ol(Vc,t.__scopeSelect),[r,i]=x.useState();if(ir(()=>{i(new DocumentFragment)},[]),!n.open){const a=r;return a?Qd.createPortal(s.jsx(rO,{scope:t.__scopeSelect,children:s.jsx(t0.Slot,{scope:t.__scopeSelect,children:s.jsx("div",{children:t.children})})}),a):null}return s.jsx(sO,{...t,ref:e})});nO.displayName=Vc;var li=10,[rO,Ll]=mh(Vc),Rte="SelectContentImpl",sO=x.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:o,side:c,sideOffset:u,align:h,alignOffset:f,arrowPadding:p,collisionBoundary:v,collisionPadding:_,sticky:b,hideWhenDetached:N,avoidCollisions:S,...w}=t,y=Ol(Vc,n),[C,R]=x.useState(null),[M,B]=x.useState(null),O=vt(e,de=>R(de)),[D,F]=x.useState(null),[I,V]=x.useState(null),k=n0(n),[P,q]=x.useState(!1),te=x.useRef(!1);x.useEffect(()=>{if(C)return Gy(C)},[C]),Fy();const re=x.useCallback(de=>{const[ne,...ve]=k().map(Se=>Se.ref.current),[_e]=ve.slice(-1),ye=document.activeElement;for(const Se of de)if(Se===ye||(Se==null||Se.scrollIntoView({block:"nearest"}),Se===ne&&M&&(M.scrollTop=0),Se===_e&&M&&(M.scrollTop=M.scrollHeight),Se==null||Se.focus(),document.activeElement!==ye))return},[k,M]),K=x.useCallback(()=>re([D,C]),[re,D,C]);x.useEffect(()=>{P&&K()},[P,K]);const{onOpenChange:U,triggerPointerDownPosRef:W}=y;x.useEffect(()=>{if(C){let de={x:0,y:0};const ne=_e=>{var ye,Se;de={x:Math.abs(Math.round(_e.pageX)-(((ye=W.current)==null?void 0:ye.x)??0)),y:Math.abs(Math.round(_e.pageY)-(((Se=W.current)==null?void 0:Se.y)??0))}},ve=_e=>{de.x<=10&&de.y<=10?_e.preventDefault():C.contains(_e.target)||U(!1),document.removeEventListener("pointermove",ne),W.current=null};return W.current!==null&&(document.addEventListener("pointermove",ne),document.addEventListener("pointerup",ve,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ne),document.removeEventListener("pointerup",ve,{capture:!0})}}},[C,U,W]),x.useEffect(()=>{const de=()=>U(!1);return window.addEventListener("blur",de),window.addEventListener("resize",de),()=>{window.removeEventListener("blur",de),window.removeEventListener("resize",de)}},[U]);const[H,Q]=wO(de=>{const ne=k().filter(ye=>!ye.disabled),ve=ne.find(ye=>ye.ref.current===document.activeElement),_e=bO(ne,de,ve);_e&&setTimeout(()=>_e.ref.current.focus())}),fe=x.useCallback((de,ne,ve)=>{const _e=!te.current&&!ve;(y.value!==void 0&&y.value===ne||_e)&&(F(de),_e&&(te.current=!0))},[y.value]),ke=x.useCallback(()=>C==null?void 0:C.focus(),[C]),Ze=x.useCallback((de,ne,ve)=>{const _e=!te.current&&!ve;(y.value!==void 0&&y.value===ne||_e)&&V(de)},[y.value]),Ye=r==="popper"?T1:iO,se=Ye===T1?{side:c,sideOffset:u,align:h,alignOffset:f,arrowPadding:p,collisionBoundary:v,collisionPadding:_,sticky:b,hideWhenDetached:N,avoidCollisions:S}:{};return s.jsx(rO,{scope:n,content:C,viewport:M,onViewportChange:B,itemRefCallback:fe,selectedItem:D,onItemLeave:ke,itemTextRefCallback:Ze,focusSelectedItem:K,selectedItemText:I,position:r,isPositioned:P,searchRef:H,children:s.jsx(xp,{as:ro,allowPinchZoom:!0,children:s.jsx(pp,{asChild:!0,trapped:y.open,onMountAutoFocus:de=>{de.preventDefault()},onUnmountAutoFocus:Ie(i,de=>{var ne;(ne=y.trigger)==null||ne.focus({preventScroll:!0}),de.preventDefault()}),children:s.jsx(mp,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:de=>de.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:s.jsx(Ye,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:de=>de.preventDefault(),...w,...se,onPlaced:()=>q(!0),ref:O,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:Ie(w.onKeyDown,de=>{const ne=de.ctrlKey||de.altKey||de.metaKey;if(de.key==="Tab"&&de.preventDefault(),!ne&&de.key.length===1&&Q(de.key),["ArrowUp","ArrowDown","Home","End"].includes(de.key)){let _e=k().filter(ye=>!ye.disabled).map(ye=>ye.ref.current);if(["ArrowUp","End"].includes(de.key)&&(_e=_e.slice().reverse()),["ArrowUp","ArrowDown"].includes(de.key)){const ye=de.target,Se=_e.indexOf(ye);_e=_e.slice(Se+1)}setTimeout(()=>re(_e)),de.preventDefault()}})})})})})})});sO.displayName=Rte;var Mte="SelectItemAlignedPosition",iO=x.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,a=Ol(Vc,n),o=Ll(Vc,n),[c,u]=x.useState(null),[h,f]=x.useState(null),p=vt(e,O=>f(O)),v=n0(n),_=x.useRef(!1),b=x.useRef(!0),{viewport:N,selectedItem:S,selectedItemText:w,focusSelectedItem:y}=o,C=x.useCallback(()=>{if(a.trigger&&a.valueNode&&c&&h&&N&&S&&w){const O=a.trigger.getBoundingClientRect(),D=h.getBoundingClientRect(),F=a.valueNode.getBoundingClientRect(),I=w.getBoundingClientRect();if(a.dir!=="rtl"){const ye=I.left-D.left,Se=F.left-ye,ge=O.left-Se,Ae=O.width+ge,Ke=Math.max(Ae,D.width),ce=window.innerWidth-li,Ve=Em(Se,[li,Math.max(li,ce-Ke)]);c.style.minWidth=Ae+"px",c.style.left=Ve+"px"}else{const ye=D.right-I.right,Se=window.innerWidth-F.right-ye,ge=window.innerWidth-O.right-Se,Ae=O.width+ge,Ke=Math.max(Ae,D.width),ce=window.innerWidth-li,Ve=Em(Se,[li,Math.max(li,ce-Ke)]);c.style.minWidth=Ae+"px",c.style.right=Ve+"px"}const V=v(),k=window.innerHeight-li*2,P=N.scrollHeight,q=window.getComputedStyle(h),te=parseInt(q.borderTopWidth,10),re=parseInt(q.paddingTop,10),K=parseInt(q.borderBottomWidth,10),U=parseInt(q.paddingBottom,10),W=te+re+P+U+K,H=Math.min(S.offsetHeight*5,W),Q=window.getComputedStyle(N),fe=parseInt(Q.paddingTop,10),ke=parseInt(Q.paddingBottom,10),Ze=O.top+O.height/2-li,Ye=k-Ze,se=S.offsetHeight/2,de=S.offsetTop+se,ne=te+re+de,ve=W-ne;if(ne<=Ze){const ye=V.length>0&&S===V[V.length-1].ref.current;c.style.bottom="0px";const Se=h.clientHeight-N.offsetTop-N.offsetHeight,ge=Math.max(Ye,se+(ye?ke:0)+Se+K),Ae=ne+ge;c.style.height=Ae+"px"}else{const ye=V.length>0&&S===V[0].ref.current;c.style.top="0px";const ge=Math.max(Ze,te+N.offsetTop+(ye?fe:0)+se)+ve;c.style.height=ge+"px",N.scrollTop=ne-Ze+N.offsetTop}c.style.margin=`${li}px 0`,c.style.minHeight=H+"px",c.style.maxHeight=k+"px",r==null||r(),requestAnimationFrame(()=>_.current=!0)}},[v,a.trigger,a.valueNode,c,h,N,S,w,a.dir,r]);ir(()=>C(),[C]);const[R,M]=x.useState();ir(()=>{h&&M(window.getComputedStyle(h).zIndex)},[h]);const B=x.useCallback(O=>{O&&b.current===!0&&(C(),y==null||y(),b.current=!1)},[C,y]);return s.jsx(Ote,{scope:n,contentWrapper:c,shouldExpandOnScrollRef:_,onScrollButtonChange:B,children:s.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:R},children:s.jsx(Ge.div,{...i,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});iO.displayName=Mte;var Dte="SelectPopperPosition",T1=x.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=li,...a}=t,o=r0(n);return s.jsx(xN,{...o,...a,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});T1.displayName=Dte;var[Ote,DN]=mh(Vc,{}),k1="SelectViewport",aO=x.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,a=Ll(k1,n),o=DN(k1,n),c=vt(e,a.onViewportChange),u=x.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),s.jsx(t0.Slot,{scope:n,children:s.jsx(Ge.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Ie(i.onScroll,h=>{const f=h.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:v}=o;if(v!=null&&v.current&&p){const _=Math.abs(u.current-f.scrollTop);if(_>0){const b=window.innerHeight-li*2,N=parseFloat(p.style.minHeight),S=parseFloat(p.style.height),w=Math.max(N,S);if(w<b){const y=w+_,C=Math.min(b,y),R=y-C;p.style.height=C+"px",p.style.bottom==="0px"&&(f.scrollTop=R>0?R:0,p.style.justifyContent="flex-end")}}}u.current=f.scrollTop})})})]})});aO.displayName=k1;var oO="SelectGroup",[Lte,Vte]=mh(oO),Fte=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Ns();return s.jsx(Lte,{scope:n,id:i,children:s.jsx(Ge.div,{role:"group","aria-labelledby":i,...r,ref:e})})});Fte.displayName=oO;var lO="SelectLabel",cO=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Vte(lO,n);return s.jsx(Ge.div,{id:i.id,...r,ref:e})});cO.displayName=lO;var Ex="SelectItem",[zte,uO]=mh(Ex),dO=x.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:a,...o}=t,c=Ol(Ex,n),u=Ll(Ex,n),h=c.value===r,[f,p]=x.useState(a??""),[v,_]=x.useState(!1),b=vt(e,y=>{var C;return(C=u.itemRefCallback)==null?void 0:C.call(u,y,r,i)}),N=Ns(),S=x.useRef("touch"),w=()=>{i||(c.onValueChange(r),c.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(zte,{scope:n,value:r,disabled:i,textId:N,isSelected:h,onItemTextChange:x.useCallback(y=>{p(C=>C||((y==null?void 0:y.textContent)??"").trim())},[]),children:s.jsx(t0.ItemSlot,{scope:n,value:r,disabled:i,textValue:f,children:s.jsx(Ge.div,{role:"option","aria-labelledby":N,"data-highlighted":v?"":void 0,"aria-selected":h&&v,"data-state":h?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:b,onFocus:Ie(o.onFocus,()=>_(!0)),onBlur:Ie(o.onBlur,()=>_(!1)),onClick:Ie(o.onClick,()=>{S.current!=="mouse"&&w()}),onPointerUp:Ie(o.onPointerUp,()=>{S.current==="mouse"&&w()}),onPointerDown:Ie(o.onPointerDown,y=>{S.current=y.pointerType}),onPointerMove:Ie(o.onPointerMove,y=>{var C;S.current=y.pointerType,i?(C=u.onItemLeave)==null||C.call(u):S.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ie(o.onPointerLeave,y=>{var C;y.currentTarget===document.activeElement&&((C=u.onItemLeave)==null||C.call(u))}),onKeyDown:Ie(o.onKeyDown,y=>{var R;((R=u.searchRef)==null?void 0:R.current)!==""&&y.key===" "||(Ete.includes(y.key)&&w(),y.key===" "&&y.preventDefault())})})})})});dO.displayName=Ex;var wf="SelectItemText",hO=x.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...a}=t,o=Ol(wf,n),c=Ll(wf,n),u=uO(wf,n),h=Pte(wf,n),[f,p]=x.useState(null),v=vt(e,w=>p(w),u.onItemTextChange,w=>{var y;return(y=c.itemTextRefCallback)==null?void 0:y.call(c,w,u.value,u.disabled)}),_=f==null?void 0:f.textContent,b=x.useMemo(()=>s.jsx("option",{value:u.value,disabled:u.disabled,children:_},u.value),[u.disabled,u.value,_]),{onNativeOptionAdd:N,onNativeOptionRemove:S}=h;return ir(()=>(N(b),()=>S(b)),[N,S,b]),s.jsxs(s.Fragment,{children:[s.jsx(Ge.span,{id:u.textId,...a,ref:v}),u.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Qd.createPortal(a.children,o.valueNode):null]})});hO.displayName=wf;var fO="SelectItemIndicator",mO=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return uO(fO,n).isSelected?s.jsx(Ge.span,{"aria-hidden":!0,...r,ref:e}):null});mO.displayName=fO;var P1="SelectScrollUpButton",pO=x.forwardRef((t,e)=>{const n=Ll(P1,t.__scopeSelect),r=DN(P1,t.__scopeSelect),[i,a]=x.useState(!1),o=vt(e,r.onScrollButtonChange);return ir(()=>{if(n.viewport&&n.isPositioned){let c=function(){const h=u.scrollTop>0;a(h)};const u=n.viewport;return c(),u.addEventListener("scroll",c),()=>u.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),i?s.jsx(vO,{...t,ref:o,onAutoScroll:()=>{const{viewport:c,selectedItem:u}=n;c&&u&&(c.scrollTop=c.scrollTop-u.offsetHeight)}}):null});pO.displayName=P1;var I1="SelectScrollDownButton",gO=x.forwardRef((t,e)=>{const n=Ll(I1,t.__scopeSelect),r=DN(I1,t.__scopeSelect),[i,a]=x.useState(!1),o=vt(e,r.onScrollButtonChange);return ir(()=>{if(n.viewport&&n.isPositioned){let c=function(){const h=u.scrollHeight-u.clientHeight,f=Math.ceil(u.scrollTop)<h;a(f)};const u=n.viewport;return c(),u.addEventListener("scroll",c),()=>u.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),i?s.jsx(vO,{...t,ref:o,onAutoScroll:()=>{const{viewport:c,selectedItem:u}=n;c&&u&&(c.scrollTop=c.scrollTop+u.offsetHeight)}}):null});gO.displayName=I1;var vO=x.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,a=Ll("SelectScrollButton",n),o=x.useRef(null),c=n0(n),u=x.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return x.useEffect(()=>()=>u(),[u]),ir(()=>{var f;const h=c().find(p=>p.ref.current===document.activeElement);(f=h==null?void 0:h.ref.current)==null||f.scrollIntoView({block:"nearest"})},[c]),s.jsx(Ge.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:Ie(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Ie(i.onPointerMove,()=>{var h;(h=a.onItemLeave)==null||h.call(a),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Ie(i.onPointerLeave,()=>{u()})})}),Ute="SelectSeparator",xO=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return s.jsx(Ge.div,{"aria-hidden":!0,...r,ref:e})});xO.displayName=Ute;var A1="SelectArrow",$te=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=r0(n),a=Ol(A1,n),o=Ll(A1,n);return a.open&&o.position==="popper"?s.jsx(yN,{...i,...r,ref:e}):null});$te.displayName=A1;function yO(t){return t===""||t===void 0}var _O=x.forwardRef((t,e)=>{const{value:n,...r}=t,i=x.useRef(null),a=vt(e,i),o=e0(n);return x.useEffect(()=>{const c=i.current,u=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(u,"value").set;if(o!==n&&f){const p=new Event("change",{bubbles:!0});f.call(c,n),c.dispatchEvent(p)}},[o,n]),s.jsx(ZD,{asChild:!0,children:s.jsx("select",{...r,ref:a,defaultValue:n})})});_O.displayName="BubbleSelect";function wO(t){const e=Zn(t),n=x.useRef(""),r=x.useRef(0),i=x.useCallback(o=>{const c=n.current+o;e(c),function u(h){n.current=h,window.clearTimeout(r.current),h!==""&&(r.current=window.setTimeout(()=>u(""),1e3))}(c)},[e]),a=x.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,a]}function bO(t,e,n){const i=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let o=Bte(t,Math.max(a,0));i.length===1&&(o=o.filter(h=>h!==n));const u=o.find(h=>h.textValue.toLowerCase().startsWith(i.toLowerCase()));return u!==n?u:void 0}function Bte(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Wte=KD,jO=QD,qte=JD,Hte=eO,Gte=tO,NO=nO,Zte=aO,SO=cO,EO=dO,Kte=hO,Yte=mO,CO=pO,TO=gO,kO=xO;const Jt=Wte,en=qte,qt=x.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(jO,{ref:r,className:Je("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,s.jsx(Hte,{asChild:!0,children:s.jsx(iX,{className:"h-4 w-4 opacity-50"})})]}));qt.displayName=jO.displayName;const PO=x.forwardRef(({className:t,...e},n)=>s.jsx(CO,{ref:n,className:Je("flex cursor-default items-center justify-center py-1",t),...e,children:s.jsx(hX,{})}));PO.displayName=CO.displayName;const IO=x.forwardRef(({className:t,...e},n)=>s.jsx(TO,{ref:n,className:Je("flex cursor-default items-center justify-center py-1",t),...e,children:s.jsx(vD,{})}));IO.displayName=TO.displayName;const Ht=x.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>s.jsx(Gte,{children:s.jsxs(NO,{ref:i,className:Je("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[s.jsx(PO,{}),s.jsx(Zte,{className:Je("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),s.jsx(IO,{})]})}));Ht.displayName=NO.displayName;const Qte=x.forwardRef(({className:t,...e},n)=>s.jsx(SO,{ref:n,className:Je("px-2 py-1.5 text-sm font-semibold",t),...e}));Qte.displayName=SO.displayName;const $e=x.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(EO,{ref:r,className:Je("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[s.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(Yte,{children:s.jsx(TN,{className:"h-4 w-4"})})}),s.jsx(Kte,{children:e})]}));$e.displayName=EO.displayName;const Xte=x.forwardRef(({className:t,...e},n)=>s.jsx(kO,{ref:n,className:Je("-mx-1 my-1 h-px bg-muted",t),...e}));Xte.displayName=kO.displayName;var Jte="Separator",ST="horizontal",ene=["horizontal","vertical"],AO=x.forwardRef((t,e)=>{const{decorative:n,orientation:r=ST,...i}=t,a=tne(r)?r:ST,c=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return s.jsx(Ge.div,{"data-orientation":a,...c,...i,ref:e})});AO.displayName=Jte;function tne(t){return ene.includes(t)}var RO=AO;const Ws=x.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},i)=>s.jsx(RO,{ref:i,decorative:n,orientation:e,className:Je("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));Ws.displayName=RO.displayName;const P_=[{value:"all",label:"Toutes catégories",icon:null},{value:"electronics",label:"Électronique",icon:Yc},{value:"vehicles",label:"Véhicules",icon:N4},{value:"real-estate",label:"Immobilier",icon:px},{value:"fashion",label:"Mode",icon:oN},{value:"gaming",label:"Jeux & Jouets",icon:pG},{value:"baby",label:"Bébé & Enfant",icon:rG},{value:"business",label:"Équipement Pro",icon:j4}],nne=[{value:"new",label:"Neuf"},{value:"like-new",label:"Comme neuf"},{value:"good",label:"Bon état"},{value:"fair",label:"État correct"},{value:"poor",label:"Mauvais état"}],rne=[{value:"relevance",label:"Pertinence"},{value:"date",label:"Plus récent"},{value:"price-asc",label:"Prix croissant"},{value:"price-desc",label:"Prix décroissant"}],sne="/StudyMarket/assets/Icon/DarkGrey/grille.svg",ine="/StudyMarket/assets/Icon/DarkGrey/list.svg",ane=()=>{var w;const[t,e]=Hb(),{listings:n,loading:r,hasMore:i,fetchListings:a,searchListings:o}=wp(),[c,u]=x.useState({query:t.get("q")||"",category:t.get("category")||"",sortBy:"date"}),[h,f]=x.useState("grid"),[p,v]=x.useState(!1);x.useEffect(()=>{const y={query:t.get("q")||"",category:t.get("category")||"",sortBy:"date"};u(y),o(y)},[t,o]);const _=()=>{const y={...c};o(y);const C=new URLSearchParams;y.query&&C.set("q",y.query),y.category&&C.set("category",y.category),e(C)},b=(y,C)=>{const R={...c,[y]:C};u(R)},N=()=>{a(c,!1)},S=()=>{const y={query:"",sortBy:"date"};u(y),o(y),e({})};return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Toutes les annonces"}),s.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 mb-6",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(gr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(qe,{type:"text",placeholder:"Rechercher des articles...",value:c.query||"",onChange:y=>b("query",y.target.value),onKeyPress:y=>y.key==="Enter"&&_(),className:"pl-10"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Y,{onClick:_,className:"whitespace-nowrap",children:[s.jsx(gr,{className:"w-4 h-4 mr-2"}),"Rechercher"]}),s.jsxs(Y,{variant:"outline",onClick:()=>v(!p),className:"lg:hidden",children:[s.jsx(My,{className:"w-4 h-4 mr-2"}),"Filtres"]})]})]}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:P_.slice(1,6).map(y=>{const C=y.icon;return s.jsxs(Y,{variant:c.category===y.value?"default":"outline",size:"sm",onClick:()=>b("category",c.category===y.value?"":y.value),className:"flex items-center gap-2",children:[C&&s.jsx(C,{className:"w-4 h-4"}),y.label]},y.value)})})]}),s.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[s.jsx("aside",{className:`lg:w-80 space-y-6 ${p?"block":"hidden lg:block"}`,children:s.jsxs(le,{children:[s.jsx(We,{children:s.jsxs(He,{className:"flex items-center justify-between",children:[s.jsx("span",{children:"Filtres"}),s.jsx(Y,{variant:"ghost",size:"sm",onClick:S,children:"Effacer"})]})}),s.jsxs(ue,{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Catégorie"}),s.jsxs(Jt,{value:c.category||"all",onValueChange:y=>b("category",y==="all"?"":y),children:[s.jsx(qt,{children:s.jsx(en,{})}),s.jsx(Ht,{children:P_.map(y=>{const C=y.icon;return s.jsx($e,{value:y.value,children:s.jsxs("div",{className:"flex items-center gap-2",children:[C&&s.jsx(C,{className:"w-4 h-4"}),y.label]})},y.value)})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Prix"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(qe,{type:"number",placeholder:"Min",value:c.minPrice||"",onChange:y=>b("minPrice",y.target.value?parseInt(y.target.value):void 0)}),s.jsx(qe,{type:"number",placeholder:"Max",value:c.maxPrice||"",onChange:y=>b("maxPrice",y.target.value?parseInt(y.target.value):void 0)})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"État"}),s.jsx("div",{className:"space-y-2",children:nne.map(y=>{var C;return s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:((C=c.condition)==null?void 0:C.includes(y.value))||!1,onChange:R=>{const M=c.condition||[],B=R.target.checked?[...M,y.value]:M.filter(O=>O!==y.value);b("condition",B.length>0?B:void 0)},className:"rounded border-border"}),s.jsx("span",{className:"text-sm",children:y.label})]},y.value)})})]}),s.jsx(Y,{onClick:_,className:"w-full",children:"Appliquer les filtres"})]})]})}),s.jsxs("main",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("span",{className:"text-muted-foreground",children:[n.length," résultat(s)"]}),(c.query||c.category||c.minPrice||c.maxPrice)&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Filtres actifs:"}),c.query&&s.jsxs(tt,{variant:"secondary",children:['"',c.query,'"']}),c.category&&s.jsx(tt,{variant:"secondary",children:(w=P_.find(y=>y.value===c.category))==null?void 0:w.label})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Jt,{value:c.sortBy||"date",onValueChange:y=>b("sortBy",y),children:[s.jsx(qt,{className:"w-40",children:s.jsx(en,{})}),s.jsx(Ht,{children:rne.map(y=>s.jsx($e,{value:y.value,children:y.label},y.value))})]}),s.jsx(Ws,{orientation:"vertical",className:"h-6"}),s.jsxs("div",{className:"hidden md:flex border rounded-lg overflow-hidden",children:[s.jsx(Y,{variant:h==="grid"?"default":"ghost",size:"icon",onClick:()=>f("grid"),className:`rounded-none w-15 h-15 ${h==="grid"?"bg-primary text-white":"bg-muted text-muted-foreground"}`,title:"Vue en grille",children:s.jsx("img",{src:sne,alt:"Vue grille",className:"w-5 h-5"})}),s.jsx(Y,{variant:h==="list"?"default":"ghost",size:"icon",onClick:()=>f("list"),className:`rounded-none w-15 h-15 ${h==="list"?"bg-primary text-white":"bg-muted text-muted-foreground"}`,title:"Vue en liste",children:s.jsx("img",{src:ine,alt:"Vue liste",className:"w-5 h-5"})})]})]})]}),r&&n.length===0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((y,C)=>s.jsxs(le,{className:"animate-pulse",children:[s.jsx("div",{className:"aspect-[4/3] bg-muted"}),s.jsxs(ue,{className:"p-4 space-y-2",children:[s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},C))}):n.length>0?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:`grid gap-8 justify-items-center ${h==="grid"?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3":"grid-cols-1"}`,children:n.map(y=>s.jsx(Sm,{listing:y},y.id))}),i&&s.jsx("div",{className:"text-center mt-8",children:s.jsx(Y,{onClick:N,disabled:r,variant:"outline",size:"lg",children:r?"Chargement...":"Charger plus"})})]}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Aucun résultat trouvé"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Essayez de modifier vos critères de recherche"}),s.jsx(Y,{onClick:S,variant:"outline",children:"Effacer les filtres"})]})]})]})]})};var ON="Dialog",[MO,mce]=As(ON),[one,Ai]=MO(ON),DO=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:a,modal:o=!0}=t,c=x.useRef(null),u=x.useRef(null),[h=!1,f]=ks({prop:r,defaultProp:i,onChange:a});return s.jsx(one,{scope:e,triggerRef:c,contentRef:u,contentId:Ns(),titleId:Ns(),descriptionId:Ns(),open:h,onOpenChange:f,onOpenToggle:x.useCallback(()=>f(p=>!p),[f]),modal:o,children:n})};DO.displayName=ON;var OO="DialogTrigger",LO=x.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Ai(OO,n),a=vt(e,i.triggerRef);return s.jsx(Ge.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":FN(i.open),...r,ref:a,onClick:Ie(t.onClick,i.onOpenToggle)})});LO.displayName=OO;var LN="DialogPortal",[lne,VO]=MO(LN,{forceMount:void 0}),FO=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,a=Ai(LN,e);return s.jsx(lne,{scope:e,forceMount:n,children:x.Children.map(r,o=>s.jsx(wr,{present:n||a.open,children:s.jsx(vp,{asChild:!0,container:i,children:o})}))})};FO.displayName=LN;var Cx="DialogOverlay",zO=x.forwardRef((t,e)=>{const n=VO(Cx,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,a=Ai(Cx,t.__scopeDialog);return a.modal?s.jsx(wr,{present:r||a.open,children:s.jsx(cne,{...i,ref:e})}):null});zO.displayName=Cx;var cne=x.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Ai(Cx,n);return s.jsx(xp,{as:ro,allowPinchZoom:!0,shards:[i.contentRef],children:s.jsx(Ge.div,{"data-state":FN(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Fc="DialogContent",UO=x.forwardRef((t,e)=>{const n=VO(Fc,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,a=Ai(Fc,t.__scopeDialog);return s.jsx(wr,{present:r||a.open,children:a.modal?s.jsx(une,{...i,ref:e}):s.jsx(dne,{...i,ref:e})})});UO.displayName=Fc;var une=x.forwardRef((t,e)=>{const n=Ai(Fc,t.__scopeDialog),r=x.useRef(null),i=vt(e,n.contentRef,r);return x.useEffect(()=>{const a=r.current;if(a)return Gy(a)},[]),s.jsx($O,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ie(t.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Ie(t.onPointerDownOutside,a=>{const o=a.detail.originalEvent,c=o.button===0&&o.ctrlKey===!0;(o.button===2||c)&&a.preventDefault()}),onFocusOutside:Ie(t.onFocusOutside,a=>a.preventDefault())})}),dne=x.forwardRef((t,e)=>{const n=Ai(Fc,t.__scopeDialog),r=x.useRef(!1),i=x.useRef(!1);return s.jsx($O,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,c;(o=t.onCloseAutoFocus)==null||o.call(t,a),a.defaultPrevented||(r.current||(c=n.triggerRef.current)==null||c.focus(),a.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:a=>{var u,h;(u=t.onInteractOutside)==null||u.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((h=n.triggerRef.current)==null?void 0:h.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),$O=x.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,...o}=t,c=Ai(Fc,n),u=x.useRef(null),h=vt(e,u);return Fy(),s.jsxs(s.Fragment,{children:[s.jsx(pp,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:s.jsx(mp,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":FN(c.open),...o,ref:h,onDismiss:()=>c.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(hne,{titleId:c.titleId}),s.jsx(mne,{contentRef:u,descriptionId:c.descriptionId})]})]})}),VN="DialogTitle",BO=x.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Ai(VN,n);return s.jsx(Ge.h2,{id:i.titleId,...r,ref:e})});BO.displayName=VN;var WO="DialogDescription",qO=x.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Ai(WO,n);return s.jsx(Ge.p,{id:i.descriptionId,...r,ref:e})});qO.displayName=WO;var HO="DialogClose",GO=x.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Ai(HO,n);return s.jsx(Ge.button,{type:"button",...r,ref:e,onClick:Ie(t.onClick,()=>i.onOpenChange(!1))})});GO.displayName=HO;function FN(t){return t?"open":"closed"}var ZO="DialogTitleWarning",[pce,KO]=yZ(ZO,{contentName:Fc,titleName:VN,docsSlug:"dialog"}),hne=({titleId:t})=>{const e=KO(ZO),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return x.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},fne="DialogDescriptionWarning",mne=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${KO(fne).contentName}}.`;return x.useEffect(()=>{var a;const i=(a=t.current)==null?void 0:a.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},pne=DO,gne=LO,vne=FO,YO=zO,QO=UO,XO=BO,JO=qO,xne=GO;const ra=pne,pd=gne,yne=vne,eL=x.forwardRef(({className:t,...e},n)=>s.jsx(YO,{ref:n,className:Je("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));eL.displayName=YO.displayName;const wi=x.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(yne,{children:[s.jsx(eL,{}),s.jsxs(QO,{ref:r,className:Je("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,s.jsxs(xne,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(mX,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));wi.displayName=QO.displayName;const sa=({className:t,...e})=>s.jsx("div",{className:Je("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});sa.displayName="DialogHeader";const gv=({className:t,...e})=>s.jsx("div",{className:Je("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});gv.displayName="DialogFooter";const bi=x.forwardRef(({className:t,...e},n)=>s.jsx(XO,{ref:n,className:Je("text-lg font-semibold leading-none tracking-tight",t),...e}));bi.displayName=XO.displayName;const xc=x.forwardRef(({className:t,...e},n)=>s.jsx(JO,{ref:n,className:Je("text-sm text-muted-foreground",t),...e}));xc.displayName=JO.displayName;const Es=x.forwardRef(({className:t,...e},n)=>s.jsx("textarea",{className:Je("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));Es.displayName="Textarea";var _ne="Label",tL=x.forwardRef((t,e)=>s.jsx(Ge.label,{...t,ref:e,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));tL.displayName=_ne;var nL=tL;const wne=Vy("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ee=x.forwardRef(({className:t,...e},n)=>s.jsx(nL,{ref:n,className:Je(wne(),t),...e}));Ee.displayName=nL.displayName;const bne=Vy("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Ut=x.forwardRef(({className:t,variant:e,...n},r)=>s.jsx("div",{ref:r,role:"alert",className:Je(bne({variant:e}),t),...n}));Ut.displayName="Alert";const jne=x.forwardRef(({className:t,...e},n)=>s.jsx("h5",{ref:n,className:Je("mb-1 font-medium leading-none tracking-tight",t),...e}));jne.displayName="AlertTitle";const $t=x.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:Je("text-sm [&_p]:leading-relaxed",t),...e}));$t.displayName="AlertDescription";var ct=function(){return ct=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ct.apply(this,arguments)};function Nne(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function rL(t,e,n){for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function jp(t){return t.mode==="multiple"}function Np(t){return t.mode==="range"}function s0(t){return t.mode==="single"}var Sne={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function Ene(t,e){return sr(t,"LLLL y",e)}function Cne(t,e){return sr(t,"d",e)}function Tne(t,e){return sr(t,"LLLL",e)}function kne(t){return"".concat(t)}function Pne(t,e){return sr(t,"cccccc",e)}function Ine(t,e){return sr(t,"yyyy",e)}var Ane=Object.freeze({__proto__:null,formatCaption:Ene,formatDay:Cne,formatMonthCaption:Tne,formatWeekNumber:kne,formatWeekdayName:Pne,formatYearCaption:Ine}),Rne=function(t,e,n){return sr(t,"do MMMM (EEEE)",n)},Mne=function(){return"Month: "},Dne=function(){return"Go to next month"},One=function(){return"Go to previous month"},Lne=function(t,e){return sr(t,"cccc",e)},Vne=function(t){return"Week n. ".concat(t)},Fne=function(){return"Year: "},zne=Object.freeze({__proto__:null,labelDay:Rne,labelMonthDropdown:Mne,labelNext:Dne,labelPrevious:One,labelWeekNumber:Vne,labelWeekday:Lne,labelYearDropdown:Fne});function Une(){var t="buttons",e=Sne,n=RN,r={},i={},a=1,o={},c=new Date;return{captionLayout:t,classNames:e,formatters:Ane,labels:zne,locale:n,modifiersClassNames:r,modifiers:i,numberOfMonths:a,styles:o,today:c,mode:"default"}}function $ne(t){var e=t.fromYear,n=t.toYear,r=t.fromMonth,i=t.toMonth,a=t.fromDate,o=t.toDate;return r?a=ds(r):e&&(a=new Date(e,0,1)),i?o=Jy(i):n&&(o=new Date(n,11,31)),{fromDate:a?Fd(a):void 0,toDate:o?Fd(o):void 0}}var sL=x.createContext(void 0);function Bne(t){var e,n=t.initialProps,r=Une(),i=$ne(n),a=i.fromDate,o=i.toDate,c=(e=n.captionLayout)!==null&&e!==void 0?e:r.captionLayout;c!=="buttons"&&(!a||!o)&&(c="buttons");var u;(s0(n)||jp(n)||Np(n))&&(u=n.onSelect);var h=ct(ct(ct({},r),n),{captionLayout:c,classNames:ct(ct({},r.classNames),n.classNames),components:ct({},n.components),formatters:ct(ct({},r.formatters),n.formatters),fromDate:a,labels:ct(ct({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:ct(ct({},r.modifiers),n.modifiers),modifiersClassNames:ct(ct({},r.modifiersClassNames),n.modifiersClassNames),onSelect:u,styles:ct(ct({},r.styles),n.styles),toDate:o});return s.jsx(sL.Provider,{value:h,children:t.children})}function an(){var t=x.useContext(sL);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function iL(t){var e=an(),n=e.locale,r=e.classNames,i=e.styles,a=e.formatters.formatCaption;return s.jsx("div",{className:r.caption_label,style:i.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:a(t.displayMonth,{locale:n})})}function Wne(t){return s.jsx("svg",ct({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:s.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function aL(t){var e,n,r=t.onChange,i=t.value,a=t.children,o=t.caption,c=t.className,u=t.style,h=an(),f=(n=(e=h.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&n!==void 0?n:Wne;return s.jsxs("div",{className:c,style:u,children:[s.jsx("span",{className:h.classNames.vhidden,children:t["aria-label"]}),s.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:h.classNames.dropdown,style:h.styles.dropdown,value:i,onChange:r,children:a}),s.jsxs("div",{className:h.classNames.caption_label,style:h.styles.caption_label,"aria-hidden":"true",children:[o,s.jsx(f,{className:h.classNames.dropdown_icon,style:h.styles.dropdown_icon})]})]})}function qne(t){var e,n=an(),r=n.fromDate,i=n.toDate,a=n.styles,o=n.locale,c=n.formatters.formatMonthCaption,u=n.classNames,h=n.components,f=n.labels.labelMonthDropdown;if(!r)return s.jsx(s.Fragment,{});if(!i)return s.jsx(s.Fragment,{});var p=[];if(jee(r,i))for(var v=ds(r),_=r.getMonth();_<=i.getMonth();_++)p.push(k_(v,_));else for(var v=ds(new Date),_=0;_<=11;_++)p.push(k_(v,_));var b=function(S){var w=Number(S.target.value),y=k_(ds(t.displayMonth),w);t.onChange(y)},N=(e=h==null?void 0:h.Dropdown)!==null&&e!==void 0?e:aL;return s.jsx(N,{name:"months","aria-label":f(),className:u.dropdown_month,style:a.dropdown_month,onChange:b,value:t.displayMonth.getMonth(),caption:c(t.displayMonth,{locale:o}),children:p.map(function(S){return s.jsx("option",{value:S.getMonth(),children:c(S,{locale:o})},S.getMonth())})})}function Hne(t){var e,n=t.displayMonth,r=an(),i=r.fromDate,a=r.toDate,o=r.locale,c=r.styles,u=r.classNames,h=r.components,f=r.formatters.formatYearCaption,p=r.labels.labelYearDropdown,v=[];if(!i)return s.jsx(s.Fragment,{});if(!a)return s.jsx(s.Fragment,{});for(var _=i.getFullYear(),b=a.getFullYear(),N=_;N<=b;N++)v.push(bT(VD(new Date),N));var S=function(y){var C=bT(ds(n),Number(y.target.value));t.onChange(C)},w=(e=h==null?void 0:h.Dropdown)!==null&&e!==void 0?e:aL;return s.jsx(w,{name:"years","aria-label":p(),className:u.dropdown_year,style:c.dropdown_year,onChange:S,value:n.getFullYear(),caption:f(n,{locale:o}),children:v.map(function(y){return s.jsx("option",{value:y.getFullYear(),children:f(y,{locale:o})},y.getFullYear())})})}function Gne(t,e){var n=x.useState(t),r=n[0],i=n[1],a=e===void 0?r:e;return[a,i]}function Zne(t){var e=t.month,n=t.defaultMonth,r=t.today,i=e||n||r||new Date,a=t.toDate,o=t.fromDate,c=t.numberOfMonths,u=c===void 0?1:c;if(a&&Ud(a,i)<0){var h=-1*(u-1);i=Ti(a,h)}return o&&Ud(i,o)<0&&(i=o),ds(i)}function Kne(){var t=an(),e=Zne(t),n=Gne(e,t.month),r=n[0],i=n[1],a=function(o){var c;if(!t.disableNavigation){var u=ds(o);i(u),(c=t.onMonthChange)===null||c===void 0||c.call(t,u)}};return[r,a]}function Yne(t,e){for(var n=e.reverseMonths,r=e.numberOfMonths,i=ds(t),a=ds(Ti(i,r)),o=Ud(a,i),c=[],u=0;u<o;u++){var h=Ti(i,u);c.push(h)}return n&&(c=c.reverse()),c}function Qne(t,e){if(!e.disableNavigation){var n=e.toDate,r=e.pagedNavigation,i=e.numberOfMonths,a=i===void 0?1:i,o=r?a:1,c=ds(t);if(!n)return Ti(c,o);var u=Ud(n,t);if(!(u<a))return Ti(c,o)}}function Xne(t,e){if(!e.disableNavigation){var n=e.fromDate,r=e.pagedNavigation,i=e.numberOfMonths,a=i===void 0?1:i,o=r?a:1,c=ds(t);if(!n)return Ti(c,-o);var u=Ud(c,n);if(!(u<=0))return Ti(c,-o)}}var oL=x.createContext(void 0);function Jne(t){var e=an(),n=Kne(),r=n[0],i=n[1],a=Yne(r,e),o=Qne(r,e),c=Xne(r,e),u=function(p){return a.some(function(v){return MN(p,v)})},h=function(p,v){u(p)||(v&&qD(p,v)?i(Ti(p,1+e.numberOfMonths*-1)):i(p))},f={currentMonth:r,displayMonths:a,goToMonth:i,goToDate:h,previousMonth:c,nextMonth:o,isDateDisplayed:u};return s.jsx(oL.Provider,{value:f,children:t.children})}function Sp(){var t=x.useContext(oL);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function ET(t){var e,n=an(),r=n.classNames,i=n.styles,a=n.components,o=Sp().goToMonth,c=function(f){o(Ti(f,t.displayIndex?-t.displayIndex:0))},u=(e=a==null?void 0:a.CaptionLabel)!==null&&e!==void 0?e:iL,h=s.jsx(u,{id:t.id,displayMonth:t.displayMonth});return s.jsxs("div",{className:r.caption_dropdowns,style:i.caption_dropdowns,children:[s.jsx("div",{className:r.vhidden,children:h}),s.jsx(qne,{onChange:c,displayMonth:t.displayMonth}),s.jsx(Hne,{onChange:c,displayMonth:t.displayMonth})]})}function ere(t){return s.jsx("svg",ct({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:s.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function tre(t){return s.jsx("svg",ct({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:s.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Tx=x.forwardRef(function(t,e){var n=an(),r=n.classNames,i=n.styles,a=[r.button_reset,r.button];t.className&&a.push(t.className);var o=a.join(" "),c=ct(ct({},i.button_reset),i.button);return t.style&&Object.assign(c,t.style),s.jsx("button",ct({},t,{ref:e,type:"button",className:o,style:c}))});function nre(t){var e,n,r=an(),i=r.dir,a=r.locale,o=r.classNames,c=r.styles,u=r.labels,h=u.labelPrevious,f=u.labelNext,p=r.components;if(!t.nextMonth&&!t.previousMonth)return s.jsx(s.Fragment,{});var v=h(t.previousMonth,{locale:a}),_=[o.nav_button,o.nav_button_previous].join(" "),b=f(t.nextMonth,{locale:a}),N=[o.nav_button,o.nav_button_next].join(" "),S=(e=p==null?void 0:p.IconRight)!==null&&e!==void 0?e:tre,w=(n=p==null?void 0:p.IconLeft)!==null&&n!==void 0?n:ere;return s.jsxs("div",{className:o.nav,style:c.nav,children:[!t.hidePrevious&&s.jsx(Tx,{name:"previous-month","aria-label":v,className:_,style:c.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:i==="rtl"?s.jsx(S,{className:o.nav_icon,style:c.nav_icon}):s.jsx(w,{className:o.nav_icon,style:c.nav_icon})}),!t.hideNext&&s.jsx(Tx,{name:"next-month","aria-label":b,className:N,style:c.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:i==="rtl"?s.jsx(w,{className:o.nav_icon,style:c.nav_icon}):s.jsx(S,{className:o.nav_icon,style:c.nav_icon})})]})}function CT(t){var e=an().numberOfMonths,n=Sp(),r=n.previousMonth,i=n.nextMonth,a=n.goToMonth,o=n.displayMonths,c=o.findIndex(function(b){return MN(t.displayMonth,b)}),u=c===0,h=c===o.length-1,f=e>1&&(u||!h),p=e>1&&(h||!u),v=function(){r&&a(r)},_=function(){i&&a(i)};return s.jsx(nre,{displayMonth:t.displayMonth,hideNext:f,hidePrevious:p,nextMonth:i,previousMonth:r,onPreviousClick:v,onNextClick:_})}function rre(t){var e,n=an(),r=n.classNames,i=n.disableNavigation,a=n.styles,o=n.captionLayout,c=n.components,u=(e=c==null?void 0:c.CaptionLabel)!==null&&e!==void 0?e:iL,h;return i?h=s.jsx(u,{id:t.id,displayMonth:t.displayMonth}):o==="dropdown"?h=s.jsx(ET,{displayMonth:t.displayMonth,id:t.id}):o==="dropdown-buttons"?h=s.jsxs(s.Fragment,{children:[s.jsx(ET,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),s.jsx(CT,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):h=s.jsxs(s.Fragment,{children:[s.jsx(u,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),s.jsx(CT,{displayMonth:t.displayMonth,id:t.id})]}),s.jsx("div",{className:r.caption,style:a.caption,children:h})}function sre(t){var e=an(),n=e.footer,r=e.styles,i=e.classNames.tfoot;return n?s.jsx("tfoot",{className:i,style:r.tfoot,children:s.jsx("tr",{children:s.jsx("td",{colSpan:8,children:n})})}):s.jsx(s.Fragment,{})}function ire(t,e,n){for(var r=n?Lc(new Date):ca(new Date,{locale:t,weekStartsOn:e}),i=[],a=0;a<7;a++){var o=Fr(r,a);i.push(o)}return i}function are(){var t=an(),e=t.classNames,n=t.styles,r=t.showWeekNumber,i=t.locale,a=t.weekStartsOn,o=t.ISOWeek,c=t.formatters.formatWeekdayName,u=t.labels.labelWeekday,h=ire(i,a,o);return s.jsxs("tr",{style:n.head_row,className:e.head_row,children:[r&&s.jsx("td",{style:n.head_cell,className:e.head_cell}),h.map(function(f,p){return s.jsx("th",{scope:"col",className:e.head_cell,style:n.head_cell,"aria-label":u(f,{locale:i}),children:c(f,{locale:i})},p)})]})}function ore(){var t,e=an(),n=e.classNames,r=e.styles,i=e.components,a=(t=i==null?void 0:i.HeadRow)!==null&&t!==void 0?t:are;return s.jsx("thead",{style:r.head,className:n.head,children:s.jsx(a,{})})}function lre(t){var e=an(),n=e.locale,r=e.formatters.formatDay;return s.jsx(s.Fragment,{children:r(t.date,{locale:n})})}var zN=x.createContext(void 0);function cre(t){if(!jp(t.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return s.jsx(zN.Provider,{value:e,children:t.children})}return s.jsx(ure,{initialProps:t.initialProps,children:t.children})}function ure(t){var e=t.initialProps,n=t.children,r=e.selected,i=e.min,a=e.max,o=function(h,f,p){var v,_;(v=e.onDayClick)===null||v===void 0||v.call(e,h,f,p);var b=!!(f.selected&&i&&(r==null?void 0:r.length)===i);if(!b){var N=!!(!f.selected&&a&&(r==null?void 0:r.length)===a);if(!N){var S=r?rL([],r):[];if(f.selected){var w=S.findIndex(function(y){return is(h,y)});S.splice(w,1)}else S.push(h);(_=e.onSelect)===null||_===void 0||_.call(e,S,h,f,p)}}},c={disabled:[]};r&&c.disabled.push(function(h){var f=a&&r.length>a-1,p=r.some(function(v){return is(v,h)});return!!(f&&!p)});var u={selected:r,onDayClick:o,modifiers:c};return s.jsx(zN.Provider,{value:u,children:n})}function UN(){var t=x.useContext(zN);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function dre(t,e){var n=e||{},r=n.from,i=n.to;return r&&i?is(i,t)&&is(r,t)?void 0:is(i,t)?{from:i,to:void 0}:is(r,t)?void 0:C1(r,t)?{from:t,to:i}:{from:r,to:t}:i?C1(t,i)?{from:i,to:t}:{from:t,to:i}:r?qD(t,r)?{from:t,to:r}:{from:r,to:t}:{from:t,to:void 0}}var $N=x.createContext(void 0);function hre(t){if(!Np(t.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return s.jsx($N.Provider,{value:e,children:t.children})}return s.jsx(fre,{initialProps:t.initialProps,children:t.children})}function fre(t){var e=t.initialProps,n=t.children,r=e.selected,i=r||{},a=i.from,o=i.to,c=e.min,u=e.max,h=function(_,b,N){var S,w;(S=e.onDayClick)===null||S===void 0||S.call(e,_,b,N);var y=dre(_,r);(w=e.onSelect)===null||w===void 0||w.call(e,y,_,b,N)},f={range_start:[],range_end:[],range_middle:[],disabled:[]};if(a?(f.range_start=[a],o?(f.range_end=[o],is(a,o)||(f.range_middle=[{after:a,before:o}])):f.range_end=[a]):o&&(f.range_start=[o],f.range_end=[o]),c&&(a&&!o&&f.disabled.push({after:T_(a,c-1),before:Fr(a,c-1)}),a&&o&&f.disabled.push({after:a,before:Fr(a,c-1)}),!a&&o&&f.disabled.push({after:T_(o,c-1),before:Fr(o,c-1)})),u){if(a&&!o&&(f.disabled.push({before:Fr(a,-u+1)}),f.disabled.push({after:Fr(a,u-1)})),a&&o){var p=Zi(o,a)+1,v=u-p;f.disabled.push({before:T_(a,v)}),f.disabled.push({after:Fr(o,v)})}!a&&o&&(f.disabled.push({before:Fr(o,-u+1)}),f.disabled.push({after:Fr(o,u-1)}))}return s.jsx($N.Provider,{value:{selected:r,onDayClick:h,modifiers:f},children:n})}function BN(){var t=x.useContext($N);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function vv(t){return Array.isArray(t)?rL([],t):t!==void 0?[t]:[]}function mre(t){var e={};return Object.entries(t).forEach(function(n){var r=n[0],i=n[1];e[r]=vv(i)}),e}var ki;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(ki||(ki={}));var pre=ki.Selected,Aa=ki.Disabled,gre=ki.Hidden,vre=ki.Today,I_=ki.RangeEnd,A_=ki.RangeMiddle,R_=ki.RangeStart,xre=ki.Outside;function yre(t,e,n){var r,i=(r={},r[pre]=vv(t.selected),r[Aa]=vv(t.disabled),r[gre]=vv(t.hidden),r[vre]=[t.today],r[I_]=[],r[A_]=[],r[R_]=[],r[xre]=[],r);return t.fromDate&&i[Aa].push({before:t.fromDate}),t.toDate&&i[Aa].push({after:t.toDate}),jp(t)?i[Aa]=i[Aa].concat(e.modifiers[Aa]):Np(t)&&(i[Aa]=i[Aa].concat(n.modifiers[Aa]),i[R_]=n.modifiers[R_],i[A_]=n.modifiers[A_],i[I_]=n.modifiers[I_]),i}var lL=x.createContext(void 0);function _re(t){var e=an(),n=UN(),r=BN(),i=yre(e,n,r),a=mre(e.modifiers),o=ct(ct({},i),a);return s.jsx(lL.Provider,{value:o,children:t.children})}function cL(){var t=x.useContext(lL);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function wre(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function bre(t){return!!(t&&typeof t=="object"&&"from"in t)}function jre(t){return!!(t&&typeof t=="object"&&"after"in t)}function Nre(t){return!!(t&&typeof t=="object"&&"before"in t)}function Sre(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function Ere(t,e){var n,r=e.from,i=e.to;if(r&&i){var a=Zi(i,r)<0;a&&(n=[i,r],r=n[0],i=n[1]);var o=Zi(t,r)>=0&&Zi(i,t)>=0;return o}return i?is(i,t):r?is(r,t):!1}function Cre(t){return IN(t)}function Tre(t){return Array.isArray(t)&&t.every(IN)}function kre(t,e){return e.some(function(n){if(typeof n=="boolean")return n;if(Cre(n))return is(t,n);if(Tre(n))return n.includes(t);if(bre(n))return Ere(t,n);if(Sre(n))return n.dayOfWeek.includes(t.getDay());if(wre(n)){var r=Zi(n.before,t),i=Zi(n.after,t),a=r>0,o=i<0,c=C1(n.before,n.after);return c?o&&a:a||o}return jre(n)?Zi(t,n.after)>0:Nre(n)?Zi(n.before,t)>0:typeof n=="function"?n(t):!1})}function WN(t,e,n){var r=Object.keys(e).reduce(function(a,o){var c=e[o];return kre(t,c)&&a.push(o),a},[]),i={};return r.forEach(function(a){return i[a]=!0}),n&&!MN(t,n)&&(i.outside=!0),i}function Pre(t,e){for(var n=ds(t[0]),r=Jy(t[t.length-1]),i,a,o=n;o<=r;){var c=WN(o,e),u=!c.disabled&&!c.hidden;if(!u){o=Fr(o,1);continue}if(c.selected)return o;c.today&&!a&&(a=o),i||(i=o),o=Fr(o,1)}return a||i}var Ire=365;function uL(t,e){var n=e.moveBy,r=e.direction,i=e.context,a=e.modifiers,o=e.retry,c=o===void 0?{count:0,lastFocused:t}:o,u=i.weekStartsOn,h=i.fromDate,f=i.toDate,p=i.locale,v={day:Fr,week:E1,month:Ti,year:hJ,startOfWeek:function(S){return i.ISOWeek?Lc(S):ca(S,{locale:p,weekStartsOn:u})},endOfWeek:function(S){return i.ISOWeek?FD(S):AN(S,{locale:p,weekStartsOn:u})}},_=v[n](t,r==="after"?1:-1);r==="before"&&h?_=fJ([h,_]):r==="after"&&f&&(_=mJ([f,_]));var b=!0;if(a){var N=WN(_,a);b=!N.disabled&&!N.hidden}return b?_:c.count>Ire?c.lastFocused:uL(_,{moveBy:n,direction:r,context:i,modifiers:a,retry:ct(ct({},c),{count:c.count+1})})}var dL=x.createContext(void 0);function Are(t){var e=Sp(),n=cL(),r=x.useState(),i=r[0],a=r[1],o=x.useState(),c=o[0],u=o[1],h=Pre(e.displayMonths,n),f=i??(c&&e.isDateDisplayed(c))?c:h,p=function(){u(i),a(void 0)},v=function(S){a(S)},_=an(),b=function(S,w){if(i){var y=uL(i,{moveBy:S,direction:w,context:_,modifiers:n});is(i,y)||(e.goToDate(y,i),v(y))}},N={focusedDay:i,focusTarget:f,blur:p,focus:v,focusDayAfter:function(){return b("day","after")},focusDayBefore:function(){return b("day","before")},focusWeekAfter:function(){return b("week","after")},focusWeekBefore:function(){return b("week","before")},focusMonthBefore:function(){return b("month","before")},focusMonthAfter:function(){return b("month","after")},focusYearBefore:function(){return b("year","before")},focusYearAfter:function(){return b("year","after")},focusStartOfWeek:function(){return b("startOfWeek","before")},focusEndOfWeek:function(){return b("endOfWeek","after")}};return s.jsx(dL.Provider,{value:N,children:t.children})}function qN(){var t=x.useContext(dL);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function Rre(t,e){var n=cL(),r=WN(t,n,e);return r}var HN=x.createContext(void 0);function Mre(t){if(!s0(t.initialProps)){var e={selected:void 0};return s.jsx(HN.Provider,{value:e,children:t.children})}return s.jsx(Dre,{initialProps:t.initialProps,children:t.children})}function Dre(t){var e=t.initialProps,n=t.children,r=function(a,o,c){var u,h,f;if((u=e.onDayClick)===null||u===void 0||u.call(e,a,o,c),o.selected&&!e.required){(h=e.onSelect)===null||h===void 0||h.call(e,void 0,a,o,c);return}(f=e.onSelect)===null||f===void 0||f.call(e,a,a,o,c)},i={selected:e.selected,onDayClick:r};return s.jsx(HN.Provider,{value:i,children:n})}function hL(){var t=x.useContext(HN);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function Ore(t,e){var n=an(),r=hL(),i=UN(),a=BN(),o=qN(),c=o.focusDayAfter,u=o.focusDayBefore,h=o.focusWeekAfter,f=o.focusWeekBefore,p=o.blur,v=o.focus,_=o.focusMonthBefore,b=o.focusMonthAfter,N=o.focusYearBefore,S=o.focusYearAfter,w=o.focusStartOfWeek,y=o.focusEndOfWeek,C=function(K){var U,W,H,Q;s0(n)?(U=r.onDayClick)===null||U===void 0||U.call(r,t,e,K):jp(n)?(W=i.onDayClick)===null||W===void 0||W.call(i,t,e,K):Np(n)?(H=a.onDayClick)===null||H===void 0||H.call(a,t,e,K):(Q=n.onDayClick)===null||Q===void 0||Q.call(n,t,e,K)},R=function(K){var U;v(t),(U=n.onDayFocus)===null||U===void 0||U.call(n,t,e,K)},M=function(K){var U;p(),(U=n.onDayBlur)===null||U===void 0||U.call(n,t,e,K)},B=function(K){var U;(U=n.onDayMouseEnter)===null||U===void 0||U.call(n,t,e,K)},O=function(K){var U;(U=n.onDayMouseLeave)===null||U===void 0||U.call(n,t,e,K)},D=function(K){var U;(U=n.onDayPointerEnter)===null||U===void 0||U.call(n,t,e,K)},F=function(K){var U;(U=n.onDayPointerLeave)===null||U===void 0||U.call(n,t,e,K)},I=function(K){var U;(U=n.onDayTouchCancel)===null||U===void 0||U.call(n,t,e,K)},V=function(K){var U;(U=n.onDayTouchEnd)===null||U===void 0||U.call(n,t,e,K)},k=function(K){var U;(U=n.onDayTouchMove)===null||U===void 0||U.call(n,t,e,K)},P=function(K){var U;(U=n.onDayTouchStart)===null||U===void 0||U.call(n,t,e,K)},q=function(K){var U;(U=n.onDayKeyUp)===null||U===void 0||U.call(n,t,e,K)},te=function(K){var U;switch(K.key){case"ArrowLeft":K.preventDefault(),K.stopPropagation(),n.dir==="rtl"?c():u();break;case"ArrowRight":K.preventDefault(),K.stopPropagation(),n.dir==="rtl"?u():c();break;case"ArrowDown":K.preventDefault(),K.stopPropagation(),h();break;case"ArrowUp":K.preventDefault(),K.stopPropagation(),f();break;case"PageUp":K.preventDefault(),K.stopPropagation(),K.shiftKey?N():_();break;case"PageDown":K.preventDefault(),K.stopPropagation(),K.shiftKey?S():b();break;case"Home":K.preventDefault(),K.stopPropagation(),w();break;case"End":K.preventDefault(),K.stopPropagation(),y();break}(U=n.onDayKeyDown)===null||U===void 0||U.call(n,t,e,K)},re={onClick:C,onFocus:R,onBlur:M,onKeyDown:te,onKeyUp:q,onMouseEnter:B,onMouseLeave:O,onPointerEnter:D,onPointerLeave:F,onTouchCancel:I,onTouchEnd:V,onTouchMove:k,onTouchStart:P};return re}function Lre(){var t=an(),e=hL(),n=UN(),r=BN(),i=s0(t)?e.selected:jp(t)?n.selected:Np(t)?r.selected:void 0;return i}function Vre(t){return Object.values(ki).includes(t)}function Fre(t,e){var n=[t.classNames.day];return Object.keys(e).forEach(function(r){var i=t.modifiersClassNames[r];if(i)n.push(i);else if(Vre(r)){var a=t.classNames["day_".concat(r)];a&&n.push(a)}}),n}function zre(t,e){var n=ct({},t.styles.day);return Object.keys(e).forEach(function(r){var i;n=ct(ct({},n),(i=t.modifiersStyles)===null||i===void 0?void 0:i[r])}),n}function Ure(t,e,n){var r,i,a,o=an(),c=qN(),u=Rre(t,e),h=Ore(t,u),f=Lre(),p=!!(o.onDayClick||o.mode!=="default");x.useEffect(function(){var B;u.outside||c.focusedDay&&p&&is(c.focusedDay,t)&&((B=n.current)===null||B===void 0||B.focus())},[c.focusedDay,t,n,p,u.outside]);var v=Fre(o,u).join(" "),_=zre(o,u),b=!!(u.outside&&!o.showOutsideDays||u.hidden),N=(a=(i=o.components)===null||i===void 0?void 0:i.DayContent)!==null&&a!==void 0?a:lre,S=s.jsx(N,{date:t,displayMonth:e,activeModifiers:u}),w={style:_,className:v,children:S,role:"gridcell"},y=c.focusTarget&&is(c.focusTarget,t)&&!u.outside,C=c.focusedDay&&is(c.focusedDay,t),R=ct(ct(ct({},w),(r={disabled:u.disabled,role:"gridcell"},r["aria-selected"]=u.selected,r.tabIndex=C||y?0:-1,r)),h),M={isButton:p,isHidden:b,activeModifiers:u,selectedDays:f,buttonProps:R,divProps:w};return M}function $re(t){var e=x.useRef(null),n=Ure(t.date,t.displayMonth,e);return n.isHidden?s.jsx("div",{role:"gridcell"}):n.isButton?s.jsx(Tx,ct({name:"day",ref:e},n.buttonProps)):s.jsx("div",ct({},n.divProps))}function Bre(t){var e=t.number,n=t.dates,r=an(),i=r.onWeekNumberClick,a=r.styles,o=r.classNames,c=r.locale,u=r.labels.labelWeekNumber,h=r.formatters.formatWeekNumber,f=h(Number(e),{locale:c});if(!i)return s.jsx("span",{className:o.weeknumber,style:a.weeknumber,children:f});var p=u(Number(e),{locale:c}),v=function(_){i(e,n,_)};return s.jsx(Tx,{name:"week-number","aria-label":p,className:o.weeknumber,style:a.weeknumber,onClick:v,children:f})}function Wre(t){var e,n,r=an(),i=r.styles,a=r.classNames,o=r.showWeekNumber,c=r.components,u=(e=c==null?void 0:c.Day)!==null&&e!==void 0?e:$re,h=(n=c==null?void 0:c.WeekNumber)!==null&&n!==void 0?n:Bre,f;return o&&(f=s.jsx("td",{className:a.cell,style:i.cell,children:s.jsx(h,{number:t.weekNumber,dates:t.dates})})),s.jsxs("tr",{className:a.row,style:i.row,children:[f,t.dates.map(function(p){return s.jsx("td",{className:a.cell,style:i.cell,role:"presentation",children:s.jsx(u,{displayMonth:t.displayMonth,date:p})},_ee(p))})]})}function TT(t,e,n){for(var r=n!=null&&n.ISOWeek?FD(e):AN(e,n),i=n!=null&&n.ISOWeek?Lc(t):ca(t,n),a=Zi(r,i),o=[],c=0;c<=a;c++)o.push(Fr(i,c));var u=o.reduce(function(h,f){var p=n!=null&&n.ISOWeek?UD(f):BD(f,n),v=h.find(function(_){return _.weekNumber===p});return v?(v.dates.push(f),h):(h.push({weekNumber:p,dates:[f]}),h)},[]);return u}function qre(t,e){var n=TT(ds(t),Jy(t),e);if(e!=null&&e.useFixedWeeks){var r=bee(t,e);if(r<6){var i=n[n.length-1],a=i.dates[i.dates.length-1],o=E1(a,6-r),c=TT(E1(a,1),o,e);n.push.apply(n,c)}}return n}function Hre(t){var e,n,r,i=an(),a=i.locale,o=i.classNames,c=i.styles,u=i.hideHead,h=i.fixedWeeks,f=i.components,p=i.weekStartsOn,v=i.firstWeekContainsDate,_=i.ISOWeek,b=qre(t.displayMonth,{useFixedWeeks:!!h,ISOWeek:_,locale:a,weekStartsOn:p,firstWeekContainsDate:v}),N=(e=f==null?void 0:f.Head)!==null&&e!==void 0?e:ore,S=(n=f==null?void 0:f.Row)!==null&&n!==void 0?n:Wre,w=(r=f==null?void 0:f.Footer)!==null&&r!==void 0?r:sre;return s.jsxs("table",{id:t.id,className:o.table,style:c.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!u&&s.jsx(N,{}),s.jsx("tbody",{className:o.tbody,style:c.tbody,children:b.map(function(y){return s.jsx(S,{displayMonth:t.displayMonth,dates:y.dates,weekNumber:y.weekNumber},y.weekNumber)})}),s.jsx(w,{displayMonth:t.displayMonth})]})}function Gre(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var Zre=Gre()?x.useLayoutEffect:x.useEffect,M_=!1,Kre=0;function kT(){return"react-day-picker-".concat(++Kre)}function Yre(t){var e,n=t??(M_?kT():null),r=x.useState(n),i=r[0],a=r[1];return Zre(function(){i===null&&a(kT())},[]),x.useEffect(function(){M_===!1&&(M_=!0)},[]),(e=t??i)!==null&&e!==void 0?e:void 0}function Qre(t){var e,n,r=an(),i=r.dir,a=r.classNames,o=r.styles,c=r.components,u=Sp().displayMonths,h=Yre(r.id?"".concat(r.id,"-").concat(t.displayIndex):void 0),f=r.id?"".concat(r.id,"-grid-").concat(t.displayIndex):void 0,p=[a.month],v=o.month,_=t.displayIndex===0,b=t.displayIndex===u.length-1,N=!_&&!b;i==="rtl"&&(e=[_,b],b=e[0],_=e[1]),_&&(p.push(a.caption_start),v=ct(ct({},v),o.caption_start)),b&&(p.push(a.caption_end),v=ct(ct({},v),o.caption_end)),N&&(p.push(a.caption_between),v=ct(ct({},v),o.caption_between));var S=(n=c==null?void 0:c.Caption)!==null&&n!==void 0?n:rre;return s.jsxs("div",{className:p.join(" "),style:v,children:[s.jsx(S,{id:h,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),s.jsx(Hre,{id:f,"aria-labelledby":h,displayMonth:t.displayMonth})]},t.displayIndex)}function Xre(t){var e=an(),n=e.classNames,r=e.styles;return s.jsx("div",{className:n.months,style:r.months,children:t.children})}function Jre(t){var e,n,r=t.initialProps,i=an(),a=qN(),o=Sp(),c=x.useState(!1),u=c[0],h=c[1];x.useEffect(function(){i.initialFocus&&a.focusTarget&&(u||(a.focus(a.focusTarget),h(!0)))},[i.initialFocus,u,a.focus,a.focusTarget,a]);var f=[i.classNames.root,i.className];i.numberOfMonths>1&&f.push(i.classNames.multiple_months),i.showWeekNumber&&f.push(i.classNames.with_weeknumber);var p=ct(ct({},i.styles.root),i.style),v=Object.keys(r).filter(function(b){return b.startsWith("data-")}).reduce(function(b,N){var S;return ct(ct({},b),(S={},S[N]=r[N],S))},{}),_=(n=(e=r.components)===null||e===void 0?void 0:e.Months)!==null&&n!==void 0?n:Xre;return s.jsx("div",ct({className:f.join(" "),style:p,dir:i.dir,id:i.id,nonce:r.nonce,title:r.title,lang:r.lang},v,{children:s.jsx(_,{children:o.displayMonths.map(function(b,N){return s.jsx(Qre,{displayIndex:N,displayMonth:b},N)})})}))}function ese(t){var e=t.children,n=Nne(t,["children"]);return s.jsx(Bne,{initialProps:n,children:s.jsx(Jne,{children:s.jsx(Mre,{initialProps:n,children:s.jsx(cre,{initialProps:n,children:s.jsx(hre,{initialProps:n,children:s.jsx(_re,{children:s.jsx(Are,{children:e})})})})})})})}function tse(t){return s.jsx(ese,ct({},t,{children:s.jsx(Jre,{initialProps:t})}))}function fL({className:t,classNames:e,showOutsideDays:n=!0,...r}){return s.jsx(tse,{showOutsideDays:n,className:Je("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Je(p1({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:Je("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected].day-range-end)]:rounded-r-md",r.mode==="range"?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:Je(p1({variant:"ghost"}),"h-8 w-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50  aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...e},components:{IconLeft:({...i})=>s.jsx(cX,{className:"h-4 w-4"}),IconRight:({...i})=>s.jsx(xD,{className:"h-4 w-4"})},...r})}fL.displayName="Calendar";var GN="Popover",[mL,gce]=As(GN,[ch]),Ep=ch(),[nse,Vl]=mL(GN),pL=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:i,onOpenChange:a,modal:o=!1}=t,c=Ep(e),u=x.useRef(null),[h,f]=x.useState(!1),[p=!1,v]=ks({prop:r,defaultProp:i,onChange:a});return s.jsx(vN,{...c,children:s.jsx(nse,{scope:e,contentId:Ns(),triggerRef:u,open:p,onOpenChange:v,onOpenToggle:x.useCallback(()=>v(_=>!_),[v]),hasCustomAnchor:h,onCustomAnchorAdd:x.useCallback(()=>f(!0),[]),onCustomAnchorRemove:x.useCallback(()=>f(!1),[]),modal:o,children:n})})};pL.displayName=GN;var gL="PopoverAnchor",rse=x.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Vl(gL,n),a=Ep(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:c}=i;return x.useEffect(()=>(o(),()=>c()),[o,c]),s.jsx(Wy,{...a,...r,ref:e})});rse.displayName=gL;var vL="PopoverTrigger",xL=x.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Vl(vL,n),a=Ep(n),o=vt(e,i.triggerRef),c=s.jsx(Ge.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":jL(i.open),...r,ref:o,onClick:Ie(t.onClick,i.onOpenToggle)});return i.hasCustomAnchor?c:s.jsx(Wy,{asChild:!0,...a,children:c})});xL.displayName=vL;var ZN="PopoverPortal",[sse,ise]=mL(ZN,{forceMount:void 0}),yL=t=>{const{__scopePopover:e,forceMount:n,children:r,container:i}=t,a=Vl(ZN,e);return s.jsx(sse,{scope:e,forceMount:n,children:s.jsx(wr,{present:n||a.open,children:s.jsx(vp,{asChild:!0,container:i,children:r})})})};yL.displayName=ZN;var $d="PopoverContent",_L=x.forwardRef((t,e)=>{const n=ise($d,t.__scopePopover),{forceMount:r=n.forceMount,...i}=t,a=Vl($d,t.__scopePopover);return s.jsx(wr,{present:r||a.open,children:a.modal?s.jsx(ase,{...i,ref:e}):s.jsx(ose,{...i,ref:e})})});_L.displayName=$d;var ase=x.forwardRef((t,e)=>{const n=Vl($d,t.__scopePopover),r=x.useRef(null),i=vt(e,r),a=x.useRef(!1);return x.useEffect(()=>{const o=r.current;if(o)return Gy(o)},[]),s.jsx(xp,{as:ro,allowPinchZoom:!0,children:s.jsx(wL,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ie(t.onCloseAutoFocus,o=>{var c;o.preventDefault(),a.current||(c=n.triggerRef.current)==null||c.focus()}),onPointerDownOutside:Ie(t.onPointerDownOutside,o=>{const c=o.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,h=c.button===2||u;a.current=h},{checkForDefaultPrevented:!1}),onFocusOutside:Ie(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),ose=x.forwardRef((t,e)=>{const n=Vl($d,t.__scopePopover),r=x.useRef(!1),i=x.useRef(!1);return s.jsx(wL,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,c;(o=t.onCloseAutoFocus)==null||o.call(t,a),a.defaultPrevented||(r.current||(c=n.triggerRef.current)==null||c.focus(),a.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:a=>{var u,h;(u=t.onInteractOutside)==null||u.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((h=n.triggerRef.current)==null?void 0:h.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),wL=x.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:f,...p}=t,v=Vl($d,n),_=Ep(n);return Fy(),s.jsx(pp,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:s.jsx(mp,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:f,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:h,onDismiss:()=>v.onOpenChange(!1),children:s.jsx(xN,{"data-state":jL(v.open),role:"dialog",id:v.contentId,..._,...p,ref:e,style:{...p.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),bL="PopoverClose",lse=x.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Vl(bL,n);return s.jsx(Ge.button,{type:"button",...r,ref:e,onClick:Ie(t.onClick,()=>i.onOpenChange(!1))})});lse.displayName=bL;var cse="PopoverArrow",use=x.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Ep(n);return s.jsx(yN,{...i,...r,ref:e})});use.displayName=cse;function jL(t){return t?"open":"closed"}var dse=pL,hse=xL,fse=yL,NL=_L;const mse=dse,pse=hse,SL=x.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},i)=>s.jsx(fse,{children:s.jsx(NL,{ref:i,align:e,sideOffset:n,className:Je("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));SL.displayName=NL.displayName;const Iu=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},i0=uh((t,e)=>({paymentMethods:[],paymentRequests:[],loading:!1,initializePaymentMethods:()=>{t({paymentMethods:[{id:"cash",type:"cash",name:"Espèces",icon:"💵",description:"Paiement en liquide lors de la rencontre",fees:0,processingTime:"Immédiat",securityLevel:"medium",available:!0},{id:"transfer",type:"transfer",name:"Virement bancaire",icon:"🏦",description:"Virement SEPA sécurisé",fees:0,processingTime:"1-2 jours ouvrés",securityLevel:"high",available:!0},{id:"paypal",type:"paypal",name:"PayPal",icon:"💳",description:"Paiement sécurisé via PayPal",fees:2.9,processingTime:"Immédiat",securityLevel:"high",available:!0},{id:"lydia",type:"lydia",name:"Lydia",icon:"📱",description:"Paiement mobile instantané",fees:0,processingTime:"Immédiat",securityLevel:"medium",available:!0}]})},createPaymentRequest:async n=>{try{t({loading:!0});const r=e().generateSecurityCode(),i={...n,securityCode:r,status:"pending",createdAt:tr(),updatedAt:tr()},a=await vl(Vt(Oe,"paymentRequests"),i),o={id:a.id,...n,securityCode:r,status:"pending",createdAt:new Date,updatedAt:new Date};return t(c=>({paymentRequests:[o,...c.paymentRequests],loading:!1})),me.success("Demande de paiement créée avec succès"),a.id}catch(r){throw console.error("Erreur lors de la création de la demande de paiement:",r),me.error("Erreur lors de la création de la demande de paiement"),t({loading:!1}),r}},updatePaymentStatus:async(n,r,i)=>{try{const a={status:r,updatedAt:tr()};i&&(a.notes=i),await nn(pt(Oe,"paymentRequests",n),a),t(c=>({paymentRequests:c.paymentRequests.map(u=>u.id===n?{...u,status:r,notes:i||u.notes,updatedAt:new Date}:u)}));const o={confirmed:"Paiement confirmé",completed:"Paiement terminé",cancelled:"Paiement annulé",disputed:"Litige signalé"};me.success(o[r]||"Statut mis à jour")}catch(a){console.error("Erreur lors de la mise à jour du statut:",a),me.error("Erreur lors de la mise à jour du statut")}},fetchUserPaymentRequests:async n=>{if(n)try{t({loading:!0});const r=cn(Vt(Oe,"paymentRequests"),In("buyerId","==",n),Zs(50)),i=cn(Vt(Oe,"paymentRequests"),In("sellerId","==",n),Zs(50)),[a,o]=await Promise.all([An(r),An(i)]),c=[];a.forEach(u=>{const h=u.data();c.push({id:u.id,...h,createdAt:Iu(h.createdAt),updatedAt:Iu(h.updatedAt),meetingDateTime:h.meetingDateTime?Iu(h.meetingDateTime):void 0})}),o.forEach(u=>{const h=u.data();c.find(f=>f.id===u.id)||c.push({id:u.id,...h,createdAt:Iu(h.createdAt),updatedAt:Iu(h.updatedAt),meetingDateTime:h.meetingDateTime?Iu(h.meetingDateTime):void 0})}),c.sort((u,h)=>h.createdAt.getTime()-u.createdAt.getTime()),t({paymentRequests:c,loading:!1})}catch(r){console.error("Erreur lors du chargement des demandes de paiement:",r),me.error("Erreur lors du chargement des demandes de paiement"),t({loading:!1})}},generateSecurityCode:()=>Math.random().toString(36).substring(2,8).toUpperCase(),validatePaymentMethod:(n,r)=>{switch(n){case"cash":return!0;case"transfer":return r.bankDetails&&r.bankDetails.iban&&r.bankDetails.accountName;case"paypal":return r.paypalEmail&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.paypalEmail);case"lydia":return r.lydiaPhone&&/^(\+33|0)[1-9](\d{8})$/.test(r.lydiaPhone.replace(/\s/g,""));default:return!1}},calculateFees:(n,r)=>{const{paymentMethods:i}=e(),a=i.find(o=>o.type===r);return a?n*a.fees/100:0},getPaymentInstructions:(n,r)=>{var a,o,c;const i=[];switch(n){case"cash":i.push("💵 Paiement en espèces","📍 Rencontrez-vous au lieu convenu","🔍 Vérifiez l'objet avant de payer","🧾 Demandez un reçu si nécessaire",`🔐 Code de sécurité : ${r.securityCode}`);break;case"transfer":i.push("🏦 Virement bancaire SEPA","📋 Utilisez les coordonnées bancaires fournies","💬 Indiquez la référence de transaction","⏱️ Délai : 1-2 jours ouvrés",`🔐 Code de sécurité : ${r.securityCode}`),(a=r.paymentDetails)!=null&&a.bankDetails&&i.push(`📊 IBAN : ${r.paymentDetails.bankDetails.iban}`,`🏛️ Titulaire : ${r.paymentDetails.bankDetails.accountName}`);break;case"paypal":i.push("💳 Paiement PayPal","📧 Envoyez le paiement à l'adresse email fournie",'🛡️ Utilisez "Biens et services" pour la protection',"⚡ Paiement instantané",`🔐 Code de sécurité : ${r.securityCode}`),(o=r.paymentDetails)!=null&&o.paypalEmail&&i.push(`📧 Email PayPal : ${r.paymentDetails.paypalEmail}`);break;case"lydia":i.push("📱 Paiement Lydia","📞 Envoyez le paiement au numéro fourni","💬 Indiquez la référence de transaction","⚡ Paiement instantané",`🔐 Code de sécurité : ${r.securityCode}`),(c=r.paymentDetails)!=null&&c.lydiaPhone&&i.push(`📞 Numéro Lydia : ${r.paymentDetails.lydiaPhone}`);break}return i}}));var EL="https://js.stripe.com/v3",gse=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,PT="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",vse=function(){for(var e=document.querySelectorAll('script[src^="'.concat(EL,'"]')),n=0;n<e.length;n++){var r=e[n];if(gse.test(r.src))return r}return null},IT=function(e){var n="",r=document.createElement("script");r.src="".concat(EL).concat(n);var i=document.head||document.body;if(!i)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return i.appendChild(r),r},xse=function(e,n){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"2.4.0",startTime:n})},af=null,Vg=null,Fg=null,yse=function(e){return function(){e(new Error("Failed to load Stripe.js"))}},_se=function(e,n){return function(){window.Stripe?e(window.Stripe):n(new Error("Stripe.js not available"))}},wse=function(e){return af!==null?af:(af=new Promise(function(n,r){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe&&e&&console.warn(PT),window.Stripe){n(window.Stripe);return}try{var i=vse();if(i&&e)console.warn(PT);else if(!i)i=IT(e);else if(i&&Fg!==null&&Vg!==null){var a;i.removeEventListener("load",Fg),i.removeEventListener("error",Vg),(a=i.parentNode)===null||a===void 0||a.removeChild(i),i=IT(e)}Fg=_se(n,r),Vg=yse(r),i.addEventListener("load",Fg),i.addEventListener("error",Vg)}catch(o){r(o);return}}),af.catch(function(n){return af=null,Promise.reject(n)}))},bse=function(e,n,r){if(e===null)return null;var i=e.apply(void 0,n);return xse(i,r),i},of,CL=!1,TL=function(){return of||(of=wse(null).catch(function(e){return of=null,Promise.reject(e)}),of)};Promise.resolve().then(function(){return TL()}).catch(function(t){CL||console.warn(t)});var kL=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];CL=!0;var i=Date.now();return TL().then(function(a){return bse(a,n,i)})},PL={exports:{}},jse="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Nse=jse,Sse=Nse;function IL(){}function AL(){}AL.resetWarningCache=IL;var Ese=function(){function t(r,i,a,o,c,u){if(u!==Sse){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:AL,resetWarningCache:IL};return n.PropTypes=n,n};PL.exports=Ese();var Cse=PL.exports;const wn=Um(Cse);function AT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function RT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AT(Object(n),!0).forEach(function(r){RL(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xv(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?xv=function(e){return typeof e}:xv=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xv(t)}function RL(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ML(t,e){return Tse(t)||kse(t,e)||Pse(t,e)||Ise()}function Tse(t){if(Array.isArray(t))return t}function kse(t,e){var n=t&&(typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"]);if(n!=null){var r=[],i=!0,a=!1,o,c;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(u){a=!0,c=u}finally{try{!i&&n.return!=null&&n.return()}finally{if(a)throw c}}return r}}function Pse(t,e){if(t){if(typeof t=="string")return MT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return MT(t,e)}}function MT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ise(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var gs=function(e,n,r){var i=!!r,a=Me.useRef(r);Me.useEffect(function(){a.current=r},[r]),Me.useEffect(function(){if(!i||!e)return function(){};var o=function(){a.current&&a.current.apply(a,arguments)};return e.on(n,o),function(){e.off(n,o)}},[i,n,e,a])},R1=function(e){var n=Me.useRef(e);return Me.useEffect(function(){n.current=e},[e]),n.current},Bd=function(e){return e!==null&&xv(e)==="object"},Ase=function(e){return Bd(e)&&typeof e.then=="function"},Rse=function(e){return Bd(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},DT="[object Object]",Mse=function t(e,n){if(!Bd(e)||!Bd(n))return e===n;var r=Array.isArray(e),i=Array.isArray(n);if(r!==i)return!1;var a=Object.prototype.toString.call(e)===DT,o=Object.prototype.toString.call(n)===DT;if(a!==o)return!1;if(!a&&!r)return e===n;var c=Object.keys(e),u=Object.keys(n);if(c.length!==u.length)return!1;for(var h={},f=0;f<c.length;f+=1)h[c[f]]=!0;for(var p=0;p<u.length;p+=1)h[u[p]]=!0;var v=Object.keys(h);if(v.length!==c.length)return!1;var _=e,b=n,N=function(w){return t(_[w],b[w])};return v.every(N)},DL=function(e,n,r){return Bd(e)?Object.keys(e).reduce(function(i,a){var o=!Bd(n)||!Mse(e[a],n[a]);return r.includes(a)?(o&&console.warn("Unsupported prop change: options.".concat(a," is not a mutable property.")),i):o?RT(RT({},i||{}),{},RL({},a,e[a])):i},null):null},OL="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",OT=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:OL;if(e===null||Rse(e))return e;throw new Error(n)},Dse=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:OL;if(Ase(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(i){return OT(i,n)})};var r=OT(e,n);return r===null?{tag:"empty"}:{tag:"sync",stripe:r}},Ose=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"2.8.1"}),e.registerAppInfo({name:"react-stripe-js",version:"2.8.1",url:"https://stripe.com/docs/stripe-js/react"}))},a0=Me.createContext(null);a0.displayName="ElementsContext";var LL=function(e,n){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(n," in an <Elements> provider."));return e},VL=function(e){var n=e.stripe,r=e.options,i=e.children,a=Me.useMemo(function(){return Dse(n)},[n]),o=Me.useState(function(){return{stripe:a.tag==="sync"?a.stripe:null,elements:a.tag==="sync"?a.stripe.elements(r):null}}),c=ML(o,2),u=c[0],h=c[1];Me.useEffect(function(){var v=!0,_=function(N){h(function(S){return S.stripe?S:{stripe:N,elements:N.elements(r)}})};return a.tag==="async"&&!u.stripe?a.stripePromise.then(function(b){b&&v&&_(b)}):a.tag==="sync"&&!u.stripe&&_(a.stripe),function(){v=!1}},[a,u,r]);var f=R1(n);Me.useEffect(function(){f!==null&&f!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[f,n]);var p=R1(r);return Me.useEffect(function(){if(u.elements){var v=DL(r,p,["clientSecret","fonts"]);v&&u.elements.update(v)}},[r,p,u.elements]),Me.useEffect(function(){Ose(u.stripe)},[u.stripe]),Me.createElement(a0.Provider,{value:u},i)};VL.propTypes={stripe:wn.any,options:wn.object};var Lse=function(e){var n=Me.useContext(a0);return LL(n,e)},Vse=function(){var e=Lse("calls useElements()"),n=e.elements;return n};wn.func.isRequired;var FL=Me.createContext(null);FL.displayName="CustomCheckoutSdkContext";var Fse=function(e,n){if(!e)throw new Error("Could not find CustomCheckoutProvider context; You need to wrap the part of your app that ".concat(n," in an <CustomCheckoutProvider> provider."));return e},zse=Me.createContext(null);zse.displayName="CustomCheckoutContext";wn.any,wn.shape({clientSecret:wn.string.isRequired,elementsOptions:wn.object}).isRequired;var M1=function(e){var n=Me.useContext(FL),r=Me.useContext(a0);if(n&&r)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CustomCheckoutProvider> and <Elements> providers."));return n?Fse(n,e):LL(r,e)},Use=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Qn=function(e,n){var r="".concat(Use(e),"Element"),i=function(u){var h=u.id,f=u.className,p=u.options,v=p===void 0?{}:p,_=u.onBlur,b=u.onFocus,N=u.onReady,S=u.onChange,w=u.onEscape,y=u.onClick,C=u.onLoadError,R=u.onLoaderStart,M=u.onNetworksChange,B=u.onConfirm,O=u.onCancel,D=u.onShippingAddressChange,F=u.onShippingRateChange,I=M1("mounts <".concat(r,">")),V="elements"in I?I.elements:null,k="customCheckoutSdk"in I?I.customCheckoutSdk:null,P=Me.useState(null),q=ML(P,2),te=q[0],re=q[1],K=Me.useRef(null),U=Me.useRef(null);gs(te,"blur",_),gs(te,"focus",b),gs(te,"escape",w),gs(te,"click",y),gs(te,"loaderror",C),gs(te,"loaderstart",R),gs(te,"networkschange",M),gs(te,"confirm",B),gs(te,"cancel",O),gs(te,"shippingaddresschange",D),gs(te,"shippingratechange",F),gs(te,"change",S);var W;N&&(e==="expressCheckout"?W=N:W=function(){N(te)}),gs(te,"ready",W),Me.useLayoutEffect(function(){if(K.current===null&&U.current!==null&&(V||k)){var Q=null;k?Q=k.createElement(e,v):V&&(Q=V.create(e,v)),K.current=Q,re(Q),Q&&Q.mount(U.current)}},[V,k,v]);var H=R1(v);return Me.useEffect(function(){if(K.current){var Q=DL(v,H,["paymentRequest"]);Q&&"update"in K.current&&K.current.update(Q)}},[v,H]),Me.useLayoutEffect(function(){return function(){if(K.current&&typeof K.current.destroy=="function")try{K.current.destroy(),K.current=null}catch{}}},[]),Me.createElement("div",{id:h,className:f,ref:U})},a=function(u){M1("mounts <".concat(r,">"));var h=u.id,f=u.className;return Me.createElement("div",{id:h,className:f})},o=n?a:i;return o.propTypes={id:wn.string,className:wn.string,onChange:wn.func,onBlur:wn.func,onFocus:wn.func,onReady:wn.func,onEscape:wn.func,onClick:wn.func,onLoadError:wn.func,onLoaderStart:wn.func,onNetworksChange:wn.func,onConfirm:wn.func,onCancel:wn.func,onShippingAddressChange:wn.func,onShippingRateChange:wn.func,options:wn.object},o.displayName=r,o.__elementType=e,o},Xn=typeof window>"u",$se=Me.createContext(null);$se.displayName="EmbeddedCheckoutProviderContext";var Bse=function(){var e=M1("calls useStripe()"),n=e.stripe;return n};Qn("auBankAccount",Xn);Qn("card",Xn);Qn("cardNumber",Xn);Qn("cardExpiry",Xn);Qn("cardCvc",Xn);Qn("fpxBank",Xn);Qn("iban",Xn);Qn("idealBank",Xn);Qn("p24Bank",Xn);Qn("epsBank",Xn);Qn("payment",Xn);Qn("expressCheckout",Xn);Qn("currencySelector",Xn);Qn("paymentRequestButton",Xn);Qn("linkAuthentication",Xn);Qn("address",Xn);Qn("shippingAddress",Xn);Qn("paymentMethodMessaging",Xn);Qn("affirmMessage",Xn);Qn("afterpayClearpayMessage",Xn);const Wse=({amount:t,currency:e,onPaymentSuccess:n,onPaymentError:r})=>{Bse(),Vse();const[i,a]=x.useState(!1),[o,c]=x.useState(null),u=async h=>{h.preventDefault(),a(!0),c(null);try{await new Promise(p=>setTimeout(p,2e3));const f="pi_"+Math.random().toString(36).substring(2,15);me.success("Paiement réussi !"),n(f)}catch(f){console.error("Payment error:",f),c(f.message||"Une erreur est survenue lors du paiement"),r(f.message||"Une erreur est survenue lors du paiement")}finally{a(!1)}};return s.jsxs(le,{children:[s.jsxs(We,{children:[s.jsxs(He,{className:"flex items-center gap-2",children:[s.jsx(zn,{className:"w-5 h-5"}),"Paiement par carte bancaire"]}),s.jsx(Pt,{children:"Paiement sécurisé via Stripe"})]}),s.jsx(ue,{children:s.jsxs("form",{onSubmit:u,className:"space-y-4",children:[s.jsx("div",{className:"p-4 border rounded-md",children:s.jsx("div",{className:"h-10 flex items-center",children:s.jsx("div",{className:"text-muted-foreground",children:"Formulaire de carte bancaire (simulation)"})})}),o&&s.jsxs(Ut,{className:"border-red-200 bg-red-50",children:[s.jsx(Rn,{className:"h-4 w-4 text-red-600"}),s.jsx($t,{className:"text-red-800",children:o})]}),s.jsxs(Ut,{className:"border-blue-200 bg-blue-50",children:[s.jsx(Dc,{className:"h-4 w-4 text-blue-600"}),s.jsx($t,{className:"text-blue-800",children:"Vos informations de paiement sont sécurisées et cryptées par Stripe."})]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx("p",{children:"Pour tester, utilisez ces cartes :"}),s.jsxs("ul",{className:"list-disc pl-5 mt-1",children:[s.jsx("li",{children:"Succès : 4242 4242 4242 4242"}),s.jsx("li",{children:"Échec : 4000 0000 0000 0002"}),s.jsx("li",{children:"Date : n'importe quelle date future"}),s.jsx("li",{children:"CVC : n'importe quel nombre à 3 chiffres"})]})]}),s.jsx(Y,{type:"submit",disabled:i,className:"w-full bg-gradient-to-r from-primary to-secondary",children:i?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Traitement..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Dc,{className:"w-4 h-4 mr-2"}),"Payer ",new Intl.NumberFormat("fr-FR",{style:"currency",currency:e}).format(t)]})})]})})]})},LT=kL("pk_test_51O5JqHLVDYKrxBIwIyiUQOmNk9HFZJKvBz6zJyRNBNjkKSGVEvZKEwlKnwL2JV8PmXVjWSHoZ9XQfKOiLkXGZ9Nh00wPxKdm9p"),qse=({amount:t,currency:e,onPaymentSuccess:n,onPaymentError:r})=>{const i={appearance:{theme:"stripe"},locale:"fr"};return LT?s.jsx(VL,{stripe:LT,options:i,children:s.jsx(Wse,{amount:t,currency:e,onPaymentSuccess:n,onPaymentError:r})}):s.jsxs(Ut,{className:"border-yellow-200 bg-yellow-50",children:[s.jsx(Rn,{className:"h-4 w-4 text-yellow-600"}),s.jsxs($t,{className:"text-yellow-800",children:[s.jsx("strong",{children:"Configuration Stripe manquante"})," - Veuillez configurer votre clé publique Stripe dans le fichier .env"]})]})},zL=({amount:t,currency:e,onMethodSelect:n,selectedMethod:r})=>{const{paymentMethods:i,calculateFees:a}=i0(),[o,c]=x.useState({}),[u,h]=x.useState({}),[f,p]=x.useState(null),v=[{id:"card",type:"card",name:"Carte bancaire",icon:zn,description:"Paiement sécurisé par carte",fees:1.5,processingTime:"Immédiat",securityLevel:"high",available:!0},...i],_=M=>{switch(M){case"card":return zn;case"cash":return _4;case"transfer":return aG;case"paypal":return zn;case"lydia":return Yc;default:return zn}},b=M=>{switch(M){case"high":return"text-green-600 bg-green-100";case"medium":return"text-yellow-600 bg-yellow-100";case"low":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},N=(M,B)=>{var D,F;const O={};switch(M){case"card":return!0;case"transfer":(D=B.bankDetails)!=null&&D.iban?/^[A-Z]{2}\d{2}[A-Z0-9]{4}\d{7}([A-Z0-9]?){0,16}$/.test(B.bankDetails.iban.replace(/\s/g,""))||(O.iban="Format IBAN invalide"):O.iban="IBAN requis",(F=B.bankDetails)!=null&&F.accountName||(O.accountName="Nom du titulaire requis");break;case"paypal":B.paypalEmail?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(B.paypalEmail)||(O.paypalEmail="Format email invalide"):O.paypalEmail="Email PayPal requis";break;case"lydia":B.lydiaPhone?/^(\+33|0)[1-9](\d{8})$/.test(B.lydiaPhone.replace(/\s/g,""))||(O.lydiaPhone="Format de téléphone invalide"):O.lydiaPhone="Numéro de téléphone requis";break}return h(O),Object.keys(O).length===0},S=M=>{if(M==="card"){n(M,{});return}const B=o[M]||{};(M==="cash"||N(M,B))&&n(M,B)},w=(M,B,O)=>{c(D=>({...D,[M]:{...D[M],[B]:O}}))},y=(M,B)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:B||"EUR"}).format(M),C=M=>{p(M),n("card",{stripePaymentId:M})},R=M=>{console.error("Stripe payment error:",M)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Choisissez votre mode de paiement"}),s.jsxs("p",{className:"text-muted-foreground",children:["Montant à payer : ",s.jsx("span",{className:"font-semibold text-primary",children:y(t,e)})]})]}),r==="card"?s.jsx(qse,{amount:t,currency:e,onPaymentSuccess:C,onPaymentError:R}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:v.map(M=>{var I,V,k,P,q,te,re,K;const B=_(M.type),O=M.type==="card"?t*M.fees/100:a(t,M.type),D=t+O,F=r===M.type;return s.jsxs(le,{className:`cursor-pointer transition-all hover:shadow-md ${F?"ring-2 ring-primary bg-primary/5":""} ${M.available?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>M.available&&S(M.type),children:[s.jsx(We,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(B,{className:"w-6 h-6 text-primary"})}),s.jsxs("div",{children:[s.jsx(He,{className:"text-lg",children:M.name}),s.jsx(Pt,{className:"text-sm",children:M.description})]})]}),F&&s.jsx(Tt,{className:"w-6 h-6 text-green-600"})]})}),s.jsxs(ue,{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx($n,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("span",{children:M.processingTime})]}),s.jsxs(tt,{className:b(M.securityLevel),children:[s.jsx(Ft,{className:"w-3 h-3 mr-1"}),M.securityLevel==="high"?"Très sécurisé":M.securityLevel==="medium"?"Sécurisé":"Basique"]})]}),O>0&&s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Montant :"}),s.jsx("span",{children:y(t,e)})]}),s.jsxs("div",{className:"flex justify-between text-orange-600",children:[s.jsxs("span",{children:["Frais (",M.fees,"%) :"]}),s.jsx("span",{children:y(O,e)})]}),s.jsxs("div",{className:"flex justify-between font-semibold border-t pt-1",children:[s.jsx("span",{children:"Total :"}),s.jsx("span",{children:y(D,e)})]})]}),F&&M.type!=="cash"&&M.type!=="card"&&s.jsxs("div",{className:"space-y-3 pt-3 border-t",children:[M.type==="transfer"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:`iban-${M.id}`,children:"IBAN *"}),s.jsx(qe,{id:`iban-${M.id}`,placeholder:"FR76 1234 5678 9012 3456 7890 123",value:((V=(I=o[M.type])==null?void 0:I.bankDetails)==null?void 0:V.iban)||"",onChange:U=>{var W;return w(M.type,"bankDetails",{...(W=o[M.type])==null?void 0:W.bankDetails,iban:U.target.value})},className:u.iban?"border-red-500":""}),u.iban&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.iban})]}),s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:`account-name-${M.id}`,children:"Nom du titulaire *"}),s.jsx(qe,{id:`account-name-${M.id}`,placeholder:"Jean Dupont",value:((P=(k=o[M.type])==null?void 0:k.bankDetails)==null?void 0:P.accountName)||"",onChange:U=>{var W;return w(M.type,"bankDetails",{...(W=o[M.type])==null?void 0:W.bankDetails,accountName:U.target.value})},className:u.accountName?"border-red-500":""}),u.accountName&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.accountName})]}),s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:`bic-${M.id}`,children:"BIC (optionnel)"}),s.jsx(qe,{id:`bic-${M.id}`,placeholder:"BNPAFRPP",value:((te=(q=o[M.type])==null?void 0:q.bankDetails)==null?void 0:te.bic)||"",onChange:U=>{var W;return w(M.type,"bankDetails",{...(W=o[M.type])==null?void 0:W.bankDetails,bic:U.target.value})}})]})]}),M.type==="paypal"&&s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:`paypal-email-${M.id}`,children:"Email PayPal *"}),s.jsx(qe,{id:`paypal-email-${M.id}`,type:"email",placeholder:"votre.email@example.com",value:((re=o[M.type])==null?void 0:re.paypalEmail)||"",onChange:U=>w(M.type,"paypalEmail",U.target.value),className:u.paypalEmail?"border-red-500":""}),u.paypalEmail&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.paypalEmail})]}),M.type==="lydia"&&s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:`lydia-phone-${M.id}`,children:"Numéro de téléphone *"}),s.jsx(qe,{id:`lydia-phone-${M.id}`,type:"tel",placeholder:"06 12 34 56 78",value:((K=o[M.type])==null?void 0:K.lydiaPhone)||"",onChange:U=>w(M.type,"lydiaPhone",U.target.value),className:u.lydiaPhone?"border-red-500":""}),u.lydiaPhone&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.lydiaPhone})]})]}),F&&M.type!=="card"&&s.jsxs(Ut,{className:"mt-3",children:[s.jsx(xl,{className:"h-4 w-4"}),s.jsxs($t,{children:[M.type==="cash"&&"Rencontrez-vous dans un lieu public et vérifiez l'objet avant de payer.",M.type==="transfer"&&"Le virement sera effectué après confirmation de la transaction. Délai : 1-2 jours ouvrés.",M.type==="paypal"&&"Utilisez l'option 'Biens et services' pour bénéficier de la protection PayPal.",M.type==="lydia"&&"Le paiement Lydia est instantané. Vérifiez le numéro avant d'envoyer."]})]})]})]},M.id)})}),s.jsxs(Ut,{className:"border-yellow-200 bg-yellow-50",children:[s.jsx(Rn,{className:"h-4 w-4 text-yellow-600"}),s.jsxs($t,{className:"text-yellow-800",children:[s.jsx("strong",{children:"Conseils de sécurité :"})," Ne communiquez jamais vos informations bancaires par message. Utilisez uniquement les canaux sécurisés de StudyMarket pour les transactions."]})]})]})};function Hse(t,e){const n=x.useRef(e);x.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const Gse=1;function Zse(t){return Object.freeze({__version:Gse,map:t})}function Kse(t,e){return Object.freeze({...t,...e})}const UL=x.createContext(null),$L=UL.Provider;function BL(){const t=x.useContext(UL);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function Yse(t){function e(n,r){const{instance:i,context:a}=t(n).current;return x.useImperativeHandle(r,()=>i),n.children==null?null:Me.createElement($L,{value:a},n.children)}return x.forwardRef(e)}function Qse(t){function e(n,r){const{instance:i}=t(n).current;return x.useImperativeHandle(r,()=>i),null}return x.forwardRef(e)}function Xse(t,e){const n=x.useRef();x.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function WL(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}var D1={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(g6,function(n){var r="1.9.4";function i(l){var d,g,j,T;for(g=1,j=arguments.length;g<j;g++){T=arguments[g];for(d in T)l[d]=T[d]}return l}var a=Object.create||function(){function l(){}return function(d){return l.prototype=d,new l}}();function o(l,d){var g=Array.prototype.slice;if(l.bind)return l.bind.apply(l,g.call(arguments,1));var j=g.call(arguments,2);return function(){return l.apply(d,j.length?j.concat(g.call(arguments)):arguments)}}var c=0;function u(l){return"_leaflet_id"in l||(l._leaflet_id=++c),l._leaflet_id}function h(l,d,g){var j,T,z,Z;return Z=function(){j=!1,T&&(z.apply(g,T),T=!1)},z=function(){j?T=arguments:(l.apply(g,arguments),setTimeout(Z,d),j=!0)},z}function f(l,d,g){var j=d[1],T=d[0],z=j-T;return l===j&&g?l:((l-T)%z+z)%z+T}function p(){return!1}function v(l,d){if(d===!1)return l;var g=Math.pow(10,d===void 0?6:d);return Math.round(l*g)/g}function _(l){return l.trim?l.trim():l.replace(/^\s+|\s+$/g,"")}function b(l){return _(l).split(/\s+/)}function N(l,d){Object.prototype.hasOwnProperty.call(l,"options")||(l.options=l.options?a(l.options):{});for(var g in d)l.options[g]=d[g];return l.options}function S(l,d,g){var j=[];for(var T in l)j.push(encodeURIComponent(g?T.toUpperCase():T)+"="+encodeURIComponent(l[T]));return(!d||d.indexOf("?")===-1?"?":"&")+j.join("&")}var w=/\{ *([\w_ -]+) *\}/g;function y(l,d){return l.replace(w,function(g,j){var T=d[j];if(T===void 0)throw new Error("No value provided for variable "+g);return typeof T=="function"&&(T=T(d)),T})}var C=Array.isArray||function(l){return Object.prototype.toString.call(l)==="[object Array]"};function R(l,d){for(var g=0;g<l.length;g++)if(l[g]===d)return g;return-1}var M="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function B(l){return window["webkit"+l]||window["moz"+l]||window["ms"+l]}var O=0;function D(l){var d=+new Date,g=Math.max(0,16-(d-O));return O=d+g,window.setTimeout(l,g)}var F=window.requestAnimationFrame||B("RequestAnimationFrame")||D,I=window.cancelAnimationFrame||B("CancelAnimationFrame")||B("CancelRequestAnimationFrame")||function(l){window.clearTimeout(l)};function V(l,d,g){if(g&&F===D)l.call(d);else return F.call(window,o(l,d))}function k(l){l&&I.call(window,l)}var P={__proto__:null,extend:i,create:a,bind:o,get lastId(){return c},stamp:u,throttle:h,wrapNum:f,falseFn:p,formatNum:v,trim:_,splitWords:b,setOptions:N,getParamString:S,template:y,isArray:C,indexOf:R,emptyImageUrl:M,requestFn:F,cancelFn:I,requestAnimFrame:V,cancelAnimFrame:k};function q(){}q.extend=function(l){var d=function(){N(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},g=d.__super__=this.prototype,j=a(g);j.constructor=d,d.prototype=j;for(var T in this)Object.prototype.hasOwnProperty.call(this,T)&&T!=="prototype"&&T!=="__super__"&&(d[T]=this[T]);return l.statics&&i(d,l.statics),l.includes&&(te(l.includes),i.apply(null,[j].concat(l.includes))),i(j,l),delete j.statics,delete j.includes,j.options&&(j.options=g.options?a(g.options):{},i(j.options,l.options)),j._initHooks=[],j.callInitHooks=function(){if(!this._initHooksCalled){g.callInitHooks&&g.callInitHooks.call(this),this._initHooksCalled=!0;for(var z=0,Z=j._initHooks.length;z<Z;z++)j._initHooks[z].call(this)}},d},q.include=function(l){var d=this.prototype.options;return i(this.prototype,l),l.options&&(this.prototype.options=d,this.mergeOptions(l.options)),this},q.mergeOptions=function(l){return i(this.prototype.options,l),this},q.addInitHook=function(l){var d=Array.prototype.slice.call(arguments,1),g=typeof l=="function"?l:function(){this[l].apply(this,d)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(g),this};function te(l){if(!(typeof L>"u"||!L||!L.Mixin)){l=C(l)?l:[l];for(var d=0;d<l.length;d++)l[d]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var re={on:function(l,d,g){if(typeof l=="object")for(var j in l)this._on(j,l[j],d);else{l=b(l);for(var T=0,z=l.length;T<z;T++)this._on(l[T],d,g)}return this},off:function(l,d,g){if(!arguments.length)delete this._events;else if(typeof l=="object")for(var j in l)this._off(j,l[j],d);else{l=b(l);for(var T=arguments.length===1,z=0,Z=l.length;z<Z;z++)T?this._off(l[z]):this._off(l[z],d,g)}return this},_on:function(l,d,g,j){if(typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}if(this._listens(l,d,g)===!1){g===this&&(g=void 0);var T={fn:d,ctx:g};j&&(T.once=!0),this._events=this._events||{},this._events[l]=this._events[l]||[],this._events[l].push(T)}},_off:function(l,d,g){var j,T,z;if(this._events&&(j=this._events[l],!!j)){if(arguments.length===1){if(this._firingCount)for(T=0,z=j.length;T<z;T++)j[T].fn=p;delete this._events[l];return}if(typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}var Z=this._listens(l,d,g);if(Z!==!1){var ee=j[Z];this._firingCount&&(ee.fn=p,this._events[l]=j=j.slice()),j.splice(Z,1)}}},fire:function(l,d,g){if(!this.listens(l,g))return this;var j=i({},d,{type:l,target:this,sourceTarget:d&&d.sourceTarget||this});if(this._events){var T=this._events[l];if(T){this._firingCount=this._firingCount+1||1;for(var z=0,Z=T.length;z<Z;z++){var ee=T[z],ae=ee.fn;ee.once&&this.off(l,ae,ee.ctx),ae.call(ee.ctx||this,j)}this._firingCount--}}return g&&this._propagateEvent(j),this},listens:function(l,d,g,j){typeof l!="string"&&console.warn('"string" type argument expected');var T=d;typeof d!="function"&&(j=!!d,T=void 0,g=void 0);var z=this._events&&this._events[l];if(z&&z.length&&this._listens(l,T,g)!==!1)return!0;if(j){for(var Z in this._eventParents)if(this._eventParents[Z].listens(l,d,g,j))return!0}return!1},_listens:function(l,d,g){if(!this._events)return!1;var j=this._events[l]||[];if(!d)return!!j.length;g===this&&(g=void 0);for(var T=0,z=j.length;T<z;T++)if(j[T].fn===d&&j[T].ctx===g)return T;return!1},once:function(l,d,g){if(typeof l=="object")for(var j in l)this._on(j,l[j],d,!0);else{l=b(l);for(var T=0,z=l.length;T<z;T++)this._on(l[T],d,g,!0)}return this},addEventParent:function(l){return this._eventParents=this._eventParents||{},this._eventParents[u(l)]=l,this},removeEventParent:function(l){return this._eventParents&&delete this._eventParents[u(l)],this},_propagateEvent:function(l){for(var d in this._eventParents)this._eventParents[d].fire(l.type,i({layer:l.target,propagatedFrom:l.target},l),!0)}};re.addEventListener=re.on,re.removeEventListener=re.clearAllEventListeners=re.off,re.addOneTimeEventListener=re.once,re.fireEvent=re.fire,re.hasEventListeners=re.listens;var K=q.extend(re);function U(l,d,g){this.x=g?Math.round(l):l,this.y=g?Math.round(d):d}var W=Math.trunc||function(l){return l>0?Math.floor(l):Math.ceil(l)};U.prototype={clone:function(){return new U(this.x,this.y)},add:function(l){return this.clone()._add(H(l))},_add:function(l){return this.x+=l.x,this.y+=l.y,this},subtract:function(l){return this.clone()._subtract(H(l))},_subtract:function(l){return this.x-=l.x,this.y-=l.y,this},divideBy:function(l){return this.clone()._divideBy(l)},_divideBy:function(l){return this.x/=l,this.y/=l,this},multiplyBy:function(l){return this.clone()._multiplyBy(l)},_multiplyBy:function(l){return this.x*=l,this.y*=l,this},scaleBy:function(l){return new U(this.x*l.x,this.y*l.y)},unscaleBy:function(l){return new U(this.x/l.x,this.y/l.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=W(this.x),this.y=W(this.y),this},distanceTo:function(l){l=H(l);var d=l.x-this.x,g=l.y-this.y;return Math.sqrt(d*d+g*g)},equals:function(l){return l=H(l),l.x===this.x&&l.y===this.y},contains:function(l){return l=H(l),Math.abs(l.x)<=Math.abs(this.x)&&Math.abs(l.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function H(l,d,g){return l instanceof U?l:C(l)?new U(l[0],l[1]):l==null?l:typeof l=="object"&&"x"in l&&"y"in l?new U(l.x,l.y):new U(l,d,g)}function Q(l,d){if(l)for(var g=d?[l,d]:l,j=0,T=g.length;j<T;j++)this.extend(g[j])}Q.prototype={extend:function(l){var d,g;if(!l)return this;if(l instanceof U||typeof l[0]=="number"||"x"in l)d=g=H(l);else if(l=fe(l),d=l.min,g=l.max,!d||!g)return this;return!this.min&&!this.max?(this.min=d.clone(),this.max=g.clone()):(this.min.x=Math.min(d.x,this.min.x),this.max.x=Math.max(g.x,this.max.x),this.min.y=Math.min(d.y,this.min.y),this.max.y=Math.max(g.y,this.max.y)),this},getCenter:function(l){return H((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,l)},getBottomLeft:function(){return H(this.min.x,this.max.y)},getTopRight:function(){return H(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(l){var d,g;return typeof l[0]=="number"||l instanceof U?l=H(l):l=fe(l),l instanceof Q?(d=l.min,g=l.max):d=g=l,d.x>=this.min.x&&g.x<=this.max.x&&d.y>=this.min.y&&g.y<=this.max.y},intersects:function(l){l=fe(l);var d=this.min,g=this.max,j=l.min,T=l.max,z=T.x>=d.x&&j.x<=g.x,Z=T.y>=d.y&&j.y<=g.y;return z&&Z},overlaps:function(l){l=fe(l);var d=this.min,g=this.max,j=l.min,T=l.max,z=T.x>d.x&&j.x<g.x,Z=T.y>d.y&&j.y<g.y;return z&&Z},isValid:function(){return!!(this.min&&this.max)},pad:function(l){var d=this.min,g=this.max,j=Math.abs(d.x-g.x)*l,T=Math.abs(d.y-g.y)*l;return fe(H(d.x-j,d.y-T),H(g.x+j,g.y+T))},equals:function(l){return l?(l=fe(l),this.min.equals(l.getTopLeft())&&this.max.equals(l.getBottomRight())):!1}};function fe(l,d){return!l||l instanceof Q?l:new Q(l,d)}function ke(l,d){if(l)for(var g=d?[l,d]:l,j=0,T=g.length;j<T;j++)this.extend(g[j])}ke.prototype={extend:function(l){var d=this._southWest,g=this._northEast,j,T;if(l instanceof Ye)j=l,T=l;else if(l instanceof ke){if(j=l._southWest,T=l._northEast,!j||!T)return this}else return l?this.extend(se(l)||Ze(l)):this;return!d&&!g?(this._southWest=new Ye(j.lat,j.lng),this._northEast=new Ye(T.lat,T.lng)):(d.lat=Math.min(j.lat,d.lat),d.lng=Math.min(j.lng,d.lng),g.lat=Math.max(T.lat,g.lat),g.lng=Math.max(T.lng,g.lng)),this},pad:function(l){var d=this._southWest,g=this._northEast,j=Math.abs(d.lat-g.lat)*l,T=Math.abs(d.lng-g.lng)*l;return new ke(new Ye(d.lat-j,d.lng-T),new Ye(g.lat+j,g.lng+T))},getCenter:function(){return new Ye((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ye(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ye(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(l){typeof l[0]=="number"||l instanceof Ye||"lat"in l?l=se(l):l=Ze(l);var d=this._southWest,g=this._northEast,j,T;return l instanceof ke?(j=l.getSouthWest(),T=l.getNorthEast()):j=T=l,j.lat>=d.lat&&T.lat<=g.lat&&j.lng>=d.lng&&T.lng<=g.lng},intersects:function(l){l=Ze(l);var d=this._southWest,g=this._northEast,j=l.getSouthWest(),T=l.getNorthEast(),z=T.lat>=d.lat&&j.lat<=g.lat,Z=T.lng>=d.lng&&j.lng<=g.lng;return z&&Z},overlaps:function(l){l=Ze(l);var d=this._southWest,g=this._northEast,j=l.getSouthWest(),T=l.getNorthEast(),z=T.lat>d.lat&&j.lat<g.lat,Z=T.lng>d.lng&&j.lng<g.lng;return z&&Z},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(l,d){return l?(l=Ze(l),this._southWest.equals(l.getSouthWest(),d)&&this._northEast.equals(l.getNorthEast(),d)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ze(l,d){return l instanceof ke?l:new ke(l,d)}function Ye(l,d,g){if(isNaN(l)||isNaN(d))throw new Error("Invalid LatLng object: ("+l+", "+d+")");this.lat=+l,this.lng=+d,g!==void 0&&(this.alt=+g)}Ye.prototype={equals:function(l,d){if(!l)return!1;l=se(l);var g=Math.max(Math.abs(this.lat-l.lat),Math.abs(this.lng-l.lng));return g<=(d===void 0?1e-9:d)},toString:function(l){return"LatLng("+v(this.lat,l)+", "+v(this.lng,l)+")"},distanceTo:function(l){return ne.distance(this,se(l))},wrap:function(){return ne.wrapLatLng(this)},toBounds:function(l){var d=180*l/40075017,g=d/Math.cos(Math.PI/180*this.lat);return Ze([this.lat-d,this.lng-g],[this.lat+d,this.lng+g])},clone:function(){return new Ye(this.lat,this.lng,this.alt)}};function se(l,d,g){return l instanceof Ye?l:C(l)&&typeof l[0]!="object"?l.length===3?new Ye(l[0],l[1],l[2]):l.length===2?new Ye(l[0],l[1]):null:l==null?l:typeof l=="object"&&"lat"in l?new Ye(l.lat,"lng"in l?l.lng:l.lon,l.alt):d===void 0?null:new Ye(l,d,g)}var de={latLngToPoint:function(l,d){var g=this.projection.project(l),j=this.scale(d);return this.transformation._transform(g,j)},pointToLatLng:function(l,d){var g=this.scale(d),j=this.transformation.untransform(l,g);return this.projection.unproject(j)},project:function(l){return this.projection.project(l)},unproject:function(l){return this.projection.unproject(l)},scale:function(l){return 256*Math.pow(2,l)},zoom:function(l){return Math.log(l/256)/Math.LN2},getProjectedBounds:function(l){if(this.infinite)return null;var d=this.projection.bounds,g=this.scale(l),j=this.transformation.transform(d.min,g),T=this.transformation.transform(d.max,g);return new Q(j,T)},infinite:!1,wrapLatLng:function(l){var d=this.wrapLng?f(l.lng,this.wrapLng,!0):l.lng,g=this.wrapLat?f(l.lat,this.wrapLat,!0):l.lat,j=l.alt;return new Ye(g,d,j)},wrapLatLngBounds:function(l){var d=l.getCenter(),g=this.wrapLatLng(d),j=d.lat-g.lat,T=d.lng-g.lng;if(j===0&&T===0)return l;var z=l.getSouthWest(),Z=l.getNorthEast(),ee=new Ye(z.lat-j,z.lng-T),ae=new Ye(Z.lat-j,Z.lng-T);return new ke(ee,ae)}},ne=i({},de,{wrapLng:[-180,180],R:6371e3,distance:function(l,d){var g=Math.PI/180,j=l.lat*g,T=d.lat*g,z=Math.sin((d.lat-l.lat)*g/2),Z=Math.sin((d.lng-l.lng)*g/2),ee=z*z+Math.cos(j)*Math.cos(T)*Z*Z,ae=2*Math.atan2(Math.sqrt(ee),Math.sqrt(1-ee));return this.R*ae}}),ve=6378137,_e={R:ve,MAX_LATITUDE:85.0511287798,project:function(l){var d=Math.PI/180,g=this.MAX_LATITUDE,j=Math.max(Math.min(g,l.lat),-g),T=Math.sin(j*d);return new U(this.R*l.lng*d,this.R*Math.log((1+T)/(1-T))/2)},unproject:function(l){var d=180/Math.PI;return new Ye((2*Math.atan(Math.exp(l.y/this.R))-Math.PI/2)*d,l.x*d/this.R)},bounds:function(){var l=ve*Math.PI;return new Q([-l,-l],[l,l])}()};function ye(l,d,g,j){if(C(l)){this._a=l[0],this._b=l[1],this._c=l[2],this._d=l[3];return}this._a=l,this._b=d,this._c=g,this._d=j}ye.prototype={transform:function(l,d){return this._transform(l.clone(),d)},_transform:function(l,d){return d=d||1,l.x=d*(this._a*l.x+this._b),l.y=d*(this._c*l.y+this._d),l},untransform:function(l,d){return d=d||1,new U((l.x/d-this._b)/this._a,(l.y/d-this._d)/this._c)}};function Se(l,d,g,j){return new ye(l,d,g,j)}var ge=i({},ne,{code:"EPSG:3857",projection:_e,transformation:function(){var l=.5/(Math.PI*_e.R);return Se(l,.5,-l,.5)}()}),Ae=i({},ge,{code:"EPSG:900913"});function Ke(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function ce(l,d){var g="",j,T,z,Z,ee,ae;for(j=0,z=l.length;j<z;j++){for(ee=l[j],T=0,Z=ee.length;T<Z;T++)ae=ee[T],g+=(T?"L":"M")+ae.x+" "+ae.y;g+=d?et.svg?"z":"x":""}return g||"M0 0"}var Ve=document.documentElement.style,G="ActiveXObject"in window,J=G&&!document.addEventListener,ie="msLaunchUri"in navigator&&!("documentMode"in document),Ce=Rs("webkit"),Te=Rs("android"),je=Rs("android 2")||Rs("android 3"),Xe=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),It=Te&&Rs("Google")&&Xe<537&&!("AudioNode"in window),bt=!!window.opera,Nt=!ie&&Rs("chrome"),Rr=Rs("gecko")&&!Ce&&!bt&&!G,tu=!Nt&&Rs("safari"),ga=Rs("phantom"),vo="OTransition"in Ve,va=navigator.platform.indexOf("Win")===0,xo=G&&"transition"in Ve,yo="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!je,xa="MozPerspective"in Ve,p0=!window.L_DISABLE_3D&&(xo||yo||xa)&&!vo&&!ga,zl=typeof orientation<"u"||Rs("mobile"),vh=zl&&Ce,Pp=zl&&yo,xh=!window.PointerEvent&&window.MSPointerEvent,_o=!!(window.PointerEvent||xh),nu="ontouchstart"in window||!!window.TouchEvent,yh=!window.L_NO_TOUCH&&(nu||_o),ya=zl&&bt,Ip=zl&&Rr,ru=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ap=function(){var l=!1;try{var d=Object.defineProperty({},"passive",{get:function(){l=!0}});window.addEventListener("testPassiveEventSupport",p,d),window.removeEventListener("testPassiveEventSupport",p,d)}catch{}return l}(),Ul=function(){return!!document.createElement("canvas").getContext}(),su=!!(document.createElementNS&&Ke("svg").createSVGRect),hr=!!su&&function(){var l=document.createElement("div");return l.innerHTML="<svg/>",(l.firstChild&&l.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Rp=!su&&function(){try{var l=document.createElement("div");l.innerHTML='<v:shape adj="1"/>';var d=l.firstChild;return d.style.behavior="url(#default#VML)",d&&typeof d.adj=="object"}catch{return!1}}(),$l=navigator.platform.indexOf("Mac")===0,Bl=navigator.platform.indexOf("Linux")===0;function Rs(l){return navigator.userAgent.toLowerCase().indexOf(l)>=0}var et={ie:G,ielt9:J,edge:ie,webkit:Ce,android:Te,android23:je,androidStock:It,opera:bt,chrome:Nt,gecko:Rr,safari:tu,phantom:ga,opera12:vo,win:va,ie3d:xo,webkit3d:yo,gecko3d:xa,any3d:p0,mobile:zl,mobileWebkit:vh,mobileWebkit3d:Pp,msPointer:xh,pointer:_o,touch:yh,touchNative:nu,mobileOpera:ya,mobileGecko:Ip,retina:ru,passiveEvents:Ap,canvas:Ul,svg:su,vml:Rp,inlineSvg:hr,mac:$l,linux:Bl},_a=et.msPointer?"MSPointerDown":"pointerdown",Mp=et.msPointer?"MSPointerMove":"pointermove",Dp=et.msPointer?"MSPointerUp":"pointerup",Wl=et.msPointer?"MSPointerCancel":"pointercancel",iu={touchstart:_a,touchmove:Mp,touchend:Dp,touchcancel:Wl},au={touchstart:lu,touchmove:ou,touchend:ou,touchcancel:ou},ti={},ni=!1;function Op(l,d,g){return d==="touchstart"&&Vp(),au[d]?(g=au[d].bind(this,g),l.addEventListener(iu[d],g,!1),g):(console.warn("wrong event specified:",d),p)}function Lp(l,d,g){if(!iu[d]){console.warn("wrong event specified:",d);return}l.removeEventListener(iu[d],g,!1)}function _h(l){ti[l.pointerId]=l}function wh(l){ti[l.pointerId]&&(ti[l.pointerId]=l)}function bh(l){delete ti[l.pointerId]}function Vp(){ni||(document.addEventListener(_a,_h,!0),document.addEventListener(Mp,wh,!0),document.addEventListener(Dp,bh,!0),document.addEventListener(Wl,bh,!0),ni=!0)}function ou(l,d){if(d.pointerType!==(d.MSPOINTER_TYPE_MOUSE||"mouse")){d.touches=[];for(var g in ti)d.touches.push(ti[g]);d.changedTouches=[d],l(d)}}function lu(l,d){d.MSPOINTER_TYPE_TOUCH&&d.pointerType===d.MSPOINTER_TYPE_TOUCH&&xn(d),ou(l,d)}function Fp(l){var d={},g,j;for(j in l)g=l[j],d[j]=g&&g.bind?g.bind(l):g;return l=d,d.type="dblclick",d.detail=2,d.isTrusted=!1,d._simulated=!0,d}var jh=200;function ql(l,d){l.addEventListener("dblclick",d);var g=0,j;function T(z){if(z.detail!==1){j=z.detail;return}if(!(z.pointerType==="mouse"||z.sourceCapabilities&&!z.sourceCapabilities.firesTouchEvents)){var Z=Dh(z);if(!(Z.some(function(ae){return ae instanceof HTMLLabelElement&&ae.attributes.for})&&!Z.some(function(ae){return ae instanceof HTMLInputElement||ae instanceof HTMLSelectElement}))){var ee=Date.now();ee-g<=jh?(j++,j===2&&d(Fp(z))):j=1,g=ee}}}return l.addEventListener("click",T),{dblclick:d,simDblclick:T}}function wa(l,d){l.removeEventListener("dblclick",d.dblclick),l.removeEventListener("click",d.simDblclick)}var Hl=ja(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Gl=ja(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Nh=Gl==="webkitTransition"||Gl==="OTransition"?Gl+"End":"transitionend";function Sh(l){return typeof l=="string"?document.getElementById(l):l}function wo(l,d){var g=l.style[d]||l.currentStyle&&l.currentStyle[d];if((!g||g==="auto")&&document.defaultView){var j=document.defaultView.getComputedStyle(l,null);g=j?j[d]:null}return g==="auto"?null:g}function Ct(l,d,g){var j=document.createElement(l);return j.className=d||"",g&&g.appendChild(j),j}function tn(l){var d=l.parentNode;d&&d.removeChild(l)}function Zl(l){for(;l.firstChild;)l.removeChild(l.firstChild)}function ba(l){var d=l.parentNode;d&&d.lastChild!==l&&d.appendChild(l)}function bo(l){var d=l.parentNode;d&&d.firstChild!==l&&d.insertBefore(l,d.firstChild)}function Eh(l,d){if(l.classList!==void 0)return l.classList.contains(d);var g=Ms(l);return g.length>0&&new RegExp("(^|\\s)"+d+"(\\s|$)").test(g)}function xt(l,d){if(l.classList!==void 0)for(var g=b(d),j=0,T=g.length;j<T;j++)l.classList.add(g[j]);else if(!Eh(l,d)){var z=Ms(l);Ch(l,(z?z+" ":"")+d)}}function mn(l,d){l.classList!==void 0?l.classList.remove(d):Ch(l,_((" "+Ms(l)+" ").replace(" "+d+" "," ")))}function Ch(l,d){l.className.baseVal===void 0?l.className=d:l.className.baseVal=d}function Ms(l){return l.correspondingElement&&(l=l.correspondingElement),l.className.baseVal===void 0?l.className:l.className.baseVal}function kn(l,d){"opacity"in l.style?l.style.opacity=d:"filter"in l.style&&cu(l,d)}function cu(l,d){var g=!1,j="DXImageTransform.Microsoft.Alpha";try{g=l.filters.item(j)}catch{if(d===1)return}d=Math.round(d*100),g?(g.Enabled=d!==100,g.Opacity=d):l.style.filter+=" progid:"+j+"(opacity="+d+")"}function ja(l){for(var d=document.documentElement.style,g=0;g<l.length;g++)if(l[g]in d)return l[g];return!1}function Ri(l,d,g){var j=d||new U(0,0);l.style[Hl]=(et.ie3d?"translate("+j.x+"px,"+j.y+"px)":"translate3d("+j.x+"px,"+j.y+"px,0)")+(g?" scale("+g+")":"")}function dt(l,d){l._leaflet_pos=d,et.any3d?Ri(l,d):(l.style.left=d.x+"px",l.style.top=d.y+"px")}function Ds(l){return l._leaflet_pos||new U(0,0)}var ri,si,Th;if("onselectstart"in document)ri=function(){at(window,"selectstart",xn)},si=function(){Kt(window,"selectstart",xn)};else{var jo=ja(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ri=function(){if(jo){var l=document.documentElement.style;Th=l[jo],l[jo]="none"}},si=function(){jo&&(document.documentElement.style[jo]=Th,Th=void 0)}}function kh(){at(window,"dragstart",xn)}function Ph(){Kt(window,"dragstart",xn)}var uu,Ih;function Na(l){for(;l.tabIndex===-1;)l=l.parentNode;l.style&&(fs(),uu=l,Ih=l.style.outlineStyle,l.style.outlineStyle="none",at(window,"keydown",fs))}function fs(){uu&&(uu.style.outlineStyle=Ih,uu=void 0,Ih=void 0,Kt(window,"keydown",fs))}function Ah(l){do l=l.parentNode;while((!l.offsetWidth||!l.offsetHeight)&&l!==document.body);return l}function du(l){var d=l.getBoundingClientRect();return{x:d.width/l.offsetWidth||1,y:d.height/l.offsetHeight||1,boundingClientRect:d}}var zp={__proto__:null,TRANSFORM:Hl,TRANSITION:Gl,TRANSITION_END:Nh,get:Sh,getStyle:wo,create:Ct,remove:tn,empty:Zl,toFront:ba,toBack:bo,hasClass:Eh,addClass:xt,removeClass:mn,setClass:Ch,getClass:Ms,setOpacity:kn,testProp:ja,setTransform:Ri,setPosition:dt,getPosition:Ds,get disableTextSelection(){return ri},get enableTextSelection(){return si},disableImageDrag:kh,enableImageDrag:Ph,preventOutline:Na,restoreOutline:fs,getSizedParentNode:Ah,getScale:du};function at(l,d,g,j){if(d&&typeof d=="object")for(var T in d)Rh(l,T,d[T],g);else{d=b(d);for(var z=0,Z=d.length;z<Z;z++)Rh(l,d[z],g,j)}return this}var Os="_leaflet_events";function Kt(l,d,g,j){if(arguments.length===1)Up(l),delete l[Os];else if(d&&typeof d=="object")for(var T in d)Mh(l,T,d[T],g);else if(d=b(d),arguments.length===2)Up(l,function(ee){return R(d,ee)!==-1});else for(var z=0,Z=d.length;z<Z;z++)Mh(l,d[z],g,j);return this}function Up(l,d){for(var g in l[Os]){var j=g.split(/\d/)[0];(!d||d(j))&&Mh(l,j,null,null,g)}}var Ls={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Rh(l,d,g,j){var T=d+u(g)+(j?"_"+u(j):"");if(l[Os]&&l[Os][T])return this;var z=function(ee){return g.call(j||l,ee||window.event)},Z=z;!et.touchNative&&et.pointer&&d.indexOf("touch")===0?z=Op(l,d,z):et.touch&&d==="dblclick"?z=ql(l,z):"addEventListener"in l?d==="touchstart"||d==="touchmove"||d==="wheel"||d==="mousewheel"?l.addEventListener(Ls[d]||d,z,et.passiveEvents?{passive:!1}:!1):d==="mouseenter"||d==="mouseleave"?(z=function(ee){ee=ee||window.event,Oh(l,ee)&&Z(ee)},l.addEventListener(Ls[d],z,!1)):l.addEventListener(d,Z,!1):l.attachEvent("on"+d,z),l[Os]=l[Os]||{},l[Os][T]=z}function Mh(l,d,g,j,T){T=T||d+u(g)+(j?"_"+u(j):"");var z=l[Os]&&l[Os][T];if(!z)return this;!et.touchNative&&et.pointer&&d.indexOf("touch")===0?Lp(l,d,z):et.touch&&d==="dblclick"?wa(l,z):"removeEventListener"in l?l.removeEventListener(Ls[d]||d,z,!1):l.detachEvent("on"+d,z),l[Os][T]=null}function Vs(l){return l.stopPropagation?l.stopPropagation():l.originalEvent?l.originalEvent._stopped=!0:l.cancelBubble=!0,this}function No(l){return Rh(l,"wheel",Vs),this}function So(l){return at(l,"mousedown touchstart dblclick contextmenu",Vs),l._leaflet_disable_click=!0,this}function xn(l){return l.preventDefault?l.preventDefault():l.returnValue=!1,this}function ms(l){return xn(l),Vs(l),this}function Dh(l){if(l.composedPath)return l.composedPath();for(var d=[],g=l.target;g;)d.push(g),g=g.parentNode;return d}function hu(l,d){if(!d)return new U(l.clientX,l.clientY);var g=du(d),j=g.boundingClientRect;return new U((l.clientX-j.left)/g.x-d.clientLeft,(l.clientY-j.top)/g.y-d.clientTop)}var pn=et.linux&&et.chrome?window.devicePixelRatio:et.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function $p(l){return et.edge?l.wheelDeltaY/2:l.deltaY&&l.deltaMode===0?-l.deltaY/pn:l.deltaY&&l.deltaMode===1?-l.deltaY*20:l.deltaY&&l.deltaMode===2?-l.deltaY*60:l.deltaX||l.deltaZ?0:l.wheelDelta?(l.wheelDeltaY||l.wheelDelta)/2:l.detail&&Math.abs(l.detail)<32765?-l.detail*20:l.detail?l.detail/-32765*60:0}function Oh(l,d){var g=d.relatedTarget;if(!g)return!0;try{for(;g&&g!==l;)g=g.parentNode}catch{return!1}return g!==l}var Bp={__proto__:null,on:at,off:Kt,stopPropagation:Vs,disableScrollPropagation:No,disableClickPropagation:So,preventDefault:xn,stop:ms,getPropagationPath:Dh,getMousePosition:hu,getWheelDelta:$p,isExternalTarget:Oh,addListener:at,removeListener:Kt},Lh=K.extend({run:function(l,d,g,j){this.stop(),this._el=l,this._inProgress=!0,this._duration=g||.25,this._easeOutPower=1/Math.max(j||.5,.2),this._startPos=Ds(l),this._offset=d.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=V(this._animate,this),this._step()},_step:function(l){var d=+new Date-this._startTime,g=this._duration*1e3;d<g?this._runFrame(this._easeOut(d/g),l):(this._runFrame(1),this._complete())},_runFrame:function(l,d){var g=this._startPos.add(this._offset.multiplyBy(l));d&&g._round(),dt(this._el,g),this.fire("step")},_complete:function(){k(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(l){return 1-Math.pow(1-l,this._easeOutPower)}}),St=K.extend({options:{crs:ge,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(l,d){d=N(this,d),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(l),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),d.maxBounds&&this.setMaxBounds(d.maxBounds),d.zoom!==void 0&&(this._zoom=this._limitZoom(d.zoom)),d.center&&d.zoom!==void 0&&this.setView(se(d.center),d.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Gl&&et.any3d&&!et.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),at(this._proxy,Nh,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(l,d,g){if(d=d===void 0?this._zoom:this._limitZoom(d),l=this._limitCenter(se(l),d,this.options.maxBounds),g=g||{},this._stop(),this._loaded&&!g.reset&&g!==!0){g.animate!==void 0&&(g.zoom=i({animate:g.animate},g.zoom),g.pan=i({animate:g.animate,duration:g.duration},g.pan));var j=this._zoom!==d?this._tryAnimatedZoom&&this._tryAnimatedZoom(l,d,g.zoom):this._tryAnimatedPan(l,g.pan);if(j)return clearTimeout(this._sizeTimer),this}return this._resetView(l,d,g.pan&&g.pan.noMoveStart),this},setZoom:function(l,d){return this._loaded?this.setView(this.getCenter(),l,{zoom:d}):(this._zoom=l,this)},zoomIn:function(l,d){return l=l||(et.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+l,d)},zoomOut:function(l,d){return l=l||(et.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-l,d)},setZoomAround:function(l,d,g){var j=this.getZoomScale(d),T=this.getSize().divideBy(2),z=l instanceof U?l:this.latLngToContainerPoint(l),Z=z.subtract(T).multiplyBy(1-1/j),ee=this.containerPointToLatLng(T.add(Z));return this.setView(ee,d,{zoom:g})},_getBoundsCenterZoom:function(l,d){d=d||{},l=l.getBounds?l.getBounds():Ze(l);var g=H(d.paddingTopLeft||d.padding||[0,0]),j=H(d.paddingBottomRight||d.padding||[0,0]),T=this.getBoundsZoom(l,!1,g.add(j));if(T=typeof d.maxZoom=="number"?Math.min(d.maxZoom,T):T,T===1/0)return{center:l.getCenter(),zoom:T};var z=j.subtract(g).divideBy(2),Z=this.project(l.getSouthWest(),T),ee=this.project(l.getNorthEast(),T),ae=this.unproject(Z.add(ee).divideBy(2).add(z),T);return{center:ae,zoom:T}},fitBounds:function(l,d){if(l=Ze(l),!l.isValid())throw new Error("Bounds are not valid.");var g=this._getBoundsCenterZoom(l,d);return this.setView(g.center,g.zoom,d)},fitWorld:function(l){return this.fitBounds([[-90,-180],[90,180]],l)},panTo:function(l,d){return this.setView(l,this._zoom,{pan:d})},panBy:function(l,d){if(l=H(l).round(),d=d||{},!l.x&&!l.y)return this.fire("moveend");if(d.animate!==!0&&!this.getSize().contains(l))return this._resetView(this.unproject(this.project(this.getCenter()).add(l)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Lh,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),d.noMoveStart||this.fire("movestart"),d.animate!==!1){xt(this._mapPane,"leaflet-pan-anim");var g=this._getMapPanePos().subtract(l).round();this._panAnim.run(this._mapPane,g,d.duration||.25,d.easeLinearity)}else this._rawPanBy(l),this.fire("move").fire("moveend");return this},flyTo:function(l,d,g){if(g=g||{},g.animate===!1||!et.any3d)return this.setView(l,d,g);this._stop();var j=this.project(this.getCenter()),T=this.project(l),z=this.getSize(),Z=this._zoom;l=se(l),d=d===void 0?Z:d;var ee=Math.max(z.x,z.y),ae=ee*this.getZoomScale(Z,d),xe=T.distanceTo(j)||1,Fe=1.42,ot=Fe*Fe;function jt(Wn){var ig=Wn?-1:1,d6=Wn?ae:ee,h6=ae*ae-ee*ee+ig*ot*ot*xe*xe,f6=2*d6*ot*xe,b0=h6/f6,GS=Math.sqrt(b0*b0+1)-b0,m6=GS<1e-9?-18:Math.log(GS);return m6}function Dr(Wn){return(Math.exp(Wn)-Math.exp(-Wn))/2}function lr(Wn){return(Math.exp(Wn)+Math.exp(-Wn))/2}function zs(Wn){return Dr(Wn)/lr(Wn)}var Jr=jt(0);function Su(Wn){return ee*(lr(Jr)/lr(Jr+Fe*Wn))}function o6(Wn){return ee*(lr(Jr)*zs(Jr+Fe*Wn)-Dr(Jr))/ot}function l6(Wn){return 1-Math.pow(1-Wn,1.5)}var c6=Date.now(),qS=(jt(1)-Jr)/Fe,u6=g.duration?1e3*g.duration:1e3*qS*.8;function HS(){var Wn=(Date.now()-c6)/u6,ig=l6(Wn)*qS;Wn<=1?(this._flyToFrame=V(HS,this),this._move(this.unproject(j.add(T.subtract(j).multiplyBy(o6(ig)/xe)),Z),this.getScaleZoom(ee/Su(ig),Z),{flyTo:!0})):this._move(l,d)._moveEnd(!0)}return this._moveStart(!0,g.noMoveStart),HS.call(this),this},flyToBounds:function(l,d){var g=this._getBoundsCenterZoom(l,d);return this.flyTo(g.center,g.zoom,d)},setMaxBounds:function(l){return l=Ze(l),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),l.isValid()?(this.options.maxBounds=l,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(l){var d=this.options.minZoom;return this.options.minZoom=l,this._loaded&&d!==l&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(l):this},setMaxZoom:function(l){var d=this.options.maxZoom;return this.options.maxZoom=l,this._loaded&&d!==l&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(l):this},panInsideBounds:function(l,d){this._enforcingBounds=!0;var g=this.getCenter(),j=this._limitCenter(g,this._zoom,Ze(l));return g.equals(j)||this.panTo(j,d),this._enforcingBounds=!1,this},panInside:function(l,d){d=d||{};var g=H(d.paddingTopLeft||d.padding||[0,0]),j=H(d.paddingBottomRight||d.padding||[0,0]),T=this.project(this.getCenter()),z=this.project(l),Z=this.getPixelBounds(),ee=fe([Z.min.add(g),Z.max.subtract(j)]),ae=ee.getSize();if(!ee.contains(z)){this._enforcingBounds=!0;var xe=z.subtract(ee.getCenter()),Fe=ee.extend(z).getSize().subtract(ae);T.x+=xe.x<0?-Fe.x:Fe.x,T.y+=xe.y<0?-Fe.y:Fe.y,this.panTo(this.unproject(T),d),this._enforcingBounds=!1}return this},invalidateSize:function(l){if(!this._loaded)return this;l=i({animate:!1,pan:!0},l===!0?{animate:!0}:l);var d=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var g=this.getSize(),j=d.divideBy(2).round(),T=g.divideBy(2).round(),z=j.subtract(T);return!z.x&&!z.y?this:(l.animate&&l.pan?this.panBy(z):(l.pan&&this._rawPanBy(z),this.fire("move"),l.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:d,newSize:g}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(l){if(l=this._locateOptions=i({timeout:1e4,watch:!1},l),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var d=o(this._handleGeolocationResponse,this),g=o(this._handleGeolocationError,this);return l.watch?this._locationWatchId=navigator.geolocation.watchPosition(d,g,l):navigator.geolocation.getCurrentPosition(d,g,l),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(l){if(this._container._leaflet_id){var d=l.code,g=l.message||(d===1?"permission denied":d===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:d,message:"Geolocation error: "+g+"."})}},_handleGeolocationResponse:function(l){if(this._container._leaflet_id){var d=l.coords.latitude,g=l.coords.longitude,j=new Ye(d,g),T=j.toBounds(l.coords.accuracy*2),z=this._locateOptions;if(z.setView){var Z=this.getBoundsZoom(T);this.setView(j,z.maxZoom?Math.min(Z,z.maxZoom):Z)}var ee={latlng:j,bounds:T,timestamp:l.timestamp};for(var ae in l.coords)typeof l.coords[ae]=="number"&&(ee[ae]=l.coords[ae]);this.fire("locationfound",ee)}},addHandler:function(l,d){if(!d)return this;var g=this[l]=new d(this);return this._handlers.push(g),this.options[l]&&g.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),tn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(k(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var l;for(l in this._layers)this._layers[l].remove();for(l in this._panes)tn(this._panes[l]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(l,d){var g="leaflet-pane"+(l?" leaflet-"+l.replace("Pane","")+"-pane":""),j=Ct("div",g,d||this._mapPane);return l&&(this._panes[l]=j),j},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var l=this.getPixelBounds(),d=this.unproject(l.getBottomLeft()),g=this.unproject(l.getTopRight());return new ke(d,g)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(l,d,g){l=Ze(l),g=H(g||[0,0]);var j=this.getZoom()||0,T=this.getMinZoom(),z=this.getMaxZoom(),Z=l.getNorthWest(),ee=l.getSouthEast(),ae=this.getSize().subtract(g),xe=fe(this.project(ee,j),this.project(Z,j)).getSize(),Fe=et.any3d?this.options.zoomSnap:1,ot=ae.x/xe.x,jt=ae.y/xe.y,Dr=d?Math.max(ot,jt):Math.min(ot,jt);return j=this.getScaleZoom(Dr,j),Fe&&(j=Math.round(j/(Fe/100))*(Fe/100),j=d?Math.ceil(j/Fe)*Fe:Math.floor(j/Fe)*Fe),Math.max(T,Math.min(z,j))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new U(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(l,d){var g=this._getTopLeftPoint(l,d);return new Q(g,g.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(l){return this.options.crs.getProjectedBounds(l===void 0?this.getZoom():l)},getPane:function(l){return typeof l=="string"?this._panes[l]:l},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(l,d){var g=this.options.crs;return d=d===void 0?this._zoom:d,g.scale(l)/g.scale(d)},getScaleZoom:function(l,d){var g=this.options.crs;d=d===void 0?this._zoom:d;var j=g.zoom(l*g.scale(d));return isNaN(j)?1/0:j},project:function(l,d){return d=d===void 0?this._zoom:d,this.options.crs.latLngToPoint(se(l),d)},unproject:function(l,d){return d=d===void 0?this._zoom:d,this.options.crs.pointToLatLng(H(l),d)},layerPointToLatLng:function(l){var d=H(l).add(this.getPixelOrigin());return this.unproject(d)},latLngToLayerPoint:function(l){var d=this.project(se(l))._round();return d._subtract(this.getPixelOrigin())},wrapLatLng:function(l){return this.options.crs.wrapLatLng(se(l))},wrapLatLngBounds:function(l){return this.options.crs.wrapLatLngBounds(Ze(l))},distance:function(l,d){return this.options.crs.distance(se(l),se(d))},containerPointToLayerPoint:function(l){return H(l).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(l){return H(l).add(this._getMapPanePos())},containerPointToLatLng:function(l){var d=this.containerPointToLayerPoint(H(l));return this.layerPointToLatLng(d)},latLngToContainerPoint:function(l){return this.layerPointToContainerPoint(this.latLngToLayerPoint(se(l)))},mouseEventToContainerPoint:function(l){return hu(l,this._container)},mouseEventToLayerPoint:function(l){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(l))},mouseEventToLatLng:function(l){return this.layerPointToLatLng(this.mouseEventToLayerPoint(l))},_initContainer:function(l){var d=this._container=Sh(l);if(d){if(d._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");at(d,"scroll",this._onScroll,this),this._containerId=u(d)},_initLayout:function(){var l=this._container;this._fadeAnimated=this.options.fadeAnimation&&et.any3d,xt(l,"leaflet-container"+(et.touch?" leaflet-touch":"")+(et.retina?" leaflet-retina":"")+(et.ielt9?" leaflet-oldie":"")+(et.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var d=wo(l,"position");d!=="absolute"&&d!=="relative"&&d!=="fixed"&&d!=="sticky"&&(l.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var l=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),dt(this._mapPane,new U(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(xt(l.markerPane,"leaflet-zoom-hide"),xt(l.shadowPane,"leaflet-zoom-hide"))},_resetView:function(l,d,g){dt(this._mapPane,new U(0,0));var j=!this._loaded;this._loaded=!0,d=this._limitZoom(d),this.fire("viewprereset");var T=this._zoom!==d;this._moveStart(T,g)._move(l,d)._moveEnd(T),this.fire("viewreset"),j&&this.fire("load")},_moveStart:function(l,d){return l&&this.fire("zoomstart"),d||this.fire("movestart"),this},_move:function(l,d,g,j){d===void 0&&(d=this._zoom);var T=this._zoom!==d;return this._zoom=d,this._lastCenter=l,this._pixelOrigin=this._getNewPixelOrigin(l),j?g&&g.pinch&&this.fire("zoom",g):((T||g&&g.pinch)&&this.fire("zoom",g),this.fire("move",g)),this},_moveEnd:function(l){return l&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return k(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(l){dt(this._mapPane,this._getMapPanePos().subtract(l))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(l){this._targets={},this._targets[u(this._container)]=this;var d=l?Kt:at;d(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&d(window,"resize",this._onResize,this),et.any3d&&this.options.transform3DLimit&&(l?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){k(this._resizeRequest),this._resizeRequest=V(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var l=this._getMapPanePos();Math.max(Math.abs(l.x),Math.abs(l.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(l,d){for(var g=[],j,T=d==="mouseout"||d==="mouseover",z=l.target||l.srcElement,Z=!1;z;){if(j=this._targets[u(z)],j&&(d==="click"||d==="preclick")&&this._draggableMoved(j)){Z=!0;break}if(j&&j.listens(d,!0)&&(T&&!Oh(z,l)||(g.push(j),T))||z===this._container)break;z=z.parentNode}return!g.length&&!Z&&!T&&this.listens(d,!0)&&(g=[this]),g},_isClickDisabled:function(l){for(;l&&l!==this._container;){if(l._leaflet_disable_click)return!0;l=l.parentNode}},_handleDOMEvent:function(l){var d=l.target||l.srcElement;if(!(!this._loaded||d._leaflet_disable_events||l.type==="click"&&this._isClickDisabled(d))){var g=l.type;g==="mousedown"&&Na(d),this._fireDOMEvent(l,g)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(l,d,g){if(l.type==="click"){var j=i({},l);j.type="preclick",this._fireDOMEvent(j,j.type,g)}var T=this._findEventTargets(l,d);if(g){for(var z=[],Z=0;Z<g.length;Z++)g[Z].listens(d,!0)&&z.push(g[Z]);T=z.concat(T)}if(T.length){d==="contextmenu"&&xn(l);var ee=T[0],ae={originalEvent:l};if(l.type!=="keypress"&&l.type!=="keydown"&&l.type!=="keyup"){var xe=ee.getLatLng&&(!ee._radius||ee._radius<=10);ae.containerPoint=xe?this.latLngToContainerPoint(ee.getLatLng()):this.mouseEventToContainerPoint(l),ae.layerPoint=this.containerPointToLayerPoint(ae.containerPoint),ae.latlng=xe?ee.getLatLng():this.layerPointToLatLng(ae.layerPoint)}for(Z=0;Z<T.length;Z++)if(T[Z].fire(d,ae,!0),ae.originalEvent._stopped||T[Z].options.bubblingMouseEvents===!1&&R(this._mouseEvents,d)!==-1)return}},_draggableMoved:function(l){return l=l.dragging&&l.dragging.enabled()?l:this,l.dragging&&l.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var l=0,d=this._handlers.length;l<d;l++)this._handlers[l].disable()},whenReady:function(l,d){return this._loaded?l.call(d||this,{target:this}):this.on("load",l,d),this},_getMapPanePos:function(){return Ds(this._mapPane)||new U(0,0)},_moved:function(){var l=this._getMapPanePos();return l&&!l.equals([0,0])},_getTopLeftPoint:function(l,d){var g=l&&d!==void 0?this._getNewPixelOrigin(l,d):this.getPixelOrigin();return g.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(l,d){var g=this.getSize()._divideBy(2);return this.project(l,d)._subtract(g)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(l,d,g){var j=this._getNewPixelOrigin(g,d);return this.project(l,d)._subtract(j)},_latLngBoundsToNewLayerBounds:function(l,d,g){var j=this._getNewPixelOrigin(g,d);return fe([this.project(l.getSouthWest(),d)._subtract(j),this.project(l.getNorthWest(),d)._subtract(j),this.project(l.getSouthEast(),d)._subtract(j),this.project(l.getNorthEast(),d)._subtract(j)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(l){return this.latLngToLayerPoint(l).subtract(this._getCenterLayerPoint())},_limitCenter:function(l,d,g){if(!g)return l;var j=this.project(l,d),T=this.getSize().divideBy(2),z=new Q(j.subtract(T),j.add(T)),Z=this._getBoundsOffset(z,g,d);return Math.abs(Z.x)<=1&&Math.abs(Z.y)<=1?l:this.unproject(j.add(Z),d)},_limitOffset:function(l,d){if(!d)return l;var g=this.getPixelBounds(),j=new Q(g.min.add(l),g.max.add(l));return l.add(this._getBoundsOffset(j,d))},_getBoundsOffset:function(l,d,g){var j=fe(this.project(d.getNorthEast(),g),this.project(d.getSouthWest(),g)),T=j.min.subtract(l.min),z=j.max.subtract(l.max),Z=this._rebound(T.x,-z.x),ee=this._rebound(T.y,-z.y);return new U(Z,ee)},_rebound:function(l,d){return l+d>0?Math.round(l-d)/2:Math.max(0,Math.ceil(l))-Math.max(0,Math.floor(d))},_limitZoom:function(l){var d=this.getMinZoom(),g=this.getMaxZoom(),j=et.any3d?this.options.zoomSnap:1;return j&&(l=Math.round(l/j)*j),Math.max(d,Math.min(g,l))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){mn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(l,d){var g=this._getCenterOffset(l)._trunc();return(d&&d.animate)!==!0&&!this.getSize().contains(g)?!1:(this.panBy(g,d),!0)},_createAnimProxy:function(){var l=this._proxy=Ct("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(l),this.on("zoomanim",function(d){var g=Hl,j=this._proxy.style[g];Ri(this._proxy,this.project(d.center,d.zoom),this.getZoomScale(d.zoom,1)),j===this._proxy.style[g]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){tn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var l=this.getCenter(),d=this.getZoom();Ri(this._proxy,this.project(l,d),this.getZoomScale(d,1))},_catchTransitionEnd:function(l){this._animatingZoom&&l.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(l,d,g){if(this._animatingZoom)return!0;if(g=g||{},!this._zoomAnimated||g.animate===!1||this._nothingToAnimate()||Math.abs(d-this._zoom)>this.options.zoomAnimationThreshold)return!1;var j=this.getZoomScale(d),T=this._getCenterOffset(l)._divideBy(1-1/j);return g.animate!==!0&&!this.getSize().contains(T)?!1:(V(function(){this._moveStart(!0,g.noMoveStart||!1)._animateZoom(l,d,!0)},this),!0)},_animateZoom:function(l,d,g,j){this._mapPane&&(g&&(this._animatingZoom=!0,this._animateToCenter=l,this._animateToZoom=d,xt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:l,zoom:d,noUpdate:j}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&mn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function fu(l,d){return new St(l,d)}var Xr=q.extend({options:{position:"topright"},initialize:function(l){N(this,l)},getPosition:function(){return this.options.position},setPosition:function(l){var d=this._map;return d&&d.removeControl(this),this.options.position=l,d&&d.addControl(this),this},getContainer:function(){return this._container},addTo:function(l){this.remove(),this._map=l;var d=this._container=this.onAdd(l),g=this.getPosition(),j=l._controlCorners[g];return xt(d,"leaflet-control"),g.indexOf("bottom")!==-1?j.insertBefore(d,j.firstChild):j.appendChild(d),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(tn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(l){this._map&&l&&l.screenX>0&&l.screenY>0&&this._map.getContainer().focus()}}),Mr=function(l){return new Xr(l)};St.include({addControl:function(l){return l.addTo(this),this},removeControl:function(l){return l.remove(),this},_initControlPos:function(){var l=this._controlCorners={},d="leaflet-",g=this._controlContainer=Ct("div",d+"control-container",this._container);function j(T,z){var Z=d+T+" "+d+z;l[T+z]=Ct("div",Z,g)}j("top","left"),j("top","right"),j("bottom","left"),j("bottom","right")},_clearControlPos:function(){for(var l in this._controlCorners)tn(this._controlCorners[l]);tn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Vh=Xr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(l,d,g,j){return g<j?-1:j<g?1:0}},initialize:function(l,d,g){N(this,g),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var j in l)this._addLayer(l[j],j);for(j in d)this._addLayer(d[j],j,!0)},onAdd:function(l){this._initLayout(),this._update(),this._map=l,l.on("zoomend",this._checkDisabledLayers,this);for(var d=0;d<this._layers.length;d++)this._layers[d].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(l){return Xr.prototype.addTo.call(this,l),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(l,d){return this._addLayer(l,d),this._map?this._update():this},addOverlay:function(l,d){return this._addLayer(l,d,!0),this._map?this._update():this},removeLayer:function(l){l.off("add remove",this._onLayerChange,this);var d=this._getLayer(u(l));return d&&this._layers.splice(this._layers.indexOf(d),1),this._map?this._update():this},expand:function(){xt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var l=this._map.getSize().y-(this._container.offsetTop+50);return l<this._section.clientHeight?(xt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=l+"px"):mn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return mn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var l="leaflet-control-layers",d=this._container=Ct("div",l),g=this.options.collapsed;d.setAttribute("aria-haspopup",!0),So(d),No(d);var j=this._section=Ct("section",l+"-list");g&&(this._map.on("click",this.collapse,this),at(d,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var T=this._layersLink=Ct("a",l+"-toggle",d);T.href="#",T.title="Layers",T.setAttribute("role","button"),at(T,{keydown:function(z){z.keyCode===13&&this._expandSafely()},click:function(z){xn(z),this._expandSafely()}},this),g||this.expand(),this._baseLayersList=Ct("div",l+"-base",j),this._separator=Ct("div",l+"-separator",j),this._overlaysList=Ct("div",l+"-overlays",j),d.appendChild(j)},_getLayer:function(l){for(var d=0;d<this._layers.length;d++)if(this._layers[d]&&u(this._layers[d].layer)===l)return this._layers[d]},_addLayer:function(l,d,g){this._map&&l.on("add remove",this._onLayerChange,this),this._layers.push({layer:l,name:d,overlay:g}),this.options.sortLayers&&this._layers.sort(o(function(j,T){return this.options.sortFunction(j.layer,T.layer,j.name,T.name)},this)),this.options.autoZIndex&&l.setZIndex&&(this._lastZIndex++,l.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Zl(this._baseLayersList),Zl(this._overlaysList),this._layerControlInputs=[];var l,d,g,j,T=0;for(g=0;g<this._layers.length;g++)j=this._layers[g],this._addItem(j),d=d||j.overlay,l=l||!j.overlay,T+=j.overlay?0:1;return this.options.hideSingleBase&&(l=l&&T>1,this._baseLayersList.style.display=l?"":"none"),this._separator.style.display=d&&l?"":"none",this},_onLayerChange:function(l){this._handlingClick||this._update();var d=this._getLayer(u(l.target)),g=d.overlay?l.type==="add"?"overlayadd":"overlayremove":l.type==="add"?"baselayerchange":null;g&&this._map.fire(g,d)},_createRadioElement:function(l,d){var g='<input type="radio" class="leaflet-control-layers-selector" name="'+l+'"'+(d?' checked="checked"':"")+"/>",j=document.createElement("div");return j.innerHTML=g,j.firstChild},_addItem:function(l){var d=document.createElement("label"),g=this._map.hasLayer(l.layer),j;l.overlay?(j=document.createElement("input"),j.type="checkbox",j.className="leaflet-control-layers-selector",j.defaultChecked=g):j=this._createRadioElement("leaflet-base-layers_"+u(this),g),this._layerControlInputs.push(j),j.layerId=u(l.layer),at(j,"click",this._onInputClick,this);var T=document.createElement("span");T.innerHTML=" "+l.name;var z=document.createElement("span");d.appendChild(z),z.appendChild(j),z.appendChild(T);var Z=l.overlay?this._overlaysList:this._baseLayersList;return Z.appendChild(d),this._checkDisabledLayers(),d},_onInputClick:function(){if(!this._preventClick){var l=this._layerControlInputs,d,g,j=[],T=[];this._handlingClick=!0;for(var z=l.length-1;z>=0;z--)d=l[z],g=this._getLayer(d.layerId).layer,d.checked?j.push(g):d.checked||T.push(g);for(z=0;z<T.length;z++)this._map.hasLayer(T[z])&&this._map.removeLayer(T[z]);for(z=0;z<j.length;z++)this._map.hasLayer(j[z])||this._map.addLayer(j[z]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var l=this._layerControlInputs,d,g,j=this._map.getZoom(),T=l.length-1;T>=0;T--)d=l[T],g=this._getLayer(d.layerId).layer,d.disabled=g.options.minZoom!==void 0&&j<g.options.minZoom||g.options.maxZoom!==void 0&&j>g.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var l=this._section;this._preventClick=!0,at(l,"click",xn),this.expand();var d=this;setTimeout(function(){Kt(l,"click",xn),d._preventClick=!1})}}),g0=function(l,d,g){return new Vh(l,d,g)},Sa=Xr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(l){var d="leaflet-control-zoom",g=Ct("div",d+" leaflet-bar"),j=this.options;return this._zoomInButton=this._createButton(j.zoomInText,j.zoomInTitle,d+"-in",g,this._zoomIn),this._zoomOutButton=this._createButton(j.zoomOutText,j.zoomOutTitle,d+"-out",g,this._zoomOut),this._updateDisabled(),l.on("zoomend zoomlevelschange",this._updateDisabled,this),g},onRemove:function(l){l.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(l){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(l.shiftKey?3:1))},_zoomOut:function(l){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(l.shiftKey?3:1))},_createButton:function(l,d,g,j,T){var z=Ct("a",g,j);return z.innerHTML=l,z.href="#",z.title=d,z.setAttribute("role","button"),z.setAttribute("aria-label",d),So(z),at(z,"click",ms),at(z,"click",T,this),at(z,"click",this._refocusOnMap,this),z},_updateDisabled:function(){var l=this._map,d="leaflet-disabled";mn(this._zoomInButton,d),mn(this._zoomOutButton,d),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||l._zoom===l.getMinZoom())&&(xt(this._zoomOutButton,d),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||l._zoom===l.getMaxZoom())&&(xt(this._zoomInButton,d),this._zoomInButton.setAttribute("aria-disabled","true"))}});St.mergeOptions({zoomControl:!0}),St.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Sa,this.addControl(this.zoomControl))});var Wp=function(l){return new Sa(l)},mu=Xr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(l){var d="leaflet-control-scale",g=Ct("div",d),j=this.options;return this._addScales(j,d+"-line",g),l.on(j.updateWhenIdle?"moveend":"move",this._update,this),l.whenReady(this._update,this),g},onRemove:function(l){l.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(l,d,g){l.metric&&(this._mScale=Ct("div",d,g)),l.imperial&&(this._iScale=Ct("div",d,g))},_update:function(){var l=this._map,d=l.getSize().y/2,g=l.distance(l.containerPointToLatLng([0,d]),l.containerPointToLatLng([this.options.maxWidth,d]));this._updateScales(g)},_updateScales:function(l){this.options.metric&&l&&this._updateMetric(l),this.options.imperial&&l&&this._updateImperial(l)},_updateMetric:function(l){var d=this._getRoundNum(l),g=d<1e3?d+" m":d/1e3+" km";this._updateScale(this._mScale,g,d/l)},_updateImperial:function(l){var d=l*3.2808399,g,j,T;d>5280?(g=d/5280,j=this._getRoundNum(g),this._updateScale(this._iScale,j+" mi",j/g)):(T=this._getRoundNum(d),this._updateScale(this._iScale,T+" ft",T/d))},_updateScale:function(l,d,g){l.style.width=Math.round(this.options.maxWidth*g)+"px",l.innerHTML=d},_getRoundNum:function(l){var d=Math.pow(10,(Math.floor(l)+"").length-1),g=l/d;return g=g>=10?10:g>=5?5:g>=3?3:g>=2?2:1,d*g}}),pu=function(l){return new mu(l)},qp='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Eo=Xr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(et.inlineSvg?qp+" ":"")+"Leaflet</a>"},initialize:function(l){N(this,l),this._attributions={}},onAdd:function(l){l.attributionControl=this,this._container=Ct("div","leaflet-control-attribution"),So(this._container);for(var d in l._layers)l._layers[d].getAttribution&&this.addAttribution(l._layers[d].getAttribution());return this._update(),l.on("layeradd",this._addAttribution,this),this._container},onRemove:function(l){l.off("layeradd",this._addAttribution,this)},_addAttribution:function(l){l.layer.getAttribution&&(this.addAttribution(l.layer.getAttribution()),l.layer.once("remove",function(){this.removeAttribution(l.layer.getAttribution())},this))},setPrefix:function(l){return this.options.prefix=l,this._update(),this},addAttribution:function(l){return l?(this._attributions[l]||(this._attributions[l]=0),this._attributions[l]++,this._update(),this):this},removeAttribution:function(l){return l?(this._attributions[l]&&(this._attributions[l]--,this._update()),this):this},_update:function(){if(this._map){var l=[];for(var d in this._attributions)this._attributions[d]&&l.push(d);var g=[];this.options.prefix&&g.push(this.options.prefix),l.length&&g.push(l.join(", ")),this._container.innerHTML=g.join(' <span aria-hidden="true">|</span> ')}}});St.mergeOptions({attributionControl:!0}),St.addInitHook(function(){this.options.attributionControl&&new Eo().addTo(this)});var v0=function(l){return new Eo(l)};Xr.Layers=Vh,Xr.Zoom=Sa,Xr.Scale=mu,Xr.Attribution=Eo,Mr.layers=g0,Mr.zoom=Wp,Mr.scale=pu,Mr.attribution=v0;var ps=q.extend({initialize:function(l){this._map=l},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ps.addTo=function(l,d){return l.addHandler(d,this),this};var Kl={Events:re},Fh=et.touch?"touchstart mousedown":"mousedown",ii=K.extend({options:{clickTolerance:3},initialize:function(l,d,g,j){N(this,j),this._element=l,this._dragStartTarget=d||l,this._preventOutline=g},enable:function(){this._enabled||(at(this._dragStartTarget,Fh,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ii._dragging===this&&this.finishDrag(!0),Kt(this._dragStartTarget,Fh,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(l){if(this._enabled&&(this._moved=!1,!Eh(this._element,"leaflet-zoom-anim"))){if(l.touches&&l.touches.length!==1){ii._dragging===this&&this.finishDrag();return}if(!(ii._dragging||l.shiftKey||l.which!==1&&l.button!==1&&!l.touches)&&(ii._dragging=this,this._preventOutline&&Na(this._element),kh(),ri(),!this._moving)){this.fire("down");var d=l.touches?l.touches[0]:l,g=Ah(this._element);this._startPoint=new U(d.clientX,d.clientY),this._startPos=Ds(this._element),this._parentScale=du(g);var j=l.type==="mousedown";at(document,j?"mousemove":"touchmove",this._onMove,this),at(document,j?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(l){if(this._enabled){if(l.touches&&l.touches.length>1){this._moved=!0;return}var d=l.touches&&l.touches.length===1?l.touches[0]:l,g=new U(d.clientX,d.clientY)._subtract(this._startPoint);!g.x&&!g.y||Math.abs(g.x)+Math.abs(g.y)<this.options.clickTolerance||(g.x/=this._parentScale.x,g.y/=this._parentScale.y,xn(l),this._moved||(this.fire("dragstart"),this._moved=!0,xt(document.body,"leaflet-dragging"),this._lastTarget=l.target||l.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),xt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(g),this._moving=!0,this._lastEvent=l,this._updatePosition())}},_updatePosition:function(){var l={originalEvent:this._lastEvent};this.fire("predrag",l),dt(this._element,this._newPos),this.fire("drag",l)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(l){mn(document.body,"leaflet-dragging"),this._lastTarget&&(mn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Kt(document,"mousemove touchmove",this._onMove,this),Kt(document,"mouseup touchend touchcancel",this._onUp,this),Ph(),si();var d=this._moved&&this._moving;this._moving=!1,ii._dragging=!1,d&&this.fire("dragend",{noInertia:l,distance:this._newPos.distanceTo(this._startPos)})}});function gu(l,d,g){var j,T=[1,4,2,8],z,Z,ee,ae,xe,Fe,ot,jt;for(z=0,Fe=l.length;z<Fe;z++)l[z]._code=Mi(l[z],d);for(ee=0;ee<4;ee++){for(ot=T[ee],j=[],z=0,Fe=l.length,Z=Fe-1;z<Fe;Z=z++)ae=l[z],xe=l[Z],ae._code&ot?xe._code&ot||(jt=or(xe,ae,ot,d,g),jt._code=Mi(jt,d),j.push(jt)):(xe._code&ot&&(jt=or(xe,ae,ot,d,g),jt._code=Mi(jt,d),j.push(jt)),j.push(ae));l=j}return l}function vu(l,d){var g,j,T,z,Z,ee,ae,xe,Fe;if(!l||l.length===0)throw new Error("latlngs not passed");m(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var ot=se([0,0]),jt=Ze(l),Dr=jt.getNorthWest().distanceTo(jt.getSouthWest())*jt.getNorthEast().distanceTo(jt.getNorthWest());Dr<1700&&(ot=xu(l));var lr=l.length,zs=[];for(g=0;g<lr;g++){var Jr=se(l[g]);zs.push(d.project(se([Jr.lat-ot.lat,Jr.lng-ot.lng])))}for(ee=ae=xe=0,g=0,j=lr-1;g<lr;j=g++)T=zs[g],z=zs[j],Z=T.y*z.x-z.y*T.x,ae+=(T.x+z.x)*Z,xe+=(T.y+z.y)*Z,ee+=Z*3;ee===0?Fe=zs[0]:Fe=[ae/ee,xe/ee];var Su=d.unproject(H(Fe));return se([Su.lat+ot.lat,Su.lng+ot.lng])}function xu(l){for(var d=0,g=0,j=0,T=0;T<l.length;T++){var z=se(l[T]);d+=z.lat,g+=z.lng,j++}return se([d/j,g/j])}var yu={__proto__:null,clipPolygon:gu,polygonCenter:vu,centroid:xu};function zh(l,d){if(!d||!l.length)return l.slice();var g=d*d;return l=Gp(l,g),l=Hp(l,g),l}function Uh(l,d,g){return Math.sqrt(Fs(l,d,g,!0))}function Ea(l,d,g){return Fs(l,d,g)}function Hp(l,d){var g=l.length,j=typeof Uint8Array<"u"?Uint8Array:Array,T=new j(g);T[0]=T[g-1]=1,_u(l,T,d,0,g-1);var z,Z=[];for(z=0;z<g;z++)T[z]&&Z.push(l[z]);return Z}function _u(l,d,g,j,T){var z=0,Z,ee,ae;for(ee=j+1;ee<=T-1;ee++)ae=Fs(l[ee],l[j],l[T],!0),ae>z&&(Z=ee,z=ae);z>g&&(d[Z]=1,_u(l,d,g,j,Z),_u(l,d,g,Z,T))}function Gp(l,d){for(var g=[l[0]],j=1,T=0,z=l.length;j<z;j++)Zp(l[j],l[T])>d&&(g.push(l[j]),T=j);return T<z-1&&g.push(l[z-1]),g}var $h;function Yl(l,d,g,j,T){var z=j?$h:Mi(l,g),Z=Mi(d,g),ee,ae,xe;for($h=Z;;){if(!(z|Z))return[l,d];if(z&Z)return!1;ee=z||Z,ae=or(l,d,ee,g,T),xe=Mi(ae,g),ee===z?(l=ae,z=xe):(d=ae,Z=xe)}}function or(l,d,g,j,T){var z=d.x-l.x,Z=d.y-l.y,ee=j.min,ae=j.max,xe,Fe;return g&8?(xe=l.x+z*(ae.y-l.y)/Z,Fe=ae.y):g&4?(xe=l.x+z*(ee.y-l.y)/Z,Fe=ee.y):g&2?(xe=ae.x,Fe=l.y+Z*(ae.x-l.x)/z):g&1&&(xe=ee.x,Fe=l.y+Z*(ee.x-l.x)/z),new U(xe,Fe,T)}function Mi(l,d){var g=0;return l.x<d.min.x?g|=1:l.x>d.max.x&&(g|=2),l.y<d.min.y?g|=4:l.y>d.max.y&&(g|=8),g}function Zp(l,d){var g=d.x-l.x,j=d.y-l.y;return g*g+j*j}function Fs(l,d,g,j){var T=d.x,z=d.y,Z=g.x-T,ee=g.y-z,ae=Z*Z+ee*ee,xe;return ae>0&&(xe=((l.x-T)*Z+(l.y-z)*ee)/ae,xe>1?(T=g.x,z=g.y):xe>0&&(T+=Z*xe,z+=ee*xe)),Z=l.x-T,ee=l.y-z,j?Z*Z+ee*ee:new U(T,z)}function m(l){return!C(l[0])||typeof l[0][0]!="object"&&typeof l[0][0]<"u"}function E(l){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),m(l)}function A(l,d){var g,j,T,z,Z,ee,ae,xe;if(!l||l.length===0)throw new Error("latlngs not passed");m(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var Fe=se([0,0]),ot=Ze(l),jt=ot.getNorthWest().distanceTo(ot.getSouthWest())*ot.getNorthEast().distanceTo(ot.getNorthWest());jt<1700&&(Fe=xu(l));var Dr=l.length,lr=[];for(g=0;g<Dr;g++){var zs=se(l[g]);lr.push(d.project(se([zs.lat-Fe.lat,zs.lng-Fe.lng])))}for(g=0,j=0;g<Dr-1;g++)j+=lr[g].distanceTo(lr[g+1])/2;if(j===0)xe=lr[0];else for(g=0,z=0;g<Dr-1;g++)if(Z=lr[g],ee=lr[g+1],T=Z.distanceTo(ee),z+=T,z>j){ae=(z-j)/T,xe=[ee.x-ae*(ee.x-Z.x),ee.y-ae*(ee.y-Z.y)];break}var Jr=d.unproject(H(xe));return se([Jr.lat+Fe.lat,Jr.lng+Fe.lng])}var $={__proto__:null,simplify:zh,pointToSegmentDistance:Uh,closestPointOnSegment:Ea,clipSegment:Yl,_getEdgeIntersection:or,_getBitCode:Mi,_sqClosestPointOnSegment:Fs,isFlat:m,_flat:E,polylineCenter:A},X={project:function(l){return new U(l.lng,l.lat)},unproject:function(l){return new Ye(l.y,l.x)},bounds:new Q([-180,-90],[180,90])},oe={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Q([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(l){var d=Math.PI/180,g=this.R,j=l.lat*d,T=this.R_MINOR/g,z=Math.sqrt(1-T*T),Z=z*Math.sin(j),ee=Math.tan(Math.PI/4-j/2)/Math.pow((1-Z)/(1+Z),z/2);return j=-g*Math.log(Math.max(ee,1e-10)),new U(l.lng*d*g,j)},unproject:function(l){for(var d=180/Math.PI,g=this.R,j=this.R_MINOR/g,T=Math.sqrt(1-j*j),z=Math.exp(-l.y/g),Z=Math.PI/2-2*Math.atan(z),ee=0,ae=.1,xe;ee<15&&Math.abs(ae)>1e-7;ee++)xe=T*Math.sin(Z),xe=Math.pow((1-xe)/(1+xe),T/2),ae=Math.PI/2-2*Math.atan(z*xe)-Z,Z+=ae;return new Ye(Z*d,l.x*d/g)}},Pe={__proto__:null,LonLat:X,Mercator:oe,SphericalMercator:_e},Bt=i({},ne,{code:"EPSG:3395",projection:oe,transformation:function(){var l=.5/(Math.PI*oe.R);return Se(l,.5,-l,.5)}()}),Bn=i({},ne,{code:"EPSG:4326",projection:X,transformation:Se(1/180,1,-1/180,.5)}),Rt=i({},de,{projection:X,transformation:Se(1,0,-1,0),scale:function(l){return Math.pow(2,l)},zoom:function(l){return Math.log(l)/Math.LN2},distance:function(l,d){var g=d.lng-l.lng,j=d.lat-l.lat;return Math.sqrt(g*g+j*j)},infinite:!0});de.Earth=ne,de.EPSG3395=Bt,de.EPSG3857=ge,de.EPSG900913=Ae,de.EPSG4326=Bn,de.Simple=Rt;var Yt=K.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(l){return l.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(l){return l&&l.removeLayer(this),this},getPane:function(l){return this._map.getPane(l?this.options[l]||l:this.options.pane)},addInteractiveTarget:function(l){return this._map._targets[u(l)]=this,this},removeInteractiveTarget:function(l){return delete this._map._targets[u(l)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(l){var d=l.target;if(d.hasLayer(this)){if(this._map=d,this._zoomAnimated=d._zoomAnimated,this.getEvents){var g=this.getEvents();d.on(g,this),this.once("remove",function(){d.off(g,this)},this)}this.onAdd(d),this.fire("add"),d.fire("layeradd",{layer:this})}}});St.include({addLayer:function(l){if(!l._layerAdd)throw new Error("The provided object is not a Layer.");var d=u(l);return this._layers[d]?this:(this._layers[d]=l,l._mapToAdd=this,l.beforeAdd&&l.beforeAdd(this),this.whenReady(l._layerAdd,l),this)},removeLayer:function(l){var d=u(l);return this._layers[d]?(this._loaded&&l.onRemove(this),delete this._layers[d],this._loaded&&(this.fire("layerremove",{layer:l}),l.fire("remove")),l._map=l._mapToAdd=null,this):this},hasLayer:function(l){return u(l)in this._layers},eachLayer:function(l,d){for(var g in this._layers)l.call(d,this._layers[g]);return this},_addLayers:function(l){l=l?C(l)?l:[l]:[];for(var d=0,g=l.length;d<g;d++)this.addLayer(l[d])},_addZoomLimit:function(l){(!isNaN(l.options.maxZoom)||!isNaN(l.options.minZoom))&&(this._zoomBoundLayers[u(l)]=l,this._updateZoomLevels())},_removeZoomLimit:function(l){var d=u(l);this._zoomBoundLayers[d]&&(delete this._zoomBoundLayers[d],this._updateZoomLevels())},_updateZoomLevels:function(){var l=1/0,d=-1/0,g=this._getZoomSpan();for(var j in this._zoomBoundLayers){var T=this._zoomBoundLayers[j].options;l=T.minZoom===void 0?l:Math.min(l,T.minZoom),d=T.maxZoom===void 0?d:Math.max(d,T.maxZoom)}this._layersMaxZoom=d===-1/0?void 0:d,this._layersMinZoom=l===1/0?void 0:l,g!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var yn=Yt.extend({initialize:function(l,d){N(this,d),this._layers={};var g,j;if(l)for(g=0,j=l.length;g<j;g++)this.addLayer(l[g])},addLayer:function(l){var d=this.getLayerId(l);return this._layers[d]=l,this._map&&this._map.addLayer(l),this},removeLayer:function(l){var d=l in this._layers?l:this.getLayerId(l);return this._map&&this._layers[d]&&this._map.removeLayer(this._layers[d]),delete this._layers[d],this},hasLayer:function(l){var d=typeof l=="number"?l:this.getLayerId(l);return d in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(l){var d=Array.prototype.slice.call(arguments,1),g,j;for(g in this._layers)j=this._layers[g],j[l]&&j[l].apply(j,d);return this},onAdd:function(l){this.eachLayer(l.addLayer,l)},onRemove:function(l){this.eachLayer(l.removeLayer,l)},eachLayer:function(l,d){for(var g in this._layers)l.call(d,this._layers[g]);return this},getLayer:function(l){return this._layers[l]},getLayers:function(){var l=[];return this.eachLayer(l.push,l),l},setZIndex:function(l){return this.invoke("setZIndex",l)},getLayerId:function(l){return u(l)}}),Co=function(l,d){return new yn(l,d)},On=yn.extend({addLayer:function(l){return this.hasLayer(l)?this:(l.addEventParent(this),yn.prototype.addLayer.call(this,l),this.fire("layeradd",{layer:l}))},removeLayer:function(l){return this.hasLayer(l)?(l in this._layers&&(l=this._layers[l]),l.removeEventParent(this),yn.prototype.removeLayer.call(this,l),this.fire("layerremove",{layer:l})):this},setStyle:function(l){return this.invoke("setStyle",l)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var l=new ke;for(var d in this._layers){var g=this._layers[d];l.extend(g.getBounds?g.getBounds():g.getLatLng())}return l}}),wu=function(l,d){return new On(l,d)},Di=q.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(l){N(this,l)},createIcon:function(l){return this._createIcon("icon",l)},createShadow:function(l){return this._createIcon("shadow",l)},_createIcon:function(l,d){var g=this._getIconUrl(l);if(!g){if(l==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var j=this._createImg(g,d&&d.tagName==="IMG"?d:null);return this._setIconStyles(j,l),(this.options.crossOrigin||this.options.crossOrigin==="")&&(j.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),j},_setIconStyles:function(l,d){var g=this.options,j=g[d+"Size"];typeof j=="number"&&(j=[j,j]);var T=H(j),z=H(d==="shadow"&&g.shadowAnchor||g.iconAnchor||T&&T.divideBy(2,!0));l.className="leaflet-marker-"+d+" "+(g.className||""),z&&(l.style.marginLeft=-z.x+"px",l.style.marginTop=-z.y+"px"),T&&(l.style.width=T.x+"px",l.style.height=T.y+"px")},_createImg:function(l,d){return d=d||document.createElement("img"),d.src=l,d},_getIconUrl:function(l){return et.retina&&this.options[l+"RetinaUrl"]||this.options[l+"Url"]}});function $5(l){return new Di(l)}var Bh=Di.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(l){return typeof Bh.imagePath!="string"&&(Bh.imagePath=this._detectIconPath()),(this.options.imagePath||Bh.imagePath)+Di.prototype._getIconUrl.call(this,l)},_stripUrl:function(l){var d=function(g,j,T){var z=j.exec(g);return z&&z[T]};return l=d(l,/^url\((['"])?(.+)\1\)$/,2),l&&d(l,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var l=Ct("div","leaflet-default-icon-path",document.body),d=wo(l,"background-image")||wo(l,"backgroundImage");if(document.body.removeChild(l),d=this._stripUrl(d),d)return d;var g=document.querySelector('link[href$="leaflet.css"]');return g?g.href.substring(0,g.href.length-11-1):""}}),ES=ps.extend({initialize:function(l){this._marker=l},addHooks:function(){var l=this._marker._icon;this._draggable||(this._draggable=new ii(l,l,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),xt(l,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&mn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(l){var d=this._marker,g=d._map,j=this._marker.options.autoPanSpeed,T=this._marker.options.autoPanPadding,z=Ds(d._icon),Z=g.getPixelBounds(),ee=g.getPixelOrigin(),ae=fe(Z.min._subtract(ee).add(T),Z.max._subtract(ee).subtract(T));if(!ae.contains(z)){var xe=H((Math.max(ae.max.x,z.x)-ae.max.x)/(Z.max.x-ae.max.x)-(Math.min(ae.min.x,z.x)-ae.min.x)/(Z.min.x-ae.min.x),(Math.max(ae.max.y,z.y)-ae.max.y)/(Z.max.y-ae.max.y)-(Math.min(ae.min.y,z.y)-ae.min.y)/(Z.min.y-ae.min.y)).multiplyBy(j);g.panBy(xe,{animate:!1}),this._draggable._newPos._add(xe),this._draggable._startPos._add(xe),dt(d._icon,this._draggable._newPos),this._onDrag(l),this._panRequest=V(this._adjustPan.bind(this,l))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(l){this._marker.options.autoPan&&(k(this._panRequest),this._panRequest=V(this._adjustPan.bind(this,l)))},_onDrag:function(l){var d=this._marker,g=d._shadow,j=Ds(d._icon),T=d._map.layerPointToLatLng(j);g&&dt(g,j),d._latlng=T,l.latlng=T,l.oldLatLng=this._oldLatLng,d.fire("move",l).fire("drag",l)},_onDragEnd:function(l){k(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",l)}}),Kp=Yt.extend({options:{icon:new Bh,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(l,d){N(this,d),this._latlng=se(l)},onAdd:function(l){this._zoomAnimated=this._zoomAnimated&&l.options.markerZoomAnimation,this._zoomAnimated&&l.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(l){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&l.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(l){var d=this._latlng;return this._latlng=se(l),this.update(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},setZIndexOffset:function(l){return this.options.zIndexOffset=l,this.update()},getIcon:function(){return this.options.icon},setIcon:function(l){return this.options.icon=l,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var l=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(l)}return this},_initIcon:function(){var l=this.options,d="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),g=l.icon.createIcon(this._icon),j=!1;g!==this._icon&&(this._icon&&this._removeIcon(),j=!0,l.title&&(g.title=l.title),g.tagName==="IMG"&&(g.alt=l.alt||"")),xt(g,d),l.keyboard&&(g.tabIndex="0",g.setAttribute("role","button")),this._icon=g,l.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&at(g,"focus",this._panOnFocus,this);var T=l.icon.createShadow(this._shadow),z=!1;T!==this._shadow&&(this._removeShadow(),z=!0),T&&(xt(T,d),T.alt=""),this._shadow=T,l.opacity<1&&this._updateOpacity(),j&&this.getPane().appendChild(this._icon),this._initInteraction(),T&&z&&this.getPane(l.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Kt(this._icon,"focus",this._panOnFocus,this),tn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&tn(this._shadow),this._shadow=null},_setPos:function(l){this._icon&&dt(this._icon,l),this._shadow&&dt(this._shadow,l),this._zIndex=l.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(l){this._icon&&(this._icon.style.zIndex=this._zIndex+l)},_animateZoom:function(l){var d=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center).round();this._setPos(d)},_initInteraction:function(){if(this.options.interactive&&(xt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),ES)){var l=this.options.draggable;this.dragging&&(l=this.dragging.enabled(),this.dragging.disable()),this.dragging=new ES(this),l&&this.dragging.enable()}},setOpacity:function(l){return this.options.opacity=l,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var l=this.options.opacity;this._icon&&kn(this._icon,l),this._shadow&&kn(this._shadow,l)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var l=this._map;if(l){var d=this.options.icon.options,g=d.iconSize?H(d.iconSize):H(0,0),j=d.iconAnchor?H(d.iconAnchor):H(0,0);l.panInside(this._latlng,{paddingTopLeft:j,paddingBottomRight:g.subtract(j)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function B5(l,d){return new Kp(l,d)}var To=Yt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(l){this._renderer=l.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(l){return N(this,l),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&l&&Object.prototype.hasOwnProperty.call(l,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Yp=To.extend({options:{fill:!0,radius:10},initialize:function(l,d){N(this,d),this._latlng=se(l),this._radius=this.options.radius},setLatLng:function(l){var d=this._latlng;return this._latlng=se(l),this.redraw(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(l){return this.options.radius=this._radius=l,this.redraw()},getRadius:function(){return this._radius},setStyle:function(l){var d=l&&l.radius||this._radius;return To.prototype.setStyle.call(this,l),this.setRadius(d),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var l=this._radius,d=this._radiusY||l,g=this._clickTolerance(),j=[l+g,d+g];this._pxBounds=new Q(this._point.subtract(j),this._point.add(j))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(l){return l.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function W5(l,d){return new Yp(l,d)}var x0=Yp.extend({initialize:function(l,d,g){if(typeof d=="number"&&(d=i({},g,{radius:d})),N(this,d),this._latlng=se(l),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(l){return this._mRadius=l,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var l=[this._radius,this._radiusY||this._radius];return new ke(this._map.layerPointToLatLng(this._point.subtract(l)),this._map.layerPointToLatLng(this._point.add(l)))},setStyle:To.prototype.setStyle,_project:function(){var l=this._latlng.lng,d=this._latlng.lat,g=this._map,j=g.options.crs;if(j.distance===ne.distance){var T=Math.PI/180,z=this._mRadius/ne.R/T,Z=g.project([d+z,l]),ee=g.project([d-z,l]),ae=Z.add(ee).divideBy(2),xe=g.unproject(ae).lat,Fe=Math.acos((Math.cos(z*T)-Math.sin(d*T)*Math.sin(xe*T))/(Math.cos(d*T)*Math.cos(xe*T)))/T;(isNaN(Fe)||Fe===0)&&(Fe=z/Math.cos(Math.PI/180*d)),this._point=ae.subtract(g.getPixelOrigin()),this._radius=isNaN(Fe)?0:ae.x-g.project([xe,l-Fe]).x,this._radiusY=ae.y-Z.y}else{var ot=j.unproject(j.project(this._latlng).subtract([this._mRadius,0]));this._point=g.latLngToLayerPoint(this._latlng),this._radius=this._point.x-g.latLngToLayerPoint(ot).x}this._updateBounds()}});function q5(l,d,g){return new x0(l,d,g)}var Ca=To.extend({options:{smoothFactor:1,noClip:!1},initialize:function(l,d){N(this,d),this._setLatLngs(l)},getLatLngs:function(){return this._latlngs},setLatLngs:function(l){return this._setLatLngs(l),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(l){for(var d=1/0,g=null,j=Fs,T,z,Z=0,ee=this._parts.length;Z<ee;Z++)for(var ae=this._parts[Z],xe=1,Fe=ae.length;xe<Fe;xe++){T=ae[xe-1],z=ae[xe];var ot=j(l,T,z,!0);ot<d&&(d=ot,g=j(l,T,z))}return g&&(g.distance=Math.sqrt(d)),g},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return A(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(l,d){return d=d||this._defaultShape(),l=se(l),d.push(l),this._bounds.extend(l),this.redraw()},_setLatLngs:function(l){this._bounds=new ke,this._latlngs=this._convertLatLngs(l)},_defaultShape:function(){return m(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(l){for(var d=[],g=m(l),j=0,T=l.length;j<T;j++)g?(d[j]=se(l[j]),this._bounds.extend(d[j])):d[j]=this._convertLatLngs(l[j]);return d},_project:function(){var l=new Q;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,l),this._bounds.isValid()&&l.isValid()&&(this._rawPxBounds=l,this._updateBounds())},_updateBounds:function(){var l=this._clickTolerance(),d=new U(l,l);this._rawPxBounds&&(this._pxBounds=new Q([this._rawPxBounds.min.subtract(d),this._rawPxBounds.max.add(d)]))},_projectLatlngs:function(l,d,g){var j=l[0]instanceof Ye,T=l.length,z,Z;if(j){for(Z=[],z=0;z<T;z++)Z[z]=this._map.latLngToLayerPoint(l[z]),g.extend(Z[z]);d.push(Z)}else for(z=0;z<T;z++)this._projectLatlngs(l[z],d,g)},_clipPoints:function(){var l=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}var d=this._parts,g,j,T,z,Z,ee,ae;for(g=0,T=0,z=this._rings.length;g<z;g++)for(ae=this._rings[g],j=0,Z=ae.length;j<Z-1;j++)ee=Yl(ae[j],ae[j+1],l,j,!0),ee&&(d[T]=d[T]||[],d[T].push(ee[0]),(ee[1]!==ae[j+1]||j===Z-2)&&(d[T].push(ee[1]),T++))}},_simplifyPoints:function(){for(var l=this._parts,d=this.options.smoothFactor,g=0,j=l.length;g<j;g++)l[g]=zh(l[g],d)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(l,d){var g,j,T,z,Z,ee,ae=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(g=0,z=this._parts.length;g<z;g++)for(ee=this._parts[g],j=0,Z=ee.length,T=Z-1;j<Z;T=j++)if(!(!d&&j===0)&&Uh(l,ee[T],ee[j])<=ae)return!0;return!1}});function H5(l,d){return new Ca(l,d)}Ca._flat=E;var bu=Ca.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return vu(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(l){var d=Ca.prototype._convertLatLngs.call(this,l),g=d.length;return g>=2&&d[0]instanceof Ye&&d[0].equals(d[g-1])&&d.pop(),d},_setLatLngs:function(l){Ca.prototype._setLatLngs.call(this,l),m(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return m(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var l=this._renderer._bounds,d=this.options.weight,g=new U(d,d);if(l=new Q(l.min.subtract(g),l.max.add(g)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}for(var j=0,T=this._rings.length,z;j<T;j++)z=gu(this._rings[j],l,!0),z.length&&this._parts.push(z)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(l){var d=!1,g,j,T,z,Z,ee,ae,xe;if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(z=0,ae=this._parts.length;z<ae;z++)for(g=this._parts[z],Z=0,xe=g.length,ee=xe-1;Z<xe;ee=Z++)j=g[Z],T=g[ee],j.y>l.y!=T.y>l.y&&l.x<(T.x-j.x)*(l.y-j.y)/(T.y-j.y)+j.x&&(d=!d);return d||Ca.prototype._containsPoint.call(this,l,!0)}});function G5(l,d){return new bu(l,d)}var Ta=On.extend({initialize:function(l,d){N(this,d),this._layers={},l&&this.addData(l)},addData:function(l){var d=C(l)?l:l.features,g,j,T;if(d){for(g=0,j=d.length;g<j;g++)T=d[g],(T.geometries||T.geometry||T.features||T.coordinates)&&this.addData(T);return this}var z=this.options;if(z.filter&&!z.filter(l))return this;var Z=Qp(l,z);return Z?(Z.feature=eg(l),Z.defaultOptions=Z.options,this.resetStyle(Z),z.onEachFeature&&z.onEachFeature(l,Z),this.addLayer(Z)):this},resetStyle:function(l){return l===void 0?this.eachLayer(this.resetStyle,this):(l.options=i({},l.defaultOptions),this._setLayerStyle(l,this.options.style),this)},setStyle:function(l){return this.eachLayer(function(d){this._setLayerStyle(d,l)},this)},_setLayerStyle:function(l,d){l.setStyle&&(typeof d=="function"&&(d=d(l.feature)),l.setStyle(d))}});function Qp(l,d){var g=l.type==="Feature"?l.geometry:l,j=g?g.coordinates:null,T=[],z=d&&d.pointToLayer,Z=d&&d.coordsToLatLng||y0,ee,ae,xe,Fe;if(!j&&!g)return null;switch(g.type){case"Point":return ee=Z(j),CS(z,l,ee,d);case"MultiPoint":for(xe=0,Fe=j.length;xe<Fe;xe++)ee=Z(j[xe]),T.push(CS(z,l,ee,d));return new On(T);case"LineString":case"MultiLineString":return ae=Xp(j,g.type==="LineString"?0:1,Z),new Ca(ae,d);case"Polygon":case"MultiPolygon":return ae=Xp(j,g.type==="Polygon"?1:2,Z),new bu(ae,d);case"GeometryCollection":for(xe=0,Fe=g.geometries.length;xe<Fe;xe++){var ot=Qp({geometry:g.geometries[xe],type:"Feature",properties:l.properties},d);ot&&T.push(ot)}return new On(T);case"FeatureCollection":for(xe=0,Fe=g.features.length;xe<Fe;xe++){var jt=Qp(g.features[xe],d);jt&&T.push(jt)}return new On(T);default:throw new Error("Invalid GeoJSON object.")}}function CS(l,d,g,j){return l?l(d,g):new Kp(g,j&&j.markersInheritOptions&&j)}function y0(l){return new Ye(l[1],l[0],l[2])}function Xp(l,d,g){for(var j=[],T=0,z=l.length,Z;T<z;T++)Z=d?Xp(l[T],d-1,g):(g||y0)(l[T]),j.push(Z);return j}function _0(l,d){return l=se(l),l.alt!==void 0?[v(l.lng,d),v(l.lat,d),v(l.alt,d)]:[v(l.lng,d),v(l.lat,d)]}function Jp(l,d,g,j){for(var T=[],z=0,Z=l.length;z<Z;z++)T.push(d?Jp(l[z],m(l[z])?0:d-1,g,j):_0(l[z],j));return!d&&g&&T.length>0&&T.push(T[0].slice()),T}function ju(l,d){return l.feature?i({},l.feature,{geometry:d}):eg(d)}function eg(l){return l.type==="Feature"||l.type==="FeatureCollection"?l:{type:"Feature",properties:{},geometry:l}}var w0={toGeoJSON:function(l){return ju(this,{type:"Point",coordinates:_0(this.getLatLng(),l)})}};Kp.include(w0),x0.include(w0),Yp.include(w0),Ca.include({toGeoJSON:function(l){var d=!m(this._latlngs),g=Jp(this._latlngs,d?1:0,!1,l);return ju(this,{type:(d?"Multi":"")+"LineString",coordinates:g})}}),bu.include({toGeoJSON:function(l){var d=!m(this._latlngs),g=d&&!m(this._latlngs[0]),j=Jp(this._latlngs,g?2:d?1:0,!0,l);return d||(j=[j]),ju(this,{type:(g?"Multi":"")+"Polygon",coordinates:j})}}),yn.include({toMultiPoint:function(l){var d=[];return this.eachLayer(function(g){d.push(g.toGeoJSON(l).geometry.coordinates)}),ju(this,{type:"MultiPoint",coordinates:d})},toGeoJSON:function(l){var d=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(d==="MultiPoint")return this.toMultiPoint(l);var g=d==="GeometryCollection",j=[];return this.eachLayer(function(T){if(T.toGeoJSON){var z=T.toGeoJSON(l);if(g)j.push(z.geometry);else{var Z=eg(z);Z.type==="FeatureCollection"?j.push.apply(j,Z.features):j.push(Z)}}}),g?ju(this,{geometries:j,type:"GeometryCollection"}):{type:"FeatureCollection",features:j}}});function TS(l,d){return new Ta(l,d)}var Z5=TS,tg=Yt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(l,d,g){this._url=l,this._bounds=Ze(d),N(this,g)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(xt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){tn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(l){return this.options.opacity=l,this._image&&this._updateOpacity(),this},setStyle:function(l){return l.opacity&&this.setOpacity(l.opacity),this},bringToFront:function(){return this._map&&ba(this._image),this},bringToBack:function(){return this._map&&bo(this._image),this},setUrl:function(l){return this._url=l,this._image&&(this._image.src=l),this},setBounds:function(l){return this._bounds=Ze(l),this._map&&this._reset(),this},getEvents:function(){var l={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var l=this._url.tagName==="IMG",d=this._image=l?this._url:Ct("img");if(xt(d,"leaflet-image-layer"),this._zoomAnimated&&xt(d,"leaflet-zoom-animated"),this.options.className&&xt(d,this.options.className),d.onselectstart=p,d.onmousemove=p,d.onload=o(this.fire,this,"load"),d.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),l){this._url=d.src;return}d.src=this._url,d.alt=this.options.alt},_animateZoom:function(l){var d=this._map.getZoomScale(l.zoom),g=this._map._latLngBoundsToNewLayerBounds(this._bounds,l.zoom,l.center).min;Ri(this._image,g,d)},_reset:function(){var l=this._image,d=new Q(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),g=d.getSize();dt(l,d.min),l.style.width=g.x+"px",l.style.height=g.y+"px"},_updateOpacity:function(){kn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var l=this.options.errorOverlayUrl;l&&this._url!==l&&(this._url=l,this._image.src=l)},getCenter:function(){return this._bounds.getCenter()}}),K5=function(l,d,g){return new tg(l,d,g)},kS=tg.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var l=this._url.tagName==="VIDEO",d=this._image=l?this._url:Ct("video");if(xt(d,"leaflet-image-layer"),this._zoomAnimated&&xt(d,"leaflet-zoom-animated"),this.options.className&&xt(d,this.options.className),d.onselectstart=p,d.onmousemove=p,d.onloadeddata=o(this.fire,this,"load"),l){for(var g=d.getElementsByTagName("source"),j=[],T=0;T<g.length;T++)j.push(g[T].src);this._url=g.length>0?j:[d.src];return}C(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(d.style,"objectFit")&&(d.style.objectFit="fill"),d.autoplay=!!this.options.autoplay,d.loop=!!this.options.loop,d.muted=!!this.options.muted,d.playsInline=!!this.options.playsInline;for(var z=0;z<this._url.length;z++){var Z=Ct("source");Z.src=this._url[z],d.appendChild(Z)}}});function Y5(l,d,g){return new kS(l,d,g)}var PS=tg.extend({_initImage:function(){var l=this._image=this._url;xt(l,"leaflet-image-layer"),this._zoomAnimated&&xt(l,"leaflet-zoom-animated"),this.options.className&&xt(l,this.options.className),l.onselectstart=p,l.onmousemove=p}});function Q5(l,d,g){return new PS(l,d,g)}var Oi=Yt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(l,d){l&&(l instanceof Ye||C(l))?(this._latlng=se(l),N(this,d)):(N(this,l),this._source=d),this.options.content&&(this._content=this.options.content)},openOn:function(l){return l=arguments.length?l:this._source._map,l.hasLayer(this)||l.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(l){return this._map?this.close():(arguments.length?this._source=l:l=this._source,this._prepareOpen(),this.openOn(l._map)),this},onAdd:function(l){this._zoomAnimated=l._zoomAnimated,this._container||this._initLayout(),l._fadeAnimated&&kn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),l._fadeAnimated&&kn(this._container,1),this.bringToFront(),this.options.interactive&&(xt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(l){l._fadeAnimated?(kn(this._container,0),this._removeTimeout=setTimeout(o(tn,void 0,this._container),200)):tn(this._container),this.options.interactive&&(mn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(l){return this._latlng=se(l),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(l){return this._content=l,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var l={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ba(this._container),this},bringToBack:function(){return this._map&&bo(this._container),this},_prepareOpen:function(l){var d=this._source;if(!d._map)return!1;if(d instanceof On){d=null;var g=this._source._layers;for(var j in g)if(g[j]._map){d=g[j];break}if(!d)return!1;this._source=d}if(!l)if(d.getCenter)l=d.getCenter();else if(d.getLatLng)l=d.getLatLng();else if(d.getBounds)l=d.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(l),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var l=this._contentNode,d=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof d=="string")l.innerHTML=d;else{for(;l.hasChildNodes();)l.removeChild(l.firstChild);l.appendChild(d)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var l=this._map.latLngToLayerPoint(this._latlng),d=H(this.options.offset),g=this._getAnchor();this._zoomAnimated?dt(this._container,l.add(g)):d=d.add(l).add(g);var j=this._containerBottom=-d.y,T=this._containerLeft=-Math.round(this._containerWidth/2)+d.x;this._container.style.bottom=j+"px",this._container.style.left=T+"px"}},_getAnchor:function(){return[0,0]}});St.include({_initOverlay:function(l,d,g,j){var T=d;return T instanceof l||(T=new l(j).setContent(d)),g&&T.setLatLng(g),T}}),Yt.include({_initOverlay:function(l,d,g,j){var T=g;return T instanceof l?(N(T,j),T._source=this):(T=d&&!j?d:new l(j,this),T.setContent(g)),T}});var ng=Oi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(l){return l=arguments.length?l:this._source._map,!l.hasLayer(this)&&l._popup&&l._popup.options.autoClose&&l.removeLayer(l._popup),l._popup=this,Oi.prototype.openOn.call(this,l)},onAdd:function(l){Oi.prototype.onAdd.call(this,l),l.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof To||this._source.on("preclick",Vs))},onRemove:function(l){Oi.prototype.onRemove.call(this,l),l.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof To||this._source.off("preclick",Vs))},getEvents:function(){var l=Oi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(l.preclick=this.close),this.options.keepInView&&(l.moveend=this._adjustPan),l},_initLayout:function(){var l="leaflet-popup",d=this._container=Ct("div",l+" "+(this.options.className||"")+" leaflet-zoom-animated"),g=this._wrapper=Ct("div",l+"-content-wrapper",d);if(this._contentNode=Ct("div",l+"-content",g),So(d),No(this._contentNode),at(d,"contextmenu",Vs),this._tipContainer=Ct("div",l+"-tip-container",d),this._tip=Ct("div",l+"-tip",this._tipContainer),this.options.closeButton){var j=this._closeButton=Ct("a",l+"-close-button",d);j.setAttribute("role","button"),j.setAttribute("aria-label","Close popup"),j.href="#close",j.innerHTML='<span aria-hidden="true">&#215;</span>',at(j,"click",function(T){xn(T),this.close()},this)}},_updateLayout:function(){var l=this._contentNode,d=l.style;d.width="",d.whiteSpace="nowrap";var g=l.offsetWidth;g=Math.min(g,this.options.maxWidth),g=Math.max(g,this.options.minWidth),d.width=g+1+"px",d.whiteSpace="",d.height="";var j=l.offsetHeight,T=this.options.maxHeight,z="leaflet-popup-scrolled";T&&j>T?(d.height=T+"px",xt(l,z)):mn(l,z),this._containerWidth=this._container.offsetWidth},_animateZoom:function(l){var d=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center),g=this._getAnchor();dt(this._container,d.add(g))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var l=this._map,d=parseInt(wo(this._container,"marginBottom"),10)||0,g=this._container.offsetHeight+d,j=this._containerWidth,T=new U(this._containerLeft,-g-this._containerBottom);T._add(Ds(this._container));var z=l.layerPointToContainerPoint(T),Z=H(this.options.autoPanPadding),ee=H(this.options.autoPanPaddingTopLeft||Z),ae=H(this.options.autoPanPaddingBottomRight||Z),xe=l.getSize(),Fe=0,ot=0;z.x+j+ae.x>xe.x&&(Fe=z.x+j-xe.x+ae.x),z.x-Fe-ee.x<0&&(Fe=z.x-ee.x),z.y+g+ae.y>xe.y&&(ot=z.y+g-xe.y+ae.y),z.y-ot-ee.y<0&&(ot=z.y-ee.y),(Fe||ot)&&(this.options.keepInView&&(this._autopanning=!0),l.fire("autopanstart").panBy([Fe,ot]))}},_getAnchor:function(){return H(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),X5=function(l,d){return new ng(l,d)};St.mergeOptions({closePopupOnClick:!0}),St.include({openPopup:function(l,d,g){return this._initOverlay(ng,l,d,g).openOn(this),this},closePopup:function(l){return l=arguments.length?l:this._popup,l&&l.close(),this}}),Yt.include({bindPopup:function(l,d){return this._popup=this._initOverlay(ng,this._popup,l,d),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(l){return this._popup&&(this instanceof On||(this._popup._source=this),this._popup._prepareOpen(l||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(l){return this._popup&&this._popup.setContent(l),this},getPopup:function(){return this._popup},_openPopup:function(l){if(!(!this._popup||!this._map)){ms(l);var d=l.layer||l.target;if(this._popup._source===d&&!(d instanceof To)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(l.latlng);return}this._popup._source=d,this.openPopup(l.latlng)}},_movePopup:function(l){this._popup.setLatLng(l.latlng)},_onKeyPress:function(l){l.originalEvent.keyCode===13&&this._openPopup(l)}});var rg=Oi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(l){Oi.prototype.onAdd.call(this,l),this.setOpacity(this.options.opacity),l.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(l){Oi.prototype.onRemove.call(this,l),l.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var l=Oi.prototype.getEvents.call(this);return this.options.permanent||(l.preclick=this.close),l},_initLayout:function(){var l="leaflet-tooltip",d=l+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ct("div",d),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+u(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(l){var d,g,j=this._map,T=this._container,z=j.latLngToContainerPoint(j.getCenter()),Z=j.layerPointToContainerPoint(l),ee=this.options.direction,ae=T.offsetWidth,xe=T.offsetHeight,Fe=H(this.options.offset),ot=this._getAnchor();ee==="top"?(d=ae/2,g=xe):ee==="bottom"?(d=ae/2,g=0):ee==="center"?(d=ae/2,g=xe/2):ee==="right"?(d=0,g=xe/2):ee==="left"?(d=ae,g=xe/2):Z.x<z.x?(ee="right",d=0,g=xe/2):(ee="left",d=ae+(Fe.x+ot.x)*2,g=xe/2),l=l.subtract(H(d,g,!0)).add(Fe).add(ot),mn(T,"leaflet-tooltip-right"),mn(T,"leaflet-tooltip-left"),mn(T,"leaflet-tooltip-top"),mn(T,"leaflet-tooltip-bottom"),xt(T,"leaflet-tooltip-"+ee),dt(T,l)},_updatePosition:function(){var l=this._map.latLngToLayerPoint(this._latlng);this._setPosition(l)},setOpacity:function(l){this.options.opacity=l,this._container&&kn(this._container,l)},_animateZoom:function(l){var d=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center);this._setPosition(d)},_getAnchor:function(){return H(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),J5=function(l,d){return new rg(l,d)};St.include({openTooltip:function(l,d,g){return this._initOverlay(rg,l,d,g).openOn(this),this},closeTooltip:function(l){return l.close(),this}}),Yt.include({bindTooltip:function(l,d){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(rg,this._tooltip,l,d),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(l){if(!(!l&&this._tooltipHandlersAdded)){var d=l?"off":"on",g={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?g.add=this._openTooltip:(g.mouseover=this._openTooltip,g.mouseout=this.closeTooltip,g.click=this._openTooltip,this._map?this._addFocusListeners():g.add=this._addFocusListeners),this._tooltip.options.sticky&&(g.mousemove=this._moveTooltip),this[d](g),this._tooltipHandlersAdded=!l}},openTooltip:function(l){return this._tooltip&&(this instanceof On||(this._tooltip._source=this),this._tooltip._prepareOpen(l)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(l){return this._tooltip&&this._tooltip.setContent(l),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(l){var d=typeof l.getElement=="function"&&l.getElement();d&&(at(d,"focus",function(){this._tooltip._source=l,this.openTooltip()},this),at(d,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(l){var d=typeof l.getElement=="function"&&l.getElement();d&&d.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(l){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var d=this;this._map.once("moveend",function(){d._openOnceFlag=!1,d._openTooltip(l)});return}this._tooltip._source=l.layer||l.target,this.openTooltip(this._tooltip.options.sticky?l.latlng:void 0)}},_moveTooltip:function(l){var d=l.latlng,g,j;this._tooltip.options.sticky&&l.originalEvent&&(g=this._map.mouseEventToContainerPoint(l.originalEvent),j=this._map.containerPointToLayerPoint(g),d=this._map.layerPointToLatLng(j)),this._tooltip.setLatLng(d)}});var IS=Di.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(l){var d=l&&l.tagName==="DIV"?l:document.createElement("div"),g=this.options;if(g.html instanceof Element?(Zl(d),d.appendChild(g.html)):d.innerHTML=g.html!==!1?g.html:"",g.bgPos){var j=H(g.bgPos);d.style.backgroundPosition=-j.x+"px "+-j.y+"px"}return this._setIconStyles(d,"icon"),d},createShadow:function(){return null}});function e6(l){return new IS(l)}Di.Default=Bh;var Wh=Yt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:et.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(l){N(this,l)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(l){l._addZoomLimit(this)},onRemove:function(l){this._removeAllTiles(),tn(this._container),l._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ba(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(bo(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(l){return this.options.opacity=l,this._updateOpacity(),this},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var l=this._clampZoom(this._map.getZoom());l!==this._tileZoom&&(this._tileZoom=l,this._updateLevels()),this._update()}return this},getEvents:function(){var l={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=h(this._onMoveEnd,this.options.updateInterval,this)),l.move=this._onMove),this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},createTile:function(){return document.createElement("div")},getTileSize:function(){var l=this.options.tileSize;return l instanceof U?l:new U(l,l)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(l){for(var d=this.getPane().children,g=-l(-1/0,1/0),j=0,T=d.length,z;j<T;j++)z=d[j].style.zIndex,d[j]!==this._container&&z&&(g=l(g,+z));isFinite(g)&&(this.options.zIndex=g+l(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!et.ielt9){kn(this._container,this.options.opacity);var l=+new Date,d=!1,g=!1;for(var j in this._tiles){var T=this._tiles[j];if(!(!T.current||!T.loaded)){var z=Math.min(1,(l-T.loaded)/200);kn(T.el,z),z<1?d=!0:(T.active?g=!0:this._onOpaqueTile(T),T.active=!0)}}g&&!this._noPrune&&this._pruneTiles(),d&&(k(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this))}},_onOpaqueTile:p,_initContainer:function(){this._container||(this._container=Ct("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var l=this._tileZoom,d=this.options.maxZoom;if(l!==void 0){for(var g in this._levels)g=Number(g),this._levels[g].el.children.length||g===l?(this._levels[g].el.style.zIndex=d-Math.abs(l-g),this._onUpdateLevel(g)):(tn(this._levels[g].el),this._removeTilesAtZoom(g),this._onRemoveLevel(g),delete this._levels[g]);var j=this._levels[l],T=this._map;return j||(j=this._levels[l]={},j.el=Ct("div","leaflet-tile-container leaflet-zoom-animated",this._container),j.el.style.zIndex=d,j.origin=T.project(T.unproject(T.getPixelOrigin()),l).round(),j.zoom=l,this._setZoomTransform(j,T.getCenter(),T.getZoom()),p(j.el.offsetWidth),this._onCreateLevel(j)),this._level=j,j}},_onUpdateLevel:p,_onRemoveLevel:p,_onCreateLevel:p,_pruneTiles:function(){if(this._map){var l,d,g=this._map.getZoom();if(g>this.options.maxZoom||g<this.options.minZoom){this._removeAllTiles();return}for(l in this._tiles)d=this._tiles[l],d.retain=d.current;for(l in this._tiles)if(d=this._tiles[l],d.current&&!d.active){var j=d.coords;this._retainParent(j.x,j.y,j.z,j.z-5)||this._retainChildren(j.x,j.y,j.z,j.z+2)}for(l in this._tiles)this._tiles[l].retain||this._removeTile(l)}},_removeTilesAtZoom:function(l){for(var d in this._tiles)this._tiles[d].coords.z===l&&this._removeTile(d)},_removeAllTiles:function(){for(var l in this._tiles)this._removeTile(l)},_invalidateAll:function(){for(var l in this._levels)tn(this._levels[l].el),this._onRemoveLevel(Number(l)),delete this._levels[l];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(l,d,g,j){var T=Math.floor(l/2),z=Math.floor(d/2),Z=g-1,ee=new U(+T,+z);ee.z=+Z;var ae=this._tileCoordsToKey(ee),xe=this._tiles[ae];return xe&&xe.active?(xe.retain=!0,!0):(xe&&xe.loaded&&(xe.retain=!0),Z>j?this._retainParent(T,z,Z,j):!1)},_retainChildren:function(l,d,g,j){for(var T=2*l;T<2*l+2;T++)for(var z=2*d;z<2*d+2;z++){var Z=new U(T,z);Z.z=g+1;var ee=this._tileCoordsToKey(Z),ae=this._tiles[ee];if(ae&&ae.active){ae.retain=!0;continue}else ae&&ae.loaded&&(ae.retain=!0);g+1<j&&this._retainChildren(T,z,g+1,j)}},_resetView:function(l){var d=l&&(l.pinch||l.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),d,d)},_animateZoom:function(l){this._setView(l.center,l.zoom,!0,l.noUpdate)},_clampZoom:function(l){var d=this.options;return d.minNativeZoom!==void 0&&l<d.minNativeZoom?d.minNativeZoom:d.maxNativeZoom!==void 0&&d.maxNativeZoom<l?d.maxNativeZoom:l},_setView:function(l,d,g,j){var T=Math.round(d);this.options.maxZoom!==void 0&&T>this.options.maxZoom||this.options.minZoom!==void 0&&T<this.options.minZoom?T=void 0:T=this._clampZoom(T);var z=this.options.updateWhenZooming&&T!==this._tileZoom;(!j||z)&&(this._tileZoom=T,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),T!==void 0&&this._update(l),g||this._pruneTiles(),this._noPrune=!!g),this._setZoomTransforms(l,d)},_setZoomTransforms:function(l,d){for(var g in this._levels)this._setZoomTransform(this._levels[g],l,d)},_setZoomTransform:function(l,d,g){var j=this._map.getZoomScale(g,l.zoom),T=l.origin.multiplyBy(j).subtract(this._map._getNewPixelOrigin(d,g)).round();et.any3d?Ri(l.el,T,j):dt(l.el,T)},_resetGrid:function(){var l=this._map,d=l.options.crs,g=this._tileSize=this.getTileSize(),j=this._tileZoom,T=this._map.getPixelWorldBounds(this._tileZoom);T&&(this._globalTileRange=this._pxBoundsToTileRange(T)),this._wrapX=d.wrapLng&&!this.options.noWrap&&[Math.floor(l.project([0,d.wrapLng[0]],j).x/g.x),Math.ceil(l.project([0,d.wrapLng[1]],j).x/g.y)],this._wrapY=d.wrapLat&&!this.options.noWrap&&[Math.floor(l.project([d.wrapLat[0],0],j).y/g.x),Math.ceil(l.project([d.wrapLat[1],0],j).y/g.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(l){var d=this._map,g=d._animatingZoom?Math.max(d._animateToZoom,d.getZoom()):d.getZoom(),j=d.getZoomScale(g,this._tileZoom),T=d.project(l,this._tileZoom).floor(),z=d.getSize().divideBy(j*2);return new Q(T.subtract(z),T.add(z))},_update:function(l){var d=this._map;if(d){var g=this._clampZoom(d.getZoom());if(l===void 0&&(l=d.getCenter()),this._tileZoom!==void 0){var j=this._getTiledPixelBounds(l),T=this._pxBoundsToTileRange(j),z=T.getCenter(),Z=[],ee=this.options.keepBuffer,ae=new Q(T.getBottomLeft().subtract([ee,-ee]),T.getTopRight().add([ee,-ee]));if(!(isFinite(T.min.x)&&isFinite(T.min.y)&&isFinite(T.max.x)&&isFinite(T.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var xe in this._tiles){var Fe=this._tiles[xe].coords;(Fe.z!==this._tileZoom||!ae.contains(new U(Fe.x,Fe.y)))&&(this._tiles[xe].current=!1)}if(Math.abs(g-this._tileZoom)>1){this._setView(l,g);return}for(var ot=T.min.y;ot<=T.max.y;ot++)for(var jt=T.min.x;jt<=T.max.x;jt++){var Dr=new U(jt,ot);if(Dr.z=this._tileZoom,!!this._isValidTile(Dr)){var lr=this._tiles[this._tileCoordsToKey(Dr)];lr?lr.current=!0:Z.push(Dr)}}if(Z.sort(function(Jr,Su){return Jr.distanceTo(z)-Su.distanceTo(z)}),Z.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var zs=document.createDocumentFragment();for(jt=0;jt<Z.length;jt++)this._addTile(Z[jt],zs);this._level.el.appendChild(zs)}}}},_isValidTile:function(l){var d=this._map.options.crs;if(!d.infinite){var g=this._globalTileRange;if(!d.wrapLng&&(l.x<g.min.x||l.x>g.max.x)||!d.wrapLat&&(l.y<g.min.y||l.y>g.max.y))return!1}if(!this.options.bounds)return!0;var j=this._tileCoordsToBounds(l);return Ze(this.options.bounds).overlaps(j)},_keyToBounds:function(l){return this._tileCoordsToBounds(this._keyToTileCoords(l))},_tileCoordsToNwSe:function(l){var d=this._map,g=this.getTileSize(),j=l.scaleBy(g),T=j.add(g),z=d.unproject(j,l.z),Z=d.unproject(T,l.z);return[z,Z]},_tileCoordsToBounds:function(l){var d=this._tileCoordsToNwSe(l),g=new ke(d[0],d[1]);return this.options.noWrap||(g=this._map.wrapLatLngBounds(g)),g},_tileCoordsToKey:function(l){return l.x+":"+l.y+":"+l.z},_keyToTileCoords:function(l){var d=l.split(":"),g=new U(+d[0],+d[1]);return g.z=+d[2],g},_removeTile:function(l){var d=this._tiles[l];d&&(tn(d.el),delete this._tiles[l],this.fire("tileunload",{tile:d.el,coords:this._keyToTileCoords(l)}))},_initTile:function(l){xt(l,"leaflet-tile");var d=this.getTileSize();l.style.width=d.x+"px",l.style.height=d.y+"px",l.onselectstart=p,l.onmousemove=p,et.ielt9&&this.options.opacity<1&&kn(l,this.options.opacity)},_addTile:function(l,d){var g=this._getTilePos(l),j=this._tileCoordsToKey(l),T=this.createTile(this._wrapCoords(l),o(this._tileReady,this,l));this._initTile(T),this.createTile.length<2&&V(o(this._tileReady,this,l,null,T)),dt(T,g),this._tiles[j]={el:T,coords:l,current:!0},d.appendChild(T),this.fire("tileloadstart",{tile:T,coords:l})},_tileReady:function(l,d,g){d&&this.fire("tileerror",{error:d,tile:g,coords:l});var j=this._tileCoordsToKey(l);g=this._tiles[j],g&&(g.loaded=+new Date,this._map._fadeAnimated?(kn(g.el,0),k(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this)):(g.active=!0,this._pruneTiles()),d||(xt(g.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:g.el,coords:l})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),et.ielt9||!this._map._fadeAnimated?V(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(l){return l.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(l){var d=new U(this._wrapX?f(l.x,this._wrapX):l.x,this._wrapY?f(l.y,this._wrapY):l.y);return d.z=l.z,d},_pxBoundsToTileRange:function(l){var d=this.getTileSize();return new Q(l.min.unscaleBy(d).floor(),l.max.unscaleBy(d).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var l in this._tiles)if(!this._tiles[l].loaded)return!1;return!0}});function t6(l){return new Wh(l)}var Nu=Wh.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(l,d){this._url=l,d=N(this,d),d.detectRetina&&et.retina&&d.maxZoom>0?(d.tileSize=Math.floor(d.tileSize/2),d.zoomReverse?(d.zoomOffset--,d.minZoom=Math.min(d.maxZoom,d.minZoom+1)):(d.zoomOffset++,d.maxZoom=Math.max(d.minZoom,d.maxZoom-1)),d.minZoom=Math.max(0,d.minZoom)):d.zoomReverse?d.minZoom=Math.min(d.maxZoom,d.minZoom):d.maxZoom=Math.max(d.minZoom,d.maxZoom),typeof d.subdomains=="string"&&(d.subdomains=d.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(l,d){return this._url===l&&d===void 0&&(d=!0),this._url=l,d||this.redraw(),this},createTile:function(l,d){var g=document.createElement("img");return at(g,"load",o(this._tileOnLoad,this,d,g)),at(g,"error",o(this._tileOnError,this,d,g)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(g.referrerPolicy=this.options.referrerPolicy),g.alt="",g.src=this.getTileUrl(l),g},getTileUrl:function(l){var d={r:et.retina?"@2x":"",s:this._getSubdomain(l),x:l.x,y:l.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var g=this._globalTileRange.max.y-l.y;this.options.tms&&(d.y=g),d["-y"]=g}return y(this._url,i(d,this.options))},_tileOnLoad:function(l,d){et.ielt9?setTimeout(o(l,this,null,d),0):l(null,d)},_tileOnError:function(l,d,g){var j=this.options.errorTileUrl;j&&d.getAttribute("src")!==j&&(d.src=j),l(g,d)},_onTileRemove:function(l){l.tile.onload=null},_getZoomForUrl:function(){var l=this._tileZoom,d=this.options.maxZoom,g=this.options.zoomReverse,j=this.options.zoomOffset;return g&&(l=d-l),l+j},_getSubdomain:function(l){var d=Math.abs(l.x+l.y)%this.options.subdomains.length;return this.options.subdomains[d]},_abortLoading:function(){var l,d;for(l in this._tiles)if(this._tiles[l].coords.z!==this._tileZoom&&(d=this._tiles[l].el,d.onload=p,d.onerror=p,!d.complete)){d.src=M;var g=this._tiles[l].coords;tn(d),delete this._tiles[l],this.fire("tileabort",{tile:d,coords:g})}},_removeTile:function(l){var d=this._tiles[l];if(d)return d.el.setAttribute("src",M),Wh.prototype._removeTile.call(this,l)},_tileReady:function(l,d,g){if(!(!this._map||g&&g.getAttribute("src")===M))return Wh.prototype._tileReady.call(this,l,d,g)}});function AS(l,d){return new Nu(l,d)}var RS=Nu.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(l,d){this._url=l;var g=i({},this.defaultWmsParams);for(var j in d)j in this.options||(g[j]=d[j]);d=N(this,d);var T=d.detectRetina&&et.retina?2:1,z=this.getTileSize();g.width=z.x*T,g.height=z.y*T,this.wmsParams=g},onAdd:function(l){this._crs=this.options.crs||l.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var d=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[d]=this._crs.code,Nu.prototype.onAdd.call(this,l)},getTileUrl:function(l){var d=this._tileCoordsToNwSe(l),g=this._crs,j=fe(g.project(d[0]),g.project(d[1])),T=j.min,z=j.max,Z=(this._wmsVersion>=1.3&&this._crs===Bn?[T.y,T.x,z.y,z.x]:[T.x,T.y,z.x,z.y]).join(","),ee=Nu.prototype.getTileUrl.call(this,l);return ee+S(this.wmsParams,ee,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Z},setParams:function(l,d){return i(this.wmsParams,l),d||this.redraw(),this}});function n6(l,d){return new RS(l,d)}Nu.WMS=RS,AS.wms=n6;var ka=Yt.extend({options:{padding:.1},initialize:function(l){N(this,l),u(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),xt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var l={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(l.zoomanim=this._onAnimZoom),l},_onAnimZoom:function(l){this._updateTransform(l.center,l.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(l,d){var g=this._map.getZoomScale(d,this._zoom),j=this._map.getSize().multiplyBy(.5+this.options.padding),T=this._map.project(this._center,d),z=j.multiplyBy(-g).add(T).subtract(this._map._getNewPixelOrigin(l,d));et.any3d?Ri(this._container,z,g):dt(this._container,z)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var l in this._layers)this._layers[l]._reset()},_onZoomEnd:function(){for(var l in this._layers)this._layers[l]._project()},_updatePaths:function(){for(var l in this._layers)this._layers[l]._update()},_update:function(){var l=this.options.padding,d=this._map.getSize(),g=this._map.containerPointToLayerPoint(d.multiplyBy(-l)).round();this._bounds=new Q(g,g.add(d.multiplyBy(1+l*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),MS=ka.extend({options:{tolerance:0},getEvents:function(){var l=ka.prototype.getEvents.call(this);return l.viewprereset=this._onViewPreReset,l},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ka.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var l=this._container=document.createElement("canvas");at(l,"mousemove",this._onMouseMove,this),at(l,"click dblclick mousedown mouseup contextmenu",this._onClick,this),at(l,"mouseout",this._handleMouseOut,this),l._leaflet_disable_events=!0,this._ctx=l.getContext("2d")},_destroyContainer:function(){k(this._redrawRequest),delete this._ctx,tn(this._container),Kt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var l;this._redrawBounds=null;for(var d in this._layers)l=this._layers[d],l._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ka.prototype._update.call(this);var l=this._bounds,d=this._container,g=l.getSize(),j=et.retina?2:1;dt(d,l.min),d.width=j*g.x,d.height=j*g.y,d.style.width=g.x+"px",d.style.height=g.y+"px",et.retina&&this._ctx.scale(2,2),this._ctx.translate(-l.min.x,-l.min.y),this.fire("update")}},_reset:function(){ka.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(l){this._updateDashArray(l),this._layers[u(l)]=l;var d=l._order={layer:l,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=d),this._drawLast=d,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(l){this._requestRedraw(l)},_removePath:function(l){var d=l._order,g=d.next,j=d.prev;g?g.prev=j:this._drawLast=j,j?j.next=g:this._drawFirst=g,delete l._order,delete this._layers[u(l)],this._requestRedraw(l)},_updatePath:function(l){this._extendRedrawBounds(l),l._project(),l._update(),this._requestRedraw(l)},_updateStyle:function(l){this._updateDashArray(l),this._requestRedraw(l)},_updateDashArray:function(l){if(typeof l.options.dashArray=="string"){var d=l.options.dashArray.split(/[, ]+/),g=[],j,T;for(T=0;T<d.length;T++){if(j=Number(d[T]),isNaN(j))return;g.push(j)}l.options._dashArray=g}else l.options._dashArray=l.options.dashArray},_requestRedraw:function(l){this._map&&(this._extendRedrawBounds(l),this._redrawRequest=this._redrawRequest||V(this._redraw,this))},_extendRedrawBounds:function(l){if(l._pxBounds){var d=(l.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Q,this._redrawBounds.extend(l._pxBounds.min.subtract([d,d])),this._redrawBounds.extend(l._pxBounds.max.add([d,d]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var l=this._redrawBounds;if(l){var d=l.getSize();this._ctx.clearRect(l.min.x,l.min.y,d.x,d.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var l,d=this._redrawBounds;if(this._ctx.save(),d){var g=d.getSize();this._ctx.beginPath(),this._ctx.rect(d.min.x,d.min.y,g.x,g.y),this._ctx.clip()}this._drawing=!0;for(var j=this._drawFirst;j;j=j.next)l=j.layer,(!d||l._pxBounds&&l._pxBounds.intersects(d))&&l._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(l,d){if(this._drawing){var g,j,T,z,Z=l._parts,ee=Z.length,ae=this._ctx;if(ee){for(ae.beginPath(),g=0;g<ee;g++){for(j=0,T=Z[g].length;j<T;j++)z=Z[g][j],ae[j?"lineTo":"moveTo"](z.x,z.y);d&&ae.closePath()}this._fillStroke(ae,l)}}},_updateCircle:function(l){if(!(!this._drawing||l._empty())){var d=l._point,g=this._ctx,j=Math.max(Math.round(l._radius),1),T=(Math.max(Math.round(l._radiusY),1)||j)/j;T!==1&&(g.save(),g.scale(1,T)),g.beginPath(),g.arc(d.x,d.y/T,j,0,Math.PI*2,!1),T!==1&&g.restore(),this._fillStroke(g,l)}},_fillStroke:function(l,d){var g=d.options;g.fill&&(l.globalAlpha=g.fillOpacity,l.fillStyle=g.fillColor||g.color,l.fill(g.fillRule||"evenodd")),g.stroke&&g.weight!==0&&(l.setLineDash&&l.setLineDash(d.options&&d.options._dashArray||[]),l.globalAlpha=g.opacity,l.lineWidth=g.weight,l.strokeStyle=g.color,l.lineCap=g.lineCap,l.lineJoin=g.lineJoin,l.stroke())},_onClick:function(l){for(var d=this._map.mouseEventToLayerPoint(l),g,j,T=this._drawFirst;T;T=T.next)g=T.layer,g.options.interactive&&g._containsPoint(d)&&(!(l.type==="click"||l.type==="preclick")||!this._map._draggableMoved(g))&&(j=g);this._fireEvent(j?[j]:!1,l)},_onMouseMove:function(l){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var d=this._map.mouseEventToLayerPoint(l);this._handleMouseHover(l,d)}},_handleMouseOut:function(l){var d=this._hoveredLayer;d&&(mn(this._container,"leaflet-interactive"),this._fireEvent([d],l,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(l,d){if(!this._mouseHoverThrottled){for(var g,j,T=this._drawFirst;T;T=T.next)g=T.layer,g.options.interactive&&g._containsPoint(d)&&(j=g);j!==this._hoveredLayer&&(this._handleMouseOut(l),j&&(xt(this._container,"leaflet-interactive"),this._fireEvent([j],l,"mouseover"),this._hoveredLayer=j)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,l),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(l,d,g){this._map._fireDOMEvent(d,g||d.type,l)},_bringToFront:function(l){var d=l._order;if(d){var g=d.next,j=d.prev;if(g)g.prev=j;else return;j?j.next=g:g&&(this._drawFirst=g),d.prev=this._drawLast,this._drawLast.next=d,d.next=null,this._drawLast=d,this._requestRedraw(l)}},_bringToBack:function(l){var d=l._order;if(d){var g=d.next,j=d.prev;if(j)j.next=g;else return;g?g.prev=j:j&&(this._drawLast=j),d.prev=null,d.next=this._drawFirst,this._drawFirst.prev=d,this._drawFirst=d,this._requestRedraw(l)}}});function DS(l){return et.canvas?new MS(l):null}var qh=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(l){return document.createElement("<lvml:"+l+' class="lvml">')}}catch{}return function(l){return document.createElement("<"+l+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),r6={_initContainer:function(){this._container=Ct("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ka.prototype._update.call(this),this.fire("update"))},_initPath:function(l){var d=l._container=qh("shape");xt(d,"leaflet-vml-shape "+(this.options.className||"")),d.coordsize="1 1",l._path=qh("path"),d.appendChild(l._path),this._updateStyle(l),this._layers[u(l)]=l},_addPath:function(l){var d=l._container;this._container.appendChild(d),l.options.interactive&&l.addInteractiveTarget(d)},_removePath:function(l){var d=l._container;tn(d),l.removeInteractiveTarget(d),delete this._layers[u(l)]},_updateStyle:function(l){var d=l._stroke,g=l._fill,j=l.options,T=l._container;T.stroked=!!j.stroke,T.filled=!!j.fill,j.stroke?(d||(d=l._stroke=qh("stroke")),T.appendChild(d),d.weight=j.weight+"px",d.color=j.color,d.opacity=j.opacity,j.dashArray?d.dashStyle=C(j.dashArray)?j.dashArray.join(" "):j.dashArray.replace(/( *, *)/g," "):d.dashStyle="",d.endcap=j.lineCap.replace("butt","flat"),d.joinstyle=j.lineJoin):d&&(T.removeChild(d),l._stroke=null),j.fill?(g||(g=l._fill=qh("fill")),T.appendChild(g),g.color=j.fillColor||j.color,g.opacity=j.fillOpacity):g&&(T.removeChild(g),l._fill=null)},_updateCircle:function(l){var d=l._point.round(),g=Math.round(l._radius),j=Math.round(l._radiusY||g);this._setPath(l,l._empty()?"M0 0":"AL "+d.x+","+d.y+" "+g+","+j+" 0,"+65535*360)},_setPath:function(l,d){l._path.v=d},_bringToFront:function(l){ba(l._container)},_bringToBack:function(l){bo(l._container)}},sg=et.vml?qh:Ke,Hh=ka.extend({_initContainer:function(){this._container=sg("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=sg("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){tn(this._container),Kt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ka.prototype._update.call(this);var l=this._bounds,d=l.getSize(),g=this._container;(!this._svgSize||!this._svgSize.equals(d))&&(this._svgSize=d,g.setAttribute("width",d.x),g.setAttribute("height",d.y)),dt(g,l.min),g.setAttribute("viewBox",[l.min.x,l.min.y,d.x,d.y].join(" ")),this.fire("update")}},_initPath:function(l){var d=l._path=sg("path");l.options.className&&xt(d,l.options.className),l.options.interactive&&xt(d,"leaflet-interactive"),this._updateStyle(l),this._layers[u(l)]=l},_addPath:function(l){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(l._path),l.addInteractiveTarget(l._path)},_removePath:function(l){tn(l._path),l.removeInteractiveTarget(l._path),delete this._layers[u(l)]},_updatePath:function(l){l._project(),l._update()},_updateStyle:function(l){var d=l._path,g=l.options;d&&(g.stroke?(d.setAttribute("stroke",g.color),d.setAttribute("stroke-opacity",g.opacity),d.setAttribute("stroke-width",g.weight),d.setAttribute("stroke-linecap",g.lineCap),d.setAttribute("stroke-linejoin",g.lineJoin),g.dashArray?d.setAttribute("stroke-dasharray",g.dashArray):d.removeAttribute("stroke-dasharray"),g.dashOffset?d.setAttribute("stroke-dashoffset",g.dashOffset):d.removeAttribute("stroke-dashoffset")):d.setAttribute("stroke","none"),g.fill?(d.setAttribute("fill",g.fillColor||g.color),d.setAttribute("fill-opacity",g.fillOpacity),d.setAttribute("fill-rule",g.fillRule||"evenodd")):d.setAttribute("fill","none"))},_updatePoly:function(l,d){this._setPath(l,ce(l._parts,d))},_updateCircle:function(l){var d=l._point,g=Math.max(Math.round(l._radius),1),j=Math.max(Math.round(l._radiusY),1)||g,T="a"+g+","+j+" 0 1,0 ",z=l._empty()?"M0 0":"M"+(d.x-g)+","+d.y+T+g*2+",0 "+T+-g*2+",0 ";this._setPath(l,z)},_setPath:function(l,d){l._path.setAttribute("d",d)},_bringToFront:function(l){ba(l._path)},_bringToBack:function(l){bo(l._path)}});et.vml&&Hh.include(r6);function OS(l){return et.svg||et.vml?new Hh(l):null}St.include({getRenderer:function(l){var d=l.options.renderer||this._getPaneRenderer(l.options.pane)||this.options.renderer||this._renderer;return d||(d=this._renderer=this._createRenderer()),this.hasLayer(d)||this.addLayer(d),d},_getPaneRenderer:function(l){if(l==="overlayPane"||l===void 0)return!1;var d=this._paneRenderers[l];return d===void 0&&(d=this._createRenderer({pane:l}),this._paneRenderers[l]=d),d},_createRenderer:function(l){return this.options.preferCanvas&&DS(l)||OS(l)}});var LS=bu.extend({initialize:function(l,d){bu.prototype.initialize.call(this,this._boundsToLatLngs(l),d)},setBounds:function(l){return this.setLatLngs(this._boundsToLatLngs(l))},_boundsToLatLngs:function(l){return l=Ze(l),[l.getSouthWest(),l.getNorthWest(),l.getNorthEast(),l.getSouthEast()]}});function s6(l,d){return new LS(l,d)}Hh.create=sg,Hh.pointsToPath=ce,Ta.geometryToLayer=Qp,Ta.coordsToLatLng=y0,Ta.coordsToLatLngs=Xp,Ta.latLngToCoords=_0,Ta.latLngsToCoords=Jp,Ta.getFeature=ju,Ta.asFeature=eg,St.mergeOptions({boxZoom:!0});var VS=ps.extend({initialize:function(l){this._map=l,this._container=l._container,this._pane=l._panes.overlayPane,this._resetStateTimeout=0,l.on("unload",this._destroy,this)},addHooks:function(){at(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Kt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){tn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(l){if(!l.shiftKey||l.which!==1&&l.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ri(),kh(),this._startPoint=this._map.mouseEventToContainerPoint(l),at(document,{contextmenu:ms,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(l){this._moved||(this._moved=!0,this._box=Ct("div","leaflet-zoom-box",this._container),xt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(l);var d=new Q(this._point,this._startPoint),g=d.getSize();dt(this._box,d.min),this._box.style.width=g.x+"px",this._box.style.height=g.y+"px"},_finish:function(){this._moved&&(tn(this._box),mn(this._container,"leaflet-crosshair")),si(),Ph(),Kt(document,{contextmenu:ms,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(l){if(!(l.which!==1&&l.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var d=new ke(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(d).fire("boxzoomend",{boxZoomBounds:d})}},_onKeyDown:function(l){l.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});St.addInitHook("addHandler","boxZoom",VS),St.mergeOptions({doubleClickZoom:!0});var FS=ps.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(l){var d=this._map,g=d.getZoom(),j=d.options.zoomDelta,T=l.originalEvent.shiftKey?g-j:g+j;d.options.doubleClickZoom==="center"?d.setZoom(T):d.setZoomAround(l.containerPoint,T)}});St.addInitHook("addHandler","doubleClickZoom",FS),St.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var zS=ps.extend({addHooks:function(){if(!this._draggable){var l=this._map;this._draggable=new ii(l._mapPane,l._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),l.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),l.on("zoomend",this._onZoomEnd,this),l.whenReady(this._onZoomEnd,this))}xt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){mn(this._map._container,"leaflet-grab"),mn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var l=this._map;if(l._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var d=Ze(this._map.options.maxBounds);this._offsetLimit=fe(this._map.latLngToContainerPoint(d.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(d.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;l.fire("movestart").fire("dragstart"),l.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(l){if(this._map.options.inertia){var d=this._lastTime=+new Date,g=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(g),this._times.push(d),this._prunePositions(d)}this._map.fire("move",l).fire("drag",l)},_prunePositions:function(l){for(;this._positions.length>1&&l-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var l=this._map.getSize().divideBy(2),d=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=d.subtract(l).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(l,d){return l-(l-d)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var l=this._draggable._newPos.subtract(this._draggable._startPos),d=this._offsetLimit;l.x<d.min.x&&(l.x=this._viscousLimit(l.x,d.min.x)),l.y<d.min.y&&(l.y=this._viscousLimit(l.y,d.min.y)),l.x>d.max.x&&(l.x=this._viscousLimit(l.x,d.max.x)),l.y>d.max.y&&(l.y=this._viscousLimit(l.y,d.max.y)),this._draggable._newPos=this._draggable._startPos.add(l)}},_onPreDragWrap:function(){var l=this._worldWidth,d=Math.round(l/2),g=this._initialWorldOffset,j=this._draggable._newPos.x,T=(j-d+g)%l+d-g,z=(j+d+g)%l-d-g,Z=Math.abs(T+g)<Math.abs(z+g)?T:z;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Z},_onDragEnd:function(l){var d=this._map,g=d.options,j=!g.inertia||l.noInertia||this._times.length<2;if(d.fire("dragend",l),j)d.fire("moveend");else{this._prunePositions(+new Date);var T=this._lastPos.subtract(this._positions[0]),z=(this._lastTime-this._times[0])/1e3,Z=g.easeLinearity,ee=T.multiplyBy(Z/z),ae=ee.distanceTo([0,0]),xe=Math.min(g.inertiaMaxSpeed,ae),Fe=ee.multiplyBy(xe/ae),ot=xe/(g.inertiaDeceleration*Z),jt=Fe.multiplyBy(-ot/2).round();!jt.x&&!jt.y?d.fire("moveend"):(jt=d._limitOffset(jt,d.options.maxBounds),V(function(){d.panBy(jt,{duration:ot,easeLinearity:Z,noMoveStart:!0,animate:!0})}))}}});St.addInitHook("addHandler","dragging",zS),St.mergeOptions({keyboard:!0,keyboardPanDelta:80});var US=ps.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(l){this._map=l,this._setPanDelta(l.options.keyboardPanDelta),this._setZoomDelta(l.options.zoomDelta)},addHooks:function(){var l=this._map._container;l.tabIndex<=0&&(l.tabIndex="0"),at(l,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Kt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var l=document.body,d=document.documentElement,g=l.scrollTop||d.scrollTop,j=l.scrollLeft||d.scrollLeft;this._map._container.focus(),window.scrollTo(j,g)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(l){var d=this._panKeys={},g=this.keyCodes,j,T;for(j=0,T=g.left.length;j<T;j++)d[g.left[j]]=[-1*l,0];for(j=0,T=g.right.length;j<T;j++)d[g.right[j]]=[l,0];for(j=0,T=g.down.length;j<T;j++)d[g.down[j]]=[0,l];for(j=0,T=g.up.length;j<T;j++)d[g.up[j]]=[0,-1*l]},_setZoomDelta:function(l){var d=this._zoomKeys={},g=this.keyCodes,j,T;for(j=0,T=g.zoomIn.length;j<T;j++)d[g.zoomIn[j]]=l;for(j=0,T=g.zoomOut.length;j<T;j++)d[g.zoomOut[j]]=-l},_addHooks:function(){at(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Kt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(l){if(!(l.altKey||l.ctrlKey||l.metaKey)){var d=l.keyCode,g=this._map,j;if(d in this._panKeys){if(!g._panAnim||!g._panAnim._inProgress)if(j=this._panKeys[d],l.shiftKey&&(j=H(j).multiplyBy(3)),g.options.maxBounds&&(j=g._limitOffset(H(j),g.options.maxBounds)),g.options.worldCopyJump){var T=g.wrapLatLng(g.unproject(g.project(g.getCenter()).add(j)));g.panTo(T)}else g.panBy(j)}else if(d in this._zoomKeys)g.setZoom(g.getZoom()+(l.shiftKey?3:1)*this._zoomKeys[d]);else if(d===27&&g._popup&&g._popup.options.closeOnEscapeKey)g.closePopup();else return;ms(l)}}});St.addInitHook("addHandler","keyboard",US),St.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var $S=ps.extend({addHooks:function(){at(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Kt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(l){var d=$p(l),g=this._map.options.wheelDebounceTime;this._delta+=d,this._lastMousePos=this._map.mouseEventToContainerPoint(l),this._startTime||(this._startTime=+new Date);var j=Math.max(g-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),j),ms(l)},_performZoom:function(){var l=this._map,d=l.getZoom(),g=this._map.options.zoomSnap||0;l._stop();var j=this._delta/(this._map.options.wheelPxPerZoomLevel*4),T=4*Math.log(2/(1+Math.exp(-Math.abs(j))))/Math.LN2,z=g?Math.ceil(T/g)*g:T,Z=l._limitZoom(d+(this._delta>0?z:-z))-d;this._delta=0,this._startTime=null,Z&&(l.options.scrollWheelZoom==="center"?l.setZoom(d+Z):l.setZoomAround(this._lastMousePos,d+Z))}});St.addInitHook("addHandler","scrollWheelZoom",$S);var i6=600;St.mergeOptions({tapHold:et.touchNative&&et.safari&&et.mobile,tapTolerance:15});var BS=ps.extend({addHooks:function(){at(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Kt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(l){if(clearTimeout(this._holdTimeout),l.touches.length===1){var d=l.touches[0];this._startPos=this._newPos=new U(d.clientX,d.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(at(document,"touchend",xn),at(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",d))},this),i6),at(document,"touchend touchcancel contextmenu",this._cancel,this),at(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function l(){Kt(document,"touchend",xn),Kt(document,"touchend touchcancel",l)},_cancel:function(){clearTimeout(this._holdTimeout),Kt(document,"touchend touchcancel contextmenu",this._cancel,this),Kt(document,"touchmove",this._onMove,this)},_onMove:function(l){var d=l.touches[0];this._newPos=new U(d.clientX,d.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(l,d){var g=new MouseEvent(l,{bubbles:!0,cancelable:!0,view:window,screenX:d.screenX,screenY:d.screenY,clientX:d.clientX,clientY:d.clientY});g._simulated=!0,d.target.dispatchEvent(g)}});St.addInitHook("addHandler","tapHold",BS),St.mergeOptions({touchZoom:et.touch,bounceAtZoomLimits:!0});var WS=ps.extend({addHooks:function(){xt(this._map._container,"leaflet-touch-zoom"),at(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){mn(this._map._container,"leaflet-touch-zoom"),Kt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(l){var d=this._map;if(!(!l.touches||l.touches.length!==2||d._animatingZoom||this._zooming)){var g=d.mouseEventToContainerPoint(l.touches[0]),j=d.mouseEventToContainerPoint(l.touches[1]);this._centerPoint=d.getSize()._divideBy(2),this._startLatLng=d.containerPointToLatLng(this._centerPoint),d.options.touchZoom!=="center"&&(this._pinchStartLatLng=d.containerPointToLatLng(g.add(j)._divideBy(2))),this._startDist=g.distanceTo(j),this._startZoom=d.getZoom(),this._moved=!1,this._zooming=!0,d._stop(),at(document,"touchmove",this._onTouchMove,this),at(document,"touchend touchcancel",this._onTouchEnd,this),xn(l)}},_onTouchMove:function(l){if(!(!l.touches||l.touches.length!==2||!this._zooming)){var d=this._map,g=d.mouseEventToContainerPoint(l.touches[0]),j=d.mouseEventToContainerPoint(l.touches[1]),T=g.distanceTo(j)/this._startDist;if(this._zoom=d.getScaleZoom(T,this._startZoom),!d.options.bounceAtZoomLimits&&(this._zoom<d.getMinZoom()&&T<1||this._zoom>d.getMaxZoom()&&T>1)&&(this._zoom=d._limitZoom(this._zoom)),d.options.touchZoom==="center"){if(this._center=this._startLatLng,T===1)return}else{var z=g._add(j)._divideBy(2)._subtract(this._centerPoint);if(T===1&&z.x===0&&z.y===0)return;this._center=d.unproject(d.project(this._pinchStartLatLng,this._zoom).subtract(z),this._zoom)}this._moved||(d._moveStart(!0,!1),this._moved=!0),k(this._animRequest);var Z=o(d._move,d,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=V(Z,this,!0),xn(l)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,k(this._animRequest),Kt(document,"touchmove",this._onTouchMove,this),Kt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});St.addInitHook("addHandler","touchZoom",WS),St.BoxZoom=VS,St.DoubleClickZoom=FS,St.Drag=zS,St.Keyboard=US,St.ScrollWheelZoom=$S,St.TapHold=BS,St.TouchZoom=WS,n.Bounds=Q,n.Browser=et,n.CRS=de,n.Canvas=MS,n.Circle=x0,n.CircleMarker=Yp,n.Class=q,n.Control=Xr,n.DivIcon=IS,n.DivOverlay=Oi,n.DomEvent=Bp,n.DomUtil=zp,n.Draggable=ii,n.Evented=K,n.FeatureGroup=On,n.GeoJSON=Ta,n.GridLayer=Wh,n.Handler=ps,n.Icon=Di,n.ImageOverlay=tg,n.LatLng=Ye,n.LatLngBounds=ke,n.Layer=Yt,n.LayerGroup=yn,n.LineUtil=$,n.Map=St,n.Marker=Kp,n.Mixin=Kl,n.Path=To,n.Point=U,n.PolyUtil=yu,n.Polygon=bu,n.Polyline=Ca,n.Popup=ng,n.PosAnimation=Lh,n.Projection=Pe,n.Rectangle=LS,n.Renderer=ka,n.SVG=Hh,n.SVGOverlay=PS,n.TileLayer=Nu,n.Tooltip=rg,n.Transformation=ye,n.Util=P,n.VideoOverlay=kS,n.bind=o,n.bounds=fe,n.canvas=DS,n.circle=q5,n.circleMarker=W5,n.control=Mr,n.divIcon=e6,n.extend=i,n.featureGroup=wu,n.geoJSON=TS,n.geoJson=Z5,n.gridLayer=t6,n.icon=$5,n.imageOverlay=K5,n.latLng=se,n.latLngBounds=Ze,n.layerGroup=Co,n.map=fu,n.marker=B5,n.point=H,n.polygon=G5,n.polyline=H5,n.popup=X5,n.rectangle=s6,n.setOptions=N,n.stamp=u,n.svg=OS,n.svgOverlay=Q5,n.tileLayer=AS,n.tooltip=J5,n.transformation=Se,n.version=r,n.videoOverlay=Y5;var a6=window.L;n.noConflict=function(){return window.L=a6,this},window.L=n})})(D1,D1.exports);var o0=D1.exports;const ph=Um(o0);function qL(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function HL(t,e){return e==null?function(r,i){const a=x.useRef();return a.current||(a.current=t(r,i)),a}:function(r,i){const a=x.useRef();a.current||(a.current=t(r,i));const o=x.useRef(r),{instance:c}=a.current;return x.useEffect(function(){o.current!==r&&(e(c,r,o.current),o.current=r)},[c,r,i]),a}}function Jse(t,e){x.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var a;(a=e.layerContainer)==null||a.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function GL(t){return function(n){const r=BL(),i=t(WL(n,r),r);return Hse(r.map,n.attribution),Xse(i.current,n.eventHandlers),Jse(i.current,r),i}}function eie(t,e){const n=HL(t,e),r=GL(n);return Yse(r)}function tie(t,e){const n=HL(t,e),r=GL(n);return Qse(r)}function nie(t,e,n){const{opacity:r,zIndex:i}=e;r!=null&&r!==n.opacity&&t.setOpacity(r),i!=null&&i!==n.zIndex&&t.setZIndex(i)}function rie(){return BL().map}function KN(t){const e=rie();return x.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}function O1(){return O1=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},O1.apply(this,arguments)}function sie({bounds:t,boundsOptions:e,center:n,children:r,className:i,id:a,placeholder:o,style:c,whenReady:u,zoom:h,...f},p){const[v]=x.useState({className:i,id:a,style:c}),[_,b]=x.useState(null);x.useImperativeHandle(p,()=>(_==null?void 0:_.map)??null,[_]);const N=x.useCallback(w=>{if(w!==null&&_===null){const y=new o0.Map(w,f);n!=null&&h!=null?y.setView(n,h):t!=null&&y.fitBounds(t,e),u!=null&&y.whenReady(u),b(Zse(y))}},[]);x.useEffect(()=>()=>{_==null||_.map.remove()},[_]);const S=_?Me.createElement($L,{value:_},r):o??null;return Me.createElement("div",O1({},v,{ref:N}),S)}const YN=x.forwardRef(sie),QN=eie(function({position:e,...n},r){const i=new o0.Marker(e,n);return qL(i,Kse(r,{overlayContainer:i}))},function(e,n,r){n.position!==r.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),XN=tie(function({url:e,...n},r){const i=new o0.TileLayer(e,WL(n,r));return qL(i,r)},function(e,n,r){nie(e,n,r);const{url:i}=n;i!=null&&i!==r.url&&e.setUrl(i)});delete ph.Icon.Default.prototype._getIconUrl;ph.Icon.Default.mergeOptions({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"});const iie=({open:t,onOpenChange:e,listing:n})=>{var V;const{currentUser:r,userProfile:i}=Tn(),{createPaymentRequest:a,loading:o}=i0(),[c,u]=x.useState("method"),[h,f]=x.useState(null),[p,v]=x.useState({}),[_,b]=x.useState({location:"",date:void 0,time:"",notes:""}),[N,S]=x.useState(!1),[w,y]=x.useState(null),C=(k,P)=>{f(k),v(P),u("details")},R=async()=>{if(!(!r||!h))try{const k=_.date&&_.time?new Date(`${sr(_.date,"yyyy-MM-dd")} ${_.time}`):void 0;await a({listingId:n.id,buyerId:r.uid,sellerId:n.sellerId,amount:n.price,currency:n.currency||"EUR",paymentMethod:h,meetingLocation:_.location,meetingDateTime:k,paymentDetails:p,notes:_.notes}),e(!1),M()}catch(k){console.error("Erreur lors de la création de la demande:",k)}},M=()=>{u("method"),f(null),v({}),b({location:"",date:void 0,time:"",notes:""})},B=(k,P)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:P||"EUR"}).format(k),O=k=>({cash:"Espèces",transfer:"Virement bancaire",paypal:"PayPal",lydia:"Lydia"})[k]||k;async function D(k,P){return(await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${k}&lon=${P}`)).json()).display_name||""}function F(){return KN({click:async k=>{y([k.latlng.lat,k.latlng.lng]),S(!0);const P=await D(k.latlng.lat,k.latlng.lng);b(q=>({...q,location:P})),S(!1),me.success("Adresse détectée automatiquement !")}}),w?s.jsx(QN,{position:w}):null}const I=()=>{if(!navigator.geolocation){me.error("La géolocalisation n'est pas supportée par ce navigateur.");return}S(!0),navigator.geolocation.getCurrentPosition(async k=>{const{latitude:P,longitude:q}=k.coords;y([P,q]);const te=await D(P,q);te&&b(re=>({...re,location:te})),S(!1)},()=>{me.error("Impossible d'accéder à la position."),S(!1)})};return s.jsx(ra,{open:t,onOpenChange:e,children:s.jsxs(wi,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(sa,{children:[s.jsxs(bi,{className:"flex items-center gap-2",children:[s.jsx(zn,{className:"w-5 h-5"}),"Demande de paiement"]}),s.jsxs(xc,{children:['Créez une demande de paiement sécurisée pour "',n.title,'"']})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[s.jsxs("div",{className:`flex items-center ${c==="method"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${c==="method"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"1"}),s.jsx("span",{className:"ml-2 text-sm font-medium",children:"Mode de paiement"})]}),s.jsx("div",{className:"w-8 h-px bg-muted-foreground"}),s.jsxs("div",{className:`flex items-center ${c==="details"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${c==="details"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"2"}),s.jsx("span",{className:"ml-2 text-sm font-medium",children:"Détails"})]}),s.jsx("div",{className:"w-8 h-px bg-muted-foreground"}),s.jsxs("div",{className:`flex items-center ${c==="confirmation"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${c==="confirmation"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"3"}),s.jsx("span",{className:"ml-2 text-sm font-medium",children:"Confirmation"})]})]}),s.jsx("div",{className:"p-4 bg-muted/50 rounded-lg",children:s.jsxs("div",{className:"flex items-center gap-4",children:[((V=n.images)==null?void 0:V[0])&&s.jsx("img",{src:n.images[0],alt:n.title,className:"w-16 h-16 object-cover rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold",children:n.title}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Vendeur : ",n.sellerName," • ",n.sellerUniversity]}),s.jsx("p",{className:"text-lg font-bold text-primary",children:B(n.price,n.currency||"EUR")})]})]})}),c==="method"&&s.jsx(zL,{amount:n.price,currency:n.currency||"EUR",onMethodSelect:C,selectedMethod:h}),c==="details"&&h&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(Tt,{className:"w-5 h-5 text-green-600"}),s.jsxs("span",{className:"font-medium",children:["Mode de paiement sélectionné : ",O(h)]})]}),h==="cash"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[s.jsx($r,{className:"w-5 h-5"}),"Détails de la rencontre"]}),s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:"meeting-location",children:"Lieu de rencontre *"}),s.jsxs("div",{className:"flex gap-2 mt-1",children:[s.jsx(qe,{id:"meeting-location",placeholder:"Ex: Bibliothèque universitaire, Hall principal...",value:_.location,onChange:k=>b(P=>({...P,location:k.target.value})),className:"flex-1"}),s.jsx(Y,{type:"button",variant:"outline",onClick:I,disabled:N,title:"Détecter ma position",children:N?s.jsx("span",{className:"animate-spin",children:"📍"}):s.jsx("span",{children:"📍"})})]})]}),s.jsx("div",{className:"mt-3",children:s.jsxs(YN,{center:w||[48.8584,2.2945],zoom:15,style:{height:200,width:"100%"},children:[s.jsx(XN,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"© OpenStreetMap contributors"}),s.jsx(F,{})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Ee,{children:"Date de rencontre"}),s.jsxs(mse,{children:[s.jsx(pse,{asChild:!0,children:s.jsxs(Y,{variant:"outline",className:"w-full justify-start text-left font-normal mt-1",children:[s.jsx(mi,{className:"mr-2 h-4 w-4"}),_.date?sr(_.date,"PPP",{locale:Tr}):s.jsx("span",{children:"Choisir une date"})]})}),s.jsx(SL,{className:"w-auto p-0",children:s.jsx(fL,{mode:"single",selected:_.date,onSelect:k=>b(P=>({...P,date:k})),disabled:k=>k<new Date,initialFocus:!0})})]})]}),s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:"meeting-time",children:"Heure de rencontre"}),s.jsx(qe,{id:"meeting-time",type:"time",value:_.time,onChange:k=>b(P=>({...P,time:k.target.value})),className:"mt-1"})]})]})]}),s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:"payment-notes",children:"Notes additionnelles (optionnel)"}),s.jsx(Es,{id:"payment-notes",placeholder:"Informations complémentaires pour le vendeur...",value:_.notes,onChange:k=>b(P=>({...P,notes:k.target.value})),rows:3,className:"mt-1"})]}),s.jsxs(Ut,{className:"border-blue-200 bg-blue-50",children:[s.jsx(Ft,{className:"h-4 w-4 text-blue-600"}),s.jsxs($t,{className:"text-blue-800",children:[s.jsx("strong",{children:"Sécurité :"})," Un code de sécurité unique sera généré pour cette transaction. Partagez-le uniquement avec le vendeur lors de la finalisation du paiement."]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(Y,{variant:"outline",onClick:()=>u("method"),className:"flex-1",children:"Retour"}),s.jsx(Y,{onClick:()=>u("confirmation"),className:"flex-1",disabled:h==="cash"&&!_.location,children:"Continuer"})]})]}),c==="confirmation"&&h&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Récapitulatif de la demande"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Mode de paiement :"}),s.jsx("p",{className:"font-medium",children:O(h)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Montant :"}),s.jsx("p",{className:"font-medium",children:B(n.price,n.currency||"EUR")})]}),h==="cash"&&_.location&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Lieu de rencontre :"}),s.jsx("p",{className:"font-medium",children:_.location})]}),_.date&&_.time&&s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Date et heure :"}),s.jsxs("p",{className:"font-medium",children:[sr(_.date,"PPP",{locale:Tr})," à ",_.time]})]})]})]}),_.notes&&s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground text-sm",children:"Notes :"}),s.jsx("p",{className:"text-sm bg-muted/50 p-2 rounded",children:_.notes})]})]}),s.jsxs(Ut,{children:[s.jsx(xl,{className:"h-4 w-4"}),s.jsx($t,{children:"En créant cette demande, vous vous engagez à effectuer le paiement selon les modalités convenues. Le vendeur recevra une notification et pourra accepter ou refuser votre demande."})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(Y,{variant:"outline",onClick:()=>u("details"),className:"flex-1",children:"Retour"}),s.jsx(Y,{onClick:R,className:"flex-1",disabled:o,children:o?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Création..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Tt,{className:"w-4 h-4 mr-2"}),"Créer la demande"]})})]})]})]})]})})},aie=({listing:t,className:e})=>{const{currentUser:n,userProfile:r}=Tn(),{createConversation:i,setCurrentConversation:a,conversations:o}=Xy(),c=ar(),[u,h]=x.useState(!1),[f,p]=x.useState(!1),[v,_]=x.useState(""),[b,N]=x.useState(""),[S,w]=x.useState(!1);if((n==null?void 0:n.uid)===t.sellerId)return null;const y=o.find(O=>O.listingId===t.id&&O.participants.includes((n==null?void 0:n.uid)||"")&&O.participants.includes(t.sellerId)),C=()=>{if(!n){c("/auth");return}if(y){a(y),c("/messages");return}const O=`Bonjour ${t.sellerName},

Je suis intéressé(e) par votre annonce "${t.title}".

Pourriez-vous me donner plus d'informations ? Je suis disponible pour un rendez-vous si nécessaire.

Cordialement,
${(r==null?void 0:r.displayName)||"Un étudiant intéressé"}`;_(O),N((r==null?void 0:r.email)||""),h(!0)},R=()=>{if(!n){c("/auth");return}p(!0)},M=async()=>{var O;if(!v.trim()||!b.trim()||!n||!r){me.error("Veuillez remplir tous les champs");return}w(!0);try{const D=await i(t.id,t.title,t.price,(O=t.images)==null?void 0:O[0],n.uid,t.sellerId,{displayName:r.displayName,photoURL:r.photoURL,university:r.university,isVerified:r.isVerified,email:r.email},{sellerName:t.sellerName,sellerAvatar:t.sellerAvatar,sellerUniversity:t.sellerUniversity,sellerVerified:t.sellerVerified,email:t.sellerEmail||null},v.trim());h(!1),me.success(s.jsxs("div",{className:"flex items-center justify-between w-full",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Message envoyé !"}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["📧 ",t.sellerName," recevra une notification email"]})]}),s.jsxs(Y,{size:"sm",variant:"ghost",onClick:()=>{me.dismiss(),c("/messages")},className:"ml-2 text-xs",children:["Voir la conversation",s.jsx(xm,{className:"w-3 h-3 ml-1"})]})]}),{duration:6e3,style:{minWidth:"350px"}}),setTimeout(()=>{c("/messages")},2e3)}catch(D){console.error("Erreur lors de l'envoi du message:",D),me.error("Erreur lors de l'envoi du message")}finally{w(!1)}},B=(O,D)=>{if(t.transactionType==="donation")return"Gratuit";if(t.transactionType==="exchange")return"Échange";const F=D||"EUR";try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:F}).format(O)}catch{return`${O} €`}};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Y,{onClick:C,className:`flex-1 bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 ${e}`,children:[s.jsx(fn,{className:"w-4 h-4 mr-2"}),y?"Continuer la conversation":"Contacter le vendeur"]}),t.transactionType==="sale"&&t.price>0&&s.jsxs(Y,{onClick:R,variant:"outline",className:"flex items-center gap-2",children:[s.jsx(zn,{className:"w-4 h-4"}),"Payer"]})]}),s.jsx(ra,{open:u,onOpenChange:h,children:s.jsxs(wi,{className:"max-w-md",children:[s.jsx(sa,{children:s.jsxs(bi,{className:"flex items-center gap-2",children:[s.jsx(fn,{className:"w-5 h-5"}),"Contacter le vendeur"]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsxs(ao,{className:"w-8 h-8",children:[s.jsx(oo,{src:t.sellerAvatar||void 0}),s.jsx(lo,{children:t.sellerName[0]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:t.sellerName}),s.jsx("p",{className:"text-xs text-muted-foreground",children:t.sellerUniversity})]})]}),s.jsx("p",{className:"text-sm font-medium",children:t.title}),s.jsx("p",{className:"text-sm text-primary font-semibold",children:B(t.price,t.currency)})]}),s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:"contact-email",children:"Votre email"}),s.jsx(qe,{id:"contact-email",type:"email",value:b,onChange:O=>N(O.target.value),placeholder:"votre.email@universite.fr",className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:"contact-message",children:"Votre message"}),s.jsx(Es,{id:"contact-message",value:v,onChange:O=>_(O.target.value),placeholder:"Décrivez votre intérêt pour cette annonce...",rows:6,className:"mt-1"})]}),s.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(xl,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsx("p",{className:"font-medium mb-1",children:"📧 Notification automatique"}),s.jsxs("p",{children:["Votre message sera envoyé via la messagerie StudyMarket ET ",t.sellerName," recevra une notification email pour répondre rapidement."]})]})]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Y,{variant:"outline",onClick:()=>h(!1),className:"flex-1",children:"Annuler"}),s.jsx(Y,{onClick:M,disabled:S||!v.trim()||!b.trim(),className:"flex-1",children:S?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Envoi..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Od,{className:"w-4 h-4 mr-2"}),"Envoyer + Notifier"]})})]})]})]})}),s.jsx(iie,{open:f,onOpenChange:p,listing:t})]})},oie=()=>{var de;const{id:t}=qb(),e=ar(),{currentUser:n,userProfile:r}=Tn(),{currentListing:i,loading:a,fetchListingById:o}=wp(),{fetchUserFavorites:c}=MD(),[u,h]=x.useState(0),[f,p]=x.useState([]),[v,_]=x.useState(!0),[b,N]=x.useState(null),[S,w]=x.useState(0),[y,C]=x.useState(""),[R,M]=x.useState(!1),[B,O]=x.useState({}),[D,F]=x.useState(null),[I,V]=x.useState("");if(x.useEffect(()=>{t&&o(t)},[t,o]),x.useEffect(()=>{n&&c(n.uid)},[n,c]),x.useEffect(()=>{async function ne(){if(i!=null&&i.id){_(!0),N(null);try{const ve=cn(Vt(Oe,"reviews"),In("listingId","==",i.id)),ye=(await An(ve)).docs.map(Ae=>{const Ke=Ae.data();return{id:Ae.id,...Ke,replies:Array.isArray(Ke.replies)?Ke.replies.map(ce=>({...ce,createdAt:ce.createdAt instanceof Date?ce.createdAt:ce.createdAt&&typeof ce.createdAt.toDate=="function"?ce.createdAt.toDate():new Date})):[],likes:Array.isArray(Ke.likes)?Ke.likes:[],dislikes:Array.isArray(Ke.dislikes)?Ke.dislikes:[]}});p(ye);const Se=Array.from(new Set(ye.map(Ae=>Ae.reviewerId))),ge={...B};await Promise.all(Se.map(async Ae=>{if(!ge[Ae]){const Ke=await cs(pt(Oe,"users",Ae));if(Ke.exists()){const ce=Ke.data();ge[Ae]={displayName:ce.displayName||"Utilisateur",photoURL:ce.photoURL||void 0}}else console.warn("Profil utilisateur non trouvé pour l'ID",Ae),ge[Ae]={displayName:""}}})),O(ge)}catch{N("Erreur lors du chargement des avis")}finally{_(!1)}}}ne()},[i==null?void 0:i.id]),a)return s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"animate-pulse space-y-6",children:[s.jsx("div",{className:"h-8 bg-muted rounded w-1/4"}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsx("div",{className:"aspect-square bg-muted rounded-lg"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"h-8 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-6 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-20 bg-muted rounded"})]})]})]})});if(!i)return s.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:s.jsxs("div",{className:"max-w-md mx-auto",children:[s.jsx(Rn,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),s.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Annonce introuvable"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Cette annonce n'existe pas ou a été supprimée."}),s.jsx(Y,{onClick:()=>e("/listings"),children:"Retour aux annonces"})]})});const k=i,P=(n==null?void 0:n.uid)===k.sellerId,q=(ne,ve)=>{if(k.transactionType==="donation")return"Gratuit";if(k.transactionType==="exchange")return"Échange";const _e=ve||"EUR";try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:_e}).format(ne)}catch{return`${ne} €`}},te=ne=>{switch(ne){case"new":return"Neuf";case"like-new":return"Comme neuf";case"good":return"Bon état";case"fair":return"État correct";case"poor":return"Mauvais état";default:return ne}},re=ne=>{switch(ne){case"new":return"bg-green-100 text-green-800 border-green-200";case"like-new":return"bg-blue-100 text-blue-800 border-blue-200";case"good":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"fair":return"bg-orange-100 text-orange-800 border-orange-200";case"poor":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},K=()=>{switch(k.transactionType){case"donation":return s.jsx(Dd,{className:"w-4 h-4"});case"exchange":return s.jsx(no,{className:"w-4 h-4"});case"service":return s.jsx(ih,{className:"w-4 h-4"});default:return s.jsx(mx,{className:"w-4 h-4"})}},U=()=>{switch(k.transactionType){case"donation":return"Don gratuit";case"exchange":return"Troc";case"service":return"Service";default:return"Vente"}},W=()=>{k.images&&k.images.length>1&&h(ne=>ne===k.images.length-1?0:ne+1)},H=()=>{k.images&&k.images.length>1&&h(ne=>ne===0?k.images.length-1:ne-1)},Q=n&&!f.some(ne=>ne.reviewerId===n.uid);async function fe(ne){if(ne.preventDefault(),!(!n||!S||!y.trim())){M(!0);try{await vl(Vt(Oe,"reviews"),{reviewerId:n.uid,revieweeId:k.sellerId,listingId:k.id,rating:S,comment:y.trim(),reviewType:"buyer",isPublic:!0,helpfulCount:0,createdAt:Kn.now()}),w(0),C("");const ve=cn(Vt(Oe,"reviews"),In("listingId","==",k.id)),ye=(await An(ve)).docs.map(Se=>{const ge=Se.data();return{id:Se.id,...ge,replies:Array.isArray(ge.replies)?ge.replies.map(Ae=>({...Ae,createdAt:Ae.createdAt instanceof Date?Ae.createdAt:Ae.createdAt&&typeof Ae.createdAt.toDate=="function"?Ae.createdAt.toDate():new Date})):[],likes:Array.isArray(ge.likes)?ge.likes:[],dislikes:Array.isArray(ge.dislikes)?ge.dislikes:[]}});p(ye)}catch{N("Erreur lors de l'ajout de l'avis")}finally{M(!1)}}}const ke=async ne=>{if(n)try{const ve=pt(Oe,"reviews",ne),_e=f.find(ge=>ge.id===ne);if(!_e)return;const ye=_e.likes||[],Se=_e.dislikes||[];ye.includes(n.uid)?await nn(ve,{likes:ye.filter(ge=>ge!==n.uid)}):await nn(ve,{likes:[...ye,n.uid],dislikes:Se.filter(ge=>ge!==n.uid)}),p(ge=>ge.map(Ae=>{if(Ae.id===ne){const Ke=Ae.likes||[],ce=Ae.dislikes||[];return Ke.includes(n.uid)?{...Ae,likes:Ke.filter(Ve=>Ve!==n.uid)}:{...Ae,likes:[...Ke,n.uid],dislikes:ce.filter(Ve=>Ve!==n.uid)}}return Ae}))}catch(ve){console.error("Error liking review:",ve),Nn.error("Erreur lors du like")}},Ze=async ne=>{if(n)try{const ve=pt(Oe,"reviews",ne),_e=f.find(ge=>ge.id===ne);if(!_e)return;const ye=_e.likes||[],Se=_e.dislikes||[];Se.includes(n.uid)?await nn(ve,{dislikes:Se.filter(ge=>ge!==n.uid)}):await nn(ve,{dislikes:[...Se,n.uid],likes:ye.filter(ge=>ge!==n.uid)}),p(ge=>ge.map(Ae=>{if(Ae.id===ne){const Ke=Ae.likes||[],ce=Ae.dislikes||[];return ce.includes(n.uid)?{...Ae,dislikes:ce.filter(Ve=>Ve!==n.uid)}:{...Ae,dislikes:[...ce,n.uid],likes:Ke.filter(Ve=>Ve!==n.uid)}}return Ae}))}catch(ve){console.error("Error disliking review:",ve),Nn.error("Erreur lors du dislike")}},Ye=async ne=>{if(!(!n||!I.trim()))try{const ve=pt(Oe,"reviews",ne),_e=f.find(Se=>Se.id===ne);if(!_e)return;const ye={userId:n.uid,comment:I.trim(),createdAt:new Date};await nn(ve,{replies:[..._e.replies||[],ye]}),p(Se=>Se.map(ge=>ge.id===ne?{...ge,replies:[...ge.replies||[],ye]}:ge)),V(""),F(null),Nn.success("Réponse envoyée")}catch(ve){console.error("Error replying to review:",ve),Nn.error("Erreur lors de l'envoi de la réponse")}},se=n&&i&&n.uid===i.sellerId;return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"border-b border-border bg-muted/30",children:s.jsx("div",{className:"container mx-auto px-4 py-4",children:s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(De,{to:"/",className:"hover:text-foreground transition-colors",children:"Accueil"}),s.jsx("span",{children:"/"}),s.jsx(De,{to:"/listings",className:"hover:text-foreground transition-colors",children:"Annonces"}),s.jsx("span",{children:"/"}),s.jsx("span",{className:"text-foreground",children:k.title})]})})}),s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs(Y,{variant:"ghost",onClick:()=>e(-1),className:"mb-6 -ml-4",children:[s.jsx(mc,{className:"w-4 h-4 mr-2"}),"Retour"]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"relative aspect-[4/3] rounded-lg overflow-hidden bg-muted",children:k.images&&k.images.length>0?s.jsxs(s.Fragment,{children:[s.jsx("img",{src:k.images[u],alt:k.title,className:"w-full h-full object-cover"}),k.images.length>1&&s.jsxs(s.Fragment,{children:[s.jsx("div",{onClick:H,className:"absolute left-4 top-1/2 transform -translate-y-1/2 cursor-pointer text-white hover:text-primary transition-colors bg-black/50 rounded-full p-2","aria-label":"Image précédente",children:s.jsx(cG,{className:"w-6 h-6"})}),s.jsx("div",{onClick:W,className:"absolute right-4 top-1/2 transform -translate-y-1/2 cursor-pointer text-white hover:text-primary transition-colors bg-black/50 rounded-full p-2","aria-label":"Image suivante",children:s.jsx(Gi,{className:"w-6 h-6"})}),s.jsxs("div",{className:"absolute bottom-4 right-4 bg-black/70 text-white px-3 py-1 rounded-full text-sm",children:[u+1," / ",k.images.length]})]}),s.jsxs(ra,{children:[s.jsx(pd,{asChild:!0,children:s.jsx("div",{className:"absolute top-4 right-4 cursor-pointer text-white hover:text-primary transition-colors bg-black/50 rounded-full p-2","aria-label":"Agrandir l'image",children:s.jsx(pc,{className:"w-5 h-5"})})}),s.jsxs(wi,{className:"max-w-4xl",children:[s.jsx(bi,{children:"Image en plein écran de l'annonce"}),s.jsx("img",{src:k.images[u],alt:k.title,className:"w-full h-auto max-h-[80vh] object-contain"})]})]})]}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-muted-foreground",children:[s.jsx(pc,{className:"w-16 h-16 mx-auto mb-4"}),s.jsx("p",{children:"Aucune image disponible"})]})})}),k.images&&k.images.length>1&&s.jsx("div",{className:"grid grid-cols-6 gap-2",children:k.images.map((ne,ve)=>s.jsx("button",{onClick:()=>h(ve),className:`aspect-square rounded-lg overflow-hidden border-2 transition-all ${ve===u?"border-primary":"border-transparent hover:border-muted-foreground"}`,children:s.jsx("img",{src:ne,alt:`${k.title} ${ve+1}`,className:"w-full h-full object-cover"})},ve))})]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsx(le,{children:s.jsx(ue,{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(tt,{className:"bg-primary/10 text-primary border-primary/20",children:[K(),s.jsx("span",{className:"ml-1",children:U()})]}),k.sellerVerified&&s.jsxs(tt,{className:"bg-green-100 text-green-800 border-green-200",children:[s.jsx(Ft,{className:"w-3 h-3 mr-1"}),"Vérifié"]})]}),s.jsxs("div",{className:"text-3xl font-bold text-primary",children:[q(k.price,k.currency),k.transactionType==="service"&&s.jsx("span",{className:"text-lg text-muted-foreground",children:"/h"})]}),k.transactionType==="exchange"&&k.exchangeFor&&s.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 text-purple-800",children:[s.jsx(no,{className:"w-4 h-4"}),s.jsx("span",{className:"font-medium",children:"Recherche en échange :"})]}),s.jsx("p",{className:"text-purple-700 mt-1",children:k.exchangeFor})]}),k.aiPriceEstimate&&k.transactionType==="sale"&&s.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 text-green-800",children:[s.jsx(dp,{className:"w-4 h-4"}),s.jsx("span",{className:"font-medium",children:"Prix estimé par IA :"})]}),s.jsxs("p",{className:"text-green-700 text-sm",children:[k.aiPriceEstimate.min,"€ - ",k.aiPriceEstimate.max,"€",s.jsxs("span",{className:"ml-2 text-xs",children:["(Confiance: ",Math.round(k.aiPriceEstimate.confidence*100),"%)"]})]})]}),s.jsx("div",{className:"space-y-3",children:P?s.jsxs("div",{className:"space-y-2",children:[s.jsx(De,{to:`/edit-listing/${k.id}`,children:s.jsxs(Y,{variant:"outline",className:"w-full",children:[s.jsx(Gr,{className:"w-4 h-4 mr-2"}),"Modifier l'annonce"]})}),s.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"C'est votre annonce"})]}):s.jsxs(s.Fragment,{children:[s.jsx(aie,{listing:k,className:"w-full"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(DD,{listing:k,size:"lg",className:"w-12 h-12"}),s.jsx(OD,{listing:k,size:"lg",className:"w-12 h-12"})]}),s.jsx("div",{className:"cursor-pointer text-muted-foreground hover:text-destructive transition-colors","aria-label":"Signaler",children:s.jsx(cc,{className:"w-5 h-5"})})]})]})})]})})}),s.jsxs(le,{children:[s.jsx(We,{children:s.jsx(He,{className:"text-lg",children:"Vendeur"})}),s.jsx(ue,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(ao,{className:"w-12 h-12",children:[s.jsx(oo,{src:k.sellerAvatar||void 0}),s.jsx(lo,{children:(de=k.sellerName[0])==null?void 0:de.toUpperCase()})]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h3",{className:"font-semibold",children:k.sellerName}),k.sellerVerified&&s.jsx(Ft,{className:"w-4 h-4 text-green-600"})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:k.sellerUniversity})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-semibold",children:"4.8"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Note"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-semibold",children:"23"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Ventes"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-semibold",children:"98%"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Confiance"})]})]})]})})]}),k.environmentalImpact&&s.jsxs(le,{children:[s.jsx(We,{children:s.jsxs(He,{className:"text-lg flex items-center gap-2",children:[s.jsx(_i,{className:"w-5 h-5 text-green-600"}),"Impact écologique"]})}),s.jsx(ue,{children:s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-green-600 mb-1",children:["-",k.environmentalImpact.co2Saved," kg CO₂"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"économisés en achetant d'occasion"})]})})]})]})]}),s.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs(le,{children:[s.jsx(We,{children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-2xl font-bold mb-2",children:k.title}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Md,{className:"w-4 h-4"}),s.jsxs("span",{children:[k.views," vues"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx($n,{className:"w-4 h-4"}),s.jsx("span",{children:fh(k.createdAt,{addSuffix:!0,locale:Tr})})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx($r,{className:"w-4 h-4"}),s.jsx("span",{children:k.location.city})]})]})]}),s.jsx(tt,{className:re(k.condition),children:te(k.condition)})]})}),s.jsx(ue,{children:s.jsx("div",{className:"prose prose-sm max-w-none",children:s.jsx("p",{className:"whitespace-pre-wrap",children:k.description})})})]}),k.tags&&k.tags.length>0&&s.jsxs(le,{children:[s.jsx(We,{children:s.jsx(He,{className:"text-lg",children:"Tags"})}),s.jsx(ue,{children:s.jsx("div",{className:"flex flex-wrap gap-2",children:k.tags.map((ne,ve)=>s.jsx(tt,{variant:"secondary",children:ne},ve))})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(le,{children:[s.jsx(We,{children:s.jsxs(He,{className:"text-lg flex items-center gap-2",children:[s.jsx($r,{className:"w-5 h-5"}),"Localisation"]})}),s.jsxs(ue,{className:"space-y-3",children:[k.meetingLocation&&s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:k.meetingLocation}),k.coordinates&&s.jsx("a",{href:`https://www.openstreetmap.org/?mlat=${k.coordinates[0]}&mlon=${k.coordinates[1]}&zoom=17`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 text-sm hover:underline",children:"Voir sur la carte"})]}),!k.meetingLocation&&s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:k.location.city}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[k.location.state,", ",k.location.country]})]}),k.location.campus&&s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium",children:"Campus"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:k.tags&&k.tags.length>0?k.tags[0]:k.meetingLocation?k.meetingLocation:`${k.location.city}, ${k.location.state}, ${k.location.country}`})]}),k.location.university&&s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium",children:"Université"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:k.location.university})]})]})]}),s.jsxs(le,{children:[s.jsx(We,{children:s.jsxs(He,{className:"text-lg flex items-center gap-2",children:[s.jsx(Ft,{className:"w-5 h-5"}),"Conseils de sécurité"]})}),s.jsx(ue,{children:s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Tt,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:"Rencontrez-vous dans un lieu public"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Tt,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:"Vérifiez l'identité de l'autre personne"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Tt,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:"Testez l'objet avant la transaction"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(xl,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:"Utilisez la messagerie StudyMarket"})]})]})})]})]})]})]}),s.jsx("div",{className:"mt-12",children:s.jsxs(le,{children:[s.jsx(We,{children:s.jsxs(He,{className:"text-lg flex items-center gap-2",children:[s.jsx(pi,{className:"w-5 h-5 text-yellow-400"}),"Avis sur cette annonce"]})}),s.jsxs(ue,{className:"space-y-6",children:[v?s.jsx("div",{children:"Chargement des avis..."}):b?s.jsx("div",{className:"text-red-500",children:b}):s.jsxs(s.Fragment,{children:[f.length===0&&s.jsx("div",{className:"text-muted-foreground",children:"Aucun avis pour cette annonce."}),f.map(ne=>{var ve,_e,ye,Se,ge,Ae;return s.jsxs("div",{className:"border-b pb-4 last:border-b-0 last:pb-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs("span",{className:"font-medium flex items-center gap-2",children:[((ve=B[ne.reviewerId])==null?void 0:ve.photoURL)&&s.jsx("img",{src:B[ne.reviewerId].photoURL,alt:"avatar",className:"w-7 h-7 rounded-full object-cover"}),(_e=B[ne.reviewerId])!=null&&_e.displayName?B[ne.reviewerId].displayName:ne.reviewerId===(n==null?void 0:n.uid)?(r==null?void 0:r.displayName)||(n==null?void 0:n.displayName)||"Vous":s.jsx("span",{className:"inline-block bg-gray-200 text-gray-600 px-2 py-0.5 rounded text-xs",children:"Profil supprimé"})]}),s.jsx("span",{className:"flex gap-0.5",children:Array.from({length:5}).map((Ke,ce)=>s.jsx(pi,{className:`w-4 h-4 ${ce<ne.rating?"text-yellow-400":"text-gray-300"}`,fill:ce<ne.rating?"#facc15":"none"},ce))}),s.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:ne.createdAt&&typeof ne.createdAt=="object"&&typeof ne.createdAt.toDate=="function"?ne.createdAt.toDate().toLocaleDateString():ne.createdAt instanceof Date?ne.createdAt.toLocaleDateString():""})]}),s.jsx("div",{className:"text-sm text-gray-700 text-left",children:ne.comment}),s.jsxs("div",{className:"mt-3 flex items-center gap-4",children:[s.jsxs(Y,{variant:"ghost",size:"sm",className:`flex items-center gap-1 ${(ye=ne.likes)!=null&&ye.includes((n==null?void 0:n.uid)||"")?"text-primary":""}`,onClick:()=>ke(ne.id),children:[s.jsx(A4,{className:"w-4 h-4"}),s.jsx("span",{children:((Se=ne.likes)==null?void 0:Se.length)||0})]}),s.jsxs(Y,{variant:"ghost",size:"sm",className:`flex items-center gap-1 ${(ge=ne.dislikes)!=null&&ge.includes((n==null?void 0:n.uid)||"")?"text-destructive":""}`,onClick:()=>Ze(ne.id),children:[s.jsx(I4,{className:"w-4 h-4"}),s.jsx("span",{children:((Ae=ne.dislikes)==null?void 0:Ae.length)||0})]}),s.jsxs(Y,{variant:"ghost",size:"sm",className:"flex items-center gap-1",onClick:()=>F(D===ne.id?null:ne.id),children:[s.jsx(fn,{className:"w-4 h-4"}),s.jsx("span",{children:"Répondre"})]})]}),D===ne.id&&s.jsxs("div",{className:"mt-3 space-y-2",children:[s.jsx(Es,{placeholder:"Votre réponse...",value:I,onChange:Ke=>V(Ke.target.value),className:"min-h-[80px]"}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(Y,{variant:"outline",size:"sm",onClick:()=>{F(null),V("")},children:"Annuler"}),s.jsx(Y,{size:"sm",onClick:()=>Ye(ne.id),disabled:!I.trim(),children:"Envoyer"})]})]}),ne.replies&&ne.replies.length>0&&s.jsx("div",{className:"mt-4 space-y-3 pl-4 border-l-2 border-muted",children:ne.replies.map((Ke,ce)=>{var Ve;return s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"font-medium",children:se&&Ke.userId===(n==null?void 0:n.uid)?"Vous":((Ve=B[Ke.userId])==null?void 0:Ve.displayName)||"Utilisateur"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:Ke.createdAt instanceof Date?Ke.createdAt.toLocaleDateString():""})]}),s.jsx("p",{className:"text-muted-foreground text-left",children:Ke.comment})]},ce)})})]},ne.id)})]}),Q&&s.jsxs("form",{onSubmit:fe,className:"pt-6 border-t mt-6 space-y-3",children:[s.jsx("div",{className:"font-medium",children:"Laisser un avis"}),s.jsx("div",{className:"flex items-center gap-2",children:Array.from({length:5}).map((ne,ve)=>s.jsx("button",{type:"button",onClick:()=>w(ve+1),className:`w-7 h-7 bg-transparent p-0 ${ve<S?"text-yellow-400":"text-gray-300"}`,style:{border:"none",outline:"none"},children:s.jsx(pi,{fill:ve<S?"#facc15":"none"})},ve))}),s.jsx("textarea",{className:"w-full border rounded p-2",rows:3,placeholder:"Votre avis...",value:y,onChange:ne=>C(ne.target.value),required:!0}),s.jsx(Y,{type:"submit",disabled:R||!S||!y.trim(),children:R?"Envoi...":"Envoyer mon avis"})]})]})]})})]})};var Cp=t=>t.type==="checkbox",Xu=t=>t instanceof Date,zr=t=>t==null;const ZL=t=>typeof t=="object";var Yn=t=>!zr(t)&&!Array.isArray(t)&&ZL(t)&&!Xu(t),lie=t=>Yn(t)&&t.target?Cp(t.target)?t.target.checked:t.target.value:t,cie=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,uie=(t,e)=>t.has(cie(e)),die=t=>{const e=t.constructor&&t.constructor.prototype;return Yn(e)&&e.hasOwnProperty("isPrototypeOf")},JN=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Us(t){let e;const n=Array.isArray(t);if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(JN&&(t instanceof Blob||t instanceof FileList))&&(n||Yn(t)))if(e=n?[]:{},!n&&!die(t))e=t;else for(const r in t)t.hasOwnProperty(r)&&(e[r]=Us(t[r]));else return t;return e}var l0=t=>Array.isArray(t)?t.filter(Boolean):[],Ln=t=>t===void 0,Ue=(t,e,n)=>{if(!e||!Yn(t))return n;const r=l0(e.split(/[,[\].]+?/)).reduce((i,a)=>zr(i)?i:i[a],t);return Ln(r)||r===t?Ln(t[e])?n:t[e]:r},zi=t=>typeof t=="boolean",eS=t=>/^\w*$/.test(t),KL=t=>l0(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Qt=(t,e,n)=>{let r=-1;const i=eS(e)?[e]:KL(e),a=i.length,o=a-1;for(;++r<a;){const c=i[r];let u=n;if(r!==o){const h=t[c];u=Yn(h)||Array.isArray(h)?h:isNaN(+i[r+1])?{}:[]}if(c==="__proto__")return;t[c]=u,t=t[c]}return t};const VT={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},fi={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ra={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};Me.createContext(null);var hie=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const a in t)Object.defineProperty(i,a,{get:()=>{const o=a;return e._proxyFormState[o]!==fi.all&&(e._proxyFormState[o]=!r||fi.all),t[o]}});return i},es=t=>Yn(t)&&!Object.keys(t).length,fie=(t,e,n,r)=>{n(t);const{name:i,...a}=t;return es(a)||Object.keys(a).length>=Object.keys(e).length||Object.keys(a).find(o=>e[o]===fi.all)},yv=t=>Array.isArray(t)?t:[t];function mie(t){const e=Me.useRef(t);e.current=t,Me.useEffect(()=>{const n=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{n&&n.unsubscribe()}},[t.disabled])}var Ki=t=>typeof t=="string",pie=(t,e,n,r,i)=>Ki(t)?(r&&e.watch.add(t),Ue(n,t,i)):Array.isArray(t)?t.map(a=>(r&&e.watch.add(a),Ue(n,a))):(r&&(e.watchAll=!0),n),YL=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},FT=t=>({isOnSubmit:!t||t===fi.onSubmit,isOnBlur:t===fi.onBlur,isOnChange:t===fi.onChange,isOnAll:t===fi.all,isOnTouch:t===fi.onTouched}),zT=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const zf=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const a=Ue(t,i);if(a){const{_f:o,...c}=a;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(zf(c,e))break}else if(Yn(c)&&zf(c,e))break}}};var gie=(t,e,n)=>{const r=yv(Ue(t,n));return Qt(r,"root",e[n]),Qt(t,n,r),t},tS=t=>t.type==="file",Ba=t=>typeof t=="function",kx=t=>{if(!JN)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},_v=t=>Ki(t),nS=t=>t.type==="radio",Px=t=>t instanceof RegExp;const UT={value:!1,isValid:!1},$T={value:!0,isValid:!0};var QL=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Ln(t[0].attributes.value)?Ln(t[0].value)||t[0].value===""?$T:{value:t[0].value,isValid:!0}:$T:UT}return UT};const BT={isValid:!1,value:null};var XL=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,BT):BT;function WT(t,e,n="validate"){if(_v(t)||Array.isArray(t)&&t.every(_v)||zi(t)&&!t)return{type:n,message:_v(t)?t:"",ref:e}}var Au=t=>Yn(t)&&!Px(t)?t:{value:t,message:""},qT=async(t,e,n,r,i)=>{const{ref:a,refs:o,required:c,maxLength:u,minLength:h,min:f,max:p,pattern:v,validate:_,name:b,valueAsNumber:N,mount:S,disabled:w}=t._f,y=Ue(e,b);if(!S||w)return{};const C=o?o[0]:a,R=k=>{r&&C.reportValidity&&(C.setCustomValidity(zi(k)?"":k||""),C.reportValidity())},M={},B=nS(a),O=Cp(a),D=B||O,F=(N||tS(a))&&Ln(a.value)&&Ln(y)||kx(a)&&a.value===""||y===""||Array.isArray(y)&&!y.length,I=YL.bind(null,b,n,M),V=(k,P,q,te=Ra.maxLength,re=Ra.minLength)=>{const K=k?P:q;M[b]={type:k?te:re,message:K,ref:a,...I(k?te:re,K)}};if(i?!Array.isArray(y)||!y.length:c&&(!D&&(F||zr(y))||zi(y)&&!y||O&&!QL(o).isValid||B&&!XL(o).isValid)){const{value:k,message:P}=_v(c)?{value:!!c,message:c}:Au(c);if(k&&(M[b]={type:Ra.required,message:P,ref:C,...I(Ra.required,P)},!n))return R(P),M}if(!F&&(!zr(f)||!zr(p))){let k,P;const q=Au(p),te=Au(f);if(!zr(y)&&!isNaN(y)){const re=a.valueAsNumber||y&&+y;zr(q.value)||(k=re>q.value),zr(te.value)||(P=re<te.value)}else{const re=a.valueAsDate||new Date(y),K=H=>new Date(new Date().toDateString()+" "+H),U=a.type=="time",W=a.type=="week";Ki(q.value)&&y&&(k=U?K(y)>K(q.value):W?y>q.value:re>new Date(q.value)),Ki(te.value)&&y&&(P=U?K(y)<K(te.value):W?y<te.value:re<new Date(te.value))}if((k||P)&&(V(!!k,q.message,te.message,Ra.max,Ra.min),!n))return R(M[b].message),M}if((u||h)&&!F&&(Ki(y)||i&&Array.isArray(y))){const k=Au(u),P=Au(h),q=!zr(k.value)&&y.length>+k.value,te=!zr(P.value)&&y.length<+P.value;if((q||te)&&(V(q,k.message,P.message),!n))return R(M[b].message),M}if(v&&!F&&Ki(y)){const{value:k,message:P}=Au(v);if(Px(k)&&!y.match(k)&&(M[b]={type:Ra.pattern,message:P,ref:a,...I(Ra.pattern,P)},!n))return R(P),M}if(_){if(Ba(_)){const k=await _(y,e),P=WT(k,C);if(P&&(M[b]={...P,...I(Ra.validate,P.message)},!n))return R(P.message),M}else if(Yn(_)){let k={};for(const P in _){if(!es(k)&&!n)break;const q=WT(await _[P](y,e),C,P);q&&(k={...q,...I(P,q.message)},R(q.message),n&&(M[b]=k))}if(!es(k)&&(M[b]={ref:C,...k},!n))return M}}return R(!0),M};function vie(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=Ln(t)?r++:t[e[r++]];return t}function xie(t){for(const e in t)if(t.hasOwnProperty(e)&&!Ln(t[e]))return!1;return!0}function Jn(t,e){const n=Array.isArray(e)?e:eS(e)?[e]:KL(e),r=n.length===1?t:vie(t,n),i=n.length-1,a=n[i];return r&&delete r[a],i!==0&&(Yn(r)&&es(r)||Array.isArray(r)&&xie(r))&&Jn(t,n.slice(0,-1)),t}var D_=()=>{let t=[];return{get observers(){return t},next:i=>{for(const a of t)a.next&&a.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(a=>a!==i)}}),unsubscribe:()=>{t=[]}}},Ix=t=>zr(t)||!ZL(t);function qo(t,e){if(Ix(t)||Ix(e))return t===e;if(Xu(t)&&Xu(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n){const a=t[i];if(!r.includes(i))return!1;if(i!=="ref"){const o=e[i];if(Xu(a)&&Xu(o)||Yn(a)&&Yn(o)||Array.isArray(a)&&Array.isArray(o)?!qo(a,o):a!==o)return!1}}return!0}var JL=t=>t.type==="select-multiple",yie=t=>nS(t)||Cp(t),O_=t=>kx(t)&&t.isConnected,e3=t=>{for(const e in t)if(Ba(t[e]))return!0;return!1};function Ax(t,e={}){const n=Array.isArray(t);if(Yn(t)||n)for(const r in t)Array.isArray(t[r])||Yn(t[r])&&!e3(t[r])?(e[r]=Array.isArray(t[r])?[]:{},Ax(t[r],e[r])):zr(t[r])||(e[r]=!0);return e}function t3(t,e,n){const r=Array.isArray(t);if(Yn(t)||r)for(const i in t)Array.isArray(t[i])||Yn(t[i])&&!e3(t[i])?Ln(e)||Ix(n[i])?n[i]=Array.isArray(t[i])?Ax(t[i],[]):{...Ax(t[i])}:t3(t[i],zr(e)?{}:e[i],n[i]):n[i]=!qo(t[i],e[i]);return n}var zg=(t,e)=>t3(t,e,Ax(e)),n3=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>Ln(t)?t:e?t===""?NaN:t&&+t:n&&Ki(t)?new Date(t):r?r(t):t;function L_(t){const e=t.ref;if(!(t.refs?t.refs.every(n=>n.disabled):e.disabled))return tS(e)?e.files:nS(e)?XL(t.refs).value:JL(e)?[...e.selectedOptions].map(({value:n})=>n):Cp(e)?QL(t.refs).value:n3(Ln(e.value)?t.ref.value:e.value,t)}var _ie=(t,e,n,r)=>{const i={};for(const a of t){const o=Ue(e,a);o&&Qt(i,a,o._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},lf=t=>Ln(t)?t:Px(t)?t.source:Yn(t)?Px(t.value)?t.value.source:t.value:t;const HT="AsyncFunction";var wie=t=>(!t||!t.validate)&&!!(Ba(t.validate)&&t.validate.constructor.name===HT||Yn(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===HT)),bie=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function GT(t,e,n){const r=Ue(t,n);if(r||eS(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const a=i.join("."),o=Ue(e,a),c=Ue(t,a);if(o&&!Array.isArray(o)&&n!==a)return{name:n};if(c&&c.type)return{name:a,error:c};i.pop()}return{name:n}}var jie=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,Nie=(t,e)=>!l0(Ue(t,e)).length&&Jn(t,e);const Sie={mode:fi.onSubmit,reValidateMode:fi.onChange,shouldFocusError:!0};function Eie(t={}){let e={...Sie,...t},n={submitCount:0,isDirty:!1,isLoading:Ba(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=Yn(e.defaultValues)||Yn(e.values)?Us(e.defaultValues||e.values)||{}:{},a=e.shouldUnregister?{}:Us(i),o={action:!1,mount:!1,watch:!1},c={mount:new Set,unMount:new Set,array:new Set,watch:new Set},u,h=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},p={values:D_(),array:D_(),state:D_()},v=FT(e.mode),_=FT(e.reValidateMode),b=e.criteriaMode===fi.all,N=G=>J=>{clearTimeout(h),h=setTimeout(G,J)},S=async G=>{if(f.isValid||G){const J=e.resolver?es((await D()).errors):await I(r,!0);J!==n.isValid&&p.state.next({isValid:J})}},w=(G,J)=>{(f.isValidating||f.validatingFields)&&((G||Array.from(c.mount)).forEach(ie=>{ie&&(J?Qt(n.validatingFields,ie,J):Jn(n.validatingFields,ie))}),p.state.next({validatingFields:n.validatingFields,isValidating:!es(n.validatingFields)}))},y=(G,J=[],ie,Ce,Te=!0,je=!0)=>{if(Ce&&ie){if(o.action=!0,je&&Array.isArray(Ue(r,G))){const Xe=ie(Ue(r,G),Ce.argA,Ce.argB);Te&&Qt(r,G,Xe)}if(je&&Array.isArray(Ue(n.errors,G))){const Xe=ie(Ue(n.errors,G),Ce.argA,Ce.argB);Te&&Qt(n.errors,G,Xe),Nie(n.errors,G)}if(f.touchedFields&&je&&Array.isArray(Ue(n.touchedFields,G))){const Xe=ie(Ue(n.touchedFields,G),Ce.argA,Ce.argB);Te&&Qt(n.touchedFields,G,Xe)}f.dirtyFields&&(n.dirtyFields=zg(i,a)),p.state.next({name:G,isDirty:k(G,J),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Qt(a,G,J)},C=(G,J)=>{Qt(n.errors,G,J),p.state.next({errors:n.errors})},R=G=>{n.errors=G,p.state.next({errors:n.errors,isValid:!1})},M=(G,J,ie,Ce)=>{const Te=Ue(r,G);if(Te){const je=Ue(a,G,Ln(ie)?Ue(i,G):ie);Ln(je)||Ce&&Ce.defaultChecked||J?Qt(a,G,J?je:L_(Te._f)):te(G,je),o.mount&&S()}},B=(G,J,ie,Ce,Te)=>{let je=!1,Xe=!1;const It={name:G},bt=!!(Ue(r,G)&&Ue(r,G)._f&&Ue(r,G)._f.disabled);if(!ie||Ce){f.isDirty&&(Xe=n.isDirty,n.isDirty=It.isDirty=k(),je=Xe!==It.isDirty);const Nt=bt||qo(Ue(i,G),J);Xe=!!(!bt&&Ue(n.dirtyFields,G)),Nt||bt?Jn(n.dirtyFields,G):Qt(n.dirtyFields,G,!0),It.dirtyFields=n.dirtyFields,je=je||f.dirtyFields&&Xe!==!Nt}if(ie){const Nt=Ue(n.touchedFields,G);Nt||(Qt(n.touchedFields,G,ie),It.touchedFields=n.touchedFields,je=je||f.touchedFields&&Nt!==ie)}return je&&Te&&p.state.next(It),je?It:{}},O=(G,J,ie,Ce)=>{const Te=Ue(n.errors,G),je=f.isValid&&zi(J)&&n.isValid!==J;if(t.delayError&&ie?(u=N(()=>C(G,ie)),u(t.delayError)):(clearTimeout(h),u=null,ie?Qt(n.errors,G,ie):Jn(n.errors,G)),(ie?!qo(Te,ie):Te)||!es(Ce)||je){const Xe={...Ce,...je&&zi(J)?{isValid:J}:{},errors:n.errors,name:G};n={...n,...Xe},p.state.next(Xe)}},D=async G=>{w(G,!0);const J=await e.resolver(a,e.context,_ie(G||c.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return w(G),J},F=async G=>{const{errors:J}=await D(G);if(G)for(const ie of G){const Ce=Ue(J,ie);Ce?Qt(n.errors,ie,Ce):Jn(n.errors,ie)}else n.errors=J;return J},I=async(G,J,ie={valid:!0})=>{for(const Ce in G){const Te=G[Ce];if(Te){const{_f:je,...Xe}=Te;if(je){const It=c.array.has(je.name),bt=Te._f&&wie(Te._f);bt&&f.validatingFields&&w([Ce],!0);const Nt=await qT(Te,a,b,e.shouldUseNativeValidation&&!J,It);if(bt&&f.validatingFields&&w([Ce]),Nt[je.name]&&(ie.valid=!1,J))break;!J&&(Ue(Nt,je.name)?It?gie(n.errors,Nt,je.name):Qt(n.errors,je.name,Nt[je.name]):Jn(n.errors,je.name))}!es(Xe)&&await I(Xe,J,ie)}}return ie.valid},V=()=>{for(const G of c.unMount){const J=Ue(r,G);J&&(J._f.refs?J._f.refs.every(ie=>!O_(ie)):!O_(J._f.ref))&&se(G)}c.unMount=new Set},k=(G,J)=>(G&&J&&Qt(a,G,J),!qo(Q(),i)),P=(G,J,ie)=>pie(G,c,{...o.mount?a:Ln(J)?i:Ki(G)?{[G]:J}:J},ie,J),q=G=>l0(Ue(o.mount?a:i,G,t.shouldUnregister?Ue(i,G,[]):[])),te=(G,J,ie={})=>{const Ce=Ue(r,G);let Te=J;if(Ce){const je=Ce._f;je&&(!je.disabled&&Qt(a,G,n3(J,je)),Te=kx(je.ref)&&zr(J)?"":J,JL(je.ref)?[...je.ref.options].forEach(Xe=>Xe.selected=Te.includes(Xe.value)):je.refs?Cp(je.ref)?je.refs.length>1?je.refs.forEach(Xe=>(!Xe.defaultChecked||!Xe.disabled)&&(Xe.checked=Array.isArray(Te)?!!Te.find(It=>It===Xe.value):Te===Xe.value)):je.refs[0]&&(je.refs[0].checked=!!Te):je.refs.forEach(Xe=>Xe.checked=Xe.value===Te):tS(je.ref)?je.ref.value="":(je.ref.value=Te,je.ref.type||p.values.next({name:G,values:{...a}})))}(ie.shouldDirty||ie.shouldTouch)&&B(G,Te,ie.shouldTouch,ie.shouldDirty,!0),ie.shouldValidate&&H(G)},re=(G,J,ie)=>{for(const Ce in J){const Te=J[Ce],je=`${G}.${Ce}`,Xe=Ue(r,je);(c.array.has(G)||!Ix(Te)||Xe&&!Xe._f)&&!Xu(Te)?re(je,Te,ie):te(je,Te,ie)}},K=(G,J,ie={})=>{const Ce=Ue(r,G),Te=c.array.has(G),je=Us(J);Qt(a,G,je),Te?(p.array.next({name:G,values:{...a}}),(f.isDirty||f.dirtyFields)&&ie.shouldDirty&&p.state.next({name:G,dirtyFields:zg(i,a),isDirty:k(G,je)})):Ce&&!Ce._f&&!zr(je)?re(G,je,ie):te(G,je,ie),zT(G,c)&&p.state.next({...n}),p.values.next({name:o.mount?G:void 0,values:{...a}})},U=async G=>{o.mount=!0;const J=G.target;let ie=J.name,Ce=!0;const Te=Ue(r,ie),je=()=>J.type?L_(Te._f):lie(G),Xe=It=>{Ce=Number.isNaN(It)||qo(It,Ue(a,ie,It))};if(Te){let It,bt;const Nt=je(),Rr=G.type===VT.BLUR||G.type===VT.FOCUS_OUT,tu=!bie(Te._f)&&!e.resolver&&!Ue(n.errors,ie)&&!Te._f.deps||jie(Rr,Ue(n.touchedFields,ie),n.isSubmitted,_,v),ga=zT(ie,c,Rr);Qt(a,ie,Nt),Rr?(Te._f.onBlur&&Te._f.onBlur(G),u&&u(0)):Te._f.onChange&&Te._f.onChange(G);const vo=B(ie,Nt,Rr,!1),va=!es(vo)||ga;if(!Rr&&p.values.next({name:ie,type:G.type,values:{...a}}),tu)return f.isValid&&(t.mode==="onBlur"?Rr&&S():S()),va&&p.state.next({name:ie,...ga?{}:vo});if(!Rr&&ga&&p.state.next({...n}),e.resolver){const{errors:xo}=await D([ie]);if(Xe(Nt),Ce){const yo=GT(n.errors,r,ie),xa=GT(xo,r,yo.name||ie);It=xa.error,ie=xa.name,bt=es(xo)}}else w([ie],!0),It=(await qT(Te,a,b,e.shouldUseNativeValidation))[ie],w([ie]),Xe(Nt),Ce&&(It?bt=!1:f.isValid&&(bt=await I(r,!0)));Ce&&(Te._f.deps&&H(Te._f.deps),O(ie,bt,It,vo))}},W=(G,J)=>{if(Ue(n.errors,J)&&G.focus)return G.focus(),1},H=async(G,J={})=>{let ie,Ce;const Te=yv(G);if(e.resolver){const je=await F(Ln(G)?G:Te);ie=es(je),Ce=G?!Te.some(Xe=>Ue(je,Xe)):ie}else G?(Ce=(await Promise.all(Te.map(async je=>{const Xe=Ue(r,je);return await I(Xe&&Xe._f?{[je]:Xe}:Xe)}))).every(Boolean),!(!Ce&&!n.isValid)&&S()):Ce=ie=await I(r);return p.state.next({...!Ki(G)||f.isValid&&ie!==n.isValid?{}:{name:G},...e.resolver||!G?{isValid:ie}:{},errors:n.errors}),J.shouldFocus&&!Ce&&zf(r,W,G?Te:c.mount),Ce},Q=G=>{const J={...o.mount?a:i};return Ln(G)?J:Ki(G)?Ue(J,G):G.map(ie=>Ue(J,ie))},fe=(G,J)=>({invalid:!!Ue((J||n).errors,G),isDirty:!!Ue((J||n).dirtyFields,G),error:Ue((J||n).errors,G),isValidating:!!Ue(n.validatingFields,G),isTouched:!!Ue((J||n).touchedFields,G)}),ke=G=>{G&&yv(G).forEach(J=>Jn(n.errors,J)),p.state.next({errors:G?n.errors:{}})},Ze=(G,J,ie)=>{const Ce=(Ue(r,G,{_f:{}})._f||{}).ref,Te=Ue(n.errors,G)||{},{ref:je,message:Xe,type:It,...bt}=Te;Qt(n.errors,G,{...bt,...J,ref:Ce}),p.state.next({name:G,errors:n.errors,isValid:!1}),ie&&ie.shouldFocus&&Ce&&Ce.focus&&Ce.focus()},Ye=(G,J)=>Ba(G)?p.values.subscribe({next:ie=>G(P(void 0,J),ie)}):P(G,J,!0),se=(G,J={})=>{for(const ie of G?yv(G):c.mount)c.mount.delete(ie),c.array.delete(ie),J.keepValue||(Jn(r,ie),Jn(a,ie)),!J.keepError&&Jn(n.errors,ie),!J.keepDirty&&Jn(n.dirtyFields,ie),!J.keepTouched&&Jn(n.touchedFields,ie),!J.keepIsValidating&&Jn(n.validatingFields,ie),!e.shouldUnregister&&!J.keepDefaultValue&&Jn(i,ie);p.values.next({values:{...a}}),p.state.next({...n,...J.keepDirty?{isDirty:k()}:{}}),!J.keepIsValid&&S()},de=({disabled:G,name:J,field:ie,fields:Ce,value:Te})=>{if(zi(G)&&o.mount||G){const je=G?void 0:Ln(Te)?L_(ie?ie._f:Ue(Ce,J)._f):Te;Qt(a,J,je),B(J,je,!1,!1,!0)}},ne=(G,J={})=>{let ie=Ue(r,G);const Ce=zi(J.disabled)||zi(t.disabled);return Qt(r,G,{...ie||{},_f:{...ie&&ie._f?ie._f:{ref:{name:G}},name:G,mount:!0,...J}}),c.mount.add(G),ie?de({field:ie,disabled:zi(J.disabled)?J.disabled:t.disabled,name:G,value:J.value}):M(G,!0,J.value),{...Ce?{disabled:J.disabled||t.disabled}:{},...e.progressive?{required:!!J.required,min:lf(J.min),max:lf(J.max),minLength:lf(J.minLength),maxLength:lf(J.maxLength),pattern:lf(J.pattern)}:{},name:G,onChange:U,onBlur:U,ref:Te=>{if(Te){ne(G,J),ie=Ue(r,G);const je=Ln(Te.value)&&Te.querySelectorAll&&Te.querySelectorAll("input,select,textarea")[0]||Te,Xe=yie(je),It=ie._f.refs||[];if(Xe?It.find(bt=>bt===je):je===ie._f.ref)return;Qt(r,G,{_f:{...ie._f,...Xe?{refs:[...It.filter(O_),je,...Array.isArray(Ue(i,G))?[{}]:[]],ref:{type:je.type,name:G}}:{ref:je}}}),M(G,!1,void 0,je)}else ie=Ue(r,G,{}),ie._f&&(ie._f.mount=!1),(e.shouldUnregister||J.shouldUnregister)&&!(uie(c.array,G)&&o.action)&&c.unMount.add(G)}}},ve=()=>e.shouldFocusError&&zf(r,W,c.mount),_e=G=>{zi(G)&&(p.state.next({disabled:G}),zf(r,(J,ie)=>{const Ce=Ue(r,ie);Ce&&(J.disabled=Ce._f.disabled||G,Array.isArray(Ce._f.refs)&&Ce._f.refs.forEach(Te=>{Te.disabled=Ce._f.disabled||G}))},0,!1))},ye=(G,J)=>async ie=>{let Ce;ie&&(ie.preventDefault&&ie.preventDefault(),ie.persist&&ie.persist());let Te=Us(a);if(p.state.next({isSubmitting:!0}),e.resolver){const{errors:je,values:Xe}=await D();n.errors=je,Te=Xe}else await I(r);if(Jn(n.errors,"root"),es(n.errors)){p.state.next({errors:{}});try{await G(Te,ie)}catch(je){Ce=je}}else J&&await J({...n.errors},ie),ve(),setTimeout(ve);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:es(n.errors)&&!Ce,submitCount:n.submitCount+1,errors:n.errors}),Ce)throw Ce},Se=(G,J={})=>{Ue(r,G)&&(Ln(J.defaultValue)?K(G,Us(Ue(i,G))):(K(G,J.defaultValue),Qt(i,G,Us(J.defaultValue))),J.keepTouched||Jn(n.touchedFields,G),J.keepDirty||(Jn(n.dirtyFields,G),n.isDirty=J.defaultValue?k(G,Us(Ue(i,G))):k()),J.keepError||(Jn(n.errors,G),f.isValid&&S()),p.state.next({...n}))},ge=(G,J={})=>{const ie=G?Us(G):i,Ce=Us(ie),Te=es(G),je=Te?i:Ce;if(J.keepDefaultValues||(i=ie),!J.keepValues){if(J.keepDirtyValues)for(const Xe of c.mount)Ue(n.dirtyFields,Xe)?Qt(je,Xe,Ue(a,Xe)):K(Xe,Ue(je,Xe));else{if(JN&&Ln(G))for(const Xe of c.mount){const It=Ue(r,Xe);if(It&&It._f){const bt=Array.isArray(It._f.refs)?It._f.refs[0]:It._f.ref;if(kx(bt)){const Nt=bt.closest("form");if(Nt){Nt.reset();break}}}}r={}}a=t.shouldUnregister?J.keepDefaultValues?Us(i):{}:Us(je),p.array.next({values:{...je}}),p.values.next({values:{...je}})}c={mount:J.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!f.isValid||!!J.keepIsValid||!!J.keepDirtyValues,o.watch=!!t.shouldUnregister,p.state.next({submitCount:J.keepSubmitCount?n.submitCount:0,isDirty:Te?!1:J.keepDirty?n.isDirty:!!(J.keepDefaultValues&&!qo(G,i)),isSubmitted:J.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Te?{}:J.keepDirtyValues?J.keepDefaultValues&&a?zg(i,a):n.dirtyFields:J.keepDefaultValues&&G?zg(i,G):J.keepDirty?n.dirtyFields:{},touchedFields:J.keepTouched?n.touchedFields:{},errors:J.keepErrors?n.errors:{},isSubmitSuccessful:J.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},Ae=(G,J)=>ge(Ba(G)?G(a):G,J);return{control:{register:ne,unregister:se,getFieldState:fe,handleSubmit:ye,setError:Ze,_executeSchema:D,_getWatch:P,_getDirty:k,_updateValid:S,_removeUnmounted:V,_updateFieldArray:y,_updateDisabledField:de,_getFieldArray:q,_reset:ge,_resetDefaultValues:()=>Ba(e.defaultValues)&&e.defaultValues().then(G=>{Ae(G,e.resetOptions),p.state.next({isLoading:!1})}),_updateFormState:G=>{n={...n,...G}},_disableForm:_e,_subjects:p,_proxyFormState:f,_setErrors:R,get _fields(){return r},get _formValues(){return a},get _state(){return o},set _state(G){o=G},get _defaultValues(){return i},get _names(){return c},set _names(G){c=G},get _formState(){return n},set _formState(G){n=G},get _options(){return e},set _options(G){e={...e,...G}}},trigger:H,register:ne,handleSubmit:ye,watch:Ye,setValue:K,getValues:Q,reset:Ae,resetField:Se,clearErrors:ke,unregister:se,setError:Ze,setFocus:(G,J={})=>{const ie=Ue(r,G),Ce=ie&&ie._f;if(Ce){const Te=Ce.refs?Ce.refs[0]:Ce.ref;Te.focus&&(Te.focus(),J.shouldSelect&&Te.select())}},getFieldState:fe}}function yc(t={}){const e=Me.useRef(),n=Me.useRef(),[r,i]=Me.useState({isDirty:!1,isValidating:!1,isLoading:Ba(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:Ba(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...Eie(t),formState:r});const a=e.current.control;return a._options=t,mie({subject:a._subjects.state,next:o=>{fie(o,a._proxyFormState,a._updateFormState)&&i({...a._formState})}}),Me.useEffect(()=>a._disableForm(t.disabled),[a,t.disabled]),Me.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==r.isDirty&&a._subjects.state.next({isDirty:o})}},[a,r.isDirty]),Me.useEffect(()=>{t.values&&!qo(t.values,n.current)?(a._reset(t.values,a._options.resetOptions),n.current=t.values,i(o=>({...o}))):a._resetDefaultValues()},[t.values,a]),Me.useEffect(()=>{t.errors&&a._setErrors(t.errors)},[t.errors,a]),Me.useEffect(()=>{a._state.mount||(a._updateValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),Me.useEffect(()=>{t.shouldUnregister&&a._subjects.values.next({values:a._getWatch()})},[t.shouldUnregister,a]),e.current.formState=hie(r,a),e.current}const ZT=(t,e,n)=>{if(t&&"reportValidity"in t){const r=Ue(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},r3=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?ZT(r.ref,n,t):r.refs&&r.refs.forEach(i=>ZT(i,n,t))}},Cie=(t,e)=>{e.shouldUseNativeValidation&&r3(t,e);const n={};for(const r in t){const i=Ue(e.fields,r),a=Object.assign(t[r]||{},{ref:i&&i.ref});if(Tie(e.names||Object.keys(t),r)){const o=Object.assign({},Ue(n,r));Qt(o,"root",a),Qt(n,r,o)}else Qt(n,r,a)}return n},Tie=(t,e)=>t.some(n=>n.startsWith(e+"."));var kie=function(t,e){for(var n={};t.length;){var r=t[0],i=r.code,a=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var c=r.unionErrors[0].errors[0];n[o]={message:c.message,type:c.code}}else n[o]={message:a,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(f){return f.errors.forEach(function(p){return t.push(p)})}),e){var u=n[o].types,h=u&&u[r.code];n[o]=YL(o,e,n,i,h?[].concat(h,r.message):r.message)}t.shift()}return n},_c=function(t,e,n){return n===void 0&&(n={}),function(r,i,a){try{return Promise.resolve(function(o,c){try{var u=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(h){return a.shouldUseNativeValidation&&r3({},a),{errors:{},values:n.raw?r:h}})}catch(h){return c(h)}return u&&u.then?u.then(void 0,c):u}(0,function(o){if(function(c){return Array.isArray(c==null?void 0:c.errors)}(o))return{values:{},errors:Cie(kie(o.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw o}))}catch(o){return Promise.reject(o)}}},Dt;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const a={};for(const o of i)a[o]=o;return a},t.getValidEnumValues=i=>{const a=t.objectKeys(i).filter(c=>typeof i[i[c]]!="number"),o={};for(const c of a)o[c]=i[c];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(a){return i[a]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&a.push(o);return a},t.find=(i,a)=>{for(const o of i)if(a(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,a=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}t.joinValues=r,t.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(Dt||(Dt={}));var L1;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(L1||(L1={}));const ze=Dt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ho=t=>{switch(typeof t){case"undefined":return ze.undefined;case"string":return ze.string;case"number":return isNaN(t)?ze.nan:ze.number;case"boolean":return ze.boolean;case"function":return ze.function;case"bigint":return ze.bigint;case"symbol":return ze.symbol;case"object":return Array.isArray(t)?ze.array:t===null?ze.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ze.promise:typeof Map<"u"&&t instanceof Map?ze.map:typeof Set<"u"&&t instanceof Set?ze.set:typeof Date<"u"&&t instanceof Date?ze.date:ze.object;default:return ze.unknown}},Ne=Dt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Pie=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Cs extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(a){return a.message},r={_errors:[]},i=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let c=r,u=0;for(;u<o.path.length;){const h=o.path[u];u===o.path.length-1?(c[h]=c[h]||{_errors:[]},c[h]._errors.push(n(o))):c[h]=c[h]||{_errors:[]},c=c[h],u++}}};return i(this),r}static assert(e){if(!(e instanceof Cs))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Dt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Cs.create=t=>new Cs(t);const Wd=(t,e)=>{let n;switch(t.code){case Ne.invalid_type:t.received===ze.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Ne.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Dt.jsonStringifyReplacer)}`;break;case Ne.unrecognized_keys:n=`Unrecognized key(s) in object: ${Dt.joinValues(t.keys,", ")}`;break;case Ne.invalid_union:n="Invalid input";break;case Ne.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Dt.joinValues(t.options)}`;break;case Ne.invalid_enum_value:n=`Invalid enum value. Expected ${Dt.joinValues(t.options)}, received '${t.received}'`;break;case Ne.invalid_arguments:n="Invalid function arguments";break;case Ne.invalid_return_type:n="Invalid function return type";break;case Ne.invalid_date:n="Invalid date";break;case Ne.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Dt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Ne.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Ne.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Ne.custom:n="Invalid input";break;case Ne.invalid_intersection_types:n="Intersection results could not be merged";break;case Ne.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Ne.not_finite:n="Number must be finite";break;default:n=e.defaultError,Dt.assertNever(t)}return{message:n}};let s3=Wd;function Iie(t){s3=t}function Rx(){return s3}const Mx=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,a=[...n,...i.path||[]],o={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let c="";const u=r.filter(h=>!!h).slice().reverse();for(const h of u)c=h(o,{data:e,defaultError:c}).message;return{...i,path:a,message:c}},Aie=[];function Le(t,e){const n=Rx(),r=Mx({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Wd?void 0:Wd].filter(i=>!!i)});t.common.issues.push(r)}class Ar{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return ut;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const a=await i.key,o=await i.value;r.push({key:a,value:o})}return Ar.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:a,value:o}=i;if(a.status==="aborted"||o.status==="aborted")return ut;a.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[a.value]=o.value)}return{status:e.value,value:r}}}const ut=Object.freeze({status:"aborted"}),Ju=t=>({status:"dirty",value:t}),Zr=t=>({status:"valid",value:t}),V1=t=>t.status==="aborted",F1=t=>t.status==="dirty",Cm=t=>t.status==="valid",Tm=t=>typeof Promise<"u"&&t instanceof Promise;function Dx(t,e,n,r){if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function i3(t,e,n,r,i){if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var nt;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(nt||(nt={}));var bf,jf;class ua{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const KT=(t,e)=>{if(Cm(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Cs(t.common.issues);return this._error=n,this._error}}};function yt(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,c)=>{var u,h;const{message:f}=t;return o.code==="invalid_enum_value"?{message:f??c.defaultError}:typeof c.data>"u"?{message:(u=f??r)!==null&&u!==void 0?u:c.defaultError}:o.code!=="invalid_type"?{message:c.defaultError}:{message:(h=f??n)!==null&&h!==void 0?h:c.defaultError}},description:i}}class wt{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Ho(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Ho(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ar,ctx:{common:e.parent.common,data:e.data,parsedType:Ho(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Tm(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const i={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ho(e)},a=this._parseSync({data:e,path:i.path,parent:i});return KT(i,a)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ho(e)},i=this._parse({data:e,path:r.path,parent:r}),a=await(Tm(i)?i:Promise.resolve(i));return KT(r,a)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,a)=>{const o=e(i),c=()=>a.addIssue({code:Ne.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(c(),!1)):o?!0:(c(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new Pi({schema:this,typeName:lt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return ia.create(this,this._def)}nullable(){return Cl.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ji.create(this,this._def)}promise(){return Hd.create(this,this._def)}or(e){return Am.create([this,e],this._def)}and(e){return Rm.create(this,e,this._def)}transform(e){return new Pi({...yt(this._def),schema:this,typeName:lt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Vm({...yt(this._def),innerType:this,defaultValue:n,typeName:lt.ZodDefault})}brand(){return new rS({typeName:lt.ZodBranded,type:this,...yt(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Fm({...yt(this._def),innerType:this,catchValue:n,typeName:lt.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Tp.create(this,e)}readonly(){return zm.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Rie=/^c[^\s-]{8,}$/i,Mie=/^[0-9a-z]+$/,Die=/^[0-9A-HJKMNP-TV-Z]{26}$/,Oie=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Lie=/^[a-z0-9_-]{21}$/i,Vie=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Fie=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,zie="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let V_;const Uie=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,$ie=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Bie=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,a3="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Wie=new RegExp(`^${a3}$`);function o3(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function qie(t){return new RegExp(`^${o3(t)}$`)}function l3(t){let e=`${a3}T${o3(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function Hie(t,e){return!!((e==="v4"||!e)&&Uie.test(t)||(e==="v6"||!e)&&$ie.test(t))}class gi extends wt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ze.string){const a=this._getOrReturnCtx(e);return Le(a,{code:Ne.invalid_type,expected:ze.string,received:a.parsedType}),ut}const r=new Ar;let i;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(i=this._getOrReturnCtx(e,i),Le(i,{code:Ne.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")e.data.length>a.value&&(i=this._getOrReturnCtx(e,i),Le(i,{code:Ne.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){const o=e.data.length>a.value,c=e.data.length<a.value;(o||c)&&(i=this._getOrReturnCtx(e,i),o?Le(i,{code:Ne.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):c&&Le(i,{code:Ne.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")Fie.test(e.data)||(i=this._getOrReturnCtx(e,i),Le(i,{validation:"email",code:Ne.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")V_||(V_=new RegExp(zie,"u")),V_.test(e.data)||(i=this._getOrReturnCtx(e,i),Le(i,{validation:"emoji",code:Ne.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")Oie.test(e.data)||(i=this._getOrReturnCtx(e,i),Le(i,{validation:"uuid",code:Ne.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")Lie.test(e.data)||(i=this._getOrReturnCtx(e,i),Le(i,{validation:"nanoid",code:Ne.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")Rie.test(e.data)||(i=this._getOrReturnCtx(e,i),Le(i,{validation:"cuid",code:Ne.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")Mie.test(e.data)||(i=this._getOrReturnCtx(e,i),Le(i,{validation:"cuid2",code:Ne.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")Die.test(e.data)||(i=this._getOrReturnCtx(e,i),Le(i,{validation:"ulid",code:Ne.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),Le(i,{validation:"url",code:Ne.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Le(i,{validation:"regex",code:Ne.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(e,i),Le(i,{code:Ne.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(i=this._getOrReturnCtx(e,i),Le(i,{code:Ne.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(i=this._getOrReturnCtx(e,i),Le(i,{code:Ne.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?l3(a).test(e.data)||(i=this._getOrReturnCtx(e,i),Le(i,{code:Ne.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?Wie.test(e.data)||(i=this._getOrReturnCtx(e,i),Le(i,{code:Ne.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?qie(a).test(e.data)||(i=this._getOrReturnCtx(e,i),Le(i,{code:Ne.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?Vie.test(e.data)||(i=this._getOrReturnCtx(e,i),Le(i,{validation:"duration",code:Ne.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?Hie(e.data,a.version)||(i=this._getOrReturnCtx(e,i),Le(i,{validation:"ip",code:Ne.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?Bie.test(e.data)||(i=this._getOrReturnCtx(e,i),Le(i,{validation:"base64",code:Ne.invalid_string,message:a.message}),r.dirty()):Dt.assertNever(a);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:Ne.invalid_string,...nt.errToObj(r)})}_addCheck(e){return new gi({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...nt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...nt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...nt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...nt.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...nt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...nt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...nt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...nt.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...nt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...nt.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...nt.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...nt.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...nt.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...nt.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...nt.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...nt.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...nt.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...nt.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...nt.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...nt.errToObj(n)})}nonempty(e){return this.min(1,nt.errToObj(e))}trim(){return new gi({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new gi({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new gi({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}gi.create=t=>{var e;return new gi({checks:[],typeName:lt.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...yt(t)})};function Gie(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,a=parseInt(t.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return a%o/Math.pow(10,i)}class Nl extends wt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ze.number){const a=this._getOrReturnCtx(e);return Le(a,{code:Ne.invalid_type,expected:ze.number,received:a.parsedType}),ut}let r;const i=new Ar;for(const a of this._def.checks)a.kind==="int"?Dt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Le(r,{code:Ne.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),Le(r,{code:Ne.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),Le(r,{code:Ne.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?Gie(e.data,a.value)!==0&&(r=this._getOrReturnCtx(e,r),Le(r,{code:Ne.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Le(r,{code:Ne.not_finite,message:a.message}),i.dirty()):Dt.assertNever(a);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,nt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,nt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,nt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,nt.toString(n))}setLimit(e,n,r,i){return new Nl({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:nt.toString(i)}]})}_addCheck(e){return new Nl({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:nt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:nt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:nt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:nt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:nt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:nt.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:nt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:nt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:nt.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Dt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Nl.create=t=>new Nl({checks:[],typeName:lt.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...yt(t)});class Sl extends wt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==ze.bigint){const a=this._getOrReturnCtx(e);return Le(a,{code:Ne.invalid_type,expected:ze.bigint,received:a.parsedType}),ut}let r;const i=new Ar;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),Le(r,{code:Ne.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),Le(r,{code:Ne.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Le(r,{code:Ne.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):Dt.assertNever(a);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,nt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,nt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,nt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,nt.toString(n))}setLimit(e,n,r,i){return new Sl({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:nt.toString(i)}]})}_addCheck(e){return new Sl({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:nt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:nt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:nt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:nt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:nt.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Sl.create=t=>{var e;return new Sl({checks:[],typeName:lt.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...yt(t)})};class km extends wt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ze.boolean){const r=this._getOrReturnCtx(e);return Le(r,{code:Ne.invalid_type,expected:ze.boolean,received:r.parsedType}),ut}return Zr(e.data)}}km.create=t=>new km({typeName:lt.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...yt(t)});class zc extends wt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ze.date){const a=this._getOrReturnCtx(e);return Le(a,{code:Ne.invalid_type,expected:ze.date,received:a.parsedType}),ut}if(isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return Le(a,{code:Ne.invalid_date}),ut}const r=new Ar;let i;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(i=this._getOrReturnCtx(e,i),Le(i,{code:Ne.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(i=this._getOrReturnCtx(e,i),Le(i,{code:Ne.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):Dt.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new zc({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:nt.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:nt.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}zc.create=t=>new zc({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:lt.ZodDate,...yt(t)});class Ox extends wt{_parse(e){if(this._getType(e)!==ze.symbol){const r=this._getOrReturnCtx(e);return Le(r,{code:Ne.invalid_type,expected:ze.symbol,received:r.parsedType}),ut}return Zr(e.data)}}Ox.create=t=>new Ox({typeName:lt.ZodSymbol,...yt(t)});class Pm extends wt{_parse(e){if(this._getType(e)!==ze.undefined){const r=this._getOrReturnCtx(e);return Le(r,{code:Ne.invalid_type,expected:ze.undefined,received:r.parsedType}),ut}return Zr(e.data)}}Pm.create=t=>new Pm({typeName:lt.ZodUndefined,...yt(t)});class Im extends wt{_parse(e){if(this._getType(e)!==ze.null){const r=this._getOrReturnCtx(e);return Le(r,{code:Ne.invalid_type,expected:ze.null,received:r.parsedType}),ut}return Zr(e.data)}}Im.create=t=>new Im({typeName:lt.ZodNull,...yt(t)});class qd extends wt{constructor(){super(...arguments),this._any=!0}_parse(e){return Zr(e.data)}}qd.create=t=>new qd({typeName:lt.ZodAny,...yt(t)});class wc extends wt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Zr(e.data)}}wc.create=t=>new wc({typeName:lt.ZodUnknown,...yt(t)});class co extends wt{_parse(e){const n=this._getOrReturnCtx(e);return Le(n,{code:Ne.invalid_type,expected:ze.never,received:n.parsedType}),ut}}co.create=t=>new co({typeName:lt.ZodNever,...yt(t)});class Lx extends wt{_parse(e){if(this._getType(e)!==ze.undefined){const r=this._getOrReturnCtx(e);return Le(r,{code:Ne.invalid_type,expected:ze.void,received:r.parsedType}),ut}return Zr(e.data)}}Lx.create=t=>new Lx({typeName:lt.ZodVoid,...yt(t)});class ji extends wt{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==ze.array)return Le(n,{code:Ne.invalid_type,expected:ze.array,received:n.parsedType}),ut;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,c=n.data.length<i.exactLength.value;(o||c)&&(Le(n,{code:o?Ne.too_big:Ne.too_small,minimum:c?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(Le(n,{code:Ne.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(Le(n,{code:Ne.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,c)=>i.type._parseAsync(new ua(n,o,n.path,c)))).then(o=>Ar.mergeArray(r,o));const a=[...n.data].map((o,c)=>i.type._parseSync(new ua(n,o,n.path,c)));return Ar.mergeArray(r,a)}get element(){return this._def.type}min(e,n){return new ji({...this._def,minLength:{value:e,message:nt.toString(n)}})}max(e,n){return new ji({...this._def,maxLength:{value:e,message:nt.toString(n)}})}length(e,n){return new ji({...this._def,exactLength:{value:e,message:nt.toString(n)}})}nonempty(e){return this.min(1,e)}}ji.create=(t,e)=>new ji({type:t,minLength:null,maxLength:null,exactLength:null,typeName:lt.ZodArray,...yt(e)});function Lu(t){if(t instanceof bn){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=ia.create(Lu(r))}return new bn({...t._def,shape:()=>e})}else return t instanceof ji?new ji({...t._def,type:Lu(t.element)}):t instanceof ia?ia.create(Lu(t.unwrap())):t instanceof Cl?Cl.create(Lu(t.unwrap())):t instanceof da?da.create(t.items.map(e=>Lu(e))):t}class bn extends wt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Dt.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==ze.object){const h=this._getOrReturnCtx(e);return Le(h,{code:Ne.invalid_type,expected:ze.object,received:h.parsedType}),ut}const{status:r,ctx:i}=this._processInputParams(e),{shape:a,keys:o}=this._getCached(),c=[];if(!(this._def.catchall instanceof co&&this._def.unknownKeys==="strip"))for(const h in i.data)o.includes(h)||c.push(h);const u=[];for(const h of o){const f=a[h],p=i.data[h];u.push({key:{status:"valid",value:h},value:f._parse(new ua(i,p,i.path,h)),alwaysSet:h in i.data})}if(this._def.catchall instanceof co){const h=this._def.unknownKeys;if(h==="passthrough")for(const f of c)u.push({key:{status:"valid",value:f},value:{status:"valid",value:i.data[f]}});else if(h==="strict")c.length>0&&(Le(i,{code:Ne.unrecognized_keys,keys:c}),r.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const h=this._def.catchall;for(const f of c){const p=i.data[f];u.push({key:{status:"valid",value:f},value:h._parse(new ua(i,p,i.path,f)),alwaysSet:f in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const h=[];for(const f of u){const p=await f.key,v=await f.value;h.push({key:p,value:v,alwaysSet:f.alwaysSet})}return h}).then(h=>Ar.mergeObjectSync(r,h)):Ar.mergeObjectSync(r,u)}get shape(){return this._def.shape()}strict(e){return nt.errToObj,new bn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,a,o,c;const u=(o=(a=(i=this._def).errorMap)===null||a===void 0?void 0:a.call(i,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(c=nt.errToObj(e).message)!==null&&c!==void 0?c:u}:{message:u}}}:{}})}strip(){return new bn({...this._def,unknownKeys:"strip"})}passthrough(){return new bn({...this._def,unknownKeys:"passthrough"})}extend(e){return new bn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new bn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:lt.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new bn({...this._def,catchall:e})}pick(e){const n={};return Dt.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new bn({...this._def,shape:()=>n})}omit(e){const n={};return Dt.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new bn({...this._def,shape:()=>n})}deepPartial(){return Lu(this)}partial(e){const n={};return Dt.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}),new bn({...this._def,shape:()=>n})}required(e){const n={};return Dt.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof ia;)a=a._def.innerType;n[r]=a}}),new bn({...this._def,shape:()=>n})}keyof(){return c3(Dt.objectKeys(this.shape))}}bn.create=(t,e)=>new bn({shape:()=>t,unknownKeys:"strip",catchall:co.create(),typeName:lt.ZodObject,...yt(e)});bn.strictCreate=(t,e)=>new bn({shape:()=>t,unknownKeys:"strict",catchall:co.create(),typeName:lt.ZodObject,...yt(e)});bn.lazycreate=(t,e)=>new bn({shape:t,unknownKeys:"strip",catchall:co.create(),typeName:lt.ZodObject,...yt(e)});class Am extends wt{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(a){for(const c of a)if(c.result.status==="valid")return c.result;for(const c of a)if(c.result.status==="dirty")return n.common.issues.push(...c.ctx.common.issues),c.result;const o=a.map(c=>new Cs(c.ctx.common.issues));return Le(n,{code:Ne.invalid_union,unionErrors:o}),ut}if(n.common.async)return Promise.all(r.map(async a=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let a;const o=[];for(const u of r){const h={...n,common:{...n.common,issues:[]},parent:null},f=u._parseSync({data:n.data,path:n.path,parent:h});if(f.status==="valid")return f;f.status==="dirty"&&!a&&(a={result:f,ctx:h}),h.common.issues.length&&o.push(h.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const c=o.map(u=>new Cs(u));return Le(n,{code:Ne.invalid_union,unionErrors:c}),ut}}get options(){return this._def.options}}Am.create=(t,e)=>new Am({options:t,typeName:lt.ZodUnion,...yt(e)});const Ma=t=>t instanceof Dm?Ma(t.schema):t instanceof Pi?Ma(t.innerType()):t instanceof Om?[t.value]:t instanceof El?t.options:t instanceof Lm?Dt.objectValues(t.enum):t instanceof Vm?Ma(t._def.innerType):t instanceof Pm?[void 0]:t instanceof Im?[null]:t instanceof ia?[void 0,...Ma(t.unwrap())]:t instanceof Cl?[null,...Ma(t.unwrap())]:t instanceof rS||t instanceof zm?Ma(t.unwrap()):t instanceof Fm?Ma(t._def.innerType):[];class c0 extends wt{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ze.object)return Le(n,{code:Ne.invalid_type,expected:ze.object,received:n.parsedType}),ut;const r=this.discriminator,i=n.data[r],a=this.optionsMap.get(i);return a?n.common.async?a._parseAsync({data:n.data,path:n.path,parent:n}):a._parseSync({data:n.data,path:n.path,parent:n}):(Le(n,{code:Ne.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),ut)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const i=new Map;for(const a of n){const o=Ma(a.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const c of o){if(i.has(c))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(c)}`);i.set(c,a)}}return new c0({typeName:lt.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...yt(r)})}}function z1(t,e){const n=Ho(t),r=Ho(e);if(t===e)return{valid:!0,data:t};if(n===ze.object&&r===ze.object){const i=Dt.objectKeys(e),a=Dt.objectKeys(t).filter(c=>i.indexOf(c)!==-1),o={...t,...e};for(const c of a){const u=z1(t[c],e[c]);if(!u.valid)return{valid:!1};o[c]=u.data}return{valid:!0,data:o}}else if(n===ze.array&&r===ze.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let a=0;a<t.length;a++){const o=t[a],c=e[a],u=z1(o,c);if(!u.valid)return{valid:!1};i.push(u.data)}return{valid:!0,data:i}}else return n===ze.date&&r===ze.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Rm extends wt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(a,o)=>{if(V1(a)||V1(o))return ut;const c=z1(a.value,o.value);return c.valid?((F1(a)||F1(o))&&n.dirty(),{status:n.value,value:c.data}):(Le(r,{code:Ne.invalid_intersection_types}),ut)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,o])=>i(a,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Rm.create=(t,e,n)=>new Rm({left:t,right:e,typeName:lt.ZodIntersection,...yt(n)});class da extends wt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ze.array)return Le(r,{code:Ne.invalid_type,expected:ze.array,received:r.parsedType}),ut;if(r.data.length<this._def.items.length)return Le(r,{code:Ne.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ut;!this._def.rest&&r.data.length>this._def.items.length&&(Le(r,{code:Ne.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...r.data].map((o,c)=>{const u=this._def.items[c]||this._def.rest;return u?u._parse(new ua(r,o,r.path,c)):null}).filter(o=>!!o);return r.common.async?Promise.all(a).then(o=>Ar.mergeArray(n,o)):Ar.mergeArray(n,a)}get items(){return this._def.items}rest(e){return new da({...this._def,rest:e})}}da.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new da({items:t,typeName:lt.ZodTuple,rest:null,...yt(e)})};class Mm extends wt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ze.object)return Le(r,{code:Ne.invalid_type,expected:ze.object,received:r.parsedType}),ut;const i=[],a=this._def.keyType,o=this._def.valueType;for(const c in r.data)i.push({key:a._parse(new ua(r,c,r.path,c)),value:o._parse(new ua(r,r.data[c],r.path,c)),alwaysSet:c in r.data});return r.common.async?Ar.mergeObjectAsync(n,i):Ar.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof wt?new Mm({keyType:e,valueType:n,typeName:lt.ZodRecord,...yt(r)}):new Mm({keyType:gi.create(),valueType:e,typeName:lt.ZodRecord,...yt(n)})}}class Vx extends wt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ze.map)return Le(r,{code:Ne.invalid_type,expected:ze.map,received:r.parsedType}),ut;const i=this._def.keyType,a=this._def.valueType,o=[...r.data.entries()].map(([c,u],h)=>({key:i._parse(new ua(r,c,r.path,[h,"key"])),value:a._parse(new ua(r,u,r.path,[h,"value"]))}));if(r.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const u of o){const h=await u.key,f=await u.value;if(h.status==="aborted"||f.status==="aborted")return ut;(h.status==="dirty"||f.status==="dirty")&&n.dirty(),c.set(h.value,f.value)}return{status:n.value,value:c}})}else{const c=new Map;for(const u of o){const h=u.key,f=u.value;if(h.status==="aborted"||f.status==="aborted")return ut;(h.status==="dirty"||f.status==="dirty")&&n.dirty(),c.set(h.value,f.value)}return{status:n.value,value:c}}}}Vx.create=(t,e,n)=>new Vx({valueType:e,keyType:t,typeName:lt.ZodMap,...yt(n)});class Uc extends wt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ze.set)return Le(r,{code:Ne.invalid_type,expected:ze.set,received:r.parsedType}),ut;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(Le(r,{code:Ne.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(Le(r,{code:Ne.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const a=this._def.valueType;function o(u){const h=new Set;for(const f of u){if(f.status==="aborted")return ut;f.status==="dirty"&&n.dirty(),h.add(f.value)}return{status:n.value,value:h}}const c=[...r.data.values()].map((u,h)=>a._parse(new ua(r,u,r.path,h)));return r.common.async?Promise.all(c).then(u=>o(u)):o(c)}min(e,n){return new Uc({...this._def,minSize:{value:e,message:nt.toString(n)}})}max(e,n){return new Uc({...this._def,maxSize:{value:e,message:nt.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Uc.create=(t,e)=>new Uc({valueType:t,minSize:null,maxSize:null,typeName:lt.ZodSet,...yt(e)});class gd extends wt{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ze.function)return Le(n,{code:Ne.invalid_type,expected:ze.function,received:n.parsedType}),ut;function r(c,u){return Mx({data:c,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Rx(),Wd].filter(h=>!!h),issueData:{code:Ne.invalid_arguments,argumentsError:u}})}function i(c,u){return Mx({data:c,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Rx(),Wd].filter(h=>!!h),issueData:{code:Ne.invalid_return_type,returnTypeError:u}})}const a={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Hd){const c=this;return Zr(async function(...u){const h=new Cs([]),f=await c._def.args.parseAsync(u,a).catch(_=>{throw h.addIssue(r(u,_)),h}),p=await Reflect.apply(o,this,f);return await c._def.returns._def.type.parseAsync(p,a).catch(_=>{throw h.addIssue(i(p,_)),h})})}else{const c=this;return Zr(function(...u){const h=c._def.args.safeParse(u,a);if(!h.success)throw new Cs([r(u,h.error)]);const f=Reflect.apply(o,this,h.data),p=c._def.returns.safeParse(f,a);if(!p.success)throw new Cs([i(f,p.error)]);return p.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new gd({...this._def,args:da.create(e).rest(wc.create())})}returns(e){return new gd({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new gd({args:e||da.create([]).rest(wc.create()),returns:n||wc.create(),typeName:lt.ZodFunction,...yt(r)})}}class Dm extends wt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Dm.create=(t,e)=>new Dm({getter:t,typeName:lt.ZodLazy,...yt(e)});class Om extends wt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Le(n,{received:n.data,code:Ne.invalid_literal,expected:this._def.value}),ut}return{status:"valid",value:e.data}}get value(){return this._def.value}}Om.create=(t,e)=>new Om({value:t,typeName:lt.ZodLiteral,...yt(e)});function c3(t,e){return new El({values:t,typeName:lt.ZodEnum,...yt(e)})}class El extends wt{constructor(){super(...arguments),bf.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Le(n,{expected:Dt.joinValues(r),received:n.parsedType,code:Ne.invalid_type}),ut}if(Dx(this,bf)||i3(this,bf,new Set(this._def.values)),!Dx(this,bf).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return Le(n,{received:n.data,code:Ne.invalid_enum_value,options:r}),ut}return Zr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return El.create(e,{...this._def,...n})}exclude(e,n=this._def){return El.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}bf=new WeakMap;El.create=c3;class Lm extends wt{constructor(){super(...arguments),jf.set(this,void 0)}_parse(e){const n=Dt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ze.string&&r.parsedType!==ze.number){const i=Dt.objectValues(n);return Le(r,{expected:Dt.joinValues(i),received:r.parsedType,code:Ne.invalid_type}),ut}if(Dx(this,jf)||i3(this,jf,new Set(Dt.getValidEnumValues(this._def.values))),!Dx(this,jf).has(e.data)){const i=Dt.objectValues(n);return Le(r,{received:r.data,code:Ne.invalid_enum_value,options:i}),ut}return Zr(e.data)}get enum(){return this._def.values}}jf=new WeakMap;Lm.create=(t,e)=>new Lm({values:t,typeName:lt.ZodNativeEnum,...yt(e)});class Hd extends wt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ze.promise&&n.common.async===!1)return Le(n,{code:Ne.invalid_type,expected:ze.promise,received:n.parsedType}),ut;const r=n.parsedType===ze.promise?n.data:Promise.resolve(n.data);return Zr(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Hd.create=(t,e)=>new Hd({type:t,typeName:lt.ZodPromise,...yt(e)});class Pi extends wt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===lt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,a={addIssue:o=>{Le(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const o=i.transform(r.data,a);if(r.common.async)return Promise.resolve(o).then(async c=>{if(n.value==="aborted")return ut;const u=await this._def.schema._parseAsync({data:c,path:r.path,parent:r});return u.status==="aborted"?ut:u.status==="dirty"||n.value==="dirty"?Ju(u.value):u});{if(n.value==="aborted")return ut;const c=this._def.schema._parseSync({data:o,path:r.path,parent:r});return c.status==="aborted"?ut:c.status==="dirty"||n.value==="dirty"?Ju(c.value):c}}if(i.type==="refinement"){const o=c=>{const u=i.refinement(c,a);if(r.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(r.common.async===!1){const c=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return c.status==="aborted"?ut:(c.status==="dirty"&&n.dirty(),o(c.value),{status:n.value,value:c.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(c=>c.status==="aborted"?ut:(c.status==="dirty"&&n.dirty(),o(c.value).then(()=>({status:n.value,value:c.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Cm(o))return o;const c=i.transform(o.value,a);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:c}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Cm(o)?Promise.resolve(i.transform(o.value,a)).then(c=>({status:n.value,value:c})):o);Dt.assertNever(i)}}Pi.create=(t,e,n)=>new Pi({schema:t,typeName:lt.ZodEffects,effect:e,...yt(n)});Pi.createWithPreprocess=(t,e,n)=>new Pi({schema:e,effect:{type:"preprocess",transform:t},typeName:lt.ZodEffects,...yt(n)});class ia extends wt{_parse(e){return this._getType(e)===ze.undefined?Zr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ia.create=(t,e)=>new ia({innerType:t,typeName:lt.ZodOptional,...yt(e)});class Cl extends wt{_parse(e){return this._getType(e)===ze.null?Zr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Cl.create=(t,e)=>new Cl({innerType:t,typeName:lt.ZodNullable,...yt(e)});class Vm extends wt{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===ze.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Vm.create=(t,e)=>new Vm({innerType:t,typeName:lt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...yt(e)});class Fm extends wt{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Tm(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Cs(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Cs(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Fm.create=(t,e)=>new Fm({innerType:t,typeName:lt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...yt(e)});class Fx extends wt{_parse(e){if(this._getType(e)!==ze.nan){const r=this._getOrReturnCtx(e);return Le(r,{code:Ne.invalid_type,expected:ze.nan,received:r.parsedType}),ut}return{status:"valid",value:e.data}}}Fx.create=t=>new Fx({typeName:lt.ZodNaN,...yt(t)});const Zie=Symbol("zod_brand");class rS extends wt{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Tp extends wt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?ut:a.status==="dirty"?(n.dirty(),Ju(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?ut:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new Tp({in:e,out:n,typeName:lt.ZodPipeline})}}class zm extends wt{_parse(e){const n=this._def.innerType._parse(e),r=i=>(Cm(i)&&(i.value=Object.freeze(i.value)),i);return Tm(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}zm.create=(t,e)=>new zm({innerType:t,typeName:lt.ZodReadonly,...yt(e)});function u3(t,e={},n){return t?qd.create().superRefine((r,i)=>{var a,o;if(!t(r)){const c=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,u=(o=(a=c.fatal)!==null&&a!==void 0?a:n)!==null&&o!==void 0?o:!0,h=typeof c=="string"?{message:c}:c;i.addIssue({code:"custom",...h,fatal:u})}}):qd.create()}const Kie={object:bn.lazycreate};var lt;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(lt||(lt={}));const Yie=(t,e={message:`Input not instance of ${t.name}`})=>u3(n=>n instanceof t,e),d3=gi.create,h3=Nl.create,Qie=Fx.create,Xie=Sl.create,f3=km.create,Jie=zc.create,eae=Ox.create,tae=Pm.create,nae=Im.create,rae=qd.create,sae=wc.create,iae=co.create,aae=Lx.create,oae=ji.create,lae=bn.create,cae=bn.strictCreate,uae=Am.create,dae=c0.create,hae=Rm.create,fae=da.create,mae=Mm.create,pae=Vx.create,gae=Uc.create,vae=gd.create,xae=Dm.create,yae=Om.create,_ae=El.create,wae=Lm.create,bae=Hd.create,YT=Pi.create,jae=ia.create,Nae=Cl.create,Sae=Pi.createWithPreprocess,Eae=Tp.create,Cae=()=>d3().optional(),Tae=()=>h3().optional(),kae=()=>f3().optional(),Pae={string:t=>gi.create({...t,coerce:!0}),number:t=>Nl.create({...t,coerce:!0}),boolean:t=>km.create({...t,coerce:!0}),bigint:t=>Sl.create({...t,coerce:!0}),date:t=>zc.create({...t,coerce:!0})},Iae=ut;var st=Object.freeze({__proto__:null,defaultErrorMap:Wd,setErrorMap:Iie,getErrorMap:Rx,makeIssue:Mx,EMPTY_PATH:Aie,addIssueToContext:Le,ParseStatus:Ar,INVALID:ut,DIRTY:Ju,OK:Zr,isAborted:V1,isDirty:F1,isValid:Cm,isAsync:Tm,get util(){return Dt},get objectUtil(){return L1},ZodParsedType:ze,getParsedType:Ho,ZodType:wt,datetimeRegex:l3,ZodString:gi,ZodNumber:Nl,ZodBigInt:Sl,ZodBoolean:km,ZodDate:zc,ZodSymbol:Ox,ZodUndefined:Pm,ZodNull:Im,ZodAny:qd,ZodUnknown:wc,ZodNever:co,ZodVoid:Lx,ZodArray:ji,ZodObject:bn,ZodUnion:Am,ZodDiscriminatedUnion:c0,ZodIntersection:Rm,ZodTuple:da,ZodRecord:Mm,ZodMap:Vx,ZodSet:Uc,ZodFunction:gd,ZodLazy:Dm,ZodLiteral:Om,ZodEnum:El,ZodNativeEnum:Lm,ZodPromise:Hd,ZodEffects:Pi,ZodTransformer:Pi,ZodOptional:ia,ZodNullable:Cl,ZodDefault:Vm,ZodCatch:Fm,ZodNaN:Fx,BRAND:Zie,ZodBranded:rS,ZodPipeline:Tp,ZodReadonly:zm,custom:u3,Schema:wt,ZodSchema:wt,late:Kie,get ZodFirstPartyTypeKind(){return lt},coerce:Pae,any:rae,array:oae,bigint:Xie,boolean:f3,date:Jie,discriminatedUnion:dae,effect:YT,enum:_ae,function:vae,instanceof:Yie,intersection:hae,lazy:xae,literal:yae,map:pae,nan:Qie,nativeEnum:wae,never:iae,null:nae,nullable:Nae,number:h3,object:lae,oboolean:kae,onumber:Tae,optional:jae,ostring:Cae,pipeline:Eae,preprocess:Sae,promise:bae,record:mae,set:gae,strictObject:cae,string:d3,symbol:eae,transformer:YT,tuple:fae,undefined:tae,union:uae,unknown:sae,void:aae,NEVER:Iae,ZodIssueCode:Ne,quotelessJson:Pie,ZodError:Cs}),sS="Checkbox",[Aae,vce]=As(sS),[Rae,Mae]=Aae(sS),m3=x.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:i,defaultChecked:a,required:o,disabled:c,value:u="on",onCheckedChange:h,form:f,...p}=t,[v,_]=x.useState(null),b=vt(e,R=>_(R)),N=x.useRef(!1),S=v?f||!!v.closest("form"):!0,[w=!1,y]=ks({prop:i,defaultProp:a,onChange:h}),C=x.useRef(w);return x.useEffect(()=>{const R=v==null?void 0:v.form;if(R){const M=()=>y(C.current);return R.addEventListener("reset",M),()=>R.removeEventListener("reset",M)}},[v,y]),s.jsxs(Rae,{scope:n,state:w,disabled:c,children:[s.jsx(Ge.button,{type:"button",role:"checkbox","aria-checked":cl(w)?"mixed":w,"aria-required":o,"data-state":v3(w),"data-disabled":c?"":void 0,disabled:c,value:u,...p,ref:b,onKeyDown:Ie(t.onKeyDown,R=>{R.key==="Enter"&&R.preventDefault()}),onClick:Ie(t.onClick,R=>{y(M=>cl(M)?!0:!M),S&&(N.current=R.isPropagationStopped(),N.current||R.stopPropagation())})}),S&&s.jsx(Dae,{control:v,bubbles:!N.current,name:r,value:u,checked:w,required:o,disabled:c,form:f,style:{transform:"translateX(-100%)"},defaultChecked:cl(a)?!1:a})]})});m3.displayName=sS;var p3="CheckboxIndicator",g3=x.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...i}=t,a=Mae(p3,n);return s.jsx(wr,{present:r||cl(a.state)||a.state===!0,children:s.jsx(Ge.span,{"data-state":v3(a.state),"data-disabled":a.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...t.style}})})});g3.displayName=p3;var Dae=t=>{const{control:e,checked:n,bubbles:r=!0,defaultChecked:i,...a}=t,o=x.useRef(null),c=e0(n),u=By(e);x.useEffect(()=>{const f=o.current,p=window.HTMLInputElement.prototype,_=Object.getOwnPropertyDescriptor(p,"checked").set;if(c!==n&&_){const b=new Event("click",{bubbles:r});f.indeterminate=cl(n),_.call(f,cl(n)?!1:n),f.dispatchEvent(b)}},[c,n,r]);const h=x.useRef(cl(n)?!1:n);return s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i??h.current,...a,tabIndex:-1,ref:o,style:{...t.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function cl(t){return t==="indeterminate"}function v3(t){return cl(t)?"indeterminate":t?"checked":"unchecked"}var x3=m3,Oae=g3;const zx=x.forwardRef(({className:t,...e},n)=>s.jsx(x3,{ref:n,className:Je("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:s.jsx(Oae,{className:Je("flex items-center justify-center text-current"),children:s.jsx(TN,{className:"h-4 w-4"})})}));zx.displayName=x3.displayName;var y3=["PageUp","PageDown"],_3=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],w3={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},gh="Slider",[U1,Lae,Vae]=fp(gh),[b3,xce]=As(gh,[Vae]),[Fae,u0]=b3(gh),j3=x.forwardRef((t,e)=>{const{name:n,min:r=0,max:i=100,step:a=1,orientation:o="horizontal",disabled:c=!1,minStepsBetweenThumbs:u=0,defaultValue:h=[r],value:f,onValueChange:p=()=>{},onValueCommit:v=()=>{},inverted:_=!1,form:b,...N}=t,S=x.useRef(new Set),w=x.useRef(0),C=o==="horizontal"?zae:Uae,[R=[],M]=ks({prop:f,defaultProp:h,onChange:V=>{var P;(P=[...S.current][w.current])==null||P.focus(),p(V)}}),B=x.useRef(R);function O(V){const k=Hae(R,V);I(V,k)}function D(V){I(V,w.current)}function F(){const V=B.current[w.current];R[w.current]!==V&&v(R)}function I(V,k,{commit:P}={commit:!1}){const q=Yae(a),te=Qae(Math.round((V-r)/a)*a+r,q),re=Em(te,[r,i]);M((K=[])=>{const U=Wae(K,re,k);if(Kae(U,u*a)){w.current=U.indexOf(re);const W=String(U)!==String(K);return W&&P&&v(U),W?U:K}else return K})}return s.jsx(Fae,{scope:t.__scopeSlider,name:n,disabled:c,min:r,max:i,valueIndexToChangeRef:w,thumbs:S.current,values:R,orientation:o,form:b,children:s.jsx(U1.Provider,{scope:t.__scopeSlider,children:s.jsx(U1.Slot,{scope:t.__scopeSlider,children:s.jsx(C,{"aria-disabled":c,"data-disabled":c?"":void 0,...N,ref:e,onPointerDown:Ie(N.onPointerDown,()=>{c||(B.current=R)}),min:r,max:i,inverted:_,onSlideStart:c?void 0:O,onSlideMove:c?void 0:D,onSlideEnd:c?void 0:F,onHomeKeyDown:()=>!c&&I(r,0,{commit:!0}),onEndKeyDown:()=>!c&&I(i,R.length-1,{commit:!0}),onStepKeyDown:({event:V,direction:k})=>{if(!c){const te=y3.includes(V.key)||V.shiftKey&&_3.includes(V.key)?10:1,re=w.current,K=R[re],U=a*te*k;I(K+U,re,{commit:!0})}}})})})})});j3.displayName=gh;var[N3,S3]=b3(gh,{startEdge:"left",endEdge:"right",size:"width",direction:1}),zae=x.forwardRef((t,e)=>{const{min:n,max:r,dir:i,inverted:a,onSlideStart:o,onSlideMove:c,onSlideEnd:u,onStepKeyDown:h,...f}=t,[p,v]=x.useState(null),_=vt(e,C=>v(C)),b=x.useRef(),N=Qc(i),S=N==="ltr",w=S&&!a||!S&&a;function y(C){const R=b.current||p.getBoundingClientRect(),M=[0,R.width],O=iS(M,w?[n,r]:[r,n]);return b.current=R,O(C-R.left)}return s.jsx(N3,{scope:t.__scopeSlider,startEdge:w?"left":"right",endEdge:w?"right":"left",direction:w?1:-1,size:"width",children:s.jsx(E3,{dir:N,"data-orientation":"horizontal",...f,ref:_,style:{...f.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:C=>{const R=y(C.clientX);o==null||o(R)},onSlideMove:C=>{const R=y(C.clientX);c==null||c(R)},onSlideEnd:()=>{b.current=void 0,u==null||u()},onStepKeyDown:C=>{const M=w3[w?"from-left":"from-right"].includes(C.key);h==null||h({event:C,direction:M?-1:1})}})})}),Uae=x.forwardRef((t,e)=>{const{min:n,max:r,inverted:i,onSlideStart:a,onSlideMove:o,onSlideEnd:c,onStepKeyDown:u,...h}=t,f=x.useRef(null),p=vt(e,f),v=x.useRef(),_=!i;function b(N){const S=v.current||f.current.getBoundingClientRect(),w=[0,S.height],C=iS(w,_?[r,n]:[n,r]);return v.current=S,C(N-S.top)}return s.jsx(N3,{scope:t.__scopeSlider,startEdge:_?"bottom":"top",endEdge:_?"top":"bottom",size:"height",direction:_?1:-1,children:s.jsx(E3,{"data-orientation":"vertical",...h,ref:p,style:{...h.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:N=>{const S=b(N.clientY);a==null||a(S)},onSlideMove:N=>{const S=b(N.clientY);o==null||o(S)},onSlideEnd:()=>{v.current=void 0,c==null||c()},onStepKeyDown:N=>{const w=w3[_?"from-bottom":"from-top"].includes(N.key);u==null||u({event:N,direction:w?-1:1})}})})}),E3=x.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:i,onSlideEnd:a,onHomeKeyDown:o,onEndKeyDown:c,onStepKeyDown:u,...h}=t,f=u0(gh,n);return s.jsx(Ge.span,{...h,ref:e,onKeyDown:Ie(t.onKeyDown,p=>{p.key==="Home"?(o(p),p.preventDefault()):p.key==="End"?(c(p),p.preventDefault()):y3.concat(_3).includes(p.key)&&(u(p),p.preventDefault())}),onPointerDown:Ie(t.onPointerDown,p=>{const v=p.target;v.setPointerCapture(p.pointerId),p.preventDefault(),f.thumbs.has(v)?v.focus():r(p)}),onPointerMove:Ie(t.onPointerMove,p=>{p.target.hasPointerCapture(p.pointerId)&&i(p)}),onPointerUp:Ie(t.onPointerUp,p=>{const v=p.target;v.hasPointerCapture(p.pointerId)&&(v.releasePointerCapture(p.pointerId),a(p))})})}),C3="SliderTrack",T3=x.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=u0(C3,n);return s.jsx(Ge.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...r,ref:e})});T3.displayName=C3;var $1="SliderRange",k3=x.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=u0($1,n),a=S3($1,n),o=x.useRef(null),c=vt(e,o),u=i.values.length,h=i.values.map(v=>I3(v,i.min,i.max)),f=u>1?Math.min(...h):0,p=100-Math.max(...h);return s.jsx(Ge.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...r,ref:c,style:{...t.style,[a.startEdge]:f+"%",[a.endEdge]:p+"%"}})});k3.displayName=$1;var B1="SliderThumb",P3=x.forwardRef((t,e)=>{const n=Lae(t.__scopeSlider),[r,i]=x.useState(null),a=vt(e,c=>i(c)),o=x.useMemo(()=>r?n().findIndex(c=>c.ref.current===r):-1,[n,r]);return s.jsx($ae,{...t,ref:a,index:o})}),$ae=x.forwardRef((t,e)=>{const{__scopeSlider:n,index:r,name:i,...a}=t,o=u0(B1,n),c=S3(B1,n),[u,h]=x.useState(null),f=vt(e,y=>h(y)),p=u?o.form||!!u.closest("form"):!0,v=By(u),_=o.values[r],b=_===void 0?0:I3(_,o.min,o.max),N=qae(r,o.values.length),S=v==null?void 0:v[c.size],w=S?Gae(S,b,c.direction):0;return x.useEffect(()=>{if(u)return o.thumbs.add(u),()=>{o.thumbs.delete(u)}},[u,o.thumbs]),s.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:`calc(${b}% + ${w}px)`},children:[s.jsx(U1.ItemSlot,{scope:t.__scopeSlider,children:s.jsx(Ge.span,{role:"slider","aria-label":t["aria-label"]||N,"aria-valuemin":o.min,"aria-valuenow":_,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...a,ref:f,style:_===void 0?{display:"none"}:t.style,onFocus:Ie(t.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),p&&s.jsx(Bae,{name:i??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:_},r)]})});P3.displayName=B1;var Bae=t=>{const{value:e,...n}=t,r=x.useRef(null),i=e0(e);return x.useEffect(()=>{const a=r.current,o=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(o,"value").set;if(i!==e&&u){const h=new Event("input",{bubbles:!0});u.call(a,e),a.dispatchEvent(h)}},[i,e]),s.jsx("input",{style:{display:"none"},...n,ref:r,defaultValue:e})};function Wae(t=[],e,n){const r=[...t];return r[n]=e,r.sort((i,a)=>i-a)}function I3(t,e,n){const a=100/(n-e)*(t-e);return Em(a,[0,100])}function qae(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function Hae(t,e){if(t.length===1)return 0;const n=t.map(i=>Math.abs(i-e)),r=Math.min(...n);return n.indexOf(r)}function Gae(t,e,n){const r=t/2,a=iS([0,50],[0,r]);return(r-a(e)*n)*n}function Zae(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function Kae(t,e){if(e>0){const n=Zae(t);return Math.min(...n)>=e}return!0}function iS(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function Yae(t){return(String(t).split(".")[1]||"").length}function Qae(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var A3=j3,Xae=T3,Jae=k3,eoe=P3;const R3=x.forwardRef(({className:t,...e},n)=>s.jsxs(A3,{ref:n,className:Je("relative flex w-full touch-none select-none items-center",t),...e,children:[s.jsx(Xae,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:s.jsx(Jae,{className:"absolute h-full bg-primary"})}),s.jsx(eoe,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));R3.displayName=A3.displayName;const kp=st.object({title:st.string().min(5,"Le titre doit contenir au moins 5 caractères").max(80,"Le titre ne peut pas dépasser 80 caractères"),description:st.string().min(20,"La description doit contenir au moins 20 caractères").max(1e3,"La description ne peut pas dépasser 1000 caractères"),tags:st.array(st.string()).min(1,"Ajoutez au moins un tag").max(5,"Maximum 5 tags"),meetingLocation:st.string().min(1,"Veuillez spécifier un lieu de rencontre")}),toe=kp.extend({price:st.string().min(1,"Le prix est obligatoire").transform(t=>{const e=parseFloat(t.replace(",","."));if(isNaN(e)||e<1)throw new Error("Le prix doit être d'au moins 1€");if(e>1e4)throw new Error("Le prix ne peut pas dépasser 10 000€");return e}),condition:st.enum(["new","like-new","good","fair"]),paymentMethods:st.array(st.string()).min(1,"Sélectionnez au moins un mode de paiement")}),noe=kp.extend({donationReason:st.string().min(10,"Expliquez pourquoi vous donnez cet objet").max(140,"Maximum 140 caractères")}),roe=kp.extend({desiredItems:st.array(st.string()).min(1,"Ajoutez au moins un objet recherché"),estimatedValue:st.string().min(1,"La valeur estimée est obligatoire").transform(t=>{const e=parseFloat(t.replace(",","."));if(isNaN(e)||e<1)throw new Error("La valeur estimée doit être d'au moins 1€");return e})}),soe=kp.extend({hourlyRate:st.string().min(1,"Le tarif horaire est obligatoire").transform(t=>{const e=parseFloat(t.replace(",","."));if(isNaN(e)||e<5)throw new Error("Le tarif horaire doit être d'au moins 5€/h");if(e>200)throw new Error("Le tarif ne peut pas dépasser 200€/h");return e}),duration:st.number().min(1,"La durée doit être d'au moins 1 heure").max(720,"Maximum 720 heures"),skills:st.string().min(20,"Décrivez vos compétences en détail").max(500,"Maximum 500 caractères"),availability:st.string().optional()}),ioe=[{value:"new",label:"Neuf",description:"Jamais utilisé, dans son emballage"},{value:"like-new",label:"Très bon",description:"Utilisé très peu, aucun défaut visible"},{value:"good",label:"Bon",description:"Utilisé mais bien entretenu"},{value:"fair",label:"Correct",description:"Signes d'usure mais fonctionnel"}],QT=[{value:"cash",label:"Espèces",icon:_4},{value:"transfer",label:"Virement bancaire",icon:zn},{value:"lydia",label:"Lydia",icon:Yc},{value:"paypal",label:"PayPal",icon:zn}];delete ph.Icon.Default.prototype._getIconUrl;ph.Icon.Default.mergeOptions({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"});const aoe=()=>{var ne,ve,_e,ye,Se,ge,Ae,Ke;const{currentUser:t,userProfile:e}=Tn(),{createListing:n}=wp(),r=ar(),[i]=Hb(),[a,o]=x.useState(()=>i.get("type")||"sell"),[c,u]=x.useState([]),[h,f]=x.useState(!1),[p,v]=x.useState(""),[_,b]=x.useState([]),[N,S]=x.useState(!1),[w,y]=x.useState([""]),[C,R]=x.useState(""),[M,B]=x.useState([]),[O,D]=x.useState([1]),[F,I]=x.useState(null),[V,k]=x.useState(!1),q=yc({resolver:_c((()=>{switch(a){case"sell":return toe;case"gift":return noe;case"swap":return roe;case"service":return soe;default:return kp}})()),defaultValues:{title:"",description:"",price:"",condition:"good",paymentMethods:[],donationReason:"",desiredItems:[],estimatedValue:"",hourlyRate:"",duration:1,skills:"",availability:"",tags:[],meetingLocation:""},mode:"onChange"});x.useEffect(()=>{q.reset({title:"",description:"",price:"",condition:"good",paymentMethods:[],donationReason:"",desiredItems:[],estimatedValue:"",hourlyRate:"",duration:1,skills:"",availability:"",tags:[],meetingLocation:""}),b([]),y([""]),B([]),D([1]),u([])},[a,q]);const te=async ce=>{if(!t)throw new Error("User not authenticated");const Ve=Date.now(),G=`listings/${t.uid}/${Ve}_${ce.name}`,J=nN(sN,G),ie=await eN(J,ce);return await tN(ie.ref)},re=async ce=>{const Ve=ce.target.files;if(!(!Ve||Ve.length===0)){f(!0);try{const J=Array.from(Ve).slice(0,10-c.length).filter(Ce=>Ce.size<=15728640).map(Ce=>te(Ce)),ie=await Promise.all(J);u(Ce=>[...Ce,...ie])}catch(G){console.error("Error uploading images:",G)}finally{f(!1)}}},K=ce=>{u(Ve=>Ve.filter((G,J)=>J!==ce))},U=()=>{if(p.trim()&&!_.includes(p.trim())&&_.length<5){const ce=[..._,p.trim()];b(ce),q.setValue("tags",ce),v("")}},W=ce=>{const Ve=_.filter(G=>G!==ce);b(Ve),q.setValue("tags",Ve)},H=()=>{if(C.trim()){const ce=[...w.filter(Ve=>Ve.trim()),C.trim()];y(ce),q.setValue("desiredItems",ce),R("")}},Q=ce=>{const Ve=w.filter((G,J)=>J!==ce);y(Ve),q.setValue("desiredItems",Ve)},fe=(ce,Ve)=>{const G=Ve?[...M,ce]:M.filter(J=>J!==ce);B(G),q.setValue("paymentMethods",G)};async function ke(ce){const G=await(await fetch(`https://nominatim.openstreetmap.org/search?format=jsonv2&q=${encodeURIComponent(ce)}`)).json();return G&&G[0]?[parseFloat(G[0].lat),parseFloat(G[0].lon)]:null}x.useEffect(()=>{const ce=q.watch("meetingLocation");ce&&ce.length>5&&ke(ce).then(Ve=>{Ve&&I(Ve)})},[q.watch("meetingLocation")]);const Ze=async ce=>{if(!(!t||!e)){S(!0);try{const Ve={title:ce.title,description:ce.description,currency:"EUR",category:"electronics",images:c,tags:ce.tags,location:{city:"Paris",state:"Île-de-France",country:"France",campus:e.campus||void 0,university:e.university||void 0,coordinates:void 0},sellerId:t.uid,sellerName:e.displayName,sellerAvatar:e.photoURL,sellerUniversity:e.university,sellerVerified:e.isVerified,status:"active",views:0,likes:0,saves:0,reportCount:0,moderationStatus:"approved"};let G;switch(a){case"sell":G={...Ve,price:ce.price,condition:ce.condition,transactionType:"sale",description:`${ce.description}

Modes de paiement acceptés: ${M.map(ie=>{var Ce;return(Ce=QT.find(Te=>Te.value===ie))==null?void 0:Ce.label}).join(", ")}`};break;case"gift":G={...Ve,price:0,condition:"good",transactionType:"donation",description:`${ce.description}

Raison du don: ${ce.donationReason}`};break;case"swap":G={...Ve,price:ce.estimatedValue,condition:"good",transactionType:"exchange",exchangeFor:w.filter(ie=>ie.trim()).join(", "),description:`${ce.description}

Recherche en échange: ${w.filter(ie=>ie.trim()).join(", ")}
Valeur estimée: ${ce.estimatedValue}€`};break;case"service":G={...Ve,price:ce.hourlyRate,condition:"new",transactionType:"service",description:`${ce.description}

Compétences: ${ce.skills}
Tarif: ${ce.hourlyRate}€/h
Durée prévue: ${O[0]}h${ce.availability?`
Disponibilités: ${ce.availability}`:""}`};break;default:throw new Error("Type de transaction non supporté")}console.log("Submitting listing data:",G);const J=await n(G);r(`/listing/${J}`)}catch(Ve){console.error("Error creating listing:",Ve)}finally{S(!1)}}},Ye=()=>{const ce=q.formState.errors,Ve=q.watch("title")&&q.watch("description")&&q.watch("meetingLocation")&&_.length>0;switch(a){case"sell":return Ve&&q.watch("price")&&M.length>0&&!ce.title&&!ce.description&&!ce.price;case"gift":return Ve&&q.watch("donationReason")&&!ce.title&&!ce.description&&!ce.donationReason;case"swap":return Ve&&w.some(G=>G.trim())&&q.watch("estimatedValue")&&!ce.title&&!ce.description&&!ce.estimatedValue;case"service":return Ve&&q.watch("hourlyRate")&&q.watch("skills")&&!ce.title&&!ce.description&&!ce.hourlyRate&&!ce.skills;default:return!1}},se=()=>{if(!navigator.geolocation){alert("La géolocalisation n'est pas supportée par ce navigateur.");return}k(!0),navigator.geolocation.getCurrentPosition(async ce=>{const{latitude:Ve,longitude:G}=ce.coords;I([Ve,G]);const ie=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${Ve}&lon=${G}`)).json();ie&&ie.display_name&&q.setValue("meetingLocation",ie.display_name,{shouldValidate:!0}),k(!1)},()=>{alert("Impossible d'accéder à la position."),k(!1)})};function de(){return KN({click:async ce=>{I([ce.latlng.lat,ce.latlng.lng]),k(!0);const G=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${ce.latlng.lat}&lon=${ce.latlng.lng}`)).json();G&&G.display_name&&q.setValue("meetingLocation",G.display_name,{shouldValidate:!0}),k(!1)}}),F?s.jsx(QN,{position:F}):null}return s.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-2 text-foreground",children:"Créer une annonce"}),s.jsx("p",{className:"text-muted-foreground",children:"Partagez vos objets, services ou recherches avec la communauté étudiante vérifiée"})]}),s.jsxs("form",{onSubmit:q.handleSubmit(Ze),className:"space-y-8",children:[s.jsxs(le,{children:[s.jsxs(We,{children:[s.jsxs(He,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(u1,{className:"w-5 h-5"}),"Type d'annonce"]}),s.jsx(Pt,{children:"Le formulaire s'adapte automatiquement selon votre choix"})]}),s.jsx(ue,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(le,{className:`cursor-pointer transition-all ${a==="sell"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("sell"),children:s.jsxs(ue,{className:"p-4 text-center",children:[s.jsx(mx,{className:"w-8 h-8 mx-auto mb-2 text-blue-600"}),s.jsx("h3",{className:"font-semibold text-foreground",children:"Vendre"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Vendre un objet"})]})}),s.jsx(le,{className:`cursor-pointer transition-all ${a==="gift"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("gift"),children:s.jsxs(ue,{className:"p-4 text-center",children:[s.jsx(Dd,{className:"w-8 h-8 mx-auto mb-2 text-green-600"}),s.jsx("h3",{className:"font-semibold text-foreground",children:"Donner"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Don gratuit"})]})}),s.jsx(le,{className:`cursor-pointer transition-all ${a==="swap"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("swap"),children:s.jsxs(ue,{className:"p-4 text-center",children:[s.jsx(no,{className:"w-8 h-8 mx-auto mb-2 text-purple-600"}),s.jsx("h3",{className:"font-semibold text-foreground",children:"Troc"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Échanger des objets"})]})}),s.jsx(le,{className:`cursor-pointer transition-all ${a==="service"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("service"),children:s.jsxs(ue,{className:"p-4 text-center",children:[s.jsx($n,{className:"w-8 h-8 mx-auto mb-2 text-orange-600"}),s.jsx("h3",{className:"font-semibold text-foreground",children:"Service"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Proposer un service"})]})})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs(le,{children:[s.jsx(We,{children:s.jsx(He,{className:"text-foreground",children:"Informations principales"})}),s.jsxs(ue,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:"title",className:"text-foreground",children:"Titre * (max 80 caractères)"}),s.jsx(qe,{id:"title",placeholder:a==="sell"?"Ex: MacBook Pro 13' M1 - Parfait état":a==="gift"?"Ex: Vélo de ville - Don gratuit":a==="swap"?"Ex: Livre de maths contre livre de physique":"Ex: Cours particuliers de mathématiques",...q.register("title"),className:"mt-1",maxLength:80}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[s.jsx("span",{className:"text-destructive",children:(ne=q.formState.errors.title)==null?void 0:ne.message}),s.jsxs("span",{children:[((ve=q.watch("title"))==null?void 0:ve.length)||0,"/80"]})]})]}),s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:"description",className:"text-foreground",children:"Description détaillée * (max 1000 caractères)"}),s.jsx(Es,{id:"description",placeholder:a==="sell"?"Décrivez l'état, l'utilisation, la raison de la vente...":a==="gift"?"Décrivez l'objet et pourquoi vous le donnez...":a==="swap"?"Décrivez ce que vous proposez et ce que vous recherchez...":"Décrivez vos compétences, votre expérience, votre méthode...",rows:6,...q.register("description"),className:"mt-1",maxLength:1e3}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[s.jsx("span",{className:"text-destructive",children:(_e=q.formState.errors.description)==null?void 0:_e.message}),s.jsxs("span",{children:[((ye=q.watch("description"))==null?void 0:ye.length)||0,"/1000"]})]})]})]})]}),a==="sell"&&s.jsxs(le,{children:[s.jsx(We,{children:s.jsxs(He,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(mx,{className:"w-5 h-5 text-blue-600"}),"Informations de vente"]})}),s.jsxs(ue,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:"price",className:"text-foreground",children:"Prix (€) *"}),s.jsx(qe,{id:"price",type:"text",placeholder:"0,00",...q.register("price"),className:"mt-1"}),q.formState.errors.price&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:q.formState.errors.price.message})]}),s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:"condition",className:"text-foreground",children:"État du produit *"}),s.jsxs(Jt,{onValueChange:ce=>q.setValue("condition",ce),children:[s.jsx(qt,{className:"mt-1",children:s.jsx(en,{placeholder:"Sélectionnez un état"})}),s.jsx(Ht,{children:ioe.map(ce=>s.jsx($e,{value:ce.value,children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-foreground",children:ce.label}),s.jsx("div",{className:"text-xs text-muted-foreground",children:ce.description})]})},ce.value))})]}),q.formState.errors.condition&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:q.formState.errors.condition.message})]})]}),s.jsxs("div",{children:[s.jsx(Ee,{className:"text-foreground",children:"Modes de paiement acceptés *"}),s.jsx("div",{className:"grid grid-cols-2 gap-3 mt-2",children:QT.map(ce=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(zx,{id:ce.value,checked:M.includes(ce.value),onCheckedChange:Ve=>fe(ce.value,Ve)}),s.jsxs(Ee,{htmlFor:ce.value,className:"flex items-center gap-2 cursor-pointer text-foreground",children:[s.jsx(ce.icon,{className:"w-4 h-4"}),ce.label]})]},ce.value))}),M.length===0&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:"Sélectionnez au moins un mode de paiement"})]})]})]}),a==="gift"&&s.jsxs(le,{children:[s.jsx(We,{children:s.jsxs(He,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(Dd,{className:"w-5 h-5 text-green-600"}),"Informations du don"]})}),s.jsx(ue,{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:"donationReason",className:"text-foreground",children:"Motif du don * (max 140 caractères)"}),s.jsx(Es,{id:"donationReason",placeholder:"Ex: Je déménage, plus besoin, fin d'études...",rows:3,...q.register("donationReason"),className:"mt-1",maxLength:140}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[s.jsx("span",{className:"text-destructive",children:(Se=q.formState.errors.donationReason)==null?void 0:Se.message}),s.jsxs("span",{children:[((ge=q.watch("donationReason"))==null?void 0:ge.length)||0,"/140"]})]})]})})]}),a==="swap"&&s.jsxs(le,{children:[s.jsx(We,{children:s.jsxs(He,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(no,{className:"w-5 h-5 text-purple-600"}),"Informations d'échange"]})}),s.jsxs(ue,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ee,{className:"text-foreground",children:"Objets recherchés * (minimum 1)"}),s.jsxs("div",{className:"space-y-2 mt-2",children:[w.filter(ce=>ce.trim()).map((ce,Ve)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(qe,{value:ce,readOnly:!0,className:"flex-1"}),s.jsx(Y,{type:"button",variant:"outline",size:"icon",onClick:()=>Q(Ve),children:s.jsx(P4,{className:"w-4 h-4"})})]},Ve)),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(qe,{placeholder:"Ex: Livre de physique L2",value:C,onChange:ce=>R(ce.target.value),onKeyPress:ce=>ce.key==="Enter"&&(ce.preventDefault(),H()),className:"flex-1"}),s.jsx(Y,{type:"button",onClick:H,disabled:!C.trim(),children:s.jsx(gc,{className:"w-4 h-4"})})]})]})]}),s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:"estimatedValue",className:"text-foreground",children:"Valeur estimée (€) *"}),s.jsx(qe,{id:"estimatedValue",type:"text",placeholder:"0,00",...q.register("estimatedValue"),className:"mt-1"}),q.formState.errors.estimatedValue&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:q.formState.errors.estimatedValue.message})]})]})]}),a==="service"&&s.jsxs(le,{children:[s.jsx(We,{children:s.jsxs(He,{className:"flex items-center gap-2 text-foreground",children:[s.jsx($n,{className:"w-5 h-5 text-orange-600"}),"Informations du service"]})}),s.jsxs(ue,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:"skills",className:"text-foreground",children:"Description des compétences *"}),s.jsx(Es,{id:"skills",placeholder:"Décrivez vos compétences, votre expérience, votre méthode d'enseignement...",rows:4,...q.register("skills"),className:"mt-1",maxLength:500}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[s.jsx("span",{className:"text-destructive",children:(Ae=q.formState.errors.skills)==null?void 0:Ae.message}),s.jsxs("span",{children:[((Ke=q.watch("skills"))==null?void 0:Ke.length)||0,"/500"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:"hourlyRate",className:"text-foreground",children:"Tarif horaire (€/h) *"}),s.jsx(qe,{id:"hourlyRate",type:"text",placeholder:"15,00",...q.register("hourlyRate"),className:"mt-1"}),q.formState.errors.hourlyRate&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:q.formState.errors.hourlyRate.message})]}),s.jsxs("div",{children:[s.jsxs(Ee,{className:"text-foreground",children:["Durée prévue: ",O[0],"h"]}),s.jsx(R3,{value:O,onValueChange:ce=>{D(ce),q.setValue("duration",ce[0])},max:720,min:1,step:1,className:"mt-2"}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[s.jsx("span",{children:"1h"}),s.jsx("span",{children:"720h"})]})]})]}),s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:"availability",className:"text-foreground",children:"Disponibilités (optionnel)"}),s.jsx(qe,{id:"availability",placeholder:"Ex: Lundi-Vendredi 18h-20h, Week-ends",...q.register("availability"),className:"mt-1"})]})]})]}),s.jsxs(le,{children:[s.jsxs(We,{children:[s.jsxs(He,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(pc,{className:"w-5 h-5"}),"Photos ",a==="gift"?"(optionnelles)":"(1-10 photos)"]}),s.jsx(Pt,{children:a==="gift"?"Ajoutez des photos pour donner envie (optionnel)":"Première photo = photo principale. Max 15MB par image."})]}),s.jsx(ue,{children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-4",children:[c.map((ce,Ve)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:ce,alt:`Photo ${Ve+1}`,className:"w-full h-20 object-cover rounded-lg"}),s.jsx(Y,{type:"button",variant:"destructive",size:"icon",className:"absolute top-1 right-1 w-5 h-5 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>K(Ve),children:s.jsx(h1,{className:"w-3 h-3"})}),Ve===0&&s.jsx(tt,{className:"absolute bottom-1 left-1 text-xs bg-primary text-primary-foreground",children:"Principale"})]},Ve)),c.length<10&&s.jsxs("label",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg h-20 flex items-center justify-center cursor-pointer hover:border-primary/50 transition-colors",children:[s.jsxs("div",{className:"text-center",children:[h?s.jsx("div",{className:"w-5 h-5 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-1"}):s.jsx(d1,{className:"w-5 h-5 mx-auto mb-1 text-muted-foreground"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:h?"Upload...":"Ajouter"})]}),s.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:re,className:"hidden",disabled:h})]})]})})]}),s.jsxs(le,{children:[s.jsx(We,{children:s.jsxs(He,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(ym,{className:"w-5 h-5"}),"Tags et localisation"]})}),s.jsxs(ue,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ee,{className:"text-foreground",children:"Tags * (max 5)"}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:_.map(ce=>s.jsxs(tt,{variant:"secondary",className:"flex items-center gap-1",children:[ce,s.jsx(Y,{type:"button",variant:"ghost",size:"icon",className:"w-4 h-4 p-0 hover:bg-transparent",onClick:()=>W(ce),children:s.jsx(h1,{className:"w-3 h-3"})})]},ce))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(qe,{placeholder:"Ajouter un tag...",value:p,onChange:ce=>v(ce.target.value),onKeyPress:ce=>ce.key==="Enter"&&(ce.preventDefault(),U()),className:"flex-1"}),s.jsx(Y,{type:"button",onClick:U,disabled:!p.trim()||_.length>=5,children:"Ajouter"})]}),_.length===0&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:"Ajoutez au moins un tag"})]}),s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:"meetingLocation",className:"text-foreground",children:"Point de rencontre *"}),s.jsxs("div",{className:"flex gap-2 mt-1",children:[s.jsx(qe,{id:"meetingLocation",placeholder:"Ex: Bibliothèque universitaire, Hall principal...",...q.register("meetingLocation"),className:"flex-1"}),s.jsx(Y,{type:"button",variant:"outline",onClick:se,disabled:V,title:"Détecter ma position",children:V?s.jsx("span",{className:"animate-spin",children:"📍"}):s.jsx("span",{children:"📍"})})]}),q.formState.errors.meetingLocation&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:q.formState.errors.meetingLocation.message}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Privilégiez les lieux publics et fréquentés"}),s.jsx("div",{className:"mt-3",children:s.jsxs(YN,{center:F||[48.8584,2.2945],zoom:15,style:{height:200,width:"100%"},children:[s.jsx(XN,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"© OpenStreetMap contributors"}),s.jsx(de,{})]})})]})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(le,{children:[s.jsx(We,{children:s.jsxs(He,{className:"flex items-center gap-2 text-sm text-foreground",children:[s.jsx(Ff,{className:"w-4 h-4"}),"Validation"]})}),s.jsx(ue,{children:s.jsxs("div",{className:"space-y-2 text-xs",children:[s.jsxs("div",{className:`flex items-center gap-2 ${q.watch("title")&&q.watch("title").length>=5?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${q.watch("title")&&q.watch("title").length>=5?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Titre (5-80 caractères)"})]}),s.jsxs("div",{className:`flex items-center gap-2 ${q.watch("description")&&q.watch("description").length>=20?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${q.watch("description")&&q.watch("description").length>=20?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Description (20-1000 caractères)"})]}),s.jsxs("div",{className:`flex items-center gap-2 ${_.length>0?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${_.length>0?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Tags (1-5)"})]}),s.jsxs("div",{className:`flex items-center gap-2 ${q.watch("meetingLocation")?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${q.watch("meetingLocation")?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Point de rencontre"})]})]})})]}),s.jsxs(le,{children:[s.jsx(We,{children:s.jsxs(He,{className:"flex items-center gap-2 text-sm text-foreground",children:[s.jsx(Ft,{className:"w-4 h-4"}),"Conseils de sécurité"]})}),s.jsx(ue,{children:s.jsxs("div",{className:"space-y-2 text-xs",children:[s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),s.jsx("span",{className:"text-muted-foreground",children:"Rencontrez-vous dans un lieu public"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),s.jsx("span",{className:"text-muted-foreground",children:"Vérifiez l'identité de l'autre personne"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),s.jsx("span",{className:"text-muted-foreground",children:"Testez l'objet avant la transaction"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),s.jsx("span",{className:"text-muted-foreground",children:"Privilégiez les paiements sécurisés"})]})]})})]}),s.jsx(le,{children:s.jsxs(ue,{className:"pt-6",children:[s.jsx(Y,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 text-white",disabled:N||!Ye()||h,children:N?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Publication..."]}):h?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Upload des images..."]}):s.jsxs(s.Fragment,{children:[s.jsx(u1,{className:"w-4 h-4 mr-2"}),"Publier l'annonce"]})}),s.jsx("p",{className:"text-xs text-muted-foreground text-center mt-2",children:Ye()?"Votre annonce sera visible immédiatement":"Complétez tous les champs obligatoires"})]})})]})]})]})]})};var aS="Tabs",[ooe,yce]=As(aS,[Hy]),M3=Hy(),[loe,oS]=ooe(aS),D3=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:a,orientation:o="horizontal",dir:c,activationMode:u="automatic",...h}=t,f=Qc(c),[p,v]=ks({prop:r,onChange:i,defaultProp:a});return s.jsx(loe,{scope:n,baseId:Ns(),value:p,onValueChange:v,orientation:o,dir:f,activationMode:u,children:s.jsx(Ge.div,{dir:f,"data-orientation":o,...h,ref:e})})});D3.displayName=aS;var O3="TabsList",L3=x.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,a=oS(O3,n),o=M3(n);return s.jsx(pM,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:r,children:s.jsx(Ge.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:e})})});L3.displayName=O3;var V3="TabsTrigger",F3=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...a}=t,o=oS(V3,n),c=M3(n),u=$3(o.baseId,r),h=B3(o.baseId,r),f=r===o.value;return s.jsx(gM,{asChild:!0,...c,focusable:!i,active:f,children:s.jsx(Ge.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":h,"data-state":f?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:u,...a,ref:e,onMouseDown:Ie(t.onMouseDown,p=>{!i&&p.button===0&&p.ctrlKey===!1?o.onValueChange(r):p.preventDefault()}),onKeyDown:Ie(t.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&o.onValueChange(r)}),onFocus:Ie(t.onFocus,()=>{const p=o.activationMode!=="manual";!f&&!i&&p&&o.onValueChange(r)})})})});F3.displayName=V3;var z3="TabsContent",U3=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:a,...o}=t,c=oS(z3,n),u=$3(c.baseId,r),h=B3(c.baseId,r),f=r===c.value,p=x.useRef(f);return x.useEffect(()=>{const v=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(v)},[]),s.jsx(wr,{present:i||f,children:({present:v})=>s.jsx(Ge.div,{"data-state":f?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":u,hidden:!v,id:h,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:p.current?"0s":void 0},children:v&&a})})});U3.displayName=z3;function $3(t,e){return`${t}-trigger-${e}`}function B3(t,e){return`${t}-content-${e}`}var coe=D3,W3=L3,q3=F3,H3=U3;const eu=coe,Fl=x.forwardRef(({className:t,...e},n)=>s.jsx(W3,{ref:n,className:Je("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...e}));Fl.displayName=W3.displayName;const un=x.forwardRef(({className:t,...e},n)=>s.jsx(q3,{ref:n,className:Je("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...e}));un.displayName=q3.displayName;const dn=x.forwardRef(({className:t,...e},n)=>s.jsx(H3,{ref:n,className:Je("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));dn.displayName=H3.displayName;const G3=({currentPhotoURL:t,displayName:e})=>{var w,y;const{currentUser:n,updateUserProfile:r}=Tn(),[i,a]=x.useState(!1),[o,c]=x.useState(!1),[u,h]=x.useState(null),[f,p]=x.useState(null),v=x.useRef(null),_=C=>{var B;const R=(B=C.target.files)==null?void 0:B[0];if(!R)return;if(!R.type.startsWith("image/")){me.error("Veuillez sélectionner une image");return}if(R.size>5*1024*1024){me.error("L'image ne doit pas dépasser 5MB");return}p(R);const M=new FileReader;M.onload=O=>{var D;h((D=O.target)==null?void 0:D.result)},M.readAsDataURL(R)},b=async()=>{if(!(!f||!n)){c(!0);try{const C=`profile-photos/${n.uid}-${Date.now()}.${f.name.split(".").pop()}`,R=nN(sN,C),M=await eN(R,f),B=await tN(M.ref);await cm(n,{photoURL:B}),await r({photoURL:B}),me.success("Photo de profil mise à jour !"),a(!1),h(null),p(null)}catch(C){console.error("Erreur lors de l'upload:",C),me.error("Erreur lors de la mise à jour de la photo")}finally{c(!1)}}},N=async()=>{if(n){c(!0);try{await cm(n,{photoURL:null}),await r({photoURL:null}),me.success("Photo de profil supprimée"),a(!1)}catch(C){console.error("Erreur lors de la suppression:",C),me.error("Erreur lors de la suppression de la photo")}finally{c(!1)}}},S=()=>{p(null),h(null),v.current&&(v.current.value="")};return s.jsxs(ra,{open:i,onOpenChange:a,children:[s.jsx(pd,{asChild:!0,children:s.jsxs("div",{className:"relative group cursor-pointer",children:[s.jsxs(ao,{className:"h-20 w-20",children:[s.jsx(oo,{src:t||""}),s.jsx(lo,{className:"text-lg bg-gradient-to-br from-primary to-secondary text-white",children:((w=e[0])==null?void 0:w.toUpperCase())||"U"})]}),s.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(pc,{className:"w-6 h-6 text-white"})}),s.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-primary rounded-full flex items-center justify-center border-2 border-background",children:s.jsx(pc,{className:"w-3 h-3 text-white"})})]})}),s.jsxs(wi,{className:"max-w-md",children:[s.jsx(sa,{children:s.jsxs(bi,{className:"flex items-center gap-2",children:[s.jsx(pc,{className:"w-5 h-5"}),"Photo de profil"]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex justify-center",children:s.jsxs(ao,{className:"h-32 w-32",children:[s.jsx(oo,{src:u||t||""}),s.jsx(lo,{className:"text-2xl bg-gradient-to-br from-primary to-secondary text-white",children:((y=e[0])==null?void 0:y.toUpperCase())||"U"})]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("input",{ref:v,type:"file",accept:"image/*",onChange:_,className:"hidden"}),f?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"text-sm text-muted-foreground text-center",children:[s.jsx("p",{className:"font-medium",children:f.name}),s.jsxs("p",{children:[(f.size/1024/1024).toFixed(2)," MB"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Y,{onClick:S,variant:"outline",className:"flex-1",disabled:o,children:"Annuler"}),s.jsx(Y,{onClick:b,className:"flex-1",disabled:o,children:o?s.jsxs(s.Fragment,{children:[s.jsx(Ur,{className:"w-4 h-4 mr-2 animate-spin"}),"Upload..."]}):s.jsxs(s.Fragment,{children:[s.jsx(d1,{className:"w-4 h-4 mr-2"}),"Confirmer"]})})]})]}):s.jsxs("div",{className:"space-y-3",children:[s.jsxs(Y,{onClick:()=>{var C;return(C=v.current)==null?void 0:C.click()},variant:"outline",className:"w-full",children:[s.jsx(d1,{className:"w-4 h-4 mr-2"}),"Choisir une photo"]}),t&&s.jsxs(Y,{onClick:N,variant:"outline",disabled:o,className:"w-full text-destructive hover:text-destructive",children:[o?s.jsx(Ur,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(h1,{className:"w-4 h-4 mr-2"}),"Supprimer la photo"]})]})]}),s.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[s.jsx("p",{children:"• Formats acceptés : JPG, PNG, GIF"}),s.jsx("p",{children:"• Taille maximale : 5MB"}),s.jsx("p",{children:"• Recommandé : image carrée, minimum 200x200px"})]})]})]})]})},Lr=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(typeof t=="object"&&t!==null&&"toDate"in t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return typeof t=="object"&&t!==null&&"seconds"in t&&typeof t.seconds=="number"?new Date(t.seconds*1e3):new Date},uoe=()=>{const{currentUser:t,userProfile:e}=Tn(),[n,r]=x.useState([]),[i,a]=x.useState([]),[o,c]=x.useState([]),[u,h]=x.useState(null),[f,p]=x.useState({totalListings:0,activeListings:0,totalReviews:0,averageRating:0,totalFavorites:0}),[v,_]=x.useState({profile:!0,listings:!0,reviews:!0,favorites:!0}),[b,N]=x.useState({}),[S,w]=x.useState(null),[y,C]=x.useState(""),R=async()=>{if(t)try{_(de=>({...de,profile:!0}));const se=await cs(pt(Oe,"users",t.uid));if(se.exists()){const de=se.data();h({...de,createdAt:Lr(de.createdAt),updatedAt:Lr(de.updatedAt)})}else console.log("Aucun document utilisateur trouvé dans Firestore"),h(null)}catch(se){console.error("Erreur lors du chargement du profil:",se),h(null)}finally{_(se=>({...se,profile:!1}))}};x.useEffect(()=>{t&&(R(),M(),B(),O())},[t]);const M=async()=>{if(t)try{_(_e=>({..._e,listings:!0}));const se=cn(Vt(Oe,"listings"),In("sellerId","==",t.uid),Zs(20)),de=await An(se),ne=[];de.forEach(_e=>{const ye=_e.data();ne.push({id:_e.id,...ye,createdAt:Lr(ye.createdAt),updatedAt:Lr(ye.updatedAt)})}),ne.sort((_e,ye)=>Lr(ye.createdAt).getTime()-Lr(_e.createdAt).getTime()),r(ne);const ve=ne.filter(_e=>_e.status==="active");p(_e=>({..._e,totalListings:ne.length,activeListings:ve.length}))}catch(se){console.error("Erreur lors du chargement des annonces:",se)}finally{_(se=>({...se,listings:!1}))}},B=async()=>{if(t)try{_(ge=>({...ge,reviews:!0}));const se=cn(Vt(Oe,"reviews"),In("revieweeId","==",t.uid),Zs(10)),de=await An(se),ne=[];de.forEach(ge=>{const Ae=ge.data();ne.push({id:ge.id,...Ae,replies:Array.isArray(Ae.replies)?Ae.replies.map(Ke=>({...Ke,createdAt:Ke.createdAt instanceof Date?Ke.createdAt:Ke.createdAt&&typeof Ke.createdAt.toDate=="function"?Ke.createdAt.toDate():new Date})):[],likes:Array.isArray(Ae.likes)?Ae.likes:[],dislikes:Array.isArray(Ae.dislikes)?Ae.dislikes:[],createdAt:Lr(Ae.createdAt)})}),ne.sort((ge,Ae)=>Lr(Ae.createdAt).getTime()-Lr(ge.createdAt).getTime()),a(ne);const ve=Array.from(new Set(ne.map(ge=>ge.reviewerId))),_e={...b};await Promise.all(ve.map(async ge=>{if(!_e[ge]){const Ae=await cs(pt(Oe,"users",ge));if(Ae.exists()){const Ke=Ae.data();_e[ge]={displayName:Ke.displayName||"Utilisateur",photoURL:Ke.photoURL||void 0}}else _e[ge]={displayName:""}}})),N(_e);const ye=ne.reduce((ge,Ae)=>ge+Ae.rating,0),Se=ne.length>0?ye/ne.length:0;p(ge=>({...ge,totalReviews:ne.length,averageRating:Math.round(Se*10)/10}))}catch(se){console.error("Erreur lors du chargement des avis:",se)}finally{_(se=>({...se,reviews:!1}))}},O=async()=>{if(t)try{_(ve=>({...ve,favorites:!0}));const se=cn(Vt(Oe,"favorites"),In("userId","==",t.uid),Zs(20)),de=await An(se),ne=[];if(de.forEach(ve=>{const _e=ve.data();ne.push({id:ve.id,..._e,createdAt:Lr(_e.createdAt)})}),ne.sort((ve,_e)=>Lr(_e.createdAt).getTime()-Lr(ve.createdAt).getTime()),p(ve=>({...ve,totalFavorites:ne.length})),ne.length>0){const ve=ne.slice(0,6).map(async ye=>{try{const Se=await cs(pt(Oe,"listings",ye.listingId));if(Se.exists()){const ge=Se.data();return{id:Se.id,...ge,createdAt:Lr(ge.createdAt),updatedAt:Lr(ge.updatedAt)}}return null}catch(Se){return console.error("Erreur lors du chargement d'une annonce favorite:",Se),null}}),_e=await Promise.all(ve);c(_e.filter(ye=>ye!==null))}}catch(se){console.error("Erreur lors du chargement des favoris:",se)}finally{_(se=>({...se,favorites:!1}))}},D=se=>{if(!se)return"Date inconnue";try{const de=Lr(se);return isNaN(de.getTime())?"Date invalide":fh(de,{addSuffix:!0,locale:Tr})}catch{return"Date invalide"}},F=se=>Array.from({length:5},(de,ne)=>s.jsx(pi,{className:`h-4 w-4 ${ne<se?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},ne)),I=localStorage.getItem("pendingUserData"),V=I?JSON.parse(I):{};let k=(u==null?void 0:u.displayName)||(e==null?void 0:e.displayName)||V.displayName||"";!k&&(t!=null&&t.displayName)&&(k=t.displayName),!k&&(t!=null&&t.email)&&(k=t.email.split("@")[0]),k||(k="Utilisateur");let P=(u==null?void 0:u.university)||(e==null?void 0:e.university)||V.university||"";if((u==null?void 0:u.university)==="Autre université"&&u.otherUniversity||(e==null?void 0:e.university)==="Autre université"&&e.otherUniversity||V.university==="Autre université"&&V.otherUniversity){const se=u==null?void 0:u.otherUniversity,de=e==null?void 0:e.otherUniversity,ne=V.otherUniversity;P=se||de||ne||"Université personnalisée"}P||(P="Université spécifiée lors de l'inscription");let q=(u==null?void 0:u.fieldOfStudy)||(e==null?void 0:e.fieldOfStudy)||V.fieldOfStudy||"";if((u==null?void 0:u.fieldOfStudy)==="Autre"&&u.otherFieldOfStudy||(e==null?void 0:e.fieldOfStudy)==="Autre"&&e.otherFieldOfStudy||V.fieldOfStudy==="Autre"&&V.otherFieldOfStudy){const se=u==null?void 0:u.otherFieldOfStudy,de=e==null?void 0:e.otherFieldOfStudy,ne=V.otherFieldOfStudy;q=se||de||ne||"Filière personnalisée"}q||(q="Filière non spécifiée");const te=(u==null?void 0:u.graduationYear)||(e==null?void 0:e.graduationYear)||V.graduationYear||"",re=(u==null?void 0:u.email)||(e==null?void 0:e.email)||V.email||(t==null?void 0:t.email)||"",K=(u==null?void 0:u.photoURL)||(e==null?void 0:e.photoURL)||"",U=(u==null?void 0:u.createdAt)||(e==null?void 0:e.createdAt),W=(u==null?void 0:u.isVerified)||(e==null?void 0:e.isVerified),H=(u==null?void 0:u.location)||(e==null?void 0:e.location)||"",Q=(u==null?void 0:u.co2Saved)||(e==null?void 0:e.co2Saved)||0,fe=t&&e&&t.uid===e.id,ke=async se=>{if(t)try{const de=pt(Oe,"reviews",se),ne=i.find(ye=>ye.id===se);if(!ne)return;const ve=ne.likes||[],_e=ne.dislikes||[];ve.includes(t.uid)?await nn(de,{likes:ve.filter(ye=>ye!==t.uid)}):await nn(de,{likes:[...ve,t.uid],dislikes:_e.filter(ye=>ye!==t.uid)}),a(ye=>ye.map(Se=>{if(Se.id===se){const ge=Se.likes||[],Ae=Se.dislikes||[];return ge.includes(t.uid)?{...Se,likes:ge.filter(Ke=>Ke!==t.uid)}:{...Se,likes:[...ge,t.uid],dislikes:Ae.filter(Ke=>Ke!==t.uid)}}return Se}))}catch(de){console.error("Error liking review:",de),Nn.error("Erreur lors du like")}},Ze=async se=>{if(t)try{const de=pt(Oe,"reviews",se),ne=i.find(ye=>ye.id===se);if(!ne)return;const ve=ne.likes||[],_e=ne.dislikes||[];_e.includes(t.uid)?await nn(de,{dislikes:_e.filter(ye=>ye!==t.uid)}):await nn(de,{dislikes:[..._e,t.uid],likes:ve.filter(ye=>ye!==t.uid)}),a(ye=>ye.map(Se=>{if(Se.id===se){const ge=Se.likes||[],Ae=Se.dislikes||[];return Ae.includes(t.uid)?{...Se,dislikes:Ae.filter(Ke=>Ke!==t.uid)}:{...Se,dislikes:[...Ae,t.uid],likes:ge.filter(Ke=>Ke!==t.uid)}}return Se}))}catch(de){console.error("Error disliking review:",de),Nn.error("Erreur lors du dislike")}},Ye=async se=>{if(!(!t||!y.trim()))try{const de=pt(Oe,"reviews",se),ne=i.find(_e=>_e.id===se);if(!ne)return;const ve={userId:t.uid,comment:y.trim(),createdAt:new Date};await nn(de,{replies:[...ne.replies||[],ve]}),a(_e=>_e.map(ye=>ye.id===se?{...ye,replies:[...ye.replies||[],ve]}:ye)),C(""),w(null),Nn.success("Réponse envoyée")}catch(de){console.error("Error replying to review:",de),Nn.error("Erreur lors de l'envoi de la réponse")}};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsx(le,{children:s.jsx(We,{className:"text-left",children:s.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-4 sm:space-x-4 text-center sm:text-left",children:[s.jsxs("div",{className:"relative flex-shrink-0 mx-auto sm:mx-0",children:[s.jsx(G3,{currentPhotoURL:K,displayName:k}),W&&s.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center border-2 border-background",children:s.jsx(Ft,{className:"w-3 h-3 text-white"})})]}),s.jsxs("div",{className:"flex-1 w-full",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-2 mb-1",children:[s.jsx(He,{className:"text-2xl text-center sm:text-left w-full sm:w-auto",children:k}),W&&s.jsxs(tt,{className:"bg-green-100 text-green-800 border-green-200 mt-2 sm:mt-0",children:[s.jsx(Ft,{className:"w-3 h-3 mr-1"}),"Vérifié"]})]}),s.jsx(Pt,{className:"text-base text-center sm:text-left break-all",children:re}),s.jsxs("div",{className:"flex flex-col gap-1 mt-2 text-muted-foreground text-center sm:text-left",children:[s.jsxs("div",{children:[s.jsx(Gr,{className:"h-4 w-4 mr-1 inline"})," Université : ",s.jsx("span",{className:"text-sm",children:P})]}),s.jsxs("div",{children:[s.jsx(rh,{className:"h-4 w-4 mr-1 inline"})," Filière : ",s.jsx("span",{className:"text-sm",children:q})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-bold",children:"Année de diplôme :"})," ",s.jsx("span",{className:"text-sm",children:te})]})]}),H&&s.jsxs("div",{className:"flex items-center justify-center sm:justify-start mt-1 text-muted-foreground text-center sm:text-left",children:[s.jsx($r,{className:"h-4 w-4 mr-1"}),s.jsx("span",{className:"text-sm",children:H})]}),s.jsxs("div",{className:"flex items-center justify-center sm:justify-start mt-1 text-muted-foreground text-center sm:text-left",children:[s.jsx(mi,{className:"h-4 w-4 mr-1"}),s.jsxs("span",{className:"text-sm",children:["Membre depuis ",D(U)]})]}),Q&&Q>0&&s.jsxs("div",{className:"flex items-center justify-center sm:justify-start mt-1 text-green-600 text-center sm:text-left",children:[s.jsx(_i,{className:"h-4 w-4 mr-1"}),s.jsxs("span",{className:"text-sm font-medium",children:[Q," kg CO₂ économisés"]})]})]})]})})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(le,{children:s.jsx(ue,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(gn,{className:"h-5 w-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:v.listings?s.jsx("div",{className:"h-8 w-8 bg-muted animate-pulse rounded"}):f.totalListings}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Annonces totales"})]})]})})}),s.jsx(le,{children:s.jsx(ue,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(dp,{className:"h-5 w-5 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:v.listings?s.jsx("div",{className:"h-8 w-8 bg-muted animate-pulse rounded"}):f.activeListings}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Annonces actives"})]})]})})}),s.jsx(le,{children:s.jsx(ue,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(pi,{className:"h-5 w-5 text-yellow-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:v.reviews?s.jsx("div",{className:"h-8 w-8 bg-muted animate-pulse rounded"}):f.averageRating||"—"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Note moyenne"})]})]})})}),s.jsx(le,{children:s.jsx(ue,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Br,{className:"h-5 w-5 text-red-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:v.favorites?s.jsx("div",{className:"h-8 w-8 bg-muted animate-pulse rounded"}):f.totalFavorites}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Favoris"})]})]})})})]}),s.jsxs(eu,{defaultValue:"listings",className:"space-y-4",children:[s.jsxs(Fl,{className:"grid w-full grid-cols-3",children:[s.jsxs(un,{value:"listings",className:"flex items-center gap-1 text-xs sm:text-sm",children:[s.jsx(gn,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Mes Annonces"}),s.jsx("span",{className:"sm:hidden",children:"Annonces"}),!v.listings&&f.totalListings>0&&s.jsx(tt,{variant:"secondary",className:"ml-1 text-[10px] px-1 py-0.5",children:f.totalListings})]}),s.jsxs(un,{value:"reviews",className:"flex items-center gap-1 text-xs sm:text-sm",children:[s.jsx(pi,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Avis Reçus"}),s.jsx("span",{className:"sm:hidden",children:"Avis"}),!v.reviews&&f.totalReviews>0&&s.jsx(tt,{variant:"secondary",className:"ml-1 text-[10px] px-1 py-0.5",children:f.totalReviews})]}),s.jsxs(un,{value:"favorites",className:"flex items-center gap-1 text-xs sm:text-sm",children:[s.jsx(Br,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Favoris"}),s.jsx("span",{className:"sm:hidden",children:"Favoris"}),!v.favorites&&f.totalFavorites>0&&s.jsx(tt,{variant:"secondary",className:"ml-1 text-[10px] px-1 py-0.5",children:f.totalFavorites})]})]}),s.jsx(dn,{value:"listings",className:"space-y-4",children:s.jsxs(le,{children:[s.jsxs(We,{children:[s.jsxs(He,{className:"flex items-center gap-2",children:[s.jsx(gn,{className:"w-5 h-5"}),"Mes Annonces"]}),s.jsx(Pt,{children:"Gérez vos annonces publiées sur StudyMarket"})]}),s.jsx(ue,{children:v.listings?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:3}).map((se,de)=>s.jsxs(le,{className:"animate-pulse",children:[s.jsx("div",{className:"aspect-[4/3] bg-muted"}),s.jsxs(ue,{className:"p-4 space-y-2",children:[s.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},de))}):n.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(gn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune annonce"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous n'avez pas encore publié d'annonces."}),s.jsx(Y,{asChild:!0,children:s.jsx(De,{to:"/create",children:"Publier ma première annonce"})})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(se=>s.jsx(Sm,{listing:se},se.id))})})]})}),s.jsx(dn,{value:"reviews",className:"space-y-4",children:s.jsxs(le,{children:[s.jsxs(We,{children:[s.jsxs(He,{className:"flex items-center gap-2",children:[s.jsx(pi,{className:"w-5 h-5"}),"Avis Reçus"]}),s.jsx(Pt,{children:"Les avis laissés par d'autres étudiants"})]}),s.jsx(ue,{children:v.reviews?s.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((se,de)=>s.jsxs("div",{className:"border rounded-lg p-4 animate-pulse",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"flex space-x-1",children:Array.from({length:5}).map((ne,ve)=>s.jsx("div",{className:"w-4 h-4 bg-muted rounded"},ve))}),s.jsx("div",{className:"h-4 w-20 bg-muted rounded"})]}),s.jsx("div",{className:"h-4 bg-muted rounded w-full mb-2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/3"})]},de))}):i.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(fn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucun avis"}),s.jsx("p",{className:"text-muted-foreground",children:"Aucun avis reçu pour le moment. Les avis apparaîtront après vos premières transactions."})]}):s.jsx("div",{className:"space-y-4",children:i.map(se=>{var de,ne,ve,_e,ye,Se;return s.jsxs("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"flex",children:F(se.rating)}),s.jsxs(tt,{variant:"secondary",className:"text-xs",children:[se.rating,"/5"]})]}),s.jsx("span",{className:"text-sm text-muted-foreground",children:D(se.createdAt)})]}),s.jsx("p",{className:"text-foreground mb-3 leading-relaxed text-left",children:se.comment}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[s.jsxs("span",{className:"flex items-center gap-2 font-medium",children:[((de=b[se.reviewerId])==null?void 0:de.photoURL)&&s.jsx("img",{src:b[se.reviewerId].photoURL,alt:"avatar",className:"w-7 h-7 rounded-full object-cover"}),se.reviewerId===t.uid?(e==null?void 0:e.displayName)||"Vous":(ne=b[se.reviewerId])!=null&&ne.displayName?b[se.reviewerId].displayName:s.jsx("span",{className:"inline-block bg-gray-200 text-gray-600 px-2 py-0.5 rounded text-xs",children:"Profil supprimé"})]}),s.jsx(tt,{variant:"outline",className:"text-xs",children:se.reviewType==="buyer"?"Acheteur":"Vendeur"})]}),s.jsxs("div",{className:"mt-3 flex items-center gap-4",children:[s.jsxs(Y,{variant:"ghost",size:"sm",className:`flex items-center gap-1 ${(ve=se.likes)!=null&&ve.includes((t==null?void 0:t.uid)||"")?"text-primary":""}`,onClick:()=>ke(se.id),children:[s.jsx(A4,{className:"w-4 h-4"}),s.jsx("span",{children:((_e=se.likes)==null?void 0:_e.length)||0})]}),s.jsxs(Y,{variant:"ghost",size:"sm",className:`flex items-center gap-1 ${(ye=se.dislikes)!=null&&ye.includes((t==null?void 0:t.uid)||"")?"text-destructive":""}`,onClick:()=>Ze(se.id),children:[s.jsx(I4,{className:"w-4 h-4"}),s.jsx("span",{children:((Se=se.dislikes)==null?void 0:Se.length)||0})]}),s.jsxs(Y,{variant:"ghost",size:"sm",className:"flex items-center gap-1",onClick:()=>w(S===se.id?null:se.id),children:[s.jsx(fn,{className:"w-4 h-4"}),s.jsx("span",{children:"Répondre"})]})]}),S===se.id&&s.jsxs("div",{className:"mt-3 space-y-2",children:[s.jsx(Es,{placeholder:"Votre réponse...",value:y,onChange:ge=>C(ge.target.value),className:"min-h-[80px]"}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(Y,{variant:"outline",size:"sm",onClick:()=>{w(null),C("")},children:"Annuler"}),s.jsx(Y,{size:"sm",onClick:()=>Ye(se.id),disabled:!y.trim(),children:"Envoyer"})]})]}),se.replies&&se.replies.length>0&&s.jsx("div",{className:"mt-4 space-y-3 pl-4 border-l-2 border-muted",children:se.replies.map((ge,Ae)=>{var Ke;return s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"font-medium",children:fe&&ge.userId===(t==null?void 0:t.uid)?"Vous":((Ke=b[ge.userId])==null?void 0:Ke.displayName)||"Utilisateur"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:D(ge.createdAt)})]}),s.jsx("p",{className:"text-muted-foreground text-left",children:ge.comment})]},Ae)})})]},se.id)})})})]})}),s.jsx(dn,{value:"favorites",className:"space-y-4",children:s.jsxs(le,{children:[s.jsxs(We,{children:[s.jsxs(He,{className:"flex items-center gap-2",children:[s.jsx(Br,{className:"w-5 h-5"}),"Mes Favoris"]}),s.jsx(Pt,{children:"Les annonces que vous avez ajoutées à vos favoris"})]}),s.jsx(ue,{children:v.favorites?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:3}).map((se,de)=>s.jsxs(le,{className:"animate-pulse",children:[s.jsx("div",{className:"aspect-[4/3] bg-muted"}),s.jsxs(ue,{className:"p-4 space-y-2",children:[s.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},de))}):o.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Br,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucun favori"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous n'avez pas encore d'annonces favorites. Explorez les annonces et ajoutez-les à vos favoris !"}),s.jsx(Y,{asChild:!0,children:s.jsx(De,{to:"/create",children:"Publier ma première annonce"})})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(se=>s.jsx(Sm,{listing:se},se.id))})})]})})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(le,{children:s.jsx(ue,{className:"pt-6",children:s.jsx("p",{className:"text-center text-muted-foreground",children:"Vous devez être connecté pour voir votre profil."})})})})};var lS="Switch",[doe,_ce]=As(lS),[hoe,foe]=doe(lS),Z3=x.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:a,required:o,disabled:c,value:u="on",onCheckedChange:h,form:f,...p}=t,[v,_]=x.useState(null),b=vt(e,C=>_(C)),N=x.useRef(!1),S=v?f||!!v.closest("form"):!0,[w=!1,y]=ks({prop:i,defaultProp:a,onChange:h});return s.jsxs(hoe,{scope:n,checked:w,disabled:c,children:[s.jsx(Ge.button,{type:"button",role:"switch","aria-checked":w,"aria-required":o,"data-state":Q3(w),"data-disabled":c?"":void 0,disabled:c,value:u,...p,ref:b,onClick:Ie(t.onClick,C=>{y(R=>!R),S&&(N.current=C.isPropagationStopped(),N.current||C.stopPropagation())})}),S&&s.jsx(moe,{control:v,bubbles:!N.current,name:r,value:u,checked:w,required:o,disabled:c,form:f,style:{transform:"translateX(-100%)"}})]})});Z3.displayName=lS;var K3="SwitchThumb",Y3=x.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,i=foe(K3,n);return s.jsx(Ge.span,{"data-state":Q3(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})});Y3.displayName=K3;var moe=t=>{const{control:e,checked:n,bubbles:r=!0,...i}=t,a=x.useRef(null),o=e0(n),c=By(e);return x.useEffect(()=>{const u=a.current,h=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(h,"checked").set;if(o!==n&&p){const v=new Event("click",{bubbles:r});p.call(u,n),u.dispatchEvent(v)}},[o,n,r]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:a,style:{...t.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Q3(t){return t?"checked":"unchecked"}var X3=Z3,poe=Y3;const er=x.forwardRef(({className:t,...e},n)=>s.jsx(X3,{className:Je("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:s.jsx(poe,{className:Je("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));er.displayName=X3.displayName;const goe=st.object({displayName:st.string().min(2,"Le nom doit contenir au moins 2 caractères"),bio:st.string().max(500,"La bio ne peut pas dépasser 500 caractères").optional(),phone:st.string().optional(),university:st.string().min(1,"Veuillez sélectionner votre université"),fieldOfStudy:st.string().min(1,"Veuillez indiquer votre filière"),graduationYear:st.number().min(2020).max(2035),campus:st.string().optional(),location:st.string().optional()}),voe=st.object({currentPassword:st.string().min(6,"Le mot de passe actuel est requis"),newPassword:st.string().min(6,"Le nouveau mot de passe doit contenir au moins 6 caractères"),confirmPassword:st.string()}).refine(t=>t.newPassword===t.confirmPassword,{message:"Les mots de passe ne correspondent pas",path:["confirmPassword"]}),xoe=st.object({newEmail:st.string().email("Email invalide"),password:st.string().min(6,"Mot de passe requis pour changer l'email")}),yoe=["Sorbonne Université","Université Paris-Dauphine","École Polytechnique","ENS Paris","CentraleSupélec","MINES ParisTech","HEC Paris","ESSEC","ESCP","Université Paris 1 Panthéon-Sorbonne","Université Paris Cité","Sciences Po Paris","Université de Lyon","Université de Marseille","Université de Toulouse","Université de Bordeaux","Université de Lille","Université de Strasbourg","Université de Nantes","Université de Montpellier","Autre université"],_oe=["Informatique","Ingénierie","Commerce/Management","Droit","Médecine","Sciences","Lettres/Langues","Sciences Humaines","Arts","Architecture","Économie","Psychologie","Communication","Design","Autre"],woe=()=>{var q,te,re,K,U,W;const{currentUser:t,userProfile:e,updateUserProfile:n,logout:r}=Tn(),i=ar(),[a,o]=x.useState("profile"),[c,u]=x.useState(!1),[h,f]=x.useState(!1),[p,v]=x.useState(!1),[_,b]=x.useState(!1),[N,S]=x.useState(""),[w,y]=x.useState({email:((q=e==null?void 0:e.notificationPreferences)==null?void 0:q.email)??!0,push:((te=e==null?void 0:e.notificationPreferences)==null?void 0:te.push)??!0,sms:((re=e==null?void 0:e.notificationPreferences)==null?void 0:re.sms)??!1,alerts:((K=e==null?void 0:e.notificationPreferences)==null?void 0:K.alerts)??!0,messages:!0,listings:!0,reviews:!0,marketing:!1}),[C,R]=x.useState({profileVisibility:"public",showEmail:!1,showPhone:!1,showUniversity:!0,allowMessages:!0,showOnlineStatus:!0}),M=yc({resolver:_c(goe),defaultValues:{displayName:(e==null?void 0:e.displayName)||"",bio:(e==null?void 0:e.bio)||"",phone:(e==null?void 0:e.phone)||"",university:(e==null?void 0:e.university)||"",fieldOfStudy:(e==null?void 0:e.fieldOfStudy)||"",graduationYear:(e==null?void 0:e.graduationYear)||new Date().getFullYear()+2,campus:(e==null?void 0:e.campus)||"",location:(e==null?void 0:e.location)||""}}),B=yc({resolver:_c(voe)}),O=yc({resolver:_c(xoe)});x.useEffect(()=>{var H,Q,fe,ke;e&&(M.reset({displayName:e.displayName||"",bio:e.bio||"",phone:e.phone||"",university:e.university||"",fieldOfStudy:e.fieldOfStudy||"",graduationYear:e.graduationYear||new Date().getFullYear()+2,campus:e.campus||"",location:e.location||""}),y({email:((H=e.notificationPreferences)==null?void 0:H.email)??!0,push:((Q=e.notificationPreferences)==null?void 0:Q.push)??!0,sms:((fe=e.notificationPreferences)==null?void 0:fe.sms)??!1,alerts:((ke=e.notificationPreferences)==null?void 0:ke.alerts)??!0,messages:!0,listings:!0,reviews:!0,marketing:!1}))},[e,M]);const D=async H=>{u(!0);try{await n({displayName:H.displayName,bio:H.bio||null,phone:H.phone||null,university:H.university,fieldOfStudy:H.fieldOfStudy,graduationYear:H.graduationYear,campus:H.campus||null,location:H.location||null}),me.success("Profil mis à jour avec succès !")}catch(Q){console.error("Erreur lors de la mise à jour du profil:",Q),me.error("Erreur lors de la mise à jour du profil")}finally{u(!1)}},F=async()=>{u(!0);try{await n({notificationPreferences:{email:w.email,push:w.push,sms:w.sms,alerts:w.alerts}}),me.success("Préférences de notification mises à jour !")}catch(H){console.error("Erreur lors de la mise à jour des notifications:",H),me.error("Erreur lors de la mise à jour des notifications")}finally{u(!1)}},I=async H=>{if(t){u(!0);try{const Q=fl.credential(t.email,H.currentPassword);await M2(t,Q),await w$(t,H.newPassword),me.success("Mot de passe mis à jour avec succès !"),v(!1),B.reset()}catch(Q){console.error("Erreur lors du changement de mot de passe:",Q),Q.code==="auth/wrong-password"?me.error("Mot de passe actuel incorrect"):me.error("Erreur lors du changement de mot de passe")}finally{u(!1)}}},V=async H=>{if(t){u(!0);try{const Q=fl.credential(t.email,H.password);await M2(t,Q),await _$(t,H.newEmail),await n({email:H.newEmail}),me.success("Email mis à jour avec succès !"),b(!1),O.reset()}catch(Q){console.error("Erreur lors du changement d'email:",Q),Q.code==="auth/wrong-password"?me.error("Mot de passe incorrect"):Q.code==="auth/email-already-in-use"?me.error("Cet email est déjà utilisé"):me.error("Erreur lors du changement d'email")}finally{u(!1)}}},k=async()=>{if(!(!t||N!=="SUPPRIMER")){u(!0);try{const H=Lq(Oe),Q=["listings","conversations","reviews","favorites","reports"];for(const fe of Q){const ke=cn(Vt(Oe,fe),In("userId","==",t.uid));(await An(ke)).forEach(Ye=>{H.delete(Ye.ref)})}H.delete(pt(Oe,"users",t.uid)),await H.commit(),await E$(t),me.success("Compte supprimé avec succès"),i("/")}catch(H){console.error("Erreur lors de la suppression du compte:",H),me.error("Erreur lors de la suppression du compte")}finally{u(!1)}}},P=async()=>{if(t){u(!0);try{const H={profile:e,listings:[],conversations:[],reviews:[],favorites:[]},Q=cn(Vt(Oe,"listings"),In("sellerId","==",t.uid)),fe=await An(Q);H.listings=fe.docs.map(ge=>({id:ge.id,...ge.data()}));const ke=cn(Vt(Oe,"conversations"),In("participants","array-contains",t.uid)),Ze=await An(ke);H.conversations=Ze.docs.map(ge=>({id:ge.id,...ge.data()}));const Ye=cn(Vt(Oe,"reviews"),In("revieweeId","==",t.uid)),se=await An(Ye);H.reviews=se.docs.map(ge=>({id:ge.id,...ge.data()}));const de=cn(Vt(Oe,"favorites"),In("userId","==",t.uid)),ne=await An(de);H.favorites=ne.docs.map(ge=>({id:ge.id,...ge.data()}));const ve=JSON.stringify(H,null,2),_e=new Blob([ve],{type:"application/json"}),ye=URL.createObjectURL(_e),Se=document.createElement("a");Se.href=ye,Se.download=`studymarket-data-${new Date().toISOString().split("T")[0]}.json`,Se.click(),URL.revokeObjectURL(ye),me.success("Données exportées avec succès !")}catch(H){console.error("Erreur lors de l'export des données:",H),me.error("Erreur lors de l'export des données")}finally{u(!1)}}};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[s.jsx(Dy,{className:"w-8 h-8"}),"Paramètres"]}),s.jsx("p",{className:"text-muted-foreground",children:"Gérez votre profil, vos préférences et votre sécurité"})]}),s.jsxs(eu,{value:a,onValueChange:o,className:"space-y-6",children:[s.jsxs(Fl,{className:"grid w-full grid-cols-5",children:[s.jsxs(un,{value:"profile",className:"flex items-center gap-2",children:[s.jsx(Gr,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Profil"})]}),s.jsxs(un,{value:"notifications",className:"flex items-center gap-2",children:[s.jsx(di,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Notifications"})]}),s.jsxs(un,{value:"privacy",className:"flex items-center gap-2",children:[s.jsx(Md,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Confidentialité"})]}),s.jsxs(un,{value:"security",className:"flex items-center gap-2",children:[s.jsx(Ft,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Sécurité"})]}),s.jsxs(un,{value:"data",className:"flex items-center gap-2",children:[s.jsx(Ks,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Données"})]})]}),s.jsx(dn,{value:"profile",className:"space-y-6",children:s.jsxs(le,{children:[s.jsxs(We,{children:[s.jsxs(He,{className:"flex items-center gap-2",children:[s.jsx(Gr,{className:"w-5 h-5"}),"Informations personnelles"]}),s.jsx(Pt,{children:"Mettez à jour vos informations de profil et vos préférences"})]}),s.jsxs(ue,{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(G3,{currentPhotoURL:(e==null?void 0:e.photoURL)||"",displayName:(e==null?void 0:e.displayName)||t.email||"Utilisateur"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium",children:"Photo de profil"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Cliquez sur votre avatar pour changer votre photo"})]})]}),s.jsx(Ws,{}),s.jsxs("form",{onSubmit:M.handleSubmit(D),className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:"displayName",children:"Nom complet *"}),s.jsx(qe,{id:"displayName",...M.register("displayName"),placeholder:"Votre nom complet"}),M.formState.errors.displayName&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:M.formState.errors.displayName.message})]}),s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:"phone",children:"Téléphone"}),s.jsx(qe,{id:"phone",type:"tel",...M.register("phone"),placeholder:"+33 6 12 34 56 78"})]})]}),s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:"bio",children:"Biographie"}),s.jsx(Es,{id:"bio",...M.register("bio"),placeholder:"Parlez-nous de vous...",rows:3,maxLength:500}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[((U=M.watch("bio"))==null?void 0:U.length)||0,"/500 caractères"]})]}),s.jsx(Ws,{}),s.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[s.jsx(rh,{className:"w-4 h-4"}),"Informations académiques"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:"university",children:"Université *"}),s.jsxs(Jt,{value:M.watch("university"),onValueChange:H=>M.setValue("university",H),children:[s.jsx(qt,{children:s.jsx(en,{placeholder:"Sélectionnez votre université"})}),s.jsx(Ht,{children:yoe.map(H=>s.jsx($e,{value:H,children:H},H))})]}),M.formState.errors.university&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:M.formState.errors.university.message})]}),s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:"fieldOfStudy",children:"Filière d'études *"}),s.jsxs(Jt,{value:M.watch("fieldOfStudy"),onValueChange:H=>M.setValue("fieldOfStudy",H),children:[s.jsx(qt,{children:s.jsx(en,{placeholder:"Sélectionnez votre filière"})}),s.jsx(Ht,{children:_oe.map(H=>s.jsx($e,{value:H,children:H},H))})]}),M.formState.errors.fieldOfStudy&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:M.formState.errors.fieldOfStudy.message})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:"graduationYear",children:"Année de diplôme *"}),s.jsxs(Jt,{value:(W=M.watch("graduationYear"))==null?void 0:W.toString(),onValueChange:H=>M.setValue("graduationYear",parseInt(H)),children:[s.jsx(qt,{children:s.jsx(en,{placeholder:"Année de diplôme"})}),s.jsx(Ht,{children:Array.from({length:16},(H,Q)=>2020+Q).map(H=>s.jsx($e,{value:H.toString(),children:H},H))})]}),M.formState.errors.graduationYear&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:M.formState.errors.graduationYear.message})]}),s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:"campus",children:"Campus"}),s.jsx(qe,{id:"campus",...M.register("campus"),placeholder:"Campus principal"})]})]}),s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:"location",children:"Localisation"}),s.jsx(qe,{id:"location",...M.register("location"),placeholder:"Paris, France"})]}),s.jsx(Y,{type:"submit",disabled:c,className:"w-full",children:c?s.jsxs(s.Fragment,{children:[s.jsx(Ur,{className:"w-4 h-4 mr-2 animate-spin"}),"Sauvegarde..."]}):s.jsxs(s.Fragment,{children:[s.jsx(m_,{className:"w-4 h-4 mr-2"}),"Sauvegarder les modifications"]})})]})]})]})}),s.jsx(dn,{value:"notifications",className:"space-y-6",children:s.jsxs(le,{children:[s.jsxs(We,{children:[s.jsxs(He,{className:"flex items-center gap-2",children:[s.jsx(di,{className:"w-5 h-5"}),"Préférences de notification"]}),s.jsx(Pt,{children:"Choisissez comment vous souhaitez être notifié"})]}),s.jsxs(ue,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Canaux de notification"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(us,{className:"w-4 h-4 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Email"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevez des notifications par email"})]})]}),s.jsx(er,{checked:w.email,onCheckedChange:H=>y(Q=>({...Q,email:H}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Yc,{className:"w-4 h-4 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Notifications push"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications dans le navigateur"})]})]}),s.jsx(er,{checked:w.push,onCheckedChange:H=>y(Q=>({...Q,push:H}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(sh,{className:"w-4 h-4 text-purple-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"SMS"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications par SMS (bientôt disponible)"})]})]}),s.jsx(er,{checked:w.sms,onCheckedChange:H=>y(Q=>({...Q,sms:H})),disabled:!0})]})]})]}),s.jsx(Ws,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Types de notifications"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(fn,{className:"w-4 h-4 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Messages"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouveaux messages et conversations"})]})]}),s.jsx(er,{checked:w.messages,onCheckedChange:H=>y(Q=>({...Q,messages:H}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(gn,{className:"w-4 h-4 text-orange-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Annonces"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouvelles annonces correspondant à vos recherches"})]})]}),s.jsx(er,{checked:w.listings,onCheckedChange:H=>y(Q=>({...Q,listings:H}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(pi,{className:"w-4 h-4 text-yellow-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Avis et évaluations"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouveaux avis sur vos transactions"})]})]}),s.jsx(er,{checked:w.reviews,onCheckedChange:H=>y(Q=>({...Q,reviews:H}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(di,{className:"w-4 h-4 text-red-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Alertes de sécurité"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Alertes importantes et mises à jour de sécurité"})]})]}),s.jsx(er,{checked:w.alerts,onCheckedChange:H=>y(Q=>({...Q,alerts:H}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(NG,{className:"w-4 h-4 text-pink-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Marketing"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouvelles fonctionnalités et promotions"})]})]}),s.jsx(er,{checked:w.marketing,onCheckedChange:H=>y(Q=>({...Q,marketing:H}))})]})]})]}),s.jsx(Y,{onClick:F,disabled:c,className:"w-full",children:c?s.jsxs(s.Fragment,{children:[s.jsx(Ur,{className:"w-4 h-4 mr-2 animate-spin"}),"Sauvegarde..."]}):s.jsxs(s.Fragment,{children:[s.jsx(m_,{className:"w-4 h-4 mr-2"}),"Sauvegarder les préférences"]})})]})]})}),s.jsx(dn,{value:"privacy",className:"space-y-6",children:s.jsxs(le,{children:[s.jsxs(We,{children:[s.jsxs(He,{className:"flex items-center gap-2",children:[s.jsx(Md,{className:"w-5 h-5"}),"Confidentialité et visibilité"]}),s.jsx(Pt,{children:"Contrôlez qui peut voir vos informations"})]}),s.jsxs(ue,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Visibilité du profil"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Profil public"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre profil est visible par tous les étudiants vérifiés"})]}),s.jsx(er,{checked:C.profileVisibility==="public",onCheckedChange:H=>R(Q=>({...Q,profileVisibility:H?"public":"private"}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Afficher l'email"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre email est visible sur votre profil public"})]}),s.jsx(er,{checked:C.showEmail,onCheckedChange:H=>R(Q=>({...Q,showEmail:H}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Afficher le téléphone"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre numéro de téléphone est visible sur votre profil"})]}),s.jsx(er,{checked:C.showPhone,onCheckedChange:H=>R(Q=>({...Q,showPhone:H}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Afficher l'université"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre université est visible sur votre profil"})]}),s.jsx(er,{checked:C.showUniversity,onCheckedChange:H=>R(Q=>({...Q,showUniversity:H}))})]})]})]}),s.jsx(Ws,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Interactions"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Autoriser les messages"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Les autres étudiants peuvent vous envoyer des messages"})]}),s.jsx(er,{checked:C.allowMessages,onCheckedChange:H=>R(Q=>({...Q,allowMessages:H}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Statut en ligne"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Afficher quand vous êtes en ligne"})]}),s.jsx(er,{checked:C.showOnlineStatus,onCheckedChange:H=>R(Q=>({...Q,showOnlineStatus:H}))})]})]})]}),s.jsxs(Ut,{children:[s.jsx(Ft,{className:"h-4 w-4"}),s.jsx($t,{children:"Vos informations personnelles sont toujours protégées et ne sont jamais partagées avec des tiers sans votre consentement."})]})]})]})}),s.jsx(dn,{value:"security",className:"space-y-6",children:s.jsxs(le,{children:[s.jsxs(We,{children:[s.jsxs(He,{className:"flex items-center gap-2",children:[s.jsx(Ft,{className:"w-5 h-5"}),"Sécurité du compte"]}),s.jsx(Pt,{children:"Gérez la sécurité de votre compte StudyMarket"})]}),s.jsxs(ue,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Informations du compte"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(us,{className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"font-medium",children:"Email"})]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:t.email}),s.jsxs(ra,{open:_,onOpenChange:b,children:[s.jsx(pd,{asChild:!0,children:s.jsx(Y,{variant:"outline",size:"sm",children:"Changer l'email"})}),s.jsxs(wi,{children:[s.jsxs(sa,{children:[s.jsx(bi,{children:"Changer l'adresse email"}),s.jsx(xc,{children:"Entrez votre nouveau email et votre mot de passe actuel"})]}),s.jsxs("form",{onSubmit:O.handleSubmit(V),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:"newEmail",children:"Nouvel email"}),s.jsx(qe,{id:"newEmail",type:"email",...O.register("newEmail"),placeholder:"nouveau@email.com"}),O.formState.errors.newEmail&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:O.formState.errors.newEmail.message})]}),s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:"emailPassword",children:"Mot de passe actuel"}),s.jsx(qe,{id:"emailPassword",type:"password",...O.register("password"),placeholder:"••••••••"}),O.formState.errors.password&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:O.formState.errors.password.message})]}),s.jsxs(gv,{children:[s.jsx(Y,{type:"button",variant:"outline",onClick:()=>b(!1),children:"Annuler"}),s.jsxs(Y,{type:"submit",disabled:c,children:[c?s.jsx(Ur,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(m_,{className:"w-4 h-4 mr-2"}),"Changer l'email"]})]})]})]})]})]}),s.jsxs("div",{className:"p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Dc,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{className:"font-medium",children:"Mot de passe"})]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Dernière modification : il y a 30 jours"}),s.jsxs(ra,{open:p,onOpenChange:v,children:[s.jsx(pd,{asChild:!0,children:s.jsx(Y,{variant:"outline",size:"sm",children:"Changer le mot de passe"})}),s.jsxs(wi,{children:[s.jsxs(sa,{children:[s.jsx(bi,{children:"Changer le mot de passe"}),s.jsx(xc,{children:"Entrez votre mot de passe actuel et votre nouveau mot de passe"})]}),s.jsxs("form",{onSubmit:B.handleSubmit(I),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:"currentPassword",children:"Mot de passe actuel"}),s.jsx(qe,{id:"currentPassword",type:"password",...B.register("currentPassword"),placeholder:"••••••••"}),B.formState.errors.currentPassword&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:B.formState.errors.currentPassword.message})]}),s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:"newPassword",children:"Nouveau mot de passe"}),s.jsx(qe,{id:"newPassword",type:"password",...B.register("newPassword"),placeholder:"••••••••"}),B.formState.errors.newPassword&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:B.formState.errors.newPassword.message})]}),s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:"confirmPassword",children:"Confirmer le nouveau mot de passe"}),s.jsx(qe,{id:"confirmPassword",type:"password",...B.register("confirmPassword"),placeholder:"••••••••"}),B.formState.errors.confirmPassword&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:B.formState.errors.confirmPassword.message})]}),s.jsxs(gv,{children:[s.jsx(Y,{type:"button",variant:"outline",onClick:()=>v(!1),children:"Annuler"}),s.jsxs(Y,{type:"submit",disabled:c,children:[c?s.jsx(Ur,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(xG,{className:"w-4 h-4 mr-2"}),"Changer le mot de passe"]})]})]})]})]})]})]})]}),s.jsx(Ws,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Vérification du compte"}),s.jsx("div",{className:"p-4 border rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${e!=null&&e.isVerified?"bg-green-500":"bg-yellow-500"}`}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:e!=null&&e.isVerified?"Compte vérifié":"Vérification en attente"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e!=null&&e.isVerified?"Votre statut étudiant a été vérifié":"Votre statut étudiant est en cours de vérification"})]})]}),e!=null&&e.isVerified?s.jsxs(tt,{className:"bg-green-100 text-green-800",children:[s.jsx(Tt,{className:"w-3 h-3 mr-1"}),"Vérifié"]}):s.jsx(tt,{variant:"outline",children:"En attente"})]})})]}),s.jsxs(Ut,{children:[s.jsx(Ft,{className:"h-4 w-4"}),s.jsx($t,{children:"Pour votre sécurité, nous vous recommandons d'utiliser un mot de passe fort et de le changer régulièrement."})]})]})]})}),s.jsxs(dn,{value:"data",className:"space-y-6",children:[s.jsxs(le,{children:[s.jsxs(We,{children:[s.jsxs(He,{className:"flex items-center gap-2",children:[s.jsx(Ks,{className:"w-5 h-5"}),"Gestion des données"]}),s.jsx(Pt,{children:"Exportez ou supprimez vos données personnelles"})]}),s.jsxs(ue,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Exporter mes données"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Téléchargez une copie de toutes vos données StudyMarket au format JSON."}),s.jsxs(Y,{onClick:P,disabled:c,variant:"outline",children:[c?s.jsx(Ur,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(Ks,{className:"w-4 h-4 mr-2"}),"Exporter mes données"]})]}),s.jsx(Ws,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium text-destructive",children:"Zone de danger"}),s.jsxs(Ut,{className:"border-destructive",children:[s.jsx(Rn,{className:"h-4 w-4"}),s.jsx($t,{children:"La suppression de votre compte est irréversible. Toutes vos données seront définitivement supprimées."})]}),s.jsxs(ra,{open:h,onOpenChange:f,children:[s.jsx(pd,{asChild:!0,children:s.jsxs(Y,{variant:"destructive",children:[s.jsx(Ha,{className:"w-4 h-4 mr-2"}),"Supprimer mon compte"]})}),s.jsxs(wi,{children:[s.jsxs(sa,{children:[s.jsx(bi,{className:"text-destructive",children:"Supprimer définitivement le compte"}),s.jsxs(xc,{children:["Cette action est irréversible. Toutes vos données seront supprimées :",s.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[s.jsx("li",{children:"Profil utilisateur"}),s.jsx("li",{children:"Toutes vos annonces"}),s.jsx("li",{children:"Conversations et messages"}),s.jsx("li",{children:"Avis et évaluations"}),s.jsx("li",{children:"Favoris et recherches sauvegardées"})]})]})]}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:"deleteConfirm",children:'Tapez "SUPPRIMER" pour confirmer'}),s.jsx(qe,{id:"deleteConfirm",value:N,onChange:H=>S(H.target.value),placeholder:"SUPPRIMER"})]})}),s.jsxs(gv,{children:[s.jsx(Y,{variant:"outline",onClick:()=>f(!1),children:"Annuler"}),s.jsxs(Y,{variant:"destructive",onClick:k,disabled:N!=="SUPPRIMER"||c,children:[c?s.jsx(Ur,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(Ha,{className:"w-4 h-4 mr-2"}),"Supprimer définitivement"]})]})]})]})]})]})]}),s.jsxs(le,{children:[s.jsx(We,{children:s.jsxs(He,{className:"flex items-center gap-2",children:[s.jsx(fx,{className:"w-5 h-5"}),"Informations légales"]})}),s.jsx(ue,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(Y,{variant:"outline",asChild:!0,children:s.jsxs("a",{href:"/terms",target:"_blank",className:"flex items-center gap-2",children:[s.jsx(ss,{className:"w-4 h-4"}),"Conditions d'utilisation"]})}),s.jsx(Y,{variant:"outline",asChild:!0,children:s.jsxs("a",{href:"/privacy",target:"_blank",className:"flex items-center gap-2",children:[s.jsx(ss,{className:"w-4 h-4"}),"Politique de confidentialité"]})}),s.jsx(Y,{variant:"outline",asChild:!0,children:s.jsxs("a",{href:"/cookies",target:"_blank",className:"flex items-center gap-2",children:[s.jsx(ss,{className:"w-4 h-4"}),"Politique des cookies"]})}),s.jsx(Y,{variant:"outline",asChild:!0,children:s.jsxs("a",{href:"/support",target:"_blank",className:"flex items-center gap-2",children:[s.jsx(ss,{className:"w-4 h-4"}),"Centre d'aide"]})})]})})]})]})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(le,{children:s.jsx(ue,{className:"pt-6",children:s.jsx("p",{className:"text-center text-muted-foreground",children:"Vous devez être connecté pour accéder aux paramètres."})})})})};function boe(t,e=[]){let n=[];function r(a,o){const c=x.createContext(o),u=n.length;n=[...n,o];function h(p){const{scope:v,children:_,...b}=p,N=(v==null?void 0:v[t][u])||c,S=x.useMemo(()=>b,Object.values(b));return s.jsx(N.Provider,{value:S,children:_})}function f(p,v){const _=(v==null?void 0:v[t][u])||c,b=x.useContext(_);if(b)return b;if(o!==void 0)return o;throw new Error(`\`${p}\` must be used within \`${a}\``)}return h.displayName=a+"Provider",[h,f]}const i=()=>{const a=n.map(o=>x.createContext(o));return function(c){const u=(c==null?void 0:c[t])||a;return x.useMemo(()=>({[`__scope${t}`]:{...c,[t]:u}}),[c,u])}};return i.scopeName=t,[r,joe(i,...e)]}function joe(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((c,{useScope:u,scopeName:h})=>{const p=u(a)[`__scope${h}`];return{...c,...p}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var cS="Progress",uS=100,[Noe,wce]=boe(cS),[Soe,Eoe]=Noe(cS),J3=x.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:i,getValueLabel:a=Coe,...o}=t;(i||i===0)&&!XT(i)&&console.error(Toe(`${i}`,"Progress"));const c=XT(i)?i:uS;r!==null&&!JT(r,c)&&console.error(koe(`${r}`,"Progress"));const u=JT(r,c)?r:null,h=Ux(u)?a(u,c):void 0;return s.jsx(Soe,{scope:n,value:u,max:c,children:s.jsx(Ge.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":Ux(u)?u:void 0,"aria-valuetext":h,role:"progressbar","data-state":n5(u,c),"data-value":u??void 0,"data-max":c,...o,ref:e})})});J3.displayName=cS;var e5="ProgressIndicator",t5=x.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,i=Eoe(e5,n);return s.jsx(Ge.div,{"data-state":n5(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:e})});t5.displayName=e5;function Coe(t,e){return`${Math.round(t/e*100)}%`}function n5(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Ux(t){return typeof t=="number"}function XT(t){return Ux(t)&&!isNaN(t)&&t>0}function JT(t,e){return Ux(t)&&!isNaN(t)&&t<=e&&t>=0}function Toe(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${uS}\`.`}function koe(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${uS} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var r5=J3,Poe=t5;const s5=x.forwardRef(({className:t,value:e,...n},r)=>s.jsx(r5,{ref:r,className:Je("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",t),...n,children:s.jsx(Poe,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));s5.displayName=r5.displayName;const Jl={electronics:{category:"Électronique",icon:Yc,color:"text-blue-600",co2PerItem:85,waterPerItem:1200,energyPerItem:450,wastePerItem:2.5,description:"Smartphones, ordinateurs, accessoires tech"},books:{category:"Livres & Cours",icon:w4,color:"text-green-600",co2PerItem:8.5,waterPerItem:85,energyPerItem:12,wastePerItem:.8,description:"Manuels, livres, notes de cours"},furniture:{category:"Mobilier",icon:px,color:"text-purple-600",co2PerItem:45,waterPerItem:350,energyPerItem:180,wastePerItem:15,description:"Meubles, déco, électroménager"},clothing:{category:"Vêtements",icon:oN,color:"text-pink-600",co2PerItem:22,waterPerItem:2700,energyPerItem:35,wastePerItem:.5,description:"Vêtements, chaussures, accessoires"}},Ioe=[{id:"first_transaction",name:"Premier Pas",icon:"🌱",threshold:1,description:"Première transaction écologique"},{id:"co2_saver_10",name:"Éco-Warrior",icon:"🌍",threshold:10,description:"10 kg CO₂ économisés"},{id:"co2_saver_50",name:"Planète Protecteur",icon:"🛡️",threshold:50,description:"50 kg CO₂ économisés"},{id:"co2_saver_100",name:"Héros Climatique",icon:"🦸",threshold:100,description:"100 kg CO₂ économisés"},{id:"water_saver",name:"Gardien de l'Eau",icon:"💧",threshold:1e3,description:"1000L d'eau économisés"},{id:"recycling_master",name:"Maître du Recyclage",icon:"♻️",threshold:20,description:"20 transactions de seconde main"},{id:"donation_hero",name:"Ange du Don",icon:"😇",threshold:5,description:"5 dons gratuits"},{id:"monthly_champion",name:"Champion Mensuel",icon:"🏆",threshold:10,description:"10 transactions en un mois"}],Ru=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},Aoe=()=>{const{currentUser:t,userProfile:e}=Tn(),[n,r]=x.useState({totalCo2Saved:0,totalWaterSaved:0,totalEnergySaved:0,totalWasteAvoided:0,transactionsByCategory:{},monthlyImpact:[],badges:[],rank:"Débutant",percentile:0}),[i,a]=x.useState([]),[o,c]=x.useState(!0),[u,h]=x.useState("all");x.useEffect(()=>{t&&f()},[t,u]);const f=async()=>{if(t){c(!0);try{const y=cn(Vt(Oe,"listings"),In("sellerId","==",t.uid)),C=await An(y),R=[];C.forEach(B=>{const O=B.data();R.push({id:B.id,...O,createdAt:Ru(O.createdAt),updatedAt:Ru(O.updatedAt)})}),a(R);const M=p(R,u);r(M),await N(M)}catch(y){console.error("Erreur lors du chargement des données environnementales:",y)}finally{c(!1)}}},p=(y,C)=>{const R=new Date;let M=y;if(C==="month"){const te=new Date(R.getFullYear(),R.getMonth()-1,R.getDate());M=y.filter(re=>Ru(re.createdAt)>=te)}else if(C==="year"){const te=new Date(R.getFullYear()-1,R.getMonth(),R.getDate());M=y.filter(re=>Ru(re.createdAt)>=te)}let B=0,O=0,D=0,F=0;const I={};M.forEach(te=>{const re=Jl[te.category]||Jl.electronics,K=1;let U=1;te.transactionType==="donation"?U=1.2:te.transactionType==="exchange"&&(U=.8),B+=re.co2PerItem*K*U,O+=re.waterPerItem*K*U,D+=re.energyPerItem*K*U,F+=re.wastePerItem*K*U,I[te.category]=(I[te.category]||0)+1});const V=v(y),k=_(y,B,O),{rank:P,percentile:q}=b(B,y.length);return{totalCo2Saved:Math.round(B*10)/10,totalWaterSaved:Math.round(O),totalEnergySaved:Math.round(D*10)/10,totalWasteAvoided:Math.round(F*10)/10,transactionsByCategory:I,monthlyImpact:V,badges:k,rank:P,percentile:q}},v=y=>{const C={};for(let R=11;R>=0;R--){const M=new Date;M.setMonth(M.getMonth()-R);const B=M.toISOString().slice(0,7);C[B]={co2Saved:0,transactions:0,waterSaved:0,energySaved:0}}return y.forEach(R=>{const B=Ru(R.createdAt).toISOString().slice(0,7);if(C[B]){const O=Jl[R.category]||Jl.electronics;let D=1;R.transactionType==="donation"?D=1.2:R.transactionType==="exchange"&&(D=.8),C[B].co2Saved+=O.co2PerItem*D,C[B].waterSaved+=O.waterPerItem*D,C[B].energySaved+=O.energyPerItem*D,C[B].transactions+=1}}),Object.entries(C).map(([R,M])=>({month:R,co2Saved:Math.round(M.co2Saved*10)/10,transactions:M.transactions,waterSaved:Math.round(M.waterSaved),energySaved:Math.round(M.energySaved*10)/10}))},_=(y,C,R)=>{const M=[];y.length>=1&&M.push("first_transaction"),C>=10&&M.push("co2_saver_10"),C>=50&&M.push("co2_saver_50"),C>=100&&M.push("co2_saver_100"),R>=1e3&&M.push("water_saver"),y.length>=20&&M.push("recycling_master"),y.filter(F=>F.transactionType==="donation").length>=5&&M.push("donation_hero");const O=new Date().toISOString().slice(0,7);return y.filter(F=>Ru(F.createdAt).toISOString().slice(0,7)===O).length>=10&&M.push("monthly_champion"),M},b=(y,C)=>{let R="Débutant",M=0;return y>=200?(R="Légende Écologique",M=95):y>=100?(R="Maître Environnemental",M=85):y>=50?(R="Expert Vert",M=70):y>=25?(R="Éco-Warrior",M=50):y>=10?(R="Protecteur",M=30):y>=5&&(R="Apprenti Vert",M=15),{rank:R,percentile:M}},N=async y=>{if(t)try{const C=pt(Oe,"users",t.uid);await nn(C,{co2Saved:y.totalCo2Saved,environmentalRank:y.rank,environmentalBadges:y.badges,lastEnvironmentalUpdate:new Date})}catch(C){console.error("Erreur lors de la mise à jour des données environnementales:",C)}},S=async()=>{const y=`🌍 Mon impact écologique sur StudyMarket :

🌱 ${n.totalCo2Saved} kg CO₂ économisés
💧 ${n.totalWaterSaved} L d'eau préservés
⚡ ${n.totalEnergySaved} kWh d'énergie économisés
🏆 Rang : ${n.rank}

Rejoignez la communauté étudiante éco-responsable ! 🎓`;if(navigator.share)try{await navigator.share({title:"Mon Impact Écologique - StudyMarket",text:y,url:window.location.origin})}catch{navigator.clipboard.writeText(y)}else navigator.clipboard.writeText(y)},w=()=>{const y={user:e==null?void 0:e.displayName,date:new Date().toISOString(),impact:n,transactions:i.length,period:u},C=new Blob([JSON.stringify(y,null,2)],{type:"application/json"}),R=URL.createObjectURL(C),M=document.createElement("a");M.href=R,M.download=`impact-ecologique-${new Date().toISOString().slice(0,10)}.json`,M.click(),URL.revokeObjectURL(R)};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(_i,{className:"w-8 h-8 text-green-600"}),"Mon Impact Écologique"]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Découvrez votre contribution à la protection de l'environnement"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Y,{variant:"outline",onClick:S,className:"flex items-center gap-2",children:[s.jsx(aN,{className:"w-4 h-4"}),"Partager"]}),s.jsxs(Y,{variant:"outline",onClick:w,className:"flex items-center gap-2",children:[s.jsx(Ks,{className:"w-4 h-4"}),"Exporter"]})]})]}),s.jsx(le,{children:s.jsx(ue,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(mi,{className:"w-5 h-5 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:"Période d'analyse :"})]}),s.jsx("div",{className:"flex gap-2",children:[{key:"month",label:"Ce mois"},{key:"year",label:"Cette année"},{key:"all",label:"Tout"}].map(y=>s.jsx(Y,{variant:u===y.key?"default":"outline",size:"sm",onClick:()=>h(y.key),children:y.label},y.key))})]})})}),o?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Array.from({length:4}).map((y,C)=>s.jsx(le,{className:"animate-pulse",children:s.jsx(ue,{className:"pt-6",children:s.jsx("div",{className:"h-16 bg-muted rounded"})})},C))}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(le,{className:"border-green-200 bg-green-50/50",children:s.jsxs(ue,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-green-700",children:n.totalCo2Saved}),s.jsx("p",{className:"text-sm text-green-600",children:"kg CO₂ économisés"})]}),s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(_i,{className:"w-6 h-6 text-green-600"})})]}),s.jsxs("div",{className:"mt-2 text-xs text-green-600",children:["≈ ",Math.round(n.totalCo2Saved/2.3)," km en voiture évités"]})]})}),s.jsx(le,{className:"border-blue-200 bg-blue-50/50",children:s.jsxs(ue,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-blue-700",children:n.totalWaterSaved.toLocaleString()}),s.jsx("p",{className:"text-sm text-blue-600",children:"L d'eau préservés"})]}),s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(VC,{className:"w-6 h-6 text-blue-600"})})]}),s.jsxs("div",{className:"mt-2 text-xs text-blue-600",children:["≈ ",Math.round(n.totalWaterSaved/150)," douches économisées"]})]})}),s.jsx(le,{className:"border-yellow-200 bg-yellow-50/50",children:s.jsxs(ue,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-yellow-700",children:n.totalEnergySaved}),s.jsx("p",{className:"text-sm text-yellow-600",children:"kWh économisés"})]}),s.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center",children:s.jsx(ih,{className:"w-6 h-6 text-yellow-600"})})]}),s.jsxs("div",{className:"mt-2 text-xs text-yellow-600",children:["≈ ",Math.round(n.totalEnergySaved/3.5)," jours d'électricité"]})]})}),s.jsx(le,{className:"border-purple-200 bg-purple-50/50",children:s.jsxs(ue,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-purple-700",children:n.totalWasteAvoided}),s.jsx("p",{className:"text-sm text-purple-600",children:"kg déchets évités"})]}),s.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:s.jsx(CG,{className:"w-6 h-6 text-purple-600"})})]}),s.jsxs("div",{className:"mt-2 text-xs text-purple-600",children:["≈ ",Math.round(n.totalWasteAvoided/.5)," sacs poubelle évités"]})]})})]}),s.jsxs(le,{children:[s.jsx(We,{children:s.jsxs(He,{className:"flex items-center gap-2",children:[s.jsx(y4,{className:"w-5 h-5 text-yellow-600"}),"Votre Rang Écologique"]})}),s.jsxs(ue,{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold text-primary",children:n.rank}),s.jsxs("p",{className:"text-muted-foreground",children:["Vous êtes dans le top ",100-n.percentile,"% des utilisateurs"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-3xl",children:"🏆"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Rang actuel"})]})]}),s.jsx(s5,{value:n.percentile,className:"h-3"}),s.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground mt-2",children:[s.jsx("span",{children:"Débutant"}),s.jsx("span",{children:"Légende Écologique"})]})]})]}),s.jsxs(eu,{defaultValue:"overview",className:"space-y-4",children:[s.jsxs(Fl,{className:"grid w-full grid-cols-4",children:[s.jsx(un,{value:"overview",children:"Vue d'ensemble"}),s.jsx(un,{value:"categories",children:"Par catégorie"}),s.jsx(un,{value:"badges",children:"Badges"}),s.jsx(un,{value:"methodology",children:"Méthodologie"})]}),s.jsxs(dn,{value:"overview",className:"space-y-6",children:[s.jsxs(le,{children:[s.jsxs(We,{children:[s.jsxs(He,{className:"flex items-center gap-2",children:[s.jsx(S4,{className:"w-5 h-5"}),"Évolution Mensuelle"]}),s.jsx(Pt,{children:"Votre impact environnemental au cours des 12 derniers mois"})]}),s.jsx(ue,{children:s.jsx("div",{className:"space-y-4",children:n.monthlyImpact.slice(-6).map((y,C)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),s.jsx("span",{className:"font-medium",children:new Date(y.month+"-01").toLocaleDateString("fr-FR",{month:"long",year:"numeric"})})]}),s.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"font-semibold text-green-600",children:[y.co2Saved," kg"]}),s.jsx("div",{className:"text-muted-foreground",children:"CO₂"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"font-semibold text-blue-600",children:[y.waterSaved," L"]}),s.jsx("div",{className:"text-muted-foreground",children:"Eau"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-semibold text-primary",children:y.transactions}),s.jsx("div",{className:"text-muted-foreground",children:"Transactions"})]})]})]},y.month))})})]}),s.jsxs(le,{children:[s.jsxs(We,{children:[s.jsxs(He,{className:"flex items-center gap-2",children:[s.jsx(C4,{className:"w-5 h-5"}),"Équivalences Concrètes"]}),s.jsx(Pt,{children:"Votre impact traduit en équivalences du quotidien"})]}),s.jsx(ue,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-50 rounded-lg",children:[s.jsx(N4,{className:"w-8 h-8 text-green-600"}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold",children:[Math.round(n.totalCo2Saved/2.3)," km"]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"de trajet en voiture évités"})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-blue-50 rounded-lg",children:[s.jsx(IG,{className:"w-8 h-8 text-blue-600"}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold",children:[Math.round(n.totalCo2Saved/22)," arbres"]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"plantés (équivalent CO₂)"})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-yellow-50 rounded-lg",children:[s.jsx(fG,{className:"w-8 h-8 text-yellow-600"}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold",children:[Math.round(n.totalEnergySaved/24)," jours"]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"de consommation électrique"})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-purple-50 rounded-lg",children:[s.jsx(VC,{className:"w-8 h-8 text-purple-600"}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold",children:[Math.round(n.totalWaterSaved/150)," douches"]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"de 10 minutes économisées"})]})]})]})})]})]}),s.jsx(dn,{value:"categories",className:"space-y-6",children:s.jsxs(le,{children:[s.jsxs(We,{children:[s.jsxs(He,{className:"flex items-center gap-2",children:[s.jsx(gn,{className:"w-5 h-5"}),"Impact par Catégorie"]}),s.jsx(Pt,{children:"Détail de votre impact selon les types d'objets échangés"})]}),s.jsx(ue,{children:s.jsx("div",{className:"space-y-4",children:Object.entries(n.transactionsByCategory).map(([y,C])=>{const R=Jl[y]||Jl.electronics,M=R.icon,B=C*R.co2PerItem;return s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-muted flex items-center justify-center",children:s.jsx(M,{className:`w-5 h-5 ${R.color}`})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:R.category}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[C," transaction",C>1?"s":""]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-semibold text-green-600",children:[Math.round(B*10)/10," kg CO₂"]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[Math.round(C*R.waterPerItem)," L eau"]})]})]},y)})})})]})}),s.jsx(dn,{value:"badges",className:"space-y-6",children:s.jsxs(le,{children:[s.jsxs(We,{children:[s.jsxs(He,{className:"flex items-center gap-2",children:[s.jsx(u1,{className:"w-5 h-5"}),"Badges Écologiques"]}),s.jsx(Pt,{children:"Vos récompenses pour votre engagement environnemental"})]}),s.jsx(ue,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Ioe.map(y=>{const C=n.badges.includes(y.id);return s.jsx("div",{className:`p-4 rounded-lg border-2 transition-all ${C?"border-green-200 bg-green-50":"border-gray-200 bg-gray-50 opacity-60"}`,children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl mb-2",children:y.icon}),s.jsx("h3",{className:`font-semibold ${C?"text-green-800":"text-gray-600"}`,children:y.name}),s.jsx("p",{className:`text-sm ${C?"text-green-600":"text-gray-500"}`,children:y.description}),C&&s.jsx(tt,{className:"mt-2 bg-green-100 text-green-800",children:"Obtenu !"})]})},y.id)})})})]})}),s.jsx(dn,{value:"methodology",className:"space-y-6",children:s.jsxs(le,{children:[s.jsxs(We,{children:[s.jsxs(He,{className:"flex items-center gap-2",children:[s.jsx(xl,{className:"w-5 h-5"}),"Méthodologie de Calcul"]}),s.jsx(Pt,{children:"Comment nous calculons votre impact environnemental"})]}),s.jsxs(ue,{className:"space-y-6",children:[s.jsxs(Ut,{children:[s.jsx(xl,{className:"h-4 w-4"}),s.jsx($t,{children:"Nos calculs sont basés sur des études scientifiques et des données de l'ADEME (Agence de l'Environnement et de la Maîtrise de l'Énergie)."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Principe de Base"}),s.jsx("p",{className:"text-muted-foreground",children:"Chaque objet acheté d'occasion évite la production d'un objet neuf. Nous calculons l'impact environnemental évité en nous basant sur l'empreinte carbone, hydrique et énergétique de la production de chaque catégorie d'objets."}),s.jsx("h3",{className:"text-lg font-semibold",children:"Facteurs de Calcul par Catégorie"}),s.jsx("div",{className:"space-y-3",children:Object.entries(Jl).map(([y,C])=>{const R=C.icon;return s.jsxs("div",{className:"p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(R,{className:`w-4 h-4 ${C.color}`}),s.jsx("span",{className:"font-medium",children:C.category})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"CO₂:"}),s.jsxs("span",{className:"ml-1 font-medium",children:[C.co2PerItem," kg"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Eau:"}),s.jsxs("span",{className:"ml-1 font-medium",children:[C.waterPerItem," L"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Énergie:"}),s.jsxs("span",{className:"ml-1 font-medium",children:[C.energyPerItem," kWh"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Déchets:"}),s.jsxs("span",{className:"ml-1 font-medium",children:[C.wastePerItem," kg"]})]})]})]},y)})}),s.jsx("h3",{className:"text-lg font-semibold",children:"Facteurs de Pondération"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Dd,{className:"w-4 h-4 text-green-600"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Dons gratuits :"})," +20% d'impact (encourage le partage)"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(no,{className:"w-4 h-4 text-purple-600"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Échanges/Troc :"})," -20% d'impact (pas de transaction monétaire)"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(gn,{className:"w-4 h-4 text-blue-600"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Ventes :"})," Impact standard (100%)"]})]})]}),s.jsx("h3",{className:"text-lg font-semibold",children:"Sources et Références"}),s.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[s.jsx("li",{children:"• ADEME - Base Carbone® pour les facteurs d'émission"}),s.jsx("li",{children:"• Water Footprint Network pour l'empreinte hydrique"}),s.jsx("li",{children:"• IEA (International Energy Agency) pour l'énergie"}),s.jsx("li",{children:"• Ellen MacArthur Foundation pour l'économie circulaire"})]})]})]})]})})]})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(le,{children:s.jsxs(ue,{className:"pt-6 text-center",children:[s.jsx(_i,{className:"w-12 h-12 text-green-600 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir votre impact"}),s.jsx("p",{className:"text-muted-foreground",children:"Découvrez combien vous contribuez à la protection de l'environnement"})]})})})},Ug=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},$x=t=>{if(t==null)return null;if(Array.isArray(t))return t.map($x).filter(e=>e!==void 0);if(typeof t=="object"&&t!==null){const e={};return Object.keys(t).forEach(n=>{const r=$x(t[n]);r!==void 0&&(e[n]=r)}),e}return t},ek=[{value:"all",label:"Toutes catégories"},{value:"electronics",label:"Électronique"},{value:"books",label:"Livres & Cours"},{value:"furniture",label:"Mobilier"},{value:"clothing",label:"Vêtements"},{value:"services",label:"Services"},{value:"housing",label:"Logement"},{value:"jobs",label:"Jobs & Stages"}],tk=[{value:"all",label:"Tous types"},{value:"sale",label:"Vente"},{value:"donation",label:"Don"},{value:"exchange",label:"Échange"},{value:"service",label:"Service"}],Roe=[{value:"all",label:"Toutes universités"},{value:"sorbonne",label:"Sorbonne Université"},{value:"dauphine",label:"Université Paris-Dauphine"},{value:"polytechnique",label:"École Polytechnique"},{value:"ens",label:"ENS Paris"},{value:"centrale",label:"CentraleSupélec"}],Moe=()=>{const{currentUser:t,userProfile:e}=Tn(),[n,r]=x.useState([]),[i,a]=x.useState([]),[o,c]=x.useState({totalSearches:0,activeAlerts:0,totalMatches:0,newMatches:0}),[u,h]=x.useState({searches:!0,matches:!0,creating:!1,updating:!1}),[f,p]=x.useState(!1),[v,_]=x.useState(null),[b,N]=x.useState({name:"",query:"",category:"all",transactionType:"all",university:"all",minPrice:"",maxPrice:"",alertsEnabled:!0,notificationFrequency:"daily",notificationMethods:{email:!0,push:!0,sms:!1}});x.useEffect(()=>{t&&(S(),w())},[t]);const S=async()=>{if(t)try{h(q=>({...q,searches:!0}));const I=cn(Vt(Oe,"savedSearches"),In("userId","==",t.uid),Zs(50)),V=await An(I),k=[];V.forEach(q=>{const te=q.data();k.push({id:q.id,...te,createdAt:Ug(te.createdAt),updatedAt:Ug(te.updatedAt),lastNotified:te.lastNotified?Ug(te.lastNotified):void 0})}),k.sort((q,te)=>te.createdAt.getTime()-q.createdAt.getTime()),r(k);const P=k.filter(q=>q.alertsEnabled).length;c(q=>({...q,totalSearches:k.length,activeAlerts:P}))}catch(I){console.error("Erreur lors du chargement des recherches sauvegardées:",I),me.error("Erreur lors du chargement des recherches sauvegardées")}finally{h(I=>({...I,searches:!1}))}},w=async()=>{if(t)try{h(q=>({...q,matches:!0}));const I=cn(Vt(Oe,"alertMatches"),In("userId","==",t.uid),Zs(100)),V=await An(I),k=[];V.forEach(q=>{const te=q.data();k.push({id:q.id,...te,matchedAt:Ug(te.matchedAt)})}),k.sort((q,te)=>te.matchedAt.getTime()-q.matchedAt.getTime()),a(k);const P=k.filter(q=>!q.seen).length;c(q=>({...q,totalMatches:k.length,newMatches:P}))}catch(I){console.error("Erreur lors du chargement des correspondances:",I),me.error("Erreur lors du chargement des correspondances")}finally{h(I=>({...I,matches:!1}))}},y=async()=>{if(!t||!b.name.trim()){me.error("Veuillez remplir le nom de la recherche");return}h(I=>({...I,creating:!0}));try{const I={};if(b.query&&b.query.trim()&&(I.query=b.query.trim()),b.category&&b.category!=="all"&&(I.category=b.category),b.transactionType&&b.transactionType!=="all"&&(I.transactionType=b.transactionType),b.university&&b.university!=="all"&&(I.university=b.university),b.minPrice&&b.minPrice.trim()){const P=parseFloat(b.minPrice);!isNaN(P)&&P>=0&&(I.minPrice=P)}if(b.maxPrice&&b.maxPrice.trim()){const P=parseFloat(b.maxPrice);!isNaN(P)&&P>=0&&(I.maxPrice=P)}const V={userId:t.uid,name:b.name.trim(),filters:I,alertsEnabled:b.alertsEnabled,notificationFrequency:b.notificationFrequency,notificationMethods:{email:b.notificationMethods.email,push:b.notificationMethods.push,sms:b.notificationMethods.sms},matchCount:0,createdAt:new Date,updatedAt:new Date},k=$x(V);await vl(Vt(Oe,"savedSearches"),k),me.success("Alerte créée avec succès !"),p(!1),O(),S()}catch(I){console.error("Erreur lors de la création de l'alerte:",I),me.error("Erreur lors de la création de l'alerte")}finally{h(I=>({...I,creating:!1}))}},C=async(I,V)=>{try{h(P=>({...P,updating:!0}));const k=$x({...V,updatedAt:new Date});await nn(pt(Oe,"savedSearches",I),k),me.success("Recherche mise à jour !"),S()}catch(k){console.error("Erreur lors de la mise à jour:",k),me.error("Erreur lors de la mise à jour")}finally{h(k=>({...k,updating:!1}))}},R=async I=>{if(window.confirm("Êtes-vous sûr de vouloir supprimer cette recherche sauvegardée ?"))try{await Ad(pt(Oe,"savedSearches",I)),me.success("Recherche supprimée !"),S()}catch(V){console.error("Erreur lors de la suppression:",V),me.error("Erreur lors de la suppression")}},M=async(I,V)=>{await C(I,{alertsEnabled:V})},B=async I=>{try{await nn(pt(Oe,"alertMatches",I),{seen:!0,seenAt:new Date}),w()}catch(V){console.error("Erreur lors du marquage comme vu:",V)}},O=()=>{N({name:"",query:"",category:"all",transactionType:"all",university:"all",minPrice:"",maxPrice:"",alertsEnabled:!0,notificationFrequency:"daily",notificationMethods:{email:!0,push:!0,sms:!1}}),_(null)},D=I=>{try{return fh(I,{addSuffix:!0,locale:Tr})}catch{return"Date inconnue"}},F=I=>{const V=[];if(I.query&&V.push(`"${I.query}"`),I.category&&I.category!=="all"){const k=ek.find(P=>P.value===I.category);k&&V.push(k.label)}if(I.transactionType&&I.transactionType!=="all"){const k=tk.find(P=>P.value===I.transactionType);k&&V.push(k.label)}return I.minPrice!==void 0&&V.push(`≥ ${I.minPrice}€`),I.maxPrice!==void 0&&V.push(`≤ ${I.maxPrice}€`),V.length>0?V.join(" • "):"Tous les critères"};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(di,{className:"w-8 h-8 text-primary"}),"Mes Alertes",o.totalSearches>0&&s.jsx(tt,{variant:"secondary\\",className:"ml-1",children:o.totalSearches})]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Gérez vos recherches sauvegardées et recevez des notifications"})]}),s.jsxs(ra,{open:f,onOpenChange:p,children:[s.jsx(pd,{asChild:!0,children:s.jsxs(Y,{className:"bg-gradient-to-r from-primary to-secondary",children:[s.jsx(gc,{className:"w-4 h-4 mr-2"}),"Nouvelle Alerte"]})}),s.jsxs(wi,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(sa,{children:[s.jsxs(bi,{className:"flex items-center gap-2",children:[s.jsx(Ql,{className:"w-5 h-5"}),"Créer une Alerte Personnalisée"]}),s.jsx(xc,{children:"Définissez vos critères de recherche et recevez des notifications pour les nouvelles annonces correspondantes"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:"alert-name",children:"Nom de l'alerte *"}),s.jsx(qe,{id:"alert-name",value:b.name,onChange:I=>N(V=>({...V,name:I.target.value})),placeholder:"Ex: MacBook Pro pas cher",className:"mt-1"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[s.jsx(My,{className:"w-4 h-4"}),"Critères de Recherche"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:"search-query",children:"Mots-clés"}),s.jsx(qe,{id:"search-query",value:b.query,onChange:I=>N(V=>({...V,query:I.target.value})),placeholder:"Ex: MacBook, iPhone, livre...",className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:"search-category",children:"Catégorie"}),s.jsxs(Jt,{value:b.category,onValueChange:I=>N(V=>({...V,category:I})),children:[s.jsx(qt,{className:"mt-1",children:s.jsx(en,{})}),s.jsx(Ht,{children:ek.map(I=>s.jsx($e,{value:I.value,children:I.label},I.value))})]})]}),s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:"transaction-type",children:"Type de transaction"}),s.jsxs(Jt,{value:b.transactionType,onValueChange:I=>N(V=>({...V,transactionType:I})),children:[s.jsx(qt,{className:"mt-1",children:s.jsx(en,{})}),s.jsx(Ht,{children:tk.map(I=>s.jsx($e,{value:I.value,children:I.label},I.value))})]})]}),s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:"search-university",children:"Université"}),s.jsxs(Jt,{value:b.university,onValueChange:I=>N(V=>({...V,university:I})),children:[s.jsx(qt,{className:"mt-1",children:s.jsx(en,{})}),s.jsx(Ht,{children:Roe.map(I=>s.jsx($e,{value:I.value,children:I.label},I.value))})]})]}),s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:"min-price",children:"Prix minimum (€)"}),s.jsx(qe,{id:"min-price",type:"number",value:b.minPrice,onChange:I=>N(V=>({...V,minPrice:I.target.value})),placeholder:"0",className:"mt-1",min:"0"})]}),s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:"max-price",children:"Prix maximum (€)"}),s.jsx(qe,{id:"max-price",type:"number",value:b.maxPrice,onChange:I=>N(V=>({...V,maxPrice:I.target.value})),placeholder:"1000",className:"mt-1",min:"0"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[s.jsx(di,{className:"w-4 h-4"}),"Notifications"]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:"alerts-enabled",children:"Activer les notifications"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevoir des alertes pour cette recherche"})]}),s.jsx(er,{id:"alerts-enabled",checked:b.alertsEnabled,onCheckedChange:I=>N(V=>({...V,alertsEnabled:I}))})]}),b.alertsEnabled&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx(Ee,{children:"Fréquence des notifications"}),s.jsx("div",{className:"mt-2 space-y-2",children:[{value:"instant",label:"Instantané",description:"Dès qu'une nouvelle annonce correspond"},{value:"daily",label:"Quotidien",description:"Un résumé par jour"},{value:"weekly",label:"Hebdomadaire",description:"Un résumé par semaine"}].map(I=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",id:I.value,name:"frequency",value:I.value,checked:b.notificationFrequency===I.value,onChange:V=>N(k=>({...k,notificationFrequency:V.target.value})),className:"rounded border-border"}),s.jsx(Ee,{htmlFor:I.value,className:"cursor-pointer",children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:I.label}),s.jsx("div",{className:"text-sm text-muted-foreground",children:I.description})]})})]},I.value))})]}),s.jsxs("div",{children:[s.jsx(Ee,{children:"Méthodes de notification"}),s.jsxs("div",{className:"mt-2 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(us,{className:"w-4 h-4 text-blue-600"}),s.jsx(Ee,{htmlFor:"email-notifications",children:"Email"})]}),s.jsx(er,{id:"email-notifications",checked:b.notificationMethods.email,onCheckedChange:I=>N(V=>({...V,notificationMethods:{...V.notificationMethods,email:I}}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(di,{className:"w-4 h-4 text-green-600"}),s.jsx(Ee,{htmlFor:"push-notifications",children:"Notifications push"})]}),s.jsx(er,{id:"push-notifications",checked:b.notificationMethods.push,onCheckedChange:I=>N(V=>({...V,notificationMethods:{...V.notificationMethods,push:I}}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(FC,{className:"w-4 h-4 text-purple-600"}),s.jsx(Ee,{htmlFor:"sms-notifications",children:"SMS"}),s.jsx(tt,{variant:"outline",className:"text-xs",children:"Bientôt"})]}),s.jsx(er,{id:"sms-notifications",checked:b.notificationMethods.sms,onCheckedChange:I=>N(V=>({...V,notificationMethods:{...V.notificationMethods,sms:I}})),disabled:!0})]})]})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[s.jsx(Y,{variant:"outline",onClick:()=>p(!1),children:"Annuler"}),s.jsx(Y,{onClick:y,disabled:u.creating||!b.name.trim(),children:u.creating?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Création..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ql,{className:"w-4 h-4 mr-2"}),"Créer l'alerte"]})})]})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(le,{children:s.jsx(ue,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:o.totalSearches}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recherches sauvées"})]}),s.jsx(gr,{className:"w-8 h-8 text-blue-600"})]})})}),s.jsx(le,{children:s.jsx(ue,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:o.activeAlerts}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Alertes actives"})]}),s.jsx(di,{className:"w-8 h-8 text-green-600"})]})})}),s.jsx(le,{children:s.jsx(ue,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:o.totalMatches}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Correspondances"})]}),s.jsx(Ql,{className:"w-8 h-8 text-purple-600"})]})})}),s.jsx(le,{children:s.jsx(ue,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-orange-600",children:o.newMatches}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouvelles"})]}),s.jsx(ih,{className:"w-8 h-8 text-orange-600"})]})})})]}),s.jsxs(eu,{defaultValue:"searches",className:"space-y-4",children:[s.jsxs(Fl,{className:"grid w-full grid-cols-2",children:[s.jsxs(un,{value:"searches",className:"flex items-center gap-2",children:[s.jsx(gr,{className:"w-4 h-4"}),"Mes Recherches",o.totalSearches>0&&s.jsx(tt,{variant:"secondary\\",className:"ml-1",children:o.totalSearches})]}),s.jsxs(un,{value:"matches",className:"flex items-center gap-2",children:[s.jsx(Ql,{className:"w-4 h-4"}),"Correspondances",o.newMatches>0&&s.jsx(tt,{className:"ml-1 bg-orange-500",children:o.newMatches})]})]}),s.jsx(dn,{value:"searches",className:"space-y-4",children:s.jsxs(le,{children:[s.jsxs(We,{children:[s.jsxs(He,{className:"flex items-center gap-2",children:[s.jsx(iN,{className:"w-5 h-5"}),"Recherches Sauvegardées"]}),s.jsx(Pt,{children:"Gérez vos alertes et critères de recherche personnalisés"})]}),s.jsx(ue,{children:u.searches?s.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((I,V)=>s.jsxs("div",{className:"border rounded-lg p-4 animate-pulse",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"h-5 bg-muted rounded w-1/3"}),s.jsx("div",{className:"h-6 bg-muted rounded w-16"})]}),s.jsx("div",{className:"h-4 bg-muted rounded w-2/3 mb-2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]},V))}):n.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(gr,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune recherche sauvegardée"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Créez votre première alerte pour être notifié des nouvelles annonces"}),s.jsxs(Y,{onClick:()=>p(!0),children:[s.jsx(gc,{className:"w-4 h-4 mr-2"}),"Créer ma première alerte"]})]}):s.jsx("div",{className:"space-y-4",children:n.map(I=>s.jsxs("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h3",{className:"font-semibold",children:I.name}),I.alertsEnabled?s.jsxs(tt,{className:"bg-green-100 text-green-800",children:[s.jsx(di,{className:"w-3 h-3 mr-1"}),"Actif"]}):s.jsxs(tt,{variant:"secondary",children:[s.jsx(zC,{className:"w-3 h-3 mr-1"}),"Pausé"]})]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:F(I.filters)}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(mi,{className:"w-3 h-3"}),"Créé ",D(I.createdAt)]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Ql,{className:"w-3 h-3"}),I.matchCount," correspondance",I.matchCount!==1?"s":""]}),I.lastNotified&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(di,{className:"w-3 h-3"}),"Dernière alerte ",D(I.lastNotified)]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>M(I.id,!I.alertsEnabled),title:I.alertsEnabled?"Désactiver les alertes":"Activer les alertes",children:I.alertsEnabled?s.jsx(zC,{className:"w-4 h-4"}):s.jsx(EG,{className:"w-4 h-4"})}),s.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>{var V,k;_(I),N({name:I.name,query:I.filters.query||"",category:I.filters.category||"all",transactionType:I.filters.transactionType||"all",university:I.filters.university||"all",minPrice:((V=I.filters.minPrice)==null?void 0:V.toString())||"",maxPrice:((k=I.filters.maxPrice)==null?void 0:k.toString())||"",alertsEnabled:I.alertsEnabled,notificationFrequency:I.notificationFrequency,notificationMethods:I.notificationMethods}),p(!0)},title:"Modifier",children:s.jsx(kG,{className:"w-4 h-4"})}),s.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>R(I.id),title:"Supprimer",className:"text-destructive hover:text-destructive",children:s.jsx(Ha,{className:"w-4 h-4"})})]})]}),I.alertsEnabled&&s.jsxs("div",{className:"flex items-center gap-4 text-xs bg-muted/50 rounded p-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx($n,{className:"w-3 h-3"}),s.jsxs("span",{children:["Fréquence: ",I.notificationFrequency==="instant"?"Instantané":I.notificationFrequency==="daily"?"Quotidien":"Hebdomadaire"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[I.notificationMethods.email&&s.jsx(us,{className:"w-3 h-3 text-blue-600\\",title:"Email activé"}),I.notificationMethods.push&&s.jsx(di,{className:"w-3 h-3 text-green-600\\",title:"Push activé"}),I.notificationMethods.sms&&s.jsx(FC,{className:"w-3 h-3 text-purple-600\\",title:"SMS activé"})]})]})]},I.id))})})]})}),s.jsx(dn,{value:"matches",className:"space-y-4",children:s.jsxs(le,{children:[s.jsxs(We,{children:[s.jsxs(He,{className:"flex items-center gap-2",children:[s.jsx(Ql,{className:"w-5 h-5"}),"Correspondances Trouvées"]}),s.jsx(Pt,{children:"Les annonces qui correspondent à vos critères de recherche"})]}),s.jsx(ue,{children:u.matches?s.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((I,V)=>s.jsx("div",{className:"border rounded-lg p-4 animate-pulse",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-16 h-16 bg-muted rounded"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]})},V))}):i.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Ql,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune correspondance"}),s.jsx("p",{className:"text-muted-foreground",children:"Aucune annonce ne correspond encore à vos critères. Les nouvelles correspondances apparaîtront ici."})]}):s.jsx("div",{className:"space-y-4",children:i.map(I=>s.jsx("div",{className:`border rounded-lg p-4 transition-colors ${I.seen?"hover:bg-muted/50":"bg-blue-50 border-blue-200"}`,children:s.jsxs("div",{className:"flex items-center gap-4",children:[I.listingImage?s.jsx("img",{src:I.listingImage,alt:I.listingTitle,className:"w-16 h-16 object-cover rounded"}):s.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsx(Package,{className:"w-6 h-6 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx("h3",{className:"font-semibold",children:I.listingTitle}),s.jsxs("div",{className:"flex items-center gap-2",children:[!I.seen&&s.jsx(tt,{className:"bg-blue-500",children:"Nouveau"}),s.jsx("span",{className:"font-semibold text-primary",children:I.listingPrice===0?"Gratuit":`${I.listingPrice}€`})]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx($n,{className:"w-3 h-3"}),"Trouvé ",D(I.matchedAt)]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Y,{variant:"outline",size:"sm",onClick:()=>B(I.id),disabled:I.seen,children:I.seen?s.jsxs(s.Fragment,{children:[s.jsx(Tt,{className:"w-3 h-3 mr-1"}),"Vu"]}):s.jsxs(s.Fragment,{children:[s.jsx(Md,{className:"w-3 h-3 mr-1"}),"Marquer comme vu"]})}),s.jsxs(Y,{size:"sm",onClick:()=>window.open(`/listing/${I.listingId}`,"_blank"),children:[s.jsx(ss,{className:"w-3 h-3 mr-1"}),"Voir l'annonce"]})]})]})]})]})},I.id))})})]})})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(le,{children:s.jsxs(ue,{className:"pt-6 text-center",children:[s.jsx(gr,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour gérer vos alertes"}),s.jsx("p",{className:"text-muted-foreground",children:"Créez des alertes personnalisées pour être notifié des nouvelles annonces"})]})})})},$g=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},nk=[{value:"all",label:"Toutes catégories",icon:gn},{value:"electronics",label:"Électronique",icon:Yc},{value:"books",label:"Livres & Cours",icon:w4},{value:"furniture",label:"Mobilier",icon:px},{value:"clothing",label:"Vêtements",icon:oN},{value:"services",label:"Services",icon:hp},{value:"housing",label:"Logement",icon:px},{value:"jobs",label:"Jobs & Stages",icon:j4}],Doe=[{value:"all",label:"Tous types",icon:gn},{value:"sale",label:"Vente",icon:mx},{value:"donation",label:"Don",icon:Dd},{value:"exchange",label:"Échange",icon:no},{value:"service",label:"Service",icon:hp}],Ooe=[{value:"recent",label:"Plus récents",icon:$n},{value:"oldest",label:"Plus anciens",icon:mi},{value:"price-asc",label:"Prix croissant",icon:LC},{value:"price-desc",label:"Prix décroissant",icon:x4},{value:"title",label:"Titre A-Z",icon:LC},{value:"category",label:"Par catégorie",icon:ym}],Loe=()=>{const{currentUser:t,userProfile:e}=Tn(),[n,r]=x.useState([]),[i,a]=x.useState([]),[o,c]=x.useState({totalFavorites:0,byCategory:{},byTransactionType:{},averagePrice:0,recentlyAdded:0,availableCount:0,soldCount:0}),[u,h]=x.useState({favorites:!0,listings:!0,removing:!1}),[f,p]=x.useState({search:"",category:"all",transactionType:"all",priceRange:"all",availability:"all"}),[v,_]=x.useState("recent"),[b,N]=x.useState("grid"),[S,w]=x.useState([]);x.useEffect(()=>{t&&y()},[t]),x.useEffect(()=>{n.length>0&&C()},[n]);const y=async()=>{if(t)try{h(re=>({...re,favorites:!0}));const P=cn(Vt(Oe,"favorites"),In("userId","==",t.uid),Zs(100)),q=await An(P),te=[];q.forEach(re=>{const K=re.data();te.push({id:re.id,...K,createdAt:$g(K.createdAt),updatedAt:$g(K.updatedAt)})}),te.sort((re,K)=>K.createdAt.getTime()-re.createdAt.getTime()),r(te),R(te)}catch(P){console.error("Erreur lors du chargement des favoris:",P),me.error("Erreur lors du chargement des favoris")}finally{h(P=>({...P,favorites:!1}))}},C=async()=>{try{h(re=>({...re,listings:!0}));const P=n.map(async re=>{try{const K=await cs(pt(Oe,"listings",re.listingId));if(K.exists()){const U=K.data();return{id:K.id,...U,createdAt:$g(U.createdAt),updatedAt:$g(U.updatedAt)}}return null}catch(K){return console.error(`Erreur lors du chargement de l'annonce ${re.listingId}:`,K),null}}),te=(await Promise.all(P)).filter(re=>re!==null);a(te)}catch(P){console.error("Erreur lors du chargement des annonces favorites:",P)}finally{h(P=>({...P,listings:!1}))}},R=P=>{const q={},te={};let re=0,K=0;const U=new Date;U.setDate(U.getDate()-7);let W=0;P.forEach(H=>{q[H.listingCategory]=(q[H.listingCategory]||0)+1,te[H.listingTransactionType]=(te[H.listingTransactionType]||0)+1,H.listingPrice>0&&(re+=H.listingPrice,K++),H.createdAt>=U&&W++}),c({totalFavorites:P.length,byCategory:q,byTransactionType:te,averagePrice:K>0?Math.round(re/K):0,recentlyAdded:W,availableCount:P.length,soldCount:0})},M=async P=>{try{await Ad(pt(Oe,"favorites",P)),me.success("Favori supprimé"),y()}catch(q){console.error("Erreur lors de la suppression:",q),me.error("Erreur lors de la suppression")}},B=async()=>{if(S.length!==0&&window.confirm(`Supprimer ${S.length} favori(s) sélectionné(s) ?`)){h(P=>({...P,removing:!0}));try{const P=S.map(q=>Ad(pt(Oe,"favorites",q)));await Promise.all(P),me.success(`${S.length} favori(s) supprimé(s)`),w([]),y()}catch(P){console.error("Erreur lors de la suppression multiple:",P),me.error("Erreur lors de la suppression")}finally{h(P=>({...P,removing:!1}))}}},O=()=>{const P={user:e==null?void 0:e.displayName,exportDate:new Date().toISOString(),totalFavorites:n.length,favorites:n.map(K=>({title:K.listingTitle,price:K.listingPrice,category:K.listingCategory,transactionType:K.listingTransactionType,seller:K.sellerName,university:K.sellerUniversity,addedDate:K.createdAt.toISOString(),notes:K.notes||"",tags:K.tags}))},q=new Blob([JSON.stringify(P,null,2)],{type:"application/json"}),te=URL.createObjectURL(q),re=document.createElement("a");re.href=te,re.download=`mes-favoris-${new Date().toISOString().slice(0,10)}.json`,re.click(),URL.revokeObjectURL(te)},D=async()=>{const P=`🌟 Mes favoris StudyMarket :

📚 ${o.totalFavorites} annonces sauvegardées
💰 Prix moyen : ${o.averagePrice}€
🆕 ${o.recentlyAdded} ajoutées cette semaine

Découvrez la marketplace étudiante ! 🎓`;if(navigator.share)try{await navigator.share({title:"Mes Favoris - StudyMarket",text:P,url:window.location.origin})}catch{navigator.clipboard.writeText(P),me.success("Lien copié dans le presse-papiers")}else navigator.clipboard.writeText(P),me.success("Lien copié dans le presse-papiers")},F=()=>{let P=n;if(f.search){const q=f.search.toLowerCase();P=P.filter(te=>te.listingTitle.toLowerCase().includes(q)||te.sellerName.toLowerCase().includes(q)||te.tags.some(re=>re.toLowerCase().includes(q)))}if(f.category!=="all"&&(P=P.filter(q=>q.listingCategory===f.category)),f.transactionType!=="all"&&(P=P.filter(q=>q.listingTransactionType===f.transactionType)),f.priceRange!=="all")switch(f.priceRange){case"free":P=P.filter(q=>q.listingPrice===0);break;case"under-50":P=P.filter(q=>q.listingPrice>0&&q.listingPrice<50);break;case"50-200":P=P.filter(q=>q.listingPrice>=50&&q.listingPrice<=200);break;case"over-200":P=P.filter(q=>q.listingPrice>200);break}switch(v){case"recent":P.sort((q,te)=>te.createdAt.getTime()-q.createdAt.getTime());break;case"oldest":P.sort((q,te)=>q.createdAt.getTime()-te.createdAt.getTime());break;case"price-asc":P.sort((q,te)=>q.listingPrice-te.listingPrice);break;case"price-desc":P.sort((q,te)=>te.listingPrice-q.listingPrice);break;case"title":P.sort((q,te)=>q.listingTitle.localeCompare(te.listingTitle));break;case"category":P.sort((q,te)=>q.listingCategory.localeCompare(te.listingCategory));break}return P},I=P=>{try{return fh(P,{addSuffix:!0,locale:Tr})}catch{return"Date inconnue"}},V=(P,q)=>q==="donation"?"Gratuit":q==="exchange"?"Échange":P===0?"Gratuit":new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(P),k=F();return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(Br,{className:"w-8 h-8 text-red-500"}),"Mes Favoris",o.totalFavorites>0&&s.jsx(tt,{variant:"secondary\\",className:"ml-1",children:o.totalFavorites})]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Retrouvez toutes vos annonces sauvegardées"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Y,{variant:"outline",onClick:D,className:"flex items-center gap-2",children:[s.jsx(aN,{className:"w-4 h-4"}),"Partager"]}),s.jsxs(Y,{variant:"outline",onClick:O,className:"flex items-center gap-2",children:[s.jsx(Ks,{className:"w-4 h-4"}),"Exporter"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(le,{children:s.jsx(ue,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:o.totalFavorites}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Favoris totaux"})]}),s.jsx(Br,{className:"w-8 h-8 text-red-500"})]})})}),s.jsx(le,{children:s.jsx(ue,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-2xl font-bold",children:[o.averagePrice,"€"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Prix moyen"})]}),s.jsx(dp,{className:"w-8 h-8 text-green-600"})]})})}),s.jsx(le,{children:s.jsx(ue,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:o.recentlyAdded}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Cette semaine"})]}),s.jsx(ih,{className:"w-8 h-8 text-orange-600"})]})})}),s.jsx(le,{children:s.jsx(ue,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:Object.keys(o.byCategory).length}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Catégories"})]}),s.jsx(ym,{className:"w-8 h-8 text-purple-600"})]})})})]}),s.jsx(le,{children:s.jsx(ue,{className:"pt-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(gr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(qe,{placeholder:"Rechercher dans vos favoris...",value:f.search,onChange:P=>p(q=>({...q,search:P.target.value})),className:"pl-10"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Jt,{value:v,onValueChange:_,children:[s.jsx(qt,{className:"w-40",children:s.jsx(en,{})}),s.jsx(Ht,{children:Ooe.map(P=>s.jsx($e,{value:P.value,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(P.icon,{className:"w-4 h-4"}),P.label]})},P.value))})]}),s.jsxs("div",{className:"flex border rounded-lg overflow-hidden",children:[s.jsx(Y,{variant:b==="grid"?"default":"ghost",size:"icon",onClick:()=>N("grid"),className:"rounded-none",children:s.jsx(gG,{className:"w-4 h-4"})}),s.jsx(Y,{variant:b==="list"?"default":"ghost",size:"icon",onClick:()=>N("list"),className:"rounded-none",children:s.jsx(yG,{className:"w-4 h-4"})})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs(Jt,{value:f.category,onValueChange:P=>p(q=>({...q,category:P})),children:[s.jsx(qt,{children:s.jsx(en,{placeholder:"Catégorie"})}),s.jsx(Ht,{children:nk.map(P=>s.jsx($e,{value:P.value,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(P.icon,{className:"w-4 h-4"}),P.label]})},P.value))})]}),s.jsxs(Jt,{value:f.transactionType,onValueChange:P=>p(q=>({...q,transactionType:P})),children:[s.jsx(qt,{children:s.jsx(en,{placeholder:"Type"})}),s.jsx(Ht,{children:Doe.map(P=>s.jsx($e,{value:P.value,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(P.icon,{className:"w-4 h-4"}),P.label]})},P.value))})]}),s.jsxs(Jt,{value:f.priceRange,onValueChange:P=>p(q=>({...q,priceRange:P})),children:[s.jsx(qt,{children:s.jsx(en,{placeholder:"Prix"})}),s.jsxs(Ht,{children:[s.jsx($e,{value:"all",children:"Tous les prix"}),s.jsx($e,{value:"free",children:"Gratuit"}),s.jsx($e,{value:"under-50",children:"Moins de 50€"}),s.jsx($e,{value:"50-200",children:"50€ - 200€"}),s.jsx($e,{value:"over-200",children:"Plus de 200€"})]})]}),s.jsxs(Jt,{value:f.availability,onValueChange:P=>p(q=>({...q,availability:P})),children:[s.jsx(qt,{children:s.jsx(en,{placeholder:"Disponibilité"})}),s.jsxs(Ht,{children:[s.jsx($e,{value:"all",children:"Toutes"}),s.jsx($e,{value:"available",children:"Disponibles"}),s.jsx($e,{value:"sold",children:"Vendues"}),s.jsx($e,{value:"reserved",children:"Réservées"})]})]})]}),S.length>0&&s.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsxs("span",{className:"text-sm font-medium text-blue-800",children:[S.length," favori(s) sélectionné(s)"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Y,{variant:"outline",size:"sm",onClick:()=>w([]),children:"Désélectionner"}),s.jsx(Y,{variant:"destructive",size:"sm",onClick:B,disabled:u.removing,children:u.removing?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin mr-1"}),"Suppression..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ha,{className:"w-3 h-3 mr-1"}),"Supprimer"]})})]})]})]})})}),s.jsx("div",{className:"space-y-4",children:u.favorites?s.jsx("div",{className:`grid gap-6 ${b==="grid"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3":"grid-cols-1"}`,children:Array.from({length:6}).map((P,q)=>s.jsxs(le,{className:"animate-pulse",children:[s.jsx("div",{className:"aspect-[4/3] bg-muted"}),s.jsxs(ue,{className:"p-4 space-y-2",children:[s.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},q))}):k.length===0?s.jsx(le,{children:s.jsx(ue,{className:"pt-12 pb-12 text-center",children:n.length===0?s.jsxs(s.Fragment,{children:[s.jsx(Br,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun favori"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas encore ajouté d'annonces à vos favoris. Explorez les annonces et cliquez sur ❤️ pour les sauvegarder !"}),s.jsx(Y,{asChild:!0,children:s.jsxs("a",{href:"/listings",children:[s.jsx(gr,{className:"w-4 h-4 mr-2"}),"Explorer les annonces"]})})]}):s.jsxs(s.Fragment,{children:[s.jsx(My,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun résultat"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Aucun favori ne correspond à vos critères de recherche. Essayez de modifier vos filtres."}),s.jsx(Y,{variant:"outline",onClick:()=>p({search:"",category:"all",transactionType:"all",priceRange:"all",availability:"all"}),children:"Réinitialiser les filtres"})]})})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("p",{className:"text-muted-foreground",children:[k.length," favori(s) trouvé(s)",k.length!==n.length&&` sur ${n.length}`]}),s.jsx(Y,{variant:"outline",size:"sm",onClick:()=>{S.length===k.length?w([]):w(k.map(P=>P.id))},children:S.length===k.length?"Désélectionner tout":"Sélectionner tout"})]}),b==="grid"?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:k.map(P=>{const q=i.find(te=>te.id===P.listingId);return s.jsxs("div",{className:"relative group",children:[s.jsx("div",{className:"absolute top-2 left-2 z-10",children:s.jsx("input",{type:"checkbox",checked:S.includes(P.id),onChange:te=>{te.target.checked?w(re=>[...re,P.id]):w(re=>re.filter(K=>K!==P.id))},className:"w-4 h-4 rounded border-border bg-background"})}),s.jsx("div",{className:"absolute top-2 right-2 z-10 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(Y,{variant:"destructive",size:"icon",className:"w-8 h-8",onClick:()=>M(P.id),children:s.jsx(Ha,{className:"w-4 h-4"})})}),q?s.jsx(Sm,{listing:q}):s.jsxs(le,{children:[s.jsx("div",{className:"aspect-[4/3] bg-muted flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-muted-foreground",children:[s.jsx(Ff,{className:"w-8 h-8 mx-auto mb-2"}),s.jsx("p",{className:"text-sm",children:"Annonce non disponible"})]})}),s.jsxs(ue,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold mb-2",children:P.listingTitle}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:V(P.listingPrice,P.listingTransactionType)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Ajouté ",I(P.createdAt)]})]})]})]},P.id)})}):s.jsx("div",{className:"space-y-4",children:k.map(P=>{var te;const q=i.find(re=>re.id===P.listingId);return s.jsx(le,{className:"hover:shadow-md transition-shadow",children:s.jsx(ue,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("input",{type:"checkbox",checked:S.includes(P.id),onChange:re=>{re.target.checked?w(K=>[...K,P.id]):w(K=>K.filter(U=>U!==P.id))},className:"w-4 h-4 rounded border-border"}),s.jsx("div",{className:"w-20 h-20 bg-muted rounded-lg flex items-center justify-center flex-shrink-0",children:P.listingImage?s.jsx("img",{src:P.listingImage,alt:P.listingTitle,className:"w-full h-full object-cover rounded-lg"}):s.jsx(gn,{className:"w-8 h-8 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx("h3",{className:"font-semibold truncate",children:P.listingTitle}),s.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[s.jsx("span",{className:"font-semibold text-primary",children:V(P.listingPrice,P.listingTransactionType)}),(q==null?void 0:q.status)&&s.jsx(tt,{variant:q.status==="active"?"default":"secondary",children:q.status==="active"?"Disponible":q.status==="sold"?"Vendu":"Réservé"})]})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-2",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Gr,{className:"w-3 h-3"}),P.sellerName]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx($r,{className:"w-3 h-3"}),P.sellerUniversity]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(ym,{className:"w-3 h-3"}),(te=nk.find(re=>re.value===P.listingCategory))==null?void 0:te.label]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs text-muted-foreground",children:["Ajouté ",I(P.createdAt)]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Y,{variant:"outline",size:"sm",onClick:()=>window.open(`/listing/${P.listingId}`,"_blank"),children:[s.jsx(ss,{className:"w-3 h-3 mr-1"}),"Voir"]}),s.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>M(P.id),className:"text-destructive hover:text-destructive",children:s.jsx(Ha,{className:"w-3 h-3"})})]})]})]})]})})},P.id)})})]})})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(le,{children:s.jsxs(ue,{className:"pt-6 text-center",children:[s.jsx(Br,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir vos favoris"}),s.jsx("p",{className:"text-muted-foreground",children:"Sauvegardez vos annonces préférées et retrouvez-les facilement"})]})})})},F_=({request:t,userRole:e,onStatusUpdate:n})=>{const{updatePaymentStatus:r,getPaymentInstructions:i}=i0(),a=b=>{switch(b){case"pending":return $n;case"confirmed":return Tt;case"completed":return Tt;case"cancelled":return Rd;case"disputed":return Rn;default:return $n}},o=b=>{switch(b){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"confirmed":return"bg-blue-100 text-blue-800 border-blue-200";case"completed":return"bg-green-100 text-green-800 border-green-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";case"disputed":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},c=b=>{switch(b){case"pending":return"En attente";case"confirmed":return"Confirmé";case"completed":return"Terminé";case"cancelled":return"Annulé";case"disputed":return"Litige";default:return b}},u=b=>({cash:"Espèces",transfer:"Virement bancaire",paypal:"PayPal",lydia:"Lydia"})[b]||b,h=(b,N)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:N||"EUR"}).format(b),f=(b,N)=>{navigator.clipboard.writeText(b),me.success(`${N} copié dans le presse-papiers`)},p=async b=>{try{await r(t.id,b),n==null||n(b)}catch(N){console.error("Erreur lors de la mise à jour du statut:",N)}},v=a(t.status),_=i(t.paymentMethod,t);return s.jsxs(le,{className:"w-full",children:[s.jsx(We,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(zn,{className:"w-6 h-6 text-primary"})}),s.jsxs("div",{children:[s.jsxs(He,{className:"text-lg",children:["Paiement ",u(t.paymentMethod)]}),s.jsxs(Pt,{children:[h(t.amount,t.currency)," • ",e==="buyer"?"Achat":"Vente"]})]})]}),s.jsxs(tt,{className:o(t.status),children:[s.jsx(v,{className:"w-3 h-3 mr-1"}),c(t.status)]})]})}),s.jsxs(ue,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Créé le :"}),s.jsx("p",{className:"font-medium",children:sr(t.createdAt,"PPP à HH:mm",{locale:Tr})})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Dernière mise à jour :"}),s.jsx("p",{className:"font-medium",children:sr(t.updatedAt,"PPP à HH:mm",{locale:Tr})})]})]}),t.paymentMethod==="cash"&&t.meetingLocation&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[s.jsx($r,{className:"w-4 h-4"}),"Détails de la rencontre"]}),s.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg space-y-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground text-sm",children:"Lieu :"}),s.jsx("p",{className:"font-medium",children:t.meetingLocation})]}),t.meetingDateTime&&s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground text-sm",children:"Date et heure :"}),s.jsx("p",{className:"font-medium",children:sr(t.meetingDateTime,"PPP à HH:mm",{locale:Tr})})]})]})]}),t.securityCode&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[s.jsx(Ft,{className:"w-4 h-4"}),"Code de sécurité"]}),s.jsxs("div",{className:"flex items-center gap-2 bg-muted/50 p-3 rounded-lg",children:[s.jsx("code",{className:"font-mono text-lg font-bold",children:t.securityCode}),s.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>f(t.securityCode,"Code de sécurité"),children:s.jsx(E4,{className:"w-4 h-4"})})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Partagez ce code uniquement avec votre interlocuteur lors de la finalisation du paiement."})]}),t.status==="confirmed"&&_.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium",children:"Instructions de paiement"}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 p-3 rounded-lg",children:s.jsx("ul",{className:"space-y-1 text-sm",children:_.map((b,N)=>s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-blue-600 mt-0.5",children:"•"}),s.jsx("span",{children:b})]},N))})})]}),t.notes&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium",children:"Notes"}),s.jsx("p",{className:"text-sm bg-muted/50 p-3 rounded-lg",children:t.notes})]}),s.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e==="seller"&&t.status==="pending"&&s.jsxs(s.Fragment,{children:[s.jsxs(Y,{onClick:()=>p("confirmed"),className:"flex-1",children:[s.jsx(Tt,{className:"w-4 h-4 mr-2"}),"Accepter"]}),s.jsxs(Y,{variant:"outline",onClick:()=>p("cancelled"),className:"flex-1",children:[s.jsx(Rd,{className:"w-4 h-4 mr-2"}),"Refuser"]})]}),e==="buyer"&&t.status==="confirmed"&&s.jsxs(Y,{onClick:()=>p("completed"),className:"flex-1",children:[s.jsx(Tt,{className:"w-4 h-4 mr-2"}),"Marquer comme payé"]}),e==="seller"&&t.status==="confirmed"&&s.jsxs(Y,{onClick:()=>p("completed"),className:"flex-1",children:[s.jsx(Tt,{className:"w-4 h-4 mr-2"}),"Confirmer la réception"]}),(t.status==="pending"||t.status==="confirmed")&&s.jsxs(Y,{variant:"outline",onClick:()=>p("disputed"),className:"text-orange-600 hover:text-orange-700",children:[s.jsx(Rn,{className:"w-4 h-4 mr-2"}),"Signaler un problème"]})]}),t.status==="pending"&&e==="buyer"&&s.jsxs(Ut,{children:[s.jsx($n,{className:"h-4 w-4"}),s.jsx($t,{children:"Votre demande de paiement a été envoyée au vendeur. Vous recevrez une notification dès qu'il l'aura acceptée."})]}),t.status==="confirmed"&&e==="buyer"&&s.jsxs(Ut,{className:"border-green-200 bg-green-50",children:[s.jsx(Tt,{className:"h-4 w-4 text-green-600"}),s.jsx($t,{className:"text-green-800",children:"Le vendeur a accepté votre demande ! Suivez les instructions ci-dessus pour effectuer le paiement."})]}),t.status==="completed"&&s.jsxs(Ut,{className:"border-green-200 bg-green-50",children:[s.jsx(Tt,{className:"h-4 w-4 text-green-600"}),s.jsx($t,{className:"text-green-800",children:"Transaction terminée avec succès ! Merci d'avoir utilisé StudyMarket."})]}),t.status==="disputed"&&s.jsxs(Ut,{className:"border-orange-200 bg-orange-50",children:[s.jsx(Rn,{className:"h-4 w-4 text-orange-600"}),s.jsx($t,{className:"text-orange-800",children:"Un litige a été signalé. Notre équipe support va examiner la situation et vous contacter sous 24h."})]})]})]})},Voe=()=>{const{currentUser:t,userProfile:e}=Tn(),{paymentRequests:n,loading:r,fetchUserPaymentRequests:i,initializePaymentMethods:a}=i0(),[o,c]=x.useState(""),[u,h]=x.useState("all"),[f,p]=x.useState("all"),[v,_]=x.useState({totalRequests:0,pendingRequests:0,completedRequests:0,totalAmount:0,averageAmount:0,byMethod:{},byStatus:{}});x.useEffect(()=>{a()},[a]),x.useEffect(()=>{t&&i(t.uid)},[t,i]),x.useEffect(()=>{b()},[n]);const b=()=>{const R={},M={};let B=0;n.forEach(O=>{R[O.paymentMethod]=(R[O.paymentMethod]||0)+1,M[O.status]=(M[O.status]||0)+1,B+=O.amount}),_({totalRequests:n.length,pendingRequests:M.pending||0,completedRequests:M.completed||0,totalAmount:B,averageAmount:n.length>0?B/n.length:0,byMethod:R,byStatus:M})},N=()=>n.filter(R=>{const M=!o||R.listingId.toLowerCase().includes(o.toLowerCase())||R.id.toLowerCase().includes(o.toLowerCase()),B=u==="all"||R.status===u,O=f==="all"||R.paymentMethod===f;return M&&B&&O}),S=()=>N().filter(R=>R.buyerId===(t==null?void 0:t.uid)),w=()=>N().filter(R=>R.sellerId===(t==null?void 0:t.uid)),y=R=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(R),C=()=>{const R={user:e==null?void 0:e.displayName,exportDate:new Date().toISOString(),stats:v,payments:n.map(D=>({id:D.id,amount:D.amount,currency:D.currency,method:D.paymentMethod,status:D.status,role:D.buyerId===(t==null?void 0:t.uid)?"buyer":"seller",createdAt:D.createdAt.toISOString(),updatedAt:D.updatedAt.toISOString()}))},M=new Blob([JSON.stringify(R,null,2)],{type:"application/json"}),B=URL.createObjectURL(M),O=document.createElement("a");O.href=B,O.download=`paiements-${new Date().toISOString().slice(0,10)}.json`,O.click(),URL.revokeObjectURL(B)};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(RG,{className:"w-8 h-8 text-primary"}),"Mes Paiements",v.totalRequests>0&&s.jsx(tt,{variant:"secondary\\",className:"ml-1",children:v.totalRequests})]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Gérez vos demandes de paiement et suivez vos transactions"})]}),s.jsxs(Y,{variant:"outline",onClick:C,className:"flex items-center gap-2",children:[s.jsx(Ks,{className:"w-4 h-4"}),"Exporter"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(le,{children:s.jsx(ue,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:v.totalRequests}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Demandes totales"})]}),s.jsx(zn,{className:"w-8 h-8 text-blue-600"})]})})}),s.jsx(le,{children:s.jsx(ue,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:v.pendingRequests}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"En attente"})]}),s.jsx($n,{className:"w-8 h-8 text-orange-600"})]})})}),s.jsx(le,{children:s.jsx(ue,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:v.completedRequests}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Terminées"})]}),s.jsx(Tt,{className:"w-8 h-8 text-green-600"})]})})}),s.jsx(le,{children:s.jsx(ue,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:y(v.totalAmount)}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Montant total"})]}),s.jsx(dp,{className:"w-8 h-8 text-purple-600"})]})})})]}),s.jsx(le,{children:s.jsx(ue,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(gr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(qe,{placeholder:"Rechercher par ID de transaction...",value:o,onChange:R=>c(R.target.value),className:"pl-10"})]}),s.jsxs(Jt,{value:u,onValueChange:h,children:[s.jsx(qt,{className:"w-40",children:s.jsx(en,{placeholder:"Statut"})}),s.jsxs(Ht,{children:[s.jsx($e,{value:"all",children:"Tous les statuts"}),s.jsx($e,{value:"pending",children:"En attente"}),s.jsx($e,{value:"confirmed",children:"Confirmé"}),s.jsx($e,{value:"completed",children:"Terminé"}),s.jsx($e,{value:"cancelled",children:"Annulé"}),s.jsx($e,{value:"disputed",children:"Litige"})]})]}),s.jsxs(Jt,{value:f,onValueChange:p,children:[s.jsx(qt,{className:"w-40",children:s.jsx(en,{placeholder:"Méthode"})}),s.jsxs(Ht,{children:[s.jsx($e,{value:"all",children:"Toutes les méthodes"}),s.jsx($e,{value:"cash",children:"Espèces"}),s.jsx($e,{value:"transfer",children:"Virement"}),s.jsx($e,{value:"paypal",children:"PayPal"}),s.jsx($e,{value:"lydia",children:"Lydia"})]})]})]})})}),s.jsxs(eu,{defaultValue:"all",className:"space-y-4",children:[s.jsxs(Fl,{className:"grid w-full grid-cols-3",children:[s.jsxs(un,{value:"all",className:"flex items-center gap-2",children:[s.jsx(zn,{className:"w-4 h-4"}),"Toutes",v.totalRequests>0&&s.jsx(tt,{variant:"secondary\\",className:"ml-1",children:v.totalRequests})]}),s.jsxs(un,{value:"purchases",className:"flex items-center gap-2",children:[s.jsx(f_,{className:"w-4 h-4"}),"Mes achats",S().length>0&&s.jsx(tt,{variant:"secondary\\",className:"ml-1",children:S().length})]}),s.jsxs(un,{value:"sales",className:"flex items-center gap-2",children:[s.jsx(h_,{className:"w-4 h-4"}),"Mes ventes",w().length>0&&s.jsx(tt,{variant:"secondary\\",className:"ml-1",children:w().length})]})]}),s.jsx(dn,{value:"all",className:"space-y-4",children:s.jsxs(le,{children:[s.jsxs(We,{children:[s.jsxs(He,{className:"flex items-center gap-2",children:[s.jsx(S4,{className:"w-5 h-5"}),"Toutes les Demandes de Paiement"]}),s.jsx(Pt,{children:"Historique complet de vos transactions"})]}),s.jsx(ue,{children:r?s.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((R,M)=>s.jsxs("div",{className:"border rounded-lg p-4 animate-pulse",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"h-5 bg-muted rounded w-1/3"}),s.jsx("div",{className:"h-6 bg-muted rounded w-16"})]}),s.jsx("div",{className:"h-4 bg-muted rounded w-2/3 mb-2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]},M))}):N().length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(zn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune demande de paiement"}),s.jsx("p",{className:"text-muted-foreground",children:n.length===0?"Vous n'avez pas encore de demandes de paiement.":"Aucune demande ne correspond à vos critères de recherche."})]}):s.jsx("div",{className:"space-y-4",children:N().map(R=>s.jsx(F_,{request:R,userRole:R.buyerId===t.uid?"buyer":"seller"},R.id))})})]})}),s.jsx(dn,{value:"purchases",className:"space-y-4",children:s.jsxs(le,{children:[s.jsxs(We,{children:[s.jsxs(He,{className:"flex items-center gap-2",children:[s.jsx(f_,{className:"w-5 h-5"}),"Mes Achats"]}),s.jsx(Pt,{children:"Demandes de paiement que vous avez initiées"})]}),s.jsx(ue,{children:S().length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(f_,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucun achat"}),s.jsx("p",{className:"text-muted-foreground",children:"Vous n'avez pas encore initié de demandes de paiement pour vos achats."})]}):s.jsx("div",{className:"space-y-4",children:S().map(R=>s.jsx(F_,{request:R,userRole:"buyer"},R.id))})})]})}),s.jsx(dn,{value:"sales",className:"space-y-4",children:s.jsxs(le,{children:[s.jsxs(We,{children:[s.jsxs(He,{className:"flex items-center gap-2",children:[s.jsx(h_,{className:"w-5 h-5"}),"Mes Ventes"]}),s.jsx(Pt,{children:"Demandes de paiement reçues pour vos annonces"})]}),s.jsx(ue,{children:w().length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(h_,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune vente"}),s.jsx("p",{className:"text-muted-foreground",children:"Vous n'avez pas encore reçu de demandes de paiement pour vos annonces."})]}):s.jsx("div",{className:"space-y-4",children:w().map(R=>s.jsx(F_,{request:R,userRole:"seller"},R.id))})})]})})]}),s.jsxs(Ut,{className:"border-blue-200 bg-blue-50",children:[s.jsx(Ft,{className:"h-4 w-4 text-blue-600"}),s.jsxs($t,{className:"text-blue-800",children:[s.jsx("strong",{children:"Conseils de sécurité :"})," Ne communiquez jamais vos informations bancaires par message privé. Utilisez uniquement les canaux sécurisés de StudyMarket pour vos transactions."]})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(le,{children:s.jsxs(ue,{className:"pt-6 text-center",children:[s.jsx(zn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir vos paiements"}),s.jsx("p",{className:"text-muted-foreground",children:"Gérez vos demandes de paiement et suivez vos transactions"})]})})})};var dS="Collapsible",[Foe,i5]=As(dS),[zoe,hS]=Foe(dS),a5=x.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:i,disabled:a,onOpenChange:o,...c}=t,[u=!1,h]=ks({prop:r,defaultProp:i,onChange:o});return s.jsx(zoe,{scope:n,disabled:a,contentId:Ns(),open:u,onOpenToggle:x.useCallback(()=>h(f=>!f),[h]),children:s.jsx(Ge.div,{"data-state":mS(u),"data-disabled":a?"":void 0,...c,ref:e})})});a5.displayName=dS;var o5="CollapsibleTrigger",l5=x.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,i=hS(o5,n);return s.jsx(Ge.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":mS(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...r,ref:e,onClick:Ie(t.onClick,i.onOpenToggle)})});l5.displayName=o5;var fS="CollapsibleContent",c5=x.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=hS(fS,t.__scopeCollapsible);return s.jsx(wr,{present:n||i.open,children:({present:a})=>s.jsx(Uoe,{...r,ref:e,present:a})})});c5.displayName=fS;var Uoe=x.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:i,...a}=t,o=hS(fS,n),[c,u]=x.useState(r),h=x.useRef(null),f=vt(e,h),p=x.useRef(0),v=p.current,_=x.useRef(0),b=_.current,N=o.open||c,S=x.useRef(N),w=x.useRef();return x.useEffect(()=>{const y=requestAnimationFrame(()=>S.current=!1);return()=>cancelAnimationFrame(y)},[]),ir(()=>{const y=h.current;if(y){w.current=w.current||{transitionDuration:y.style.transitionDuration,animationName:y.style.animationName},y.style.transitionDuration="0s",y.style.animationName="none";const C=y.getBoundingClientRect();p.current=C.height,_.current=C.width,S.current||(y.style.transitionDuration=w.current.transitionDuration,y.style.animationName=w.current.animationName),u(r)}},[o.open,r]),s.jsx(Ge.div,{"data-state":mS(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!N,...a,ref:f,style:{"--radix-collapsible-content-height":v?`${v}px`:void 0,"--radix-collapsible-content-width":b?`${b}px`:void 0,...t.style},children:N&&i})});function mS(t){return t?"open":"closed"}var $oe=a5,Boe=l5,Woe=c5,go="Accordion",qoe=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[pS,Hoe,Goe]=fp(go),[d0,bce]=As(go,[Goe,i5]),gS=i5(),u5=Me.forwardRef((t,e)=>{const{type:n,...r}=t,i=r,a=r;return s.jsx(pS.Provider,{scope:t.__scopeAccordion,children:n==="multiple"?s.jsx(Qoe,{...a,ref:e}):s.jsx(Yoe,{...i,ref:e})})});u5.displayName=go;var[d5,Zoe]=d0(go),[h5,Koe]=d0(go,{collapsible:!1}),Yoe=Me.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},collapsible:a=!1,...o}=t,[c,u]=ks({prop:n,defaultProp:r,onChange:i});return s.jsx(d5,{scope:t.__scopeAccordion,value:c?[c]:[],onItemOpen:u,onItemClose:Me.useCallback(()=>a&&u(""),[a,u]),children:s.jsx(h5,{scope:t.__scopeAccordion,collapsible:a,children:s.jsx(f5,{...o,ref:e})})})}),Qoe=Me.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...a}=t,[o=[],c]=ks({prop:n,defaultProp:r,onChange:i}),u=Me.useCallback(f=>c((p=[])=>[...p,f]),[c]),h=Me.useCallback(f=>c((p=[])=>p.filter(v=>v!==f)),[c]);return s.jsx(d5,{scope:t.__scopeAccordion,value:o,onItemOpen:u,onItemClose:h,children:s.jsx(h5,{scope:t.__scopeAccordion,collapsible:!0,children:s.jsx(f5,{...a,ref:e})})})}),[Xoe,h0]=d0(go),f5=Me.forwardRef((t,e)=>{const{__scopeAccordion:n,disabled:r,dir:i,orientation:a="vertical",...o}=t,c=Me.useRef(null),u=vt(c,e),h=Hoe(n),p=Qc(i)==="ltr",v=Ie(t.onKeyDown,_=>{var D;if(!qoe.includes(_.key))return;const b=_.target,N=h().filter(F=>{var I;return!((I=F.ref.current)!=null&&I.disabled)}),S=N.findIndex(F=>F.ref.current===b),w=N.length;if(S===-1)return;_.preventDefault();let y=S;const C=0,R=w-1,M=()=>{y=S+1,y>R&&(y=C)},B=()=>{y=S-1,y<C&&(y=R)};switch(_.key){case"Home":y=C;break;case"End":y=R;break;case"ArrowRight":a==="horizontal"&&(p?M():B());break;case"ArrowDown":a==="vertical"&&M();break;case"ArrowLeft":a==="horizontal"&&(p?B():M());break;case"ArrowUp":a==="vertical"&&B();break}const O=y%w;(D=N[O].ref.current)==null||D.focus()});return s.jsx(Xoe,{scope:n,disabled:r,direction:i,orientation:a,children:s.jsx(pS.Slot,{scope:n,children:s.jsx(Ge.div,{...o,"data-orientation":a,ref:u,onKeyDown:r?void 0:v})})})}),Bx="AccordionItem",[Joe,vS]=d0(Bx),m5=Me.forwardRef((t,e)=>{const{__scopeAccordion:n,value:r,...i}=t,a=h0(Bx,n),o=Zoe(Bx,n),c=gS(n),u=Ns(),h=r&&o.value.includes(r)||!1,f=a.disabled||t.disabled;return s.jsx(Joe,{scope:n,open:h,disabled:f,triggerId:u,children:s.jsx($oe,{"data-orientation":a.orientation,"data-state":_5(h),...c,...i,ref:e,disabled:f,open:h,onOpenChange:p=>{p?o.onItemOpen(r):o.onItemClose(r)}})})});m5.displayName=Bx;var p5="AccordionHeader",g5=Me.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=h0(go,n),a=vS(p5,n);return s.jsx(Ge.h3,{"data-orientation":i.orientation,"data-state":_5(a.open),"data-disabled":a.disabled?"":void 0,...r,ref:e})});g5.displayName=p5;var W1="AccordionTrigger",v5=Me.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=h0(go,n),a=vS(W1,n),o=Koe(W1,n),c=gS(n);return s.jsx(pS.ItemSlot,{scope:n,children:s.jsx(Boe,{"aria-disabled":a.open&&!o.collapsible||void 0,"data-orientation":i.orientation,id:a.triggerId,...c,...r,ref:e})})});v5.displayName=W1;var x5="AccordionContent",y5=Me.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=h0(go,n),a=vS(x5,n),o=gS(n);return s.jsx(Woe,{role:"region","aria-labelledby":a.triggerId,"data-orientation":i.orientation,...o,...r,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});y5.displayName=x5;function _5(t){return t?"open":"closed"}var ele=u5,tle=m5,nle=g5,w5=v5,b5=y5;const rle=ele,j5=x.forwardRef(({className:t,...e},n)=>s.jsx(tle,{ref:n,className:Je("border-b",t),...e}));j5.displayName="AccordionItem";const N5=x.forwardRef(({className:t,children:e,...n},r)=>s.jsx(nle,{className:"flex",children:s.jsxs(w5,{ref:r,className:Je("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...n,children:[e,s.jsx(vD,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})}));N5.displayName=w5.displayName;const S5=x.forwardRef(({className:t,children:e,...n},r)=>s.jsx(b5,{ref:r,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:s.jsx("div",{className:Je("pb-4 pt-0",t),children:e})}));S5.displayName=b5.displayName;const rk=[{category:"Compte et Inscription",icon:hp,questions:[{question:"Comment créer un compte étudiant vérifié ?",answer:'Pour créer votre compte, utilisez votre adresse email universitaire (ex: prenom.nom@univ-exemple.fr). Notre système vérifie automatiquement votre statut étudiant. Vous recevrez un badge "Étudiant certifié" une fois la vérification terminée.'},{question:"Pourquoi mon université n'est pas reconnue ?",answer:"Nous ajoutons régulièrement de nouvelles universités. Si la vôtre n'apparaît pas, contactez-nous avec votre carte étudiante et nous l'ajouterons rapidement à notre base de données."},{question:"Comment modifier mes informations de profil ?",answer:'Rendez-vous dans "Mon profil" depuis le menu utilisateur. Vous pouvez modifier votre photo, bio, université, et préférences de notification. Certaines informations nécessitent une re-vérification.'},{question:"Puis-je avoir plusieurs comptes ?",answer:"Non, un seul compte par personne est autorisé. Cela garantit la confiance et la sécurité de notre communauté étudiante."}]},{category:"Achats et Ventes",icon:zn,questions:[{question:"Comment publier une annonce ?",answer:'Cliquez sur "Publier" dans le menu principal. Remplissez le formulaire avec photos, description détaillée, prix et lieu de rencontre. Votre annonce sera visible immédiatement après publication.'},{question:"Quels modes de paiement sont acceptés ?",answer:"Nous recommandons les paiements sécurisés : espèces lors de la remise en main propre, virements bancaires, Lydia, ou PayPal. Évitez les paiements à distance sans garantie."},{question:"Comment fixer le bon prix ?",answer:"Notre IA vous suggère une fourchette de prix basée sur l'état et la catégorie. Consultez les annonces similaires et considérez l'état réel de votre objet. Les prix justes se vendent plus rapidement."},{question:"Que faire si un acheteur ne se présente pas ?",answer:"Contactez-le via notre messagerie. Si pas de réponse sous 24h, vous pouvez signaler le comportement et remettre votre annonce en ligne. Nous prenons ces situations au sérieux."}]},{category:"Sécurité et Confiance",icon:Ft,questions:[{question:"Comment éviter les arnaques ?",answer:"Rencontrez-vous toujours en personne dans un lieu public (campus, bibliothèque). Vérifiez l'identité avec la carte étudiante. Ne payez jamais à l'avance sans avoir vu l'objet. Utilisez notre système de signalement en cas de doute."},{question:"Où se rencontrer en sécurité ?",answer:`Privilégiez les lieux publics de votre campus : bibliothèques, halls d'entrée, cafétérias. Évitez les parkings isolés ou les domiciles privés. Certaines universités ont des "zones d'échange sécurisées".`},{question:"Comment signaler un utilisateur suspect ?",answer:'Utilisez le bouton "Signaler" sur le profil ou dans la conversation. Décrivez précisément le problème. Notre équipe examine tous les signalements sous 24h et prend les mesures appropriées.'},{question:"Que faire en cas de litige ?",answer:"Contactez d'abord l'autre partie via notre messagerie. Si pas de résolution, utilisez notre service de médiation gratuit. En dernier recours, contactez le support avec toutes les preuves (captures, messages)."}]},{category:"Messagerie et Communication",icon:fn,questions:[{question:"Comment contacter un vendeur ?",answer:`Cliquez sur "Contacter le vendeur" sur l'annonce. Rédigez un message poli et précis. Le vendeur recevra une notification email et pourra vous répondre via notre messagerie sécurisée.`},{question:"Pourquoi mes messages ne sont pas lus ?",answer:"Les utilisateurs reçoivent des notifications email mais peuvent avoir des délais de réponse. Soyez patient (24-48h). Si pas de réponse, l'annonce est peut-être déjà vendue ou l'utilisateur inactif."},{question:"Puis-je partager mes coordonnées ?",answer:"Oui, mais seulement après les premiers échanges via notre messagerie. Cela nous permet de garder une trace en cas de problème et de vous protéger contre le spam."},{question:"Comment bloquer un utilisateur ?",answer:`Dans la conversation, cliquez sur les trois points puis "Bloquer". L'utilisateur ne pourra plus vous contacter. Vous pouvez débloquer depuis vos paramètres si nécessaire.`}]},{category:"Impact Écologique",icon:Br,questions:[{question:"Comment est calculé mon impact CO₂ ?",answer:"Chaque objet acheté d'occasion évite la production d'un neuf. Nous calculons le CO₂ économisé selon des données ADEME : 85kg pour un smartphone, 8.5kg pour un livre, etc. Votre total s'affiche dans votre profil."},{question:"Qu'est-ce que les badges écologiques ?",answer:'Vous gagnez des badges selon vos actions : "Premier Pas" (1ère transaction), "Éco-Warrior" (10kg CO₂), "Héros Climatique" (100kg CO₂). Ils apparaissent sur votre profil et motivent la communauté.'},{question:"Comment améliorer mon rang écologique ?",answer:"Multipliez les transactions d'occasion, privilégiez les dons (bonus +20%), participez aux échanges. Plus vous économisez de CO₂, plus votre rang augmente : Débutant → Éco-Warrior → Maître Environnemental → Légende Écologique."}]},{category:"Technique et Bugs",icon:Dy,questions:[{question:"L'application ne fonctionne pas correctement",answer:"Essayez de vider le cache de votre navigateur (Ctrl+F5) ou utilisez un autre navigateur. Vérifiez votre connexion internet. Si le problème persiste, contactez-nous avec votre navigateur et système d'exploitation."},{question:"Je ne reçois pas les notifications email",answer:'Vérifiez vos spams/courriers indésirables. Ajoutez notifications@studymarket.fr à vos contacts. Vérifiez vos préférences de notification dans "Paramètres". Certains emails universitaires bloquent les notifications externes.'},{question:"Mes photos ne s'uploadent pas",answer:"Vérifiez que vos images font moins de 15MB et sont au format JPG/PNG. Essayez de les redimensionner. Si vous êtes sur mobile, autorisez l'accès à la galerie dans les paramètres de votre navigateur."},{question:"Comment supprimer mon compte ?",answer:'Rendez-vous dans "Paramètres" > "Compte" > "Supprimer mon compte". Cette action est irréversible et supprime toutes vos données. Vos annonces actives seront automatiquement retirées.'}]}],sle=[{title:"Chat en direct",description:"Réponse immédiate pendant les heures ouvrables",icon:fn,action:"Démarrer le chat",available:!0,hours:"Lun-Ven 9h-18h"},{title:"Email Support",description:"Réponse sous 24h maximum",icon:us,action:"support@studymarket.fr",available:!0,hours:"24h/7j"},{title:"Téléphone",description:"Pour les urgences uniquement",icon:sh,action:"01 23 45 67 89",available:!1,hours:"Bientôt disponible"},{title:"Centre de ressources",description:"Guides détaillés et tutoriels",icon:b4,action:"Consulter les guides",available:!0,hours:"Toujours accessible"}],ile=[{title:"Guide du vendeur débutant",description:"Tout savoir pour vendre efficacement",icon:pi,duration:"5 min",type:"Article"},{title:"Sécurité : éviter les arnaques",description:"Reconnaître et éviter les situations dangereuses",icon:Ft,duration:"3 min",type:"Vidéo"},{title:"Optimiser ses annonces",description:"Photos, descriptions et prix pour vendre vite",icon:ih,duration:"7 min",type:"Article"},{title:"Impact écologique expliqué",description:"Comment nous calculons votre empreinte carbone",icon:Br,duration:"4 min",type:"Infographie"}],ale=()=>{const{currentUser:t,userProfile:e}=Tn(),[n,r]=x.useState(""),[i,a]=x.useState("all"),[o,c]=x.useState({subject:"",category:"",message:"",priority:"normal"}),[u,h]=x.useState(!1),f=rk.filter(v=>{if(i!=="all"&&v.category!==i)return!1;if(n){const _=n.toLowerCase();return v.questions.some(b=>b.question.toLowerCase().includes(_)||b.answer.toLowerCase().includes(_))}return!0}),p=async v=>{if(v.preventDefault(),!o.subject||!o.message){me.error("Veuillez remplir tous les champs obligatoires");return}h(!0);try{await new Promise(_=>setTimeout(_,1e3)),me.success("Votre message a été envoyé ! Nous vous répondrons sous 24h."),c({subject:"",category:"",message:"",priority:"normal"})}catch{me.error("Erreur lors de l'envoi. Veuillez réessayer.")}finally{h(!1)}};return s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"flex items-center justify-center gap-2 mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center",children:s.jsx(fx,{className:"w-6 h-6 text-white"})})}),s.jsx("h1",{className:"text-4xl font-bold",children:"Centre d'Aide StudyMarket"}),s.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Trouvez rapidement les réponses à vos questions ou contactez notre équipe support"})]}),s.jsx(le,{children:s.jsx(ue,{className:"pt-6",children:s.jsxs("div",{className:"relative max-w-2xl mx-auto",children:[s.jsx(gr,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-muted-foreground"}),s.jsx(qe,{type:"text",placeholder:"Rechercher dans l'aide... (ex: comment vendre, sécurité, notifications)",value:n,onChange:v=>r(v.target.value),className:"pl-12 h-14 text-lg"})]})})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:sle.map((v,_)=>s.jsx(le,{className:`transition-all hover:shadow-lg ${v.available?"hover:-translate-y-1":"opacity-60"}`,children:s.jsxs(ue,{className:"pt-6 text-center",children:[s.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-4 ${v.available?"bg-primary/10 text-primary":"bg-muted text-muted-foreground"}`,children:s.jsx(v.icon,{className:"w-6 h-6"})}),s.jsx("h3",{className:"font-semibold mb-2",children:v.title}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:v.description}),s.jsx("div",{className:"text-xs text-muted-foreground mb-3",children:v.hours}),s.jsx(Y,{variant:v.available?"default":"secondary",size:"sm",disabled:!v.available,className:"w-full",children:v.action})]})},_))}),s.jsxs(eu,{defaultValue:"faq",className:"space-y-6",children:[s.jsxs(Fl,{className:"grid w-full grid-cols-3",children:[s.jsxs(un,{value:"faq",className:"flex items-center gap-2",children:[s.jsx(fx,{className:"w-4 h-4"}),"FAQ"]}),s.jsxs(un,{value:"guides",className:"flex items-center gap-2",children:[s.jsx(b4,{className:"w-4 h-4"}),"Guides"]}),s.jsxs(un,{value:"contact",className:"flex items-center gap-2",children:[s.jsx(fn,{className:"w-4 h-4"}),"Contact"]})]}),s.jsxs(dn,{value:"faq",className:"space-y-6",children:[s.jsx(le,{children:s.jsx(ue,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx(Y,{variant:i==="all"?"default":"outline",size:"sm",onClick:()=>a("all"),children:"Toutes les catégories"}),rk.map(v=>s.jsxs(Y,{variant:i===v.category?"default":"outline",size:"sm",onClick:()=>a(v.category),className:"flex items-center gap-2",children:[s.jsx(v.icon,{className:"w-4 h-4"}),v.category]},v.category))]})})}),f.length===0?s.jsx(le,{children:s.jsxs(ue,{className:"pt-12 pb-12 text-center",children:[s.jsx(gr,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun résultat trouvé"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Essayez avec d'autres mots-clés ou contactez notre support"}),s.jsx(Y,{variant:"outline",onClick:()=>r(""),children:"Effacer la recherche"})]})}):s.jsx("div",{className:"space-y-6",children:f.map((v,_)=>s.jsxs(le,{children:[s.jsx(We,{children:s.jsxs(He,{className:"flex items-center gap-2",children:[s.jsx(v.icon,{className:"w-5 h-5"}),v.category]})}),s.jsx(ue,{children:s.jsx(rle,{type:"single",collapsible:!0,className:"w-full",children:v.questions.map((b,N)=>s.jsxs(j5,{value:`${_}-${N}`,children:[s.jsx(N5,{className:"text-left",children:b.question}),s.jsx(S5,{className:"text-muted-foreground leading-relaxed",children:b.answer})]},N))})})]},_))})]}),s.jsxs(dn,{value:"guides",className:"space-y-6",children:[s.jsxs(le,{children:[s.jsxs(We,{children:[s.jsxs(He,{className:"flex items-center gap-2",children:[s.jsx(k4,{className:"w-5 h-5"}),"Guides et Tutoriels"]}),s.jsx(Pt,{children:"Apprenez à utiliser StudyMarket comme un pro avec nos guides détaillés"})]}),s.jsx(ue,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:ile.map((v,_)=>s.jsx("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center flex-shrink-0",children:s.jsx(v.icon,{className:"w-6 h-6 text-primary"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("h3",{className:"font-semibold",children:v.title}),s.jsx(tt,{variant:"outline",className:"text-xs",children:v.type})]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:v.description}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[s.jsx($n,{className:"w-3 h-3"}),v.duration]}),s.jsxs(Y,{size:"sm",variant:"outline",children:[s.jsx(ss,{className:"w-3 h-3 mr-1"}),"Lire"]})]})]})]})},_))})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(le,{children:s.jsxs(ue,{className:"pt-6 text-center",children:[s.jsx(M4,{className:"w-8 h-8 text-blue-600 mx-auto mb-3"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Tutoriels Vidéo"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Apprenez visuellement avec nos vidéos courtes"}),s.jsxs(Y,{variant:"outline",size:"sm",children:[s.jsx(ss,{className:"w-3 h-3 mr-1"}),"Voir les vidéos"]})]})}),s.jsx(le,{children:s.jsxs(ue,{className:"pt-6 text-center",children:[s.jsx(Ks,{className:"w-8 h-8 text-green-600 mx-auto mb-3"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Ressources PDF"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Téléchargez nos guides au format PDF"}),s.jsxs(Y,{variant:"outline",size:"sm",children:[s.jsx(Ks,{className:"w-3 h-3 mr-1"}),"Télécharger"]})]})}),s.jsx(le,{children:s.jsxs(ue,{className:"pt-6 text-center",children:[s.jsx(hp,{className:"w-8 h-8 text-purple-600 mx-auto mb-3"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Communauté"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Échangez avec d'autres étudiants"}),s.jsxs(Y,{variant:"outline",size:"sm",children:[s.jsx(ss,{className:"w-3 h-3 mr-1"}),"Rejoindre"]})]})})]})]}),s.jsx(dn,{value:"contact",className:"space-y-6",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs(le,{children:[s.jsxs(We,{children:[s.jsxs(He,{className:"flex items-center gap-2",children:[s.jsx(Od,{className:"w-5 h-5"}),"Contactez notre équipe"]}),s.jsx(Pt,{children:"Décrivez votre problème en détail pour une réponse rapide et précise"})]}),s.jsx(ue,{children:s.jsxs("form",{onSubmit:p,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:"subject",children:"Sujet *"}),s.jsx(qe,{id:"subject",value:o.subject,onChange:v=>c(_=>({..._,subject:v.target.value})),placeholder:"Résumez votre problème en quelques mots",className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:"category",children:"Catégorie"}),s.jsxs(Jt,{value:o.category,onValueChange:v=>c(_=>({..._,category:v})),children:[s.jsx(qt,{className:"mt-1",children:s.jsx(en,{placeholder:"Sélectionnez une catégorie"})}),s.jsxs(Ht,{children:[s.jsx($e,{value:"account",children:"Compte et profil"}),s.jsx($e,{value:"listing",children:"Annonces"}),s.jsx($e,{value:"payment",children:"Paiements"}),s.jsx($e,{value:"security",children:"Sécurité"}),s.jsx($e,{value:"technical",children:"Problème technique"}),s.jsx($e,{value:"other",children:"Autre"})]})]})]}),s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:"priority",children:"Priorité"}),s.jsxs(Jt,{value:o.priority,onValueChange:v=>c(_=>({..._,priority:v})),children:[s.jsx(qt,{className:"mt-1",children:s.jsx(en,{})}),s.jsxs(Ht,{children:[s.jsx($e,{value:"low",children:"Basse - Question générale"}),s.jsx($e,{value:"normal",children:"Normale - Besoin d'aide"}),s.jsx($e,{value:"high",children:"Haute - Problème bloquant"}),s.jsx($e,{value:"urgent",children:"Urgente - Sécurité/Arnaque"})]})]})]}),s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:"message",children:"Message *"}),s.jsx(Es,{id:"message",value:o.message,onChange:v=>c(_=>({..._,message:v.target.value})),placeholder:"Décrivez votre problème en détail. Plus vous donnez d'informations, plus nous pourrons vous aider efficacement.",rows:6,className:"mt-1"})]}),t&&s.jsxs(Ut,{children:[s.jsx(Tt,{className:"h-4 w-4"}),s.jsxs($t,{children:["Nous vous répondrons à l'adresse ",s.jsx("strong",{children:t.email})]})]}),s.jsx(Y,{type:"submit",className:"w-full",disabled:u||!o.subject||!o.message,children:u?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Envoi en cours..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Od,{className:"w-4 h-4 mr-2"}),"Envoyer le message"]})})]})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(le,{children:[s.jsx(We,{children:s.jsxs(He,{className:"flex items-center gap-2",children:[s.jsx($n,{className:"w-5 h-5"}),"Temps de réponse"]})}),s.jsxs(ue,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Questions générales"}),s.jsx(tt,{variant:"secondary",children:"24h"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Problèmes techniques"}),s.jsx(tt,{variant:"secondary",children:"12h"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Urgences sécurité"}),s.jsx(tt,{className:"bg-red-500",children:"2h"})]})]})]}),s.jsxs(le,{children:[s.jsx(We,{children:s.jsxs(He,{className:"flex items-center gap-2",children:[s.jsx(C4,{className:"w-5 h-5"}),"Autres moyens de contact"]})}),s.jsxs(ue,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(us,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Email direct"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"support@studymarket.fr"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(fn,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Chat en direct"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Lun-Ven 9h-18h"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Yc,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Application mobile"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Bientôt disponible"})]})]})]})]}),s.jsxs(le,{children:[s.jsx(We,{children:s.jsxs(He,{className:"flex items-center gap-2",children:[s.jsx(ih,{className:"w-5 h-5"}),"État du système"]})}),s.jsxs(ue,{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Plateforme web"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),s.jsx("span",{className:"text-sm text-green-600",children:"Opérationnel"})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Messagerie"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),s.jsx("span",{className:"text-sm text-green-600",children:"Opérationnel"})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Notifications email"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),s.jsx("span",{className:"text-sm text-yellow-600",children:"Maintenance"})]})]}),s.jsxs(Y,{variant:"outline",size:"sm",className:"w-full mt-3",children:[s.jsx(ss,{className:"w-3 h-3 mr-1"}),"Page de statut complète"]})]})]})]})]})})]})]})},ole=[{category:"Rencontres et Échanges",icon:$r,color:"text-blue-600",tips:[{title:"Choisissez des lieux publics",description:"Rencontrez-vous toujours dans des endroits fréquentés : bibliothèques universitaires, halls d'entrée, cafétérias du campus.",type:"do",icon:Tt},{title:"Évitez les lieux isolés",description:"Ne vous donnez jamais rendez-vous dans des parkings souterrains, domiciles privés ou endroits déserts.",type:"dont",icon:Rd},{title:"Prévenez un proche",description:"Informez toujours quelqu'un de votre rendez-vous : lieu, heure, personne rencontrée.",type:"do",icon:Tt},{title:"Rencontrez en journée",description:"Privilégiez les rendez-vous en journée, évitez les rencontres tardives ou nocturnes.",type:"do",icon:Tt}]},{category:"Vérification d'Identité",icon:R4,color:"text-green-600",tips:[{title:"Demandez la carte étudiante",description:"Vérifiez toujours l'identité avec la carte étudiante. C'est votre garantie de sécurité.",type:"do",icon:Tt},{title:"Vérifiez le profil StudyMarket",description:"Consultez le profil : badge vérifié, avis, nombre de transactions, ancienneté du compte.",type:"do",icon:Tt},{title:"Méfiez-vous des profils récents",description:"Soyez prudent avec les comptes créés récemment sans historique de transactions.",type:"dont",icon:Rn},{title:"Utilisez la messagerie StudyMarket",description:"Gardez une trace de vos échanges via notre messagerie sécurisée.",type:"do",icon:Tt}]},{category:"Paiements Sécurisés",icon:zn,color:"text-purple-600",tips:[{title:"Payez à la remise",description:"Ne payez qu'après avoir inspecté l'objet et lors de la remise en main propre.",type:"do",icon:Tt},{title:"Évitez les paiements à l'avance",description:"Ne versez jamais d'acompte ou de paiement intégral avant d'avoir vu l'objet.",type:"dont",icon:Rd},{title:"Utilisez des moyens traçables",description:"Privilégiez Lydia, PayPal, virements ou espèces. Évitez les cryptomonnaies.",type:"do",icon:Tt},{title:"Méfiez-vous des prix trop bas",description:"Un iPhone à 50€ ou un MacBook à 200€ sont probablement des arnaques.",type:"dont",icon:Rn}]},{category:"Communication",icon:fn,color:"text-orange-600",tips:[{title:"Restez poli et respectueux",description:"Maintenez un ton courtois dans tous vos échanges, même en cas de désaccord.",type:"do",icon:Tt},{title:"Posez des questions précises",description:"Demandez des détails sur l'état, l'âge, la raison de la vente, les défauts éventuels.",type:"do",icon:Tt},{title:"Méfiez-vous de l'urgence",description:'Les vendeurs qui pressent ("achetez maintenant", "dernière chance") sont suspects.',type:"dont",icon:Rn},{title:"Gardez les preuves",description:"Conservez les captures d'écran des conversations en cas de litige.",type:"do",icon:Tt}]}],lle=[{title:"Prix anormalement bas",description:"Un objet vendu bien en-dessous de sa valeur marchande",severity:"high",icon:Rn},{title:"Paiement demandé à l'avance",description:"Demande d'acompte ou paiement avant la rencontre",severity:"high",icon:zn},{title:"Refus de se rencontrer",description:"Propose uniquement l'envoi postal ou la livraison",severity:"high",icon:$r},{title:"Photos de mauvaise qualité",description:"Images floues, prises sur internet ou très peu nombreuses",severity:"medium",icon:pc},{title:"Profil incomplet",description:"Pas de photo de profil, peu d'informations, compte récent",severity:"medium",icon:hp},{title:"Communication étrange",description:"Français approximatif, réponses évasives, pression temporelle",severity:"medium",icon:fn},{title:"Changement de lieu",description:"Modifie le lieu de rendez-vous au dernier moment",severity:"medium",icon:$n},{title:"Demande d'informations personnelles",description:"Veut votre adresse, RIB, ou autres données sensibles",severity:"high",icon:Dc}],cle=[{title:"Urgence immédiate",description:"Danger physique, menaces, agression",contact:"17 (Police)",icon:sh,color:"text-red-600"},{title:"Signalement StudyMarket",description:"Comportement suspect, arnaque, violation des règles",contact:`Bouton "Signaler" dans l'app`,icon:cc,color:"text-orange-600"},{title:"Support StudyMarket",description:"Questions, aide, médiation de conflit",contact:"support@studymarket.fr",icon:fn,color:"text-blue-600"},{title:"Sécurité Campus",description:"Incidents sur le campus universitaire",contact:"Service sécurité de votre université",icon:Ft,color:"text-green-600"}],ule=()=>s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"flex items-center justify-center gap-2 mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center",children:s.jsx(Ft,{className:"w-6 h-6 text-white"})})}),s.jsx("h1",{className:"text-4xl font-bold",children:"Sécurité & Conseils"}),s.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"Votre sécurité est notre priorité. Suivez ces conseils pour des échanges sereins et sécurisés entre étudiants."})]}),s.jsxs(Ut,{className:"border-green-200 bg-green-50",children:[s.jsx(Ft,{className:"h-4 w-4 text-green-600"}),s.jsx($t,{className:"text-green-800",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Rappel important :"})," Rencontrez-vous toujours dans un lieu public du campus et vérifiez l'identité avec la carte étudiante."]}),s.jsxs(Y,{variant:"outline",size:"sm",className:"ml-4 border-green-300 text-green-700 hover:bg-green-100",children:[s.jsx(Ks,{className:"w-3 h-3 mr-1"}),"Guide PDF"]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(le,{children:s.jsxs(ue,{className:"pt-6 text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(Ft,{className:"w-6 h-6 text-green-600"})}),s.jsx("div",{className:"text-2xl font-bold text-green-600",children:"99.8%"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Transactions sécurisées"})]})}),s.jsx(le,{children:s.jsxs(ue,{className:"pt-6 text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(R4,{className:"w-6 h-6 text-blue-600"})}),s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"100%"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Étudiants vérifiés"})]})}),s.jsx(le,{children:s.jsxs(ue,{className:"pt-6 text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx($n,{className:"w-6 h-6 text-purple-600"})}),s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"< 2h"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Réponse aux signalements"})]})}),s.jsx(le,{children:s.jsxs(ue,{className:"pt-6 text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(pi,{className:"w-6 h-6 text-orange-600"})}),s.jsx("div",{className:"text-2xl font-bold text-orange-600",children:"4.9/5"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Satisfaction sécurité"})]})})]}),s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Guide de Sécurité Complet"}),s.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Suivez ces conseils essentiels pour des échanges en toute sécurité"})]}),ole.map((t,e)=>s.jsxs(le,{children:[s.jsx(We,{children:s.jsxs(He,{className:"flex items-center gap-2",children:[s.jsx(t.icon,{className:`w-6 h-6 ${t.color}`}),t.category]})}),s.jsx(ue,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.tips.map((n,r)=>s.jsx("div",{className:`p-4 rounded-lg border-2 ${n.type==="do"?"border-green-200 bg-green-50":n.type==="dont"?"border-red-200 bg-red-50":"border-orange-200 bg-orange-50"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(n.icon,{className:`w-5 h-5 mt-0.5 ${n.type==="do"?"text-green-600":n.type==="dont"?"text-red-600":"text-orange-600"}`}),s.jsxs("div",{children:[s.jsx("h4",{className:`font-semibold mb-2 ${n.type==="do"?"text-green-800":n.type==="dont"?"text-red-800":"text-orange-800"}`,children:n.title}),s.jsx("p",{className:`text-sm ${n.type==="do"?"text-green-700":n.type==="dont"?"text-red-700":"text-orange-700"}`,children:n.description})]})]})},r))})})]},e))]}),s.jsxs(le,{children:[s.jsxs(We,{children:[s.jsxs(He,{className:"flex items-center gap-2",children:[s.jsx(Rn,{className:"w-6 h-6 text-red-600"}),"Signaux d'Alarme à Reconnaître"]}),s.jsx(Pt,{children:"Ces comportements doivent vous alerter et vous inciter à la prudence"})]}),s.jsx(ue,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:lle.map((t,e)=>s.jsx("div",{className:`p-4 rounded-lg border-2 ${t.severity==="high"?"border-red-200 bg-red-50":"border-orange-200 bg-orange-50"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(t.icon,{className:`w-5 h-5 mt-0.5 ${t.severity==="high"?"text-red-600":"text-orange-600"}`}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("h4",{className:`font-semibold ${t.severity==="high"?"text-red-800":"text-orange-800"}`,children:t.title}),s.jsx(tt,{variant:t.severity==="high"?"destructive":"secondary",className:"text-xs",children:t.severity==="high"?"Danger":"Attention"})]}),s.jsx("p",{className:`text-sm ${t.severity==="high"?"text-red-700":"text-orange-700"}`,children:t.description})]})]})},e))})})]}),s.jsxs(le,{children:[s.jsxs(We,{children:[s.jsxs(He,{className:"flex items-center gap-2",children:[s.jsx(sh,{className:"w-6 h-6 text-blue-600"}),"Contacts d'Urgence et Signalement"]}),s.jsx(Pt,{children:"En cas de problème, voici qui contacter selon la situation"})]}),s.jsx(ue,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:cle.map((t,e)=>s.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg",children:[s.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${t.color==="text-red-600"?"bg-red-100":t.color==="text-orange-600"?"bg-orange-100":t.color==="text-blue-600"?"bg-blue-100":"bg-green-100"}`,children:s.jsx(t.icon,{className:`w-6 h-6 ${t.color}`})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-semibold mb-1",children:t.title}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:t.description}),s.jsx("div",{className:`font-medium ${t.color}`,children:t.contact})]})]},e))})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(le,{children:s.jsxs(ue,{className:"pt-6 text-center",children:[s.jsx(mG,{className:"w-12 h-12 text-blue-600 mx-auto mb-4"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Guide Complet PDF"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Téléchargez notre guide de sécurité complet"}),s.jsxs(Y,{variant:"outline",className:"w-full",children:[s.jsx(Ks,{className:"w-4 h-4 mr-2"}),"Télécharger"]})]})}),s.jsx(le,{children:s.jsxs(ue,{className:"pt-6 text-center",children:[s.jsx(fx,{className:"w-12 h-12 text-green-600 mx-auto mb-4"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Centre d'Aide"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Questions fréquentes sur la sécurité"}),s.jsx(Y,{variant:"outline",className:"w-full",asChild:!0,children:s.jsxs(De,{to:"/help",children:[s.jsx(ss,{className:"w-4 h-4 mr-2"}),"Consulter l'aide"]})})]})}),s.jsx(le,{children:s.jsxs(ue,{className:"pt-6 text-center",children:[s.jsx(fn,{className:"w-12 h-12 text-purple-600 mx-auto mb-4"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Signaler un Problème"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Contactez notre équipe de sécurité"}),s.jsxs(Y,{variant:"outline",className:"w-full",children:[s.jsx(cc,{className:"w-4 h-4 mr-2"}),"Faire un signalement"]})]})})]}),s.jsxs(Ut,{className:"border-blue-200 bg-blue-50",children:[s.jsx(k4,{className:"h-4 w-4 text-blue-600"}),s.jsxs($t,{className:"text-blue-800",children:[s.jsx("strong",{children:"Rappel :"})," En cas de doute, n'hésitez pas à annuler la transaction. Votre sécurité vaut plus que n'importe quel objet. L'équipe StudyMarket est là pour vous aider 24h/7j."]})]})]});function dle(t,e){return x.useReducer((n,r)=>e[n][r]??n,t)}var xS="ScrollArea",[E5,jce]=As(xS),[hle,ei]=E5(xS),C5=x.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:a=600,...o}=t,[c,u]=x.useState(null),[h,f]=x.useState(null),[p,v]=x.useState(null),[_,b]=x.useState(null),[N,S]=x.useState(null),[w,y]=x.useState(0),[C,R]=x.useState(0),[M,B]=x.useState(!1),[O,D]=x.useState(!1),F=vt(e,V=>u(V)),I=Qc(i);return s.jsx(hle,{scope:n,type:r,dir:I,scrollHideDelay:a,scrollArea:c,viewport:h,onViewportChange:f,content:p,onContentChange:v,scrollbarX:_,onScrollbarXChange:b,scrollbarXEnabled:M,onScrollbarXEnabledChange:B,scrollbarY:N,onScrollbarYChange:S,scrollbarYEnabled:O,onScrollbarYEnabledChange:D,onCornerWidthChange:y,onCornerHeightChange:R,children:s.jsx(Ge.div,{dir:I,...o,ref:F,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":C+"px",...t.style}})})});C5.displayName=xS;var T5="ScrollAreaViewport",k5=x.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,asChild:i,nonce:a,...o}=t,c=ei(T5,n),u=x.useRef(null),h=vt(e,u,c.onViewportChange);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:`
[data-radix-scroll-area-viewport] {
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
}
[data-radix-scroll-area-viewport]::-webkit-scrollbar {
  display: none;
}
:where([data-radix-scroll-area-viewport]) {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
:where([data-radix-scroll-area-content]) {
  flex-grow: 1;
}
`},nonce:a}),s.jsx(Ge.div,{"data-radix-scroll-area-viewport":"",...o,asChild:i,ref:h,style:{overflowX:c.scrollbarXEnabled?"scroll":"hidden",overflowY:c.scrollbarYEnabled?"scroll":"hidden",...t.style},children:ble({asChild:i,children:r},f=>s.jsx("div",{"data-radix-scroll-area-content":"",ref:c.onContentChange,style:{minWidth:c.scrollbarXEnabled?"fit-content":void 0},children:f}))})]})});k5.displayName=T5;var pa="ScrollAreaScrollbar",yS=x.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=ei(pa,t.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=i,c=t.orientation==="horizontal";return x.useEffect(()=>(c?a(!0):o(!0),()=>{c?a(!1):o(!1)}),[c,a,o]),i.type==="hover"?s.jsx(fle,{...r,ref:e,forceMount:n}):i.type==="scroll"?s.jsx(mle,{...r,ref:e,forceMount:n}):i.type==="auto"?s.jsx(P5,{...r,ref:e,forceMount:n}):i.type==="always"?s.jsx(_S,{...r,ref:e}):null});yS.displayName=pa;var fle=x.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=ei(pa,t.__scopeScrollArea),[a,o]=x.useState(!1);return x.useEffect(()=>{const c=i.scrollArea;let u=0;if(c){const h=()=>{window.clearTimeout(u),o(!0)},f=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return c.addEventListener("pointerenter",h),c.addEventListener("pointerleave",f),()=>{window.clearTimeout(u),c.removeEventListener("pointerenter",h),c.removeEventListener("pointerleave",f)}}},[i.scrollArea,i.scrollHideDelay]),s.jsx(wr,{present:n||a,children:s.jsx(P5,{"data-state":a?"visible":"hidden",...r,ref:e})})}),mle=x.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=ei(pa,t.__scopeScrollArea),a=t.orientation==="horizontal",o=m0(()=>u("SCROLL_END"),100),[c,u]=dle("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return x.useEffect(()=>{if(c==="idle"){const h=window.setTimeout(()=>u("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(h)}},[c,i.scrollHideDelay,u]),x.useEffect(()=>{const h=i.viewport,f=a?"scrollLeft":"scrollTop";if(h){let p=h[f];const v=()=>{const _=h[f];p!==_&&(u("SCROLL"),o()),p=_};return h.addEventListener("scroll",v),()=>h.removeEventListener("scroll",v)}},[i.viewport,a,u,o]),s.jsx(wr,{present:n||c!=="hidden",children:s.jsx(_S,{"data-state":c==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Ie(t.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:Ie(t.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),P5=x.forwardRef((t,e)=>{const n=ei(pa,t.__scopeScrollArea),{forceMount:r,...i}=t,[a,o]=x.useState(!1),c=t.orientation==="horizontal",u=m0(()=>{if(n.viewport){const h=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;o(c?h:f)}},10);return Gd(n.viewport,u),Gd(n.content,u),s.jsx(wr,{present:r||a,children:s.jsx(_S,{"data-state":a?"visible":"hidden",...i,ref:e})})}),_S=x.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,i=ei(pa,t.__scopeScrollArea),a=x.useRef(null),o=x.useRef(0),[c,u]=x.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=D5(c.viewport,c.content),f={...r,sizes:c,onSizesChange:u,hasThumb:h>0&&h<1,onThumbChange:v=>a.current=v,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:v=>o.current=v};function p(v,_){return _le(v,o.current,c,_)}return n==="horizontal"?s.jsx(ple,{...f,ref:e,onThumbPositionChange:()=>{if(i.viewport&&a.current){const v=i.viewport.scrollLeft,_=sk(v,c,i.dir);a.current.style.transform=`translate3d(${_}px, 0, 0)`}},onWheelScroll:v=>{i.viewport&&(i.viewport.scrollLeft=v)},onDragScroll:v=>{i.viewport&&(i.viewport.scrollLeft=p(v,i.dir))}}):n==="vertical"?s.jsx(gle,{...f,ref:e,onThumbPositionChange:()=>{if(i.viewport&&a.current){const v=i.viewport.scrollTop,_=sk(v,c);a.current.style.transform=`translate3d(0, ${_}px, 0)`}},onWheelScroll:v=>{i.viewport&&(i.viewport.scrollTop=v)},onDragScroll:v=>{i.viewport&&(i.viewport.scrollTop=p(v))}}):null}),ple=x.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,a=ei(pa,t.__scopeScrollArea),[o,c]=x.useState(),u=x.useRef(null),h=vt(e,u,a.onScrollbarXChange);return x.useEffect(()=>{u.current&&c(getComputedStyle(u.current))},[u]),s.jsx(A5,{"data-orientation":"horizontal",...i,ref:h,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":f0(n)+"px",...t.style},onThumbPointerDown:f=>t.onThumbPointerDown(f.x),onDragScroll:f=>t.onDragScroll(f.x),onWheelScroll:(f,p)=>{if(a.viewport){const v=a.viewport.scrollLeft+f.deltaX;t.onWheelScroll(v),L5(v,p)&&f.preventDefault()}},onResize:()=>{u.current&&a.viewport&&o&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:qx(o.paddingLeft),paddingEnd:qx(o.paddingRight)}})}})}),gle=x.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,a=ei(pa,t.__scopeScrollArea),[o,c]=x.useState(),u=x.useRef(null),h=vt(e,u,a.onScrollbarYChange);return x.useEffect(()=>{u.current&&c(getComputedStyle(u.current))},[u]),s.jsx(A5,{"data-orientation":"vertical",...i,ref:h,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":f0(n)+"px",...t.style},onThumbPointerDown:f=>t.onThumbPointerDown(f.y),onDragScroll:f=>t.onDragScroll(f.y),onWheelScroll:(f,p)=>{if(a.viewport){const v=a.viewport.scrollTop+f.deltaY;t.onWheelScroll(v),L5(v,p)&&f.preventDefault()}},onResize:()=>{u.current&&a.viewport&&o&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:qx(o.paddingTop),paddingEnd:qx(o.paddingBottom)}})}})}),[vle,I5]=E5(pa),A5=x.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:c,onThumbPositionChange:u,onDragScroll:h,onWheelScroll:f,onResize:p,...v}=t,_=ei(pa,n),[b,N]=x.useState(null),S=vt(e,F=>N(F)),w=x.useRef(null),y=x.useRef(""),C=_.viewport,R=r.content-r.viewport,M=Zn(f),B=Zn(u),O=m0(p,10);function D(F){if(w.current){const I=F.clientX-w.current.left,V=F.clientY-w.current.top;h({x:I,y:V})}}return x.useEffect(()=>{const F=I=>{const V=I.target;(b==null?void 0:b.contains(V))&&M(I,R)};return document.addEventListener("wheel",F,{passive:!1}),()=>document.removeEventListener("wheel",F,{passive:!1})},[C,b,R,M]),x.useEffect(B,[r,B]),Gd(b,O),Gd(_.content,O),s.jsx(vle,{scope:n,scrollbar:b,hasThumb:i,onThumbChange:Zn(a),onThumbPointerUp:Zn(o),onThumbPositionChange:B,onThumbPointerDown:Zn(c),children:s.jsx(Ge.div,{...v,ref:S,style:{position:"absolute",...v.style},onPointerDown:Ie(t.onPointerDown,F=>{F.button===0&&(F.target.setPointerCapture(F.pointerId),w.current=b.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",_.viewport&&(_.viewport.style.scrollBehavior="auto"),D(F))}),onPointerMove:Ie(t.onPointerMove,D),onPointerUp:Ie(t.onPointerUp,F=>{const I=F.target;I.hasPointerCapture(F.pointerId)&&I.releasePointerCapture(F.pointerId),document.body.style.webkitUserSelect=y.current,_.viewport&&(_.viewport.style.scrollBehavior=""),w.current=null})})})}),Wx="ScrollAreaThumb",R5=x.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=I5(Wx,t.__scopeScrollArea);return s.jsx(wr,{present:n||i.hasThumb,children:s.jsx(xle,{ref:e,...r})})}),xle=x.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...i}=t,a=ei(Wx,n),o=I5(Wx,n),{onThumbPositionChange:c}=o,u=vt(e,p=>o.onThumbChange(p)),h=x.useRef(),f=m0(()=>{h.current&&(h.current(),h.current=void 0)},100);return x.useEffect(()=>{const p=a.viewport;if(p){const v=()=>{if(f(),!h.current){const _=wle(p,c);h.current=_,c()}};return c(),p.addEventListener("scroll",v),()=>p.removeEventListener("scroll",v)}},[a.viewport,f,c]),s.jsx(Ge.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Ie(t.onPointerDownCapture,p=>{const _=p.target.getBoundingClientRect(),b=p.clientX-_.left,N=p.clientY-_.top;o.onThumbPointerDown({x:b,y:N})}),onPointerUp:Ie(t.onPointerUp,o.onThumbPointerUp)})});R5.displayName=Wx;var wS="ScrollAreaCorner",M5=x.forwardRef((t,e)=>{const n=ei(wS,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?s.jsx(yle,{...t,ref:e}):null});M5.displayName=wS;var yle=x.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,i=ei(wS,n),[a,o]=x.useState(0),[c,u]=x.useState(0),h=!!(a&&c);return Gd(i.scrollbarX,()=>{var p;const f=((p=i.scrollbarX)==null?void 0:p.offsetHeight)||0;i.onCornerHeightChange(f),u(f)}),Gd(i.scrollbarY,()=>{var p;const f=((p=i.scrollbarY)==null?void 0:p.offsetWidth)||0;i.onCornerWidthChange(f),o(f)}),h?s.jsx(Ge.div,{...r,ref:e,style:{width:a,height:c,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function qx(t){return t?parseInt(t,10):0}function D5(t,e){const n=t/e;return isNaN(n)?0:n}function f0(t){const e=D5(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function _le(t,e,n,r="ltr"){const i=f0(n),a=i/2,o=e||a,c=i-o,u=n.scrollbar.paddingStart+o,h=n.scrollbar.size-n.scrollbar.paddingEnd-c,f=n.content-n.viewport,p=r==="ltr"?[0,f]:[f*-1,0];return O5([u,h],p)(t)}function sk(t,e,n="ltr"){const r=f0(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-i,o=e.content-e.viewport,c=a-r,u=n==="ltr"?[0,o]:[o*-1,0],h=Em(t,u);return O5([0,o],[0,c])(h)}function O5(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function L5(t,e){return t>0&&t<e}var wle=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function i(){const a={left:t.scrollLeft,top:t.scrollTop},o=n.left!==a.left,c=n.top!==a.top;(o||c)&&e(),n=a,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function m0(t,e){const n=Zn(t),r=x.useRef(0);return x.useEffect(()=>()=>window.clearTimeout(r.current),[]),x.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function Gd(t,e){const n=Zn(e);ir(()=>{let r=0;if(t){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(t),()=>{window.cancelAnimationFrame(r),i.unobserve(t)}}},[t,n])}function ble(t,e){const{asChild:n,children:r}=t;if(!n)return typeof e=="function"?e(r):e;const i=x.Children.only(r);return x.cloneElement(i,{children:typeof e=="function"?e(i.props.children):e})}var V5=C5,jle=k5,Nle=M5;const bS=x.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(V5,{ref:r,className:Je("relative overflow-hidden",t),...n,children:[s.jsx(jle,{className:"h-full w-full rounded-[inherit]",children:e}),s.jsx(F5,{}),s.jsx(Nle,{})]}));bS.displayName=V5.displayName;const F5=x.forwardRef(({className:t,orientation:e="vertical",...n},r)=>s.jsx(yS,{ref:r,orientation:e,className:Je("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:s.jsx(R5,{className:"relative flex-1 rounded-full bg-border"})}));F5.displayName=yS.displayName;const ik=({conversations:t,loading:e,searchQuery:n,setSearchQuery:r,currentConversation:i,currentUser:a,onSelectConversation:o})=>{const c=t.filter(f=>{const p=f.participants.find(_=>_!==(a==null?void 0:a.uid)),v=p?f.participantDetails[p]:null;return(v==null?void 0:v.name.toLowerCase().includes(n.toLowerCase()))||f.listingTitle.toLowerCase().includes(n.toLowerCase())}),u=f=>f===0?"Gratuit":new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(f),h=f=>{const p=f.participants.find(v=>v!==(a==null?void 0:a.uid));return p?f.participantDetails[p]:null};return s.jsxs("div",{className:"w-full lg:w-72 xl:w-80 border-r border-border bg-muted/20 flex flex-col h-full",children:[s.jsxs("div",{className:"p-3 border-b border-border bg-background/95 backdrop-blur",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(fn,{className:"w-5 h-5 text-primary"}),s.jsx("h1",{className:"text-lg font-semibold",children:"Messages"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Y,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Filtrer",children:s.jsx(My,{className:"w-4 h-4"})}),s.jsx(Y,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Trier",children:s.jsx(x4,{className:"w-4 h-4"})}),s.jsx(Y,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Paramètres",children:s.jsx(Dy,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(gr,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(qe,{placeholder:"Rechercher conversations...",value:n,onChange:f=>r(f.target.value),className:"pl-9 h-9 text-sm"})]})]}),s.jsx(bS,{className:"flex-1",children:e?s.jsx("div",{className:"p-2 space-y-2",children:Array.from({length:5}).map((f,p)=>s.jsx("div",{className:"animate-pulse",children:s.jsxs("div",{className:"flex items-center gap-2 p-2",children:[s.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:s.jsx(Gr,{className:"w-5 h-5 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1 space-y-1",children:[s.jsx("div",{className:"h-3 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-2 bg-muted rounded w-1/2"})]})]})},p))}):c.length===0?s.jsxs("div",{className:"p-6 text-center",children:[s.jsx(fn,{className:"w-10 h-10 text-muted-foreground mx-auto mb-3"}),s.jsx("h3",{className:"font-medium mb-1 text-sm",children:"Aucune conversation"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:n?s.jsxs(s.Fragment,{children:[s.jsx(gr,{className:"w-3 h-3 inline mr-1"}),'Aucun résultat pour "',n,'"']}):s.jsxs(s.Fragment,{children:[s.jsx(us,{className:"w-3 h-3 inline mr-1"}),"Vos conversations apparaîtront ici"]})})]}):s.jsx("div",{className:"p-1",children:c.map(f=>{var b,N;const p=h(f),v=f.unreadCount[a==null?void 0:a.uid]||0,_=(i==null?void 0:i.id)===f.id;return s.jsx("div",{onClick:()=>o(f),className:`p-2 rounded-md cursor-pointer transition-colors hover:bg-accent/50 ${_?"bg-accent":""}`,children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsxs("div",{className:"relative",children:[s.jsxs(ao,{className:"w-10 h-10",children:[s.jsx(oo,{src:p==null?void 0:p.avatar}),s.jsx(lo,{className:"text-xs bg-gradient-to-br from-primary to-secondary text-white",children:((N=(b=p==null?void 0:p.name)==null?void 0:b[0])==null?void 0:N.toUpperCase())||s.jsx(Gr,{className:"w-4 h-4"})})]}),(p==null?void 0:p.verified)&&s.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 rounded-full flex items-center justify-center",children:s.jsx(Ft,{className:"w-1.5 h-1.5 text-white"})})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[s.jsxs("h3",{className:"font-medium text-xs truncate flex items-center gap-1",children:[s.jsx(Gr,{className:"w-3 h-3 text-muted-foreground"}),(p==null?void 0:p.name)||"Utilisateur"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[f.lastMessage&&s.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[s.jsx($n,{className:"w-3 h-3"}),fh(f.lastMessage.sentAt,{addSuffix:!0,locale:Tr})]}),v>0&&s.jsx(tt,{className:"bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1",children:v>99?"99+":v})]})]}),s.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[f.listingImage?s.jsx("img",{src:f.listingImage,alt:"",className:"w-3 h-3 rounded object-cover"}):s.jsx(T4,{className:"w-3 h-3 text-muted-foreground"}),s.jsx("span",{className:"text-xs text-muted-foreground truncate flex-1",children:f.listingTitle}),s.jsxs("span",{className:"text-xs font-medium text-primary flex items-center gap-1",children:[f.listingPrice===0?s.jsx(Br,{className:"w-3 h-3 text-green-600"}):s.jsx("span",{children:"€"}),u(f.listingPrice)]})]}),f.lastMessage&&s.jsxs("p",{className:"text-xs text-muted-foreground truncate flex items-center gap-1",children:[f.lastMessage.senderId===(a==null?void 0:a.uid)?s.jsx(Od,{className:"w-3 h-3"}):s.jsx(fn,{className:"w-3 h-3"}),f.lastMessage.senderId===(a==null?void 0:a.uid)&&"Vous: ",f.lastMessage.text]})]})]})},f.id)})})})]})},ak=({conversation:t,messages:e,loading:n,currentUser:r,onBack:i})=>{var H,Q;const{sendMessage:a,markMessagesAsSeen:o,blockUser:c,reportUser:u,deleteConversation:h}=Xy(),[f,p]=x.useState(""),[v,_]=x.useState(40),[b,N]=x.useState(!1),[S,w]=x.useState(!1),[y,C]=x.useState(""),[R,M]=x.useState(""),B=x.useRef(null),O=x.useRef(null),D=()=>{var fe;(fe=O.current)==null||fe.scrollIntoView({behavior:"smooth"})},F=x.useCallback(()=>{const fe=B.current;if(!fe)return;fe.style.height="auto";const ke=Math.max(40,Math.min(fe.scrollHeight,120));_(ke)},[]),I=x.useCallback(fe=>{const ke=fe.target.value;p(ke),N(!!ke.trim()),setTimeout(F,0)},[F]),V=async()=>{if(!f.trim()||!t||!r)return;const fe=f.trim();p(""),N(!1),_(40),await a(t.id,fe,r.uid,r.displayName||"Utilisateur",r.photoURL)},k=fe=>{fe.key==="Enter"&&!fe.shiftKey&&(fe.preventDefault(),V())},P=async()=>{!t||!r||await c(t.id,r.uid)},q=async()=>{if(!t||!r||!y.trim())return;const fe=t.participants.find(ke=>ke!==r.uid);fe&&(await u(t.id,r.uid,fe,y,R),w(!1),C(""),M(""))},te=async()=>{!t||!r||(await h(t.id,r.uid),i())};if(x.useEffect(()=>{t&&r&&o(t.id,r.uid)},[t,r,o]),x.useEffect(D,[e]),!t)return s.jsx("div",{className:"flex-1 flex items-center justify-center bg-background",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(fn,{className:"w-8 h-8 text-white"})}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Sélectionnez une conversation"}),s.jsxs("p",{className:"text-muted-foreground flex items-center justify-center gap-2",children:[s.jsx(gr,{className:"w-4 h-4"}),"Choisissez une conversation pour commencer à discuter"]})]})});const re=t.participants.find(fe=>fe!==(r==null?void 0:r.uid)),K=re?t.participantDetails[re]:null,U=fe=>{const ke=new Date,Ze=new Date(fe);return Ze.toDateString()===ke.toDateString()?Ze.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}):Math.floor((ke.getTime()-Ze.getTime())/(1e3*60*60*24))<7?Ze.toLocaleDateString("fr-FR",{weekday:"short",hour:"2-digit",minute:"2-digit"}):Ze.toLocaleDateString("fr-FR",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})},W=fe=>fe.senderId!==(r==null?void 0:r.uid)?null:fe.seen?s.jsx(oG,{className:"w-3 h-3 text-blue-500"}):s.jsx(lG,{className:"w-3 h-3 text-muted-foreground"});return s.jsxs("div",{className:"flex-1 flex flex-col bg-background h-full",children:[s.jsxs("div",{className:"p-3 border-b border-border bg-background/95 backdrop-blur shrink-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx(Y,{variant:"ghost",size:"icon",onClick:i,className:"lg:hidden h-8 w-8",children:s.jsx(mc,{className:"w-4 h-4"})}),s.jsxs(ao,{className:"w-8 h-8",children:[s.jsx(oo,{src:K==null?void 0:K.avatar}),s.jsx(lo,{className:"text-xs bg-gradient-to-br from-primary to-secondary text-white",children:((Q=(H=K==null?void 0:K.name)==null?void 0:H[0])==null?void 0:Q.toUpperCase())||s.jsx(Gr,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("h2",{className:"font-semibold truncate text-sm flex items-center gap-1",children:[s.jsx(Gr,{className:"w-3 h-3 text-muted-foreground"}),(K==null?void 0:K.name)||"Utilisateur"]}),(K==null?void 0:K.verified)&&s.jsx(Ft,{className:"w-3 h-3 text-green-600"})]}),s.jsxs("p",{className:"text-xs text-muted-foreground truncate flex items-center gap-1",children:[s.jsx($r,{className:"w-3 h-3"}),K==null?void 0:K.university]})]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Y,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Appeler",children:s.jsx(sh,{className:"w-4 h-4"})}),s.jsx(Y,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Vidéo",children:s.jsx(M4,{className:"w-4 h-4"})}),s.jsxs(N1,{children:[s.jsx(S1,{asChild:!0,children:s.jsx(Y,{variant:"ghost",size:"icon",className:"h-8 w-8",children:s.jsx(uG,{className:"w-4 h-4"})})}),s.jsxs(bx,{align:"end",children:[s.jsx(Xt,{asChild:!0,children:s.jsxs(De,{to:`/listing/${t.listingId}`,className:"flex items-center",children:[s.jsx(ss,{className:"w-4 h-4 mr-2"}),"Voir l'annonce"]})}),s.jsxs(Xt,{children:[s.jsx(pi,{className:"w-4 h-4 mr-2"}),"Marquer comme favori"]}),s.jsxs(Xt,{children:[s.jsx(nG,{className:"w-4 h-4 mr-2"}),"Archiver"]}),s.jsx(Fi,{}),s.jsxs(Xt,{onClick:()=>w(!0),children:[s.jsx(cc,{className:"w-4 h-4 mr-2"}),"Signaler"]}),s.jsxs(Xt,{onClick:P,children:[s.jsx(iG,{className:"w-4 h-4 mr-2"}),"Bloquer"]}),s.jsxs(Xt,{onClick:te,className:"text-destructive",children:[s.jsx(Ha,{className:"w-4 h-4 mr-2"}),"Supprimer"]})]})]})]})]}),s.jsx(le,{className:"mt-2",children:s.jsx(ue,{className:"p-2",children:s.jsxs("div",{className:"flex items-center gap-2",children:[t.listingImage?s.jsx("img",{src:t.listingImage,alt:"",className:"w-8 h-8 rounded object-cover"}):s.jsx("div",{className:"w-8 h-8 bg-muted rounded flex items-center justify-center",children:s.jsx(T4,{className:"w-4 h-4 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("h3",{className:"font-medium text-xs truncate flex items-center gap-1",children:[s.jsx(iN,{className:"w-3 h-3 text-muted-foreground"}),t.listingTitle]}),s.jsx("p",{className:"text-sm font-semibold text-primary flex items-center gap-1",children:t.listingPrice===0?s.jsxs(s.Fragment,{children:[s.jsx(Br,{className:"w-3 h-3 text-green-600"}),"Gratuit"]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-xs",children:"€"}),new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(t.listingPrice)]})})]}),s.jsx(Y,{variant:"outline",size:"sm",asChild:!0,className:"h-7 text-xs px-2",children:s.jsxs(De,{to:`/listing/${t.listingId}`,className:"flex items-center gap-1",children:[s.jsx(ss,{className:"w-3 h-3"}),"Voir"]})})]})})})]}),s.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[s.jsx(bS,{className:"flex-1 p-3",children:s.jsxs("div",{className:"space-y-3",children:[n?s.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((fe,ke)=>s.jsx("div",{className:"animate-pulse",children:s.jsx("div",{className:`flex ${ke%2===0?"justify-start":"justify-end"}`,children:s.jsxs("div",{className:"max-w-xs",children:[s.jsx("div",{className:"h-3 bg-muted rounded w-3/4 mb-1"}),s.jsx("div",{className:"h-8 bg-muted rounded"})]})})},ke))}):e.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(fn,{className:"w-6 h-6 text-white"})}),s.jsx("h3",{className:"font-medium mb-2",children:"Aucun message"}),s.jsxs("p",{className:"text-sm text-muted-foreground flex items-center justify-center gap-2",children:[s.jsx(Od,{className:"w-4 h-4"}),"Commencez la conversation en envoyant un message"]})]}):e.map(fe=>{const ke=fe.senderId===(r==null?void 0:r.uid);return s.jsx("div",{className:`flex ${ke?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`max-w-[75%] lg:max-w-[60%] ${ke?"order-2":"order-1"}`,children:[s.jsx("div",{className:`rounded-2xl px-4 py-2 ${ke?"bg-primary text-primary-foreground rounded-br-md":"bg-muted text-foreground rounded-bl-md"}`,children:s.jsx("p",{className:"text-sm whitespace-pre-wrap leading-relaxed",children:fe.text})}),s.jsxs("div",{className:`flex items-center gap-1 mt-1 text-xs text-muted-foreground ${ke?"justify-end":"justify-start"}`,children:[s.jsx($n,{className:"w-3 h-3"}),s.jsx("span",{children:U(fe.sentAt)}),W(fe)]})]})},fe.id)}),s.jsx("div",{ref:O})]})}),s.jsxs("div",{className:"p-3 border-t border-border bg-background/95 backdrop-blur shrink-0",children:[s.jsxs("div",{className:"flex items-end gap-2 bg-muted/30 rounded-2xl border relative",children:[s.jsx(Es,{ref:B,value:f,placeholder:"Tapez votre message...",onChange:I,onKeyDown:k,rows:1,style:{height:v,transition:"height 0.15s ease-out",overflow:"hidden"},className:"min-h-[40px] max-h-[120px] resize-none border-0 bg-transparent focus:ring-0 focus:outline-none placeholder:text-muted-foreground/60 text-sm leading-relaxed py-2.5 px-4 pr-12 rounded-2xl"}),s.jsx(Y,{onClick:V,disabled:!f.trim(),size:"sm",className:"absolute right-1.5 bottom-1.5 h-7 w-7 p-0 rounded-full bg-gradient-to-r from-primary to-secondary",children:s.jsx(Od,{className:"h-3.5 w-3.5"})})]}),b&&s.jsxs("div",{className:"text-xs text-muted-foreground mt-1 px-2 flex items-center gap-1",children:[s.jsx(fn,{className:"w-3 h-3 animate-pulse"}),"En cours de frappe..."]})]})]}),s.jsx(ra,{open:S,onOpenChange:w,children:s.jsxs(wi,{children:[s.jsx(sa,{children:s.jsxs(bi,{className:"flex items-center gap-2",children:[s.jsx(cc,{className:"w-5 h-5 text-red-500"}),"Signaler cet utilisateur"]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs(Ee,{htmlFor:"report-reason",className:"flex items-center gap-2",children:[s.jsx(Rn,{className:"w-4 h-4"}),"Motif du signalement"]}),s.jsxs(Jt,{value:y,onValueChange:C,children:[s.jsx(qt,{children:s.jsx(en,{placeholder:"Sélectionnez un motif"})}),s.jsxs(Ht,{children:[s.jsx($e,{value:"spam",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(us,{className:"w-4 h-4"}),"Spam"]})}),s.jsx($e,{value:"harassment",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Rn,{className:"w-4 h-4"}),"Harcèlement"]})}),s.jsx($e,{value:"inappropriate",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(cc,{className:"w-4 h-4"}),"Contenu inapproprié"]})}),s.jsx($e,{value:"scam",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Rn,{className:"w-4 h-4"}),"Arnaque"]})}),s.jsx($e,{value:"other",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xl,{className:"w-4 h-4"}),"Autre"]})})]})]})]}),s.jsxs("div",{children:[s.jsxs(Ee,{htmlFor:"report-description",className:"flex items-center gap-2",children:[s.jsx(fn,{className:"w-4 h-4"}),"Description (optionnel)"]}),s.jsx(Es,{id:"report-description",value:R,onChange:fe=>M(fe.target.value),placeholder:"Décrivez le problème...",rows:3})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(Y,{variant:"outline",onClick:()=>w(!1),children:"Annuler"}),s.jsxs(Y,{onClick:q,disabled:!y,className:"bg-red-500 hover:bg-red-600",children:[s.jsx(cc,{className:"w-4 h-4 mr-2"}),"Signaler"]})]})]})]})})]})},Sle=()=>{const{currentUser:t,userProfile:e}=Tn(),{conversations:n,currentConversation:r,messages:i,loading:a,fetchConversations:o,fetchMessages:c,setCurrentConversation:u,cleanup:h}=Xy(),[f,p]=x.useState(""),[v,_]=x.useState(!1);x.useEffect(()=>(t&&o(t.uid),()=>{h()}),[t,o,h]),x.useEffect(()=>{r&&c(r.id)},[r,c]);const b=S=>{u(S),_(!0)},N=()=>{_(!1),u(null)};return t?s.jsxs("div",{className:"h-[calc(100vh-64px)] flex overflow-hidden",children:[s.jsx("div",{className:"lg:hidden w-full h-full",children:v?s.jsx(ak,{conversation:r,messages:i,loading:a,currentUser:t,onBack:N}):s.jsx(ik,{conversations:n,loading:a,searchQuery:f,setSearchQuery:p,currentConversation:r,setCurrentConversation:u,currentUser:t,onSelectConversation:b})}),s.jsxs("div",{className:"hidden lg:flex w-full h-full",children:[s.jsx(ik,{conversations:n,loading:a,searchQuery:f,setSearchQuery:p,currentConversation:r,setCurrentConversation:u,currentUser:t,onSelectConversation:b}),s.jsx(ak,{conversation:r,messages:i,loading:a,currentUser:t,onBack:N})]})]}):s.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(fn,{className:"w-8 h-8 text-white"})}),s.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Connectez-vous pour accéder à vos messages"}),s.jsxs("p",{className:"text-muted-foreground mb-6 flex items-center justify-center gap-2",children:[s.jsx(Gr,{className:"w-4 h-4"}),"Vous devez être connecté pour voir et envoyer des messages."]}),s.jsx(Y,{asChild:!0,className:"bg-gradient-to-r from-primary to-secondary",children:s.jsxs(De,{to:"/auth",className:"flex items-center gap-2",children:[s.jsx(Gr,{className:"w-4 h-4"}),"Se connecter"]})})]})};var wv={linear:function(t,e,n,r){var i=n-e;return i*t/r+e},easeInQuad:function(t,e,n,r){var i=n-e;return i*(t/=r)*t+e},easeOutQuad:function(t,e,n,r){var i=n-e;return-i*(t/=r)*(t-2)+e},easeInOutQuad:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,r){var i=n-e;return i*(t/=r)*t*t+e},easeOutCubic:function(t,e,n,r){var i=n-e;return i*((t=t/r-1)*t*t+1)+e},easeInOutCubic:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,n,r){var i=n-e;return i*(t/=r)*t*t*t+e},easeOutQuart:function(t,e,n,r){var i=n-e;return-i*((t=t/r-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,n,r){var i=n-e;return i*(t/=r)*t*t*t*t+e},easeOutQuint:function(t,e,n,r){var i=n-e;return i*((t=t/r-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,n,r){var i=n-e;return-i*Math.cos(t/r*(Math.PI/2))+i+e},easeOutSine:function(t,e,n,r){var i=n-e;return i*Math.sin(t/r*(Math.PI/2))+e},easeInOutSine:function(t,e,n,r){var i=n-e;return-i/2*(Math.cos(Math.PI*t/r)-1)+e},easeInExpo:function(t,e,n,r){var i=n-e;return t==0?e:i*Math.pow(2,10*(t/r-1))+e},easeOutExpo:function(t,e,n,r){var i=n-e;return t==r?e+i:i*(-Math.pow(2,-10*t/r)+1)+e},easeInOutExpo:function(t,e,n,r){var i=n-e;return t===0?e:t===r?e+i:(t/=r/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(-Math.pow(2,-10*--t)+2)+e},easeInCirc:function(t,e,n,r){var i=n-e;return-i*(Math.sqrt(1-(t/=r)*t)-1)+e},easeOutCirc:function(t,e,n,r){var i=n-e;return i*Math.sqrt(1-(t=t/r-1)*t)+e},easeInOutCirc:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,n,r){var i=n-e,a,o,c;return c=1.70158,o=0,a=i,t===0?e:(t/=r)===1?e+i:(o||(o=r*.3),a<Math.abs(i)?(a=i,c=o/4):c=o/(2*Math.PI)*Math.asin(i/a),-(a*Math.pow(2,10*(t-=1))*Math.sin((t*r-c)*(2*Math.PI)/o))+e)},easeOutElastic:function(t,e,n,r){var i=n-e,a,o,c;return c=1.70158,o=0,a=i,t===0?e:(t/=r)===1?e+i:(o||(o=r*.3),a<Math.abs(i)?(a=i,c=o/4):c=o/(2*Math.PI)*Math.asin(i/a),a*Math.pow(2,-10*t)*Math.sin((t*r-c)*(2*Math.PI)/o)+i+e)},easeInOutElastic:function(t,e,n,r){var i=n-e,a,o,c;return c=1.70158,o=0,a=i,t===0?e:(t/=r/2)===2?e+i:(o||(o=r*(.3*1.5)),a<Math.abs(i)?(a=i,c=o/4):c=o/(2*Math.PI)*Math.asin(i/a),t<1?-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*r-c)*(2*Math.PI)/o))+e:a*Math.pow(2,-10*(t-=1))*Math.sin((t*r-c)*(2*Math.PI)/o)*.5+i+e)},easeInBack:function(t,e,n,r,i){var a=n-e;return i===void 0&&(i=1.70158),a*(t/=r)*t*((i+1)*t-i)+e},easeOutBack:function(t,e,n,r,i){var a=n-e;return i===void 0&&(i=1.70158),a*((t=t/r-1)*t*((i+1)*t+i)+1)+e},easeInOutBack:function(t,e,n,r,i){var a=n-e;return i===void 0&&(i=1.70158),(t/=r/2)<1?a/2*(t*t*(((i*=1.525)+1)*t-i))+e:a/2*((t-=2)*t*(((i*=1.525)+1)*t+i)+2)+e},easeInBounce:function(t,e,n,r){var i=n-e,a;return a=wv.easeOutBounce(r-t,0,i,r),i-a+e},easeOutBounce:function(t,e,n,r){var i=n-e;return(t/=r)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,n,r){var i=n-e,a;return t<r/2?(a=wv.easeInBounce(t*2,0,i,r),a*.5+e):(a=wv.easeOutBounce(t*2-r,0,i,r),a*.5+i*.5+e)}},Ele=wv;function Cle(t){return t*Math.PI/180}function vs(t,e){return t+Math.random()*(e-t)}function Tle(t,e){return Math.floor(t+Math.random()*(e-t+1))}var Uf;(function(t){t[t.Circle=0]="Circle",t[t.Square=1]="Square",t[t.Strip=2]="Strip"})(Uf||(Uf={}));var Lo;(function(t){t[t.Positive=1]="Positive",t[t.Negative=-1]="Negative"})(Lo||(Lo={}));const kle=1e3/60;class Ple{constructor(e,n,r,i){this.getOptions=n;const{colors:a,initialVelocityX:o,initialVelocityY:c}=this.getOptions();this.context=e,this.x=r,this.y=i,this.w=vs(5,20),this.h=vs(5,20),this.radius=vs(5,10),this.vx=typeof o=="number"?vs(-o,o):vs(o.min,o.max),this.vy=typeof c=="number"?vs(-c,0):vs(c.min,c.max),this.shape=Tle(0,2),this.angle=Cle(vs(0,360)),this.angularSpin=vs(-.2,.2),this.color=a[Math.floor(Math.random()*a.length)],this.rotateY=vs(0,1),this.rotationDirection=vs(0,1)?Lo.Positive:Lo.Negative}update(e){const{gravity:n,wind:r,friction:i,opacity:a,drawShape:o}=this.getOptions(),c=e/kle;this.x+=this.vx*c,this.y+=this.vy*c,this.vy+=n*c,this.vx+=r*c,this.vx*=i**c,this.vy*=i**c,this.rotateY>=1&&this.rotationDirection===Lo.Positive?this.rotationDirection=Lo.Negative:this.rotateY<=-1&&this.rotationDirection===Lo.Negative&&(this.rotationDirection=Lo.Positive);const u=.1*this.rotationDirection*c;if(this.rotateY+=u,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=a,this.context.lineCap="round",this.context.lineWidth=2,o&&typeof o=="function")o.call(this,this.context);else switch(this.shape){case Uf.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case Uf.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case Uf.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class Ile{constructor(e,n){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=i=>{this.particles.splice(i,1)},this.getParticle=()=>{const i=vs(this.x,this.w+this.x),a=vs(this.y,this.h+this.y);return new Ple(this.context,this.getOptions,i,a)},this.animate=i=>{const{canvas:a,context:o,particlesGenerated:c,lastNumberOfPieces:u}=this,{run:h,recycle:f,numberOfPieces:p,debug:v,tweenFunction:_,tweenDuration:b}=this.getOptions();if(!h)return!1;const N=this.particles.length,S=f?N:c;if(S<p){u!==p&&(this.tweenProgress=0,this.tweenFrom=S,this.lastNumberOfPieces=p),this.tweenProgress=Math.min(b,Math.max(0,this.tweenProgress+i));const w=_(this.tweenProgress,this.tweenFrom,p,b),y=Math.round(w-S);for(let C=0;C<y;C++)this.particles.push(this.getParticle());this.particlesGenerated+=y}v&&(o.font="12px sans-serif",o.fillStyle="#333",o.textAlign="right",o.fillText(`Particles: ${N}`,a.width-10,a.height-20));for(let w=this.particles.length-1;w>=0;w--){const y=this.particles[w];y.update(i),(y.y>a.height||y.y<-100||y.x>a.width+100||y.x<-100)&&(f&&S<=p?this.particles[w]=this.getParticle():this.removeParticleAt(w))}return N>0||S<p},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.getOptions=n}}const jS={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:Ele.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class Ale{constructor(e,n){this.lastFrameTime=0,this.setOptionsWithDefaults=i=>{const a={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...a,...jS,...i},Object.assign(this,i.confettiSource)},this.update=(i=0)=>{const{options:{run:a,onConfettiComplete:o,frameRate:c},canvas:u,context:h}=this,f=Math.min(i-this.lastFrameTime,50);if(c&&f<1e3/c){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=i-(c?f%c:0),a&&(h.fillStyle="white",h.clearRect(0,0,u.width,u.height)),this.generator.animate(f)?this.rafId=requestAnimationFrame(this.update):(o&&typeof o=="function"&&this.generator.particlesGenerated>0&&o.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.generator=new Ile(this.canvas,()=>this.options),this.options=n,this.update()}get options(){return this._options}set options(e){var i,a;const n=(i=this._options)==null?void 0:i.run,r=(a=this._options)==null?void 0:a.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof e.recycle=="boolean"&&e.recycle&&r===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof e.run=="boolean"&&e.run&&n===!1&&this.update()}}const Rle=Me.createRef();class NS extends Me.Component{constructor(e){super(e),this.canvas=Me.createRef(),this.canvas=e.canvasRef||Rle}componentDidMount(){if(this.canvas.current){const e=z_(this.props)[0];this.confetti=new Ale(this.canvas.current,e)}}componentDidUpdate(){const e=z_(this.props)[0];this.confetti&&(this.confetti.options=e)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[e,n]=z_(this.props),r={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...n.style};return s.jsx("canvas",{width:e.width,height:e.height,ref:this.canvas,...n,style:r})}}NS.defaultProps={...jS};NS.displayName="ReactConfetti";function z_(t){const e={},n={},r={},i=[...Object.keys(jS),"confettiSource","drawShape","onConfettiComplete","frameRate"],a=["canvasRef"];for(const o in t){const c=t[o];i.includes(o)?e[o]=c:a.includes(o)?a[o]=c:r[o]=c}return[e,r,n]}const Mle=Me.forwardRef((t,e)=>s.jsx(NS,{canvasRef:e,...t})),Dle=({open:t,loading:e,email:n,onResend:r,onCheck:i,onClose:a,verified:o})=>s.jsx(ra,{open:t,children:s.jsxs(wi,{className:"max-w-md text-center",children:[o&&s.jsx(Mle,{width:window.innerWidth,height:window.innerHeight,numberOfPieces:250,recycle:!1}),s.jsxs(sa,{children:[s.jsxs(bi,{className:"flex items-center justify-center gap-2 text-lg",children:[o?s.jsx(SG,{className:"w-6 h-6 text-green-500 animate-bounce"}):s.jsx(wG,{className:"w-5 h-5 text-primary"}),o?"Félicitations !":"Vérifie ton email"]}),s.jsx(xc,{children:o?"Ton compte est maintenant activé. Tu peux accéder à la plateforme.":`Un lien de confirmation a été envoyé à ${n}. Clique dessus pour activer ton compte.`})]}),!o&&s.jsxs("div",{className:"space-y-3 mt-2",children:[s.jsxs("p",{className:"text-muted-foreground text-sm",children:["Pense à vérifier tes spams. ",s.jsx("br",{}),"La vérification est automatique dès que tu as cliqué sur le lien."]}),s.jsxs(Y,{onClick:i,disabled:e,className:"w-full",children:[e?s.jsx(Ur,{className:"w-4 h-4 mr-2 animate-spin"}):null,"J'ai validé mon email"]}),s.jsxs(Y,{onClick:r,variant:"outline",disabled:e,className:"w-full",children:[e?s.jsx(Ur,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Renvoyer l'email"]})]}),o&&s.jsxs("div",{className:"space-y-3 mt-4",children:[s.jsx("p",{className:"text-green-600 font-semibold text-lg",children:"Bienvenue sur StudyMarket !"}),s.jsx(Y,{onClick:a,className:"w-full bg-gradient-to-r from-primary to-secondary",children:"Accéder au site"})]})]})}),Ole=st.object({email:st.string().email("Email invalide"),password:st.string().min(6,"Le mot de passe doit contenir au moins 6 caractères")}),Lle=st.object({displayName:st.string().min(2,"Le nom doit contenir au moins 2 caractères"),email:st.string().email("Email invalide").refine(t=>["univ-","edu","gmail.com","ac.","student.","etudiant.","etu.","sorbonne-universite.fr","sorbonne-nouvelle.fr","dauphine.psl.eu","polytechnique.edu","ens.fr","centralesupelec.fr","mines-paristech.fr"].some(n=>t.includes(n)),"Vous devez utiliser une adresse email universitaire"),university:st.string().min(1,"Veuillez sélectionner votre université"),otherUniversity:st.string().optional(),fieldOfStudy:st.string().min(1,"Veuillez indiquer votre filière"),otherFieldOfStudy:st.string().optional(),graduationYear:st.string().min(1,"Veuillez indiquer votre année de diplôme"),password:st.string().min(6,"Le mot de passe doit contenir au moins 6 caractères"),confirmPassword:st.string()}).refine(t=>t.password===t.confirmPassword,{message:"Les mots de passe ne correspondent pas",path:["confirmPassword"]}).refine(t=>t.university==="Autre université"?!!t.otherUniversity&&t.otherUniversity.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre université",path:["otherUniversity"]}).refine(t=>t.fieldOfStudy==="Autre"?!!t.otherFieldOfStudy&&t.otherFieldOfStudy.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre filière",path:["otherFieldOfStudy"]}),Vle=st.object({university:st.string().min(1,"Veuillez sélectionner votre université"),otherUniversity:st.string().optional(),fieldOfStudy:st.string().min(1,"Veuillez indiquer votre filière"),otherFieldOfStudy:st.string().optional(),graduationYear:st.string().min(1,"Veuillez indiquer votre année de diplôme"),displayName:st.string().min(2,"Le nom doit contenir au moins 2 caractères")}).refine(t=>t.university==="Autre université"?!!t.otherUniversity&&t.otherUniversity.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre université",path:["otherUniversity"]}).refine(t=>t.fieldOfStudy==="Autre"?!!t.otherFieldOfStudy&&t.otherFieldOfStudy.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre filière",path:["otherFieldOfStudy"]}),ok=["Sorbonne Université","Université Paris-Dauphine","École Polytechnique","ENS Paris","CentraleSupélec","MINES ParisTech","HEC Paris","ESSEC","ESCP","Université Paris 1 Panthéon-Sorbonne","Université Paris 3 Sorbonne","Université Paris Cité","Sciences Po Paris","Autre université"],lk=["Informatique","Ingénierie","Commerce/Management","Droit","Médecine","Sciences","Lettres/Langues","Sciences Humaines","Arts","Architecture","Autre"],Fle=t=>["univ-","edu","ac.","student.","etudiant.","etu.","sorbonne-universite.fr","sorbonne-nouvelle.fr","dauphine.psl.eu","polytechnique.edu","ens.fr","centralesupelec.fr","mines-paristech.fr"].some(n=>t.includes(n)),zle=()=>{var K,U;const{currentUser:t,signIn:e,signInWithGoogle:n,fetchUserProfile:r}=Tn(),[i,a]=x.useState(!1),[o,c]=x.useState(!1),[u,h]=x.useState(!1),[f,p]=x.useState(!1),[v,_]=x.useState(""),[b,N]=x.useState(""),[S,w]=x.useState(!1),[y,C]=x.useState(null);fo();const[R,M]=x.useState(!1),[B,O]=x.useState(!1),[D,F]=x.useState(!1),I=ar(),V=yc({resolver:_c(Ole),defaultValues:{email:"",password:""}}),k=yc({resolver:_c(Lle),defaultValues:{displayName:"",email:"",university:"",otherUniversity:"",fieldOfStudy:"",otherFieldOfStudy:"",graduationYear:"",password:"",confirmPassword:""}}),P=yc({resolver:_c(Vle),defaultValues:{university:"",fieldOfStudy:"",graduationYear:""}});if(x.useEffect(()=>{(async()=>{if(t)try{const H=await cs(pt(Oe,"users",t.uid));if(H.exists()){const Q=H.data();if(!(t.emailVerified||t.providerData.some(ke=>ke.providerId==="google.com"))&&!Q.emailVerified){N(t.email||""),p(!0),M(!0),F(!1);return}}else{if(t.providerData.some(fe=>fe.providerId==="google.com")){if(!Fle(t.email||"")){_("Vous devez utiliser une adresse email universitaire"),Ui.signOut();return}C({email:t.email,displayName:t.displayName,photoURL:t.photoURL,uid:t.uid}),w(!0);return}const Q=localStorage.getItem("pendingUserData");if(Q&&t.emailVerified){const fe=JSON.parse(Q);await Qu(pt(Oe,"users",t.uid),fe),await r(t.uid),localStorage.removeItem("pendingUserData"),localStorage.removeItem("pendingUserEmail"),window.location.reload()}}}catch(H){console.error("Error checking user profile:",H)}})()},[t,r]),x.useEffect(()=>{let W=null;return f&&t&&!t.emailVerified&&(W=setInterval(async()=>{await pf(t),t.emailVerified&&(p(!1),N(""),_(""),window.location.reload())},5e3)),()=>{W&&clearInterval(W)}},[f,t]),x.useEffect(()=>{t?t.emailVerified?(M(!1),F(!1)):(N(t.email||""),M(!0),F(!1)):(M(!1),F(!1))},[t]),x.useEffect(()=>{let W=null;return R&&t&&!t.emailVerified&&(W=setInterval(async()=>{await pf(t),t.emailVerified&&(F(!0),W&&clearInterval(W))},5e3)),()=>{W&&clearInterval(W)}},[R,t]),S&&y)return s.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-8",children:s.jsxs(le,{className:"w-full max-w-md",children:[s.jsxs(We,{className:"text-center",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:s.jsx(TG,{className:"w-6 h-6 text-green-600"})})}),s.jsx(He,{className:"text-2xl text-green-600",children:"Complétez votre profil étudiant"}),s.jsx(Pt,{children:"Dernière étape pour accéder à StudyMarket"})]}),s.jsxs(ue,{className:"space-y-4",children:[s.jsxs(Ut,{children:[s.jsx(Tt,{className:"h-4 w-4"}),s.jsxs($t,{children:["Connecté avec ",s.jsx("strong",{children:y.email})]})]}),v&&s.jsxs(Ut,{variant:"destructive",children:[s.jsx(Ff,{className:"h-4 w-4"}),s.jsx($t,{children:v})]}),s.jsxs("form",{onSubmit:P.handleSubmit(async W=>{h(!0),_("");try{const H=W.university==="Autre université"?W.otherUniversity:W.university,Q=W.fieldOfStudy==="Autre"?W.otherFieldOfStudy:W.fieldOfStudy;if(await Qu(pt(Oe,"users",y.uid),{email:y.email,displayName:W.displayName,photoURL:y.photoURL,university:H,otherUniversity:W.university==="Autre université"?W.otherUniversity:void 0,fieldOfStudy:Q,otherFieldOfStudy:W.fieldOfStudy==="Autre"?W.otherFieldOfStudy:void 0,graduationYear:parseInt(W.graduationYear),createdAt:new Date().toISOString(),emailVerified:!0,isStudent:!0,provider:"google",profileCompleted:!0}),t&&y.displayName)try{await cm(t,{displayName:W.displayName})}catch{}await r(y.uid),w(!1),window.location.reload()}catch(H){console.error("Error completing profile:",H),_("Erreur lors de la sauvegarde du profil")}finally{h(!1)}}),className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ee,{htmlFor:"university",children:"Université"}),s.jsxs(Jt,{onValueChange:W=>P.setValue("university",W),value:P.watch("university"),children:[s.jsx(qt,{children:s.jsx(en,{placeholder:"Sélectionnez votre université"})}),s.jsx(Ht,{children:ok.map(W=>s.jsx($e,{value:W,children:W},W))})]}),P.watch("university")==="Autre université"&&s.jsx(qe,{id:"otherUniversity",type:"text",placeholder:"Nom de votre université",...P.register("otherUniversity"),className:"mt-2"}),P.formState.errors.university&&s.jsx("p",{className:"text-sm text-destructive",children:P.formState.errors.university.message}),P.watch("university")==="Autre université"&&P.formState.errors.otherUniversity&&s.jsx("p",{className:"text-sm text-destructive",children:P.formState.errors.otherUniversity.message})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ee,{htmlFor:"fieldOfStudy",children:"Filière"}),s.jsxs(Jt,{onValueChange:W=>P.setValue("fieldOfStudy",W),value:P.watch("fieldOfStudy"),children:[s.jsx(qt,{children:s.jsx(en,{placeholder:"Filière"})}),s.jsx(Ht,{children:lk.map(W=>s.jsx($e,{value:W,children:W},W))})]}),P.watch("fieldOfStudy")==="Autre"&&s.jsx(qe,{id:"otherFieldOfStudy",type:"text",placeholder:"Nom de votre filière",...P.register("otherFieldOfStudy"),className:"mt-2"}),P.formState.errors.fieldOfStudy&&s.jsx("p",{className:"text-sm text-destructive",children:P.formState.errors.fieldOfStudy.message}),P.watch("fieldOfStudy")==="Autre"&&P.formState.errors.otherFieldOfStudy&&s.jsx("p",{className:"text-sm text-destructive",children:P.formState.errors.otherFieldOfStudy.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ee,{htmlFor:"graduationYear",children:"Année de diplôme"}),s.jsxs(Jt,{onValueChange:W=>P.setValue("graduationYear",W),children:[s.jsx(qt,{children:s.jsx(en,{placeholder:"Année"})}),s.jsx(Ht,{children:Array.from({length:8},(W,H)=>2024+H).map(W=>s.jsx($e,{value:W.toString(),children:W},W))})]}),P.formState.errors.graduationYear&&s.jsx("p",{className:"text-sm text-destructive",children:P.formState.errors.graduationYear.message})]})]}),s.jsxs(Y,{type:"submit",className:"w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800",disabled:u,children:[u?s.jsx(Ur,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Finaliser mon inscription"]})]}),s.jsx(Y,{variant:"outline",onClick:()=>{Ui.signOut(),w(!1),C(null)},className:"w-full",children:"Se déconnecter et recommencer"})]})]})});if(f)return s.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-8",children:s.jsxs(le,{className:"w-full max-w-md",children:[s.jsxs(We,{className:"text-center",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:s.jsx(us,{className:"w-6 h-6 text-blue-600"})})}),s.jsx(He,{className:"text-2xl text-blue-600",children:"Vérifiez votre email"}),s.jsxs(Pt,{children:["Un lien d'activation a été envoyé à ",s.jsx("strong",{children:b}),".",s.jsx("br",{}),"Cliquez sur le lien pour activer votre compte.",s.jsx("br",{}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"(Vous pouvez fermer cette page et revenir après avoir validé l'email)"})]})]}),s.jsxs(ue,{className:"space-y-4",children:[s.jsxs(Ut,{children:[s.jsx(Tt,{className:"h-4 w-4"}),s.jsxs($t,{children:["Nous avons envoyé un lien d'activation à ",s.jsx("strong",{children:b}),".",s.jsx("br",{}),s.jsx("span",{className:"text-xs",children:"Vérifiez vos spams si vous ne le trouvez pas."})]})]}),s.jsxs("div",{className:"text-sm text-muted-foreground space-y-2",children:[s.jsx("p",{children:s.jsx("strong",{children:"Important :"})}),s.jsx("p",{children:"• Cliquez sur le lien dans l'email pour activer votre compte"}),s.jsx("p",{children:"• Vérifiez votre boîte de réception et vos spams"}),s.jsx("p",{children:"• Le lien expire dans 24h"})]}),s.jsxs(Y,{onClick:async()=>{if(t){h(!0);try{await n_(t),_(""),alert("Email d'activation renvoyé !")}catch(W){_("Erreur lors de l'envoi de l'email"),console.error("Error resending verification:",W)}h(!1)}},variant:"outline",className:"w-full",disabled:u||!t,children:[u?s.jsx(Ur,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(us,{className:"w-4 h-4 mr-2"}),"Renvoyer l'email d'activation"]}),s.jsx(Y,{onClick:async()=>{if(t){h(!0);try{await pf(t),t.emailVerified?(p(!1),N(""),_(""),window.location.reload()):_("L'email n'est pas encore validé. Pensez à vérifier vos spams.")}catch{_("Erreur lors de la vérification de l'état de l'email")}h(!1)}},variant:"secondary",className:"w-full",disabled:u||!t,children:"J'ai déjà validé mon email"}),v&&s.jsxs(Ut,{variant:"destructive",children:[s.jsx(Ff,{className:"h-4 w-4"}),s.jsx($t,{children:v})]}),s.jsx(Y,{variant:"link",onClick:()=>{p(!1),N(""),_(""),t&&Ui.signOut()},className:"w-full",children:"Retour à l'inscription"})]})]})});const q=async W=>{h(!0),_("");try{await e(W.email,W.password),I("/")}catch(H){H.code==="auth/invalid-credential"?_("Email ou mot de passe incorrect"):H.code==="auth/user-not-found"?_("Aucun compte trouvé avec cet email"):H.code==="auth/user-disabled"?_("Ce compte a été désactivé"):H.code==="auth/too-many-requests"?_("Trop de tentatives. Réessayez plus tard."):_("Erreur de connexion: "+(H.message||"Erreur inconnue")),console.error("Sign in error:",H)}finally{h(!1)}},te=async W=>{h(!0),_("");try{const Q=(await xA(Ui,W.email,W.password)).user;await n_(Q,{url:`${window.location.origin}/auth`,handleCodeInApp:!1});const fe=W.university==="Autre université"?W.otherUniversity:W.university,ke=W.fieldOfStudy==="Autre"?W.otherFieldOfStudy:W.fieldOfStudy,Ze={displayName:W.displayName,university:fe,otherUniversity:W.university==="Autre université"?W.otherUniversity:void 0,fieldOfStudy:ke,otherFieldOfStudy:W.fieldOfStudy==="Autre"?W.otherFieldOfStudy:void 0,graduationYear:parseInt(W.graduationYear),email:W.email,createdAt:new Date().toISOString(),emailVerified:!0,isStudent:!0,provider:"email"};await Qu(pt(Oe,"users",Q.uid),Ze),await r(Q.uid),N(W.email),M(!0),F(!1),Q&&await cm(Q,{displayName:W.displayName}),window.location.reload()}catch(H){console.error("Sign up error:",H),H.code==="auth/email-already-in-use"?_("Cette adresse email est déjà utilisée"):H.code==="auth/weak-password"?_("Le mot de passe est trop faible"):H.code==="auth/invalid-email"?_("Adresse email invalide"):_("Erreur lors de la création du compte")}finally{h(!1)}},re=async()=>{h(!0),_("");try{await n()}catch(W){W.code==="auth/popup-closed-by-user"?_("Connexion annulée"):W.code==="auth/popup-blocked"?_("Popup bloquée par le navigateur"):W.code==="auth/account-exists-with-different-credential"?_("Un compte existe déjà avec cet email"):_("Erreur de connexion avec Google: "+(W.message||"Erreur inconnue")),console.error("Google sign in error:",W)}finally{h(!1)}};return x.useEffect(()=>{(async()=>{if(t&&t.emailVerified&&!(await cs(pt(Oe,"users",t.uid))).exists()){const Q=localStorage.getItem("pendingUserData");if(Q){const fe=JSON.parse(Q);await Qu(pt(Oe,"users",t.uid),fe),await r(t.uid),localStorage.removeItem("pendingUserData"),localStorage.removeItem("pendingUserEmail"),window.location.reload()}}})()},[t,r]),s.jsxs("div",{className:"min-h-screen flex items-center justify-center px-2 sm:px-0",children:[s.jsxs(le,{className:"w-full max-w-md mx-auto px-2 py-4 sm:px-6",children:[s.jsxs(We,{className:"text-center",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-secondary rounded-lg flex items-center justify-center",children:s.jsx(rh,{className:"w-6 h-6 text-white"})})}),s.jsx(He,{className:"text-2xl",children:i?"Rejoindre StudyMarket":"Se connecter"}),s.jsx(Pt,{children:i?"Inscription sécurisée pour étudiants":"Connectez-vous à votre compte étudiant"}),i&&s.jsx("div",{className:"flex items-center justify-center gap-2 mt-4",children:s.jsxs(tt,{className:"bg-blue-100 text-blue-800 border-blue-200",children:[s.jsx(Ft,{className:"w-3 h-3 mr-1"}),"Email universitaire requis"]})})]}),s.jsxs(ue,{className:"space-y-6",children:[v&&s.jsxs(Ut,{variant:"destructive",children:[s.jsx(Ff,{className:"h-4 w-4"}),s.jsx($t,{children:v})]}),s.jsxs(Y,{variant:"outline",className:"w-full",onClick:re,disabled:u,children:[u?s.jsx(Ur,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsxs("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",children:[s.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{fill:"currentColor",d:"M12 1c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continuer avec Google Éducation"]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx(Ws,{className:"w-full"})}),s.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:s.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Ou avec votre email universitaire"})})]}),s.jsxs("form",{onSubmit:i?k.handleSubmit(te):V.handleSubmit(q),className:"space-y-4",children:[i&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ee,{htmlFor:"displayName",children:"Nom complet"}),s.jsxs("div",{className:"relative",children:[s.jsx(Gr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(qe,{id:"displayName",type:"text",placeholder:"Votre nom complet",className:"pl-10",...k.register("displayName")})]}),k.formState.errors.displayName&&s.jsx("p",{className:"text-sm text-destructive",children:k.formState.errors.displayName.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ee,{htmlFor:"email",children:"Email universitaire"}),s.jsxs("div",{className:"relative",children:[s.jsx(us,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(qe,{id:"email",type:"email",placeholder:"prenom.nom@univ-exemple.fr",className:"pl-10",...i?k.register("email"):V.register("email")})]}),(i?k.formState.errors.email:V.formState.errors.email)&&s.jsx("p",{className:"text-sm text-destructive",children:(K=i?k.formState.errors.email:V.formState.errors.email)==null?void 0:K.message}),i&&s.jsx("p",{className:"text-xs text-muted-foreground",children:"Un lien d'activation sera envoyé à cette adresse"})]}),i&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ee,{htmlFor:"university",children:"Université"}),s.jsxs(Jt,{onValueChange:W=>k.setValue("university",W),value:k.watch("university"),children:[s.jsx(qt,{children:s.jsx(en,{placeholder:"Sélectionnez votre université"})}),s.jsx(Ht,{children:ok.map(W=>s.jsx($e,{value:W,children:W},W))})]}),k.watch("university")==="Autre université"&&s.jsx(qe,{id:"otherUniversity",type:"text",placeholder:"Nom de votre université",...k.register("otherUniversity"),className:"mt-2"}),k.formState.errors.university&&s.jsx("p",{className:"text-sm text-destructive",children:k.formState.errors.university.message}),k.watch("university")==="Autre université"&&k.formState.errors.otherUniversity&&s.jsx("p",{className:"text-sm text-destructive",children:k.formState.errors.otherUniversity.message})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ee,{htmlFor:"fieldOfStudy",children:"Filière"}),s.jsxs(Jt,{onValueChange:W=>k.setValue("fieldOfStudy",W),value:k.watch("fieldOfStudy"),children:[s.jsx(qt,{children:s.jsx(en,{placeholder:"Filière"})}),s.jsx(Ht,{children:lk.map(W=>s.jsx($e,{value:W,children:W},W))})]}),k.watch("fieldOfStudy")==="Autre"&&s.jsx(qe,{id:"otherFieldOfStudy",type:"text",placeholder:"Nom de votre filière",...k.register("otherFieldOfStudy"),className:"mt-2"}),k.formState.errors.fieldOfStudy&&s.jsx("p",{className:"text-sm text-destructive",children:k.formState.errors.fieldOfStudy.message}),k.watch("fieldOfStudy")==="Autre"&&k.formState.errors.otherFieldOfStudy&&s.jsx("p",{className:"text-sm text-destructive",children:k.formState.errors.otherFieldOfStudy.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ee,{htmlFor:"graduationYear",children:"Année de diplôme"}),s.jsxs(Jt,{onValueChange:W=>k.setValue("graduationYear",W),children:[s.jsx(qt,{children:s.jsx(en,{placeholder:"Année"})}),s.jsx(Ht,{children:Array.from({length:8},(W,H)=>2024+H).map(W=>s.jsx($e,{value:W.toString(),children:W},W))})]}),k.formState.errors.graduationYear&&s.jsx("p",{className:"text-sm text-destructive",children:k.formState.errors.graduationYear.message})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ee,{htmlFor:"password",children:"Mot de passe"}),s.jsxs("div",{className:"relative",children:[s.jsx(Dc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(qe,{id:"password",type:o?"text":"password",placeholder:"••••••••",className:"pl-10 pr-10",...i?k.register("password"):V.register("password")}),s.jsx(Y,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-1/2 transform -translate-y-1/2 h-full px-3",onClick:()=>c(!o),children:o?s.jsx(dG,{className:"w-4 h-4"}):s.jsx(Md,{className:"w-4 h-4"})})]}),(i?k.formState.errors.password:V.formState.errors.password)&&s.jsx("p",{className:"text-sm text-destructive",children:(U=i?k.formState.errors.password:V.formState.errors.password)==null?void 0:U.message})]}),i&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ee,{htmlFor:"confirmPassword",children:"Confirmer le mot de passe"}),s.jsxs("div",{className:"relative",children:[s.jsx(Dc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(qe,{id:"confirmPassword",type:o?"text":"password",placeholder:"••••••••",className:"pl-10",...k.register("confirmPassword")})]}),k.formState.errors.confirmPassword&&s.jsx("p",{className:"text-sm text-destructive",children:k.formState.errors.confirmPassword.message})]}),s.jsxs(Y,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90",disabled:u,children:[u?s.jsx(Ur,{className:"w-4 h-4 mr-2 animate-spin"}):null,i?"Créer le compte et envoyer l'email":"Se connecter"]})]}),s.jsx("div",{className:"w-full",children:s.jsx(Y,{variant:"link",onClick:()=>a(!i),disabled:u,className:"w-full flex justify-center items-center text-center break-words px-1",children:i?"Déjà un compte ? Se connecter":"Pas encore de compte ? S'inscrire"})}),i&&s.jsx("div",{className:"text-center text-xs text-muted-foreground",children:"En créant un compte, vous acceptez nos conditions d'utilisation. Seules les adresses email universitaires sont acceptées."})]})]}),s.jsx(Dle,{open:R,loading:B,email:b,onResend:async()=>{O(!0);try{t&&await n_(t)}finally{O(!1)}},onCheck:async()=>{O(!0);try{t&&(await pf(t),t.emailVerified&&F(!0))}finally{O(!1)}},onClose:()=>{M(!1),F(!1),I("/")},verified:D})]})},oi=({children:t})=>{const{currentUser:e}=Tn(),n=fo();return e?s.jsx(s.Fragment,{children:t}):s.jsx(P8,{to:"/auth",state:{from:n},replace:!0})},z5=({cart:t,total:e,showCheckoutButton:n=!0})=>{const r=ar(),i=e,a=0,o=0,c=i+a-o,u=h=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(h);return s.jsxs(le,{children:[s.jsx(We,{children:s.jsxs(He,{className:"flex items-center gap-2",children:[s.jsx(yl,{className:"w-5 h-5"}),"Récapitulatif de commande"]})}),s.jsx(ue,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("span",{className:"text-muted-foreground",children:["Articles (",t.reduce((h,f)=>h+f.quantity,0),")"]}),s.jsx("span",{children:u(i)})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("span",{className:"flex items-center gap-1 text-muted-foreground",children:[s.jsx(Oy,{className:"w-4 h-4"}),"Livraison"]}),s.jsx("span",{className:"text-green-600 font-medium",children:"Gratuite"})]}),o>0,s.jsx(Ws,{}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-semibold",children:"Total"}),s.jsx("span",{className:"font-bold text-lg",children:u(c)})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"* TVA incluse"}),n&&s.jsxs(Y,{onClick:()=>r("/checkout"),className:"w-full mt-4 bg-gradient-to-r from-primary to-secondary",disabled:t.length===0,children:[s.jsx(zn,{className:"mr-2 h-4 w-4"}),"Procéder au paiement",s.jsx(Gi,{className:"ml-2 h-4 w-4"})]})]})})]})},Ule=()=>{const{currentUser:t}=Tn(),{cart:e,updateQuantity:n,removeFromCart:r,clearCart:i,cartTotal:a}=dh(),o=ar(),[c,u]=x.useState(""),[h,f]=x.useState(!1),p=(b,N)=>{if(!(N<1)){if(N>10){me.error("Maximum 10 articles par produit");return}n(b,N)}},v=b=>{r(b),me.success("Article retiré du panier")},_=()=>{c.trim()&&(f(!0),setTimeout(()=>{c.toLowerCase()==="etudiant10"?me.success("Code promo appliqué : 10% de réduction"):me.error("Code promo invalide ou expiré"),f(!1)},1e3))};return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs(Y,{variant:"ghost",onClick:()=>o(-1),className:"-ml-4",children:[s.jsx(mc,{className:"w-4 h-4 mr-2"}),"Retour"]}),s.jsxs("div",{className:"flex items-center justify-between mt-4",children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(yl,{className:"w-8 h-8"}),"Mon Panier"]}),e.length>0&&s.jsxs(Y,{variant:"outline",onClick:i,className:"text-destructive hover:text-destructive",children:[s.jsx(Ha,{className:"w-4 h-4 mr-2"}),"Vider le panier"]})]})]}),e.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(yl,{className:"w-8 h-8 text-muted-foreground"})}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Votre panier est vide"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas encore ajouté d'articles à votre panier."}),s.jsx(Y,{asChild:!0,children:s.jsxs(De,{to:"/products",children:[s.jsx(vc,{className:"w-4 h-4 mr-2"}),"Parcourir les produits"]})})]}):s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2",children:[s.jsxs(le,{children:[s.jsx(We,{children:s.jsxs(He,{className:"flex items-center justify-between",children:[s.jsxs("span",{children:["Articles (",e.reduce((b,N)=>b+N.quantity,0),")"]}),s.jsxs(Y,{variant:"ghost",size:"sm",onClick:()=>o("/products"),children:[s.jsx(vc,{className:"w-4 h-4 mr-2"}),"Continuer mes achats"]})]})}),s.jsx(ue,{children:s.jsx("div",{className:"space-y-4",children:e.map(b=>s.jsxs("div",{className:"flex items-center gap-4 p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[b.image?s.jsx("img",{src:b.image,alt:b.name,className:"w-20 h-20 object-cover rounded"}):s.jsx("div",{className:"w-20 h-20 bg-muted rounded flex items-center justify-center",children:s.jsx(vc,{className:"w-8 h-8 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold",children:b.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:b.seller}),s.jsxs("div",{className:"flex items-center mt-2",children:[s.jsx(Y,{variant:"outline",size:"icon",className:"h-8 w-8 rounded-r-none",onClick:()=>p(b.id,b.quantity-1),disabled:b.quantity<=1,children:s.jsx(P4,{className:"h-3 w-3"})}),s.jsx(qe,{type:"number",value:b.quantity,onChange:N=>{const S=parseInt(N.target.value);isNaN(S)||p(b.id,S)},className:"h-8 w-12 rounded-none text-center [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),s.jsx(Y,{variant:"outline",size:"icon",className:"h-8 w-8 rounded-l-none",onClick:()=>p(b.id,b.quantity+1),disabled:b.quantity>=10,children:s.jsx(gc,{className:"h-3 w-3"})})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(b.price*b.quantity)}),s.jsxs(Y,{variant:"ghost",size:"sm",onClick:()=>v(b.id),className:"text-destructive hover:text-destructive mt-2",children:[s.jsx(Ha,{className:"h-3 w-3 mr-1"}),"Supprimer"]})]})]},b.id))})})]}),s.jsx(le,{className:"mt-6",children:s.jsxs(ue,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(ym,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(qe,{placeholder:"Code promo",value:c,onChange:b=>u(b.target.value),className:"pl-10"})]}),s.jsx(Y,{onClick:_,disabled:!c.trim()||h,children:h?s.jsxs(s.Fragment,{children:[s.jsx(no,{className:"w-4 h-4 mr-2 animate-spin"}),"Application..."]}):"Appliquer"})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:'Essayez le code "ETUDIANT10" pour 10% de réduction'})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(z5,{cart:e,total:a,showCheckoutButton:!0}),!t&&s.jsxs(Ut,{className:"border-orange-200 bg-orange-50",children:[s.jsx(Rn,{className:"h-4 w-4 text-orange-600"}),s.jsx($t,{className:"text-orange-800",children:"Vous devez être connecté pour finaliser votre commande."})]})]})]})]})},Bg=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},SS=uh((t,e)=>({orders:[],loading:!1,fetchUserOrders:async n=>{if(n)try{t({loading:!0});const r=cn(Vt(Oe,"orders"),In("userId","==",n),Zs(100)),i=await An(r),a=[];i.forEach(o=>{const c=o.data();a.push({id:o.id,...c,createdAt:Bg(c.createdAt),updatedAt:Bg(c.updatedAt)})}),a.sort((o,c)=>c.createdAt.getTime()-o.createdAt.getTime()),t({orders:a,loading:!1})}catch(r){console.error("Error fetching orders:",r),me.error("Erreur lors du chargement des commandes"),t({loading:!1})}},getOrderById:async n=>{try{const r=await cs(pt(Oe,"orders",n));if(r.exists()){const i=r.data();return{id:r.id,...i,createdAt:Bg(i.createdAt),updatedAt:Bg(i.updatedAt)}}return null}catch(r){return console.error("Error getting order:",r),me.error("Erreur lors du chargement de la commande"),null}},createOrder:async n=>{try{const r=Math.random().toString(36).substring(2,8).toUpperCase(),i={...n,securityCode:r,createdAt:tr(),updatedAt:tr()},a=await vl(Vt(Oe,"orders"),i),o={id:a.id,...n,createdAt:new Date,updatedAt:new Date};return t(c=>({orders:[o,...c.orders]})),me.success("Commande créée avec succès !"),a.id}catch(r){throw console.error("Error creating order:",r),me.error("Erreur lors de la création de la commande"),r}},updateOrderStatus:async(n,r,i)=>{try{const a={status:r,updatedAt:tr()};i&&(a.notes=i),await nn(pt(Oe,"orders",n),a),t(o=>({orders:o.orders.map(c=>c.id===n?{...c,status:r,notes:i||c.notes,updatedAt:new Date}:c)})),me.success(`Statut de la commande mis à jour : ${r}`)}catch(a){console.error("Error updating order status:",a),me.error("Erreur lors de la mise à jour du statut")}},cancelOrder:async(n,r)=>{try{await nn(pt(Oe,"orders",n),{status:"cancelled",notes:r,updatedAt:tr()}),t(i=>({orders:i.orders.map(a=>a.id===n?{...a,status:"cancelled",notes:r,updatedAt:new Date}:a)})),me.success("Commande annulée")}catch(i){console.error("Error cancelling order:",i),me.error("Erreur lors de l'annulation de la commande")}}})),$le=()=>{const{currentUser:t,userProfile:e}=Tn(),n=ar(),r=fo(),{cart:i,cartTotal:a,clearCart:o}=dh(),{createOrder:c}=SS(),[u,h]=x.useState("shipping"),[f,p]=x.useState(!1),[v,_]=x.useState(null),[b,N]=x.useState({}),[S,w]=x.useState({fullName:(e==null?void 0:e.displayName)||"",email:(e==null?void 0:e.email)||"",phone:(e==null?void 0:e.phone)||"",address:"",city:"",postalCode:"",country:"France",university:(e==null?void 0:e.university)||"",saveInfo:!0}),[y,C]=x.useState({}),[R,M]=x.useState(!1);x.useEffect(()=>{var V;i.length===0&&!((V=r.state)!=null&&V.directCheckout)&&(n("/cart"),me.error("Votre panier est vide"))},[i,n,r]);const B=()=>{const V={};return S.fullName||(V.fullName="Nom complet requis"),S.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(S.email)||(V.email="Format d'email invalide"):V.email="Email requis",S.phone||(V.phone="Téléphone requis"),S.address||(V.address="Adresse requise"),S.city||(V.city="Ville requise"),S.postalCode||(V.postalCode="Code postal requis"),C(V),Object.keys(V).length===0},O=V=>{V.preventDefault(),B()&&(h("payment"),window.scrollTo(0,0))},D=(V,k)=>{_(V),N(k),V==="card"&&k.stripePaymentId&&(h("review"),window.scrollTo(0,0))},F=()=>{if(!v){me.error("Veuillez sélectionner un mode de paiement");return}h("review"),window.scrollTo(0,0)},I=async()=>{if(!t){n("/auth");return}if(!R){me.error("Veuillez accepter les conditions générales");return}p(!0);try{const V={userId:t.uid,items:i,total:a,shipping:S,payment:{method:v,details:b,transactionId:b.stripePaymentId},status:v==="card"?"processing":"pending"},k=await c(V);o(),n(`/order-confirmation/${k}`)}catch(V){console.error("Error placing order:",V),me.error("Erreur lors de la création de la commande")}finally{p(!1)}};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs(Y,{variant:"ghost",onClick:()=>n(-1),className:"-ml-4",children:[s.jsx(mc,{className:"w-4 h-4 mr-2"}),"Retour"]}),s.jsx("h1",{className:"text-3xl font-bold mt-4",children:"Finaliser votre commande"}),s.jsxs("div",{className:"flex items-center mt-6",children:[s.jsxs("div",{className:`flex items-center ${u==="shipping"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${u==="shipping"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"1"}),s.jsx("span",{className:"ml-2 font-medium",children:"Livraison"})]}),s.jsx(Gi,{className:"mx-2 text-muted-foreground"}),s.jsxs("div",{className:`flex items-center ${u==="payment"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${u==="payment"||u==="review"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"2"}),s.jsx("span",{className:"ml-2 font-medium",children:"Paiement"})]}),s.jsx(Gi,{className:"mx-2 text-muted-foreground"}),s.jsxs("div",{className:`flex items-center ${u==="review"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${u==="review"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"3"}),s.jsx("span",{className:"ml-2 font-medium",children:"Vérification"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[u==="shipping"&&s.jsxs(le,{children:[s.jsxs(We,{children:[s.jsxs(He,{className:"flex items-center gap-2",children:[s.jsx(Oy,{className:"w-5 h-5"}),"Informations de livraison"]}),s.jsx(Pt,{children:"Entrez vos coordonnées pour la livraison"})]}),s.jsx(ue,{children:s.jsxs("form",{onSubmit:O,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs(Ee,{htmlFor:"fullName",className:"flex items-center gap-1",children:[s.jsx(Gr,{className:"w-4 h-4"}),"Nom complet *"]}),s.jsx(qe,{id:"fullName",value:S.fullName,onChange:V=>w({...S,fullName:V.target.value}),className:y.fullName?"border-red-500":""}),y.fullName&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:y.fullName})]}),s.jsxs("div",{children:[s.jsxs(Ee,{htmlFor:"email",className:"flex items-center gap-1",children:[s.jsx(us,{className:"w-4 h-4"}),"Email *"]}),s.jsx(qe,{id:"email",type:"email",value:S.email,onChange:V=>w({...S,email:V.target.value}),className:y.email?"border-red-500":""}),y.email&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:y.email})]}),s.jsxs("div",{children:[s.jsxs(Ee,{htmlFor:"phone",className:"flex items-center gap-1",children:[s.jsx(sh,{className:"w-4 h-4"}),"Téléphone *"]}),s.jsx(qe,{id:"phone",value:S.phone,onChange:V=>w({...S,phone:V.target.value}),className:y.phone?"border-red-500":""}),y.phone&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:y.phone})]}),s.jsxs("div",{children:[s.jsxs(Ee,{htmlFor:"university",className:"flex items-center gap-1",children:[s.jsx($r,{className:"w-4 h-4"}),"Université"]}),s.jsx(qe,{id:"university",value:S.university,onChange:V=>w({...S,university:V.target.value})})]})]}),s.jsxs("div",{children:[s.jsxs(Ee,{htmlFor:"address",className:"flex items-center gap-1",children:[s.jsx($r,{className:"w-4 h-4"}),"Adresse *"]}),s.jsx(qe,{id:"address",value:S.address,onChange:V=>w({...S,address:V.target.value}),className:y.address?"border-red-500":""}),y.address&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:y.address})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsxs(Ee,{htmlFor:"city",className:"flex items-center gap-1",children:[s.jsx($r,{className:"w-4 h-4"}),"Ville *"]}),s.jsx(qe,{id:"city",value:S.city,onChange:V=>w({...S,city:V.target.value}),className:y.city?"border-red-500":""}),y.city&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:y.city})]}),s.jsxs("div",{children:[s.jsxs(Ee,{htmlFor:"postalCode",className:"flex items-center gap-1",children:[s.jsx($r,{className:"w-4 h-4"}),"Code postal *"]}),s.jsx(qe,{id:"postalCode",value:S.postalCode,onChange:V=>w({...S,postalCode:V.target.value}),className:y.postalCode?"border-red-500":""}),y.postalCode&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:y.postalCode})]}),s.jsxs("div",{children:[s.jsxs(Ee,{htmlFor:"country",className:"flex items-center gap-1",children:[s.jsx($r,{className:"w-4 h-4"}),"Pays *"]}),s.jsx(qe,{id:"country",value:S.country,onChange:V=>w({...S,country:V.target.value}),disabled:!0})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 mt-4",children:[s.jsx(zx,{id:"saveInfo",checked:S.saveInfo,onCheckedChange:V=>w({...S,saveInfo:V})}),s.jsx(Ee,{htmlFor:"saveInfo",children:"Sauvegarder ces informations pour mes prochaines commandes"})]}),s.jsx("div",{className:"pt-4 flex justify-end",children:s.jsxs(Y,{type:"submit",className:"w-full md:w-auto",children:["Continuer vers le paiement",s.jsx(Gi,{className:"ml-2 h-4 w-4"})]})})]})})]}),u==="payment"&&s.jsxs(le,{children:[s.jsxs(We,{children:[s.jsxs(He,{className:"flex items-center gap-2",children:[s.jsx(zn,{className:"w-5 h-5"}),"Méthode de paiement"]}),s.jsx(Pt,{children:"Choisissez votre mode de paiement préféré"})]}),s.jsx(ue,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsx(zL,{amount:a,currency:"EUR",onMethodSelect:D,selectedMethod:v}),s.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[s.jsxs(Y,{variant:"outline",onClick:()=>h("shipping"),children:[s.jsx(mc,{className:"mr-2 h-4 w-4"}),"Retour"]}),s.jsxs(Y,{onClick:F,disabled:!v||v==="card"&&!b.stripePaymentId,children:["Vérifier la commande",s.jsx(Gi,{className:"ml-2 h-4 w-4"})]})]})]})})]}),u==="review"&&s.jsxs(le,{children:[s.jsxs(We,{children:[s.jsxs(He,{className:"flex items-center gap-2",children:[s.jsx(Tt,{className:"w-5 h-5"}),"Vérification de la commande"]}),s.jsx(Pt,{children:"Vérifiez les détails de votre commande avant de confirmer"})]}),s.jsx(ue,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"font-semibold",children:"Informations de livraison"}),s.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>h("shipping"),children:"Modifier"})]}),s.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[s.jsx("p",{className:"font-medium",children:S.fullName}),s.jsx("p",{children:S.address}),s.jsxs("p",{children:[S.postalCode," ",S.city,", ",S.country]}),s.jsx("p",{children:S.email}),s.jsx("p",{children:S.phone})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"font-semibold",children:"Méthode de paiement"}),s.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>h("payment"),children:"Modifier"})]}),s.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[s.jsxs("p",{className:"font-medium",children:[v==="card"&&"Carte bancaire",v==="paypal"&&"PayPal",v==="transfer"&&"Virement bancaire",v==="cash"&&"Paiement à la livraison",v==="lydia"&&"Lydia"]}),v==="card"&&b.stripePaymentId&&s.jsxs("p",{className:"text-green-600 text-sm",children:[s.jsx(Tt,{className:"w-3 h-3 inline mr-1"}),"Paiement autorisé"]}),v==="paypal"&&b.paypalEmail&&s.jsx("p",{children:b.paypalEmail}),v==="lydia"&&b.lydiaPhone&&s.jsx("p",{children:b.lydiaPhone})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold mb-2",children:["Articles (",i.length,")"]}),s.jsx("div",{className:"space-y-3",children:i.map(V=>s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg",children:[V.image&&s.jsx("img",{src:V.image,alt:V.name,className:"w-16 h-16 object-cover rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:V.name}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantité: ",V.quantity]})]}),s.jsx("p",{className:"font-semibold",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(V.price*V.quantity)})]},V.id))})]}),s.jsx("div",{className:"pt-4 border-t",children:s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx(zx,{id:"terms",checked:R,onCheckedChange:V=>M(V)}),s.jsxs("div",{children:[s.jsx(Ee,{htmlFor:"terms",className:"font-medium",children:"J'accepte les conditions générales de vente"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"En passant commande, vous acceptez nos conditions générales de vente et notre politique de confidentialité."})]})]})}),s.jsxs("div",{className:"flex justify-between pt-4",children:[s.jsxs(Y,{variant:"outline",onClick:()=>h("payment"),children:[s.jsx(mc,{className:"mr-2 h-4 w-4"}),"Retour"]}),s.jsx(Y,{onClick:I,disabled:f||!R,className:"bg-gradient-to-r from-primary to-secondary",children:f?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Traitement..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Dc,{className:"mr-2 h-4 w-4"}),"Confirmer la commande"]})})]})]})})]})]}),s.jsxs("div",{children:[s.jsx(z5,{cart:i,total:a,showCheckoutButton:!1}),s.jsxs(Ut,{className:"mt-4 border-blue-200 bg-blue-50",children:[s.jsx(Ft,{className:"h-4 w-4 text-blue-600"}),s.jsxs($t,{className:"text-blue-800",children:[s.jsx("strong",{children:"Paiement sécurisé :"})," Toutes vos informations sont cryptées et sécurisées."]})]}),s.jsx(le,{className:"mt-4",children:s.jsx(ue,{className:"pt-6",children:s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(xl,{className:"w-5 h-5 text-muted-foreground mt-0.5"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium",children:"Besoin d'aide ?"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Notre équipe est disponible 7j/7 pour vous aider avec votre commande."}),s.jsx(Y,{variant:"link",className:"p-0 h-auto text-sm",children:"Contacter le support"})]})]})})})})]})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:s.jsx(le,{children:s.jsxs(ue,{className:"pt-6",children:[s.jsx(yl,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour finaliser votre achat"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous devez être connecté pour accéder au processus de paiement"}),s.jsx(Y,{onClick:()=>n("/auth"),children:"Se connecter"})]})})})},Ble=()=>{const{currentUser:t}=Tn(),{orders:e,fetchUserOrders:n,loading:r}=SS(),i=ar(),[a,o]=x.useState(""),[c,u]=x.useState("all"),[h,f]=x.useState("date-desc"),[p,v]=x.useState("all");x.useEffect(()=>{t&&n(t.uid)},[t,n]);const _=()=>e.filter(w=>{const y=!a||w.id.toLowerCase().includes(a.toLowerCase()),C=c==="all"||w.status===c;let R=!0;if(p!=="all"){const M=new Date(w.createdAt),B=new Date;if(p==="last-30-days"){const O=new Date;O.setDate(B.getDate()-30),R=M>=O}else if(p==="last-6-months"){const O=new Date;O.setMonth(B.getMonth()-6),R=M>=O}}return y&&C&&R}).sort((w,y)=>h==="date-desc"?new Date(y.createdAt).getTime()-new Date(w.createdAt).getTime():h==="date-asc"?new Date(w.createdAt).getTime()-new Date(y.createdAt).getTime():h==="total-desc"?y.total-w.total:h==="total-asc"?w.total-y.total:0),b=w=>{switch(w){case"pending":return s.jsxs(tt,{className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:[s.jsx($n,{className:"w-3 h-3 mr-1"}),"En attente"]});case"processing":return s.jsxs(tt,{className:"bg-blue-100 text-blue-800 border-blue-200",children:[s.jsx(gn,{className:"w-3 h-3 mr-1"}),"En traitement"]});case"shipped":return s.jsxs(tt,{className:"bg-purple-100 text-purple-800 border-purple-200",children:[s.jsx(Oy,{className:"w-3 h-3 mr-1"}),"Expédiée"]});case"delivered":return s.jsxs(tt,{className:"bg-green-100 text-green-800 border-green-200",children:[s.jsx(Tt,{className:"w-3 h-3 mr-1"}),"Livrée"]});case"cancelled":return s.jsxs(tt,{className:"bg-red-100 text-red-800 border-red-200",children:[s.jsx(Rd,{className:"w-3 h-3 mr-1"}),"Annulée"]});default:return s.jsx(tt,{children:w})}},N=w=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(w),S=()=>{const w={user:(t==null?void 0:t.displayName)||(t==null?void 0:t.email),date:new Date().toISOString(),orders:e.map(M=>({id:M.id,date:M.createdAt,status:M.status,total:M.total,items:M.items.length}))},y=new Blob([JSON.stringify(w,null,2)],{type:"application/json"}),C=URL.createObjectURL(y),R=document.createElement("a");R.href=C,R.download=`commandes-${new Date().toISOString().slice(0,10)}.json`,R.click(),URL.revokeObjectURL(C)};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(gn,{className:"w-8 h-8"}),"Mes Commandes"]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Suivez et gérez toutes vos commandes"})]}),s.jsxs(Y,{variant:"outline",onClick:S,className:"flex items-center gap-2",children:[s.jsx(Ks,{className:"w-4 h-4"}),"Exporter"]})]}),s.jsx(le,{children:s.jsx(ue,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(gr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(qe,{placeholder:"Rechercher par numéro de commande...",value:a,onChange:w=>o(w.target.value),className:"pl-10"})]}),s.jsxs(Jt,{value:c,onValueChange:u,children:[s.jsx(qt,{className:"w-40",children:s.jsx(en,{placeholder:"Statut"})}),s.jsxs(Ht,{children:[s.jsx($e,{value:"all",children:"Tous les statuts"}),s.jsx($e,{value:"pending",children:"En attente"}),s.jsx($e,{value:"processing",children:"En traitement"}),s.jsx($e,{value:"shipped",children:"Expédiée"}),s.jsx($e,{value:"delivered",children:"Livrée"}),s.jsx($e,{value:"cancelled",children:"Annulée"})]})]}),s.jsxs(Jt,{value:p,onValueChange:v,children:[s.jsx(qt,{className:"w-40",children:s.jsx(en,{placeholder:"Période"})}),s.jsxs(Ht,{children:[s.jsx($e,{value:"all",children:"Toutes les périodes"}),s.jsx($e,{value:"last-30-days",children:"30 derniers jours"}),s.jsx($e,{value:"last-6-months",children:"6 derniers mois"})]})]}),s.jsxs(Jt,{value:h,onValueChange:f,children:[s.jsx(qt,{className:"w-40",children:s.jsx(en,{placeholder:"Trier par"})}),s.jsxs(Ht,{children:[s.jsx($e,{value:"date-desc",children:"Date (récent → ancien)"}),s.jsx($e,{value:"date-asc",children:"Date (ancien → récent)"}),s.jsx($e,{value:"total-desc",children:"Prix (élevé → bas)"}),s.jsx($e,{value:"total-asc",children:"Prix (bas → élevé)"})]})]})]})})}),s.jsxs(eu,{defaultValue:"all",className:"space-y-4",children:[s.jsxs(Fl,{className:"grid w-full grid-cols-4",children:[s.jsx(un,{value:"all",children:"Toutes"}),s.jsx(un,{value:"active",children:"En cours"}),s.jsx(un,{value:"completed",children:"Terminées"}),s.jsx(un,{value:"cancelled",children:"Annulées"})]}),s.jsx(dn,{value:"all",className:"space-y-4",children:r?s.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((w,y)=>s.jsx(le,{className:"animate-pulse",children:s.jsxs(ue,{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between mb-4",children:[s.jsx("div",{className:"h-6 bg-muted rounded w-1/4"}),s.jsx("div",{className:"h-6 bg-muted rounded w-1/6"})]}),s.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"})]})},y))}):_().length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(gn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande trouvée"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:e.length===0?"Vous n'avez pas encore passé de commande.":"Aucune commande ne correspond à vos critères de recherche."}),s.jsx(Y,{asChild:!0,children:s.jsxs(De,{to:"/listings",children:[s.jsx(vc,{className:"w-4 h-4 mr-2"}),"Parcourir les produits"]})})]}):s.jsx("div",{className:"space-y-4",children:_().map(w=>s.jsx(le,{className:"hover:shadow-md transition-shadow",children:s.jsxs(ue,{className:"p-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs("h3",{className:"font-semibold",children:["Commande #",w.id.slice(0,8)]}),b(w.status)]}),s.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[s.jsx(mi,{className:"w-3 h-3"}),sr(new Date(w.createdAt),"dd MMMM yyyy",{locale:Tr})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold",children:N(w.total)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[w.items.length," article",w.items.length>1?"s":""]})]}),s.jsx(Y,{asChild:!0,children:s.jsxs(De,{to:`/order/${w.id}`,children:["Détails",s.jsx(Gi,{className:"ml-1 w-4 h-4"})]})})]})]}),s.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[w.items.slice(0,4).map((y,C)=>s.jsx("div",{className:"flex-shrink-0",children:y.image?s.jsx("img",{src:y.image,alt:y.name,className:"w-16 h-16 object-cover rounded"}):s.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsx(gn,{className:"w-6 h-6 text-muted-foreground"})})},C)),w.items.length>4&&s.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsxs("span",{className:"text-sm font-medium",children:["+",w.items.length-4]})})]})]})},w.id))})}),s.jsx(dn,{value:"active",className:"space-y-4",children:_().filter(w=>["pending","processing","shipped"].includes(w.status)).length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx($n,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande en cours"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas de commandes en cours de traitement."})]}):s.jsx("div",{className:"space-y-4",children:_().filter(w=>["pending","processing","shipped"].includes(w.status)).map(w=>s.jsx(le,{className:"hover:shadow-md transition-shadow",children:s.jsxs(ue,{className:"p-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs("h3",{className:"font-semibold",children:["Commande #",w.id.slice(0,8)]}),b(w.status)]}),s.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[s.jsx(mi,{className:"w-3 h-3"}),sr(new Date(w.createdAt),"dd MMMM yyyy",{locale:Tr})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold",children:N(w.total)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[w.items.length," article",w.items.length>1?"s":""]})]}),s.jsx(Y,{asChild:!0,children:s.jsxs(De,{to:`/order/${w.id}`,children:["Détails",s.jsx(Gi,{className:"ml-1 w-4 h-4"})]})})]})]}),s.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[w.items.slice(0,4).map((y,C)=>s.jsx("div",{className:"flex-shrink-0",children:y.image?s.jsx("img",{src:y.image,alt:y.name,className:"w-16 h-16 object-cover rounded"}):s.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsx(gn,{className:"w-6 h-6 text-muted-foreground"})})},C)),w.items.length>4&&s.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsxs("span",{className:"text-sm font-medium",children:["+",w.items.length-4]})})]})]})},w.id))})}),s.jsx(dn,{value:"completed",className:"space-y-4",children:_().filter(w=>w.status==="delivered").length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Tt,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande terminée"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas encore de commandes livrées."})]}):s.jsx("div",{className:"space-y-4",children:_().filter(w=>w.status==="delivered").map(w=>s.jsx(le,{className:"hover:shadow-md transition-shadow",children:s.jsxs(ue,{className:"p-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs("h3",{className:"font-semibold",children:["Commande #",w.id.slice(0,8)]}),b(w.status)]}),s.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[s.jsx(mi,{className:"w-3 h-3"}),sr(new Date(w.createdAt),"dd MMMM yyyy",{locale:Tr})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold",children:N(w.total)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[w.items.length," article",w.items.length>1?"s":""]})]}),s.jsx(Y,{asChild:!0,children:s.jsxs(De,{to:`/order/${w.id}`,children:["Détails",s.jsx(Gi,{className:"ml-1 w-4 h-4"})]})})]})]}),s.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[w.items.slice(0,4).map((y,C)=>s.jsx("div",{className:"flex-shrink-0",children:y.image?s.jsx("img",{src:y.image,alt:y.name,className:"w-16 h-16 object-cover rounded"}):s.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsx(gn,{className:"w-6 h-6 text-muted-foreground"})})},C)),w.items.length>4&&s.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsxs("span",{className:"text-sm font-medium",children:["+",w.items.length-4]})})]})]})},w.id))})}),s.jsx(dn,{value:"cancelled",className:"space-y-4",children:_().filter(w=>w.status==="cancelled").length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Rd,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande annulée"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas de commandes annulées."})]}):s.jsx("div",{className:"space-y-4",children:_().filter(w=>w.status==="cancelled").map(w=>s.jsx(le,{className:"hover:shadow-md transition-shadow",children:s.jsxs(ue,{className:"p-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs("h3",{className:"font-semibold",children:["Commande #",w.id.slice(0,8)]}),b(w.status)]}),s.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[s.jsx(mi,{className:"w-3 h-3"}),sr(new Date(w.createdAt),"dd MMMM yyyy",{locale:Tr})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold",children:N(w.total)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[w.items.length," article",w.items.length>1?"s":""]})]}),s.jsx(Y,{asChild:!0,children:s.jsxs(De,{to:`/order/${w.id}`,children:["Détails",s.jsx(Gi,{className:"ml-1 w-4 h-4"})]})})]})]}),s.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[w.items.slice(0,4).map((y,C)=>s.jsx("div",{className:"flex-shrink-0",children:y.image?s.jsx("img",{src:y.image,alt:y.name,className:"w-16 h-16 object-cover rounded"}):s.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsx(gn,{className:"w-6 h-6 text-muted-foreground"})})},C)),w.items.length>4&&s.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsxs("span",{className:"text-sm font-medium",children:["+",w.items.length-4]})})]})]})},w.id))})})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:s.jsx(le,{children:s.jsxs(ue,{className:"pt-6",children:[s.jsx(gn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir vos commandes"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous devez être connecté pour accéder à l'historique de vos commandes"}),s.jsx(Y,{onClick:()=>i("/auth"),children:"Se connecter"})]})})})},Wle=()=>{var f,p;const{orderId:t}=qb(),{getOrderById:e}=SS(),[n,r]=x.useState(null),[i,a]=x.useState(!0);x.useEffect(()=>{(async()=>{if(t)try{a(!0);const _=await e(t);r(_)}catch(_){console.error("Error loading order:",_)}finally{a(!1)}})()},[t,e]);const o=v=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(v),c=v=>({card:"Carte bancaire",paypal:"PayPal",transfer:"Virement bancaire",cash:"Paiement à la livraison"})[v]||v,u=()=>{const v=new Date,_=new Date(v);return _.setDate(v.getDate()+3),sr(_,"EEEE d MMMM",{locale:Tr})},h=()=>{navigator.clipboard.writeText(t||""),me.success("Numéro de commande copié !")};return i?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx("div",{className:"max-w-3xl mx-auto",children:s.jsxs("div",{className:"animate-pulse space-y-4",children:[s.jsx("div",{className:"h-8 bg-muted rounded w-3/4 mx-auto"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2 mx-auto"}),s.jsx("div",{className:"h-32 bg-muted rounded"}),s.jsx("div",{className:"h-64 bg-muted rounded"})]})})}):n?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"max-w-3xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Tt,{className:"w-8 h-8 text-green-600"})}),s.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Commande confirmée !"}),s.jsxs("p",{className:"text-muted-foreground",children:["Merci pour votre commande. Vous recevrez un email de confirmation à ",n.shipping.email,"."]})]}),s.jsxs(le,{className:"mb-6",children:[s.jsx(We,{children:s.jsxs(He,{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(gn,{className:"w-5 h-5"}),"Détails de la commande"]}),s.jsx(tt,{className:"bg-green-100 text-green-800 border-green-200",children:n.status==="pending"?"En attente":n.status==="processing"?"En traitement":n.status==="shipped"?"Expédiée":n.status==="delivered"?"Livrée":"Confirmée"})]})}),s.jsx(ue,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Numéro de commande"}),s.jsxs("p",{className:"font-medium flex items-center gap-2",children:[t,s.jsx(Y,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:h,children:s.jsx(E4,{className:"h-3 w-3"})})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Date"}),s.jsx("p",{className:"font-medium",children:sr(new Date(n.createdAt),"dd/MM/yyyy")})]})]}),s.jsx(Ws,{}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Articles"}),s.jsx("div",{className:"space-y-3",children:n.items.map((v,_)=>s.jsxs("div",{className:"flex items-center gap-3",children:[v.image&&s.jsx("img",{src:v.image,alt:v.name,className:"w-16 h-16 object-cover rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:v.name}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantité: ",v.quantity]})]}),s.jsx("p",{className:"font-semibold",children:o(v.price*v.quantity)})]},_))})]}),s.jsx(Ws,{}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Sous-total"}),s.jsx("span",{children:o(n.total)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Livraison"}),s.jsx("span",{className:"text-green-600",children:"Gratuite"})]}),s.jsxs("div",{className:"flex justify-between font-bold",children:[s.jsx("span",{children:"Total"}),s.jsx("span",{children:o(n.total)})]})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[s.jsxs(le,{children:[s.jsx(We,{children:s.jsxs(He,{className:"flex items-center gap-2 text-base",children:[s.jsx(Oy,{className:"w-4 h-4"}),"Livraison"]})}),s.jsx(ue,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"font-medium",children:n.shipping.fullName}),s.jsx("p",{children:n.shipping.address}),s.jsxs("p",{children:[n.shipping.postalCode," ",n.shipping.city,", ",n.shipping.country]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:n.shipping.phone}),s.jsx("div",{className:"pt-2 mt-2 border-t",children:s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(mi,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("span",{children:["Livraison estimée: ",u()]})]})})]})})]}),s.jsxs(le,{children:[s.jsx(We,{children:s.jsxs(He,{className:"flex items-center gap-2 text-base",children:[s.jsx(zn,{className:"w-4 h-4"}),"Paiement"]})}),s.jsx(ue,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"font-medium",children:c(n.payment.method)}),n.payment.method==="card"&&((f=n.payment.details)==null?void 0:f.cardNumber)&&s.jsxs("p",{children:["Carte se terminant par ",n.payment.details.cardNumber.slice(-4)]}),n.payment.method==="paypal"&&((p=n.payment.details)==null?void 0:p.paypalEmail)&&s.jsx("p",{children:n.payment.details.paypalEmail}),n.payment.method==="transfer"&&s.jsxs(Ut,{className:"mt-2",children:[s.jsx(Rn,{className:"h-4 w-4"}),s.jsx($t,{children:"Veuillez effectuer le virement dans les 48h pour valider votre commande."})]}),s.jsx("div",{className:"pt-2 mt-2 border-t",children:s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx($n,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("span",{children:["Statut: ",n.status==="pending"?"En attente":"Confirmé"]})]})})]})})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsx(Y,{variant:"outline",className:"flex-1",asChild:!0,children:s.jsxs(De,{to:"/orders",children:[s.jsx(gn,{className:"mr-2 h-4 w-4"}),"Mes commandes"]})}),s.jsxs(Y,{variant:"outline",className:"flex-1",children:[s.jsx(Ks,{className:"mr-2 h-4 w-4"}),"Télécharger la facture"]}),s.jsx(Y,{className:"flex-1 bg-gradient-to-r from-primary to-secondary",asChild:!0,children:s.jsxs(De,{to:"/listings",children:[s.jsx(vc,{className:"mr-2 h-4 w-4"}),"Continuer mes achats"]})})]}),s.jsxs("div",{className:"mt-8 text-center",children:[s.jsx("p",{className:"text-muted-foreground mb-2",children:"Besoin d'aide avec votre commande ?"}),s.jsxs("div",{className:"flex justify-center gap-4",children:[s.jsxs(Y,{variant:"link",className:"text-primary",children:[s.jsx(us,{className:"mr-2 h-4 w-4"}),"Contacter le support"]}),s.jsxs(Y,{variant:"link",className:"text-primary",children:[s.jsx(xm,{className:"mr-2 h-4 w-4"}),"FAQ"]})]})]})]})}):s.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:s.jsx(le,{children:s.jsxs(ue,{className:"pt-6",children:[s.jsx(Rn,{className:"w-12 h-12 text-orange-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Commande introuvable"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Nous n'avons pas pu trouver les détails de cette commande."}),s.jsx(Y,{asChild:!0,children:s.jsx(De,{to:"/orders",children:"Voir mes commandes"})})]})})})},qle=({id:t,name:e,description:n,price:r,currency:i,image:a,mode:o})=>{const{currentUser:c}=Tn(),{addToCart:u}=dh(),h=ar(),f=(_,b)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:b}).format(_),p=()=>{if(!c){me.error("Veuillez vous connecter pour ajouter au panier"),h("/auth");return}u({id:t,name:e,price:r,image:a,seller:"StudyMarket",sellerId:"system",listingId:t})},v=()=>{if(!c){me.error("Veuillez vous connecter pour acheter"),h("/auth");return}u({id:t,name:e,price:r,image:a,seller:"StudyMarket",sellerId:"system",listingId:t}),h("/checkout")};return s.jsxs(le,{className:"overflow-hidden transition-all hover:shadow-lg",children:[s.jsxs("div",{className:"aspect-video relative overflow-hidden",children:[a?s.jsx("img",{src:a,alt:e,className:"w-full h-full object-cover transition-transform hover:scale-105"}):s.jsx("div",{className:"w-full h-full bg-muted flex items-center justify-center",children:s.jsx(sG,{className:"w-12 h-12 text-muted-foreground"})}),s.jsx(tt,{className:"absolute top-2 right-2 bg-primary",children:o==="subscription"?"Abonnement":"Achat unique"})]}),s.jsxs(We,{children:[s.jsx(He,{children:e}),s.jsx(Pt,{children:n})]}),s.jsx(ue,{children:s.jsxs("div",{className:"text-2xl font-bold text-primary",children:[f(r,i),o==="subscription"&&s.jsx("span",{className:"text-sm text-muted-foreground ml-1",children:"/mois"})]})}),s.jsxs(RD,{className:"flex gap-2",children:[s.jsxs(Y,{variant:"outline",className:"flex-1",onClick:p,children:[s.jsx(yl,{className:"w-4 h-4 mr-2"}),"Ajouter"]}),s.jsx(Y,{className:"flex-1 bg-gradient-to-r from-primary to-secondary",onClick:v,children:"Acheter"})]})]})},q1=[{id:"prod_ST3q24zsLbS28p",name:"Bicyclette",description:"Vélo",priceId:"price_1RY7iN2XLhzYQhT9ErigqaGg",price:10,currency:"EUR",mode:"payment",image:"https://images.pexels.com/photos/100582/pexels-photo-100582.jpeg?auto=compress&cs=tinysrgb&w=800"}],Hle=t=>q1.find(e=>e.priceId===t),U5="pk_test_51O5JqHLVDYKrxBIwIyiUQOmNk9HFZJKvBz6zJyRNBNjkKSGVEvZKEwlKnwL2JV8PmXVjWSHoZ9XQfKOiLkXGZ9Nh00wPxKdm9p";kL(U5);const Gle={isConfigured:!0,key:`${U5.substring(0,8)}...`};async function Zle(){return{customer_id:"cus_mock123",subscription_id:"sub_mock123",subscription_status:"active",price_id:"price_1RY7iN2XLhzYQhT9ErigqaGg",current_period_start:Math.floor(Date.now()/1e3)-86400*15,current_period_end:Math.floor(Date.now()/1e3)+86400*15,cancel_at_period_end:!1,payment_method_brand:"visa",payment_method_last4:"4242"}}async function Kle(){return[{order_id:"ord_mock123",checkout_session_id:"cs_mock123",payment_intent_id:"pi_mock123",amount_subtotal:1e3,amount_total:1e3,currency:"eur",payment_status:"paid",order_status:"completed",order_date:new Date().toISOString()}]}const Yle=()=>{const{getCartItemCount:t}=dh(),e=ar(),n=t();return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs(Y,{variant:"ghost",onClick:()=>e(-1),className:"-ml-4",children:[s.jsx(mc,{className:"w-4 h-4 mr-2"}),"Retour"]}),s.jsxs("div",{className:"flex items-center justify-between mt-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(vc,{className:"w-8 h-8"}),"Boutique"]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Découvrez nos produits et services"})]}),n>0&&s.jsxs(Y,{onClick:()=>e("/cart"),className:"flex items-center gap-2",children:[s.jsx(yl,{className:"w-4 h-4"}),"Panier (",n,")"]})]})]}),!Gle.isConfigured,s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:q1.map(r=>s.jsx(qle,{id:r.id,name:r.name,description:r.description,price:r.price,currency:r.currency,image:r.image,mode:r.mode},r.id))}),q1.length===0&&s.jsx(le,{className:"text-center py-12",children:s.jsxs(ue,{className:"pt-6",children:[s.jsx(gn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Aucun produit disponible"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Revenez bientôt pour découvrir nos nouveaux produits."})]})})]})},Qle=()=>{const[t]=Hb(),e=ar(),{currentUser:n}=Tn(),{clearCart:r}=dh(),[i,a]=x.useState(!0),[o,c]=x.useState(null),[u,h]=x.useState(null),[f,p]=x.useState(null),v=t.get("session_id"),_=t.get("type")==="subscription";x.useEffect(()=>{r();async function N(){if(n)try{if(a(!0),_){const w=await Zle();c(w)}else{const y=(await Kle())[0];h(y)}}catch(w){console.error("Error fetching checkout result:",w),p("Impossible de charger les détails de votre achat")}finally{a(!1)}}const S=setTimeout(()=>{N()},2e3);return()=>clearTimeout(S)},[n,_,v,r]);const b=()=>{if(_&&(o!=null&&o.price_id)){const N=Hle(o.price_id);return N?N.name:"Abonnement"}else if(u)return"Commande";return"Achat"};return n?i?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"max-w-md mx-auto text-center",children:[s.jsx(Ur,{className:"w-12 h-12 animate-spin text-primary mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Traitement de votre paiement..."}),s.jsx("p",{className:"text-muted-foreground",children:"Veuillez patienter pendant que nous confirmons votre transaction."})]})}):f?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"max-w-md mx-auto",children:[s.jsxs(Ut,{className:"border-red-200 bg-red-50",children:[s.jsx(Rn,{className:"h-4 w-4 text-red-600"}),s.jsx($t,{className:"text-red-800",children:f})]}),s.jsx("div",{className:"mt-4 text-center",children:s.jsx(Y,{asChild:!0,children:s.jsx(De,{to:"/",children:"Retour à l'accueil"})})})]})}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"max-w-md mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Tt,{className:"w-8 h-8 text-green-600"})}),s.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Merci pour votre achat !"}),s.jsxs("p",{className:"text-muted-foreground",children:["Votre ",_?"abonnement":"commande"," a été confirmé",_?"":"e","."]})]}),s.jsxs(le,{className:"mb-6",children:[s.jsx(We,{children:s.jsxs(He,{className:"flex items-center gap-2",children:[_?s.jsx(zn,{className:"w-5 h-5"}):s.jsx(gn,{className:"w-5 h-5"}),b()]})}),s.jsx(ue,{children:s.jsx("div",{className:"space-y-4",children:_&&o?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Statut:"}),s.jsx("span",{className:"font-medium",children:o.subscription_status==="active"?"Actif":o.subscription_status==="trialing"?"Période d'essai":o.subscription_status})]}),o.current_period_end&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Prochain renouvellement:"}),s.jsx("span",{className:"font-medium",children:new Date(o.current_period_end*1e3).toLocaleDateString("fr-FR")})]}),o.payment_method_brand&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Méthode de paiement:"}),s.jsxs("span",{className:"font-medium",children:[o.payment_method_brand.toUpperCase()," •••• ",o.payment_method_last4]})]})]}):u?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Numéro de commande:"}),s.jsx("span",{className:"font-medium",children:u.order_id})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Date:"}),s.jsx("span",{className:"font-medium",children:new Date(u.order_date).toLocaleDateString("fr-FR")})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Montant:"}),s.jsx("span",{className:"font-medium",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:u.currency}).format(u.amount_total/100)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Statut:"}),s.jsx("span",{className:"font-medium",children:u.order_status==="completed"?"Complété":u.order_status==="pending"?"En attente":u.order_status})]})]}):s.jsx("p",{children:"Merci pour votre achat. Vous recevrez un email de confirmation."})})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs(Ut,{className:"bg-blue-50 border-blue-200",children:[s.jsx(mi,{className:"h-4 w-4 text-blue-600"}),s.jsx($t,{className:"text-blue-800",children:_?"Vous pouvez gérer votre abonnement à tout moment depuis votre compte.":"Vous recevrez un email de confirmation avec les détails de votre commande."})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsx(Y,{variant:"outline",className:"flex-1",asChild:!0,children:s.jsxs(De,{to:"/orders",children:[s.jsx(gn,{className:"mr-2 h-4 w-4"}),"Mes commandes"]})}),s.jsx(Y,{className:"flex-1 bg-gradient-to-r from-primary to-secondary",asChild:!0,children:s.jsxs(De,{to:"/products",children:[s.jsx(vc,{className:"mr-2 h-4 w-4"}),"Continuer mes achats",s.jsx(xm,{className:"ml-2 h-4 w-4"})]})})]})]})]})}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"max-w-md mx-auto",children:[s.jsxs(Ut,{className:"border-orange-200 bg-orange-50",children:[s.jsx(Rn,{className:"h-4 w-4 text-orange-600"}),s.jsx($t,{className:"text-orange-800",children:"Vous devez être connecté pour voir les détails de votre achat."})]}),s.jsx("div",{className:"mt-4 text-center",children:s.jsx(Y,{onClick:()=>e("/auth"),children:"Se connecter"})})]})})};delete ph.Icon.Default.prototype._getIconUrl;ph.Icon.Default.mergeOptions({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"});function Xle({position:t,onChange:e}){function n(){return KN({click(r){e([r.latlng.lat,r.latlng.lng])}}),t?s.jsx(QN,{position:t}):null}return s.jsxs(YN,{center:t||[48.8584,2.2945],zoom:15,style:{height:300,width:"100%"},children:[s.jsx(XN,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"© OpenStreetMap contributors"}),s.jsx(n,{})]})}const Jle=[{value:"electronics",label:"Électronique"},{value:"books",label:"Livres & Cours"},{value:"furniture",label:"Mobilier"},{value:"clothing",label:"Vêtements"},{value:"services",label:"Services"},{value:"housing",label:"Logement"},{value:"jobs",label:"Jobs & Stages"},{value:"donations",label:"Dons"},{value:"exchange",label:"Troc"}],ece=()=>{const{id:t}=qb(),e=ar(),{currentUser:n}=Tn(),{fetchListingById:r,updateListing:i,currentListing:a,loading:o}=wp(),[c,u]=x.useState({title:"",description:"",price:"",images:[]}),[h,f]=x.useState([]),[p,v]=x.useState(!1),[_,b]=x.useState(null),[N,S]=x.useState(""),[w,y]=x.useState([]),[C,R]=x.useState(""),[M,B]=x.useState(""),[O,D]=x.useState(null),[F,I]=x.useState(!1);x.useEffect(()=>{t&&r(t)},[t,r]),x.useEffect(()=>{var U;a&&(u({title:a.title||"",description:a.description||"",price:((U=a.price)==null?void 0:U.toString())||"",images:a.images||[]}),S(a.category||""),y(a.tags||[]),B(a.meetingLocation||""),a.coordinates&&D(a.coordinates))},[a]);const V=U=>{u({...c,[U.target.name]:U.target.value})},k=U=>{if(!U.target.files)return;const W=Array.from(U.target.files);f(H=>[...H,...W])},P=U=>{u({...c,images:c.images.filter((W,H)=>H!==U)})},q=U=>{f(h.filter((W,H)=>H!==U))},te=()=>{C.trim()&&!w.includes(C.trim())&&w.length<5&&(y([...w,C.trim()]),R(""))},re=U=>{y(w.filter(W=>W!==U))},K=async U=>{if(U.preventDefault(),!(!t||!n)){v(!0);try{let W=[];h.length>0&&(W=await Promise.all(h.map(Q=>tce(Q,n.uid))));const H=[...c.images,...W];await i(t,{...c,price:parseFloat(c.price),images:H,category:N,tags:w,meetingLocation:M,coordinates:O}),e(`/listing/${t}`)}catch{b("Erreur lors de la mise à jour de l'annonce")}finally{v(!1)}}};return o?s.jsx("div",{children:"Chargement..."}):a?_?s.jsx("div",{className:"text-red-500",children:_}):s.jsx("form",{onSubmit:K,className:"max-w-lg mx-auto mt-10",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 border border-gray-100",children:[s.jsx("h2",{className:"text-2xl font-bold mb-8 text-center",children:"Modifier mon annonce"}),s.jsxs("div",{className:"mb-5",children:[s.jsx(Ee,{htmlFor:"title",className:"block mb-1 text-gray-700",children:"Titre"}),s.jsx(qe,{id:"title",name:"title",value:c.title,onChange:V,placeholder:"Titre",className:"w-full"})]}),s.jsxs("div",{className:"mb-5",children:[s.jsx(Ee,{htmlFor:"description",className:"block mb-1 text-gray-700",children:"Description"}),s.jsx(Es,{id:"description",name:"description",value:c.description,onChange:V,placeholder:"Description",className:"w-full",rows:4})]}),s.jsxs("div",{className:"mb-5",children:[s.jsx(Ee,{htmlFor:"price",className:"block mb-1 text-gray-700",children:"Prix (€)"}),s.jsx(qe,{id:"price",name:"price",value:c.price,onChange:V,placeholder:"Prix",type:"number",min:0,className:"w-full"})]}),s.jsxs("div",{className:"mb-5",children:[s.jsx(Ee,{htmlFor:"category",className:"block mb-1 text-gray-700",children:"Catégorie"}),s.jsxs("select",{id:"category",name:"category",value:N,onChange:U=>S(U.target.value),className:"w-full border rounded px-3 py-2 bg-gray-50",required:!0,children:[s.jsx("option",{value:"",children:"Sélectionnez une catégorie"}),Jle.map(U=>s.jsx("option",{value:U.value,children:U.label},U.value))]})]}),s.jsxs("div",{className:"mb-5",children:[s.jsx(Ee,{htmlFor:"meetingLocation",className:"block mb-1 text-gray-700",children:"Point de rencontre"}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx(qe,{id:"meetingLocation",name:"meetingLocation",value:M,onChange:U=>B(U.target.value),placeholder:"Ex: Bibliothèque universitaire, Hall principal...",className:"flex-1"}),s.jsx(Y,{type:"button",variant:"outline",onClick:async()=>{if(!navigator.geolocation)return alert("Géolocalisation non supportée");I(!0),navigator.geolocation.getCurrentPosition(async U=>{const{latitude:W,longitude:H}=U.coords;D([W,H]);const Q=await ck(W,H);B(Q),I(!1)},()=>I(!1))},disabled:F,children:"📍"})]}),s.jsx("div",{className:"mt-3",children:s.jsx(Xle,{position:O,onChange:async U=>{D(U);const W=await ck(U[0],U[1]);B(W)}})})]}),s.jsxs("div",{className:"mb-5",children:[s.jsx(Ee,{className:"block mb-1 text-gray-700",children:"Tags (max 5)"}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:w.map(U=>s.jsxs("span",{className:"bg-gray-100 rounded px-2 py-1 flex items-center gap-1 text-sm",children:[U,s.jsx(Y,{type:"button",size:"icon",variant:"ghost",className:"w-4 h-4 p-0",onClick:()=>re(U),children:"×"})]},U))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(qe,{placeholder:"Ajouter un tag...",value:C,onChange:U=>R(U.target.value),onKeyDown:U=>U.key==="Enter"&&(U.preventDefault(),te()),className:"flex-1"}),s.jsx(Y,{type:"button",onClick:te,disabled:!C.trim()||w.length>=5,children:"Ajouter"})]})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx(Ee,{className:"block mb-1 text-gray-700",children:"Photos"}),s.jsxs("div",{className:"flex flex-wrap gap-4 mt-2",children:[c.images.map((U,W)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:U,alt:`photo-${W}`,className:"w-20 h-20 object-cover rounded-lg border border-gray-200"}),s.jsx(Y,{type:"button",size:"icon",variant:"destructive",className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition",onClick:()=>P(W),children:"×"})]},W)),h.map((U,W)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:URL.createObjectURL(U),alt:`new-photo-${W}`,className:"w-20 h-20 object-cover rounded-lg border border-gray-200"}),s.jsx(Y,{type:"button",size:"icon",variant:"destructive",className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition",onClick:()=>q(W),children:"×"})]},W)),s.jsxs("label",{className:"w-20 h-20 flex items-center justify-center border-2 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100 transition",children:[s.jsx("span",{className:"text-2xl text-gray-400",children:"+"}),s.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:k,disabled:p})]})]})]}),s.jsx(Y,{type:"submit",className:"w-full",disabled:p,children:p?"Enregistrement...":"Enregistrer les modifications"}),_&&s.jsx("div",{className:"text-red-500 text-center mt-2",children:_})]})}):s.jsx("div",{className:"text-red-500",children:"Annonce introuvable"})};async function tce(t,e){const n=Date.now(),r=`listings/${e}/${n}_${t.name}`,i=nN(sN,r),a=await eN(i,t);return await tN(a.ref)}async function ck(t,e){return(await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${t}&lon=${e}`)).json()).display_name}function nce({children:t}){const[e,n]=Me.useState(null);return Me.useEffect(()=>{const r=i=>{n(i.error||new Error(i.message))};return window.addEventListener("error",r),()=>window.removeEventListener("error",r)},[]),e?s.jsxs("div",{style:{color:"red",padding:"2rem",textAlign:"center"},children:["Une erreur est survenue : ",e.message]}):s.jsx(s.Fragment,{children:t})}function rce(){return s.jsx(G8,{attribute:"class",defaultTheme:"light",enableSystem:!0,children:s.jsx(XH,{children:s.jsxs(z8,{children:[s.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[s.jsx(aJ,{}),s.jsx("main",{className:"flex-1 pt-16",children:s.jsx(nce,{children:s.jsxs(A8,{children:[s.jsx(_n,{path:"/",element:s.jsx(jte,{})}),s.jsx(_n,{path:"/listings",element:s.jsx(ane,{})}),s.jsx(_n,{path:"/listing/:id",element:s.jsx(oie,{})}),s.jsx(_n,{path:"/auth",element:s.jsx(zle,{})}),s.jsx(_n,{path:"/help",element:s.jsx(ale,{})}),s.jsx(_n,{path:"/safety",element:s.jsx(ule,{})}),s.jsx(_n,{path:"/cart",element:s.jsx(Ule,{})}),s.jsx(_n,{path:"/products",element:s.jsx(Yle,{})}),s.jsx(_n,{path:"/checkout/success",element:s.jsx(Qle,{})}),s.jsx(_n,{path:"/checkout",element:s.jsx(oi,{children:s.jsx($le,{})})}),s.jsx(_n,{path:"/orders",element:s.jsx(oi,{children:s.jsx(Ble,{})})}),s.jsx(_n,{path:"/order-confirmation/:orderId",element:s.jsx(oi,{children:s.jsx(Wle,{})})}),s.jsx(_n,{path:"/create",element:s.jsx(oi,{children:s.jsx(aoe,{})})}),s.jsx(_n,{path:"/profile",element:s.jsx(oi,{children:s.jsx(uoe,{})})}),s.jsx(_n,{path:"/settings",element:s.jsx(oi,{children:s.jsx(woe,{})})}),s.jsx(_n,{path:"/impact",element:s.jsx(oi,{children:s.jsx(Aoe,{})})}),s.jsx(_n,{path:"/saved-searches",element:s.jsx(oi,{children:s.jsx(Moe,{})})}),s.jsx(_n,{path:"/favorites",element:s.jsx(oi,{children:s.jsx(Loe,{})})}),s.jsx(_n,{path:"/payments",element:s.jsx(oi,{children:s.jsx(Voe,{})})}),s.jsx(_n,{path:"/messages",element:s.jsx(oi,{children:s.jsx(Sle,{})})}),s.jsx(_n,{path:"/edit-listing/:id",element:s.jsx(ece,{})}),s.jsx(_n,{path:"*",element:s.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:"Page non trouvée (404)"})})]})})}),s.jsx(lJ,{})]}),s.jsx(U9,{position:"top-right",toastOptions:{duration:4e3,style:{background:"hsl(var(--background))",color:"hsl(var(--foreground))",border:"1px solid hsl(var(--border))"}}})]})})})}jI(document.getElementById("root")).render(s.jsx(x.StrictMode,{children:s.jsx(rce,{})}));
