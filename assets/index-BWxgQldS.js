function h5(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function Cg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var gC={exports:{}},Tg={},vC={exports:{}},Ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dh=Symbol.for("react.element"),f5=Symbol.for("react.portal"),m5=Symbol.for("react.fragment"),p5=Symbol.for("react.strict_mode"),g5=Symbol.for("react.profiler"),v5=Symbol.for("react.provider"),x5=Symbol.for("react.context"),y5=Symbol.for("react.forward_ref"),w5=Symbol.for("react.suspense"),b5=Symbol.for("react.memo"),j5=Symbol.for("react.lazy"),J_=Symbol.iterator;function _5(t){return t===null||typeof t!="object"?null:(t=J_&&t[J_]||t["@@iterator"],typeof t=="function"?t:null)}var xC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yC=Object.assign,wC={};function au(t,e,n){this.props=t,this.context=e,this.refs=wC,this.updater=n||xC}au.prototype.isReactComponent={};au.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};au.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function bC(){}bC.prototype=au.prototype;function Aw(t,e,n){this.props=t,this.context=e,this.refs=wC,this.updater=n||xC}var Rw=Aw.prototype=new bC;Rw.constructor=Aw;yC(Rw,au.prototype);Rw.isPureReactComponent=!0;var eN=Array.isArray,jC=Object.prototype.hasOwnProperty,Mw={current:null},_C={key:!0,ref:!0,__self:!0,__source:!0};function NC(t,e,n){var r,i={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)jC.call(e,r)&&!_C.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Dh,type:t,key:a,ref:o,props:i,_owner:Mw.current}}function N5(t,e){return{$$typeof:Dh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Dw(t){return typeof t=="object"&&t!==null&&t.$$typeof===Dh}function S5(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var tN=/\/+/g;function dx(t,e){return typeof t=="object"&&t!==null&&t.key!=null?S5(""+t.key):e.toString(36)}function Sm(t,e,n,r,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Dh:case f5:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+dx(o,0):r,eN(i)?(n="",t!=null&&(n=t.replace(tN,"$&/")+"/"),Sm(i,e,n,"",function(u){return u})):i!=null&&(Dw(i)&&(i=N5(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(tN,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",eN(t))for(var l=0;l<t.length;l++){a=t[l];var c=r+dx(a,l);o+=Sm(a,e,n,c,i)}else if(c=_5(t),typeof c=="function")for(t=c.call(t),l=0;!(a=t.next()).done;)a=a.value,c=r+dx(a,l++),o+=Sm(a,e,n,c,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function $f(t,e,n){if(t==null)return t;var r=[],i=0;return Sm(t,r,"","",function(a){return e.call(n,a,i++)}),r}function E5(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var pr={current:null},Em={transition:null},C5={ReactCurrentDispatcher:pr,ReactCurrentBatchConfig:Em,ReactCurrentOwner:Mw};function SC(){throw Error("act(...) is not supported in production builds of React.")}Ze.Children={map:$f,forEach:function(t,e,n){$f(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return $f(t,function(){e++}),e},toArray:function(t){return $f(t,function(e){return e})||[]},only:function(t){if(!Dw(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ze.Component=au;Ze.Fragment=m5;Ze.Profiler=g5;Ze.PureComponent=Aw;Ze.StrictMode=p5;Ze.Suspense=w5;Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=C5;Ze.act=SC;Ze.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=yC({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=Mw.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)jC.call(e,c)&&!_C.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Dh,type:t.type,key:i,ref:a,props:r,_owner:o}};Ze.createContext=function(t){return t={$$typeof:x5,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:v5,_context:t},t.Consumer=t};Ze.createElement=NC;Ze.createFactory=function(t){var e=NC.bind(null,t);return e.type=t,e};Ze.createRef=function(){return{current:null}};Ze.forwardRef=function(t){return{$$typeof:y5,render:t}};Ze.isValidElement=Dw;Ze.lazy=function(t){return{$$typeof:j5,_payload:{_status:-1,_result:t},_init:E5}};Ze.memo=function(t,e){return{$$typeof:b5,type:t,compare:e===void 0?null:e}};Ze.startTransition=function(t){var e=Em.transition;Em.transition={};try{t()}finally{Em.transition=e}};Ze.unstable_act=SC;Ze.useCallback=function(t,e){return pr.current.useCallback(t,e)};Ze.useContext=function(t){return pr.current.useContext(t)};Ze.useDebugValue=function(){};Ze.useDeferredValue=function(t){return pr.current.useDeferredValue(t)};Ze.useEffect=function(t,e){return pr.current.useEffect(t,e)};Ze.useId=function(){return pr.current.useId()};Ze.useImperativeHandle=function(t,e,n){return pr.current.useImperativeHandle(t,e,n)};Ze.useInsertionEffect=function(t,e){return pr.current.useInsertionEffect(t,e)};Ze.useLayoutEffect=function(t,e){return pr.current.useLayoutEffect(t,e)};Ze.useMemo=function(t,e){return pr.current.useMemo(t,e)};Ze.useReducer=function(t,e,n){return pr.current.useReducer(t,e,n)};Ze.useRef=function(t){return pr.current.useRef(t)};Ze.useState=function(t){return pr.current.useState(t)};Ze.useSyncExternalStore=function(t,e,n){return pr.current.useSyncExternalStore(t,e,n)};Ze.useTransition=function(){return pr.current.useTransition()};Ze.version="18.3.1";vC.exports=Ze;var p=vC.exports;const me=Cg(p),EC=h5({__proto__:null,default:me},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T5=p,k5=Symbol.for("react.element"),I5=Symbol.for("react.fragment"),P5=Object.prototype.hasOwnProperty,A5=T5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,R5={key:!0,ref:!0,__self:!0,__source:!0};function CC(t,e,n){var r,i={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)P5.call(e,r)&&!R5.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:k5,type:t,key:a,ref:o,props:i,_owner:A5.current}}Tg.Fragment=I5;Tg.jsx=CC;Tg.jsxs=CC;gC.exports=Tg;var s=gC.exports,TC={exports:{}},qr={},kC={exports:{}},IC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,$){var L=M.length;M.push($);e:for(;0<L;){var W=L-1>>>1,ne=M[W];if(0<i(ne,$))M[W]=$,M[L]=ne,L=W;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var $=M[0],L=M.pop();if(L!==$){M[0]=L;e:for(var W=0,ne=M.length,ye=ne>>>1;W<ye;){var Xe=2*(W+1)-1,xt=M[Xe],ut=Xe+1,ve=M[ut];if(0>i(xt,L))ut<ne&&0>i(ve,xt)?(M[W]=ve,M[ut]=L,W=ut):(M[W]=xt,M[Xe]=L,W=Xe);else if(ut<ne&&0>i(ve,L))M[W]=ve,M[ut]=L,W=ut;else break e}}return $}function i(M,$){var L=M.sortIndex-$.sortIndex;return L!==0?L:M.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,m=3,v=!1,y=!1,w=!1,b=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(M){for(var $=n(u);$!==null;){if($.callback===null)r(u);else if($.startTime<=M)r(u),$.sortIndex=$.expirationTime,e(c,$);else break;$=n(u)}}function E(M){if(w=!1,_(M),!y)if(n(c)!==null)y=!0,z(S);else{var $=n(u);$!==null&&V(E,$.startTime-M)}}function S(M,$){y=!1,w&&(w=!1,x(k),k=-1),v=!0;var L=m;try{for(_($),f=n(c);f!==null&&(!(f.expirationTime>$)||M&&!P());){var W=f.callback;if(typeof W=="function"){f.callback=null,m=f.priorityLevel;var ne=W(f.expirationTime<=$);$=t.unstable_now(),typeof ne=="function"?f.callback=ne:f===n(c)&&r(c),_($)}else r(c);f=n(c)}if(f!==null)var ye=!0;else{var Xe=n(u);Xe!==null&&V(E,Xe.startTime-$),ye=!1}return ye}finally{f=null,m=L,v=!1}}var O=!1,I=null,k=-1,R=5,N=-1;function P(){return!(t.unstable_now()-N<R)}function A(){if(I!==null){var M=t.unstable_now();N=M;var $=!0;try{$=I(!0,M)}finally{$?T():(O=!1,I=null)}}else O=!1}var T;if(typeof g=="function")T=function(){g(A)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,H=U.port2;U.port1.onmessage=A,T=function(){H.postMessage(null)}}else T=function(){b(A,0)};function z(M){I=M,O||(O=!0,T())}function V(M,$){k=b(function(){M(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){y||v||(y=!0,z(S))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(M){switch(m){case 1:case 2:case 3:var $=3;break;default:$=m}var L=m;m=$;try{return M()}finally{m=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,$){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var L=m;m=M;try{return $()}finally{m=L}},t.unstable_scheduleCallback=function(M,$,L){var W=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?W+L:W):L=W,M){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=L+ne,M={id:d++,callback:$,priorityLevel:M,startTime:L,expirationTime:ne,sortIndex:-1},L>W?(M.sortIndex=L,e(u,M),n(c)===null&&M===n(u)&&(w?(x(k),k=-1):w=!0,V(E,L-W))):(M.sortIndex=ne,e(c,M),y||v||(y=!0,z(S))),M},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(M){var $=m;return function(){var L=m;m=$;try{return M.apply(this,arguments)}finally{m=L}}}})(IC);kC.exports=IC;var M5=kC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D5=p,zr=M5;function se(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var PC=new Set,Od={};function yl(t,e){kc(t,e),kc(t+"Capture",e)}function kc(t,e){for(Od[t]=e,t=0;t<e.length;t++)PC.add(e[t])}var Li=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ky=Object.prototype.hasOwnProperty,O5=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nN={},rN={};function L5(t){return ky.call(rN,t)?!0:ky.call(nN,t)?!1:O5.test(t)?rN[t]=!0:(nN[t]=!0,!1)}function V5(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function F5(t,e,n,r){if(e===null||typeof e>"u"||V5(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function gr(t,e,n,r,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var Vn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Vn[t]=new gr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Vn[e]=new gr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Vn[t]=new gr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Vn[t]=new gr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Vn[t]=new gr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Vn[t]=new gr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Vn[t]=new gr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Vn[t]=new gr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Vn[t]=new gr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ow=/[\-:]([a-z])/g;function Lw(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ow,Lw);Vn[e]=new gr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ow,Lw);Vn[e]=new gr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ow,Lw);Vn[e]=new gr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Vn[t]=new gr(t,1,!1,t.toLowerCase(),null,!1,!1)});Vn.xlinkHref=new gr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Vn[t]=new gr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Vw(t,e,n,r){var i=Vn.hasOwnProperty(e)?Vn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(F5(e,n,i,r)&&(n=null),r||i===null?L5(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ea=D5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zf=Symbol.for("react.element"),Ql=Symbol.for("react.portal"),Xl=Symbol.for("react.fragment"),Fw=Symbol.for("react.strict_mode"),Iy=Symbol.for("react.profiler"),AC=Symbol.for("react.provider"),RC=Symbol.for("react.context"),Uw=Symbol.for("react.forward_ref"),Py=Symbol.for("react.suspense"),Ay=Symbol.for("react.suspense_list"),$w=Symbol.for("react.memo"),ga=Symbol.for("react.lazy"),MC=Symbol.for("react.offscreen"),sN=Symbol.iterator;function zu(t){return t===null||typeof t!="object"?null:(t=sN&&t[sN]||t["@@iterator"],typeof t=="function"?t:null)}var Kt=Object.assign,hx;function rd(t){if(hx===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);hx=e&&e[1]||""}return`
`+hx+t}var fx=!1;function mx(t,e){if(!t||fx)return"";fx=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=r.stack.split(`
`),o=i.length-1,l=a.length-1;1<=o&&0<=l&&i[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==a[l]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{fx=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?rd(t):""}function U5(t){switch(t.tag){case 5:return rd(t.type);case 16:return rd("Lazy");case 13:return rd("Suspense");case 19:return rd("SuspenseList");case 0:case 2:case 15:return t=mx(t.type,!1),t;case 11:return t=mx(t.type.render,!1),t;case 1:return t=mx(t.type,!0),t;default:return""}}function Ry(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Xl:return"Fragment";case Ql:return"Portal";case Iy:return"Profiler";case Fw:return"StrictMode";case Py:return"Suspense";case Ay:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case RC:return(t.displayName||"Context")+".Consumer";case AC:return(t._context.displayName||"Context")+".Provider";case Uw:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case $w:return e=t.displayName||null,e!==null?e:Ry(t.type)||"Memo";case ga:e=t._payload,t=t._init;try{return Ry(t(e))}catch{}}return null}function $5(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ry(e);case 8:return e===Fw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ha(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function DC(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function z5(t){var e=DC(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Bf(t){t._valueTracker||(t._valueTracker=z5(t))}function OC(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=DC(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function rp(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function My(t,e){var n=e.checked;return Kt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function iN(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ha(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function LC(t,e){e=e.checked,e!=null&&Vw(t,"checked",e,!1)}function Dy(t,e){LC(t,e);var n=Ha(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Oy(t,e.type,n):e.hasOwnProperty("defaultValue")&&Oy(t,e.type,Ha(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function aN(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Oy(t,e,n){(e!=="number"||rp(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var sd=Array.isArray;function dc(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ha(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ly(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(se(91));return Kt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function oN(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(se(92));if(sd(n)){if(1<n.length)throw Error(se(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ha(n)}}function VC(t,e){var n=Ha(e.value),r=Ha(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function lN(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function FC(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vy(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?FC(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var qf,UC=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(qf=qf||document.createElement("div"),qf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=qf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ld(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var xd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},B5=["Webkit","ms","Moz","O"];Object.keys(xd).forEach(function(t){B5.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),xd[e]=xd[t]})});function $C(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||xd.hasOwnProperty(t)&&xd[t]?(""+e).trim():e+"px"}function zC(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=$C(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var q5=Kt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fy(t,e){if(e){if(q5[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(se(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(se(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(se(61))}if(e.style!=null&&typeof e.style!="object")throw Error(se(62))}}function Uy(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $y=null;function zw(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var zy=null,hc=null,fc=null;function cN(t){if(t=Vh(t)){if(typeof zy!="function")throw Error(se(280));var e=t.stateNode;e&&(e=Rg(e),zy(t.stateNode,t.type,e))}}function BC(t){hc?fc?fc.push(t):fc=[t]:hc=t}function qC(){if(hc){var t=hc,e=fc;if(fc=hc=null,cN(t),e)for(t=0;t<e.length;t++)cN(e[t])}}function WC(t,e){return t(e)}function HC(){}var px=!1;function GC(t,e,n){if(px)return t(e,n);px=!0;try{return WC(t,e,n)}finally{px=!1,(hc!==null||fc!==null)&&(HC(),qC())}}function Vd(t,e){var n=t.stateNode;if(n===null)return null;var r=Rg(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(se(231,e,typeof n));return n}var By=!1;if(Li)try{var Bu={};Object.defineProperty(Bu,"passive",{get:function(){By=!0}}),window.addEventListener("test",Bu,Bu),window.removeEventListener("test",Bu,Bu)}catch{By=!1}function W5(t,e,n,r,i,a,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var yd=!1,sp=null,ip=!1,qy=null,H5={onError:function(t){yd=!0,sp=t}};function G5(t,e,n,r,i,a,o,l,c){yd=!1,sp=null,W5.apply(H5,arguments)}function K5(t,e,n,r,i,a,o,l,c){if(G5.apply(this,arguments),yd){if(yd){var u=sp;yd=!1,sp=null}else throw Error(se(198));ip||(ip=!0,qy=u)}}function wl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function KC(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function uN(t){if(wl(t)!==t)throw Error(se(188))}function Y5(t){var e=t.alternate;if(!e){if(e=wl(t),e===null)throw Error(se(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return uN(i),t;if(a===r)return uN(i),e;a=a.sibling}throw Error(se(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(se(189))}}if(n.alternate!==r)throw Error(se(190))}if(n.tag!==3)throw Error(se(188));return n.stateNode.current===n?t:e}function YC(t){return t=Y5(t),t!==null?QC(t):null}function QC(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=QC(t);if(e!==null)return e;t=t.sibling}return null}var XC=zr.unstable_scheduleCallback,dN=zr.unstable_cancelCallback,Q5=zr.unstable_shouldYield,X5=zr.unstable_requestPaint,sn=zr.unstable_now,Z5=zr.unstable_getCurrentPriorityLevel,Bw=zr.unstable_ImmediatePriority,ZC=zr.unstable_UserBlockingPriority,ap=zr.unstable_NormalPriority,J5=zr.unstable_LowPriority,JC=zr.unstable_IdlePriority,kg=null,Xs=null;function e6(t){if(Xs&&typeof Xs.onCommitFiberRoot=="function")try{Xs.onCommitFiberRoot(kg,t,void 0,(t.current.flags&128)===128)}catch{}}var bs=Math.clz32?Math.clz32:r6,t6=Math.log,n6=Math.LN2;function r6(t){return t>>>=0,t===0?32:31-(t6(t)/n6|0)|0}var Wf=64,Hf=4194304;function id(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function op(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=id(l):(a&=o,a!==0&&(r=id(a)))}else o=n&~i,o!==0?r=id(o):a!==0&&(r=id(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-bs(e),i=1<<n,r|=t[n],e&=~i;return r}function s6(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function i6(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-bs(a),l=1<<o,c=i[o];c===-1?(!(l&n)||l&r)&&(i[o]=s6(l,e)):c<=e&&(t.expiredLanes|=l),a&=~l}}function Wy(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function eT(){var t=Wf;return Wf<<=1,!(Wf&4194240)&&(Wf=64),t}function gx(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Oh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-bs(e),t[e]=n}function a6(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-bs(n),a=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~a}}function qw(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-bs(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var jt=0;function tT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var nT,Ww,rT,sT,iT,Hy=!1,Gf=[],Ra=null,Ma=null,Da=null,Fd=new Map,Ud=new Map,ya=[],o6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hN(t,e){switch(t){case"focusin":case"focusout":Ra=null;break;case"dragenter":case"dragleave":Ma=null;break;case"mouseover":case"mouseout":Da=null;break;case"pointerover":case"pointerout":Fd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ud.delete(e.pointerId)}}function qu(t,e,n,r,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},e!==null&&(e=Vh(e),e!==null&&Ww(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function l6(t,e,n,r,i){switch(e){case"focusin":return Ra=qu(Ra,t,e,n,r,i),!0;case"dragenter":return Ma=qu(Ma,t,e,n,r,i),!0;case"mouseover":return Da=qu(Da,t,e,n,r,i),!0;case"pointerover":var a=i.pointerId;return Fd.set(a,qu(Fd.get(a)||null,t,e,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Ud.set(a,qu(Ud.get(a)||null,t,e,n,r,i)),!0}return!1}function aT(t){var e=Do(t.target);if(e!==null){var n=wl(e);if(n!==null){if(e=n.tag,e===13){if(e=KC(n),e!==null){t.blockedOn=e,iT(t.priority,function(){rT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Cm(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Gy(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);$y=r,n.target.dispatchEvent(r),$y=null}else return e=Vh(n),e!==null&&Ww(e),t.blockedOn=n,!1;e.shift()}return!0}function fN(t,e,n){Cm(t)&&n.delete(e)}function c6(){Hy=!1,Ra!==null&&Cm(Ra)&&(Ra=null),Ma!==null&&Cm(Ma)&&(Ma=null),Da!==null&&Cm(Da)&&(Da=null),Fd.forEach(fN),Ud.forEach(fN)}function Wu(t,e){t.blockedOn===e&&(t.blockedOn=null,Hy||(Hy=!0,zr.unstable_scheduleCallback(zr.unstable_NormalPriority,c6)))}function $d(t){function e(i){return Wu(i,t)}if(0<Gf.length){Wu(Gf[0],t);for(var n=1;n<Gf.length;n++){var r=Gf[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ra!==null&&Wu(Ra,t),Ma!==null&&Wu(Ma,t),Da!==null&&Wu(Da,t),Fd.forEach(e),Ud.forEach(e),n=0;n<ya.length;n++)r=ya[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ya.length&&(n=ya[0],n.blockedOn===null);)aT(n),n.blockedOn===null&&ya.shift()}var mc=ea.ReactCurrentBatchConfig,lp=!0;function u6(t,e,n,r){var i=jt,a=mc.transition;mc.transition=null;try{jt=1,Hw(t,e,n,r)}finally{jt=i,mc.transition=a}}function d6(t,e,n,r){var i=jt,a=mc.transition;mc.transition=null;try{jt=4,Hw(t,e,n,r)}finally{jt=i,mc.transition=a}}function Hw(t,e,n,r){if(lp){var i=Gy(t,e,n,r);if(i===null)Ex(t,e,r,cp,n),hN(t,r);else if(l6(i,t,e,n,r))r.stopPropagation();else if(hN(t,r),e&4&&-1<o6.indexOf(t)){for(;i!==null;){var a=Vh(i);if(a!==null&&nT(a),a=Gy(t,e,n,r),a===null&&Ex(t,e,r,cp,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else Ex(t,e,r,null,n)}}var cp=null;function Gy(t,e,n,r){if(cp=null,t=zw(r),t=Do(t),t!==null)if(e=wl(t),e===null)t=null;else if(n=e.tag,n===13){if(t=KC(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return cp=t,null}function oT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Z5()){case Bw:return 1;case ZC:return 4;case ap:case J5:return 16;case JC:return 536870912;default:return 16}default:return 16}}var Ta=null,Gw=null,Tm=null;function lT(){if(Tm)return Tm;var t,e=Gw,n=e.length,r,i="value"in Ta?Ta.value:Ta.textContent,a=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[a-r];r++);return Tm=i.slice(t,1<r?1-r:void 0)}function km(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Kf(){return!0}function mN(){return!1}function Wr(t){function e(n,r,i,a,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Kf:mN,this.isPropagationStopped=mN,this}return Kt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Kf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Kf)},persist:function(){},isPersistent:Kf}),e}var ou={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kw=Wr(ou),Lh=Kt({},ou,{view:0,detail:0}),h6=Wr(Lh),vx,xx,Hu,Ig=Kt({},Lh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yw,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Hu&&(Hu&&t.type==="mousemove"?(vx=t.screenX-Hu.screenX,xx=t.screenY-Hu.screenY):xx=vx=0,Hu=t),vx)},movementY:function(t){return"movementY"in t?t.movementY:xx}}),pN=Wr(Ig),f6=Kt({},Ig,{dataTransfer:0}),m6=Wr(f6),p6=Kt({},Lh,{relatedTarget:0}),yx=Wr(p6),g6=Kt({},ou,{animationName:0,elapsedTime:0,pseudoElement:0}),v6=Wr(g6),x6=Kt({},ou,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),y6=Wr(x6),w6=Kt({},ou,{data:0}),gN=Wr(w6),b6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},j6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function N6(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=_6[t])?!!e[t]:!1}function Yw(){return N6}var S6=Kt({},Lh,{key:function(t){if(t.key){var e=b6[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=km(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?j6[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yw,charCode:function(t){return t.type==="keypress"?km(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?km(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),E6=Wr(S6),C6=Kt({},Ig,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vN=Wr(C6),T6=Kt({},Lh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yw}),k6=Wr(T6),I6=Kt({},ou,{propertyName:0,elapsedTime:0,pseudoElement:0}),P6=Wr(I6),A6=Kt({},Ig,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),R6=Wr(A6),M6=[9,13,27,32],Qw=Li&&"CompositionEvent"in window,wd=null;Li&&"documentMode"in document&&(wd=document.documentMode);var D6=Li&&"TextEvent"in window&&!wd,cT=Li&&(!Qw||wd&&8<wd&&11>=wd),xN=" ",yN=!1;function uT(t,e){switch(t){case"keyup":return M6.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Zl=!1;function O6(t,e){switch(t){case"compositionend":return dT(e);case"keypress":return e.which!==32?null:(yN=!0,xN);case"textInput":return t=e.data,t===xN&&yN?null:t;default:return null}}function L6(t,e){if(Zl)return t==="compositionend"||!Qw&&uT(t,e)?(t=lT(),Tm=Gw=Ta=null,Zl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return cT&&e.locale!=="ko"?null:e.data;default:return null}}var V6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wN(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!V6[t.type]:e==="textarea"}function hT(t,e,n,r){BC(r),e=up(e,"onChange"),0<e.length&&(n=new Kw("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var bd=null,zd=null;function F6(t){_T(t,0)}function Pg(t){var e=tc(t);if(OC(e))return t}function U6(t,e){if(t==="change")return e}var fT=!1;if(Li){var wx;if(Li){var bx="oninput"in document;if(!bx){var bN=document.createElement("div");bN.setAttribute("oninput","return;"),bx=typeof bN.oninput=="function"}wx=bx}else wx=!1;fT=wx&&(!document.documentMode||9<document.documentMode)}function jN(){bd&&(bd.detachEvent("onpropertychange",mT),zd=bd=null)}function mT(t){if(t.propertyName==="value"&&Pg(zd)){var e=[];hT(e,zd,t,zw(t)),GC(F6,e)}}function $6(t,e,n){t==="focusin"?(jN(),bd=e,zd=n,bd.attachEvent("onpropertychange",mT)):t==="focusout"&&jN()}function z6(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Pg(zd)}function B6(t,e){if(t==="click")return Pg(e)}function q6(t,e){if(t==="input"||t==="change")return Pg(e)}function W6(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ks=typeof Object.is=="function"?Object.is:W6;function Bd(t,e){if(ks(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ky.call(e,i)||!ks(t[i],e[i]))return!1}return!0}function _N(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function NN(t,e){var n=_N(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=_N(n)}}function pT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?pT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function gT(){for(var t=window,e=rp();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=rp(t.document)}return e}function Xw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function H6(t){var e=gT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&pT(n.ownerDocument.documentElement,n)){if(r!==null&&Xw(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!t.extend&&a>r&&(i=r,r=a,a=i),i=NN(n,a);var o=NN(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var G6=Li&&"documentMode"in document&&11>=document.documentMode,Jl=null,Ky=null,jd=null,Yy=!1;function SN(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Yy||Jl==null||Jl!==rp(r)||(r=Jl,"selectionStart"in r&&Xw(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),jd&&Bd(jd,r)||(jd=r,r=up(Ky,"onSelect"),0<r.length&&(e=new Kw("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Jl)))}function Yf(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ec={animationend:Yf("Animation","AnimationEnd"),animationiteration:Yf("Animation","AnimationIteration"),animationstart:Yf("Animation","AnimationStart"),transitionend:Yf("Transition","TransitionEnd")},jx={},vT={};Li&&(vT=document.createElement("div").style,"AnimationEvent"in window||(delete ec.animationend.animation,delete ec.animationiteration.animation,delete ec.animationstart.animation),"TransitionEvent"in window||delete ec.transitionend.transition);function Ag(t){if(jx[t])return jx[t];if(!ec[t])return t;var e=ec[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in vT)return jx[t]=e[n];return t}var xT=Ag("animationend"),yT=Ag("animationiteration"),wT=Ag("animationstart"),bT=Ag("transitionend"),jT=new Map,EN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function uo(t,e){jT.set(t,e),yl(e,[t])}for(var _x=0;_x<EN.length;_x++){var Nx=EN[_x],K6=Nx.toLowerCase(),Y6=Nx[0].toUpperCase()+Nx.slice(1);uo(K6,"on"+Y6)}uo(xT,"onAnimationEnd");uo(yT,"onAnimationIteration");uo(wT,"onAnimationStart");uo("dblclick","onDoubleClick");uo("focusin","onFocus");uo("focusout","onBlur");uo(bT,"onTransitionEnd");kc("onMouseEnter",["mouseout","mouseover"]);kc("onMouseLeave",["mouseout","mouseover"]);kc("onPointerEnter",["pointerout","pointerover"]);kc("onPointerLeave",["pointerout","pointerover"]);yl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yl("onBeforeInput",["compositionend","keypress","textInput","paste"]);yl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ad="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Q6=new Set("cancel close invalid load scroll toggle".split(" ").concat(ad));function CN(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,K5(r,e,void 0,t),t.currentTarget=null}function _T(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&i.isPropagationStopped())break e;CN(i,l,u),a=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&i.isPropagationStopped())break e;CN(i,l,u),a=c}}}if(ip)throw t=qy,ip=!1,qy=null,t}function Dt(t,e){var n=e[e0];n===void 0&&(n=e[e0]=new Set);var r=t+"__bubble";n.has(r)||(NT(e,t,2,!1),n.add(r))}function Sx(t,e,n){var r=0;e&&(r|=4),NT(n,t,r,e)}var Qf="_reactListening"+Math.random().toString(36).slice(2);function qd(t){if(!t[Qf]){t[Qf]=!0,PC.forEach(function(n){n!=="selectionchange"&&(Q6.has(n)||Sx(n,!1,t),Sx(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Qf]||(e[Qf]=!0,Sx("selectionchange",!1,e))}}function NT(t,e,n,r){switch(oT(e)){case 1:var i=u6;break;case 4:i=d6;break;default:i=Hw}n=i.bind(null,e,n,t),i=void 0,!By||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Ex(t,e,n,r,i){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Do(l),o===null)return;if(c=o.tag,c===5||c===6){r=a=o;continue e}l=l.parentNode}}r=r.return}GC(function(){var u=a,d=zw(n),f=[];e:{var m=jT.get(t);if(m!==void 0){var v=Kw,y=t;switch(t){case"keypress":if(km(n)===0)break e;case"keydown":case"keyup":v=E6;break;case"focusin":y="focus",v=yx;break;case"focusout":y="blur",v=yx;break;case"beforeblur":case"afterblur":v=yx;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=pN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=m6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=k6;break;case xT:case yT:case wT:v=v6;break;case bT:v=P6;break;case"scroll":v=h6;break;case"wheel":v=R6;break;case"copy":case"cut":case"paste":v=y6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=vN}var w=(e&4)!==0,b=!w&&t==="scroll",x=w?m!==null?m+"Capture":null:m;w=[];for(var g=u,_;g!==null;){_=g;var E=_.stateNode;if(_.tag===5&&E!==null&&(_=E,x!==null&&(E=Vd(g,x),E!=null&&w.push(Wd(g,E,_)))),b)break;g=g.return}0<w.length&&(m=new v(m,y,null,n,d),f.push({event:m,listeners:w}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",m&&n!==$y&&(y=n.relatedTarget||n.fromElement)&&(Do(y)||y[Vi]))break e;if((v||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,v?(y=n.relatedTarget||n.toElement,v=u,y=y?Do(y):null,y!==null&&(b=wl(y),y!==b||y.tag!==5&&y.tag!==6)&&(y=null)):(v=null,y=u),v!==y)){if(w=pN,E="onMouseLeave",x="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(w=vN,E="onPointerLeave",x="onPointerEnter",g="pointer"),b=v==null?m:tc(v),_=y==null?m:tc(y),m=new w(E,g+"leave",v,n,d),m.target=b,m.relatedTarget=_,E=null,Do(d)===u&&(w=new w(x,g+"enter",y,n,d),w.target=_,w.relatedTarget=b,E=w),b=E,v&&y)t:{for(w=v,x=y,g=0,_=w;_;_=Vl(_))g++;for(_=0,E=x;E;E=Vl(E))_++;for(;0<g-_;)w=Vl(w),g--;for(;0<_-g;)x=Vl(x),_--;for(;g--;){if(w===x||x!==null&&w===x.alternate)break t;w=Vl(w),x=Vl(x)}w=null}else w=null;v!==null&&TN(f,m,v,w,!1),y!==null&&b!==null&&TN(f,b,y,w,!0)}}e:{if(m=u?tc(u):window,v=m.nodeName&&m.nodeName.toLowerCase(),v==="select"||v==="input"&&m.type==="file")var S=U6;else if(wN(m))if(fT)S=q6;else{S=z6;var O=$6}else(v=m.nodeName)&&v.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(S=B6);if(S&&(S=S(t,u))){hT(f,S,n,d);break e}O&&O(t,m,u),t==="focusout"&&(O=m._wrapperState)&&O.controlled&&m.type==="number"&&Oy(m,"number",m.value)}switch(O=u?tc(u):window,t){case"focusin":(wN(O)||O.contentEditable==="true")&&(Jl=O,Ky=u,jd=null);break;case"focusout":jd=Ky=Jl=null;break;case"mousedown":Yy=!0;break;case"contextmenu":case"mouseup":case"dragend":Yy=!1,SN(f,n,d);break;case"selectionchange":if(G6)break;case"keydown":case"keyup":SN(f,n,d)}var I;if(Qw)e:{switch(t){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Zl?uT(t,n)&&(k="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(cT&&n.locale!=="ko"&&(Zl||k!=="onCompositionStart"?k==="onCompositionEnd"&&Zl&&(I=lT()):(Ta=d,Gw="value"in Ta?Ta.value:Ta.textContent,Zl=!0)),O=up(u,k),0<O.length&&(k=new gN(k,t,null,n,d),f.push({event:k,listeners:O}),I?k.data=I:(I=dT(n),I!==null&&(k.data=I)))),(I=D6?O6(t,n):L6(t,n))&&(u=up(u,"onBeforeInput"),0<u.length&&(d=new gN("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=I))}_T(f,e)})}function Wd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function up(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Vd(t,n),a!=null&&r.unshift(Wd(t,a,i)),a=Vd(t,e),a!=null&&r.push(Wd(t,a,i))),t=t.return}return r}function Vl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function TN(t,e,n,r,i){for(var a=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,i?(c=Vd(n,a),c!=null&&o.unshift(Wd(n,c,l))):i||(c=Vd(n,a),c!=null&&o.push(Wd(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var X6=/\r\n?/g,Z6=/\u0000|\uFFFD/g;function kN(t){return(typeof t=="string"?t:""+t).replace(X6,`
`).replace(Z6,"")}function Xf(t,e,n){if(e=kN(e),kN(t)!==e&&n)throw Error(se(425))}function dp(){}var Qy=null,Xy=null;function Zy(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Jy=typeof setTimeout=="function"?setTimeout:void 0,J6=typeof clearTimeout=="function"?clearTimeout:void 0,IN=typeof Promise=="function"?Promise:void 0,eL=typeof queueMicrotask=="function"?queueMicrotask:typeof IN<"u"?function(t){return IN.resolve(null).then(t).catch(tL)}:Jy;function tL(t){setTimeout(function(){throw t})}function Cx(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),$d(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);$d(e)}function Oa(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function PN(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var lu=Math.random().toString(36).slice(2),Bs="__reactFiber$"+lu,Hd="__reactProps$"+lu,Vi="__reactContainer$"+lu,e0="__reactEvents$"+lu,nL="__reactListeners$"+lu,rL="__reactHandles$"+lu;function Do(t){var e=t[Bs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Vi]||n[Bs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=PN(t);t!==null;){if(n=t[Bs])return n;t=PN(t)}return e}t=n,n=t.parentNode}return null}function Vh(t){return t=t[Bs]||t[Vi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function tc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(se(33))}function Rg(t){return t[Hd]||null}var t0=[],nc=-1;function ho(t){return{current:t}}function Vt(t){0>nc||(t.current=t0[nc],t0[nc]=null,nc--)}function Pt(t,e){nc++,t0[nc]=t.current,t.current=e}var Ga={},Zn=ho(Ga),Nr=ho(!1),Jo=Ga;function Ic(t,e){var n=t.type.contextTypes;if(!n)return Ga;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Sr(t){return t=t.childContextTypes,t!=null}function hp(){Vt(Nr),Vt(Zn)}function AN(t,e,n){if(Zn.current!==Ga)throw Error(se(168));Pt(Zn,e),Pt(Nr,n)}function ST(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(se(108,$5(t)||"Unknown",i));return Kt({},n,r)}function fp(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ga,Jo=Zn.current,Pt(Zn,t),Pt(Nr,Nr.current),!0}function RN(t,e,n){var r=t.stateNode;if(!r)throw Error(se(169));n?(t=ST(t,e,Jo),r.__reactInternalMemoizedMergedChildContext=t,Vt(Nr),Vt(Zn),Pt(Zn,t)):Vt(Nr),Pt(Nr,n)}var Ei=null,Mg=!1,Tx=!1;function ET(t){Ei===null?Ei=[t]:Ei.push(t)}function sL(t){Mg=!0,ET(t)}function fo(){if(!Tx&&Ei!==null){Tx=!0;var t=0,e=jt;try{var n=Ei;for(jt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ei=null,Mg=!1}catch(i){throw Ei!==null&&(Ei=Ei.slice(t+1)),XC(Bw,fo),i}finally{jt=e,Tx=!1}}return null}var rc=[],sc=0,mp=null,pp=0,Qr=[],Xr=0,el=null,Ti=1,ki="";function Po(t,e){rc[sc++]=pp,rc[sc++]=mp,mp=t,pp=e}function CT(t,e,n){Qr[Xr++]=Ti,Qr[Xr++]=ki,Qr[Xr++]=el,el=t;var r=Ti;t=ki;var i=32-bs(r)-1;r&=~(1<<i),n+=1;var a=32-bs(e)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ti=1<<32-bs(e)+i|n<<i|r,ki=a+t}else Ti=1<<a|n<<i|r,ki=t}function Zw(t){t.return!==null&&(Po(t,1),CT(t,1,0))}function Jw(t){for(;t===mp;)mp=rc[--sc],rc[sc]=null,pp=rc[--sc],rc[sc]=null;for(;t===el;)el=Qr[--Xr],Qr[Xr]=null,ki=Qr[--Xr],Qr[Xr]=null,Ti=Qr[--Xr],Qr[Xr]=null}var Vr=null,Dr=null,Ut=!1,vs=null;function TT(t,e){var n=Jr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function MN(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Vr=t,Dr=Oa(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Vr=t,Dr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=el!==null?{id:Ti,overflow:ki}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Jr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Vr=t,Dr=null,!0):!1;default:return!1}}function n0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function r0(t){if(Ut){var e=Dr;if(e){var n=e;if(!MN(t,e)){if(n0(t))throw Error(se(418));e=Oa(n.nextSibling);var r=Vr;e&&MN(t,e)?TT(r,n):(t.flags=t.flags&-4097|2,Ut=!1,Vr=t)}}else{if(n0(t))throw Error(se(418));t.flags=t.flags&-4097|2,Ut=!1,Vr=t}}}function DN(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Vr=t}function Zf(t){if(t!==Vr)return!1;if(!Ut)return DN(t),Ut=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Zy(t.type,t.memoizedProps)),e&&(e=Dr)){if(n0(t))throw kT(),Error(se(418));for(;e;)TT(t,e),e=Oa(e.nextSibling)}if(DN(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(se(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Dr=Oa(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Dr=null}}else Dr=Vr?Oa(t.stateNode.nextSibling):null;return!0}function kT(){for(var t=Dr;t;)t=Oa(t.nextSibling)}function Pc(){Dr=Vr=null,Ut=!1}function e1(t){vs===null?vs=[t]:vs.push(t)}var iL=ea.ReactCurrentBatchConfig;function Gu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(se(309));var r=n.stateNode}if(!r)throw Error(se(147,t));var i=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=i.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(se(284));if(!n._owner)throw Error(se(290,t))}return t}function Jf(t,e){throw t=Object.prototype.toString.call(e),Error(se(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ON(t){var e=t._init;return e(t._payload)}function IT(t){function e(x,g){if(t){var _=x.deletions;_===null?(x.deletions=[g],x.flags|=16):_.push(g)}}function n(x,g){if(!t)return null;for(;g!==null;)e(x,g),g=g.sibling;return null}function r(x,g){for(x=new Map;g!==null;)g.key!==null?x.set(g.key,g):x.set(g.index,g),g=g.sibling;return x}function i(x,g){return x=Ua(x,g),x.index=0,x.sibling=null,x}function a(x,g,_){return x.index=_,t?(_=x.alternate,_!==null?(_=_.index,_<g?(x.flags|=2,g):_):(x.flags|=2,g)):(x.flags|=1048576,g)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,g,_,E){return g===null||g.tag!==6?(g=Dx(_,x.mode,E),g.return=x,g):(g=i(g,_),g.return=x,g)}function c(x,g,_,E){var S=_.type;return S===Xl?d(x,g,_.props.children,E,_.key):g!==null&&(g.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ga&&ON(S)===g.type)?(E=i(g,_.props),E.ref=Gu(x,g,_),E.return=x,E):(E=Om(_.type,_.key,_.props,null,x.mode,E),E.ref=Gu(x,g,_),E.return=x,E)}function u(x,g,_,E){return g===null||g.tag!==4||g.stateNode.containerInfo!==_.containerInfo||g.stateNode.implementation!==_.implementation?(g=Ox(_,x.mode,E),g.return=x,g):(g=i(g,_.children||[]),g.return=x,g)}function d(x,g,_,E,S){return g===null||g.tag!==7?(g=zo(_,x.mode,E,S),g.return=x,g):(g=i(g,_),g.return=x,g)}function f(x,g,_){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Dx(""+g,x.mode,_),g.return=x,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case zf:return _=Om(g.type,g.key,g.props,null,x.mode,_),_.ref=Gu(x,null,g),_.return=x,_;case Ql:return g=Ox(g,x.mode,_),g.return=x,g;case ga:var E=g._init;return f(x,E(g._payload),_)}if(sd(g)||zu(g))return g=zo(g,x.mode,_,null),g.return=x,g;Jf(x,g)}return null}function m(x,g,_,E){var S=g!==null?g.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return S!==null?null:l(x,g,""+_,E);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case zf:return _.key===S?c(x,g,_,E):null;case Ql:return _.key===S?u(x,g,_,E):null;case ga:return S=_._init,m(x,g,S(_._payload),E)}if(sd(_)||zu(_))return S!==null?null:d(x,g,_,E,null);Jf(x,_)}return null}function v(x,g,_,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return x=x.get(_)||null,l(g,x,""+E,S);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case zf:return x=x.get(E.key===null?_:E.key)||null,c(g,x,E,S);case Ql:return x=x.get(E.key===null?_:E.key)||null,u(g,x,E,S);case ga:var O=E._init;return v(x,g,_,O(E._payload),S)}if(sd(E)||zu(E))return x=x.get(_)||null,d(g,x,E,S,null);Jf(g,E)}return null}function y(x,g,_,E){for(var S=null,O=null,I=g,k=g=0,R=null;I!==null&&k<_.length;k++){I.index>k?(R=I,I=null):R=I.sibling;var N=m(x,I,_[k],E);if(N===null){I===null&&(I=R);break}t&&I&&N.alternate===null&&e(x,I),g=a(N,g,k),O===null?S=N:O.sibling=N,O=N,I=R}if(k===_.length)return n(x,I),Ut&&Po(x,k),S;if(I===null){for(;k<_.length;k++)I=f(x,_[k],E),I!==null&&(g=a(I,g,k),O===null?S=I:O.sibling=I,O=I);return Ut&&Po(x,k),S}for(I=r(x,I);k<_.length;k++)R=v(I,x,k,_[k],E),R!==null&&(t&&R.alternate!==null&&I.delete(R.key===null?k:R.key),g=a(R,g,k),O===null?S=R:O.sibling=R,O=R);return t&&I.forEach(function(P){return e(x,P)}),Ut&&Po(x,k),S}function w(x,g,_,E){var S=zu(_);if(typeof S!="function")throw Error(se(150));if(_=S.call(_),_==null)throw Error(se(151));for(var O=S=null,I=g,k=g=0,R=null,N=_.next();I!==null&&!N.done;k++,N=_.next()){I.index>k?(R=I,I=null):R=I.sibling;var P=m(x,I,N.value,E);if(P===null){I===null&&(I=R);break}t&&I&&P.alternate===null&&e(x,I),g=a(P,g,k),O===null?S=P:O.sibling=P,O=P,I=R}if(N.done)return n(x,I),Ut&&Po(x,k),S;if(I===null){for(;!N.done;k++,N=_.next())N=f(x,N.value,E),N!==null&&(g=a(N,g,k),O===null?S=N:O.sibling=N,O=N);return Ut&&Po(x,k),S}for(I=r(x,I);!N.done;k++,N=_.next())N=v(I,x,k,N.value,E),N!==null&&(t&&N.alternate!==null&&I.delete(N.key===null?k:N.key),g=a(N,g,k),O===null?S=N:O.sibling=N,O=N);return t&&I.forEach(function(A){return e(x,A)}),Ut&&Po(x,k),S}function b(x,g,_,E){if(typeof _=="object"&&_!==null&&_.type===Xl&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case zf:e:{for(var S=_.key,O=g;O!==null;){if(O.key===S){if(S=_.type,S===Xl){if(O.tag===7){n(x,O.sibling),g=i(O,_.props.children),g.return=x,x=g;break e}}else if(O.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ga&&ON(S)===O.type){n(x,O.sibling),g=i(O,_.props),g.ref=Gu(x,O,_),g.return=x,x=g;break e}n(x,O);break}else e(x,O);O=O.sibling}_.type===Xl?(g=zo(_.props.children,x.mode,E,_.key),g.return=x,x=g):(E=Om(_.type,_.key,_.props,null,x.mode,E),E.ref=Gu(x,g,_),E.return=x,x=E)}return o(x);case Ql:e:{for(O=_.key;g!==null;){if(g.key===O)if(g.tag===4&&g.stateNode.containerInfo===_.containerInfo&&g.stateNode.implementation===_.implementation){n(x,g.sibling),g=i(g,_.children||[]),g.return=x,x=g;break e}else{n(x,g);break}else e(x,g);g=g.sibling}g=Ox(_,x.mode,E),g.return=x,x=g}return o(x);case ga:return O=_._init,b(x,g,O(_._payload),E)}if(sd(_))return y(x,g,_,E);if(zu(_))return w(x,g,_,E);Jf(x,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,g!==null&&g.tag===6?(n(x,g.sibling),g=i(g,_),g.return=x,x=g):(n(x,g),g=Dx(_,x.mode,E),g.return=x,x=g),o(x)):n(x,g)}return b}var Ac=IT(!0),PT=IT(!1),gp=ho(null),vp=null,ic=null,t1=null;function n1(){t1=ic=vp=null}function r1(t){var e=gp.current;Vt(gp),t._currentValue=e}function s0(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function pc(t,e){vp=t,t1=ic=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(br=!0),t.firstContext=null)}function as(t){var e=t._currentValue;if(t1!==t)if(t={context:t,memoizedValue:e,next:null},ic===null){if(vp===null)throw Error(se(308));ic=t,vp.dependencies={lanes:0,firstContext:t}}else ic=ic.next=t;return e}var Oo=null;function s1(t){Oo===null?Oo=[t]:Oo.push(t)}function AT(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,s1(e)):(n.next=i.next,i.next=n),e.interleaved=n,Fi(t,r)}function Fi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var va=!1;function i1(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function RT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Mi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function La(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ct&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Fi(t,n)}return i=r.interleaved,i===null?(e.next=e,s1(r)):(e.next=i.next,i.next=e),r.interleaved=e,Fi(t,n)}function Im(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,qw(t,n)}}function LN(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=e:a=a.next=e}else i=a=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function xp(t,e,n,r){var i=t.updateQueue;va=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?a=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(a!==null){var f=i.baseState;o=0,d=u=c=null,l=a;do{var m=l.lane,v=l.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=t,w=l;switch(m=e,v=n,w.tag){case 1:if(y=w.payload,typeof y=="function"){f=y.call(v,f,m);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=w.payload,m=typeof y=="function"?y.call(v,f,m):y,m==null)break e;f=Kt({},f,m);break e;case 2:va=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[l]:m.push(l))}else v={eventTime:v,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=v,c=f):d=d.next=v,o|=m;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;m=l,l=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(d===null&&(c=f),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);nl|=o,t.lanes=o,t.memoizedState=f}}function VN(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(se(191,i));i.call(r)}}}var Fh={},Zs=ho(Fh),Gd=ho(Fh),Kd=ho(Fh);function Lo(t){if(t===Fh)throw Error(se(174));return t}function a1(t,e){switch(Pt(Kd,e),Pt(Gd,t),Pt(Zs,Fh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Vy(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Vy(e,t)}Vt(Zs),Pt(Zs,e)}function Rc(){Vt(Zs),Vt(Gd),Vt(Kd)}function MT(t){Lo(Kd.current);var e=Lo(Zs.current),n=Vy(e,t.type);e!==n&&(Pt(Gd,t),Pt(Zs,n))}function o1(t){Gd.current===t&&(Vt(Zs),Vt(Gd))}var qt=ho(0);function yp(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var kx=[];function l1(){for(var t=0;t<kx.length;t++)kx[t]._workInProgressVersionPrimary=null;kx.length=0}var Pm=ea.ReactCurrentDispatcher,Ix=ea.ReactCurrentBatchConfig,tl=0,Gt=null,bn=null,Tn=null,wp=!1,_d=!1,Yd=0,aL=0;function Bn(){throw Error(se(321))}function c1(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ks(t[n],e[n]))return!1;return!0}function u1(t,e,n,r,i,a){if(tl=a,Gt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Pm.current=t===null||t.memoizedState===null?uL:dL,t=n(r,i),_d){a=0;do{if(_d=!1,Yd=0,25<=a)throw Error(se(301));a+=1,Tn=bn=null,e.updateQueue=null,Pm.current=hL,t=n(r,i)}while(_d)}if(Pm.current=bp,e=bn!==null&&bn.next!==null,tl=0,Tn=bn=Gt=null,wp=!1,e)throw Error(se(300));return t}function d1(){var t=Yd!==0;return Yd=0,t}function Fs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tn===null?Gt.memoizedState=Tn=t:Tn=Tn.next=t,Tn}function os(){if(bn===null){var t=Gt.alternate;t=t!==null?t.memoizedState:null}else t=bn.next;var e=Tn===null?Gt.memoizedState:Tn.next;if(e!==null)Tn=e,bn=t;else{if(t===null)throw Error(se(310));bn=t,t={memoizedState:bn.memoizedState,baseState:bn.baseState,baseQueue:bn.baseQueue,queue:bn.queue,next:null},Tn===null?Gt.memoizedState=Tn=t:Tn=Tn.next=t}return Tn}function Qd(t,e){return typeof e=="function"?e(t):e}function Px(t){var e=os(),n=e.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=t;var r=bn,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((tl&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=r):c=c.next=f,Gt.lanes|=d,nl|=d}u=u.next}while(u!==null&&u!==a);c===null?o=r:c.next=l,ks(r,e.memoizedState)||(br=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do a=i.lane,Gt.lanes|=a,nl|=a,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ax(t){var e=os(),n=e.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);ks(a,e.memoizedState)||(br=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function DT(){}function OT(t,e){var n=Gt,r=os(),i=e(),a=!ks(r.memoizedState,i);if(a&&(r.memoizedState=i,br=!0),r=r.queue,h1(FT.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||Tn!==null&&Tn.memoizedState.tag&1){if(n.flags|=2048,Xd(9,VT.bind(null,n,r,i,e),void 0,null),kn===null)throw Error(se(349));tl&30||LT(n,e,i)}return i}function LT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Gt.updateQueue,e===null?(e={lastEffect:null,stores:null},Gt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function VT(t,e,n,r){e.value=n,e.getSnapshot=r,UT(e)&&$T(t)}function FT(t,e,n){return n(function(){UT(e)&&$T(t)})}function UT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ks(t,n)}catch{return!0}}function $T(t){var e=Fi(t,1);e!==null&&js(e,t,1,-1)}function FN(t){var e=Fs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qd,lastRenderedState:t},e.queue=t,t=t.dispatch=cL.bind(null,Gt,t),[e.memoizedState,t]}function Xd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Gt.updateQueue,e===null?(e={lastEffect:null,stores:null},Gt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function zT(){return os().memoizedState}function Am(t,e,n,r){var i=Fs();Gt.flags|=t,i.memoizedState=Xd(1|e,n,void 0,r===void 0?null:r)}function Dg(t,e,n,r){var i=os();r=r===void 0?null:r;var a=void 0;if(bn!==null){var o=bn.memoizedState;if(a=o.destroy,r!==null&&c1(r,o.deps)){i.memoizedState=Xd(e,n,a,r);return}}Gt.flags|=t,i.memoizedState=Xd(1|e,n,a,r)}function UN(t,e){return Am(8390656,8,t,e)}function h1(t,e){return Dg(2048,8,t,e)}function BT(t,e){return Dg(4,2,t,e)}function qT(t,e){return Dg(4,4,t,e)}function WT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function HT(t,e,n){return n=n!=null?n.concat([t]):null,Dg(4,4,WT.bind(null,e,t),n)}function f1(){}function GT(t,e){var n=os();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&c1(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function KT(t,e){var n=os();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&c1(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function YT(t,e,n){return tl&21?(ks(n,e)||(n=eT(),Gt.lanes|=n,nl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,br=!0),t.memoizedState=n)}function oL(t,e){var n=jt;jt=n!==0&&4>n?n:4,t(!0);var r=Ix.transition;Ix.transition={};try{t(!1),e()}finally{jt=n,Ix.transition=r}}function QT(){return os().memoizedState}function lL(t,e,n){var r=Fa(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},XT(t))ZT(e,n);else if(n=AT(t,e,n,r),n!==null){var i=ur();js(n,t,r,i),JT(n,e,r)}}function cL(t,e,n){var r=Fa(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(XT(t))ZT(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,n);if(i.hasEagerState=!0,i.eagerState=l,ks(l,o)){var c=e.interleaved;c===null?(i.next=i,s1(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=AT(t,e,i,r),n!==null&&(i=ur(),js(n,t,r,i),JT(n,e,r))}}function XT(t){var e=t.alternate;return t===Gt||e!==null&&e===Gt}function ZT(t,e){_d=wp=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function JT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,qw(t,n)}}var bp={readContext:as,useCallback:Bn,useContext:Bn,useEffect:Bn,useImperativeHandle:Bn,useInsertionEffect:Bn,useLayoutEffect:Bn,useMemo:Bn,useReducer:Bn,useRef:Bn,useState:Bn,useDebugValue:Bn,useDeferredValue:Bn,useTransition:Bn,useMutableSource:Bn,useSyncExternalStore:Bn,useId:Bn,unstable_isNewReconciler:!1},uL={readContext:as,useCallback:function(t,e){return Fs().memoizedState=[t,e===void 0?null:e],t},useContext:as,useEffect:UN,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Am(4194308,4,WT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Am(4194308,4,t,e)},useInsertionEffect:function(t,e){return Am(4,2,t,e)},useMemo:function(t,e){var n=Fs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Fs();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=lL.bind(null,Gt,t),[r.memoizedState,t]},useRef:function(t){var e=Fs();return t={current:t},e.memoizedState=t},useState:FN,useDebugValue:f1,useDeferredValue:function(t){return Fs().memoizedState=t},useTransition:function(){var t=FN(!1),e=t[0];return t=oL.bind(null,t[1]),Fs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Gt,i=Fs();if(Ut){if(n===void 0)throw Error(se(407));n=n()}else{if(n=e(),kn===null)throw Error(se(349));tl&30||LT(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,UN(FT.bind(null,r,a,t),[t]),r.flags|=2048,Xd(9,VT.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=Fs(),e=kn.identifierPrefix;if(Ut){var n=ki,r=Ti;n=(r&~(1<<32-bs(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Yd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=aL++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},dL={readContext:as,useCallback:GT,useContext:as,useEffect:h1,useImperativeHandle:HT,useInsertionEffect:BT,useLayoutEffect:qT,useMemo:KT,useReducer:Px,useRef:zT,useState:function(){return Px(Qd)},useDebugValue:f1,useDeferredValue:function(t){var e=os();return YT(e,bn.memoizedState,t)},useTransition:function(){var t=Px(Qd)[0],e=os().memoizedState;return[t,e]},useMutableSource:DT,useSyncExternalStore:OT,useId:QT,unstable_isNewReconciler:!1},hL={readContext:as,useCallback:GT,useContext:as,useEffect:h1,useImperativeHandle:HT,useInsertionEffect:BT,useLayoutEffect:qT,useMemo:KT,useReducer:Ax,useRef:zT,useState:function(){return Ax(Qd)},useDebugValue:f1,useDeferredValue:function(t){var e=os();return bn===null?e.memoizedState=t:YT(e,bn.memoizedState,t)},useTransition:function(){var t=Ax(Qd)[0],e=os().memoizedState;return[t,e]},useMutableSource:DT,useSyncExternalStore:OT,useId:QT,unstable_isNewReconciler:!1};function ms(t,e){if(t&&t.defaultProps){e=Kt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function i0(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Kt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Og={isMounted:function(t){return(t=t._reactInternals)?wl(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ur(),i=Fa(t),a=Mi(r,i);a.payload=e,n!=null&&(a.callback=n),e=La(t,a,i),e!==null&&(js(e,t,i,r),Im(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ur(),i=Fa(t),a=Mi(r,i);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=La(t,a,i),e!==null&&(js(e,t,i,r),Im(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ur(),r=Fa(t),i=Mi(n,r);i.tag=2,e!=null&&(i.callback=e),e=La(t,i,r),e!==null&&(js(e,t,r,n),Im(e,t,r))}};function $N(t,e,n,r,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!Bd(n,r)||!Bd(i,a):!0}function ek(t,e,n){var r=!1,i=Ga,a=e.contextType;return typeof a=="object"&&a!==null?a=as(a):(i=Sr(e)?Jo:Zn.current,r=e.contextTypes,a=(r=r!=null)?Ic(t,i):Ga),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Og,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function zN(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Og.enqueueReplaceState(e,e.state,null)}function a0(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},i1(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=as(a):(a=Sr(e)?Jo:Zn.current,i.context=Ic(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(i0(t,e,a,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Og.enqueueReplaceState(i,i.state,null),xp(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Mc(t,e){try{var n="",r=e;do n+=U5(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function Rx(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function o0(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var fL=typeof WeakMap=="function"?WeakMap:Map;function tk(t,e,n){n=Mi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){_p||(_p=!0,v0=r),o0(t,e)},n}function nk(t,e,n){n=Mi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){o0(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){o0(t,e),typeof r!="function"&&(Va===null?Va=new Set([this]):Va.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function BN(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new fL;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=CL.bind(null,t,e,n),e.then(t,t))}function qN(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function WN(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Mi(-1,1),e.tag=2,La(n,e,1))),n.lanes|=1),t)}var mL=ea.ReactCurrentOwner,br=!1;function sr(t,e,n,r){e.child=t===null?PT(e,null,n,r):Ac(e,t.child,n,r)}function HN(t,e,n,r,i){n=n.render;var a=e.ref;return pc(e,i),r=u1(t,e,n,r,a,i),n=d1(),t!==null&&!br?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ui(t,e,i)):(Ut&&n&&Zw(e),e.flags|=1,sr(t,e,r,i),e.child)}function GN(t,e,n,r,i){if(t===null){var a=n.type;return typeof a=="function"&&!b1(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,rk(t,e,a,r,i)):(t=Om(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:Bd,n(o,r)&&t.ref===e.ref)return Ui(t,e,i)}return e.flags|=1,t=Ua(a,r),t.ref=e.ref,t.return=e,e.child=t}function rk(t,e,n,r,i){if(t!==null){var a=t.memoizedProps;if(Bd(a,r)&&t.ref===e.ref)if(br=!1,e.pendingProps=r=a,(t.lanes&i)!==0)t.flags&131072&&(br=!0);else return e.lanes=t.lanes,Ui(t,e,i)}return l0(t,e,n,r,i)}function sk(t,e,n){var r=e.pendingProps,i=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pt(oc,Rr),Rr|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Pt(oc,Rr),Rr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Pt(oc,Rr),Rr|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,Pt(oc,Rr),Rr|=r;return sr(t,e,i,n),e.child}function ik(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function l0(t,e,n,r,i){var a=Sr(n)?Jo:Zn.current;return a=Ic(e,a),pc(e,i),n=u1(t,e,n,r,a,i),r=d1(),t!==null&&!br?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ui(t,e,i)):(Ut&&r&&Zw(e),e.flags|=1,sr(t,e,n,i),e.child)}function KN(t,e,n,r,i){if(Sr(n)){var a=!0;fp(e)}else a=!1;if(pc(e,i),e.stateNode===null)Rm(t,e),ek(e,n,r),a0(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=as(u):(u=Sr(n)?Jo:Zn.current,u=Ic(e,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&zN(e,o,r,u),va=!1;var m=e.memoizedState;o.state=m,xp(e,r,o,i),c=e.memoizedState,l!==r||m!==c||Nr.current||va?(typeof d=="function"&&(i0(e,n,d,r),c=e.memoizedState),(l=va||$N(e,n,l,r,m,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,RT(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:ms(e.type,l),o.props=u,f=e.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=as(c):(c=Sr(n)?Jo:Zn.current,c=Ic(e,c));var v=n.getDerivedStateFromProps;(d=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||m!==c)&&zN(e,o,r,c),va=!1,m=e.memoizedState,o.state=m,xp(e,r,o,i);var y=e.memoizedState;l!==f||m!==y||Nr.current||va?(typeof v=="function"&&(i0(e,n,v,r),y=e.memoizedState),(u=va||$N(e,n,u,r,m,y,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return c0(t,e,n,r,a,i)}function c0(t,e,n,r,i,a){ik(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&RN(e,n,!1),Ui(t,e,a);r=e.stateNode,mL.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ac(e,t.child,null,a),e.child=Ac(e,null,l,a)):sr(t,e,l,a),e.memoizedState=r.state,i&&RN(e,n,!0),e.child}function ak(t){var e=t.stateNode;e.pendingContext?AN(t,e.pendingContext,e.pendingContext!==e.context):e.context&&AN(t,e.context,!1),a1(t,e.containerInfo)}function YN(t,e,n,r,i){return Pc(),e1(i),e.flags|=256,sr(t,e,n,r),e.child}var u0={dehydrated:null,treeContext:null,retryLane:0};function d0(t){return{baseLanes:t,cachePool:null,transitions:null}}function ok(t,e,n){var r=e.pendingProps,i=qt.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Pt(qt,i&1),t===null)return r0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Fg(o,r,0,null),t=zo(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=d0(n),e.memoizedState=u0,t):m1(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return pL(t,e,o,r,l,i,n);if(a){a=r.fallback,o=e.mode,i=t.child,l=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Ua(i,c),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?a=Ua(l,a):(a=zo(a,o,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=t.child.memoizedState,o=o===null?d0(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=u0,r}return a=t.child,t=a.sibling,r=Ua(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function m1(t,e){return e=Fg({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function em(t,e,n,r){return r!==null&&e1(r),Ac(e,t.child,null,n),t=m1(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function pL(t,e,n,r,i,a,o){if(n)return e.flags&256?(e.flags&=-257,r=Rx(Error(se(422))),em(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=Fg({mode:"visible",children:r.children},i,0,null),a=zo(a,i,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&Ac(e,t.child,null,o),e.child.memoizedState=d0(o),e.memoizedState=u0,a);if(!(e.mode&1))return em(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,a=Error(se(419)),r=Rx(a,r,void 0),em(t,e,o,r)}if(l=(o&t.childLanes)!==0,br||l){if(r=kn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Fi(t,i),js(r,t,i,-1))}return w1(),r=Rx(Error(se(421))),em(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=TL.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,Dr=Oa(i.nextSibling),Vr=e,Ut=!0,vs=null,t!==null&&(Qr[Xr++]=Ti,Qr[Xr++]=ki,Qr[Xr++]=el,Ti=t.id,ki=t.overflow,el=e),e=m1(e,r.children),e.flags|=4096,e)}function QN(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),s0(t.return,e,n)}function Mx(t,e,n,r,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function lk(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(sr(t,e,r.children,n),r=qt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&QN(t,n,e);else if(t.tag===19)QN(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Pt(qt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&yp(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Mx(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&yp(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Mx(e,!0,n,null,a);break;case"together":Mx(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Rm(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ui(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),nl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(se(153));if(e.child!==null){for(t=e.child,n=Ua(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ua(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function gL(t,e,n){switch(e.tag){case 3:ak(e),Pc();break;case 5:MT(e);break;case 1:Sr(e.type)&&fp(e);break;case 4:a1(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Pt(gp,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Pt(qt,qt.current&1),e.flags|=128,null):n&e.child.childLanes?ok(t,e,n):(Pt(qt,qt.current&1),t=Ui(t,e,n),t!==null?t.sibling:null);Pt(qt,qt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return lk(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Pt(qt,qt.current),r)break;return null;case 22:case 23:return e.lanes=0,sk(t,e,n)}return Ui(t,e,n)}var ck,h0,uk,dk;ck=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};h0=function(){};uk=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Lo(Zs.current);var a=null;switch(n){case"input":i=My(t,i),r=My(t,r),a=[];break;case"select":i=Kt({},i,{value:void 0}),r=Kt({},r,{value:void 0}),a=[];break;case"textarea":i=Ly(t,i),r=Ly(t,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=dp)}Fy(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Od.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Od.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Dt("scroll",t),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};dk=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ku(t,e){if(!Ut)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function qn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function vL(t,e,n){var r=e.pendingProps;switch(Jw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qn(e),null;case 1:return Sr(e.type)&&hp(),qn(e),null;case 3:return r=e.stateNode,Rc(),Vt(Nr),Vt(Zn),l1(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Zf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,vs!==null&&(w0(vs),vs=null))),h0(t,e),qn(e),null;case 5:o1(e);var i=Lo(Kd.current);if(n=e.type,t!==null&&e.stateNode!=null)uk(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(se(166));return qn(e),null}if(t=Lo(Zs.current),Zf(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[Bs]=e,r[Hd]=a,t=(e.mode&1)!==0,n){case"dialog":Dt("cancel",r),Dt("close",r);break;case"iframe":case"object":case"embed":Dt("load",r);break;case"video":case"audio":for(i=0;i<ad.length;i++)Dt(ad[i],r);break;case"source":Dt("error",r);break;case"img":case"image":case"link":Dt("error",r),Dt("load",r);break;case"details":Dt("toggle",r);break;case"input":iN(r,a),Dt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Dt("invalid",r);break;case"textarea":oN(r,a),Dt("invalid",r)}Fy(n,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?r.textContent!==l&&(a.suppressHydrationWarning!==!0&&Xf(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Xf(r.textContent,l,t),i=["children",""+l]):Od.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Dt("scroll",r)}switch(n){case"input":Bf(r),aN(r,a,!0);break;case"textarea":Bf(r),lN(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=dp)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=FC(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Bs]=e,t[Hd]=r,ck(t,e,!1,!1),e.stateNode=t;e:{switch(o=Uy(n,r),n){case"dialog":Dt("cancel",t),Dt("close",t),i=r;break;case"iframe":case"object":case"embed":Dt("load",t),i=r;break;case"video":case"audio":for(i=0;i<ad.length;i++)Dt(ad[i],t);i=r;break;case"source":Dt("error",t),i=r;break;case"img":case"image":case"link":Dt("error",t),Dt("load",t),i=r;break;case"details":Dt("toggle",t),i=r;break;case"input":iN(t,r),i=My(t,r),Dt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Kt({},r,{value:void 0}),Dt("invalid",t);break;case"textarea":oN(t,r),i=Ly(t,r),Dt("invalid",t);break;default:i=r}Fy(n,i),l=i;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?zC(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&UC(t,c)):a==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ld(t,c):typeof c=="number"&&Ld(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Od.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Dt("scroll",t):c!=null&&Vw(t,a,c,o))}switch(n){case"input":Bf(t),aN(t,r,!1);break;case"textarea":Bf(t),lN(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ha(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?dc(t,!!r.multiple,a,!1):r.defaultValue!=null&&dc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=dp)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return qn(e),null;case 6:if(t&&e.stateNode!=null)dk(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(se(166));if(n=Lo(Kd.current),Lo(Zs.current),Zf(e)){if(r=e.stateNode,n=e.memoizedProps,r[Bs]=e,(a=r.nodeValue!==n)&&(t=Vr,t!==null))switch(t.tag){case 3:Xf(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Xf(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Bs]=e,e.stateNode=r}return qn(e),null;case 13:if(Vt(qt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ut&&Dr!==null&&e.mode&1&&!(e.flags&128))kT(),Pc(),e.flags|=98560,a=!1;else if(a=Zf(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(se(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(se(317));a[Bs]=e}else Pc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;qn(e),a=!1}else vs!==null&&(w0(vs),vs=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||qt.current&1?jn===0&&(jn=3):w1())),e.updateQueue!==null&&(e.flags|=4),qn(e),null);case 4:return Rc(),h0(t,e),t===null&&qd(e.stateNode.containerInfo),qn(e),null;case 10:return r1(e.type._context),qn(e),null;case 17:return Sr(e.type)&&hp(),qn(e),null;case 19:if(Vt(qt),a=e.memoizedState,a===null)return qn(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)Ku(a,!1);else{if(jn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=yp(t),o!==null){for(e.flags|=128,Ku(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Pt(qt,qt.current&1|2),e.child}t=t.sibling}a.tail!==null&&sn()>Dc&&(e.flags|=128,r=!0,Ku(a,!1),e.lanes=4194304)}else{if(!r)if(t=yp(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ku(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Ut)return qn(e),null}else 2*sn()-a.renderingStartTime>Dc&&n!==1073741824&&(e.flags|=128,r=!0,Ku(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=sn(),e.sibling=null,n=qt.current,Pt(qt,r?n&1|2:n&1),e):(qn(e),null);case 22:case 23:return y1(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Rr&1073741824&&(qn(e),e.subtreeFlags&6&&(e.flags|=8192)):qn(e),null;case 24:return null;case 25:return null}throw Error(se(156,e.tag))}function xL(t,e){switch(Jw(e),e.tag){case 1:return Sr(e.type)&&hp(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Rc(),Vt(Nr),Vt(Zn),l1(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return o1(e),null;case 13:if(Vt(qt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(se(340));Pc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Vt(qt),null;case 4:return Rc(),null;case 10:return r1(e.type._context),null;case 22:case 23:return y1(),null;case 24:return null;default:return null}}var tm=!1,Gn=!1,yL=typeof WeakSet=="function"?WeakSet:Set,je=null;function ac(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Zt(t,e,r)}else n.current=null}function f0(t,e,n){try{n()}catch(r){Zt(t,e,r)}}var XN=!1;function wL(t,e){if(Qy=lp,t=gT(),Xw(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=t,m=null;t:for(;;){for(var v;f!==n||i!==0&&f.nodeType!==3||(l=o+i),f!==a||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(v=f.firstChild)!==null;)m=f,f=v;for(;;){if(f===t)break t;if(m===n&&++u===i&&(l=o),m===a&&++d===r&&(c=o),(v=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=v}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xy={focusedElem:t,selectionRange:n},lp=!1,je=e;je!==null;)if(e=je,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,je=t;else for(;je!==null;){e=je;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var w=y.memoizedProps,b=y.memoizedState,x=e.stateNode,g=x.getSnapshotBeforeUpdate(e.elementType===e.type?w:ms(e.type,w),b);x.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(se(163))}}catch(E){Zt(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,je=t;break}je=e.return}return y=XN,XN=!1,y}function Nd(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&f0(e,n,a)}i=i.next}while(i!==r)}}function Lg(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function m0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function hk(t){var e=t.alternate;e!==null&&(t.alternate=null,hk(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Bs],delete e[Hd],delete e[e0],delete e[nL],delete e[rL])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function fk(t){return t.tag===5||t.tag===3||t.tag===4}function ZN(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||fk(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function p0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=dp));else if(r!==4&&(t=t.child,t!==null))for(p0(t,e,n),t=t.sibling;t!==null;)p0(t,e,n),t=t.sibling}function g0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(g0(t,e,n),t=t.sibling;t!==null;)g0(t,e,n),t=t.sibling}var Pn=null,ps=!1;function ua(t,e,n){for(n=n.child;n!==null;)mk(t,e,n),n=n.sibling}function mk(t,e,n){if(Xs&&typeof Xs.onCommitFiberUnmount=="function")try{Xs.onCommitFiberUnmount(kg,n)}catch{}switch(n.tag){case 5:Gn||ac(n,e);case 6:var r=Pn,i=ps;Pn=null,ua(t,e,n),Pn=r,ps=i,Pn!==null&&(ps?(t=Pn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Pn.removeChild(n.stateNode));break;case 18:Pn!==null&&(ps?(t=Pn,n=n.stateNode,t.nodeType===8?Cx(t.parentNode,n):t.nodeType===1&&Cx(t,n),$d(t)):Cx(Pn,n.stateNode));break;case 4:r=Pn,i=ps,Pn=n.stateNode.containerInfo,ps=!0,ua(t,e,n),Pn=r,ps=i;break;case 0:case 11:case 14:case 15:if(!Gn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&f0(n,e,o),i=i.next}while(i!==r)}ua(t,e,n);break;case 1:if(!Gn&&(ac(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Zt(n,e,l)}ua(t,e,n);break;case 21:ua(t,e,n);break;case 22:n.mode&1?(Gn=(r=Gn)||n.memoizedState!==null,ua(t,e,n),Gn=r):ua(t,e,n);break;default:ua(t,e,n)}}function JN(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new yL),e.forEach(function(r){var i=kL.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ds(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Pn=l.stateNode,ps=!1;break e;case 3:Pn=l.stateNode.containerInfo,ps=!0;break e;case 4:Pn=l.stateNode.containerInfo,ps=!0;break e}l=l.return}if(Pn===null)throw Error(se(160));mk(a,o,i),Pn=null,ps=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){Zt(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)pk(e,t),e=e.sibling}function pk(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ds(e,t),Vs(t),r&4){try{Nd(3,t,t.return),Lg(3,t)}catch(w){Zt(t,t.return,w)}try{Nd(5,t,t.return)}catch(w){Zt(t,t.return,w)}}break;case 1:ds(e,t),Vs(t),r&512&&n!==null&&ac(n,n.return);break;case 5:if(ds(e,t),Vs(t),r&512&&n!==null&&ac(n,n.return),t.flags&32){var i=t.stateNode;try{Ld(i,"")}catch(w){Zt(t,t.return,w)}}if(r&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&LC(i,a),Uy(l,o);var u=Uy(l,a);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?zC(i,f):d==="dangerouslySetInnerHTML"?UC(i,f):d==="children"?Ld(i,f):Vw(i,d,f,u)}switch(l){case"input":Dy(i,a);break;case"textarea":VC(i,a);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var v=a.value;v!=null?dc(i,!!a.multiple,v,!1):m!==!!a.multiple&&(a.defaultValue!=null?dc(i,!!a.multiple,a.defaultValue,!0):dc(i,!!a.multiple,a.multiple?[]:"",!1))}i[Hd]=a}catch(w){Zt(t,t.return,w)}}break;case 6:if(ds(e,t),Vs(t),r&4){if(t.stateNode===null)throw Error(se(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(w){Zt(t,t.return,w)}}break;case 3:if(ds(e,t),Vs(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{$d(e.containerInfo)}catch(w){Zt(t,t.return,w)}break;case 4:ds(e,t),Vs(t);break;case 13:ds(e,t),Vs(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(v1=sn())),r&4&&JN(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Gn=(u=Gn)||d,ds(e,t),Gn=u):ds(e,t),Vs(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(je=t,d=t.child;d!==null;){for(f=je=d;je!==null;){switch(m=je,v=m.child,m.tag){case 0:case 11:case 14:case 15:Nd(4,m,m.return);break;case 1:ac(m,m.return);var y=m.stateNode;if(typeof y.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(w){Zt(r,n,w)}}break;case 5:ac(m,m.return);break;case 22:if(m.memoizedState!==null){t2(f);continue}}v!==null?(v.return=m,je=v):t2(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=$C("display",o))}catch(w){Zt(t,t.return,w)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(w){Zt(t,t.return,w)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ds(e,t),Vs(t),r&4&&JN(t);break;case 21:break;default:ds(e,t),Vs(t)}}function Vs(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(fk(n)){var r=n;break e}n=n.return}throw Error(se(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ld(i,""),r.flags&=-33);var a=ZN(t);g0(t,a,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=ZN(t);p0(t,l,o);break;default:throw Error(se(161))}}catch(c){Zt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function bL(t,e,n){je=t,gk(t)}function gk(t,e,n){for(var r=(t.mode&1)!==0;je!==null;){var i=je,a=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||tm;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||Gn;l=tm;var u=Gn;if(tm=o,(Gn=c)&&!u)for(je=i;je!==null;)o=je,c=o.child,o.tag===22&&o.memoizedState!==null?n2(i):c!==null?(c.return=o,je=c):n2(i);for(;a!==null;)je=a,gk(a),a=a.sibling;je=i,tm=l,Gn=u}e2(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,je=a):e2(t)}}function e2(t){for(;je!==null;){var e=je;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Gn||Lg(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Gn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:ms(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&VN(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}VN(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&$d(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(se(163))}Gn||e.flags&512&&m0(e)}catch(m){Zt(e,e.return,m)}}if(e===t){je=null;break}if(n=e.sibling,n!==null){n.return=e.return,je=n;break}je=e.return}}function t2(t){for(;je!==null;){var e=je;if(e===t){je=null;break}var n=e.sibling;if(n!==null){n.return=e.return,je=n;break}je=e.return}}function n2(t){for(;je!==null;){var e=je;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Lg(4,e)}catch(c){Zt(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){Zt(e,i,c)}}var a=e.return;try{m0(e)}catch(c){Zt(e,a,c)}break;case 5:var o=e.return;try{m0(e)}catch(c){Zt(e,o,c)}}}catch(c){Zt(e,e.return,c)}if(e===t){je=null;break}var l=e.sibling;if(l!==null){l.return=e.return,je=l;break}je=e.return}}var jL=Math.ceil,jp=ea.ReactCurrentDispatcher,p1=ea.ReactCurrentOwner,ts=ea.ReactCurrentBatchConfig,ct=0,kn=null,un=null,On=0,Rr=0,oc=ho(0),jn=0,Zd=null,nl=0,Vg=0,g1=0,Sd=null,yr=null,v1=0,Dc=1/0,Si=null,_p=!1,v0=null,Va=null,nm=!1,ka=null,Np=0,Ed=0,x0=null,Mm=-1,Dm=0;function ur(){return ct&6?sn():Mm!==-1?Mm:Mm=sn()}function Fa(t){return t.mode&1?ct&2&&On!==0?On&-On:iL.transition!==null?(Dm===0&&(Dm=eT()),Dm):(t=jt,t!==0||(t=window.event,t=t===void 0?16:oT(t.type)),t):1}function js(t,e,n,r){if(50<Ed)throw Ed=0,x0=null,Error(se(185));Oh(t,n,r),(!(ct&2)||t!==kn)&&(t===kn&&(!(ct&2)&&(Vg|=n),jn===4&&wa(t,On)),Er(t,r),n===1&&ct===0&&!(e.mode&1)&&(Dc=sn()+500,Mg&&fo()))}function Er(t,e){var n=t.callbackNode;i6(t,e);var r=op(t,t===kn?On:0);if(r===0)n!==null&&dN(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&dN(n),e===1)t.tag===0?sL(r2.bind(null,t)):ET(r2.bind(null,t)),eL(function(){!(ct&6)&&fo()}),n=null;else{switch(tT(r)){case 1:n=Bw;break;case 4:n=ZC;break;case 16:n=ap;break;case 536870912:n=JC;break;default:n=ap}n=Nk(n,vk.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function vk(t,e){if(Mm=-1,Dm=0,ct&6)throw Error(se(327));var n=t.callbackNode;if(gc()&&t.callbackNode!==n)return null;var r=op(t,t===kn?On:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Sp(t,r);else{e=r;var i=ct;ct|=2;var a=yk();(kn!==t||On!==e)&&(Si=null,Dc=sn()+500,$o(t,e));do try{SL();break}catch(l){xk(t,l)}while(!0);n1(),jp.current=a,ct=i,un!==null?e=0:(kn=null,On=0,e=jn)}if(e!==0){if(e===2&&(i=Wy(t),i!==0&&(r=i,e=y0(t,i))),e===1)throw n=Zd,$o(t,0),wa(t,r),Er(t,sn()),n;if(e===6)wa(t,r);else{if(i=t.current.alternate,!(r&30)&&!_L(i)&&(e=Sp(t,r),e===2&&(a=Wy(t),a!==0&&(r=a,e=y0(t,a))),e===1))throw n=Zd,$o(t,0),wa(t,r),Er(t,sn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(se(345));case 2:Ao(t,yr,Si);break;case 3:if(wa(t,r),(r&130023424)===r&&(e=v1+500-sn(),10<e)){if(op(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ur(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Jy(Ao.bind(null,t,yr,Si),e);break}Ao(t,yr,Si);break;case 4:if(wa(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-bs(r);a=1<<o,o=e[o],o>i&&(i=o),r&=~a}if(r=i,r=sn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*jL(r/1960))-r,10<r){t.timeoutHandle=Jy(Ao.bind(null,t,yr,Si),r);break}Ao(t,yr,Si);break;case 5:Ao(t,yr,Si);break;default:throw Error(se(329))}}}return Er(t,sn()),t.callbackNode===n?vk.bind(null,t):null}function y0(t,e){var n=Sd;return t.current.memoizedState.isDehydrated&&($o(t,e).flags|=256),t=Sp(t,e),t!==2&&(e=yr,yr=n,e!==null&&w0(e)),t}function w0(t){yr===null?yr=t:yr.push.apply(yr,t)}function _L(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ks(a(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function wa(t,e){for(e&=~g1,e&=~Vg,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-bs(e),r=1<<n;t[n]=-1,e&=~r}}function r2(t){if(ct&6)throw Error(se(327));gc();var e=op(t,0);if(!(e&1))return Er(t,sn()),null;var n=Sp(t,e);if(t.tag!==0&&n===2){var r=Wy(t);r!==0&&(e=r,n=y0(t,r))}if(n===1)throw n=Zd,$o(t,0),wa(t,e),Er(t,sn()),n;if(n===6)throw Error(se(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ao(t,yr,Si),Er(t,sn()),null}function x1(t,e){var n=ct;ct|=1;try{return t(e)}finally{ct=n,ct===0&&(Dc=sn()+500,Mg&&fo())}}function rl(t){ka!==null&&ka.tag===0&&!(ct&6)&&gc();var e=ct;ct|=1;var n=ts.transition,r=jt;try{if(ts.transition=null,jt=1,t)return t()}finally{jt=r,ts.transition=n,ct=e,!(ct&6)&&fo()}}function y1(){Rr=oc.current,Vt(oc)}function $o(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,J6(n)),un!==null)for(n=un.return;n!==null;){var r=n;switch(Jw(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&hp();break;case 3:Rc(),Vt(Nr),Vt(Zn),l1();break;case 5:o1(r);break;case 4:Rc();break;case 13:Vt(qt);break;case 19:Vt(qt);break;case 10:r1(r.type._context);break;case 22:case 23:y1()}n=n.return}if(kn=t,un=t=Ua(t.current,null),On=Rr=e,jn=0,Zd=null,g1=Vg=nl=0,yr=Sd=null,Oo!==null){for(e=0;e<Oo.length;e++)if(n=Oo[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=i,r.next=o}n.pending=r}Oo=null}return t}function xk(t,e){do{var n=un;try{if(n1(),Pm.current=bp,wp){for(var r=Gt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}wp=!1}if(tl=0,Tn=bn=Gt=null,_d=!1,Yd=0,p1.current=null,n===null||n.return===null){jn=1,Zd=e,un=null;break}e:{var a=t,o=n.return,l=n,c=e;if(e=On,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var v=qN(o);if(v!==null){v.flags&=-257,WN(v,o,l,a,e),v.mode&1&&BN(a,u,e),e=v,c=u;var y=e.updateQueue;if(y===null){var w=new Set;w.add(c),e.updateQueue=w}else y.add(c);break e}else{if(!(e&1)){BN(a,u,e),w1();break e}c=Error(se(426))}}else if(Ut&&l.mode&1){var b=qN(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),WN(b,o,l,a,e),e1(Mc(c,l));break e}}a=c=Mc(c,l),jn!==4&&(jn=2),Sd===null?Sd=[a]:Sd.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var x=tk(a,c,e);LN(a,x);break e;case 1:l=c;var g=a.type,_=a.stateNode;if(!(a.flags&128)&&(typeof g.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Va===null||!Va.has(_)))){a.flags|=65536,e&=-e,a.lanes|=e;var E=nk(a,l,e);LN(a,E);break e}}a=a.return}while(a!==null)}bk(n)}catch(S){e=S,un===n&&n!==null&&(un=n=n.return);continue}break}while(!0)}function yk(){var t=jp.current;return jp.current=bp,t===null?bp:t}function w1(){(jn===0||jn===3||jn===2)&&(jn=4),kn===null||!(nl&268435455)&&!(Vg&268435455)||wa(kn,On)}function Sp(t,e){var n=ct;ct|=2;var r=yk();(kn!==t||On!==e)&&(Si=null,$o(t,e));do try{NL();break}catch(i){xk(t,i)}while(!0);if(n1(),ct=n,jp.current=r,un!==null)throw Error(se(261));return kn=null,On=0,jn}function NL(){for(;un!==null;)wk(un)}function SL(){for(;un!==null&&!Q5();)wk(un)}function wk(t){var e=_k(t.alternate,t,Rr);t.memoizedProps=t.pendingProps,e===null?bk(t):un=e,p1.current=null}function bk(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=xL(n,e),n!==null){n.flags&=32767,un=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{jn=6,un=null;return}}else if(n=vL(n,e,Rr),n!==null){un=n;return}if(e=e.sibling,e!==null){un=e;return}un=e=t}while(e!==null);jn===0&&(jn=5)}function Ao(t,e,n){var r=jt,i=ts.transition;try{ts.transition=null,jt=1,EL(t,e,n,r)}finally{ts.transition=i,jt=r}return null}function EL(t,e,n,r){do gc();while(ka!==null);if(ct&6)throw Error(se(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(se(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(a6(t,a),t===kn&&(un=kn=null,On=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||nm||(nm=!0,Nk(ap,function(){return gc(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=ts.transition,ts.transition=null;var o=jt;jt=1;var l=ct;ct|=4,p1.current=null,wL(t,n),pk(n,t),H6(Xy),lp=!!Qy,Xy=Qy=null,t.current=n,bL(n),X5(),ct=l,jt=o,ts.transition=a}else t.current=n;if(nm&&(nm=!1,ka=t,Np=i),a=t.pendingLanes,a===0&&(Va=null),e6(n.stateNode),Er(t,sn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(_p)throw _p=!1,t=v0,v0=null,t;return Np&1&&t.tag!==0&&gc(),a=t.pendingLanes,a&1?t===x0?Ed++:(Ed=0,x0=t):Ed=0,fo(),null}function gc(){if(ka!==null){var t=tT(Np),e=ts.transition,n=jt;try{if(ts.transition=null,jt=16>t?16:t,ka===null)var r=!1;else{if(t=ka,ka=null,Np=0,ct&6)throw Error(se(331));var i=ct;for(ct|=4,je=t.current;je!==null;){var a=je,o=a.child;if(je.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(je=u;je!==null;){var d=je;switch(d.tag){case 0:case 11:case 15:Nd(8,d,a)}var f=d.child;if(f!==null)f.return=d,je=f;else for(;je!==null;){d=je;var m=d.sibling,v=d.return;if(hk(d),d===u){je=null;break}if(m!==null){m.return=v,je=m;break}je=v}}}var y=a.alternate;if(y!==null){var w=y.child;if(w!==null){y.child=null;do{var b=w.sibling;w.sibling=null,w=b}while(w!==null)}}je=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,je=o;else e:for(;je!==null;){if(a=je,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Nd(9,a,a.return)}var x=a.sibling;if(x!==null){x.return=a.return,je=x;break e}je=a.return}}var g=t.current;for(je=g;je!==null;){o=je;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,je=_;else e:for(o=g;je!==null;){if(l=je,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Lg(9,l)}}catch(S){Zt(l,l.return,S)}if(l===o){je=null;break e}var E=l.sibling;if(E!==null){E.return=l.return,je=E;break e}je=l.return}}if(ct=i,fo(),Xs&&typeof Xs.onPostCommitFiberRoot=="function")try{Xs.onPostCommitFiberRoot(kg,t)}catch{}r=!0}return r}finally{jt=n,ts.transition=e}}return!1}function s2(t,e,n){e=Mc(n,e),e=tk(t,e,1),t=La(t,e,1),e=ur(),t!==null&&(Oh(t,1,e),Er(t,e))}function Zt(t,e,n){if(t.tag===3)s2(t,t,n);else for(;e!==null;){if(e.tag===3){s2(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Va===null||!Va.has(r))){t=Mc(n,t),t=nk(e,t,1),e=La(e,t,1),t=ur(),e!==null&&(Oh(e,1,t),Er(e,t));break}}e=e.return}}function CL(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ur(),t.pingedLanes|=t.suspendedLanes&n,kn===t&&(On&n)===n&&(jn===4||jn===3&&(On&130023424)===On&&500>sn()-v1?$o(t,0):g1|=n),Er(t,e)}function jk(t,e){e===0&&(t.mode&1?(e=Hf,Hf<<=1,!(Hf&130023424)&&(Hf=4194304)):e=1);var n=ur();t=Fi(t,e),t!==null&&(Oh(t,e,n),Er(t,n))}function TL(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),jk(t,n)}function kL(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(se(314))}r!==null&&r.delete(e),jk(t,n)}var _k;_k=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Nr.current)br=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return br=!1,gL(t,e,n);br=!!(t.flags&131072)}else br=!1,Ut&&e.flags&1048576&&CT(e,pp,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Rm(t,e),t=e.pendingProps;var i=Ic(e,Zn.current);pc(e,n),i=u1(null,e,r,t,i,n);var a=d1();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Sr(r)?(a=!0,fp(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i1(e),i.updater=Og,e.stateNode=i,i._reactInternals=e,a0(e,r,t,n),e=c0(null,e,r,!0,a,n)):(e.tag=0,Ut&&a&&Zw(e),sr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Rm(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=PL(r),t=ms(r,t),i){case 0:e=l0(null,e,r,t,n);break e;case 1:e=KN(null,e,r,t,n);break e;case 11:e=HN(null,e,r,t,n);break e;case 14:e=GN(null,e,r,ms(r.type,t),n);break e}throw Error(se(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ms(r,i),l0(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ms(r,i),KN(t,e,r,i,n);case 3:e:{if(ak(e),t===null)throw Error(se(387));r=e.pendingProps,a=e.memoizedState,i=a.element,RT(t,e),xp(e,r,null,n);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=Mc(Error(se(423)),e),e=YN(t,e,r,n,i);break e}else if(r!==i){i=Mc(Error(se(424)),e),e=YN(t,e,r,n,i);break e}else for(Dr=Oa(e.stateNode.containerInfo.firstChild),Vr=e,Ut=!0,vs=null,n=PT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Pc(),r===i){e=Ui(t,e,n);break e}sr(t,e,r,n)}e=e.child}return e;case 5:return MT(e),t===null&&r0(e),r=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,Zy(r,i)?o=null:a!==null&&Zy(r,a)&&(e.flags|=32),ik(t,e),sr(t,e,o,n),e.child;case 6:return t===null&&r0(e),null;case 13:return ok(t,e,n);case 4:return a1(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ac(e,null,r,n):sr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ms(r,i),HN(t,e,r,i,n);case 7:return sr(t,e,e.pendingProps,n),e.child;case 8:return sr(t,e,e.pendingProps.children,n),e.child;case 12:return sr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,Pt(gp,r._currentValue),r._currentValue=o,a!==null)if(ks(a.value,o)){if(a.children===i.children&&!Nr.current){e=Ui(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(a.tag===1){c=Mi(-1,n&-n),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),s0(a.return,n,e),l.lanes|=n;break}c=c.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(se(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),s0(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}sr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,pc(e,n),i=as(i),r=r(i),e.flags|=1,sr(t,e,r,n),e.child;case 14:return r=e.type,i=ms(r,e.pendingProps),i=ms(r.type,i),GN(t,e,r,i,n);case 15:return rk(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ms(r,i),Rm(t,e),e.tag=1,Sr(r)?(t=!0,fp(e)):t=!1,pc(e,n),ek(e,r,i),a0(e,r,i,n),c0(null,e,r,!0,t,n);case 19:return lk(t,e,n);case 22:return sk(t,e,n)}throw Error(se(156,e.tag))};function Nk(t,e){return XC(t,e)}function IL(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jr(t,e,n,r){return new IL(t,e,n,r)}function b1(t){return t=t.prototype,!(!t||!t.isReactComponent)}function PL(t){if(typeof t=="function")return b1(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Uw)return 11;if(t===$w)return 14}return 2}function Ua(t,e){var n=t.alternate;return n===null?(n=Jr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Om(t,e,n,r,i,a){var o=2;if(r=t,typeof t=="function")b1(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Xl:return zo(n.children,i,a,e);case Fw:o=8,i|=8;break;case Iy:return t=Jr(12,n,e,i|2),t.elementType=Iy,t.lanes=a,t;case Py:return t=Jr(13,n,e,i),t.elementType=Py,t.lanes=a,t;case Ay:return t=Jr(19,n,e,i),t.elementType=Ay,t.lanes=a,t;case MC:return Fg(n,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case AC:o=10;break e;case RC:o=9;break e;case Uw:o=11;break e;case $w:o=14;break e;case ga:o=16,r=null;break e}throw Error(se(130,t==null?t:typeof t,""))}return e=Jr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=a,e}function zo(t,e,n,r){return t=Jr(7,t,r,e),t.lanes=n,t}function Fg(t,e,n,r){return t=Jr(22,t,r,e),t.elementType=MC,t.lanes=n,t.stateNode={isHidden:!1},t}function Dx(t,e,n){return t=Jr(6,t,null,e),t.lanes=n,t}function Ox(t,e,n){return e=Jr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function AL(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gx(0),this.expirationTimes=gx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gx(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function j1(t,e,n,r,i,a,o,l,c){return t=new AL(t,e,n,l,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Jr(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},i1(a),t}function RL(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ql,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Sk(t){if(!t)return Ga;t=t._reactInternals;e:{if(wl(t)!==t||t.tag!==1)throw Error(se(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Sr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(se(171))}if(t.tag===1){var n=t.type;if(Sr(n))return ST(t,n,e)}return e}function Ek(t,e,n,r,i,a,o,l,c){return t=j1(n,r,!0,t,i,a,o,l,c),t.context=Sk(null),n=t.current,r=ur(),i=Fa(n),a=Mi(r,i),a.callback=e??null,La(n,a,i),t.current.lanes=i,Oh(t,i,r),Er(t,r),t}function Ug(t,e,n,r){var i=e.current,a=ur(),o=Fa(i);return n=Sk(n),e.context===null?e.context=n:e.pendingContext=n,e=Mi(a,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=La(i,e,o),t!==null&&(js(t,i,o,a),Im(t,i,o)),o}function Ep(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function i2(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function _1(t,e){i2(t,e),(t=t.alternate)&&i2(t,e)}function ML(){return null}var Ck=typeof reportError=="function"?reportError:function(t){console.error(t)};function N1(t){this._internalRoot=t}$g.prototype.render=N1.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(se(409));Ug(t,e,null,null)};$g.prototype.unmount=N1.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;rl(function(){Ug(null,t,null,null)}),e[Vi]=null}};function $g(t){this._internalRoot=t}$g.prototype.unstable_scheduleHydration=function(t){if(t){var e=sT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ya.length&&e!==0&&e<ya[n].priority;n++);ya.splice(n,0,t),n===0&&aT(t)}};function S1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function zg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function a2(){}function DL(t,e,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var u=Ep(o);a.call(u)}}var o=Ek(e,r,t,0,null,!1,!1,"",a2);return t._reactRootContainer=o,t[Vi]=o.current,qd(t.nodeType===8?t.parentNode:t),rl(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=Ep(c);l.call(u)}}var c=j1(t,0,!1,null,null,!1,!1,"",a2);return t._reactRootContainer=c,t[Vi]=c.current,qd(t.nodeType===8?t.parentNode:t),rl(function(){Ug(e,c,n,r)}),c}function Bg(t,e,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var l=i;i=function(){var c=Ep(o);l.call(c)}}Ug(e,o,t,i)}else o=DL(n,e,t,i,r);return Ep(o)}nT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=id(e.pendingLanes);n!==0&&(qw(e,n|1),Er(e,sn()),!(ct&6)&&(Dc=sn()+500,fo()))}break;case 13:rl(function(){var r=Fi(t,1);if(r!==null){var i=ur();js(r,t,1,i)}}),_1(t,1)}};Ww=function(t){if(t.tag===13){var e=Fi(t,134217728);if(e!==null){var n=ur();js(e,t,134217728,n)}_1(t,134217728)}};rT=function(t){if(t.tag===13){var e=Fa(t),n=Fi(t,e);if(n!==null){var r=ur();js(n,t,e,r)}_1(t,e)}};sT=function(){return jt};iT=function(t,e){var n=jt;try{return jt=t,e()}finally{jt=n}};zy=function(t,e,n){switch(e){case"input":if(Dy(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Rg(r);if(!i)throw Error(se(90));OC(r),Dy(r,i)}}}break;case"textarea":VC(t,n);break;case"select":e=n.value,e!=null&&dc(t,!!n.multiple,e,!1)}};WC=x1;HC=rl;var OL={usingClientEntryPoint:!1,Events:[Vh,tc,Rg,BC,qC,x1]},Yu={findFiberByHostInstance:Do,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},LL={bundleType:Yu.bundleType,version:Yu.version,rendererPackageName:Yu.rendererPackageName,rendererConfig:Yu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ea.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=YC(t),t===null?null:t.stateNode},findFiberByHostInstance:Yu.findFiberByHostInstance||ML,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rm.isDisabled&&rm.supportsFiber)try{kg=rm.inject(LL),Xs=rm}catch{}}qr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OL;qr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!S1(e))throw Error(se(200));return RL(t,e,null,n)};qr.createRoot=function(t,e){if(!S1(t))throw Error(se(299));var n=!1,r="",i=Ck;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=j1(t,1,!1,null,null,n,!1,r,i),t[Vi]=e.current,qd(t.nodeType===8?t.parentNode:t),new N1(e)};qr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(se(188)):(t=Object.keys(t).join(","),Error(se(268,t)));return t=YC(e),t=t===null?null:t.stateNode,t};qr.flushSync=function(t){return rl(t)};qr.hydrate=function(t,e,n){if(!zg(e))throw Error(se(200));return Bg(null,t,e,!0,n)};qr.hydrateRoot=function(t,e,n){if(!S1(t))throw Error(se(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",o=Ck;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Ek(e,null,t,1,n??null,i,!1,a,o),t[Vi]=e.current,qd(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new $g(e)};qr.render=function(t,e,n){if(!zg(e))throw Error(se(200));return Bg(null,t,e,!1,n)};qr.unmountComponentAtNode=function(t){if(!zg(t))throw Error(se(40));return t._reactRootContainer?(rl(function(){Bg(null,null,t,!1,function(){t._reactRootContainer=null,t[Vi]=null})}),!0):!1};qr.unstable_batchedUpdates=x1;qr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!zg(n))throw Error(se(200));if(t==null||t._reactInternals===void 0)throw Error(se(38));return Bg(t,e,n,!1,r)};qr.version="18.3.1-next-f1338f8080-20240426";function Tk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Tk)}catch(t){console.error(t)}}Tk(),TC.exports=qr;var cu=TC.exports;const VL=Cg(cu);var kk,o2=cu;kk=o2.createRoot,o2.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jd(){return Jd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jd.apply(this,arguments)}var Ia;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ia||(Ia={}));const l2="popstate";function FL(t){t===void 0&&(t={});function e(i,a){let{pathname:o="/",search:l="",hash:c=""}=bl(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),b0("",{pathname:o,search:l,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){let o=i.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let c=i.location.href,u=c.indexOf("#");l=u===-1?c:c.slice(0,u)}return l+"#"+(typeof a=="string"?a:Cp(a))}function r(i,a){E1(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return $L(e,n,r,t)}function on(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function E1(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function UL(){return Math.random().toString(36).substr(2,8)}function c2(t,e){return{usr:t.state,key:t.key,idx:e}}function b0(t,e,n,r){return n===void 0&&(n=null),Jd({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?bl(e):e,{state:n,key:e&&e.key||r||UL()})}function Cp(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function bl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function $L(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,l=Ia.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(Jd({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function f(){l=Ia.Pop;let b=d(),x=b==null?null:b-u;u=b,c&&c({action:l,location:w.location,delta:x})}function m(b,x){l=Ia.Push;let g=b0(w.location,b,x);n&&n(g,b),u=d()+1;let _=c2(g,u),E=w.createHref(g);try{o.pushState(_,"",E)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(E)}a&&c&&c({action:l,location:w.location,delta:1})}function v(b,x){l=Ia.Replace;let g=b0(w.location,b,x);n&&n(g,b),u=d();let _=c2(g,u),E=w.createHref(g);o.replaceState(_,"",E),a&&c&&c({action:l,location:w.location,delta:0})}function y(b){let x=i.location.origin!=="null"?i.location.origin:i.location.href,g=typeof b=="string"?b:Cp(b);return g=g.replace(/ $/,"%20"),on(x,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,x)}let w={get action(){return l},get location(){return t(i,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(l2,f),c=b,()=>{i.removeEventListener(l2,f),c=null}},createHref(b){return e(i,b)},createURL:y,encodeLocation(b){let x=y(b);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:m,replace:v,go(b){return o.go(b)}};return w}var u2;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(u2||(u2={}));function zL(t,e,n){return n===void 0&&(n="/"),BL(t,e,n,!1)}function BL(t,e,n,r){let i=typeof e=="string"?bl(e):e,a=C1(i.pathname||"/",n);if(a==null)return null;let o=Ik(t);qL(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=tV(a);l=JL(o[c],u,r)}return l}function Ik(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(a,o,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(on(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=$a([r,c.relativePath]),d=n.concat(c);a.children&&a.children.length>0&&(on(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Ik(a.children,e,d,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:XL(u,a.index),routesMeta:d})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))i(a,o);else for(let c of Pk(a.path))i(a,o,c)}),e}function Pk(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=Pk(r.join("/")),l=[];return l.push(...o.map(c=>c===""?a:[a,c].join("/"))),i&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function qL(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:ZL(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const WL=/^:[\w-]+$/,HL=3,GL=2,KL=1,YL=10,QL=-2,d2=t=>t==="*";function XL(t,e){let n=t.split("/"),r=n.length;return n.some(d2)&&(r+=QL),e&&(r+=GL),n.filter(i=>!d2(i)).reduce((i,a)=>i+(WL.test(a)?HL:a===""?KL:YL),r)}function ZL(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function JL(t,e,n){let{routesMeta:r}=t,i={},a="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=a==="/"?e:e.slice(a.length)||"/",f=h2({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=h2({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:$a([a,f.pathname]),pathnameBase:iV($a([a,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(a=$a([a,f.pathnameBase]))}return o}function h2(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=eV(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((u,d,f)=>{let{paramName:m,isOptional:v}=d;if(m==="*"){let w=l[f]||"";o=a.slice(0,a.length-w.length).replace(/(.)\/+$/,"$1")}const y=l[f];return v&&!y?u[m]=void 0:u[m]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:o,pattern:t}}function eV(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),E1(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function tV(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return E1(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function C1(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function nV(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?bl(t):t;return{pathname:n?n.startsWith("/")?n:rV(n,e):e,search:aV(r),hash:oV(i)}}function rV(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Lx(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function sV(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function T1(t,e){let n=sV(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function k1(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=bl(t):(i=Jd({},t),on(!i.pathname||!i.pathname.includes("?"),Lx("?","pathname","search",i)),on(!i.pathname||!i.pathname.includes("#"),Lx("#","pathname","hash",i)),on(!i.search||!i.search.includes("#"),Lx("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,l;if(o==null)l=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;i.pathname=m.join("/")}l=f>=0?e[f]:"/"}let c=nV(i,l),u=o&&o!=="/"&&o.endsWith("/"),d=(a||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const $a=t=>t.join("/").replace(/\/\/+/g,"/"),iV=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),aV=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,oV=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function lV(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Ak=["post","put","patch","delete"];new Set(Ak);const cV=["get",...Ak];new Set(cV);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function eh(){return eh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eh.apply(this,arguments)}const I1=p.createContext(null),uV=p.createContext(null),mo=p.createContext(null),qg=p.createContext(null),ta=p.createContext({outlet:null,matches:[],isDataRoute:!1}),Rk=p.createContext(null);function dV(t,e){let{relative:n}=e===void 0?{}:e;uu()||on(!1);let{basename:r,navigator:i}=p.useContext(mo),{hash:a,pathname:o,search:l}=Dk(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:$a([r,o])),i.createHref({pathname:c,search:l,hash:a})}function uu(){return p.useContext(qg)!=null}function na(){return uu()||on(!1),p.useContext(qg).location}function Mk(t){p.useContext(mo).static||p.useLayoutEffect(t)}function En(){let{isDataRoute:t}=p.useContext(ta);return t?NV():hV()}function hV(){uu()||on(!1);let t=p.useContext(I1),{basename:e,future:n,navigator:r}=p.useContext(mo),{matches:i}=p.useContext(ta),{pathname:a}=na(),o=JSON.stringify(T1(i,n.v7_relativeSplatPath)),l=p.useRef(!1);return Mk(()=>{l.current=!0}),p.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let f=k1(u,JSON.parse(o),a,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:$a([e,f.pathname])),(d.replace?r.replace:r.push)(f,d.state,d)},[e,r,o,a,t])}function P1(){let{matches:t}=p.useContext(ta),e=t[t.length-1];return e?e.params:{}}function Dk(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=p.useContext(mo),{matches:i}=p.useContext(ta),{pathname:a}=na(),o=JSON.stringify(T1(i,r.v7_relativeSplatPath));return p.useMemo(()=>k1(t,JSON.parse(o),a,n==="path"),[t,o,a,n])}function fV(t,e){return mV(t,e)}function mV(t,e,n,r){uu()||on(!1);let{navigator:i}=p.useContext(mo),{matches:a}=p.useContext(ta),o=a[a.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=na(),d;if(e){var f;let b=typeof e=="string"?bl(e):e;c==="/"||(f=b.pathname)!=null&&f.startsWith(c)||on(!1),d=b}else d=u;let m=d.pathname||"/",v=m;if(c!=="/"){let b=c.replace(/^\//,"").split("/");v="/"+m.replace(/^\//,"").split("/").slice(b.length).join("/")}let y=zL(t,{pathname:v}),w=yV(y&&y.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:$a([c,i.encodeLocation?i.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:$a([c,i.encodeLocation?i.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),a,n,r);return e&&w?p.createElement(qg.Provider,{value:{location:eh({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Ia.Pop}},w):w}function pV(){let t=_V(),e=lV(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},e),n?p.createElement("pre",{style:i},n):null,null)}const gV=p.createElement(pV,null);class vV extends p.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?p.createElement(ta.Provider,{value:this.props.routeContext},p.createElement(Rk.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function xV(t){let{routeContext:e,match:n,children:r}=t,i=p.useContext(I1);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),p.createElement(ta.Provider,{value:e},r)}function yV(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let d=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);d>=0||on(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let f=o[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:m,errors:v}=n,y=f.route.loader&&m[f.route.id]===void 0&&(!v||v[f.route.id]===void 0);if(f.route.lazy||y){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,f,m)=>{let v,y=!1,w=null,b=null;n&&(v=l&&f.route.id?l[f.route.id]:void 0,w=f.route.errorElement||gV,c&&(u<0&&m===0?(y=!0,b=null):u===m&&(y=!0,b=f.route.hydrateFallbackElement||null)));let x=e.concat(o.slice(0,m+1)),g=()=>{let _;return v?_=w:y?_=b:f.route.Component?_=p.createElement(f.route.Component,null):f.route.element?_=f.route.element:_=d,p.createElement(xV,{match:f,routeContext:{outlet:d,matches:x,isDataRoute:n!=null},children:_})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?p.createElement(vV,{location:n.location,revalidation:n.revalidation,component:w,error:v,children:g(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):g()},null)}var Ok=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Ok||{}),Tp=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Tp||{});function wV(t){let e=p.useContext(I1);return e||on(!1),e}function bV(t){let e=p.useContext(uV);return e||on(!1),e}function jV(t){let e=p.useContext(ta);return e||on(!1),e}function Lk(t){let e=jV(),n=e.matches[e.matches.length-1];return n.route.id||on(!1),n.route.id}function _V(){var t;let e=p.useContext(Rk),n=bV(Tp.UseRouteError),r=Lk(Tp.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function NV(){let{router:t}=wV(Ok.UseNavigateStable),e=Lk(Tp.UseNavigateStable),n=p.useRef(!1);return Mk(()=>{n.current=!0}),p.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,eh({fromRouteId:e},a)))},[t,e])}function SV(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function EV(t){let{to:e,replace:n,state:r,relative:i}=t;uu()||on(!1);let{future:a,static:o}=p.useContext(mo),{matches:l}=p.useContext(ta),{pathname:c}=na(),u=En(),d=k1(e,T1(l,a.v7_relativeSplatPath),c,i==="path"),f=JSON.stringify(d);return p.useEffect(()=>u(JSON.parse(f),{replace:n,state:r,relative:i}),[u,f,i,n,r]),null}function $t(t){on(!1)}function CV(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Ia.Pop,navigator:a,static:o=!1,future:l}=t;uu()&&on(!1);let c=e.replace(/^\/*/,"/"),u=p.useMemo(()=>({basename:c,navigator:a,static:o,future:eh({v7_relativeSplatPath:!1},l)}),[c,l,a,o]);typeof r=="string"&&(r=bl(r));let{pathname:d="/",search:f="",hash:m="",state:v=null,key:y="default"}=r,w=p.useMemo(()=>{let b=C1(d,c);return b==null?null:{location:{pathname:b,search:f,hash:m,state:v,key:y},navigationType:i}},[c,d,f,m,v,y,i]);return w==null?null:p.createElement(mo.Provider,{value:u},p.createElement(qg.Provider,{children:n,value:w}))}function TV(t){let{children:e,location:n}=t;return fV(j0(e),n)}new Promise(()=>{});function j0(t,e){e===void 0&&(e=[]);let n=[];return p.Children.forEach(t,(r,i)=>{if(!p.isValidElement(r))return;let a=[...e,i];if(r.type===p.Fragment){n.push.apply(n,j0(r.props.children,a));return}r.type!==$t&&on(!1),!r.props.index||!r.props.children||on(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=j0(r.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _0(){return _0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_0.apply(this,arguments)}function kV(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function IV(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function PV(t,e){return t.button===0&&(!e||e==="_self")&&!IV(t)}function N0(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function AV(t,e){let n=N0(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}const RV=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],MV="6";try{window.__reactRouterVersion=MV}catch{}const DV="startTransition",f2=EC[DV];function OV(t){let{basename:e,children:n,future:r,window:i}=t,a=p.useRef();a.current==null&&(a.current=FL({window:i,v5Compat:!0}));let o=a.current,[l,c]=p.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=p.useCallback(f=>{u&&f2?f2(()=>c(f)):c(f)},[c,u]);return p.useLayoutEffect(()=>o.listen(d),[o,d]),p.useEffect(()=>SV(r),[r]),p.createElement(CV,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const LV=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",VV=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fe=p.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:a,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f}=e,m=kV(e,RV),{basename:v}=p.useContext(mo),y,w=!1;if(typeof u=="string"&&VV.test(u)&&(y=u,LV))try{let _=new URL(window.location.href),E=u.startsWith("//")?new URL(_.protocol+u):new URL(u),S=C1(E.pathname,v);E.origin===_.origin&&S!=null?u=S+E.search+E.hash:w=!0}catch{}let b=dV(u,{relative:i}),x=FV(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:i,viewTransition:f});function g(_){r&&r(_),_.defaultPrevented||x(_)}return p.createElement("a",_0({},m,{href:y||b,onClick:w||a?r:g,ref:n,target:c}))});var m2;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(m2||(m2={}));var p2;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(p2||(p2={}));function FV(t,e){let{target:n,replace:r,state:i,preventScrollReset:a,relative:o,viewTransition:l}=e===void 0?{}:e,c=En(),u=na(),d=Dk(t,{relative:o});return p.useCallback(f=>{if(PV(f,n)){f.preventDefault();let m=r!==void 0?r:Cp(u)===Cp(d);c(t,{replace:m,state:i,preventScrollReset:a,relative:o,viewTransition:l})}},[u,c,d,r,i,n,t,a,o,l])}function A1(t){let e=p.useRef(N0(t)),n=p.useRef(!1),r=na(),i=p.useMemo(()=>AV(r.search,n.current?null:e.current),[r.search]),a=En(),o=p.useCallback((l,c)=>{const u=N0(typeof l=="function"?l(i):l);n.current=!0,a("?"+u,c)},[a,i]);return[i,o]}var kp=["light","dark"],R1="(prefers-color-scheme: dark)",UV=typeof window>"u",M1=p.createContext(void 0),$V={setTheme:t=>{},themes:[]},zV=()=>{var t;return(t=p.useContext(M1))!=null?t:$V},BV=t=>p.useContext(M1)?t.children:p.createElement(WV,{...t}),qV=["light","dark"],WV=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:i="theme",themes:a=qV,defaultTheme:o=n?"system":"light",attribute:l="data-theme",value:c,children:u,nonce:d})=>{let[f,m]=p.useState(()=>g2(i,o)),[v,y]=p.useState(()=>g2(i)),w=c?Object.values(c):a,b=p.useCallback(E=>{let S=E;if(!S)return;E==="system"&&n&&(S=v2());let O=c?c[S]:S,I=e?GV():null,k=document.documentElement;if(l==="class"?(k.classList.remove(...w),O&&k.classList.add(O)):O?k.setAttribute(l,O):k.removeAttribute(l),r){let R=kp.includes(o)?o:null,N=kp.includes(S)?S:R;k.style.colorScheme=N}I==null||I()},[]),x=p.useCallback(E=>{let S=typeof E=="function"?E(E):E;m(S);try{localStorage.setItem(i,S)}catch{}},[t]),g=p.useCallback(E=>{let S=v2(E);y(S),f==="system"&&n&&!t&&b("system")},[f,t]);p.useEffect(()=>{let E=window.matchMedia(R1);return E.addListener(g),g(E),()=>E.removeListener(g)},[g]),p.useEffect(()=>{let E=S=>{if(S.key!==i)return;let O=S.newValue||o;x(O)};return window.addEventListener("storage",E),()=>window.removeEventListener("storage",E)},[x]),p.useEffect(()=>{b(t??f)},[t,f]);let _=p.useMemo(()=>({theme:f,setTheme:x,forcedTheme:t,resolvedTheme:f==="system"?v:f,themes:n?[...a,"system"]:a,systemTheme:n?v:void 0}),[f,x,t,v,n,a]);return p.createElement(M1.Provider,{value:_},p.createElement(HV,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:n,enableColorScheme:r,storageKey:i,themes:a,defaultTheme:o,attribute:l,value:c,children:u,attrs:w,nonce:d}),u)},HV=p.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:i,defaultTheme:a,value:o,attrs:l,nonce:c})=>{let u=a==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(y=>`'${y}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,f=i?kp.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(y,w=!1,b=!0)=>{let x=o?o[y]:y,g=w?y+"|| ''":`'${x}'`,_="";return i&&b&&!w&&kp.includes(y)&&(_+=`d.style.colorScheme = '${y}';`),n==="class"?w||x?_+=`c.add(${g})`:_+="null":x&&(_+=`d[s](n,${g})`),_},v=t?`!function(){${d}${m(t)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${R1}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}${u?"":"else{"+m(a,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}else{${m(a,!1,!1)};}${f}}catch(t){}}();`;return p.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:v}})}),g2=(t,e)=>{if(UV)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},GV=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},v2=t=>(t||(t=window.matchMedia(R1)),t.matches?"dark":"light");let KV={data:""},YV=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||KV,QV=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,XV=/\/\*[^]*?\*\/|  +/g,x2=/\n+/g,ba=(t,e)=>{let n="",r="",i="";for(let a in t){let o=t[a];a[0]=="@"?a[1]=="i"?n=a+" "+o+";":r+=a[1]=="f"?ba(o,a):a+"{"+ba(o,a[1]=="k"?"":e)+"}":typeof o=="object"?r+=ba(o,e?e.replace(/([^,])+/g,l=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):a):o!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=ba.p?ba.p(a,o):a+":"+o+";")}return n+(e&&i?e+"{"+i+"}":i)+r},wi={},Vk=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+Vk(t[n]);return e}return t},ZV=(t,e,n,r,i)=>{let a=Vk(t),o=wi[a]||(wi[a]=(c=>{let u=0,d=11;for(;u<c.length;)d=101*d+c.charCodeAt(u++)>>>0;return"go"+d})(a));if(!wi[o]){let c=a!==t?t:(u=>{let d,f,m=[{}];for(;d=QV.exec(u.replace(XV,""));)d[4]?m.shift():d[3]?(f=d[3].replace(x2," ").trim(),m.unshift(m[0][f]=m[0][f]||{})):m[0][d[1]]=d[2].replace(x2," ").trim();return m[0]})(t);wi[o]=ba(i?{["@keyframes "+o]:c}:c,n?"":"."+o)}let l=n&&wi.g?wi.g:null;return n&&(wi.g=wi[o]),((c,u,d,f)=>{f?u.data=u.data.replace(f,c):u.data.indexOf(c)===-1&&(u.data=d?c+u.data:u.data+c)})(wi[o],e,r,l),o},JV=(t,e,n)=>t.reduce((r,i,a)=>{let o=e[a];if(o&&o.call){let l=o(n),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":ba(l,""):l===!1?"":l}return r+i+(o??"")},"");function Wg(t){let e=this||{},n=t.call?t(e.p):t;return ZV(n.unshift?n.raw?JV(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,YV(e.target),e.g,e.o,e.k)}let Fk,S0,E0;Wg.bind({g:1});let $i=Wg.bind({k:1});function eF(t,e,n,r){ba.p=e,Fk=t,S0=n,E0=r}function po(t,e){let n=this||{};return function(){let r=arguments;function i(a,o){let l=Object.assign({},a),c=l.className||i.className;n.p=Object.assign({theme:S0&&S0()},l),n.o=/ *go\d+/.test(c),l.className=Wg.apply(n,r)+(c?" "+c:"");let u=t;return t[0]&&(u=l.as||t,delete l.as),E0&&u[0]&&E0(l),Fk(u,l)}return i}}var tF=t=>typeof t=="function",Ip=(t,e)=>tF(t)?t(e):t,nF=(()=>{let t=0;return()=>(++t).toString()})(),Uk=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),rF=20,$k=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,rF)};case 1:return{...t,toasts:t.toasts.map(a=>a.id===e.toast.id?{...a,...e.toast}:a)};case 2:let{toast:n}=e;return $k(t,{type:t.toasts.find(a=>a.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=e;return{...t,toasts:t.toasts.map(a=>a.id===r||r===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(a=>a.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+i}))}}},Lm=[],Vo={toasts:[],pausedAt:void 0},jl=t=>{Vo=$k(Vo,t),Lm.forEach(e=>{e(Vo)})},sF={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},iF=(t={})=>{let[e,n]=p.useState(Vo),r=p.useRef(Vo);p.useEffect(()=>(r.current!==Vo&&n(Vo),Lm.push(n),()=>{let a=Lm.indexOf(n);a>-1&&Lm.splice(a,1)}),[]);let i=e.toasts.map(a=>{var o,l,c;return{...t,...t[a.type],...a,removeDelay:a.removeDelay||((o=t[a.type])==null?void 0:o.removeDelay)||(t==null?void 0:t.removeDelay),duration:a.duration||((l=t[a.type])==null?void 0:l.duration)||(t==null?void 0:t.duration)||sF[a.type],style:{...t.style,...(c=t[a.type])==null?void 0:c.style,...a.style}}});return{...e,toasts:i}},aF=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||nF()}),Uh=t=>(e,n)=>{let r=aF(e,t,n);return jl({type:2,toast:r}),r.id},or=(t,e)=>Uh("blank")(t,e);or.error=Uh("error");or.success=Uh("success");or.loading=Uh("loading");or.custom=Uh("custom");or.dismiss=t=>{jl({type:3,toastId:t})};or.remove=t=>jl({type:4,toastId:t});or.promise=(t,e,n)=>{let r=or.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let a=e.success?Ip(e.success,i):void 0;return a?or.success(a,{id:r,...n,...n==null?void 0:n.success}):or.dismiss(r),i}).catch(i=>{let a=e.error?Ip(e.error,i):void 0;a?or.error(a,{id:r,...n,...n==null?void 0:n.error}):or.dismiss(r)}),t};var oF=(t,e)=>{jl({type:1,toast:{id:t,height:e}})},lF=()=>{jl({type:5,time:Date.now()})},Cd=new Map,cF=1e3,uF=(t,e=cF)=>{if(Cd.has(t))return;let n=setTimeout(()=>{Cd.delete(t),jl({type:4,toastId:t})},e);Cd.set(t,n)},dF=t=>{let{toasts:e,pausedAt:n}=iF(t);p.useEffect(()=>{if(n)return;let a=Date.now(),o=e.map(l=>{if(l.duration===1/0)return;let c=(l.duration||0)+l.pauseDuration-(a-l.createdAt);if(c<0){l.visible&&or.dismiss(l.id);return}return setTimeout(()=>or.dismiss(l.id),c)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[e,n]);let r=p.useCallback(()=>{n&&jl({type:6,time:Date.now()})},[n]),i=p.useCallback((a,o)=>{let{reverseOrder:l=!1,gutter:c=8,defaultPosition:u}=o||{},d=e.filter(v=>(v.position||u)===(a.position||u)&&v.height),f=d.findIndex(v=>v.id===a.id),m=d.filter((v,y)=>y<f&&v.visible).length;return d.filter(v=>v.visible).slice(...l?[m+1]:[0,m]).reduce((v,y)=>v+(y.height||0)+c,0)},[e]);return p.useEffect(()=>{e.forEach(a=>{if(a.dismissed)uF(a.id,a.removeDelay);else{let o=Cd.get(a.id);o&&(clearTimeout(o),Cd.delete(a.id))}})},[e]),{toasts:e,handlers:{updateHeight:oF,startPause:lF,endPause:r,calculateOffset:i}}},hF=$i`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,fF=$i`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,mF=$i`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,pF=po("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${hF} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${fF} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${mF} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,gF=$i`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,vF=po("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${gF} 1s linear infinite;
`,xF=$i`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,yF=$i`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,wF=po("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${xF} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${yF} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,bF=po("div")`
  position: absolute;
`,jF=po("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,_F=$i`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,NF=po("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${_F} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,SF=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?p.createElement(NF,null,e):e:n==="blank"?null:p.createElement(jF,null,p.createElement(vF,{...r}),n!=="loading"&&p.createElement(bF,null,n==="error"?p.createElement(pF,{...r}):p.createElement(wF,{...r})))},EF=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,CF=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,TF="0%{opacity:0;} 100%{opacity:1;}",kF="0%{opacity:1;} 100%{opacity:0;}",IF=po("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,PF=po("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,AF=(t,e)=>{let n=t.includes("top")?1:-1,[r,i]=Uk()?[TF,kF]:[EF(n),CF(n)];return{animation:e?`${$i(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${$i(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},RF=p.memo(({toast:t,position:e,style:n,children:r})=>{let i=t.height?AF(t.position||e||"top-center",t.visible):{opacity:0},a=p.createElement(SF,{toast:t}),o=p.createElement(PF,{...t.ariaProps},Ip(t.message,t));return p.createElement(IF,{className:t.className,style:{...i,...n,...t.style}},typeof r=="function"?r({icon:a,message:o}):p.createElement(p.Fragment,null,a,o))});eF(p.createElement);var MF=({id:t,className:e,style:n,onHeightUpdate:r,children:i})=>{let a=p.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;r(t,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return p.createElement("div",{ref:a,className:e,style:n},i)},DF=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Uk()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...i}},OF=Wg`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,sm=16,LF=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:i,containerStyle:a,containerClassName:o})=>{let{toasts:l,handlers:c}=dF(n);return p.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:sm,left:sm,right:sm,bottom:sm,pointerEvents:"none",...a},className:o,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(u=>{let d=u.position||e,f=c.calculateOffset(u,{reverseOrder:t,gutter:r,defaultPosition:e}),m=DF(d,f);return p.createElement(MF,{id:u.id,key:u.id,onHeightUpdate:c.updateHeight,className:u.visible?OF:"",style:m},u.type==="custom"?Ip(u.message,u):i?i(u):p.createElement(RF,{toast:u,position:d}))}))},ee=or,y2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},VF=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],o=t[n++],l=t[n++],c=((i&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},Bk={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],o=i+1<t.length,l=o?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,d=a>>2,f=(a&3)<<4|l>>4;let m=(l&15)<<2|u>>6,v=u&63;c||(v=64,o||(m=64)),r.push(n[d],n[f],n[m],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(zk(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):VF(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||l==null||u==null||f==null)throw new FF;const m=a<<2|l>>4;if(r.push(m),u!==64){const v=l<<4&240|u>>2;if(r.push(v),f!==64){const y=u<<6&192|f;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class FF extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const UF=function(t){const e=zk(t);return Bk.encodeByteArray(e,!0)},Pp=function(t){return UF(t).replace(/\./g,"")},qk=function(t){try{return Bk.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $F(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zF=()=>$F().__FIREBASE_DEFAULTS__,BF=()=>{if(typeof process>"u"||typeof y2>"u")return;const t=y2.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},qF=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&qk(t[1]);return e&&JSON.parse(e)},Hg=()=>{try{return zF()||BF()||qF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Wk=t=>{var e,n;return(n=(e=Hg())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Hk=t=>{const e=Wk(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Gk=()=>{var t;return(t=Hg())===null||t===void 0?void 0:t.config},Kk=t=>{var e;return(e=Hg())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WF{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yk(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Pp(JSON.stringify(n)),Pp(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function HF(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jn())}function GF(){var t;const e=(t=Hg())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function KF(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function YF(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function QF(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function XF(){const t=Jn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ZF(){return!GF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function JF(){try{return typeof indexedDB=="object"}catch{return!1}}function e9(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t9="FirebaseError";class fi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=t9,Object.setPrototypeOf(this,fi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$h.prototype.create)}}class $h{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?n9(a,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new fi(i,l,r)}}function n9(t,e){return t.replace(r9,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const r9=/\{\$([^}]+)}/g;function s9(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ap(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],o=e[i];if(w2(a)&&w2(o)){if(!Ap(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function w2(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zh(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function od(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function ld(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function i9(t,e){const n=new a9(t,e);return n.subscribe.bind(n)}class a9{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");o9(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Vx),i.error===void 0&&(i.error=Vx),i.complete===void 0&&(i.complete=Vx);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function o9(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Vx(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(t){return t&&t._delegate?t._delegate:t}class Ka{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l9{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new WF;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(u9(e))try{this.getOrInitializeService({instanceIdentifier:Ro})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Ro){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ro){return this.instances.has(e)}getOptions(e=Ro){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const o=this.instances.get(i);return o&&e(o,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:c9(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ro){return this.component?this.component.multipleInstances?e:Ro:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function c9(t){return t===Ro?void 0:t}function u9(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d9{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new l9(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(st||(st={}));const h9={debug:st.DEBUG,verbose:st.VERBOSE,info:st.INFO,warn:st.WARN,error:st.ERROR,silent:st.SILENT},f9=st.INFO,m9={[st.DEBUG]:"log",[st.VERBOSE]:"log",[st.INFO]:"info",[st.WARN]:"warn",[st.ERROR]:"error"},p9=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=m9[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class D1{constructor(e){this.name=e,this._logLevel=f9,this._logHandler=p9,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in st))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?h9[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,st.DEBUG,...e),this._logHandler(this,st.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,st.VERBOSE,...e),this._logHandler(this,st.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,st.INFO,...e),this._logHandler(this,st.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,st.WARN,...e),this._logHandler(this,st.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,st.ERROR,...e),this._logHandler(this,st.ERROR,...e)}}const g9=(t,e)=>e.some(n=>t instanceof n);let b2,j2;function v9(){return b2||(b2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function x9(){return j2||(j2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Qk=new WeakMap,C0=new WeakMap,Xk=new WeakMap,Fx=new WeakMap,O1=new WeakMap;function y9(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(za(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Qk.set(n,t)}).catch(()=>{}),O1.set(e,t),e}function w9(t){if(C0.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});C0.set(t,e)}let T0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return C0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Xk.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return za(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function b9(t){T0=t(T0)}function j9(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ux(this),e,...n);return Xk.set(r,e.sort?e.sort():[e]),za(r)}:x9().includes(t)?function(...e){return t.apply(Ux(this),e),za(Qk.get(this))}:function(...e){return za(t.apply(Ux(this),e))}}function _9(t){return typeof t=="function"?j9(t):(t instanceof IDBTransaction&&w9(t),g9(t,v9())?new Proxy(t,T0):t)}function za(t){if(t instanceof IDBRequest)return y9(t);if(Fx.has(t))return Fx.get(t);const e=_9(t);return e!==t&&(Fx.set(t,e),O1.set(e,t)),e}const Ux=t=>O1.get(t);function N9(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(t,e),l=za(o);return r&&o.addEventListener("upgradeneeded",c=>{r(za(o.result),c.oldVersion,c.newVersion,za(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const S9=["get","getKey","getAll","getAllKeys","count"],E9=["put","add","delete","clear"],$x=new Map;function _2(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if($x.get(e))return $x.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=E9.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||S9.includes(n)))return;const a=async function(o,...l){const c=this.transaction(o,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),i&&c.done]))[0]};return $x.set(e,a),a}b9(t=>({...t,get:(e,n,r)=>_2(e,n)||t.get(e,n,r),has:(e,n)=>!!_2(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C9{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(T9(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function T9(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const k0="@firebase/app",N2="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi=new D1("@firebase/app"),k9="@firebase/app-compat",I9="@firebase/analytics-compat",P9="@firebase/analytics",A9="@firebase/app-check-compat",R9="@firebase/app-check",M9="@firebase/auth",D9="@firebase/auth-compat",O9="@firebase/database",L9="@firebase/data-connect",V9="@firebase/database-compat",F9="@firebase/functions",U9="@firebase/functions-compat",$9="@firebase/installations",z9="@firebase/installations-compat",B9="@firebase/messaging",q9="@firebase/messaging-compat",W9="@firebase/performance",H9="@firebase/performance-compat",G9="@firebase/remote-config",K9="@firebase/remote-config-compat",Y9="@firebase/storage",Q9="@firebase/storage-compat",X9="@firebase/firestore",Z9="@firebase/vertexai-preview",J9="@firebase/firestore-compat",e8="firebase",t8="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0="[DEFAULT]",n8={[k0]:"fire-core",[k9]:"fire-core-compat",[P9]:"fire-analytics",[I9]:"fire-analytics-compat",[R9]:"fire-app-check",[A9]:"fire-app-check-compat",[M9]:"fire-auth",[D9]:"fire-auth-compat",[O9]:"fire-rtdb",[L9]:"fire-data-connect",[V9]:"fire-rtdb-compat",[F9]:"fire-fn",[U9]:"fire-fn-compat",[$9]:"fire-iid",[z9]:"fire-iid-compat",[B9]:"fire-fcm",[q9]:"fire-fcm-compat",[W9]:"fire-perf",[H9]:"fire-perf-compat",[G9]:"fire-rc",[K9]:"fire-rc-compat",[Y9]:"fire-gcs",[Q9]:"fire-gcs-compat",[X9]:"fire-fst",[J9]:"fire-fst-compat",[Z9]:"fire-vertex","fire-js":"fire-js",[e8]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp=new Map,r8=new Map,P0=new Map;function S2(t,e){try{t.container.addComponent(e)}catch(n){zi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function sl(t){const e=t.name;if(P0.has(e))return zi.debug(`There were multiple attempts to register component ${e}.`),!1;P0.set(e,t);for(const n of Rp.values())S2(n,t);for(const n of r8.values())S2(n,t);return!0}function Gg(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function es(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ba=new $h("app","Firebase",s8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i8{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ka("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ba.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _l=t8;function Zk(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:I0,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ba.create("bad-app-name",{appName:String(i)});if(n||(n=Gk()),!n)throw Ba.create("no-options");const a=Rp.get(i);if(a){if(Ap(n,a.options)&&Ap(r,a.config))return a;throw Ba.create("duplicate-app",{appName:i})}const o=new d9(i);for(const c of P0.values())o.addComponent(c);const l=new i8(n,r,o);return Rp.set(i,l),l}function L1(t=I0){const e=Rp.get(t);if(!e&&t===I0&&Gk())return Zk();if(!e)throw Ba.create("no-app",{appName:t});return e}function Js(t,e,n){var r;let i=(r=n8[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const a=i.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const l=[`Unable to register library "${i}" with version "${e}":`];a&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),zi.warn(l.join(" "));return}sl(new Ka(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a8="firebase-heartbeat-database",o8=1,th="firebase-heartbeat-store";let zx=null;function Jk(){return zx||(zx=N9(a8,o8,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(th)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ba.create("idb-open",{originalErrorMessage:t.message})})),zx}async function l8(t){try{const n=(await Jk()).transaction(th),r=await n.objectStore(th).get(eI(t));return await n.done,r}catch(e){if(e instanceof fi)zi.warn(e.message);else{const n=Ba.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});zi.warn(n.message)}}}async function E2(t,e){try{const r=(await Jk()).transaction(th,"readwrite");await r.objectStore(th).put(e,eI(t)),await r.done}catch(n){if(n instanceof fi)zi.warn(n.message);else{const r=Ba.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});zi.warn(r.message)}}}function eI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c8=1024,u8=30*24*60*60*1e3;class d8{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new f8(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=C2();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=u8}),this._storage.overwrite(this._heartbeatsCache))}catch(r){zi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=C2(),{heartbeatsToSend:r,unsentEntries:i}=h8(this._heartbeatsCache.heartbeats),a=Pp(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return zi.warn(n),""}}}function C2(){return new Date().toISOString().substring(0,10)}function h8(t,e=c8){const n=[];let r=t.slice();for(const i of t){const a=n.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),T2(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),T2(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class f8{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return JF()?e9().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await l8(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return E2(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return E2(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function T2(t){return Pp(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m8(t){sl(new Ka("platform-logger",e=>new C9(e),"PRIVATE")),sl(new Ka("heartbeat",e=>new d8(e),"PRIVATE")),Js(k0,N2,t),Js(k0,N2,"esm2017"),Js("fire-js","")}m8("");var qs=function(){return qs=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},qs.apply(this,arguments)};function Bh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function p8(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function tI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const g8=tI,nI=new $h("auth","Firebase",tI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp=new D1("@firebase/auth");function v8(t,...e){Mp.logLevel<=st.WARN&&Mp.warn(`Auth (${_l}): ${t}`,...e)}function Vm(t,...e){Mp.logLevel<=st.ERROR&&Mp.error(`Auth (${_l}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ls(t,...e){throw F1(t,...e)}function ei(t,...e){return F1(t,...e)}function V1(t,e,n){const r=Object.assign(Object.assign({},g8()),{[e]:n});return new $h("auth","Firebase",r).create(e,{appName:t.name})}function _s(t){return V1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function x8(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&ls(t,"argument-error"),V1(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function F1(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return nI.create(t,...e)}function Oe(t,e,...n){if(!t)throw F1(e,...n)}function Ii(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Vm(e),new Error(e)}function Bi(t,e){t||Ii(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function y8(){return k2()==="http:"||k2()==="https:"}function k2(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w8(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(y8()||YF()||"connection"in navigator)?navigator.onLine:!0}function b8(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,n){this.shortDelay=e,this.longDelay=n,Bi(n>e,"Short delay should be less than long delay!"),this.isMobile=HF()||QF()}get(){return w8()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(t,e){Bi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ii("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ii("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ii("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j8={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _8=new qh(3e4,6e4);function ra(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Os(t,e,n,r,i={}){return sI(t,i,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const l=zh(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},a);return KF()||(u.referrerPolicy="no-referrer"),rI.fetch()(iI(t,t.config.apiHost,n,l),u)})}async function sI(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},j8),e);try{const i=new S8(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw im(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const l=a.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw im(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw im(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw im(t,"user-disabled",o);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw V1(t,d,u);ls(t,d)}}catch(i){if(i instanceof fi)throw i;ls(t,"network-request-failed",{message:String(i)})}}async function Wh(t,e,n,r,i={}){const a=await Os(t,e,n,r,i);return"mfaPendingCredential"in a&&ls(t,"multi-factor-auth-required",{_serverResponse:a}),a}function iI(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?U1(t.config,i):`${t.config.apiScheme}://${i}`}function N8(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class S8{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ei(this.auth,"network-request-failed")),_8.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function im(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ei(t,e,r);return i.customData._tokenResponse=n,i}function I2(t){return t!==void 0&&t.enterprise!==void 0}class E8{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return N8(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function C8(t,e){return Os(t,"GET","/v2/recaptchaConfig",ra(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T8(t,e){return Os(t,"POST","/v1/accounts:delete",e)}async function aI(t,e){return Os(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function k8(t,e=!1){const n=mt(t),r=await n.getIdToken(e),i=$1(r);Oe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:Td(Bx(i.auth_time)),issuedAtTime:Td(Bx(i.iat)),expirationTime:Td(Bx(i.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Bx(t){return Number(t)*1e3}function $1(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Vm("JWT malformed, contained fewer than 3 sections"),null;try{const i=qk(n);return i?JSON.parse(i):(Vm("Failed to decode base64 JWT payload"),null)}catch(i){return Vm("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function P2(t){const e=$1(t);return Oe(e,"internal-error"),Oe(typeof e.exp<"u","internal-error"),Oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function il(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof fi&&I8(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function I8({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P8{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Td(this.lastLoginAt),this.creationTime=Td(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dp(t){var e;const n=t.auth,r=await t.getIdToken(),i=await il(t,aI(n,{idToken:r}));Oe(i==null?void 0:i.users.length,n,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?oI(a.providerUserInfo):[],l=A8(t.providerData,o),c=t.isAnonymous,u=!(t.email&&a.passwordHash)&&!(l!=null&&l.length),d=c?u:!1,f={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new R0(a.createdAt,a.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function cd(t){const e=mt(t);await Dp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function A8(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function oI(t){return t.map(e=>{var{providerId:n}=e,r=Bh(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R8(t,e){const n=await sI(t,{},async()=>{const r=zh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,o=iI(t,i,"/v1/token",`key=${a}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",rI.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function M8(t,e){return Os(t,"POST","/v2/accounts:revokeToken",ra(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Oe(e.idToken,"internal-error"),Oe(typeof e.idToken<"u","internal-error"),Oe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):P2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Oe(e.length!==0,"internal-error");const n=P2(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await R8(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,o=new vc;return r&&(Oe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Oe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(Oe(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new vc,this.toJSON())}_performRefresh(){return Ii("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function da(t,e){Oe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Pi{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,a=Bh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new P8(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new R0(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await il(this,this.stsTokenManager.getToken(this.auth,e));return Oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return k8(this,e)}reload(){return cd(this)}_assign(e){this!==e&&(Oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Pi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Dp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(es(this.auth.app))return Promise.reject(_s(this.auth));const e=await this.getIdToken();return await il(this,T8(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,a,o,l,c,u,d;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,v=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,w=(l=n.tenantId)!==null&&l!==void 0?l:void 0,b=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,x=(u=n.createdAt)!==null&&u!==void 0?u:void 0,g=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:_,emailVerified:E,isAnonymous:S,providerData:O,stsTokenManager:I}=n;Oe(_&&I,e,"internal-error");const k=vc.fromJSON(this.name,I);Oe(typeof _=="string",e,"internal-error"),da(f,e.name),da(m,e.name),Oe(typeof E=="boolean",e,"internal-error"),Oe(typeof S=="boolean",e,"internal-error"),da(v,e.name),da(y,e.name),da(w,e.name),da(b,e.name),da(x,e.name),da(g,e.name);const R=new Pi({uid:_,auth:e,email:m,emailVerified:E,displayName:f,isAnonymous:S,photoURL:y,phoneNumber:v,tenantId:w,stsTokenManager:k,createdAt:x,lastLoginAt:g});return O&&Array.isArray(O)&&(R.providerData=O.map(N=>Object.assign({},N))),b&&(R._redirectEventId=b),R}static async _fromIdTokenResponse(e,n,r=!1){const i=new vc;i.updateFromServerResponse(n);const a=new Pi({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Dp(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Oe(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?oI(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),l=new vc;l.updateFromIdToken(r);const c=new Pi({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new R0(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2=new Map;function Ai(t){Bi(t instanceof Function,"Expected a class definition");let e=A2.get(t);return e?(Bi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,A2.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}lI.type="NONE";const R2=lI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(t,e,n){return`firebase:${t}:${e}:${n}`}class xc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Fm(this.userKey,i.apiKey,a),this.fullPersistenceKey=Fm("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Pi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new xc(Ai(R2),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let a=i[0]||Ai(R2);const o=Fm(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const d=await u._get(o);if(d){const f=Pi._fromJSON(e,d);u!==a&&(l=f),a=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new xc(a,e,r):(a=c[0],l&&await a._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==a)try{await u._remove(o)}catch{}})),new xc(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M2(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(hI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(cI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(mI(e))return"Blackberry";if(pI(e))return"Webos";if(uI(e))return"Safari";if((e.includes("chrome/")||dI(e))&&!e.includes("edge/"))return"Chrome";if(fI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function cI(t=Jn()){return/firefox\//i.test(t)}function uI(t=Jn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dI(t=Jn()){return/crios\//i.test(t)}function hI(t=Jn()){return/iemobile/i.test(t)}function fI(t=Jn()){return/android/i.test(t)}function mI(t=Jn()){return/blackberry/i.test(t)}function pI(t=Jn()){return/webos/i.test(t)}function z1(t=Jn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function D8(t=Jn()){var e;return z1(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function O8(){return XF()&&document.documentMode===10}function gI(t=Jn()){return z1(t)||fI(t)||pI(t)||mI(t)||/windows phone/i.test(t)||hI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(t,e=[]){let n;switch(t){case"Browser":n=M2(Jn());break;case"Worker":n=`${M2(Jn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${_l}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L8{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((o,l)=>{try{const c=e(a);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V8(t,e={}){return Os(t,"GET","/v2/passwordPolicy",ra(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F8=6;class U8{constructor(e){var n,r,i,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:F8,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,a,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(a=c.containsUppercaseLetter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $8{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new D2(this),this.idTokenSubscription=new D2(this),this.beforeStateQueue=new L8(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ai(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await xc.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await aI(this,{idToken:e}),r=await Pi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(es(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(i=c.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Dp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=b8()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(es(this.app))return Promise.reject(_s(this));const n=e?mt(e):null;return n&&Oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return es(this.app)?Promise.reject(_s(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return es(this.app)?Promise.reject(_s(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ai(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await V8(this),n=new U8(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new $h("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await M8(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ai(e)||this._popupRedirectResolver;Oe(n,this,"argument-error"),this.redirectPersistenceManager=await xc.create(this,[Ai(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Oe(l,this,"internal-error"),l.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&v8(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function sa(t){return mt(t)}class D2{constructor(e){this.auth=e,this.observer=null,this.addObserver=i9(n=>this.observer=n)}get next(){return Oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function z8(t){Kg=t}function xI(t){return Kg.loadJS(t)}function B8(){return Kg.recaptchaEnterpriseScript}function q8(){return Kg.gapiScript}function W8(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const H8="recaptcha-enterprise",G8="NO_RECAPTCHA";class K8{constructor(e){this.type=H8,this.auth=sa(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,l)=>{C8(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new E8(c);return a.tenantId==null?a._agentRecaptchaConfig=u:a._tenantRecaptchaConfigs[a.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function i(a,o,l){const c=window.grecaptcha;I2(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(u=>{o(u)}).catch(()=>{o(G8)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,o)=>{r(this.auth).then(l=>{if(!n&&I2(window.grecaptcha))i(l,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=B8();c.length!==0&&(c+=l),xI(c).then(()=>{i(l,a,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function O2(t,e,n,r=!1){const i=new K8(t);let a;try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function M0(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await O2(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await O2(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y8(t,e){const n=Gg(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(Ap(a,e??{}))return i;ls(i,"already-initialized")}return n.initialize({options:e})}function Q8(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ai);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function X8(t,e,n){const r=sa(t);Oe(r._canInitEmulator,r,"emulator-config-failed"),Oe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=yI(e),{host:o,port:l}=Z8(e),c=l===null?"":`:${l}`;r.config.emulator={url:`${a}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),J8()}function yI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Z8(t){const e=yI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:L2(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:L2(o)}}}function L2(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function J8(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ii("not implemented")}_getIdTokenResponse(e){return Ii("not implemented")}_linkToIdToken(e,n){return Ii("not implemented")}_getReauthenticationResolver(e){return Ii("not implemented")}}async function eU(t,e){return Os(t,"POST","/v1/accounts:update",e)}async function tU(t,e){return Os(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nU(t,e){return Wh(t,"POST","/v1/accounts:signInWithPassword",ra(t,e))}async function rU(t,e){return Os(t,"POST","/v1/accounts:sendOobCode",ra(t,e))}async function sU(t,e){return rU(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iU(t,e){return Wh(t,"POST","/v1/accounts:signInWithEmailLink",ra(t,e))}async function aU(t,e){return Wh(t,"POST","/v1/accounts:signInWithEmailLink",ra(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh extends B1{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new nh(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new nh(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return M0(e,n,"signInWithPassword",nU);case"emailLink":return iU(e,{email:this._email,oobCode:this._password});default:ls(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return M0(e,r,"signUpPassword",tU);case"emailLink":return aU(e,{idToken:n,email:this._email,oobCode:this._password});default:ls(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yc(t,e){return Wh(t,"POST","/v1/accounts:signInWithIdp",ra(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oU="http://localhost";class al extends B1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new al(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ls("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,a=Bh(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new al(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return yc(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,yc(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,yc(e,n)}buildRequest(){const e={requestUri:oU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=zh(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lU(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function cU(t){const e=od(ld(t)).link,n=e?od(ld(e)).deep_link_id:null,r=od(ld(t)).deep_link_id;return(r?od(ld(r)).link:null)||r||n||e||t}class q1{constructor(e){var n,r,i,a,o,l;const c=od(ld(e)),u=(n=c.apiKey)!==null&&n!==void 0?n:null,d=(r=c.oobCode)!==null&&r!==void 0?r:null,f=lU((i=c.mode)!==null&&i!==void 0?i:null);Oe(u&&d&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=d,this.continueUrl=(a=c.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=cU(e);try{return new q1(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(){this.providerId=Ya.PROVIDER_ID}static credential(e,n){return nh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=q1.parseLink(n);return Oe(r,"argument-error"),nh._fromEmailAndCode(e,r.code,r.tenantId)}}Ya.PROVIDER_ID="password";Ya.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ya.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh extends W1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja extends Hh{constructor(){super("facebook.com")}static credential(e){return al._fromParams({providerId:ja.PROVIDER_ID,signInMethod:ja.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ja.credentialFromTaggedObject(e)}static credentialFromError(e){return ja.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ja.credential(e.oauthAccessToken)}catch{return null}}}ja.FACEBOOK_SIGN_IN_METHOD="facebook.com";ja.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends Hh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return al._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ci.credentialFromTaggedObject(e)}static credentialFromError(e){return Ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ci.credential(n,r)}catch{return null}}}Ci.GOOGLE_SIGN_IN_METHOD="google.com";Ci.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a extends Hh{constructor(){super("github.com")}static credential(e){return al._fromParams({providerId:_a.PROVIDER_ID,signInMethod:_a.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _a.credentialFromTaggedObject(e)}static credentialFromError(e){return _a.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _a.credential(e.oauthAccessToken)}catch{return null}}}_a.GITHUB_SIGN_IN_METHOD="github.com";_a.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na extends Hh{constructor(){super("twitter.com")}static credential(e,n){return al._fromParams({providerId:Na.PROVIDER_ID,signInMethod:Na.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Na.credentialFromTaggedObject(e)}static credentialFromError(e){return Na.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Na.credential(n,r)}catch{return null}}}Na.TWITTER_SIGN_IN_METHOD="twitter.com";Na.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uU(t,e){return Wh(t,"POST","/v1/accounts:signUp",ra(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await Pi._fromIdTokenResponse(e,r,i),o=V2(r);return new ol({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=V2(r);return new ol({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function V2(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op extends fi{constructor(e,n,r,i){var a;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Op.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Op(e,n,r,i)}}function wI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Op._fromErrorAndOperation(t,a,e,r):a})}async function dU(t,e,n=!1){const r=await il(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ol._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bI(t,e,n=!1){const{auth:r}=t;if(es(r.app))return Promise.reject(_s(r));const i="reauthenticate";try{const a=await il(t,wI(r,i,e,t),n);Oe(a.idToken,r,"internal-error");const o=$1(a.idToken);Oe(o,r,"internal-error");const{sub:l}=o;return Oe(t.uid===l,r,"user-mismatch"),ol._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&ls(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jI(t,e,n=!1){if(es(t.app))return Promise.reject(_s(t));const r="signIn",i=await wI(t,r,e),a=await ol._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function hU(t,e){return jI(sa(t),e)}async function F2(t,e){return bI(mt(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fU(t,e,n){var r;Oe(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),Oe(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Oe(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(Oe(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _I(t){const e=sa(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function NI(t,e,n){if(es(t.app))return Promise.reject(_s(t));const r=sa(t),o=await M0(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",uU).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&_I(t),c}),l=await ol._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function mU(t,e,n){return es(t.app)?Promise.reject(_s(t)):hU(mt(t),Ya.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&_I(t),r})}async function qx(t,e){const n=mt(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&fU(n.auth,i,e);const{email:a}=await sU(n.auth,i);a!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pU(t,e){return Os(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rh(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=mt(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await il(r,pU(r.auth,a));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function gU(t,e){const n=mt(t);return es(n.auth.app)?Promise.reject(_s(n.auth)):SI(n,e,null)}function vU(t,e){return SI(mt(t),null,e)}async function SI(t,e,n){const{auth:r}=t,a={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(a.email=e),n&&(a.password=n);const o=await il(t,eU(r,a));await t._updateTokensIfNecessary(o,!0)}function xU(t,e,n,r){return mt(t).onIdTokenChanged(e,n,r)}function yU(t,e,n){return mt(t).beforeAuthStateChanged(e,n)}function wU(t,e,n,r){return mt(t).onAuthStateChanged(e,n,r)}function bU(t){return mt(t).signOut()}async function jU(t){return mt(t).delete()}const Lp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Lp,"1"),this.storage.removeItem(Lp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _U=1e3,NU=10;class CI extends EI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);O8()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,NU):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},_U)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}CI.type="LOCAL";const SU=CI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI extends EI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}TI.type="SESSION";const kI=TI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EU(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Yg(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async u=>u(n.origin,a)),c=await EU(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Yg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((l,c)=>{const u=H1("",20);i.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const m=f;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(d),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(m.data.response);break;default:clearTimeout(d),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(){return window}function TU(t){ti().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(){return typeof ti().WorkerGlobalScope<"u"&&typeof ti().importScripts=="function"}async function kU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function IU(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function PU(){return II()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI="firebaseLocalStorageDb",AU=1,Vp="firebaseLocalStorage",AI="fbase_key";class Gh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Qg(t,e){return t.transaction([Vp],e?"readwrite":"readonly").objectStore(Vp)}function RU(){const t=indexedDB.deleteDatabase(PI);return new Gh(t).toPromise()}function D0(){const t=indexedDB.open(PI,AU);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Vp,{keyPath:AI})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Vp)?e(r):(r.close(),await RU(),e(await D0()))})})}async function U2(t,e,n){const r=Qg(t,!0).put({[AI]:e,value:n});return new Gh(r).toPromise()}async function MU(t,e){const n=Qg(t,!1).get(e),r=await new Gh(n).toPromise();return r===void 0?null:r.value}function $2(t,e){const n=Qg(t,!0).delete(e);return new Gh(n).toPromise()}const DU=800,OU=3;class RI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await D0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>OU)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return II()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Yg._getInstance(PU()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await kU(),!this.activeServiceWorker)return;this.sender=new CU(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||IU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await D0();return await U2(e,Lp,"1"),await $2(e,Lp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>U2(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>MU(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>$2(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=Qg(i,!1).getAll();return new Gh(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),DU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}RI.type="LOCAL";const LU=RI;new qh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MI(t,e){return e?Ai(e):(Oe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1 extends B1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return yc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return yc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return yc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function VU(t){return jI(t.auth,new G1(t),t.bypassAuthState)}function FU(t){const{auth:e,user:n}=t;return Oe(n,e,"internal-error"),bI(n,new G1(t),t.bypassAuthState)}async function UU(t){const{auth:e,user:n}=t;return Oe(n,e,"internal-error"),dU(n,new G1(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return VU;case"linkViaPopup":case"linkViaRedirect":return UU;case"reauthViaPopup":case"reauthViaRedirect":return FU;default:ls(this.auth,"internal-error")}}resolve(e){Bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $U=new qh(2e3,1e4);class lc extends DI{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,lc.currentPopupAction&&lc.currentPopupAction.cancel(),lc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Oe(e,this.auth,"internal-error"),e}async onExecution(){Bi(this.filter.length===1,"Popup operations only handle one event");const e=H1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ei(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ei(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,lc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ei(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,$U.get())};e()}}lc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zU="pendingRedirect",Um=new Map;class BU extends DI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Um.get(this.auth._key());if(!e){try{const r=await qU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Um.set(this.auth._key(),e)}return this.bypassAuthState||Um.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function qU(t,e){const n=LI(e),r=OI(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function WU(t,e){return OI(t)._set(LI(e),"true")}function HU(t,e){Um.set(t._key(),e)}function OI(t){return Ai(t._redirectPersistence)}function LI(t){return Fm(zU,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GU(t,e,n){return KU(t,e,n)}async function KU(t,e,n){if(es(t.app))return Promise.reject(_s(t));const r=sa(t);x8(t,e,W1),await r._initializationPromise;const i=MI(r,n);return await WU(i,r),i._openRedirect(r,e,"signInViaRedirect")}async function YU(t,e){return await sa(t)._initializationPromise,VI(t,e,!1)}async function VI(t,e,n=!1){if(es(t.app))return Promise.reject(_s(t));const r=sa(t),i=MI(r,e),o=await new BU(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QU=10*60*1e3;class XU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ZU(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!FI(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ei(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=QU&&this.cachedEventUids.clear(),this.cachedEventUids.has(z2(e))}saveEventToCache(e){this.cachedEventUids.add(z2(e)),this.lastProcessedEventTime=Date.now()}}function z2(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function FI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ZU(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return FI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JU(t,e={}){return Os(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,t$=/^https?/;async function n$(t){if(t.config.emulator)return;const{authorizedDomains:e}=await JU(t);for(const n of e)try{if(r$(n))return}catch{}ls(t,"unauthorized-domain")}function r$(t){const e=A0(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!t$.test(n))return!1;if(e$.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s$=new qh(3e4,6e4);function B2(){const t=ti().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function i$(t){return new Promise((e,n)=>{var r,i,a;function o(){B2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{B2(),n(ei(t,"network-request-failed"))},timeout:s$.get()})}if(!((i=(r=ti().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=ti().gapi)===null||a===void 0)&&a.load)o();else{const l=W8("iframefcb");return ti()[l]=()=>{gapi.load?o():n(ei(t,"network-request-failed"))},xI(`${q8()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw $m=null,e})}let $m=null;function a$(t){return $m=$m||i$(t),$m}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o$=new qh(5e3,15e3),l$="__/auth/iframe",c$="emulator/auth/iframe",u$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},d$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function h$(t){const e=t.config;Oe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?U1(e,c$):`https://${t.config.authDomain}/${l$}`,r={apiKey:e.apiKey,appName:t.name,v:_l},i=d$.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${zh(r).slice(1)}`}async function f$(t){const e=await a$(t),n=ti().gapi;return Oe(n,t,"internal-error"),e.open({where:document.body,url:h$(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:u$,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const o=ei(t,"network-request-failed"),l=ti().setTimeout(()=>{a(o)},o$.get());function c(){ti().clearTimeout(l),i(r)}r.ping(c).then(c,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},p$=500,g$=600,v$="_blank",x$="http://localhost";class q2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function y$(t,e,n,r=p$,i=g$){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},m$),{width:r.toString(),height:i.toString(),top:a,left:o}),u=Jn().toLowerCase();n&&(l=dI(u)?v$:n),cI(u)&&(e=e||x$,c.scrollbars="yes");const d=Object.entries(c).reduce((m,[v,y])=>`${m}${v}=${y},`,"");if(D8(u)&&l!=="_self")return w$(e||"",l),new q2(null);const f=window.open(e||"",l,d);Oe(f,t,"popup-blocked");try{f.focus()}catch{}return new q2(f)}function w$(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b$="__/auth/handler",j$="emulator/auth/handler",_$=encodeURIComponent("fac");async function W2(t,e,n,r,i,a){Oe(t.config.authDomain,t,"auth-domain-config-required"),Oe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:_l,eventId:i};if(e instanceof W1){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",s9(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))o[d]=f}if(e instanceof Hh){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${_$}=${encodeURIComponent(c)}`:"";return`${N$(t)}?${zh(l).slice(1)}${u}`}function N$({config:t}){return t.emulator?U1(t,j$):`https://${t.authDomain}/${b$}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx="webStorageSupport";class S${constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kI,this._completeRedirectFn=VI,this._overrideRedirectResult=HU}async _openPopup(e,n,r,i){var a;Bi((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await W2(e,n,r,A0(),i);return y$(e,o,H1())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await W2(e,n,r,A0(),i);return TU(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(Bi(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await f$(e),r=new XU(e);return n.register("authEvent",i=>(Oe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Wx,{type:Wx},i=>{var a;const o=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[Wx];o!==void 0&&n(!!o),ls(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=n$(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return gI()||uI()||z1()}}const E$=S$;var H2="@firebase/auth",G2="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C${constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T$(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function k$(t){sl(new Ka("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;Oe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vI(t)},u=new $8(r,i,a,c);return Q8(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),sl(new Ka("auth-internal",e=>{const n=sa(e.getProvider("auth").getImmediate());return(r=>new C$(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Js(H2,G2,T$(t)),Js(H2,G2,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I$=5*60,P$=Kk("authIdTokenMaxAge")||I$;let K2=null;const A$=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>P$)return;const i=n==null?void 0:n.token;K2!==i&&(K2=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function R$(t=L1()){const e=Gg(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Y8(t,{popupRedirectResolver:E$,persistence:[LU,SU,kI]}),r=Kk("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=A$(a.toString());yU(n,o,()=>o(n.currentUser)),xU(n,l=>o(l))}}const i=Wk("auth");return i&&X8(n,`http://${i}`),n}function M$(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}z8({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=ei("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",M$().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});k$("Browser");var Y2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bo,UI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,k){function R(){}R.prototype=k.prototype,I.D=k.prototype,I.prototype=new R,I.prototype.constructor=I,I.C=function(N,P,A){for(var T=Array(arguments.length-2),U=2;U<arguments.length;U++)T[U-2]=arguments[U];return k.prototype[P].apply(N,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,k,R){R||(R=0);var N=Array(16);if(typeof k=="string")for(var P=0;16>P;++P)N[P]=k.charCodeAt(R++)|k.charCodeAt(R++)<<8|k.charCodeAt(R++)<<16|k.charCodeAt(R++)<<24;else for(P=0;16>P;++P)N[P]=k[R++]|k[R++]<<8|k[R++]<<16|k[R++]<<24;k=I.g[0],R=I.g[1],P=I.g[2];var A=I.g[3],T=k+(A^R&(P^A))+N[0]+3614090360&4294967295;k=R+(T<<7&4294967295|T>>>25),T=A+(P^k&(R^P))+N[1]+3905402710&4294967295,A=k+(T<<12&4294967295|T>>>20),T=P+(R^A&(k^R))+N[2]+606105819&4294967295,P=A+(T<<17&4294967295|T>>>15),T=R+(k^P&(A^k))+N[3]+3250441966&4294967295,R=P+(T<<22&4294967295|T>>>10),T=k+(A^R&(P^A))+N[4]+4118548399&4294967295,k=R+(T<<7&4294967295|T>>>25),T=A+(P^k&(R^P))+N[5]+1200080426&4294967295,A=k+(T<<12&4294967295|T>>>20),T=P+(R^A&(k^R))+N[6]+2821735955&4294967295,P=A+(T<<17&4294967295|T>>>15),T=R+(k^P&(A^k))+N[7]+4249261313&4294967295,R=P+(T<<22&4294967295|T>>>10),T=k+(A^R&(P^A))+N[8]+1770035416&4294967295,k=R+(T<<7&4294967295|T>>>25),T=A+(P^k&(R^P))+N[9]+2336552879&4294967295,A=k+(T<<12&4294967295|T>>>20),T=P+(R^A&(k^R))+N[10]+4294925233&4294967295,P=A+(T<<17&4294967295|T>>>15),T=R+(k^P&(A^k))+N[11]+2304563134&4294967295,R=P+(T<<22&4294967295|T>>>10),T=k+(A^R&(P^A))+N[12]+1804603682&4294967295,k=R+(T<<7&4294967295|T>>>25),T=A+(P^k&(R^P))+N[13]+4254626195&4294967295,A=k+(T<<12&4294967295|T>>>20),T=P+(R^A&(k^R))+N[14]+2792965006&4294967295,P=A+(T<<17&4294967295|T>>>15),T=R+(k^P&(A^k))+N[15]+1236535329&4294967295,R=P+(T<<22&4294967295|T>>>10),T=k+(P^A&(R^P))+N[1]+4129170786&4294967295,k=R+(T<<5&4294967295|T>>>27),T=A+(R^P&(k^R))+N[6]+3225465664&4294967295,A=k+(T<<9&4294967295|T>>>23),T=P+(k^R&(A^k))+N[11]+643717713&4294967295,P=A+(T<<14&4294967295|T>>>18),T=R+(A^k&(P^A))+N[0]+3921069994&4294967295,R=P+(T<<20&4294967295|T>>>12),T=k+(P^A&(R^P))+N[5]+3593408605&4294967295,k=R+(T<<5&4294967295|T>>>27),T=A+(R^P&(k^R))+N[10]+38016083&4294967295,A=k+(T<<9&4294967295|T>>>23),T=P+(k^R&(A^k))+N[15]+3634488961&4294967295,P=A+(T<<14&4294967295|T>>>18),T=R+(A^k&(P^A))+N[4]+3889429448&4294967295,R=P+(T<<20&4294967295|T>>>12),T=k+(P^A&(R^P))+N[9]+568446438&4294967295,k=R+(T<<5&4294967295|T>>>27),T=A+(R^P&(k^R))+N[14]+3275163606&4294967295,A=k+(T<<9&4294967295|T>>>23),T=P+(k^R&(A^k))+N[3]+4107603335&4294967295,P=A+(T<<14&4294967295|T>>>18),T=R+(A^k&(P^A))+N[8]+1163531501&4294967295,R=P+(T<<20&4294967295|T>>>12),T=k+(P^A&(R^P))+N[13]+2850285829&4294967295,k=R+(T<<5&4294967295|T>>>27),T=A+(R^P&(k^R))+N[2]+4243563512&4294967295,A=k+(T<<9&4294967295|T>>>23),T=P+(k^R&(A^k))+N[7]+1735328473&4294967295,P=A+(T<<14&4294967295|T>>>18),T=R+(A^k&(P^A))+N[12]+2368359562&4294967295,R=P+(T<<20&4294967295|T>>>12),T=k+(R^P^A)+N[5]+4294588738&4294967295,k=R+(T<<4&4294967295|T>>>28),T=A+(k^R^P)+N[8]+2272392833&4294967295,A=k+(T<<11&4294967295|T>>>21),T=P+(A^k^R)+N[11]+1839030562&4294967295,P=A+(T<<16&4294967295|T>>>16),T=R+(P^A^k)+N[14]+4259657740&4294967295,R=P+(T<<23&4294967295|T>>>9),T=k+(R^P^A)+N[1]+2763975236&4294967295,k=R+(T<<4&4294967295|T>>>28),T=A+(k^R^P)+N[4]+1272893353&4294967295,A=k+(T<<11&4294967295|T>>>21),T=P+(A^k^R)+N[7]+4139469664&4294967295,P=A+(T<<16&4294967295|T>>>16),T=R+(P^A^k)+N[10]+3200236656&4294967295,R=P+(T<<23&4294967295|T>>>9),T=k+(R^P^A)+N[13]+681279174&4294967295,k=R+(T<<4&4294967295|T>>>28),T=A+(k^R^P)+N[0]+3936430074&4294967295,A=k+(T<<11&4294967295|T>>>21),T=P+(A^k^R)+N[3]+3572445317&4294967295,P=A+(T<<16&4294967295|T>>>16),T=R+(P^A^k)+N[6]+76029189&4294967295,R=P+(T<<23&4294967295|T>>>9),T=k+(R^P^A)+N[9]+3654602809&4294967295,k=R+(T<<4&4294967295|T>>>28),T=A+(k^R^P)+N[12]+3873151461&4294967295,A=k+(T<<11&4294967295|T>>>21),T=P+(A^k^R)+N[15]+530742520&4294967295,P=A+(T<<16&4294967295|T>>>16),T=R+(P^A^k)+N[2]+3299628645&4294967295,R=P+(T<<23&4294967295|T>>>9),T=k+(P^(R|~A))+N[0]+4096336452&4294967295,k=R+(T<<6&4294967295|T>>>26),T=A+(R^(k|~P))+N[7]+1126891415&4294967295,A=k+(T<<10&4294967295|T>>>22),T=P+(k^(A|~R))+N[14]+2878612391&4294967295,P=A+(T<<15&4294967295|T>>>17),T=R+(A^(P|~k))+N[5]+4237533241&4294967295,R=P+(T<<21&4294967295|T>>>11),T=k+(P^(R|~A))+N[12]+1700485571&4294967295,k=R+(T<<6&4294967295|T>>>26),T=A+(R^(k|~P))+N[3]+2399980690&4294967295,A=k+(T<<10&4294967295|T>>>22),T=P+(k^(A|~R))+N[10]+4293915773&4294967295,P=A+(T<<15&4294967295|T>>>17),T=R+(A^(P|~k))+N[1]+2240044497&4294967295,R=P+(T<<21&4294967295|T>>>11),T=k+(P^(R|~A))+N[8]+1873313359&4294967295,k=R+(T<<6&4294967295|T>>>26),T=A+(R^(k|~P))+N[15]+4264355552&4294967295,A=k+(T<<10&4294967295|T>>>22),T=P+(k^(A|~R))+N[6]+2734768916&4294967295,P=A+(T<<15&4294967295|T>>>17),T=R+(A^(P|~k))+N[13]+1309151649&4294967295,R=P+(T<<21&4294967295|T>>>11),T=k+(P^(R|~A))+N[4]+4149444226&4294967295,k=R+(T<<6&4294967295|T>>>26),T=A+(R^(k|~P))+N[11]+3174756917&4294967295,A=k+(T<<10&4294967295|T>>>22),T=P+(k^(A|~R))+N[2]+718787259&4294967295,P=A+(T<<15&4294967295|T>>>17),T=R+(A^(P|~k))+N[9]+3951481745&4294967295,I.g[0]=I.g[0]+k&4294967295,I.g[1]=I.g[1]+(P+(T<<21&4294967295|T>>>11))&4294967295,I.g[2]=I.g[2]+P&4294967295,I.g[3]=I.g[3]+A&4294967295}r.prototype.u=function(I,k){k===void 0&&(k=I.length);for(var R=k-this.blockSize,N=this.B,P=this.h,A=0;A<k;){if(P==0)for(;A<=R;)i(this,I,A),A+=this.blockSize;if(typeof I=="string"){for(;A<k;)if(N[P++]=I.charCodeAt(A++),P==this.blockSize){i(this,N),P=0;break}}else for(;A<k;)if(N[P++]=I[A++],P==this.blockSize){i(this,N),P=0;break}}this.h=P,this.o+=k},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var k=1;k<I.length-8;++k)I[k]=0;var R=8*this.o;for(k=I.length-8;k<I.length;++k)I[k]=R&255,R/=256;for(this.u(I),I=Array(16),k=R=0;4>k;++k)for(var N=0;32>N;N+=8)I[R++]=this.g[k]>>>N&255;return I};function a(I,k){var R=l;return Object.prototype.hasOwnProperty.call(R,I)?R[I]:R[I]=k(I)}function o(I,k){this.h=k;for(var R=[],N=!0,P=I.length-1;0<=P;P--){var A=I[P]|0;N&&A==k||(R[P]=A,N=!1)}this.g=R}var l={};function c(I){return-128<=I&&128>I?a(I,function(k){return new o([k|0],0>k?-1:0)}):new o([I|0],0>I?-1:0)}function u(I){if(isNaN(I)||!isFinite(I))return f;if(0>I)return b(u(-I));for(var k=[],R=1,N=0;I>=R;N++)k[N]=I/R|0,R*=4294967296;return new o(k,0)}function d(I,k){if(I.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(I.charAt(0)=="-")return b(d(I.substring(1),k));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=u(Math.pow(k,8)),N=f,P=0;P<I.length;P+=8){var A=Math.min(8,I.length-P),T=parseInt(I.substring(P,P+A),k);8>A?(A=u(Math.pow(k,A)),N=N.j(A).add(u(T))):(N=N.j(R),N=N.add(u(T)))}return N}var f=c(0),m=c(1),v=c(16777216);t=o.prototype,t.m=function(){if(w(this))return-b(this).m();for(var I=0,k=1,R=0;R<this.g.length;R++){var N=this.i(R);I+=(0<=N?N:4294967296+N)*k,k*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(y(this))return"0";if(w(this))return"-"+b(this).toString(I);for(var k=u(Math.pow(I,6)),R=this,N="";;){var P=E(R,k).g;R=x(R,P.j(k));var A=((0<R.g.length?R.g[0]:R.h)>>>0).toString(I);if(R=P,y(R))return A+N;for(;6>A.length;)A="0"+A;N=A+N}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function y(I){if(I.h!=0)return!1;for(var k=0;k<I.g.length;k++)if(I.g[k]!=0)return!1;return!0}function w(I){return I.h==-1}t.l=function(I){return I=x(this,I),w(I)?-1:y(I)?0:1};function b(I){for(var k=I.g.length,R=[],N=0;N<k;N++)R[N]=~I.g[N];return new o(R,~I.h).add(m)}t.abs=function(){return w(this)?b(this):this},t.add=function(I){for(var k=Math.max(this.g.length,I.g.length),R=[],N=0,P=0;P<=k;P++){var A=N+(this.i(P)&65535)+(I.i(P)&65535),T=(A>>>16)+(this.i(P)>>>16)+(I.i(P)>>>16);N=T>>>16,A&=65535,T&=65535,R[P]=T<<16|A}return new o(R,R[R.length-1]&-2147483648?-1:0)};function x(I,k){return I.add(b(k))}t.j=function(I){if(y(this)||y(I))return f;if(w(this))return w(I)?b(this).j(b(I)):b(b(this).j(I));if(w(I))return b(this.j(b(I)));if(0>this.l(v)&&0>I.l(v))return u(this.m()*I.m());for(var k=this.g.length+I.g.length,R=[],N=0;N<2*k;N++)R[N]=0;for(N=0;N<this.g.length;N++)for(var P=0;P<I.g.length;P++){var A=this.i(N)>>>16,T=this.i(N)&65535,U=I.i(P)>>>16,H=I.i(P)&65535;R[2*N+2*P]+=T*H,g(R,2*N+2*P),R[2*N+2*P+1]+=A*H,g(R,2*N+2*P+1),R[2*N+2*P+1]+=T*U,g(R,2*N+2*P+1),R[2*N+2*P+2]+=A*U,g(R,2*N+2*P+2)}for(N=0;N<k;N++)R[N]=R[2*N+1]<<16|R[2*N];for(N=k;N<2*k;N++)R[N]=0;return new o(R,0)};function g(I,k){for(;(I[k]&65535)!=I[k];)I[k+1]+=I[k]>>>16,I[k]&=65535,k++}function _(I,k){this.g=I,this.h=k}function E(I,k){if(y(k))throw Error("division by zero");if(y(I))return new _(f,f);if(w(I))return k=E(b(I),k),new _(b(k.g),b(k.h));if(w(k))return k=E(I,b(k)),new _(b(k.g),k.h);if(30<I.g.length){if(w(I)||w(k))throw Error("slowDivide_ only works with positive integers.");for(var R=m,N=k;0>=N.l(I);)R=S(R),N=S(N);var P=O(R,1),A=O(N,1);for(N=O(N,2),R=O(R,2);!y(N);){var T=A.add(N);0>=T.l(I)&&(P=P.add(R),A=T),N=O(N,1),R=O(R,1)}return k=x(I,P.j(k)),new _(P,k)}for(P=f;0<=I.l(k);){for(R=Math.max(1,Math.floor(I.m()/k.m())),N=Math.ceil(Math.log(R)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),A=u(R),T=A.j(k);w(T)||0<T.l(I);)R-=N,A=u(R),T=A.j(k);y(A)&&(A=m),P=P.add(A),I=x(I,T)}return new _(P,I)}t.A=function(I){return E(this,I).h},t.and=function(I){for(var k=Math.max(this.g.length,I.g.length),R=[],N=0;N<k;N++)R[N]=this.i(N)&I.i(N);return new o(R,this.h&I.h)},t.or=function(I){for(var k=Math.max(this.g.length,I.g.length),R=[],N=0;N<k;N++)R[N]=this.i(N)|I.i(N);return new o(R,this.h|I.h)},t.xor=function(I){for(var k=Math.max(this.g.length,I.g.length),R=[],N=0;N<k;N++)R[N]=this.i(N)^I.i(N);return new o(R,this.h^I.h)};function S(I){for(var k=I.g.length+1,R=[],N=0;N<k;N++)R[N]=I.i(N)<<1|I.i(N-1)>>>31;return new o(R,I.h)}function O(I,k){var R=k>>5;k%=32;for(var N=I.g.length-R,P=[],A=0;A<N;A++)P[A]=0<k?I.i(A+R)>>>k|I.i(A+R+1)<<32-k:I.i(A+R);return new o(P,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,UI=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,Bo=o}).apply(typeof Y2<"u"?Y2:typeof self<"u"?self:typeof window<"u"?window:{});var am=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $I,ud,zI,zm,O0,BI,qI,WI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,j,C){return h==Array.prototype||h==Object.prototype||(h[j]=C.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof am=="object"&&am];for(var j=0;j<h.length;++j){var C=h[j];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var r=n(this);function i(h,j){if(j)e:{var C=r;h=h.split(".");for(var D=0;D<h.length-1;D++){var q=h[D];if(!(q in C))break e;C=C[q]}h=h[h.length-1],D=C[h],j=j(D),j!=D&&j!=null&&e(C,h,{configurable:!0,writable:!0,value:j})}}function a(h,j){h instanceof String&&(h+="");var C=0,D=!1,q={next:function(){if(!D&&C<h.length){var Q=C++;return{value:j(Q,h[Q]),done:!1}}return D=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}i("Array.prototype.values",function(h){return h||function(){return a(this,function(j,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(h){var j=typeof h;return j=j!="object"?j:h?Array.isArray(h)?"array":j:"null",j=="array"||j=="object"&&typeof h.length=="number"}function u(h){var j=typeof h;return j=="object"&&h!=null||j=="function"}function d(h,j,C){return h.call.apply(h.bind,arguments)}function f(h,j,C){if(!h)throw Error();if(2<arguments.length){var D=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,D),h.apply(j,q)}}return function(){return h.apply(j,arguments)}}function m(h,j,C){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,m.apply(null,arguments)}function v(h,j){var C=Array.prototype.slice.call(arguments,1);return function(){var D=C.slice();return D.push.apply(D,arguments),h.apply(this,D)}}function y(h,j){function C(){}C.prototype=j.prototype,h.aa=j.prototype,h.prototype=new C,h.prototype.constructor=h,h.Qb=function(D,q,Q){for(var ce=Array(arguments.length-2),kt=2;kt<arguments.length;kt++)ce[kt-2]=arguments[kt];return j.prototype[q].apply(D,ce)}}function w(h){const j=h.length;if(0<j){const C=Array(j);for(let D=0;D<j;D++)C[D]=h[D];return C}return[]}function b(h,j){for(let C=1;C<arguments.length;C++){const D=arguments[C];if(c(D)){const q=h.length||0,Q=D.length||0;h.length=q+Q;for(let ce=0;ce<Q;ce++)h[q+ce]=D[ce]}else h.push(D)}}class x{constructor(j,C){this.i=j,this.j=C,this.h=0,this.g=null}get(){let j;return 0<this.h?(this.h--,j=this.g,this.g=j.next,j.next=null):j=this.i(),j}}function g(h){return/^[\s\xa0]*$/.test(h)}function _(){var h=l.navigator;return h&&(h=h.userAgent)?h:""}function E(h){return E[" "](h),h}E[" "]=function(){};var S=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function O(h,j,C){for(const D in h)j.call(C,h[D],D,h)}function I(h,j){for(const C in h)j.call(void 0,h[C],C,h)}function k(h){const j={};for(const C in h)j[C]=h[C];return j}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(h,j){let C,D;for(let q=1;q<arguments.length;q++){D=arguments[q];for(C in D)h[C]=D[C];for(let Q=0;Q<R.length;Q++)C=R[Q],Object.prototype.hasOwnProperty.call(D,C)&&(h[C]=D[C])}}function P(h){var j=1;h=h.split(":");const C=[];for(;0<j&&h.length;)C.push(h.shift()),j--;return h.length&&C.push(h.join(":")),C}function A(h){l.setTimeout(()=>{throw h},0)}function T(){var h=$;let j=null;return h.g&&(j=h.g,h.g=h.g.next,h.g||(h.h=null),j.next=null),j}class U{constructor(){this.h=this.g=null}add(j,C){const D=H.get();D.set(j,C),this.h?this.h.next=D:this.g=D,this.h=D}}var H=new x(()=>new z,h=>h.reset());class z{constructor(){this.next=this.g=this.h=null}set(j,C){this.h=j,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let V,M=!1,$=new U,L=()=>{const h=l.Promise.resolve(void 0);V=()=>{h.then(W)}};var W=()=>{for(var h;h=T();){try{h.h.call(h.g)}catch(C){A(C)}var j=H;j.j(h),100>j.h&&(j.h++,h.next=j.g,j.g=h)}M=!1};function ne(){this.s=this.s,this.C=this.C}ne.prototype.s=!1,ne.prototype.ma=function(){this.s||(this.s=!0,this.N())},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ye(h,j){this.type=h,this.g=this.target=j,this.defaultPrevented=!1}ye.prototype.h=function(){this.defaultPrevented=!0};var Xe=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var h=!1,j=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const C=()=>{};l.addEventListener("test",C,j),l.removeEventListener("test",C,j)}catch{}return h}();function xt(h,j){if(ye.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var C=this.type=h.type,D=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=j,j=h.relatedTarget){if(S){e:{try{E(j.nodeName);var q=!0;break e}catch{}q=!1}q||(j=null)}}else C=="mouseover"?j=h.fromElement:C=="mouseout"&&(j=h.toElement);this.relatedTarget=j,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:ut[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&xt.aa.h.call(this)}}y(xt,ye);var ut={2:"touch",3:"pen",4:"mouse"};xt.prototype.h=function(){xt.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ve="closure_listenable_"+(1e6*Math.random()|0),Qe=0;function X(h,j,C,D,q){this.listener=h,this.proxy=null,this.src=j,this.type=C,this.capture=!!D,this.ha=q,this.key=++Qe,this.da=this.fa=!1}function de(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ke(h){this.src=h,this.g={},this.h=0}ke.prototype.add=function(h,j,C,D,q){var Q=h.toString();h=this.g[Q],h||(h=this.g[Q]=[],this.h++);var ce=He(h,j,D,q);return-1<ce?(j=h[ce],C||(j.fa=!1)):(j=new X(j,this.src,Q,!!D,q),j.fa=C,h.push(j)),j};function Le(h,j){var C=j.type;if(C in h.g){var D=h.g[C],q=Array.prototype.indexOf.call(D,j,void 0),Q;(Q=0<=q)&&Array.prototype.splice.call(D,q,1),Q&&(de(j),h.g[C].length==0&&(delete h.g[C],h.h--))}}function He(h,j,C,D){for(var q=0;q<h.length;++q){var Q=h[q];if(!Q.da&&Q.listener==j&&Q.capture==!!C&&Q.ha==D)return q}return-1}var Tt="closure_lm_"+(1e6*Math.random()|0),Gr={};function vi(h,j,C,D,q){if(Array.isArray(j)){for(var Q=0;Q<j.length;Q++)vi(h,j[Q],C,D,q);return null}return C=lt(C),h&&h[ve]?h.K(j,C,u(D)?!!D.capture:!!D,q):aa(h,j,C,!1,D,q)}function aa(h,j,C,D,q,Q){if(!j)throw Error("Invalid event type");var ce=u(q)?!!q.capture:!!q,kt=ae(h);if(kt||(h[Tt]=kt=new ke(h)),C=kt.add(j,C,D,ce,Q),C.proxy)return C;if(D=F(),C.proxy=D,D.src=h,D.listener=C,h.addEventListener)Xe||(q=ce),q===void 0&&(q=!1),h.addEventListener(j.toString(),D,q);else if(h.attachEvent)h.attachEvent(pe(j.toString()),D);else if(h.addListener&&h.removeListener)h.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return C}function F(){function h(C){return j.call(h.src,h.listener,C)}const j=ue;return h}function G(h,j,C,D,q){if(Array.isArray(j))for(var Q=0;Q<j.length;Q++)G(h,j[Q],C,D,q);else D=u(D)?!!D.capture:!!D,C=lt(C),h&&h[ve]?(h=h.i,j=String(j).toString(),j in h.g&&(Q=h.g[j],C=He(Q,C,D,q),-1<C&&(de(Q[C]),Array.prototype.splice.call(Q,C,1),Q.length==0&&(delete h.g[j],h.h--)))):h&&(h=ae(h))&&(j=h.g[j.toString()],h=-1,j&&(h=He(j,C,D,q)),(C=-1<h?j[h]:null)&&Z(C))}function Z(h){if(typeof h!="number"&&h&&!h.da){var j=h.src;if(j&&j[ve])Le(j.i,h);else{var C=h.type,D=h.proxy;j.removeEventListener?j.removeEventListener(C,D,h.capture):j.detachEvent?j.detachEvent(pe(C),D):j.addListener&&j.removeListener&&j.removeListener(D),(C=ae(j))?(Le(C,h),C.h==0&&(C.src=null,j[Tt]=null)):de(h)}}}function pe(h){return h in Gr?Gr[h]:Gr[h]="on"+h}function ue(h,j){if(h.da)h=!0;else{j=new xt(j,this);var C=h.listener,D=h.ha||h.src;h.fa&&Z(h),h=C.call(D,j)}return h}function ae(h){return h=h[Tt],h instanceof ke?h:null}var Ie="__closure_events_fn_"+(1e9*Math.random()>>>0);function lt(h){return typeof h=="function"?h:(h[Ie]||(h[Ie]=function(j){return h.handleEvent(j)}),h[Ie])}function rt(){ne.call(this),this.i=new ke(this),this.M=this,this.F=null}y(rt,ne),rt.prototype[ve]=!0,rt.prototype.removeEventListener=function(h,j,C,D){G(this,h,j,C,D)};function it(h,j){var C,D=h.F;if(D)for(C=[];D;D=D.F)C.push(D);if(h=h.M,D=j.type||j,typeof j=="string")j=new ye(j,h);else if(j instanceof ye)j.target=j.target||h;else{var q=j;j=new ye(D,h),N(j,q)}if(q=!0,C)for(var Q=C.length-1;0<=Q;Q--){var ce=j.g=C[Q];q=Kr(ce,D,!0,j)&&q}if(ce=j.g=h,q=Kr(ce,D,!0,j)&&q,q=Kr(ce,D,!1,j)&&q,C)for(Q=0;Q<C.length;Q++)ce=j.g=C[Q],q=Kr(ce,D,!1,j)&&q}rt.prototype.N=function(){if(rt.aa.N.call(this),this.i){var h=this.i,j;for(j in h.g){for(var C=h.g[j],D=0;D<C.length;D++)de(C[D]);delete h.g[j],h.h--}}this.F=null},rt.prototype.K=function(h,j,C,D){return this.i.add(String(h),j,!1,C,D)},rt.prototype.L=function(h,j,C,D){return this.i.add(String(h),j,!0,C,D)};function Kr(h,j,C,D){if(j=h.i.g[String(j)],!j)return!0;j=j.concat();for(var q=!0,Q=0;Q<j.length;++Q){var ce=j[Q];if(ce&&!ce.da&&ce.capture==C){var kt=ce.listener,In=ce.ha||ce.src;ce.fa&&Le(h.i,ce),q=kt.call(In,D)!==!1&&q}}return q&&!D.defaultPrevented}function Nf(h,j,C){if(typeof h=="function")C&&(h=m(h,C));else if(h&&typeof h.handleEvent=="function")h=m(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(j)?-1:l.setTimeout(h,j||0)}function Al(h){h.g=Nf(()=>{h.g=null,h.i&&(h.i=!1,Al(h))},h.l);const j=h.h;h.h=null,h.m.apply(null,j)}class Tu extends ne{constructor(j,C){super(),this.m=j,this.l=C,this.h=null,this.i=!1,this.g=null}j(j){this.h=arguments,this.g?this.i=!0:Al(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _o(h){ne.call(this),this.h=h,this.g={}}y(_o,ne);var ku=[];function Sf(h){O(h.g,function(j,C){this.g.hasOwnProperty(C)&&Z(j)},h),h.g={}}_o.prototype.N=function(){_o.aa.N.call(this),Sf(this)},_o.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Rl=l.JSON.stringify,$3=l.JSON.parse,z3=class{stringify(h){return l.JSON.stringify(h,void 0)}parse(h){return l.JSON.parse(h,void 0)}};function Qv(){}Qv.prototype.h=null;function l_(h){return h.h||(h.h=h.i())}function c_(){}var Iu={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Xv(){ye.call(this,"d")}y(Xv,ye);function Zv(){ye.call(this,"c")}y(Zv,ye);var No={},u_=null;function Ef(){return u_=u_||new rt}No.La="serverreachability";function d_(h){ye.call(this,No.La,h)}y(d_,ye);function Pu(h){const j=Ef();it(j,new d_(j))}No.STAT_EVENT="statevent";function h_(h,j){ye.call(this,No.STAT_EVENT,h),this.stat=j}y(h_,ye);function tr(h){const j=Ef();it(j,new h_(j,h))}No.Ma="timingevent";function f_(h,j){ye.call(this,No.Ma,h),this.size=j}y(f_,ye);function Au(h,j){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){h()},j)}function Ru(){this.g=!0}Ru.prototype.xa=function(){this.g=!1};function B3(h,j,C,D,q,Q){h.info(function(){if(h.g)if(Q)for(var ce="",kt=Q.split("&"),In=0;In<kt.length;In++){var dt=kt[In].split("=");if(1<dt.length){var $n=dt[0];dt=dt[1];var zn=$n.split("_");ce=2<=zn.length&&zn[1]=="type"?ce+($n+"="+dt+"&"):ce+($n+"=redacted&")}}else ce=null;else ce=Q;return"XMLHTTP REQ ("+D+") [attempt "+q+"]: "+j+`
`+C+`
`+ce})}function q3(h,j,C,D,q,Q,ce){h.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+q+"]: "+j+`
`+C+`
`+Q+" "+ce})}function Ml(h,j,C,D){h.info(function(){return"XMLHTTP TEXT ("+j+"): "+H3(h,C)+(D?" "+D:"")})}function W3(h,j){h.info(function(){return"TIMEOUT: "+j})}Ru.prototype.info=function(){};function H3(h,j){if(!h.g)return j;if(!j)return null;try{var C=JSON.parse(j);if(C){for(h=0;h<C.length;h++)if(Array.isArray(C[h])){var D=C[h];if(!(2>D.length)){var q=D[1];if(Array.isArray(q)&&!(1>q.length)){var Q=q[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var ce=1;ce<q.length;ce++)q[ce]=""}}}}return Rl(C)}catch{return j}}var Cf={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},m_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Jv;function Tf(){}y(Tf,Qv),Tf.prototype.g=function(){return new XMLHttpRequest},Tf.prototype.i=function(){return{}},Jv=new Tf;function oa(h,j,C,D){this.j=h,this.i=j,this.l=C,this.R=D||1,this.U=new _o(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new p_}function p_(){this.i=null,this.g="",this.h=!1}var g_={},ex={};function tx(h,j,C){h.L=1,h.v=Af(xi(j)),h.m=C,h.P=!0,v_(h,null)}function v_(h,j){h.F=Date.now(),kf(h),h.A=xi(h.v);var C=h.A,D=h.R;Array.isArray(D)||(D=[String(D)]),P_(C.i,"t",D),h.C=0,C=h.j.J,h.h=new p_,h.g=Y_(h.j,C?j:null,!h.m),0<h.O&&(h.M=new Tu(m(h.Y,h,h.g),h.O)),j=h.U,C=h.g,D=h.ca;var q="readystatechange";Array.isArray(q)||(q&&(ku[0]=q.toString()),q=ku);for(var Q=0;Q<q.length;Q++){var ce=vi(C,q[Q],D||j.handleEvent,!1,j.h||j);if(!ce)break;j.g[ce.key]=ce}j=h.H?k(h.H):{},h.m?(h.u||(h.u="POST"),j["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,j)):(h.u="GET",h.g.ea(h.A,h.u,null,j)),Pu(),B3(h.i,h.u,h.A,h.l,h.R,h.m)}oa.prototype.ca=function(h){h=h.target;const j=this.M;j&&yi(h)==3?j.j():this.Y(h)},oa.prototype.Y=function(h){try{if(h==this.g)e:{const zn=yi(this.g);var j=this.g.Ba();const Ll=this.g.Z();if(!(3>zn)&&(zn!=3||this.g&&(this.h.h||this.g.oa()||V_(this.g)))){this.J||zn!=4||j==7||(j==8||0>=Ll?Pu(3):Pu(2)),nx(this);var C=this.g.Z();this.X=C;t:if(x_(this)){var D=V_(this.g);h="";var q=D.length,Q=yi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){So(this),Mu(this);var ce="";break t}this.h.i=new l.TextDecoder}for(j=0;j<q;j++)this.h.h=!0,h+=this.h.i.decode(D[j],{stream:!(Q&&j==q-1)});D.length=0,this.h.g+=h,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=C==200,q3(this.i,this.u,this.A,this.l,this.R,zn,C),this.o){if(this.T&&!this.K){t:{if(this.g){var kt,In=this.g;if((kt=In.g?In.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!g(kt)){var dt=kt;break t}}dt=null}if(C=dt)Ml(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,rx(this,C);else{this.o=!1,this.s=3,tr(12),So(this),Mu(this);break e}}if(this.P){C=!0;let us;for(;!this.J&&this.C<ce.length;)if(us=G3(this,ce),us==ex){zn==4&&(this.s=4,tr(14),C=!1),Ml(this.i,this.l,null,"[Incomplete Response]");break}else if(us==g_){this.s=4,tr(15),Ml(this.i,this.l,ce,"[Invalid Chunk]"),C=!1;break}else Ml(this.i,this.l,us,null),rx(this,us);if(x_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),zn!=4||ce.length!=0||this.h.h||(this.s=1,tr(16),C=!1),this.o=this.o&&C,!C)Ml(this.i,this.l,ce,"[Invalid Chunked Response]"),So(this),Mu(this);else if(0<ce.length&&!this.W){this.W=!0;var $n=this.j;$n.g==this&&$n.ba&&!$n.M&&($n.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),cx($n),$n.M=!0,tr(11))}}else Ml(this.i,this.l,ce,null),rx(this,ce);zn==4&&So(this),this.o&&!this.J&&(zn==4?W_(this.j,this):(this.o=!1,kf(this)))}else u5(this.g),C==400&&0<ce.indexOf("Unknown SID")?(this.s=3,tr(12)):(this.s=0,tr(13)),So(this),Mu(this)}}}catch{}finally{}};function x_(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function G3(h,j){var C=h.C,D=j.indexOf(`
`,C);return D==-1?ex:(C=Number(j.substring(C,D)),isNaN(C)?g_:(D+=1,D+C>j.length?ex:(j=j.slice(D,D+C),h.C=D+C,j)))}oa.prototype.cancel=function(){this.J=!0,So(this)};function kf(h){h.S=Date.now()+h.I,y_(h,h.I)}function y_(h,j){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Au(m(h.ba,h),j)}function nx(h){h.B&&(l.clearTimeout(h.B),h.B=null)}oa.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(W3(this.i,this.A),this.L!=2&&(Pu(),tr(17)),So(this),this.s=2,Mu(this)):y_(this,this.S-h)};function Mu(h){h.j.G==0||h.J||W_(h.j,h)}function So(h){nx(h);var j=h.M;j&&typeof j.ma=="function"&&j.ma(),h.M=null,Sf(h.U),h.g&&(j=h.g,h.g=null,j.abort(),j.ma())}function rx(h,j){try{var C=h.j;if(C.G!=0&&(C.g==h||sx(C.h,h))){if(!h.K&&sx(C.h,h)&&C.G==3){try{var D=C.Da.g.parse(j)}catch{D=null}if(Array.isArray(D)&&D.length==3){var q=D;if(q[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<h.F)Vf(C),Of(C);else break e;lx(C),tr(18)}}else C.za=q[1],0<C.za-C.T&&37500>q[2]&&C.F&&C.v==0&&!C.C&&(C.C=Au(m(C.Za,C),6e3));if(1>=j_(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else Co(C,11)}else if((h.K||C.g==h)&&Vf(C),!g(j))for(q=C.Da.g.parse(j),j=0;j<q.length;j++){let dt=q[j];if(C.T=dt[0],dt=dt[1],C.G==2)if(dt[0]=="c"){C.K=dt[1],C.ia=dt[2];const $n=dt[3];$n!=null&&(C.la=$n,C.j.info("VER="+C.la));const zn=dt[4];zn!=null&&(C.Aa=zn,C.j.info("SVER="+C.Aa));const Ll=dt[5];Ll!=null&&typeof Ll=="number"&&0<Ll&&(D=1.5*Ll,C.L=D,C.j.info("backChannelRequestTimeoutMs_="+D)),D=C;const us=h.g;if(us){const Uf=us.g?us.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Uf){var Q=D.h;Q.g||Uf.indexOf("spdy")==-1&&Uf.indexOf("quic")==-1&&Uf.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(ix(Q,Q.h),Q.h=null))}if(D.D){const ux=us.g?us.g.getResponseHeader("X-HTTP-Session-Id"):null;ux&&(D.ya=ux,Rt(D.I,D.D,ux))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-h.F,C.j.info("Handshake RTT: "+C.R+"ms")),D=C;var ce=h;if(D.qa=K_(D,D.J?D.ia:null,D.W),ce.K){__(D.h,ce);var kt=ce,In=D.L;In&&(kt.I=In),kt.B&&(nx(kt),kf(kt)),D.g=ce}else B_(D);0<C.i.length&&Lf(C)}else dt[0]!="stop"&&dt[0]!="close"||Co(C,7);else C.G==3&&(dt[0]=="stop"||dt[0]=="close"?dt[0]=="stop"?Co(C,7):ox(C):dt[0]!="noop"&&C.l&&C.l.ta(dt),C.v=0)}}Pu(4)}catch{}}var K3=class{constructor(h,j){this.g=h,this.map=j}};function w_(h){this.l=h||10,l.PerformanceNavigationTiming?(h=l.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function b_(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function j_(h){return h.h?1:h.g?h.g.size:0}function sx(h,j){return h.h?h.h==j:h.g?h.g.has(j):!1}function ix(h,j){h.g?h.g.add(j):h.h=j}function __(h,j){h.h&&h.h==j?h.h=null:h.g&&h.g.has(j)&&h.g.delete(j)}w_.prototype.cancel=function(){if(this.i=N_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function N_(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let j=h.i;for(const C of h.g.values())j=j.concat(C.D);return j}return w(h.i)}function Y3(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(c(h)){for(var j=[],C=h.length,D=0;D<C;D++)j.push(h[D]);return j}j=[],C=0;for(D in h)j[C++]=h[D];return j}function Q3(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(c(h)||typeof h=="string"){var j=[];h=h.length;for(var C=0;C<h;C++)j.push(C);return j}j=[],C=0;for(const D in h)j[C++]=D;return j}}}function S_(h,j){if(h.forEach&&typeof h.forEach=="function")h.forEach(j,void 0);else if(c(h)||typeof h=="string")Array.prototype.forEach.call(h,j,void 0);else for(var C=Q3(h),D=Y3(h),q=D.length,Q=0;Q<q;Q++)j.call(void 0,D[Q],C&&C[Q],h)}var E_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function X3(h,j){if(h){h=h.split("&");for(var C=0;C<h.length;C++){var D=h[C].indexOf("="),q=null;if(0<=D){var Q=h[C].substring(0,D);q=h[C].substring(D+1)}else Q=h[C];j(Q,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function Eo(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Eo){this.h=h.h,If(this,h.j),this.o=h.o,this.g=h.g,Pf(this,h.s),this.l=h.l;var j=h.i,C=new Lu;C.i=j.i,j.g&&(C.g=new Map(j.g),C.h=j.h),C_(this,C),this.m=h.m}else h&&(j=String(h).match(E_))?(this.h=!1,If(this,j[1]||"",!0),this.o=Du(j[2]||""),this.g=Du(j[3]||"",!0),Pf(this,j[4]),this.l=Du(j[5]||"",!0),C_(this,j[6]||"",!0),this.m=Du(j[7]||"")):(this.h=!1,this.i=new Lu(null,this.h))}Eo.prototype.toString=function(){var h=[],j=this.j;j&&h.push(Ou(j,T_,!0),":");var C=this.g;return(C||j=="file")&&(h.push("//"),(j=this.o)&&h.push(Ou(j,T_,!0),"@"),h.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&h.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&h.push("/"),h.push(Ou(C,C.charAt(0)=="/"?e5:J3,!0))),(C=this.i.toString())&&h.push("?",C),(C=this.m)&&h.push("#",Ou(C,n5)),h.join("")};function xi(h){return new Eo(h)}function If(h,j,C){h.j=C?Du(j,!0):j,h.j&&(h.j=h.j.replace(/:$/,""))}function Pf(h,j){if(j){if(j=Number(j),isNaN(j)||0>j)throw Error("Bad port number "+j);h.s=j}else h.s=null}function C_(h,j,C){j instanceof Lu?(h.i=j,r5(h.i,h.h)):(C||(j=Ou(j,t5)),h.i=new Lu(j,h.h))}function Rt(h,j,C){h.i.set(j,C)}function Af(h){return Rt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Du(h,j){return h?j?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ou(h,j,C){return typeof h=="string"?(h=encodeURI(h).replace(j,Z3),C&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Z3(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var T_=/[#\/\?@]/g,J3=/[#\?:]/g,e5=/[#\?]/g,t5=/[#\?@]/g,n5=/#/g;function Lu(h,j){this.h=this.g=null,this.i=h||null,this.j=!!j}function la(h){h.g||(h.g=new Map,h.h=0,h.i&&X3(h.i,function(j,C){h.add(decodeURIComponent(j.replace(/\+/g," ")),C)}))}t=Lu.prototype,t.add=function(h,j){la(this),this.i=null,h=Dl(this,h);var C=this.g.get(h);return C||this.g.set(h,C=[]),C.push(j),this.h+=1,this};function k_(h,j){la(h),j=Dl(h,j),h.g.has(j)&&(h.i=null,h.h-=h.g.get(j).length,h.g.delete(j))}function I_(h,j){return la(h),j=Dl(h,j),h.g.has(j)}t.forEach=function(h,j){la(this),this.g.forEach(function(C,D){C.forEach(function(q){h.call(j,q,D,this)},this)},this)},t.na=function(){la(this);const h=Array.from(this.g.values()),j=Array.from(this.g.keys()),C=[];for(let D=0;D<j.length;D++){const q=h[D];for(let Q=0;Q<q.length;Q++)C.push(j[D])}return C},t.V=function(h){la(this);let j=[];if(typeof h=="string")I_(this,h)&&(j=j.concat(this.g.get(Dl(this,h))));else{h=Array.from(this.g.values());for(let C=0;C<h.length;C++)j=j.concat(h[C])}return j},t.set=function(h,j){return la(this),this.i=null,h=Dl(this,h),I_(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[j]),this.h+=1,this},t.get=function(h,j){return h?(h=this.V(h),0<h.length?String(h[0]):j):j};function P_(h,j,C){k_(h,j),0<C.length&&(h.i=null,h.g.set(Dl(h,j),w(C)),h.h+=C.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],j=Array.from(this.g.keys());for(var C=0;C<j.length;C++){var D=j[C];const Q=encodeURIComponent(String(D)),ce=this.V(D);for(D=0;D<ce.length;D++){var q=Q;ce[D]!==""&&(q+="="+encodeURIComponent(String(ce[D]))),h.push(q)}}return this.i=h.join("&")};function Dl(h,j){return j=String(j),h.j&&(j=j.toLowerCase()),j}function r5(h,j){j&&!h.j&&(la(h),h.i=null,h.g.forEach(function(C,D){var q=D.toLowerCase();D!=q&&(k_(this,D),P_(this,q,C))},h)),h.j=j}function s5(h,j){const C=new Ru;if(l.Image){const D=new Image;D.onload=v(ca,C,"TestLoadImage: loaded",!0,j,D),D.onerror=v(ca,C,"TestLoadImage: error",!1,j,D),D.onabort=v(ca,C,"TestLoadImage: abort",!1,j,D),D.ontimeout=v(ca,C,"TestLoadImage: timeout",!1,j,D),l.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=h}else j(!1)}function i5(h,j){const C=new Ru,D=new AbortController,q=setTimeout(()=>{D.abort(),ca(C,"TestPingServer: timeout",!1,j)},1e4);fetch(h,{signal:D.signal}).then(Q=>{clearTimeout(q),Q.ok?ca(C,"TestPingServer: ok",!0,j):ca(C,"TestPingServer: server error",!1,j)}).catch(()=>{clearTimeout(q),ca(C,"TestPingServer: error",!1,j)})}function ca(h,j,C,D,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),D(C)}catch{}}function a5(){this.g=new z3}function o5(h,j,C){const D=C||"";try{S_(h,function(q,Q){let ce=q;u(q)&&(ce=Rl(q)),j.push(D+Q+"="+encodeURIComponent(ce))})}catch(q){throw j.push(D+"type="+encodeURIComponent("_badmap")),q}}function Rf(h){this.l=h.Ub||null,this.j=h.eb||!1}y(Rf,Qv),Rf.prototype.g=function(){return new Mf(this.l,this.j)},Rf.prototype.i=function(h){return function(){return h}}({});function Mf(h,j){rt.call(this),this.D=h,this.o=j,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(Mf,rt),t=Mf.prototype,t.open=function(h,j){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=j,this.readyState=1,Fu(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const j={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(j.body=h),(this.D||l).fetch(new Request(this.A,j)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Vu(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Fu(this)),this.g&&(this.readyState=3,Fu(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;A_(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function A_(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var j=h.value?h.value:new Uint8Array(0);(j=this.v.decode(j,{stream:!h.done}))&&(this.response=this.responseText+=j)}h.done?Vu(this):Fu(this),this.readyState==3&&A_(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,Vu(this))},t.Qa=function(h){this.g&&(this.response=h,Vu(this))},t.ga=function(){this.g&&Vu(this)};function Vu(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Fu(h)}t.setRequestHeader=function(h,j){this.u.append(h,j)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],j=this.h.entries();for(var C=j.next();!C.done;)C=C.value,h.push(C[0]+": "+C[1]),C=j.next();return h.join(`\r
`)};function Fu(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Mf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function R_(h){let j="";return O(h,function(C,D){j+=D,j+=":",j+=C,j+=`\r
`}),j}function ax(h,j,C){e:{for(D in C){var D=!1;break e}D=!0}D||(C=R_(C),typeof h=="string"?C!=null&&encodeURIComponent(String(C)):Rt(h,j,C))}function Xt(h){rt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(Xt,rt);var l5=/^https?$/i,c5=["POST","PUT"];t=Xt.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,j,C,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);j=j?j.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Jv.g(),this.v=this.o?l_(this.o):l_(Jv),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(j,String(h),!0),this.B=!1}catch(Q){M_(this,Q);return}if(h=C||"",C=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var q in D)C.set(q,D[q]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const Q of D.keys())C.set(Q,D.get(Q));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(C.keys()).find(Q=>Q.toLowerCase()=="content-type"),q=l.FormData&&h instanceof l.FormData,!(0<=Array.prototype.indexOf.call(c5,j,void 0))||D||q||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ce]of C)this.g.setRequestHeader(Q,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{L_(this),this.u=!0,this.g.send(h),this.u=!1}catch(Q){M_(this,Q)}};function M_(h,j){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=j,h.m=5,D_(h),Df(h)}function D_(h){h.A||(h.A=!0,it(h,"complete"),it(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,it(this,"complete"),it(this,"abort"),Df(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Df(this,!0)),Xt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?O_(this):this.bb())},t.bb=function(){O_(this)};function O_(h){if(h.h&&typeof o<"u"&&(!h.v[1]||yi(h)!=4||h.Z()!=2)){if(h.u&&yi(h)==4)Nf(h.Ea,0,h);else if(it(h,"readystatechange"),yi(h)==4){h.h=!1;try{const ce=h.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var j=!0;break e;default:j=!1}var C;if(!(C=j)){var D;if(D=ce===0){var q=String(h.D).match(E_)[1]||null;!q&&l.self&&l.self.location&&(q=l.self.location.protocol.slice(0,-1)),D=!l5.test(q?q.toLowerCase():"")}C=D}if(C)it(h,"complete"),it(h,"success");else{h.m=6;try{var Q=2<yi(h)?h.g.statusText:""}catch{Q=""}h.l=Q+" ["+h.Z()+"]",D_(h)}}finally{Df(h)}}}}function Df(h,j){if(h.g){L_(h);const C=h.g,D=h.v[0]?()=>{}:null;h.g=null,h.v=null,j||it(h,"ready");try{C.onreadystatechange=D}catch{}}}function L_(h){h.I&&(l.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function yi(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<yi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var j=this.g.responseText;return h&&j.indexOf(h)==0&&(j=j.substring(h.length)),$3(j)}};function V_(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function u5(h){const j={};h=(h.g&&2<=yi(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<h.length;D++){if(g(h[D]))continue;var C=P(h[D]);const q=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const Q=j[q]||[];j[q]=Q,Q.push(C)}I(j,function(D){return D.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Uu(h,j,C){return C&&C.internalChannelParams&&C.internalChannelParams[h]||j}function F_(h){this.Aa=0,this.i=[],this.j=new Ru,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Uu("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Uu("baseRetryDelayMs",5e3,h),this.cb=Uu("retryDelaySeedMs",1e4,h),this.Wa=Uu("forwardChannelMaxRetries",2,h),this.wa=Uu("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new w_(h&&h.concurrentRequestLimit),this.Da=new a5,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=F_.prototype,t.la=8,t.G=1,t.connect=function(h,j,C,D){tr(0),this.W=h,this.H=j||{},C&&D!==void 0&&(this.H.OSID=C,this.H.OAID=D),this.F=this.X,this.I=K_(this,null,this.W),Lf(this)};function ox(h){if(U_(h),h.G==3){var j=h.U++,C=xi(h.I);if(Rt(C,"SID",h.K),Rt(C,"RID",j),Rt(C,"TYPE","terminate"),$u(h,C),j=new oa(h,h.j,j),j.L=2,j.v=Af(xi(C)),C=!1,l.navigator&&l.navigator.sendBeacon)try{C=l.navigator.sendBeacon(j.v.toString(),"")}catch{}!C&&l.Image&&(new Image().src=j.v,C=!0),C||(j.g=Y_(j.j,null),j.g.ea(j.v)),j.F=Date.now(),kf(j)}G_(h)}function Of(h){h.g&&(cx(h),h.g.cancel(),h.g=null)}function U_(h){Of(h),h.u&&(l.clearTimeout(h.u),h.u=null),Vf(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&l.clearTimeout(h.s),h.s=null)}function Lf(h){if(!b_(h.h)&&!h.s){h.s=!0;var j=h.Ga;V||L(),M||(V(),M=!0),$.add(j,h),h.B=0}}function d5(h,j){return j_(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=j.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Au(m(h.Ga,h,j),H_(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const q=new oa(this,this.j,h);let Q=this.o;if(this.S&&(Q?(Q=k(Q),N(Q,this.S)):Q=this.S),this.m!==null||this.O||(q.H=Q,Q=null),this.P)e:{for(var j=0,C=0;C<this.i.length;C++){t:{var D=this.i[C];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(j+=D,4096<j){j=C;break e}if(j===4096||C===this.i.length-1){j=C+1;break e}}j=1e3}else j=1e3;j=z_(this,q,j),C=xi(this.I),Rt(C,"RID",h),Rt(C,"CVER",22),this.D&&Rt(C,"X-HTTP-Session-Id",this.D),$u(this,C),Q&&(this.O?j="headers="+encodeURIComponent(String(R_(Q)))+"&"+j:this.m&&ax(C,this.m,Q)),ix(this.h,q),this.Ua&&Rt(C,"TYPE","init"),this.P?(Rt(C,"$req",j),Rt(C,"SID","null"),q.T=!0,tx(q,C,null)):tx(q,C,j),this.G=2}}else this.G==3&&(h?$_(this,h):this.i.length==0||b_(this.h)||$_(this))};function $_(h,j){var C;j?C=j.l:C=h.U++;const D=xi(h.I);Rt(D,"SID",h.K),Rt(D,"RID",C),Rt(D,"AID",h.T),$u(h,D),h.m&&h.o&&ax(D,h.m,h.o),C=new oa(h,h.j,C,h.B+1),h.m===null&&(C.H=h.o),j&&(h.i=j.D.concat(h.i)),j=z_(h,C,1e3),C.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),ix(h.h,C),tx(C,D,j)}function $u(h,j){h.H&&O(h.H,function(C,D){Rt(j,D,C)}),h.l&&S_({},function(C,D){Rt(j,D,C)})}function z_(h,j,C){C=Math.min(h.i.length,C);var D=h.l?m(h.l.Na,h.l,h):null;e:{var q=h.i;let Q=-1;for(;;){const ce=["count="+C];Q==-1?0<C?(Q=q[0].g,ce.push("ofs="+Q)):Q=0:ce.push("ofs="+Q);let kt=!0;for(let In=0;In<C;In++){let dt=q[In].g;const $n=q[In].map;if(dt-=Q,0>dt)Q=Math.max(0,q[In].g-100),kt=!1;else try{o5($n,ce,"req"+dt+"_")}catch{D&&D($n)}}if(kt){D=ce.join("&");break e}}}return h=h.i.splice(0,C),j.D=h,D}function B_(h){if(!h.g&&!h.u){h.Y=1;var j=h.Fa;V||L(),M||(V(),M=!0),$.add(j,h),h.v=0}}function lx(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Au(m(h.Fa,h),H_(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,q_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Au(m(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,tr(10),Of(this),q_(this))};function cx(h){h.A!=null&&(l.clearTimeout(h.A),h.A=null)}function q_(h){h.g=new oa(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var j=xi(h.qa);Rt(j,"RID","rpc"),Rt(j,"SID",h.K),Rt(j,"AID",h.T),Rt(j,"CI",h.F?"0":"1"),!h.F&&h.ja&&Rt(j,"TO",h.ja),Rt(j,"TYPE","xmlhttp"),$u(h,j),h.m&&h.o&&ax(j,h.m,h.o),h.L&&(h.g.I=h.L);var C=h.g;h=h.ia,C.L=1,C.v=Af(xi(j)),C.m=null,C.P=!0,v_(C,h)}t.Za=function(){this.C!=null&&(this.C=null,Of(this),lx(this),tr(19))};function Vf(h){h.C!=null&&(l.clearTimeout(h.C),h.C=null)}function W_(h,j){var C=null;if(h.g==j){Vf(h),cx(h),h.g=null;var D=2}else if(sx(h.h,j))C=j.D,__(h.h,j),D=1;else return;if(h.G!=0){if(j.o)if(D==1){C=j.m?j.m.length:0,j=Date.now()-j.F;var q=h.B;D=Ef(),it(D,new f_(D,C)),Lf(h)}else B_(h);else if(q=j.s,q==3||q==0&&0<j.X||!(D==1&&d5(h,j)||D==2&&lx(h)))switch(C&&0<C.length&&(j=h.h,j.i=j.i.concat(C)),q){case 1:Co(h,5);break;case 4:Co(h,10);break;case 3:Co(h,6);break;default:Co(h,2)}}}function H_(h,j){let C=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(C*=2),C*j}function Co(h,j){if(h.j.info("Error code "+j),j==2){var C=m(h.fb,h),D=h.Xa;const q=!D;D=new Eo(D||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||If(D,"https"),Af(D),q?s5(D.toString(),C):i5(D.toString(),C)}else tr(2);h.G=0,h.l&&h.l.sa(j),G_(h),U_(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),tr(2)):(this.j.info("Failed to ping google.com"),tr(1))};function G_(h){if(h.G=0,h.ka=[],h.l){const j=N_(h.h);(j.length!=0||h.i.length!=0)&&(b(h.ka,j),b(h.ka,h.i),h.h.i.length=0,w(h.i),h.i.length=0),h.l.ra()}}function K_(h,j,C){var D=C instanceof Eo?xi(C):new Eo(C);if(D.g!="")j&&(D.g=j+"."+D.g),Pf(D,D.s);else{var q=l.location;D=q.protocol,j=j?j+"."+q.hostname:q.hostname,q=+q.port;var Q=new Eo(null);D&&If(Q,D),j&&(Q.g=j),q&&Pf(Q,q),C&&(Q.l=C),D=Q}return C=h.D,j=h.ya,C&&j&&Rt(D,C,j),Rt(D,"VER",h.la),$u(h,D),D}function Y_(h,j,C){if(j&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return j=h.Ca&&!h.pa?new Xt(new Rf({eb:C})):new Xt(h.pa),j.Ha(h.J),j}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Q_(){}t=Q_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ff(){}Ff.prototype.g=function(h,j){return new Ir(h,j)};function Ir(h,j){rt.call(this),this.g=new F_(j),this.l=h,this.h=j&&j.messageUrlParams||null,h=j&&j.messageHeaders||null,j&&j.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=j&&j.initMessageHeaders||null,j&&j.messageContentType&&(h?h["X-WebChannel-Content-Type"]=j.messageContentType:h={"X-WebChannel-Content-Type":j.messageContentType}),j&&j.va&&(h?h["X-WebChannel-Client-Profile"]=j.va:h={"X-WebChannel-Client-Profile":j.va}),this.g.S=h,(h=j&&j.Sb)&&!g(h)&&(this.g.m=h),this.v=j&&j.supportsCrossDomainXhr||!1,this.u=j&&j.sendRawJson||!1,(j=j&&j.httpSessionIdParam)&&!g(j)&&(this.g.D=j,h=this.h,h!==null&&j in h&&(h=this.h,j in h&&delete h[j])),this.j=new Ol(this)}y(Ir,rt),Ir.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ir.prototype.close=function(){ox(this.g)},Ir.prototype.o=function(h){var j=this.g;if(typeof h=="string"){var C={};C.__data__=h,h=C}else this.u&&(C={},C.__data__=Rl(h),h=C);j.i.push(new K3(j.Ya++,h)),j.G==3&&Lf(j)},Ir.prototype.N=function(){this.g.l=null,delete this.j,ox(this.g),delete this.g,Ir.aa.N.call(this)};function X_(h){Xv.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var j=h.__sm__;if(j){e:{for(const C in j){h=C;break e}h=void 0}(this.i=h)&&(h=this.i,j=j!==null&&h in j?j[h]:void 0),this.data=j}else this.data=h}y(X_,Xv);function Z_(){Zv.call(this),this.status=1}y(Z_,Zv);function Ol(h){this.g=h}y(Ol,Q_),Ol.prototype.ua=function(){it(this.g,"a")},Ol.prototype.ta=function(h){it(this.g,new X_(h))},Ol.prototype.sa=function(h){it(this.g,new Z_)},Ol.prototype.ra=function(){it(this.g,"b")},Ff.prototype.createWebChannel=Ff.prototype.g,Ir.prototype.send=Ir.prototype.o,Ir.prototype.open=Ir.prototype.m,Ir.prototype.close=Ir.prototype.close,WI=function(){return new Ff},qI=function(){return Ef()},BI=No,O0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Cf.NO_ERROR=0,Cf.TIMEOUT=8,Cf.HTTP_ERROR=6,zm=Cf,m_.COMPLETE="complete",zI=m_,c_.EventType=Iu,Iu.OPEN="a",Iu.CLOSE="b",Iu.ERROR="c",Iu.MESSAGE="d",rt.prototype.listen=rt.prototype.K,ud=c_,Xt.prototype.listenOnce=Xt.prototype.L,Xt.prototype.getLastError=Xt.prototype.Ka,Xt.prototype.getLastErrorCode=Xt.prototype.Ba,Xt.prototype.getStatus=Xt.prototype.Z,Xt.prototype.getResponseJson=Xt.prototype.Oa,Xt.prototype.getResponseText=Xt.prototype.oa,Xt.prototype.send=Xt.prototype.ea,Xt.prototype.setWithCredentials=Xt.prototype.Ha,$I=Xt}).apply(typeof am<"u"?am:typeof self<"u"?self:typeof window<"u"?window:{});const Q2="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Hn.UNAUTHENTICATED=new Hn(null),Hn.GOOGLE_CREDENTIALS=new Hn("google-credentials-uid"),Hn.FIRST_PARTY=new Hn("first-party-uid"),Hn.MOCK_USER=new Hn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let du="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ll=new D1("@firebase/firestore");function Qu(){return ll.logLevel}function Te(t,...e){if(ll.logLevel<=st.DEBUG){const n=e.map(K1);ll.debug(`Firestore (${du}): ${t}`,...n)}}function qi(t,...e){if(ll.logLevel<=st.ERROR){const n=e.map(K1);ll.error(`Firestore (${du}): ${t}`,...n)}}function Oc(t,...e){if(ll.logLevel<=st.WARN){const n=e.map(K1);ll.warn(`Firestore (${du}): ${t}`,...n)}}function K1(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(t="Unexpected state"){const e=`FIRESTORE (${du}) INTERNAL ASSERTION FAILED: `+t;throw qi(e),new Error(e)}function _t(t,e){t||$e()}function qe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends fi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class D${getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Hn.UNAUTHENTICATED))}shutdown(){}}class O${constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class L${constructor(e){this.t=e,this.currentUser=Hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){_t(this.o===void 0);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let a=new Di;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Di,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=a;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Di)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_t(typeof r.accessToken=="string"),new HI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _t(e===null||typeof e=="string"),new Hn(e)}}class V${constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Hn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class F${constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new V$(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Hn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class U${constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $${constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){_t(this.o===void 0);const r=a=>{a.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.R;return this.R=a.token,Te("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(_t(typeof n.token=="string"),this.R=n.token,new U$(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z$(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=z$(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%e.length))}return r}}function ht(t,e){return t<e?-1:t>e?1:0}function Lc(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new he(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new he(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new he(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Nn.fromMillis(Date.now())}static fromDate(e){return Nn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Nn(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ht(this.nanoseconds,e.nanoseconds):ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Be(e)}static min(){return new Be(new Nn(0,0))}static max(){return new Be(new Nn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,n,r){n===void 0?n=0:n>e.length&&$e(),r===void 0?r=e.length-n:r>e.length-n&&$e(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return sh.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof sh?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=e.get(i),o=n.get(i);if(a<o)return-1;if(a>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class It extends sh{construct(e,n,r){return new It(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new he(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new It(n)}static emptyPath(){return new It([])}}const B$=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rn extends sh{construct(e,n,r){return new Rn(e,n,r)}static isValidIdentifier(e){return B$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Rn(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new he(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new he(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new he(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(a(),i++)}if(a(),o)throw new he(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Rn(n)}static emptyPath(){return new Rn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.path=e}static fromPath(e){return new Me(It.fromString(e))}static fromName(e){return new Me(It.fromString(e).popFirst(5))}static empty(){return new Me(It.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&It.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return It.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Me(new It(e.slice()))}}function q$(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Be.fromTimestamp(r===1e9?new Nn(n+1,0):new Nn(n,r));return new Qa(i,Me.empty(),e)}function W$(t){return new Qa(t.readTime,t.key,-1)}class Qa{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Qa(Be.min(),Me.empty(),-1)}static max(){return new Qa(Be.max(),Me.empty(),-1)}}function H$(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Me.comparator(t.documentKey,e.documentKey),n!==0?n:ht(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class K${constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kh(t){if(t.code!==J.FAILED_PRECONDITION||t.message!==G$)throw t;Te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&$e(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new re((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof re?n:re.resolve(n)}catch(n){return re.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):re.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):re.reject(n)}static resolve(e){return new re((n,r)=>{n(e)})}static reject(e){return new re((n,r)=>{r(e)})}static waitFor(e){return new re((n,r)=>{let i=0,a=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++a,o&&a===i&&n()},c=>r(c))}),o=!0,a===i&&n()})}static or(e){let n=re.resolve(!1);for(const r of e)n=n.next(i=>i?re.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,a)=>{r.push(n.call(this,i,a))}),this.waitFor(r)}static mapArray(e,n){return new re((r,i)=>{const a=e.length,o=new Array(a);let l=0;for(let c=0;c<a;c++){const u=c;n(e[u]).next(d=>{o[u]=d,++l,l===a&&r(o)},d=>i(d))}})}static doWhile(e,n){return new re((r,i)=>{const a=()=>{e()===!0?n().next(()=>{a()},i):r()};a()})}}function Y$(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Yh(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Y1.oe=-1;function Xg(t){return t==null}function Fp(t){return t===0&&1/t==-1/0}function Q$(t){return typeof t=="number"&&Number.isInteger(t)&&!Fp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X2(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Nl(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function KI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e,n){this.comparator=e,this.root=n||An.EMPTY}insert(e,n){return new Yt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,An.BLACK,null,null))}remove(e){return new Yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,An.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new om(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new om(this.root,e,this.comparator,!1)}getReverseIterator(){return new om(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new om(this.root,e,this.comparator,!0)}}class om{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class An{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??An.RED,this.left=i??An.EMPTY,this.right=a??An.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new An(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return An.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return An.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,An.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,An.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw $e();const e=this.left.check();if(e!==this.right.check())throw $e();return e+(this.isRed()?0:1)}}An.EMPTY=null,An.RED=!0,An.BLACK=!1;An.EMPTY=new class{constructor(){this.size=0}get key(){throw $e()}get value(){throw $e()}get color(){throw $e()}get left(){throw $e()}get right(){throw $e()}copy(e,n,r,i,a){return this}insert(e,n,r){return new An(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.comparator=e,this.data=new Yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Z2(this.data.getIterator())}getIteratorFrom(e){return new Z2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ln)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ln(this.comparator);return n.data=e,n}}class Z2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e){this.fields=e,e.sort(Rn.comparator)}static empty(){return new Or([])}unionWith(e){let n=new Ln(Rn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Or(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Lc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new YI("Invalid base64 string: "+a):a}}(e);return new Fn(n)}static fromUint8Array(e){const n=function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a}(e);return new Fn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fn.EMPTY_BYTE_STRING=new Fn("");const X$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xa(t){if(_t(!!t),typeof t=="string"){let e=0;const n=X$.exec(t);if(_t(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:rn(t.seconds),nanos:rn(t.nanos)}}function rn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function cl(t){return typeof t=="string"?Fn.fromBase64String(t):Fn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Q1(t){const e=t.mapValue.fields.__previous_value__;return Zg(e)?Q1(e):e}function ih(t){const e=Xa(t.mapValue.fields.__local_write_time__.timestampValue);return new Nn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z${constructor(e,n,r,i,a,o,l,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u}}class ah{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ah("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ah&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ul(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Zg(t)?4:e7(t)?9007199254740991:J$(t)?10:11:$e()}function oi(t,e){if(t===e)return!0;const n=ul(t);if(n!==ul(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ih(t).isEqual(ih(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=Xa(i.timestampValue),l=Xa(a.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return cl(i.bytesValue).isEqual(cl(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return rn(i.geoPointValue.latitude)===rn(a.geoPointValue.latitude)&&rn(i.geoPointValue.longitude)===rn(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return rn(i.integerValue)===rn(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=rn(i.doubleValue),l=rn(a.doubleValue);return o===l?Fp(o)===Fp(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Lc(t.arrayValue.values||[],e.arrayValue.values||[],oi);case 10:case 11:return function(i,a){const o=i.mapValue.fields||{},l=a.mapValue.fields||{};if(X2(o)!==X2(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!oi(o[c],l[c])))return!1;return!0}(t,e);default:return $e()}}function oh(t,e){return(t.values||[]).find(n=>oi(n,e))!==void 0}function Vc(t,e){if(t===e)return 0;const n=ul(t),r=ul(e);if(n!==r)return ht(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ht(t.booleanValue,e.booleanValue);case 2:return function(a,o){const l=rn(a.integerValue||a.doubleValue),c=rn(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return J2(t.timestampValue,e.timestampValue);case 4:return J2(ih(t),ih(e));case 5:return ht(t.stringValue,e.stringValue);case 6:return function(a,o){const l=cl(a),c=cl(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const l=a.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=ht(l[u],c[u]);if(d!==0)return d}return ht(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const l=ht(rn(a.latitude),rn(o.latitude));return l!==0?l:ht(rn(a.longitude),rn(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return eS(t.arrayValue,e.arrayValue);case 10:return function(a,o){var l,c,u,d;const f=a.fields||{},m=o.fields||{},v=(l=f.value)===null||l===void 0?void 0:l.arrayValue,y=(c=m.value)===null||c===void 0?void 0:c.arrayValue,w=ht(((u=v==null?void 0:v.values)===null||u===void 0?void 0:u.length)||0,((d=y==null?void 0:y.values)===null||d===void 0?void 0:d.length)||0);return w!==0?w:eS(v,y)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===lm.mapValue&&o===lm.mapValue)return 0;if(a===lm.mapValue)return 1;if(o===lm.mapValue)return-1;const l=a.fields||{},c=Object.keys(l),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const m=ht(c[f],d[f]);if(m!==0)return m;const v=Vc(l[c[f]],u[d[f]]);if(v!==0)return v}return ht(c.length,d.length)}(t.mapValue,e.mapValue);default:throw $e()}}function J2(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ht(t,e);const n=Xa(t),r=Xa(e),i=ht(n.seconds,r.seconds);return i!==0?i:ht(n.nanos,r.nanos)}function eS(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=Vc(n[i],r[i]);if(a)return a}return ht(n.length,r.length)}function Fc(t){return L0(t)}function L0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Xa(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return cl(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Me.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=L0(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const o of r)a?a=!1:i+=",",i+=`${o}:${L0(n.fields[o])}`;return i+"}"}(t.mapValue):$e()}function Up(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function V0(t){return!!t&&"integerValue"in t}function X1(t){return!!t&&"arrayValue"in t}function tS(t){return!!t&&"nullValue"in t}function nS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Bm(t){return!!t&&"mapValue"in t}function J$(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function kd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Nl(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=kd(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=kd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function e7(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e){this.value=e}static empty(){return new wr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Bm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=kd(n)}setAll(e){let n=Rn.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=kd(o):i.push(l.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());Bm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return oi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Bm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Nl(n,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new wr(kd(this.value))}}function QI(t){const e=[];return Nl(t.fields,(n,r)=>{const i=new Rn([n]);if(Bm(r)){const a=QI(r.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)}),new Or(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,n,r,i,a,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Kn(e,0,Be.min(),Be.min(),Be.min(),wr.empty(),0)}static newFoundDocument(e,n,r,i){return new Kn(e,1,n,Be.min(),r,i,0)}static newNoDocument(e,n){return new Kn(e,2,n,Be.min(),Be.min(),wr.empty(),0)}static newUnknownDocument(e,n){return new Kn(e,3,n,Be.min(),Be.min(),wr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Kn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Kn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,n){this.position=e,this.inclusive=n}}function rS(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],o=t.position[i];if(a.field.isKeyField()?r=Me.comparator(Me.fromName(o.referenceValue),n.key):r=Vc(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function sS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!oi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,n="asc"){this.field=e,this.dir=n}}function t7(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let XI=class{};class dn extends XI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new r7(e,n,r):n==="array-contains"?new a7(e,r):n==="in"?new o7(e,r):n==="not-in"?new l7(e,r):n==="array-contains-any"?new c7(e,r):new dn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new s7(e,r):new i7(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Vc(n,this.value)):n!==null&&ul(this.value)===ul(n)&&this.matchesComparison(Vc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $e()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Is extends XI{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Is(e,n)}matches(e){return ZI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ZI(t){return t.op==="and"}function JI(t){return n7(t)&&ZI(t)}function n7(t){for(const e of t.filters)if(e instanceof Is)return!1;return!0}function F0(t){if(t instanceof dn)return t.field.canonicalString()+t.op.toString()+Fc(t.value);if(JI(t))return t.filters.map(e=>F0(e)).join(",");{const e=t.filters.map(n=>F0(n)).join(",");return`${t.op}(${e})`}}function eP(t,e){return t instanceof dn?function(r,i){return i instanceof dn&&r.op===i.op&&r.field.isEqual(i.field)&&oi(r.value,i.value)}(t,e):t instanceof Is?function(r,i){return i instanceof Is&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,o,l)=>a&&eP(o,i.filters[l]),!0):!1}(t,e):void $e()}function tP(t){return t instanceof dn?function(n){return`${n.field.canonicalString()} ${n.op} ${Fc(n.value)}`}(t):t instanceof Is?function(n){return n.op.toString()+" {"+n.getFilters().map(tP).join(" ,")+"}"}(t):"Filter"}class r7 extends dn{constructor(e,n,r){super(e,n,r),this.key=Me.fromName(r.referenceValue)}matches(e){const n=Me.comparator(e.key,this.key);return this.matchesComparison(n)}}class s7 extends dn{constructor(e,n){super(e,"in",n),this.keys=nP("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class i7 extends dn{constructor(e,n){super(e,"not-in",n),this.keys=nP("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function nP(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Me.fromName(r.referenceValue))}class a7 extends dn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return X1(n)&&oh(n.arrayValue,this.value)}}class o7 extends dn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&oh(this.value.arrayValue,n)}}class l7 extends dn{constructor(e,n){super(e,"not-in",n)}matches(e){if(oh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!oh(this.value.arrayValue,n)}}class c7 extends dn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!X1(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>oh(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u7{constructor(e,n=null,r=[],i=[],a=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=l,this.ue=null}}function iS(t,e=null,n=[],r=[],i=null,a=null,o=null){return new u7(t,e,n,r,i,a,o)}function Z1(t){const e=qe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>F0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),Xg(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Fc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Fc(r)).join(",")),e.ue=n}return e.ue}function J1(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!t7(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!eP(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!sS(t.startAt,e.startAt)&&sS(t.endAt,e.endAt)}function U0(t){return Me.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e,n=null,r=[],i=[],a=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function d7(t,e,n,r,i,a,o,l){return new Sl(t,e,n,r,i,a,o,l)}function Jg(t){return new Sl(t)}function aS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function eb(t){return t.collectionGroup!==null}function wc(t){const e=qe(t);if(e.ce===null){e.ce=[];const n=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Ln(Rn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.ce.push(new lh(a,r))}),n.has(Rn.keyField().canonicalString())||e.ce.push(new lh(Rn.keyField(),r))}return e.ce}function ni(t){const e=qe(t);return e.le||(e.le=h7(e,wc(t))),e.le}function h7(t,e){if(t.limitType==="F")return iS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new lh(i.field,a)});const n=t.endAt?new Uc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Uc(t.startAt.position,t.startAt.inclusive):null;return iS(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function $0(t,e){const n=t.filters.concat([e]);return new Sl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function $p(t,e,n){return new Sl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ev(t,e){return J1(ni(t),ni(e))&&t.limitType===e.limitType}function rP(t){return`${Z1(ni(t))}|lt:${t.limitType}`}function Hl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>tP(i)).join(", ")}]`),Xg(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Fc(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Fc(i)).join(",")),`Target(${r})`}(ni(t))}; limitType=${t.limitType})`}function tv(t,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Me.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,i){for(const a of wc(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,c){const u=rS(o,l,c);return o.inclusive?u<=0:u<0}(r.startAt,wc(r),i)||r.endAt&&!function(o,l,c){const u=rS(o,l,c);return o.inclusive?u>=0:u>0}(r.endAt,wc(r),i))}(t,e)}function f7(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function sP(t){return(e,n)=>{let r=!1;for(const i of wc(t)){const a=m7(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function m7(t,e,n){const r=t.field.isKeyField()?Me.comparator(e.key,n.key):function(a,o,l){const c=o.data.field(a),u=l.data.field(a);return c!==null&&u!==null?Vc(c,u):$e()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return $e()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Nl(this.inner,(n,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return KI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p7=new Yt(Me.comparator);function Wi(){return p7}const iP=new Yt(Me.comparator);function dd(...t){let e=iP;for(const n of t)e=e.insert(n.key,n);return e}function aP(t){let e=iP;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Fo(){return Id()}function oP(){return Id()}function Id(){return new hu(t=>t.toString(),(t,e)=>t.isEqual(e))}const g7=new Yt(Me.comparator),v7=new Ln(Me.comparator);function et(...t){let e=v7;for(const n of t)e=e.add(n);return e}const x7=new Ln(ht);function y7(){return x7}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tb(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fp(e)?"-0":e}}function lP(t){return{integerValue:""+t}}function w7(t,e){return Q$(e)?lP(e):tb(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(){this._=void 0}}function b7(t,e,n){return t instanceof ch?function(i,a){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Zg(a)&&(a=Q1(a)),a&&(o.fields.__previous_value__=a),{mapValue:o}}(n,e):t instanceof uh?uP(t,e):t instanceof dh?dP(t,e):function(i,a){const o=cP(i,a),l=oS(o)+oS(i.Pe);return V0(o)&&V0(i.Pe)?lP(l):tb(i.serializer,l)}(t,e)}function j7(t,e,n){return t instanceof uh?uP(t,e):t instanceof dh?dP(t,e):n}function cP(t,e){return t instanceof zp?function(r){return V0(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class ch extends nv{}class uh extends nv{constructor(e){super(),this.elements=e}}function uP(t,e){const n=hP(e);for(const r of t.elements)n.some(i=>oi(i,r))||n.push(r);return{arrayValue:{values:n}}}class dh extends nv{constructor(e){super(),this.elements=e}}function dP(t,e){let n=hP(e);for(const r of t.elements)n=n.filter(i=>!oi(i,r));return{arrayValue:{values:n}}}class zp extends nv{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function oS(t){return rn(t.integerValue||t.doubleValue)}function hP(t){return X1(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _7{constructor(e,n){this.field=e,this.transform=n}}function N7(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof uh&&i instanceof uh||r instanceof dh&&i instanceof dh?Lc(r.elements,i.elements,oi):r instanceof zp&&i instanceof zp?oi(r.Pe,i.Pe):r instanceof ch&&i instanceof ch}(t.transform,e.transform)}class S7{constructor(e,n){this.version=e,this.transformResults=n}}class dr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new dr}static exists(e){return new dr(void 0,e)}static updateTime(e){return new dr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class rv{}function fP(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new sv(t.key,dr.none()):new Qh(t.key,t.data,dr.none());{const n=t.data,r=wr.empty();let i=new Ln(Rn.comparator);for(let a of e.fields)if(!i.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),i=i.add(a)}return new go(t.key,r,new Or(i.toArray()),dr.none())}}function E7(t,e,n){t instanceof Qh?function(i,a,o){const l=i.value.clone(),c=cS(i.fieldTransforms,a,o.transformResults);l.setAll(c),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof go?function(i,a,o){if(!qm(i.precondition,a))return void a.convertToUnknownDocument(o.version);const l=cS(i.fieldTransforms,a,o.transformResults),c=a.data;c.setAll(mP(i)),c.setAll(l),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Pd(t,e,n,r){return t instanceof Qh?function(a,o,l,c){if(!qm(a.precondition,o))return l;const u=a.value.clone(),d=uS(a.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof go?function(a,o,l,c){if(!qm(a.precondition,o))return l;const u=uS(a.fieldTransforms,c,o),d=o.data;return d.setAll(mP(a)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(a,o,l){return qm(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function C7(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=cP(r.transform,i||null);a!=null&&(n===null&&(n=wr.empty()),n.set(r.field,a))}return n||null}function lS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Lc(r,i,(a,o)=>N7(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Qh extends rv{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class go extends rv{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function mP(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function cS(t,e,n){const r=new Map;_t(t.length===n.length);for(let i=0;i<n.length;i++){const a=t[i],o=a.transform,l=e.data.field(a.field);r.set(a.field,j7(o,l,n[i]))}return r}function uS(t,e,n){const r=new Map;for(const i of t){const a=i.transform,o=n.data.field(i.field);r.set(i.field,b7(a,o,e))}return r}class sv extends rv{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class T7 extends rv{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k7{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&E7(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Pd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Pd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=oP();return this.mutations.forEach(i=>{const a=e.get(i.key),o=a.overlayedDocument;let l=this.applyToLocalView(o,a.mutatedFields);l=n.has(i.key)?null:l;const c=fP(o,l);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Be.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),et())}isEqual(e){return this.batchId===e.batchId&&Lc(this.mutations,e.mutations,(n,r)=>lS(n,r))&&Lc(this.baseMutations,e.baseMutations,(n,r)=>lS(n,r))}}class nb{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){_t(e.mutations.length===r.length);let i=function(){return g7}();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new nb(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let I7=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P7{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cn,at;function A7(t){switch(t){default:return $e();case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0}}function pP(t){if(t===void 0)return qi("GRPC error has no .code"),J.UNKNOWN;switch(t){case cn.OK:return J.OK;case cn.CANCELLED:return J.CANCELLED;case cn.UNKNOWN:return J.UNKNOWN;case cn.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case cn.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case cn.INTERNAL:return J.INTERNAL;case cn.UNAVAILABLE:return J.UNAVAILABLE;case cn.UNAUTHENTICATED:return J.UNAUTHENTICATED;case cn.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case cn.NOT_FOUND:return J.NOT_FOUND;case cn.ALREADY_EXISTS:return J.ALREADY_EXISTS;case cn.PERMISSION_DENIED:return J.PERMISSION_DENIED;case cn.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case cn.ABORTED:return J.ABORTED;case cn.OUT_OF_RANGE:return J.OUT_OF_RANGE;case cn.UNIMPLEMENTED:return J.UNIMPLEMENTED;case cn.DATA_LOSS:return J.DATA_LOSS;default:return $e()}}(at=cn||(cn={}))[at.OK=0]="OK",at[at.CANCELLED=1]="CANCELLED",at[at.UNKNOWN=2]="UNKNOWN",at[at.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",at[at.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",at[at.NOT_FOUND=5]="NOT_FOUND",at[at.ALREADY_EXISTS=6]="ALREADY_EXISTS",at[at.PERMISSION_DENIED=7]="PERMISSION_DENIED",at[at.UNAUTHENTICATED=16]="UNAUTHENTICATED",at[at.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",at[at.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",at[at.ABORTED=10]="ABORTED",at[at.OUT_OF_RANGE=11]="OUT_OF_RANGE",at[at.UNIMPLEMENTED=12]="UNIMPLEMENTED",at[at.INTERNAL=13]="INTERNAL",at[at.UNAVAILABLE=14]="UNAVAILABLE",at[at.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R7(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M7=new Bo([4294967295,4294967295],0);function dS(t){const e=R7().encode(t),n=new UI;return n.update(e),new Uint8Array(n.digest())}function hS(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Bo([n,r],0),new Bo([i,a],0)]}class rb{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new hd(`Invalid padding: ${n}`);if(r<0)throw new hd(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new hd(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new hd(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Bo.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Bo.fromNumber(r)));return i.compare(M7)===1&&(i=new Bo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=dS(e),[r,i]=hS(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,i,a);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new rb(a,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=dS(e),[r,i]=hS(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,i,a);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class hd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Xh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new iv(Be.min(),i,new Yt(ht),Wi(),et())}}class Xh{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Xh(r,n,et(),et(),et())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class gP{constructor(e,n){this.targetId=e,this.me=n}}class vP{constructor(e,n,r=Fn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class fS{constructor(){this.fe=0,this.ge=pS(),this.pe=Fn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=et(),n=et(),r=et();return this.ge.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:$e()}}),new Xh(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=pS()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,_t(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class D7{constructor(e){this.Le=e,this.Be=new Map,this.ke=Wi(),this.qe=mS(),this.Qe=new Yt(ht)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:$e()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const a=i.target;if(U0(a))if(r===0){const o=new Me(a.path);this.Ue(n,o,Kn.newNoDocument(o,Be.min()))}else _t(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),c=l?this.Xe(l,e,o):1;if(c!==0){this.je(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let o,l;try{o=cl(r).toUint8Array()}catch(c){if(c instanceof YI)return Oc("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new rb(o,i,a)}catch(c){return Oc(c instanceof hd?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(a=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,a,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((a,o)=>{const l=this.Je(o);if(l){if(a.current&&U0(l.target)){const c=new Me(l.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Kn.newNoDocument(c,e))}a.be&&(n.set(o,a.ve()),a.Ce())}});let r=et();this.qe.forEach((a,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(a))}),this.ke.forEach((a,o)=>o.setReadTime(e));const i=new iv(e,n,this.Qe,this.ke,r);return this.ke=Wi(),this.qe=mS(),this.Qe=new Yt(ht),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new fS,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ln(ht),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Te("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new fS),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function mS(){return new Yt(Me.comparator)}function pS(){return new Yt(Me.comparator)}const O7={asc:"ASCENDING",desc:"DESCENDING"},L7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},V7={and:"AND",or:"OR"};class F7{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function z0(t,e){return t.useProto3Json||Xg(e)?e:{value:e}}function Bp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xP(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function U7(t,e){return Bp(t,e.toTimestamp())}function ri(t){return _t(!!t),Be.fromTimestamp(function(n){const r=Xa(n);return new Nn(r.seconds,r.nanos)}(t))}function sb(t,e){return B0(t,e).canonicalString()}function B0(t,e){const n=function(i){return new It(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function yP(t){const e=It.fromString(t);return _t(NP(e)),e}function q0(t,e){return sb(t.databaseId,e.path)}function Hx(t,e){const n=yP(e);if(n.get(1)!==t.databaseId.projectId)throw new he(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new he(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Me(bP(n))}function wP(t,e){return sb(t.databaseId,e)}function $7(t){const e=yP(t);return e.length===4?It.emptyPath():bP(e)}function W0(t){return new It(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function bP(t){return _t(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function gS(t,e,n){return{name:q0(t,e),fields:n.value.mapValue.fields}}function z7(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:$e()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(u,d){return u.useProto3Json?(_t(d===void 0||typeof d=="string"),Fn.fromBase64String(d||"")):(_t(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Fn.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const d=u.code===void 0?J.UNKNOWN:pP(u.code);return new he(d,u.message||"")}(o);n=new vP(r,i,a,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Hx(t,r.document.name),a=ri(r.document.updateTime),o=r.document.createTime?ri(r.document.createTime):Be.min(),l=new wr({mapValue:{fields:r.document.fields}}),c=Kn.newFoundDocument(i,a,o,l),u=r.targetIds||[],d=r.removedTargetIds||[];n=new Wm(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Hx(t,r.document),a=r.readTime?ri(r.readTime):Be.min(),o=Kn.newNoDocument(i,a),l=r.removedTargetIds||[];n=new Wm([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Hx(t,r.document),a=r.removedTargetIds||[];n=new Wm([],a,i,null)}else{if(!("filter"in e))return $e();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,o=new P7(i,a),l=r.targetId;n=new gP(l,o)}}return n}function B7(t,e){let n;if(e instanceof Qh)n={update:gS(t,e.key,e.value)};else if(e instanceof sv)n={delete:q0(t,e.key)};else if(e instanceof go)n={update:gS(t,e.key,e.data),updateMask:Z7(e.fieldMask)};else{if(!(e instanceof T7))return $e();n={verify:q0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,o){const l=o.transform;if(l instanceof ch)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof uh)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof dh)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof zp)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw $e()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:U7(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:$e()}(t,e.precondition)),n}function q7(t,e){return t&&t.length>0?(_t(e!==void 0),t.map(n=>function(i,a){let o=i.updateTime?ri(i.updateTime):ri(a);return o.isEqual(Be.min())&&(o=ri(a)),new S7(o,i.transformResults||[])}(n,e))):[]}function W7(t,e){return{documents:[wP(t,e.path)]}}function H7(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=wP(t,i);const a=function(u){if(u.length!==0)return _P(Is.create(u,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const o=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:Gl(m.field),direction:Y7(m.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=z0(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function G7(t){let e=$7(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){_t(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let a=[];n.where&&(a=function(f){const m=jP(f);return m instanceof Is&&JI(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(y){return new lh(Kl(y.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(f){let m;return m=typeof f=="object"?f.value:f,Xg(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(f){const m=!!f.before,v=f.values||[];return new Uc(v,m)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const m=!f.before,v=f.values||[];return new Uc(v,m)}(n.endAt)),d7(e,i,o,a,l,"F",c,u)}function K7(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $e()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function jP(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Kl(n.unaryFilter.field);return dn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Kl(n.unaryFilter.field);return dn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Kl(n.unaryFilter.field);return dn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Kl(n.unaryFilter.field);return dn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return $e()}}(t):t.fieldFilter!==void 0?function(n){return dn.create(Kl(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return $e()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Is.create(n.compositeFilter.filters.map(r=>jP(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return $e()}}(n.compositeFilter.op))}(t):$e()}function Y7(t){return O7[t]}function Q7(t){return L7[t]}function X7(t){return V7[t]}function Gl(t){return{fieldPath:t.canonicalString()}}function Kl(t){return Rn.fromServerFormat(t.fieldPath)}function _P(t){return t instanceof dn?function(n){if(n.op==="=="){if(nS(n.value))return{unaryFilter:{field:Gl(n.field),op:"IS_NAN"}};if(tS(n.value))return{unaryFilter:{field:Gl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(nS(n.value))return{unaryFilter:{field:Gl(n.field),op:"IS_NOT_NAN"}};if(tS(n.value))return{unaryFilter:{field:Gl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gl(n.field),op:Q7(n.op),value:n.value}}}(t):t instanceof Is?function(n){const r=n.getFilters().map(i=>_P(i));return r.length===1?r[0]:{compositeFilter:{op:X7(n.op),filters:r}}}(t):$e()}function Z7(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function NP(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e,n,r,i,a=Be.min(),o=Be.min(),l=Fn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Pa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Pa(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Pa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Pa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J7{constructor(e){this.ct=e}}function ez(t){const e=G7({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?$p(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tz{constructor(){this.un=new nz}addToCollectionParentIndex(e,n){return this.un.add(n),re.resolve()}getCollectionParents(e,n){return re.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return re.resolve()}deleteFieldIndex(e,n){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,n){return re.resolve()}getDocumentsMatchingTarget(e,n){return re.resolve(null)}getIndexType(e,n){return re.resolve(0)}getFieldIndexes(e,n){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,n){return re.resolve(Qa.min())}getMinOffsetFromCollectionGroup(e,n){return re.resolve(Qa.min())}updateCollectionGroup(e,n,r){return re.resolve()}updateIndexEntries(e,n){return re.resolve()}}class nz{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ln(It.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ln(It.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new $c(0)}static kn(){return new $c(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rz{constructor(){this.changes=new hu(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Kn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?re.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sz{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iz{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Pd(r.mutation,i,Or.empty(),Nn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,et()).next(()=>r))}getLocalViewOfDocuments(e,n,r=et()){const i=Fo();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(a=>{let o=dd();return a.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Fo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,et()))}populateOverlays(e,n,r){const i=[];return r.forEach(a=>{n.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let a=Wi();const o=Id(),l=function(){return Id()}();return n.forEach((c,u)=>{const d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof go)?a=a.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),Pd(d.mutation,u,d.mutation.getFieldMask(),Nn.now())):o.set(u.key,Or.empty())}),this.recalculateAndSaveOverlays(e,a).next(c=>(c.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>{var f;return l.set(u,new sz(d,(f=o.get(u))!==null&&f!==void 0?f:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Id();let i=new Yt((o,l)=>o-l),a=et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let d=r.get(c)||Or.empty();d=l.applyToLocalView(u,d),r.set(c,d);const f=(i.get(l.batchId)||et()).add(c);i=i.insert(l.batchId,f)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,f=oP();d.forEach(m=>{if(!a.has(m)){const v=fP(n.get(m),r.get(m));v!==null&&f.set(m,v),a=a.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return re.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return Me.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):eb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):re.resolve(Fo());let l=-1,c=a;return o.next(u=>re.forEach(u,(d,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),a.get(d)?re.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{c=c.insert(d,m)}))).next(()=>this.populateOverlays(e,u,a)).next(()=>this.computeViews(e,c,u,et())).next(d=>({batchId:l,changes:aP(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Me(n)).next(r=>{let i=dd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let o=dd();return this.indexManager.getCollectionParents(e,a).next(l=>re.forEach(l,c=>{const u=function(f,m){return new Sl(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i))).next(o=>{a.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,Kn.newInvalidDocument(d)))});let l=dd();return o.forEach((c,u)=>{const d=a.get(c);d!==void 0&&Pd(d.mutation,u,Or.empty(),Nn.now()),tv(n,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class az{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return re.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ri(i.createTime)}}(n)),re.resolve()}getNamedQuery(e,n){return re.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:ez(i.bundledQuery),readTime:ri(i.readTime)}}(n)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oz{constructor(){this.overlays=new Yt(Me.comparator),this.Ir=new Map}getOverlay(e,n){return re.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Fo();return re.forEach(n,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,a)=>{this.ht(e,n,a)}),re.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(r)),re.resolve()}getOverlaysForCollection(e,n,r){const i=Fo(),a=n.length+1,o=new Me(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===a&&c.largestBatchId>r&&i.set(c.getKey(),c)}return re.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new Yt((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=a.get(u.largestBatchId);d===null&&(d=Fo(),a=a.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=Fo(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=i)););return re.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new I7(n,r));let a=this.Ir.get(n);a===void 0&&(a=et(),this.Ir.set(n,a)),this.Ir.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lz{constructor(){this.sessionToken=Fn.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(){this.Tr=new Ln(Cn.Er),this.dr=new Ln(Cn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Cn(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Cn(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Me(new It([])),r=new Cn(n,e),i=new Cn(n,e+1),a=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),a.push(o.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Me(new It([])),r=new Cn(n,e),i=new Cn(n,e+1);let a=et();return this.dr.forEachInRange([r,i],o=>{a=a.add(o.key)}),a}containsKey(e){const n=new Cn(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Cn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Me.comparator(e.key,n.key)||ht(e.wr,n.wr)}static Ar(e,n){return ht(e.wr,n.wr)||Me.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cz{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ln(Cn.Er)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new k7(a,n,r,i);this.mutationQueue.push(o);for(const l of i)this.br=this.br.add(new Cn(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return re.resolve(o)}lookupMutationBatch(e,n){return re.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),a=i<0?0:i;return re.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Cn(n,0),i=new Cn(n,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,i],o=>{const l=this.Dr(o.wr);a.push(l)}),re.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ln(ht);return n.forEach(i=>{const a=new Cn(i,0),o=new Cn(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,o],l=>{r=r.add(l.wr)})}),re.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;Me.isDocumentKey(a)||(a=a.child(""));const o=new Cn(new Me(a),0);let l=new Ln(ht);return this.br.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(l=l.add(c.wr)),!0)},o),re.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){_t(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return re.forEach(n.mutations,i=>{const a=new Cn(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Cn(n,0),i=this.br.firstAfterOrEqual(r);return re.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uz{constructor(e){this.Mr=e,this.docs=function(){return new Yt(Me.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return re.resolve(r?r.document.mutableCopy():Kn.newInvalidDocument(n))}getEntries(e,n){let r=Wi();return n.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Kn.newInvalidDocument(i))}),re.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=Wi();const o=n.path,l=new Me(o.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||H$(W$(d),r)<=0||(i.has(d.key)||tv(n,d))&&(a=a.insert(d.key,d.mutableCopy()))}return re.resolve(a)}getAllFromCollectionGroup(e,n,r,i){$e()}Or(e,n){return re.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new dz(this)}getSize(e){return re.resolve(this.size)}}class dz extends rz{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),re.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hz{constructor(e){this.persistence=e,this.Nr=new hu(n=>Z1(n),J1),this.lastRemoteSnapshotVersion=Be.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ib,this.targetCount=0,this.kr=$c.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),re.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new $c(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,re.resolve()}updateTargetData(e,n){return this.Kn(n),re.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),re.waitFor(a).next(()=>i)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return re.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),re.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach(o=>{a.push(i.markPotentiallyOrphaned(e,o))}),re.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),re.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return re.resolve(r)}containsKey(e,n){return re.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fz{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Y1(0),this.Kr=!1,this.Kr=!0,this.$r=new lz,this.referenceDelegate=e(this),this.Ur=new hz(this),this.indexManager=new tz,this.remoteDocumentCache=function(i){return new uz(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new J7(n),this.Gr=new az(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new oz,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new cz(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Te("MemoryPersistence","Starting transaction:",e);const i=new mz(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(a=>this.referenceDelegate.jr(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Hr(e,n){return re.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class mz extends K${constructor(e){super(),this.currentSequenceNumber=e}}class ab{constructor(e){this.persistence=e,this.Jr=new ib,this.Yr=null}static Zr(e){return new ab(e)}get Xr(){if(this.Yr)return this.Yr;throw $e()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),re.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),re.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(a=>this.Xr.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.Xr,r=>{const i=Me.fromPath(r);return this.ei(e,i).next(a=>{a||n.removeEntry(i,Be.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return re.or([()=>re.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=et(),i=et();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new ob(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pz{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gz{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return ZF()?8:Y$(Jn())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.Yi(e,n).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.Zi(e,n,i,r).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new pz;return this.Xi(e,n,o).next(l=>{if(a.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>a.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Qu()<=st.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",Hl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),re.resolve()):(Qu()<=st.DEBUG&&Te("QueryEngine","Query:",Hl(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Qu()<=st.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",Hl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ni(n))):re.resolve())}Yi(e,n){if(aS(n))return re.resolve(null);let r=ni(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=$p(n,null,"F"),r=ni(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const o=et(...a);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.ts(n,l);return this.ns(n,u,o,c.readTime)?this.Yi(e,$p(n,null,"F")):this.rs(e,u,n,c)}))})))}Zi(e,n,r,i){return aS(n)||i.isEqual(Be.min())?re.resolve(null):this.Ji.getDocuments(e,r).next(a=>{const o=this.ts(n,a);return this.ns(n,o,r,i)?re.resolve(null):(Qu()<=st.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Hl(n)),this.rs(e,o,n,q$(i,-1)).next(l=>l))})}ts(e,n){let r=new Ln(sP(e));return n.forEach((i,a)=>{tv(e,a)&&(r=r.add(a))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Xi(e,n,r){return Qu()<=st.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",Hl(n)),this.Ji.getDocumentsMatchingQuery(e,n,Qa.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(a=>(n.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vz{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Yt(ht),this._s=new hu(a=>Z1(a),J1),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iz(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function xz(t,e,n,r){return new vz(t,e,n,r)}async function SP(t,e){const n=qe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const o=[],l=[];let c=et();for(const u of i){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of a){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:l}))})})}function yz(t,e){const n=qe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const f=u.batch,m=f.keys();let v=re.resolve();return m.forEach(y=>{v=v.next(()=>d.getEntry(c,y)).next(w=>{const b=u.docVersions.get(y);_t(b!==null),w.version.compareTo(b)<0&&(f.applyToRemoteDocument(w,u),w.isValidDocument()&&(w.setReadTime(u.commitVersion),d.addEntry(w)))})}),v.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=et();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function EP(t){const e=qe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function wz(t,e){const n=qe(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const l=[];e.targetChanges.forEach((d,f)=>{const m=i.get(f);if(!m)return;l.push(n.Ur.removeMatchingKeys(a,d.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(a,d.addedDocuments,f)));let v=m.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(f)!==null?v=v.withResumeToken(Fn.EMPTY_BYTE_STRING,Be.min()).withLastLimboFreeSnapshotVersion(Be.min()):d.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(d.resumeToken,r)),i=i.insert(f,v),function(w,b,x){return w.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(m,v,d)&&l.push(n.Ur.updateTargetData(a,v))});let c=Wi(),u=et();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(a,d))}),l.push(bz(a,o,e.documentUpdates).next(d=>{c=d.Ps,u=d.Is})),!r.isEqual(Be.min())){const d=n.Ur.getLastRemoteSnapshotVersion(a).next(f=>n.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r));l.push(d)}return re.waitFor(l).next(()=>o.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,c,u)).next(()=>c)}).then(a=>(n.os=i,a))}function bz(t,e,n){let r=et(),i=et();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let o=Wi();return n.forEach((l,c)=>{const u=a.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(Be.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):Te("LocalStore","Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function jz(t,e){const n=qe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function _z(t,e){const n=qe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(a=>a?(i=a,re.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Pa(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function H0(t,e,n){const r=qe(t),i=r.os.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Yh(o))throw o;Te("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function vS(t,e,n){const r=qe(t);let i=Be.min(),a=et();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const f=qe(c),m=f._s.get(d);return m!==void 0?re.resolve(f.os.get(m)):f.Ur.getTargetData(u,d)}(r,o,ni(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(c=>{a=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:Be.min(),n?a:et())).next(l=>(Nz(r,f7(e),l),{documents:l,Ts:a})))}function Nz(t,e,n){let r=t.us.get(e)||Be.min();n.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.us.set(e,r)}class xS{constructor(){this.activeTargetIds=y7()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Sz{constructor(){this.so=new xS,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new xS,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ez{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Te("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Te("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cm=null;function Gx(){return cm===null?cm=function(){return 268435456+Math.round(2147483648*Math.random())}():cm++,"0x"+cm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tz{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wn="WebChannelConnection";class kz extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${a}`}get Fo(){return!1}Mo(n,r,i,a,o){const l=Gx(),c=this.xo(n,r.toUriEncodedString());Te("RestConnection",`Sending RPC '${n}' ${l}:`,c,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,a,o),this.No(n,c,u,i).then(d=>(Te("RestConnection",`Received RPC '${n}' ${l}: `,d),d),d=>{throw Oc("RestConnection",`RPC '${n}' ${l} failed with error: `,d,"url: ",c,"request:",i),d})}Lo(n,r,i,a,o,l){return this.Mo(n,r,i,a,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+du}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,o)=>n[o]=a),i&&i.headers.forEach((a,o)=>n[o]=a)}xo(n,r){const i=Cz[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const a=Gx();return new Promise((o,l)=>{const c=new $I;c.setWithCredentials(!0),c.listenOnce(zI.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case zm.NO_ERROR:const d=c.getResponseJson();Te(Wn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(d)),o(d);break;case zm.TIMEOUT:Te(Wn,`RPC '${e}' ${a} timed out`),l(new he(J.DEADLINE_EXCEEDED,"Request time out"));break;case zm.HTTP_ERROR:const f=c.getStatus();if(Te(Wn,`RPC '${e}' ${a} failed with status:`,f,"response text:",c.getResponseText()),f>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const v=m==null?void 0:m.error;if(v&&v.status&&v.message){const y=function(b){const x=b.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(x)>=0?x:J.UNKNOWN}(v.status);l(new he(y,v.message))}else l(new he(J.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new he(J.UNAVAILABLE,"Connection failed."));break;default:$e()}}finally{Te(Wn,`RPC '${e}' ${a} completed.`)}});const u=JSON.stringify(i);Te(Wn,`RPC '${e}' ${a} sending request:`,i),c.send(n,"POST",u,r,15)})}Bo(e,n,r){const i=Gx(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=WI(),l=qI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=a.join("");Te(Wn,`Creating RPC '${e}' stream ${i}: ${d}`,c);const f=o.createWebChannel(d,c);let m=!1,v=!1;const y=new Tz({Io:b=>{v?Te(Wn,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(m||(Te(Wn,`Opening RPC '${e}' stream ${i} transport.`),f.open(),m=!0),Te(Wn,`RPC '${e}' stream ${i} sending:`,b),f.send(b))},To:()=>f.close()}),w=(b,x,g)=>{b.listen(x,_=>{try{g(_)}catch(E){setTimeout(()=>{throw E},0)}})};return w(f,ud.EventType.OPEN,()=>{v||(Te(Wn,`RPC '${e}' stream ${i} transport opened.`),y.yo())}),w(f,ud.EventType.CLOSE,()=>{v||(v=!0,Te(Wn,`RPC '${e}' stream ${i} transport closed`),y.So())}),w(f,ud.EventType.ERROR,b=>{v||(v=!0,Oc(Wn,`RPC '${e}' stream ${i} transport errored:`,b),y.So(new he(J.UNAVAILABLE,"The operation could not be completed")))}),w(f,ud.EventType.MESSAGE,b=>{var x;if(!v){const g=b.data[0];_t(!!g);const _=g,E=_.error||((x=_[0])===null||x===void 0?void 0:x.error);if(E){Te(Wn,`RPC '${e}' stream ${i} received error:`,E);const S=E.status;let O=function(R){const N=cn[R];if(N!==void 0)return pP(N)}(S),I=E.message;O===void 0&&(O=J.INTERNAL,I="Unknown error status: "+S+" with message "+E.message),v=!0,y.So(new he(O,I)),f.close()}else Te(Wn,`RPC '${e}' stream ${i} received:`,g),y.bo(g)}}),w(l,BI.STAT_EVENT,b=>{b.stat===O0.PROXY?Te(Wn,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===O0.NOPROXY&&Te(Wn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}}function Kx(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(t){return new F7(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e,n,r=1e3,i=1.5,a=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&Te("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e,n,r,i,a,o,l,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new CP(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===J.RESOURCE_EXHAUSTED?(qi(n.toString()),qi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new he(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Te("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Te("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Iz extends TP{constructor(e,n,r,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=a}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=z7(this.serializer,e),r=function(a){if(!("targetChange"in a))return Be.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?Be.min():o.readTime?ri(o.readTime):Be.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=W0(this.serializer),n.addTarget=function(a,o){let l;const c=o.target;if(l=U0(c)?{documents:W7(a,c)}:{query:H7(a,c)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=xP(a,o.resumeToken);const u=z0(a,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(Be.min())>0){l.readTime=Bp(a,o.snapshotVersion.toTimestamp());const u=z0(a,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=K7(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=W0(this.serializer),n.removeTarget=e,this.a_(n)}}class Pz extends TP{constructor(e,n,r,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return _t(!!e.streamToken),this.lastStreamToken=e.streamToken,_t(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){_t(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=q7(e.writeResults,e.commitTime),r=ri(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=W0(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>B7(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Az extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new he(J.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Mo(e,B0(n,r),i,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new he(J.UNKNOWN,a.toString())})}Lo(e,n,r,i,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,B0(n,r),i,o,l,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new he(J.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Rz{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(qi(n),this.D_=!1):Te("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mz{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(o=>{r.enqueueAndForget(async()=>{El(this)&&(Te("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=qe(c);u.L_.add(4),await Zh(u),u.q_.set("Unknown"),u.L_.delete(4),await ov(u)}(this))})}),this.q_=new Rz(r,i)}}async function ov(t){if(El(t))for(const e of t.B_)await e(!0)}async function Zh(t){for(const e of t.B_)await e(!1)}function kP(t,e){const n=qe(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),db(n)?ub(n):fu(n).r_()&&cb(n,e))}function lb(t,e){const n=qe(t),r=fu(n);n.N_.delete(e),r.r_()&&IP(n,e),n.N_.size===0&&(r.r_()?r.o_():El(n)&&n.q_.set("Unknown"))}function cb(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Be.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}fu(t).A_(e)}function IP(t,e){t.Q_.xe(e),fu(t).R_(e)}function ub(t){t.Q_=new D7({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),fu(t).start(),t.q_.v_()}function db(t){return El(t)&&!fu(t).n_()&&t.N_.size>0}function El(t){return qe(t).L_.size===0}function PP(t){t.Q_=void 0}async function Dz(t){t.q_.set("Online")}async function Oz(t){t.N_.forEach((e,n)=>{cb(t,e)})}async function Lz(t,e){PP(t),db(t)?(t.q_.M_(e),ub(t)):t.q_.set("Unknown")}async function Vz(t,e,n){if(t.q_.set("Online"),e instanceof vP&&e.state===2&&e.cause)try{await async function(i,a){const o=a.cause;for(const l of a.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.N_.delete(l),i.Q_.removeTarget(l))}(t,e)}catch(r){Te("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await qp(t,r)}else if(e instanceof Wm?t.Q_.Ke(e):e instanceof gP?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Be.min()))try{const r=await EP(t.localStore);n.compareTo(r)>=0&&await function(a,o){const l=a.Q_.rt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=a.N_.get(u);d&&a.N_.set(u,d.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const d=a.N_.get(c);if(!d)return;a.N_.set(c,d.withResumeToken(Fn.EMPTY_BYTE_STRING,d.snapshotVersion)),IP(a,c);const f=new Pa(d.target,c,u,d.sequenceNumber);cb(a,f)}),a.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){Te("RemoteStore","Failed to raise snapshot:",r),await qp(t,r)}}async function qp(t,e,n){if(!Yh(e))throw e;t.L_.add(1),await Zh(t),t.q_.set("Offline"),n||(n=()=>EP(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Te("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await ov(t)})}function AP(t,e){return e().catch(n=>qp(t,n,e))}async function lv(t){const e=qe(t),n=Za(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Fz(e);)try{const i=await jz(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,Uz(e,i)}catch(i){await qp(e,i)}RP(e)&&MP(e)}function Fz(t){return El(t)&&t.O_.length<10}function Uz(t,e){t.O_.push(e);const n=Za(t);n.r_()&&n.V_&&n.m_(e.mutations)}function RP(t){return El(t)&&!Za(t).n_()&&t.O_.length>0}function MP(t){Za(t).start()}async function $z(t){Za(t).p_()}async function zz(t){const e=Za(t);for(const n of t.O_)e.m_(n.mutations)}async function Bz(t,e,n){const r=t.O_.shift(),i=nb.from(r,e,n);await AP(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await lv(t)}async function qz(t,e){e&&Za(t).V_&&await async function(r,i){if(function(o){return A7(o)&&o!==J.ABORTED}(i.code)){const a=r.O_.shift();Za(r).s_(),await AP(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await lv(r)}}(t,e),RP(t)&&MP(t)}async function wS(t,e){const n=qe(t);n.asyncQueue.verifyOperationInProgress(),Te("RemoteStore","RemoteStore received new credentials");const r=El(n);n.L_.add(3),await Zh(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await ov(n)}async function Wz(t,e){const n=qe(t);e?(n.L_.delete(2),await ov(n)):e||(n.L_.add(2),await Zh(n),n.q_.set("Unknown"))}function fu(t){return t.K_||(t.K_=function(n,r,i){const a=qe(n);return a.w_(),new Iz(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Eo:Dz.bind(null,t),Ro:Oz.bind(null,t),mo:Lz.bind(null,t),d_:Vz.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),db(t)?ub(t):t.q_.set("Unknown")):(await t.K_.stop(),PP(t))})),t.K_}function Za(t){return t.U_||(t.U_=function(n,r,i){const a=qe(n);return a.w_(),new Pz(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:$z.bind(null,t),mo:qz.bind(null,t),f_:zz.bind(null,t),g_:Bz.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await lv(t)):(await t.U_.stop(),t.O_.length>0&&(Te("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Di,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const o=Date.now()+r,l=new hb(e,n,o,i,a);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fb(t,e){if(qi("AsyncQueue",`${e}: ${t}`),Yh(t))return new he(J.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Me.comparator(n.key,r.key):(n,r)=>Me.comparator(n.key,r.key),this.keyedMap=dd(),this.sortedSet=new Yt(this.comparator)}static emptySet(e){return new bc(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof bc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new bc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(){this.W_=new Yt(Me.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):$e():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class zc{constructor(e,n,r,i,a,o,l,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,a){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new zc(e,n,bc.emptySet(n),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ev(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hz{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Gz{constructor(){this.queries=jS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=qe(n),a=i.queries;i.queries=jS(),a.forEach((o,l)=>{for(const c of l.j_)c.onError(r)})})(this,new he(J.ABORTED,"Firestore shutting down"))}}function jS(){return new hu(t=>rP(t),ev)}async function mb(t,e){const n=qe(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.H_()&&e.J_()&&(r=2):(a=new Hz,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await n.onListen(i,!0);break;case 1:a.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=fb(o,`Initialization of query '${Hl(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,a),a.j_.push(e),e.Z_(n.onlineState),a.z_&&e.X_(a.z_)&&gb(n)}async function pb(t,e){const n=qe(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const o=a.j_.indexOf(e);o>=0&&(a.j_.splice(o,1),a.j_.length===0?i=e.J_()?0:1:!a.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Kz(t,e){const n=qe(t);let r=!1;for(const i of e){const a=i.query,o=n.queries.get(a);if(o){for(const l of o.j_)l.X_(i)&&(r=!0);o.z_=i}}r&&gb(n)}function Yz(t,e,n){const r=qe(t),i=r.queries.get(e);if(i)for(const a of i.j_)a.onError(n);r.queries.delete(e)}function gb(t){t.Y_.forEach(e=>{e.next()})}var G0,_S;(_S=G0||(G0={})).ea="default",_S.Cache="cache";class vb{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new zc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=zc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==G0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(e){this.key=e}}class OP{constructor(e){this.key=e}}class Qz{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=et(),this.mutatedKeys=et(),this.Aa=sP(e),this.Ra=new bc(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new bS,i=n?n.Ra:this.Ra;let a=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{const m=i.get(d),v=tv(this.query,f)?f:null,y=!!m&&this.mutatedKeys.has(m.key),w=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let b=!1;m&&v?m.data.isEqual(v.data)?y!==w&&(r.track({type:3,doc:v}),b=!0):this.ga(m,v)||(r.track({type:2,doc:v}),b=!0,(c&&this.Aa(v,c)>0||u&&this.Aa(v,u)<0)&&(l=!0)):!m&&v?(r.track({type:0,doc:v}),b=!0):m&&!v&&(r.track({type:1,doc:m}),b=!0,(c||u)&&(l=!0)),b&&(v?(o=o.add(v),a=w?a.add(d):a.delete(d)):(o=o.delete(d),a=a.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),a=a.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:l,mutatedKeys:a}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,f)=>function(v,y){const w=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $e()}};return w(v)-w(y)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),i=i!=null&&i;const l=n&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,u=c!==this.Ea;return this.Ea=c,o.length!==0||u?{snapshot:new zc(this.query,e.Ra,a,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new bS,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=et(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new OP(r))}),this.da.forEach(r=>{e.has(r)||n.push(new DP(r))}),n}ba(e){this.Ta=e.Ts,this.da=et();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return zc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Xz{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Zz{constructor(e){this.key=e,this.va=!1}}class Jz{constructor(e,n,r,i,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new hu(l=>rP(l),ev),this.Ma=new Map,this.xa=new Set,this.Oa=new Yt(Me.comparator),this.Na=new Map,this.La=new ib,this.Ba={},this.ka=new Map,this.qa=$c.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function eB(t,e,n=!0){const r=zP(t);let i;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Da()):i=await LP(r,e,n,!0),i}async function tB(t,e){const n=zP(t);await LP(n,e,!0,!1)}async function LP(t,e,n,r){const i=await _z(t.localStore,ni(e)),a=i.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let l;return r&&(l=await nB(t,e,a,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&kP(t.remoteStore,i),l}async function nB(t,e,n,r,i){t.Ka=(f,m,v)=>async function(w,b,x,g){let _=b.view.ma(x);_.ns&&(_=await vS(w.localStore,b.query,!1).then(({documents:I})=>b.view.ma(I,_)));const E=g&&g.targetChanges.get(b.targetId),S=g&&g.targetMismatches.get(b.targetId)!=null,O=b.view.applyChanges(_,w.isPrimaryClient,E,S);return SS(w,b.targetId,O.wa),O.snapshot}(t,f,m,v);const a=await vS(t.localStore,e,!0),o=new Qz(e,a.Ts),l=o.ma(a.documents),c=Xh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(l,t.isPrimaryClient,c);SS(t,n,u.wa);const d=new Xz(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function rB(t,e,n){const r=qe(t),i=r.Fa.get(e),a=r.Ma.get(i.targetId);if(a.length>1)return r.Ma.set(i.targetId,a.filter(o=>!ev(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await H0(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&lb(r.remoteStore,i.targetId),K0(r,i.targetId)}).catch(Kh)):(K0(r,i.targetId),await H0(r.localStore,i.targetId,!0))}async function sB(t,e){const n=qe(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),lb(n.remoteStore,r.targetId))}async function iB(t,e,n){const r=hB(t);try{const i=await function(o,l){const c=qe(o),u=Nn.now(),d=l.reduce((v,y)=>v.add(y.key),et());let f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let y=Wi(),w=et();return c.cs.getEntries(v,d).next(b=>{y=b,y.forEach((x,g)=>{g.isValidDocument()||(w=w.add(x))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,y)).next(b=>{f=b;const x=[];for(const g of l){const _=C7(g,f.get(g.key).overlayedDocument);_!=null&&x.push(new go(g.key,_,QI(_.value.mapValue),dr.exists(!0)))}return c.mutationQueue.addMutationBatch(v,u,x,l)}).next(b=>{m=b;const x=b.applyToLocalDocumentSet(f,w);return c.documentOverlayCache.saveOverlays(v,b.batchId,x)})}).then(()=>({batchId:m.batchId,changes:aP(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,c){let u=o.Ba[o.currentUser.toKey()];u||(u=new Yt(ht)),u=u.insert(l,c),o.Ba[o.currentUser.toKey()]=u}(r,i.batchId,n),await Jh(r,i.changes),await lv(r.remoteStore)}catch(i){const a=fb(i,"Failed to persist write");n.reject(a)}}async function VP(t,e){const n=qe(t);try{const r=await wz(n.localStore,e);e.targetChanges.forEach((i,a)=>{const o=n.Na.get(a);o&&(_t(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?_t(o.va):i.removedDocuments.size>0&&(_t(o.va),o.va=!1))}),await Jh(n,r,e)}catch(r){await Kh(r)}}function NS(t,e,n){const r=qe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((a,o)=>{const l=o.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const c=qe(o);c.onlineState=l;let u=!1;c.queries.forEach((d,f)=>{for(const m of f.j_)m.Z_(l)&&(u=!0)}),u&&gb(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function aB(t,e,n){const r=qe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),a=i&&i.key;if(a){let o=new Yt(Me.comparator);o=o.insert(a,Kn.newNoDocument(a,Be.min()));const l=et().add(a),c=new iv(Be.min(),new Map,new Yt(ht),o,l);await VP(r,c),r.Oa=r.Oa.remove(a),r.Na.delete(e),xb(r)}else await H0(r.localStore,e,!1).then(()=>K0(r,e,n)).catch(Kh)}async function oB(t,e){const n=qe(t),r=e.batch.batchId;try{const i=await yz(n.localStore,e);UP(n,r,null),FP(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Jh(n,i)}catch(i){await Kh(i)}}async function lB(t,e,n){const r=qe(t);try{const i=await function(o,l){const c=qe(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(_t(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);UP(r,e,n),FP(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Jh(r,i)}catch(i){await Kh(i)}}function FP(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function UP(t,e,n){const r=qe(t);let i=r.Ba[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function K0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||$P(t,r)})}function $P(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(lb(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),xb(t))}function SS(t,e,n){for(const r of n)r instanceof DP?(t.La.addReference(r.key,e),cB(t,r)):r instanceof OP?(Te("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||$P(t,r.key)):$e()}function cB(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Te("SyncEngine","New document in limbo: "+n),t.xa.add(r),xb(t))}function xb(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Me(It.fromString(e)),r=t.qa.next();t.Na.set(r,new Zz(n)),t.Oa=t.Oa.insert(n,r),kP(t.remoteStore,new Pa(ni(Jg(n.path)),r,"TargetPurposeLimboResolution",Y1.oe))}}async function Jh(t,e,n){const r=qe(t),i=[],a=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,c)=>{o.push(r.Ka(c,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){i.push(u);const f=ob.Wi(c.targetId,u);a.push(f)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(c,u){const d=qe(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>re.forEach(u,m=>re.forEach(m.$i,v=>d.persistence.referenceDelegate.addReference(f,m.targetId,v)).next(()=>re.forEach(m.Ui,v=>d.persistence.referenceDelegate.removeReference(f,m.targetId,v)))))}catch(f){if(!Yh(f))throw f;Te("LocalStore","Failed to update sequence numbers: "+f)}for(const f of u){const m=f.targetId;if(!f.fromCache){const v=d.os.get(m),y=v.snapshotVersion,w=v.withLastLimboFreeSnapshotVersion(y);d.os=d.os.insert(m,w)}}}(r.localStore,a))}async function uB(t,e){const n=qe(t);if(!n.currentUser.isEqual(e)){Te("SyncEngine","User change. New user:",e.toKey());const r=await SP(n.localStore,e);n.currentUser=e,function(a,o){a.ka.forEach(l=>{l.forEach(c=>{c.reject(new he(J.CANCELLED,o))})}),a.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Jh(n,r.hs)}}function dB(t,e){const n=qe(t),r=n.Na.get(e);if(r&&r.va)return et().add(r.key);{let i=et();const a=n.Ma.get(e);if(!a)return i;for(const o of a){const l=n.Fa.get(o);i=i.unionWith(l.view.Va)}return i}}function zP(t){const e=qe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=VP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aB.bind(null,e),e.Ca.d_=Kz.bind(null,e.eventManager),e.Ca.$a=Yz.bind(null,e.eventManager),e}function hB(t){const e=qe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lB.bind(null,e),e}class Wp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=av(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return xz(this.persistence,new gz,e.initialUser,this.serializer)}Ga(e){return new fz(ab.Zr,this.serializer)}Wa(e){return new Sz}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wp.provider={build:()=>new Wp};class Y0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>NS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=uB.bind(null,this.syncEngine),await Wz(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Gz}()}createDatastore(e){const n=av(e.databaseInfo.databaseId),r=function(a){return new kz(a)}(e.databaseInfo);return function(a,o,l,c){return new Az(a,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,a,o,l){return new Mz(r,i,a,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>NS(this.syncEngine,n,0),function(){return yS.D()?new yS:new Ez}())}createSyncEngine(e,n){return function(i,a,o,l,c,u,d){const f=new Jz(i,a,o,l,c,u);return d&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const a=qe(i);Te("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Zh(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Y0.provider={build:()=>new Y0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):qi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fB{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Hn.UNAUTHENTICATED,this.clientId=GI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async o=>{Te("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Te("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Di;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=fb(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Yx(t,e){t.asyncQueue.verifyOperationInProgress(),Te("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await SP(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ES(t,e){t.asyncQueue.verifyOperationInProgress();const n=await mB(t);Te("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>wS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>wS(e.remoteStore,i)),t._onlineComponents=e}async function mB(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Te("FirestoreClient","Using user provided OfflineComponentProvider");try{await Yx(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===J.FAILED_PRECONDITION||i.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Oc("Error using user provided cache. Falling back to memory cache: "+n),await Yx(t,new Wp)}}else Te("FirestoreClient","Using default OfflineComponentProvider"),await Yx(t,new Wp);return t._offlineComponents}async function BP(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Te("FirestoreClient","Using user provided OnlineComponentProvider"),await ES(t,t._uninitializedComponentsProvider._online)):(Te("FirestoreClient","Using default OnlineComponentProvider"),await ES(t,new Y0))),t._onlineComponents}function pB(t){return BP(t).then(e=>e.syncEngine)}async function Hp(t){const e=await BP(t),n=e.eventManager;return n.onListen=eB.bind(null,e.syncEngine),n.onUnlisten=rB.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=tB.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=sB.bind(null,e.syncEngine),n}function gB(t,e,n={}){const r=new Di;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,c,u){const d=new yb({next:m=>{d.Za(),o.enqueueAndForget(()=>pb(a,f));const v=m.docs.has(l);!v&&m.fromCache?u.reject(new he(J.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&c&&c.source==="server"?u.reject(new he(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new vb(Jg(l.path),d,{includeMetadataChanges:!0,_a:!0});return mb(a,f)}(await Hp(t),t.asyncQueue,e,n,r)),r.promise}function vB(t,e,n={}){const r=new Di;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,c,u){const d=new yb({next:m=>{d.Za(),o.enqueueAndForget(()=>pb(a,f)),m.fromCache&&c.source==="server"?u.reject(new he(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new vb(l,d,{includeMetadataChanges:!0,_a:!0});return mb(a,f)}(await Hp(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qP(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WP(t,e,n){if(!n)throw new he(J.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function xB(t,e,n,r){if(e===!0&&r===!0)throw new he(J.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function TS(t){if(!Me.isDocumentKey(t))throw new he(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function kS(t){if(Me.isDocumentKey(t))throw new he(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function cv(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":$e()}function hr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new he(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=cv(t);throw new he(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function yB(t,e){if(e<=0)throw new he(J.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new he(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new he(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new he(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new he(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new he(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class uv{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new IS({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new IS(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new D$;switch(r.type){case"firstParty":return new F$(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new he(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=CS.get(n);r&&(Te("ComponentProvider","Removing Datastore"),CS.delete(n),r.terminate())}(this),Promise.resolve()}}function wB(t,e,n,r={}){var i;const a=(t=hr(t,uv))._getSettings(),o=`${e}:${n}`;if(a.host!=="firestore.googleapis.com"&&a.host!==o&&Oc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),r.mockUserToken){let l,c;if(typeof r.mockUserToken=="string")l=r.mockUserToken,c=Hn.MOCK_USER;else{l=Yk(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new he(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Hn(u)}t._authCredentials=new O$(new HI(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new mi(this.firestore,e,this._query)}}class Xn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xn(this.firestore,e,this._key)}}class qa extends mi{constructor(e,n,r){super(e,n,Jg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xn(this.firestore,null,new Me(e))}withConverter(e){return new qa(this.firestore,e,this._path)}}function vt(t,e,...n){if(t=mt(t),WP("collection","path",e),t instanceof uv){const r=It.fromString(e,...n);return kS(r),new qa(t,null,r)}{if(!(t instanceof Xn||t instanceof qa))throw new he(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(It.fromString(e,...n));return kS(r),new qa(t.firestore,null,r)}}function tt(t,e,...n){if(t=mt(t),arguments.length===1&&(e=GI.newId()),WP("doc","path",e),t instanceof uv){const r=It.fromString(e,...n);return TS(r),new Xn(t,null,new Me(r))}{if(!(t instanceof Xn||t instanceof qa))throw new he(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(It.fromString(e,...n));return TS(r),new Xn(t.firestore,t instanceof qa?t.converter:null,new Me(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new CP(this,"async_queue_retry"),this.Vu=()=>{const r=Kx();r&&Te("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Kx();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Kx();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Di;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Yh(e))throw e;Te("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw qi("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=hb.createAndSchedule(this,e,n,r,a=>this.yu(a));return this.Tu.push(i),i}fu(){this.Eu&&$e()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function AS(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1}(t,["next","error","complete"])}class li extends uv{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new PS,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new PS(e),this._firestoreClient=void 0,await e}}}function bB(t,e){const n=typeof t=="object"?t:L1(),r=typeof t=="string"?t:"(default)",i=Gg(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=Hk("firestore");a&&wB(i,...a)}return i}function ef(t){if(t._terminated)throw new he(J.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||jB(t),t._firestoreClient}function jB(t){var e,n,r;const i=t._freezeSettings(),a=function(l,c,u,d){return new Z$(l,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,qP(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new fB(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bc(Fn.fromBase64String(e))}catch(n){throw new he(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Bc(Fn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new he(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new he(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new he(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ht(this._lat,e._lat)||ht(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _B=/^__.*__$/;class NB{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new go(e,this.data,this.fieldMask,n,this.fieldTransforms):new Qh(e,this.data,n,this.fieldTransforms)}}class HP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new go(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function GP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $e()}}class jb{constructor(e,n,r,i,a,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new jb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Gp(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(GP(this.Cu)&&_B.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class SB{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||av(e)}Qu(e,n,r,i=!1){return new jb({Cu:e,methodName:n,qu:r,path:Rn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mu(t){const e=t._freezeSettings(),n=av(t._databaseId);return new SB(t._databaseId,!!e.ignoreUndefinedProperties,n)}function _b(t,e,n,r,i,a={}){const o=t.Qu(a.merge||a.mergeFields?2:0,e,n,i);Sb("Data must be an object, but it was:",o,r);const l=XP(r,o);let c,u;if(a.merge)c=new Or(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){const d=[];for(const f of a.mergeFields){const m=Q0(e,f,n);if(!o.contains(m))throw new he(J.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);JP(d,m)||d.push(m)}c=new Or(d),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new NB(new wr(l),c,u)}class hv extends dv{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hv}}class Nb extends dv{_toFieldTransform(e){return new _7(e.path,new ch)}isEqual(e){return e instanceof Nb}}function KP(t,e,n,r){const i=t.Qu(1,e,n);Sb("Data must be an object, but it was:",i,r);const a=[],o=wr.empty();Nl(r,(c,u)=>{const d=Eb(e,c,n);u=mt(u);const f=i.Nu(d);if(u instanceof hv)a.push(d);else{const m=nf(u,f);m!=null&&(a.push(d),o.set(d,m))}});const l=new Or(a);return new HP(o,l,i.fieldTransforms)}function YP(t,e,n,r,i,a){const o=t.Qu(1,e,n),l=[Q0(e,r,n)],c=[i];if(a.length%2!=0)throw new he(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<a.length;m+=2)l.push(Q0(e,a[m])),c.push(a[m+1]);const u=[],d=wr.empty();for(let m=l.length-1;m>=0;--m)if(!JP(u,l[m])){const v=l[m];let y=c[m];y=mt(y);const w=o.Nu(v);if(y instanceof hv)u.push(v);else{const b=nf(y,w);b!=null&&(u.push(v),d.set(v,b))}}const f=new Or(u);return new HP(d,f,o.fieldTransforms)}function QP(t,e,n,r=!1){return nf(n,t.Qu(r?4:3,e))}function nf(t,e){if(ZP(t=mt(t)))return Sb("Unsupported field value:",e,t),XP(t,e);if(t instanceof dv)return function(r,i){if(!GP(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const a=[];let o=0;for(const l of r){let c=nf(l,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),o++}return{arrayValue:{values:a}}}(t,e)}return function(r,i){if((r=mt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return w7(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Nn.fromDate(r);return{timestampValue:Bp(i.serializer,a)}}if(r instanceof Nn){const a=new Nn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Bp(i.serializer,a)}}if(r instanceof wb)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Bc)return{bytesValue:xP(i.serializer,r._byteString)};if(r instanceof Xn){const a=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:sb(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof bb)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return tb(l.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${cv(r)}`)}(t,e)}function XP(t,e){const n={};return KI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Nl(t,(r,i)=>{const a=nf(i,e.Mu(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function ZP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Nn||t instanceof wb||t instanceof Bc||t instanceof Xn||t instanceof dv||t instanceof bb)}function Sb(t,e,n){if(!ZP(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=cv(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Q0(t,e,n){if((e=mt(e))instanceof tf)return e._internalPath;if(typeof e=="string")return Eb(t,e);throw Gp("Field path arguments must be of type string or ",t,!1,void 0,n)}const EB=new RegExp("[~\\*/\\[\\]]");function Eb(t,e,n){if(e.search(EB)>=0)throw Gp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new tf(...e.split("."))._internalPath}catch{throw Gp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Gp(t,e,n,r,i){const a=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(a||o)&&(c+=" (found",a&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new he(J.INVALID_ARGUMENT,l+t+c)}function JP(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Xn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new CB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(fv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class CB extends Cb{data(){return super.data()}}function fv(t,e){return typeof e=="string"?Eb(t,e):e instanceof tf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new he(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Tb{}class mv extends Tb{}function Wt(t,e,...n){let r=[];e instanceof Tb&&r.push(e),r=r.concat(n),function(a){const o=a.filter(c=>c instanceof kb).length,l=a.filter(c=>c instanceof pv).length;if(o>1||o>0&&l>0)throw new he(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class pv extends mv{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new pv(e,n,r)}_apply(e){const n=this._parse(e);return tA(e._query,n),new mi(e.firestore,e.converter,$0(e._query,n))}_parse(e){const n=mu(e.firestore);return function(a,o,l,c,u,d,f){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new he(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){DS(f,d);const v=[];for(const y of f)v.push(MS(c,a,y));m={arrayValue:{values:v}}}else m=MS(c,a,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||DS(f,d),m=QP(l,o,f,d==="in"||d==="not-in");return dn.create(u,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function hn(t,e,n){const r=e,i=fv("where",t);return pv._create(i,r,n)}class kb extends Tb{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new kb(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Is.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,a){let o=i;const l=a.getFlattenedFilters();for(const c of l)tA(o,c),o=$0(o,c)}(e._query,n),new mi(e.firestore,e.converter,$0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ib extends mv{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Ib(e,n)}_apply(e){const n=function(i,a,o){if(i.startAt!==null)throw new he(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new he(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new lh(a,o)}(e._query,this._field,this._direction);return new mi(e.firestore,e.converter,function(i,a){const o=i.explicitOrderBy.concat([a]);return new Sl(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function RS(t,e="asc"){const n=e,r=fv("orderBy",t);return Ib._create(r,n)}class Pb extends mv{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Pb(e,n,r)}_apply(e){return new mi(e.firestore,e.converter,$p(e._query,this._limit,this._limitType))}}function ns(t){return yB("limit",t),Pb._create("limit",t,"F")}class Ab extends mv{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Ab(e,n,r)}_apply(e){const n=kB(e,this.type,this._docOrFields,this._inclusive);return new mi(e.firestore,e.converter,function(i,a){return new Sl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,a,i.endAt)}(e._query,n))}}function TB(...t){return Ab._create("startAfter",t,!1)}function kB(t,e,n,r){if(n[0]=mt(n[0]),n[0]instanceof Cb)return function(a,o,l,c,u){if(!c)throw new he(J.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const d=[];for(const f of wc(a))if(f.field.isKeyField())d.push(Up(o,c.key));else{const m=c.data.field(f.field);if(Zg(m))throw new he(J.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){const v=f.field.canonicalString();throw new he(J.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}d.push(m)}return new Uc(d,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=mu(t.firestore);return function(o,l,c,u,d,f){const m=o.explicitOrderBy;if(d.length>m.length)throw new he(J.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const v=[];for(let y=0;y<d.length;y++){const w=d[y];if(m[y].field.isKeyField()){if(typeof w!="string")throw new he(J.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof w}`);if(!eb(o)&&w.indexOf("/")!==-1)throw new he(J.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${w}' contains a slash.`);const b=o.path.child(It.fromString(w));if(!Me.isDocumentKey(b))throw new he(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${b}' is not because it contains an odd number of segments.`);const x=new Me(b);v.push(Up(l,x))}else{const b=QP(c,u,w);v.push(b)}}return new Uc(v,f)}(t._query,t.firestore._databaseId,i,e,n,r)}}function MS(t,e,n){if(typeof(n=mt(n))=="string"){if(n==="")throw new he(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!eb(e)&&n.indexOf("/")!==-1)throw new he(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(It.fromString(n));if(!Me.isDocumentKey(r))throw new he(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Up(t,new Me(r))}if(n instanceof Xn)return Up(t,n._key);throw new he(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cv(n)}.`)}function DS(t,e){if(!Array.isArray(t)||t.length===0)throw new he(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tA(t,e){const n=function(i,a){for(const o of i)for(const l of o.getFlattenedFilters())if(a.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new he(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class IB{convertValue(e,n="none"){switch(ul(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(cl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw $e()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Nl(e,(i,a)=>{r[i]=this.convertValue(a,n)}),r}convertVectorValue(e){var n,r,i;const a=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>rn(o.doubleValue));return new bb(a)}convertGeoPoint(e){return new wb(rn(e.latitude),rn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Q1(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ih(e));default:return null}}convertTimestamp(e){const n=Xa(e);return new Nn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=It.fromString(e);_t(NP(r));const i=new ah(r.get(1),r.get(3)),a=new Me(r.popFirst(5));return i.isEqual(n)||qi(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class nA extends Cb{constructor(e,n,r,i,a,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Hm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(fv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Hm extends nA{data(e={}){return super.data(e)}}class rA{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new fd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Hm(this._firestore,this._userDataWriter,r.key,r,new fd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new he(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const c=new Hm(i._firestore,i._userDataWriter,l.doc.key,l.doc,new fd(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>a||l.type!==3).map(l=>{const c=new Hm(i._firestore,i._userDataWriter,l.doc.key,l.doc,new fd(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:PB(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function PB(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $e()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(t){t=hr(t,Xn);const e=hr(t.firestore,li);return gB(ef(e),t._key).then(n=>sA(e,t,n))}class Mb extends IB{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Xn(this.firestore,null,n)}}function fn(t){t=hr(t,mi);const e=hr(t.firestore,li),n=ef(e),r=new Mb(e);return eA(t._query),vB(n,t._query).then(i=>new rA(e,r,t,i))}function jc(t,e,n){t=hr(t,Xn);const r=hr(t.firestore,li),i=Rb(t.converter,e,n);return rf(r,[_b(mu(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,dr.none())])}function Mn(t,e,n,...r){t=hr(t,Xn);const i=hr(t.firestore,li),a=mu(i);let o;return o=typeof(e=mt(e))=="string"||e instanceof tf?YP(a,"updateDoc",t._key,e,n,r):KP(a,"updateDoc",t._key,e),rf(i,[o.toMutation(t._key,dr.exists(!0))])}function qc(t){return rf(hr(t.firestore,li),[new sv(t._key,dr.none())])}function Ja(t,e){const n=hr(t.firestore,li),r=tt(t),i=Rb(t.converter,e);return rf(n,[_b(mu(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,dr.exists(!1))]).then(()=>r)}function OS(t,...e){var n,r,i;t=mt(t);let a={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||AS(e[o])||(a=e[o],o++);const l={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(AS(e[o])){const f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,u,d;if(t instanceof Xn)u=hr(t.firestore,li),d=Jg(t._key.path),c={next:f=>{e[o]&&e[o](sA(u,t,f))},error:e[o+1],complete:e[o+2]};else{const f=hr(t,mi);u=hr(f.firestore,li),d=f._query;const m=new Mb(u);c={next:v=>{e[o]&&e[o](new rA(u,m,f,v))},error:e[o+1],complete:e[o+2]},eA(t._query)}return function(m,v,y,w){const b=new yb(w),x=new vb(v,b,y);return m.asyncQueue.enqueueAndForget(async()=>mb(await Hp(m),x)),()=>{b.Za(),m.asyncQueue.enqueueAndForget(async()=>pb(await Hp(m),x))}}(ef(u),d,l,c)}function rf(t,e){return function(r,i){const a=new Di;return r.asyncQueue.enqueueAndForget(async()=>iB(await pB(r),i,a)),a.promise}(ef(t),e)}function sA(t,e,n){const r=n.docs.get(e._key),i=new Mb(t);return new nA(t,i,e._key,r,new fd(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AB{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=mu(e)}set(e,n,r){this._verifyNotCommitted();const i=Qx(e,this._firestore),a=Rb(i.converter,n,r),o=_b(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,dr.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const a=Qx(e,this._firestore);let o;return o=typeof(n=mt(n))=="string"||n instanceof tf?YP(this._dataReader,"WriteBatch.update",a._key,n,r,i):KP(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(o.toMutation(a._key,dr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Qx(e,this._firestore);return this._mutations=this._mutations.concat(new sv(n._key,dr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new he(J.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Qx(t,e){if((t=mt(t)).firestore!==e)throw new he(J.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function wn(){return new Nb("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RB(t){return ef(t=hr(t,li)),new AB(t,e=>rf(t,e))}(function(e,n=!0){(function(i){du=i})(_l),sl(new Ka("firestore",(r,{instanceIdentifier:i,options:a})=>{const o=r.getProvider("app").getImmediate(),l=new li(new L$(r.getProvider("auth-internal")),new $$(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new he(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ah(u.options.projectId,d)}(o,i),o);return a=Object.assign({useFetchStreams:n},a),l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),Js(Q2,"4.7.3",e),Js(Q2,"4.7.3","esm2017")})();var MB="firebase",DB="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Js(MB,DB,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA="firebasestorage.googleapis.com",aA="storageBucket",OB=2*60*1e3,LB=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn extends fi{constructor(e,n,r=0){super(Xx(e),`Firebase Storage: ${n} (${Xx(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,tn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Xx(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var en;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(en||(en={}));function Xx(t){return"storage/"+t}function Db(){const t="An unknown error occurred, please check the error payload for server response.";return new tn(en.UNKNOWN,t)}function VB(t){return new tn(en.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function FB(t){return new tn(en.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function UB(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new tn(en.UNAUTHENTICATED,t)}function $B(){return new tn(en.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function zB(t){return new tn(en.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function BB(){return new tn(en.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function qB(){return new tn(en.CANCELED,"User canceled the upload/download.")}function WB(t){return new tn(en.INVALID_URL,"Invalid URL '"+t+"'.")}function HB(t){return new tn(en.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function GB(){return new tn(en.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+aA+"' property when initializing the app?")}function KB(){return new tn(en.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function YB(){return new tn(en.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function QB(t){return new tn(en.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function X0(t){return new tn(en.INVALID_ARGUMENT,t)}function oA(){return new tn(en.APP_DELETED,"The Firebase app was deleted.")}function XB(t){return new tn(en.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ad(t,e){return new tn(en.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Xu(t){throw new tn(en.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Lr.makeFromUrl(e,n)}catch{return new Lr(e,"")}if(r.path==="")return r;throw HB(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function a(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function u(E){E.path_=decodeURIComponent(E.path)}const d="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",v=new RegExp(`^https?://${f}/${d}/b/${i}/o${m}`,"i"),y={bucket:1,path:3},w=n===iA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,b="([^?#]*)",x=new RegExp(`^https?://${w}/${i}/${b}`,"i"),_=[{regex:l,indices:c,postModify:a},{regex:v,indices:y,postModify:u},{regex:x,indices:{bucket:1,path:2},postModify:u}];for(let E=0;E<_.length;E++){const S=_[E],O=S.regex.exec(e);if(O){const I=O[S.indices.bucket];let k=O[S.indices.path];k||(k=""),r=new Lr(I,k),S.postModify(r);break}}if(r==null)throw WB(e);return r}}class ZB{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JB(t,e,n){let r=1,i=null,a=null,o=!1,l=0;function c(){return l===2}let u=!1;function d(...b){u||(u=!0,e.apply(null,b))}function f(b){i=setTimeout(()=>{i=null,t(v,c())},b)}function m(){a&&clearTimeout(a)}function v(b,...x){if(u){m();return}if(b){m(),d.call(null,b,...x);return}if(c()||o){m(),d.call(null,b,...x);return}r<64&&(r*=2);let _;l===1?(l=2,_=0):_=(r+Math.random())*1e3,f(_)}let y=!1;function w(b){y||(y=!0,m(),!u&&(i!==null?(b||(l=2),clearTimeout(i),f(0)):b||(l=1)))}return f(0),a=setTimeout(()=>{o=!0,w(!0)},n),w}function eq(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tq(t){return t!==void 0}function nq(t){return typeof t=="object"&&!Array.isArray(t)}function Ob(t){return typeof t=="string"||t instanceof String}function LS(t){return Lb()&&t instanceof Blob}function Lb(){return typeof Blob<"u"}function VS(t,e,n,r){if(r<e)throw X0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw X0(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function lA(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var qo;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(qo||(qo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rq(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sq{constructor(e,n,r,i,a,o,l,c,u,d,f,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=f,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,y)=>{this.resolve_=v,this.reject_=y,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new um(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const l=a.getErrorCode()===qo.NO_ERROR,c=a.getStatus();if(!l||rq(c,this.additionalRetryCodes_)&&this.retry){const d=a.getErrorCode()===qo.ABORT;r(!1,new um(!1,null,d));return}const u=this.successCodes_.indexOf(c)!==-1;r(!0,new um(u,a))})},n=(r,i)=>{const a=this.resolve_,o=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());tq(c)?a(c):a()}catch(c){o(c)}else if(l!==null){const c=Db();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(i.canceled){const c=this.appDelete_?oA():qB();o(c)}else{const c=BB();o(c)}};this.canceled_?n(!1,new um(!1,null,!0)):this.backoffId_=JB(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&eq(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class um{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function iq(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function aq(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function oq(t,e){e&&(t["X-Firebase-GMPID"]=e)}function lq(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function cq(t,e,n,r,i,a,o=!0){const l=lA(t.urlParams),c=t.url+l,u=Object.assign({},t.headers);return oq(u,e),iq(u,n),aq(u,a),lq(u,r),new sq(c,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uq(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function dq(...t){const e=uq();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Lb())return new Blob(t);throw new tn(en.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function hq(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fq(t){if(typeof atob>"u")throw QB("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Zx{constructor(e,n){this.data=e,this.contentType=n||null}}function mq(t,e){switch(t){case Gs.RAW:return new Zx(cA(e));case Gs.BASE64:case Gs.BASE64URL:return new Zx(uA(t,e));case Gs.DATA_URL:return new Zx(gq(e),vq(e))}throw Db()}function cA(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=r,o=t.charCodeAt(++n);r=65536|(a&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function pq(t){let e;try{e=decodeURIComponent(t)}catch{throw Ad(Gs.DATA_URL,"Malformed data URL.")}return cA(e)}function uA(t,e){switch(t){case Gs.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw Ad(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Gs.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw Ad(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=fq(e)}catch(i){throw i.message.includes("polyfill")?i:Ad(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class dA{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Ad(Gs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=xq(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function gq(t){const e=new dA(t);return e.base64?uA(Gs.BASE64,e.rest):pq(e.rest)}function vq(t){return new dA(t).contentType}function xq(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,n){let r=0,i="";LS(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(LS(this.data_)){const r=this.data_,i=hq(r,e,n);return i===null?null:new Sa(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Sa(r,!0)}}static getBlob(...e){if(Lb()){const n=e.map(r=>r instanceof Sa?r.data_:r);return new Sa(dq.apply(null,n))}else{const n=e.map(o=>Ob(o)?mq(Gs.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let a=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)i[a++]=o[l]}),new Sa(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(t){let e;try{e=JSON.parse(t)}catch{return null}return nq(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yq(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function wq(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function fA(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bq(t,e){return e}class nr{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||bq}}let dm=null;function jq(t){return!Ob(t)||t.length<2?t:fA(t)}function mA(){if(dm)return dm;const t=[];t.push(new nr("bucket")),t.push(new nr("generation")),t.push(new nr("metageneration")),t.push(new nr("name","fullPath",!0));function e(a,o){return jq(o)}const n=new nr("name");n.xform=e,t.push(n);function r(a,o){return o!==void 0?Number(o):o}const i=new nr("size");return i.xform=r,t.push(i),t.push(new nr("timeCreated")),t.push(new nr("updated")),t.push(new nr("md5Hash",null,!0)),t.push(new nr("cacheControl",null,!0)),t.push(new nr("contentDisposition",null,!0)),t.push(new nr("contentEncoding",null,!0)),t.push(new nr("contentLanguage",null,!0)),t.push(new nr("contentType",null,!0)),t.push(new nr("metadata","customMetadata",!0)),dm=t,dm}function _q(t,e){function n(){const r=t.bucket,i=t.fullPath,a=new Lr(r,i);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function Nq(t,e,n){const r={};r.type="file";const i=n.length;for(let a=0;a<i;a++){const o=n[a];r[o.local]=o.xform(r,e[o.server])}return _q(r,t),r}function pA(t,e,n){const r=hA(e);return r===null?null:Nq(t,r,n)}function Sq(t,e,n,r){const i=hA(e);if(i===null||!Ob(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const o=encodeURIComponent;return a.split(",").map(u=>{const d=t.bucket,f=t.fullPath,m="/b/"+o(d)+"/o/"+o(f),v=Vb(m,n,r),y=lA({alt:"media",token:u});return v+y})[0]}function Eq(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class gA{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(t){if(!t)throw Db()}function Cq(t,e){function n(r,i){const a=pA(t,i,e);return vA(a!==null),a}return n}function Tq(t,e){function n(r,i){const a=pA(t,i,e);return vA(a!==null),Sq(a,i,t.host,t._protocol)}return n}function xA(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=$B():i=UB():n.getStatus()===402?i=FB(t.bucket):n.getStatus()===403?i=zB(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function kq(t){const e=xA(t);function n(r,i){let a=e(r,i);return r.getStatus()===404&&(a=VB(t.path)),a.serverResponse=i.serverResponse,a}return n}function Iq(t,e,n){const r=e.fullServerUrl(),i=Vb(r,t.host,t._protocol),a="GET",o=t.maxOperationRetryTime,l=new gA(i,a,Tq(t,n),o);return l.errorHandler=kq(e),l}function Pq(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Aq(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=Pq(null,e)),r}function Rq(t,e,n,r,i){const a=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let _="";for(let E=0;E<2;E++)_=_+Math.random().toString().slice(2);return _}const c=l();o["Content-Type"]="multipart/related; boundary="+c;const u=Aq(e,r,i),d=Eq(u,n),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,m=`\r
--`+c+"--",v=Sa.getBlob(f,r,m);if(v===null)throw KB();const y={name:u.fullPath},w=Vb(a,t.host,t._protocol),b="POST",x=t.maxUploadRetryTime,g=new gA(w,b,Cq(t,n),x);return g.urlParams=y,g.headers=o,g.body=v.uploadData(),g.errorHandler=xA(e),g}class Mq{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=qo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=qo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=qo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Xu("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Xu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Xu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Xu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Xu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Dq extends Mq{initXhr(){this.xhr_.responseType="text"}}function yA(){return new Dq}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,n){this._service=e,n instanceof Lr?this._location=n:this._location=Lr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new dl(e,n)}get root(){const e=new Lr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return fA(this._location.path)}get storage(){return this._service}get parent(){const e=yq(this._location.path);if(e===null)return null;const n=new Lr(this._location.bucket,e);return new dl(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw XB(e)}}function Oq(t,e,n){t._throwIfRoot("uploadBytes");const r=Rq(t.storage,t._location,mA(),new Sa(e,!0),n);return t.storage.makeRequestWithTokens(r,yA).then(i=>({metadata:i,ref:t}))}function Lq(t){t._throwIfRoot("getDownloadURL");const e=Iq(t.storage,t._location,mA());return t.storage.makeRequestWithTokens(e,yA).then(n=>{if(n===null)throw YB();return n})}function Vq(t,e){const n=wq(t._location.path,e),r=new Lr(t._location.bucket,n);return new dl(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fq(t){return/^[A-Za-z]+:\/\//.test(t)}function Uq(t,e){return new dl(t,e)}function wA(t,e){if(t instanceof Fb){const n=t;if(n._bucket==null)throw GB();const r=new dl(n,n._bucket);return e!=null?wA(r,e):r}else return e!==void 0?Vq(t,e):t}function $q(t,e){if(e&&Fq(e)){if(t instanceof Fb)return Uq(t,e);throw X0("To use ref(service, url), the first argument must be a Storage instance.")}else return wA(t,e)}function FS(t,e){const n=e==null?void 0:e[aA];return n==null?null:Lr.makeFromBucketSpec(n,t)}function zq(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Yk(i,t.app.options.projectId))}class Fb{constructor(e,n,r,i,a){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=iA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=OB,this._maxUploadRetryTime=LB,this._requests=new Set,i!=null?this._bucket=Lr.makeFromBucketSpec(i,this._host):this._bucket=FS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Lr.makeFromBucketSpec(this._url,e):this._bucket=FS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){VS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){VS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new dl(this,e)}_makeRequest(e,n,r,i,a=!0){if(this._deleted)return new ZB(oA());{const o=cq(e,this._appId,r,i,n,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const US="@firebase/storage",$S="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA="storage";function Ub(t,e,n){return t=mt(t),Oq(t,e,n)}function $b(t){return t=mt(t),Lq(t)}function zb(t,e){return t=mt(t),$q(t,e)}function Bq(t=L1(),e){t=mt(t);const r=Gg(t,bA).getImmediate({identifier:e}),i=Hk("storage");return i&&qq(r,...i),r}function qq(t,e,n,r={}){zq(t,e,n,r)}function Wq(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Fb(n,r,i,e,_l)}function Hq(){sl(new Ka(bA,Wq,"PUBLIC").setMultipleInstances(!0)),Js(US,$S,""),Js(US,$S,"esm2017")}Hq();const Gq={apiKey:"AIzaSyDXD6WpZoQNLNU0DAqH1wd3q9Q4vthOWv4",authDomain:"annonces-app-44d27.firebaseapp.com",projectId:"annonces-app-44d27",storageBucket:"annonces-app-44d27.firebasestorage.app",messagingSenderId:"603697837611",appId:"1:603697837611:web:858cf99bb80004d0f25c6e",measurementId:"G-35RWYRR568"},Bb=Zk(Gq),zs=R$(Bb),_e=bB(Bb),qb=Bq(Bb),jA=p.createContext(null),Jx=t=>{const e={};return Object.keys(t).forEach(n=>{t[n]!==void 0&&(e[n]=t[n])}),e},Qt=()=>{const t=p.useContext(jA);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},Kq=({children:t})=>{const[e,n]=p.useState(null),[r,i]=p.useState(null),[a,o]=p.useState(!0),l=async w=>{try{const b=localStorage.getItem("pendingUserData");if(b){const x=JSON.parse(b);console.log("🚨 Données récupérées depuis localStorage:",x);const g=tt(_e,"users",w.uid),_=await rs(g);if(_.exists()){const E=_.data();console.log("📊 Données actuelles dans Firestore:",E);const S={...E,...x,id:w.uid,email:w.email,createdAt:E.createdAt||new Date,lastSeen:new Date},O=Jx(S);return await Mn(g,O),console.log("✅ Données récupérées et mises à jour !"),i(S),localStorage.removeItem("pendingUserData"),localStorage.removeItem("pendingUserEmail"),ee.success("Données de profil récupérées !"),!0}}return!1}catch(b){return console.error("❌ Erreur récupération:",b),!1}},c=async(w,b)=>{const x=tt(_e,"users",w.uid),g=await rs(x);if(g.exists()){const _=g.data();if(console.log("📊 Données existantes trouvées:",_),!await l(w)){const S={id:w.uid,email:w.email,lastSeen:new Date};_.displayName||(S.displayName=w.displayName||"Utilisateur"),_.university||(S.university="Université non spécifiée"),_.fieldOfStudy||(S.fieldOfStudy="Non spécifié");const O=Jx(S);await Mn(x,O);const I={..._,...O};i(I),console.log("✅ Profil mis à jour sans écraser les données existantes")}}else{const _={id:w.uid,email:w.email,displayName:w.displayName||(b==null?void 0:b.displayName)||"Utilisateur",photoURL:w.photoURL||(b==null?void 0:b.photoURL)||void 0,phone:(b==null?void 0:b.phone)||void 0,isVerified:!1,verificationStatus:"pending",university:(b==null?void 0:b.university)||"Université non spécifiée",otherUniversity:(b==null?void 0:b.otherUniversity)||void 0,studentId:(b==null?void 0:b.studentId)||void 0,graduationYear:(b==null?void 0:b.graduationYear)||new Date().getFullYear()+2,fieldOfStudy:(b==null?void 0:b.fieldOfStudy)||"Non spécifié",otherFieldOfStudy:(b==null?void 0:b.otherFieldOfStudy)||void 0,campus:(b==null?void 0:b.campus)||"Campus principal",bio:(b==null?void 0:b.bio)||void 0,rating:0,reviewCount:0,trustScore:0,co2Saved:0,transactionsCount:0,donationsCount:0,location:"Paris, France",notificationPreferences:{email:!0,push:!0,sms:!1,alerts:!0},createdAt:new Date,lastSeen:new Date},E=Jx(_);await jc(x,E),i(_)}},u=async(w,b)=>{try{await mU(zs,w,b),ee.success("Connexion réussie !")}catch(x){const g=x instanceof Error?x.message:"Erreur inconnue";throw ee.error("Erreur de connexion : "+g),x}},d=async(w,b,x,g)=>{try{const{user:_}=await NI(zs,w,b);await rh(_,{displayName:x}),await c(_,g),ee.success("Compte créé avec succès !")}catch(_){const E=_ instanceof Error?_.message:"Erreur inconnue";throw ee.error("Erreur lors de la création du compte : "+E),_}},f=async()=>{try{const w=new Ci;w.setCustomParameters({prompt:"select_account"}),w.addScope("email"),w.addScope("profile"),await GU(zs,w)}catch(w){console.error("Google sign in error:",w);const b=w instanceof Error?w.message:"Erreur inconnue";throw ee.error("Erreur de connexion Google : "+b),w}},m=async()=>{try{await bU(zs),i(null),ee.success("Déconnexion réussie !")}catch(w){throw ee.error("Erreur lors de la déconnexion"),w}},v=async w=>{if(!(!e||!r))try{const b=tt(_e,"users",e.uid),x=Object.fromEntries(Object.entries(w).filter(([,g])=>g!==void 0));if(x.updatedAt=new Date,Object.keys(x).length===0){console.warn("Aucune donnée valide à mettre à jour");return}await Mn(b,x),i({...r,...x}),console.log("Profil mis à jour avec:",x),ee.success("Profil mis à jour !")}catch(b){throw console.error("Erreur mise à jour profil:",b),ee.error("Erreur lors de la mise à jour du profil"),b}};p.useEffect(()=>{const w=wU(zs,async x=>{n(x),x?await c(x):i(null),o(!1)});return(async()=>{try{const x=await YU(zs);x!=null&&x.user&&(await c(x.user),ee.success("Connexion Google réussie !"))}catch(x){if(console.error("Redirect result error:",x),x&&typeof x=="object"&&"code"in x&&x.code!=="auth/null-user"){const g=x instanceof Error?x.message:"Erreur inconnue";ee.error("Erreur de connexion Google : "+g)}}})(),w},[]);const y={currentUser:e,userProfile:r,loading:a,signIn:u,signUp:d,signInWithGoogle:f,logout:m,updateUserProfile:v};return s.jsx(jA.Provider,{value:y,children:!a&&t})};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yq=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_A=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Qq={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xq=p.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...l},c)=>p.createElement("svg",{ref:c,...Qq,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:_A("lucide",i),...l},[...o.map(([u,d])=>p.createElement(u,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=(t,e)=>{const n=p.forwardRef(({className:r,...i},a)=>p.createElement(Xq,{ref:a,iconNode:e,className:_A(`lucide-${Yq(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zq=te("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=te("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=te("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=te("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hh=te("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zS=te("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=te("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=te("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jq=te("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=te("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=te("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eW=te("Bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tW=te("Blocks",[["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["path",{d:"M10 21V8a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1H3",key:"1fpvtg"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=te("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=te("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wb=te("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=te("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nW=te("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=te("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=te("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IA=te("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=te("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rW=te("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sW=te("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iW=te("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=te("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=te("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=te("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kp=te("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=te("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=te("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=te("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=te("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aW=te("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=te("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BS=te("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oW=te("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yp=te("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=te("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lW=te("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=te("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cW=te("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uW=te("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dW=te("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gv=te("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=te("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hW=te("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gc=te("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RA=te("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=te("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MA=te("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=te("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qp=te("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DA=te("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eo=te("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fW=te("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mW=te("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=te("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OA=te("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LA=te("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=te("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hl=te("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pW=te("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gW=te("MailCheck",[["path",{d:"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h8",key:"12jkf8"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"m16 19 2 2 4-4",key:"1b14m6"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=te("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=te("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vW=te("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=te("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qS=te("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VA=te("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xW=te("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=te("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yW=te("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wW=te("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WS=te("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gu=te("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bW=te("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=te("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jW=te("Recycle",[["path",{d:"M7 19H4.815a1.83 1.83 0 0 1-1.57-.881 1.785 1.785 0 0 1-.004-1.784L7.196 9.5",key:"x6z5xu"}],["path",{d:"M11 19h8.203a1.83 1.83 0 0 0 1.556-.89 1.784 1.784 0 0 0 0-1.775l-1.226-2.12",key:"1x4zh5"}],["path",{d:"m14 16-3 3 3 3",key:"f6jyew"}],["path",{d:"M8.293 13.596 7.196 9.5 3.1 10.598",key:"wf1obh"}],["path",{d:"m9.344 5.811 1.093-1.892A1.83 1.83 0 0 1 11.985 3a1.784 1.784 0 0 1 1.546.888l3.943 6.843",key:"9tzpgr"}],["path",{d:"m13.378 9.633 4.096 1.098 1.097-4.096",key:"1oe83g"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=te("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=te("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _W=te("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=te("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kc=te("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=te("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hb=te("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=te("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gb=te("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=te("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=te("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cl=te("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z0=te("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NW=te("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=te("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SW=te("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fh=te("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=te("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oi=te("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EW=te("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sf=te("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=te("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=te("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CW=te("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0=te("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FA=te("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=te("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const af=te("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UA=te("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TW=te("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=te("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vu=te("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function kW(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function yv(...t){return e=>t.forEach(n=>kW(n,e))}function We(...t){return p.useCallback(yv(...t),t)}var Gi=p.forwardRef((t,e)=>{const{children:n,...r}=t,i=p.Children.toArray(n),a=i.find(PW);if(a){const o=a.props.children,l=i.map(c=>c===a?p.Children.count(o)>1?p.Children.only(null):p.isValidElement(o)?o.props.children:null:c);return s.jsx(tw,{...r,ref:e,children:p.isValidElement(o)?p.cloneElement(o,void 0,l):null})}return s.jsx(tw,{...r,ref:e,children:n})});Gi.displayName="Slot";var tw=p.forwardRef((t,e)=>{const{children:n,...r}=t;if(p.isValidElement(n)){const i=RW(n);return p.cloneElement(n,{...AW(r,n.props),ref:e?yv(e,i):i})}return p.Children.count(n)>1?p.Children.only(null):null});tw.displayName="SlotClone";var IW=({children:t})=>s.jsx(s.Fragment,{children:t});function PW(t){return p.isValidElement(t)&&t.type===IW}function AW(t,e){const n={...e};for(const r in e){const i=t[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?n[r]=(...l)=>{a(...l),i(...l)}:i&&(n[r]=i):r==="style"?n[r]={...i,...a}:r==="className"&&(n[r]=[i,a].filter(Boolean).join(" "))}return{...t,...n}}function RW(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function $A(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=$A(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function MW(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=$A(t))&&(r&&(r+=" "),r+=e);return r}const HS=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,GS=MW,wv=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return GS(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:a}=e,o=Object.keys(i).map(u=>{const d=n==null?void 0:n[u],f=a==null?void 0:a[u];if(d===null)return null;const m=HS(d)||HS(f);return i[u][m]}),l=n&&Object.entries(n).reduce((u,d)=>{let[f,m]=d;return m===void 0||(u[f]=m),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:f,className:m,...v}=d;return Object.entries(v).every(y=>{let[w,b]=y;return Array.isArray(b)?b.includes({...a,...l}[w]):{...a,...l}[w]===b})?[...u,f,m]:u},[]);return GS(t,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};function zA(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=zA(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function DW(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=zA(t))&&(r&&(r+=" "),r+=e);return r}const Kb="-",OW=t=>{const e=VW(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(Kb);return l[0]===""&&l.length!==1&&l.shift(),BA(l,e)||LW(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},BA=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?BA(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const a=t.join(Kb);return(o=e.validators.find(({validator:l})=>l(a)))==null?void 0:o.classGroupId},KS=/^\[(.+)\]$/,LW=t=>{if(KS.test(t)){const e=KS.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},VW=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return UW(Object.entries(t.classGroups),n).forEach(([a,o])=>{nw(o,r,a,e)}),r},nw=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const a=i===""?e:YS(e,i);a.classGroupId=n;return}if(typeof i=="function"){if(FW(i)){nw(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([a,o])=>{nw(o,YS(e,a),n,r)})})},YS=(t,e)=>{let n=t;return e.split(Kb).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},FW=t=>t.isThemeGetter,UW=(t,e)=>e?t.map(([n,r])=>{const i=r.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,l])=>[e+o,l])):a);return[n,i]}):t,$W=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(a,o)=>{n.set(a,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(a){let o=n.get(a);if(o!==void 0)return o;if((o=r.get(a))!==void 0)return i(a,o),o},set(a,o){n.has(a)?n.set(a,o):i(a,o)}}},qA="!",zW=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],a=e.length,o=l=>{const c=[];let u=0,d=0,f;for(let b=0;b<l.length;b++){let x=l[b];if(u===0){if(x===i&&(r||l.slice(b,b+a)===e)){c.push(l.slice(d,b)),d=b+a;continue}if(x==="/"){f=b;continue}}x==="["?u++:x==="]"&&u--}const m=c.length===0?l:l.substring(d),v=m.startsWith(qA),y=v?m.substring(1):m,w=f&&f>d?f-d:void 0;return{modifiers:c,hasImportantModifier:v,baseClassName:y,maybePostfixModifierPosition:w}};return n?l=>n({className:l,parseClassName:o}):o},BW=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},qW=t=>({cache:$W(t.cacheSize),parseClassName:zW(t),...OW(t)}),WW=/\s+/,HW=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,a=[],o=t.trim().split(WW);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:v}=n(u);let y=!!v,w=r(y?m.substring(0,v):m);if(!w){if(!y){l=u+(l.length>0?" "+l:l);continue}if(w=r(m),!w){l=u+(l.length>0?" "+l:l);continue}y=!1}const b=BW(d).join(":"),x=f?b+qA:b,g=x+w;if(a.includes(g))continue;a.push(g);const _=i(w,y);for(let E=0;E<_.length;++E){const S=_[E];a.push(x+S)}l=u+(l.length>0?" "+l:l)}return l};function GW(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=WA(e))&&(r&&(r+=" "),r+=n);return r}const WA=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=WA(t[r]))&&(n&&(n+=" "),n+=e);return n};function KW(t,...e){let n,r,i,a=o;function o(c){const u=e.reduce((d,f)=>f(d),t());return n=qW(u),r=n.cache.get,i=n.cache.set,a=l,l(c)}function l(c){const u=r(c);if(u)return u;const d=HW(c,n);return i(c,d),d}return function(){return a(GW.apply(null,arguments))}}const Mt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},HA=/^\[(?:([a-z-]+):)?(.+)\]$/i,YW=/^\d+\/\d+$/,QW=new Set(["px","full","screen"]),XW=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,ZW=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,JW=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,eH=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,tH=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,bi=t=>_c(t)||QW.has(t)||YW.test(t),ha=t=>xu(t,"length",cH),_c=t=>!!t&&!Number.isNaN(Number(t)),ry=t=>xu(t,"number",_c),Zu=t=>!!t&&Number.isInteger(Number(t)),nH=t=>t.endsWith("%")&&_c(t.slice(0,-1)),Ke=t=>HA.test(t),fa=t=>XW.test(t),rH=new Set(["length","size","percentage"]),sH=t=>xu(t,rH,GA),iH=t=>xu(t,"position",GA),aH=new Set(["image","url"]),oH=t=>xu(t,aH,dH),lH=t=>xu(t,"",uH),Ju=()=>!0,xu=(t,e,n)=>{const r=HA.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},cH=t=>ZW.test(t)&&!JW.test(t),GA=()=>!1,uH=t=>eH.test(t),dH=t=>tH.test(t),hH=()=>{const t=Mt("colors"),e=Mt("spacing"),n=Mt("blur"),r=Mt("brightness"),i=Mt("borderColor"),a=Mt("borderRadius"),o=Mt("borderSpacing"),l=Mt("borderWidth"),c=Mt("contrast"),u=Mt("grayscale"),d=Mt("hueRotate"),f=Mt("invert"),m=Mt("gap"),v=Mt("gradientColorStops"),y=Mt("gradientColorStopPositions"),w=Mt("inset"),b=Mt("margin"),x=Mt("opacity"),g=Mt("padding"),_=Mt("saturate"),E=Mt("scale"),S=Mt("sepia"),O=Mt("skew"),I=Mt("space"),k=Mt("translate"),R=()=>["auto","contain","none"],N=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto",Ke,e],A=()=>[Ke,e],T=()=>["",bi,ha],U=()=>["auto",_c,Ke],H=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],z=()=>["solid","dashed","dotted","double","none"],V=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],M=()=>["start","end","center","between","around","evenly","stretch"],$=()=>["","0",Ke],L=()=>["auto","avoid","all","avoid-page","page","left","right","column"],W=()=>[_c,Ke];return{cacheSize:500,separator:":",theme:{colors:[Ju],spacing:[bi,ha],blur:["none","",fa,Ke],brightness:W(),borderColor:[t],borderRadius:["none","","full",fa,Ke],borderSpacing:A(),borderWidth:T(),contrast:W(),grayscale:$(),hueRotate:W(),invert:$(),gap:A(),gradientColorStops:[t],gradientColorStopPositions:[nH,ha],inset:P(),margin:P(),opacity:W(),padding:A(),saturate:W(),scale:W(),sepia:$(),skew:W(),space:A(),translate:A()},classGroups:{aspect:[{aspect:["auto","square","video",Ke]}],container:["container"],columns:[{columns:[fa]}],"break-after":[{"break-after":L()}],"break-before":[{"break-before":L()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...H(),Ke]}],overflow:[{overflow:N()}],"overflow-x":[{"overflow-x":N()}],"overflow-y":[{"overflow-y":N()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[w]}],"inset-x":[{"inset-x":[w]}],"inset-y":[{"inset-y":[w]}],start:[{start:[w]}],end:[{end:[w]}],top:[{top:[w]}],right:[{right:[w]}],bottom:[{bottom:[w]}],left:[{left:[w]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Zu,Ke]}],basis:[{basis:P()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ke]}],grow:[{grow:$()}],shrink:[{shrink:$()}],order:[{order:["first","last","none",Zu,Ke]}],"grid-cols":[{"grid-cols":[Ju]}],"col-start-end":[{col:["auto",{span:["full",Zu,Ke]},Ke]}],"col-start":[{"col-start":U()}],"col-end":[{"col-end":U()}],"grid-rows":[{"grid-rows":[Ju]}],"row-start-end":[{row:["auto",{span:[Zu,Ke]},Ke]}],"row-start":[{"row-start":U()}],"row-end":[{"row-end":U()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ke]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ke]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...M()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...M(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...M(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[g]}],px:[{px:[g]}],py:[{py:[g]}],ps:[{ps:[g]}],pe:[{pe:[g]}],pt:[{pt:[g]}],pr:[{pr:[g]}],pb:[{pb:[g]}],pl:[{pl:[g]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[I]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[I]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ke,e]}],"min-w":[{"min-w":[Ke,e,"min","max","fit"]}],"max-w":[{"max-w":[Ke,e,"none","full","min","max","fit","prose",{screen:[fa]},fa]}],h:[{h:[Ke,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ke,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ke,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ke,e,"auto","min","max","fit"]}],"font-size":[{text:["base",fa,ha]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ry]}],"font-family":[{font:[Ju]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ke]}],"line-clamp":[{"line-clamp":["none",_c,ry]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",bi,Ke]}],"list-image":[{"list-image":["none",Ke]}],"list-style-type":[{list:["none","disc","decimal",Ke]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",bi,ha]}],"underline-offset":[{"underline-offset":["auto",bi,Ke]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ke]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ke]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...H(),iH]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",sH]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},oH]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[v]}],"gradient-via":[{via:[v]}],"gradient-to":[{to:[v]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...z(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:z()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...z()]}],"outline-offset":[{"outline-offset":[bi,Ke]}],"outline-w":[{outline:[bi,ha]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:T()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[bi,ha]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",fa,lH]}],"shadow-color":[{shadow:[Ju]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...V(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":V()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",fa,Ke]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[_]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ke]}],duration:[{duration:W()}],ease:[{ease:["linear","in","out","in-out",Ke]}],delay:[{delay:W()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ke]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[Zu,Ke]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[O]}],"skew-y":[{"skew-y":[O]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ke]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ke]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ke]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[bi,ha,ry]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},fH=KW(hH);function Pe(...t){return fH(DW(t))}const rw=wv("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),B=p.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},a)=>{const o=r?Gi:"button";return s.jsx(o,{className:Pe(rw({variant:e,size:n,className:t})),ref:a,...i})});B.displayName="Button";const Ee=p.forwardRef(({className:t,type:e,...n},r)=>s.jsx("input",{type:e,className:Pe("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));Ee.displayName="Input";function le(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function mH(t,e){const n=p.createContext(e),r=a=>{const{children:o,...l}=a,c=p.useMemo(()=>l,Object.values(l));return s.jsx(n.Provider,{value:c,children:o})};r.displayName=t+"Provider";function i(a){const o=p.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${t}\``)}return[r,i]}function Hr(t,e=[]){let n=[];function r(a,o){const l=p.createContext(o),c=n.length;n=[...n,o];const u=f=>{var x;const{scope:m,children:v,...y}=f,w=((x=m==null?void 0:m[t])==null?void 0:x[c])||l,b=p.useMemo(()=>y,Object.values(y));return s.jsx(w.Provider,{value:b,children:v})};u.displayName=a+"Provider";function d(f,m){var w;const v=((w=m==null?void 0:m[t])==null?void 0:w[c])||l,y=p.useContext(v);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${a}\``)}return[u,d]}const i=()=>{const a=n.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[r,pH(i,...e)]}function pH(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(a)[`__scope${u}`];return{...l,...f}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function mn(t){const e=p.useRef(t);return p.useEffect(()=>{e.current=t}),p.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function Br({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=gH({defaultProp:e,onChange:n}),a=t!==void 0,o=a?t:r,l=mn(n),c=p.useCallback(u=>{if(a){const f=typeof u=="function"?u(t):u;f!==t&&l(f)}else i(u)},[a,t,i,l]);return[o,c]}function gH({defaultProp:t,onChange:e}){const n=p.useState(t),[r]=n,i=p.useRef(r),a=mn(e);return p.useEffect(()=>{i.current!==r&&(a(r),i.current=r)},[r,i,a]),n}var vH=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Se=vH.reduce((t,e)=>{const n=p.forwardRef((r,i)=>{const{asChild:a,...o}=r,l=a?Gi:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(l,{...o,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function KA(t,e){t&&cu.flushSync(()=>t.dispatchEvent(e))}function xH(t,e=[]){let n=[];function r(a,o){const l=p.createContext(o),c=n.length;n=[...n,o];function u(f){const{scope:m,children:v,...y}=f,w=(m==null?void 0:m[t][c])||l,b=p.useMemo(()=>y,Object.values(y));return s.jsx(w.Provider,{value:b,children:v})}function d(f,m){const v=(m==null?void 0:m[t][c])||l,y=p.useContext(v);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${a}\``)}return u.displayName=a+"Provider",[u,d]}const i=()=>{const a=n.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[r,yH(i,...e)]}function yH(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(a)[`__scope${u}`];return{...l,...f}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function of(t){const e=t+"CollectionProvider",[n,r]=xH(e),[i,a]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:y,children:w}=v,b=me.useRef(null),x=me.useRef(new Map).current;return s.jsx(i,{scope:y,itemMap:x,collectionRef:b,children:w})};o.displayName=e;const l=t+"CollectionSlot",c=me.forwardRef((v,y)=>{const{scope:w,children:b}=v,x=a(l,w),g=We(y,x.collectionRef);return s.jsx(Gi,{ref:g,children:b})});c.displayName=l;const u=t+"CollectionItemSlot",d="data-radix-collection-item",f=me.forwardRef((v,y)=>{const{scope:w,children:b,...x}=v,g=me.useRef(null),_=We(y,g),E=a(u,w);return me.useEffect(()=>(E.itemMap.set(g,{ref:g,...x}),()=>void E.itemMap.delete(g))),s.jsx(Gi,{[d]:"",ref:_,children:b})});f.displayName=u;function m(v){const y=a(t+"CollectionConsumer",v);return me.useCallback(()=>{const b=y.collectionRef.current;if(!b)return[];const x=Array.from(b.querySelectorAll(`[${d}]`));return Array.from(y.itemMap.values()).sort((E,S)=>x.indexOf(E.ref.current)-x.indexOf(S.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:c,ItemSlot:f},m,r]}var wH=p.createContext(void 0);function Tl(t){const e=p.useContext(wH);return t||e||"ltr"}function bH(t,e=globalThis==null?void 0:globalThis.document){const n=mn(t);p.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var jH="DismissableLayer",sw="dismissableLayer.update",_H="dismissableLayer.pointerDownOutside",NH="dismissableLayer.focusOutside",QS,YA=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),lf=p.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=t,u=p.useContext(YA),[d,f]=p.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,v]=p.useState({}),y=We(e,I=>f(I)),w=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=w.indexOf(b),g=d?w.indexOf(d):-1,_=u.layersWithOutsidePointerEventsDisabled.size>0,E=g>=x,S=CH(I=>{const k=I.target,R=[...u.branches].some(N=>N.contains(k));!E||R||(i==null||i(I),o==null||o(I),I.defaultPrevented||l==null||l())},m),O=TH(I=>{const k=I.target;[...u.branches].some(N=>N.contains(k))||(a==null||a(I),o==null||o(I),I.defaultPrevented||l==null||l())},m);return bH(I=>{g===u.layers.size-1&&(r==null||r(I),!I.defaultPrevented&&l&&(I.preventDefault(),l()))},m),p.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(QS=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),XS(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=QS)}},[d,m,n,u]),p.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),XS())},[d,u]),p.useEffect(()=>{const I=()=>v({});return document.addEventListener(sw,I),()=>document.removeEventListener(sw,I)},[]),s.jsx(Se.div,{...c,ref:y,style:{pointerEvents:_?E?"auto":"none":void 0,...t.style},onFocusCapture:le(t.onFocusCapture,O.onFocusCapture),onBlurCapture:le(t.onBlurCapture,O.onBlurCapture),onPointerDownCapture:le(t.onPointerDownCapture,S.onPointerDownCapture)})});lf.displayName=jH;var SH="DismissableLayerBranch",EH=p.forwardRef((t,e)=>{const n=p.useContext(YA),r=p.useRef(null),i=We(e,r);return p.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),s.jsx(Se.div,{...t,ref:i})});EH.displayName=SH;function CH(t,e=globalThis==null?void 0:globalThis.document){const n=mn(t),r=p.useRef(!1),i=p.useRef(()=>{});return p.useEffect(()=>{const a=l=>{if(l.target&&!r.current){let c=function(){QA(_H,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function TH(t,e=globalThis==null?void 0:globalThis.document){const n=mn(t),r=p.useRef(!1);return p.useEffect(()=>{const i=a=>{a.target&&!r.current&&QA(NH,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function XS(){const t=new CustomEvent(sw);document.dispatchEvent(t)}function QA(t,e,n,{discrete:r}){const i=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?KA(i,a):i.dispatchEvent(a)}var sy=0;function bv(){p.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??ZS()),document.body.insertAdjacentElement("beforeend",t[1]??ZS()),sy++,()=>{sy===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),sy--}},[])}function ZS(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var iy="focusScope.autoFocusOnMount",ay="focusScope.autoFocusOnUnmount",JS={bubbles:!1,cancelable:!0},kH="FocusScope",cf=p.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...o}=t,[l,c]=p.useState(null),u=mn(i),d=mn(a),f=p.useRef(null),m=We(e,w=>c(w)),v=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let w=function(_){if(v.paused||!l)return;const E=_.target;l.contains(E)?f.current=E:pa(f.current,{select:!0})},b=function(_){if(v.paused||!l)return;const E=_.relatedTarget;E!==null&&(l.contains(E)||pa(f.current,{select:!0}))},x=function(_){if(document.activeElement===document.body)for(const S of _)S.removedNodes.length>0&&pa(l)};document.addEventListener("focusin",w),document.addEventListener("focusout",b);const g=new MutationObserver(x);return l&&g.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",b),g.disconnect()}}},[r,l,v.paused]),p.useEffect(()=>{if(l){tE.add(v);const w=document.activeElement;if(!l.contains(w)){const x=new CustomEvent(iy,JS);l.addEventListener(iy,u),l.dispatchEvent(x),x.defaultPrevented||(IH(DH(XA(l)),{select:!0}),document.activeElement===w&&pa(l))}return()=>{l.removeEventListener(iy,u),setTimeout(()=>{const x=new CustomEvent(ay,JS);l.addEventListener(ay,d),l.dispatchEvent(x),x.defaultPrevented||pa(w??document.body,{select:!0}),l.removeEventListener(ay,d),tE.remove(v)},0)}}},[l,u,d,v]);const y=p.useCallback(w=>{if(!n&&!r||v.paused)return;const b=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,x=document.activeElement;if(b&&x){const g=w.currentTarget,[_,E]=PH(g);_&&E?!w.shiftKey&&x===E?(w.preventDefault(),n&&pa(_,{select:!0})):w.shiftKey&&x===_&&(w.preventDefault(),n&&pa(E,{select:!0})):x===g&&w.preventDefault()}},[n,r,v.paused]);return s.jsx(Se.div,{tabIndex:-1,...o,ref:m,onKeyDown:y})});cf.displayName=kH;function IH(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(pa(r,{select:e}),document.activeElement!==n)return}function PH(t){const e=XA(t),n=eE(e,t),r=eE(e.reverse(),t);return[n,r]}function XA(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function eE(t,e){for(const n of t)if(!AH(n,{upTo:e}))return n}function AH(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function RH(t){return t instanceof HTMLInputElement&&"select"in t}function pa(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&RH(t)&&e&&t.select()}}var tE=MH();function MH(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=nE(t,e),t.unshift(e)},remove(e){var n;t=nE(t,e),(n=t[0])==null||n.resume()}}}function nE(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function DH(t){return t.filter(e=>e.tagName!=="A")}var Sn=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},OH=EC.useId||(()=>{}),LH=0;function Fr(t){const[e,n]=p.useState(OH());return Sn(()=>{n(r=>r??String(LH++))},[t]),e?`radix-${e}`:""}const VH=["top","right","bottom","left"],no=Math.min,Mr=Math.max,Xp=Math.round,hm=Math.floor,ro=t=>({x:t,y:t}),FH={left:"right",right:"left",bottom:"top",top:"bottom"},UH={start:"end",end:"start"};function iw(t,e,n){return Mr(t,no(e,n))}function Ki(t,e){return typeof t=="function"?t(e):t}function Yi(t){return t.split("-")[0]}function yu(t){return t.split("-")[1]}function Yb(t){return t==="x"?"y":"x"}function Qb(t){return t==="y"?"height":"width"}function so(t){return["top","bottom"].includes(Yi(t))?"y":"x"}function Xb(t){return Yb(so(t))}function $H(t,e,n){n===void 0&&(n=!1);const r=yu(t),i=Xb(t),a=Qb(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(o=Zp(o)),[o,Zp(o)]}function zH(t){const e=Zp(t);return[aw(t),e,aw(e)]}function aw(t){return t.replace(/start|end/g,e=>UH[e])}function BH(t,e,n){const r=["left","right"],i=["right","left"],a=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?a:o;default:return[]}}function qH(t,e,n,r){const i=yu(t);let a=BH(Yi(t),n==="start",r);return i&&(a=a.map(o=>o+"-"+i),e&&(a=a.concat(a.map(aw)))),a}function Zp(t){return t.replace(/left|right|bottom|top/g,e=>FH[e])}function WH(t){return{top:0,right:0,bottom:0,left:0,...t}}function ZA(t){return typeof t!="number"?WH(t):{top:t,right:t,bottom:t,left:t}}function Jp(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function rE(t,e,n){let{reference:r,floating:i}=t;const a=so(e),o=Xb(e),l=Qb(o),c=Yi(e),u=a==="y",d=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,m=r[l]/2-i[l]/2;let v;switch(c){case"top":v={x:d,y:r.y-i.height};break;case"bottom":v={x:d,y:r.y+r.height};break;case"right":v={x:r.x+r.width,y:f};break;case"left":v={x:r.x-i.width,y:f};break;default:v={x:r.x,y:r.y}}switch(yu(e)){case"start":v[o]-=m*(n&&u?-1:1);break;case"end":v[o]+=m*(n&&u?-1:1);break}return v}const HH=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:o}=n,l=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:d,y:f}=rE(u,r,c),m=r,v={},y=0;for(let w=0;w<l.length;w++){const{name:b,fn:x}=l[w],{x:g,y:_,data:E,reset:S}=await x({x:d,y:f,initialPlacement:r,placement:m,strategy:i,middlewareData:v,rects:u,platform:o,elements:{reference:t,floating:e}});d=g??d,f=_??f,v={...v,[b]:{...v[b],...E}},S&&y<=50&&(y++,typeof S=="object"&&(S.placement&&(m=S.placement),S.rects&&(u=S.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):S.rects),{x:d,y:f}=rE(u,m,c)),w=-1)}return{x:d,y:f,placement:m,strategy:i,middlewareData:v}};async function mh(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:a,rects:o,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:m=!1,padding:v=0}=Ki(e,t),y=ZA(v),b=l[m?f==="floating"?"reference":"floating":f],x=Jp(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(b)))==null||n?b:b.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),g=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,_=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),E=await(a.isElement==null?void 0:a.isElement(_))?await(a.getScale==null?void 0:a.getScale(_))||{x:1,y:1}:{x:1,y:1},S=Jp(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:g,offsetParent:_,strategy:c}):g);return{top:(x.top-S.top+y.top)/E.y,bottom:(S.bottom-x.bottom+y.bottom)/E.y,left:(x.left-S.left+y.left)/E.x,right:(S.right-x.right+y.right)/E.x}}const GH=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:a,platform:o,elements:l,middlewareData:c}=e,{element:u,padding:d=0}=Ki(t,e)||{};if(u==null)return{};const f=ZA(d),m={x:n,y:r},v=Xb(i),y=Qb(v),w=await o.getDimensions(u),b=v==="y",x=b?"top":"left",g=b?"bottom":"right",_=b?"clientHeight":"clientWidth",E=a.reference[y]+a.reference[v]-m[v]-a.floating[y],S=m[v]-a.reference[v],O=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let I=O?O[_]:0;(!I||!await(o.isElement==null?void 0:o.isElement(O)))&&(I=l.floating[_]||a.floating[y]);const k=E/2-S/2,R=I/2-w[y]/2-1,N=no(f[x],R),P=no(f[g],R),A=N,T=I-w[y]-P,U=I/2-w[y]/2+k,H=iw(A,U,T),z=!c.arrow&&yu(i)!=null&&U!==H&&a.reference[y]/2-(U<A?N:P)-w[y]/2<0,V=z?U<A?U-A:U-T:0;return{[v]:m[v]+V,data:{[v]:H,centerOffset:U-H-V,...z&&{alignmentOffset:V}},reset:z}}}),KH=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:a,rects:o,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:w=!0,...b}=Ki(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const x=Yi(i),g=so(l),_=Yi(l)===l,E=await(c.isRTL==null?void 0:c.isRTL(u.floating)),S=m||(_||!w?[Zp(l)]:zH(l)),O=y!=="none";!m&&O&&S.push(...qH(l,w,y,E));const I=[l,...S],k=await mh(e,b),R=[];let N=((r=a.flip)==null?void 0:r.overflows)||[];if(d&&R.push(k[x]),f){const U=$H(i,o,E);R.push(k[U[0]],k[U[1]])}if(N=[...N,{placement:i,overflows:R}],!R.every(U=>U<=0)){var P,A;const U=(((P=a.flip)==null?void 0:P.index)||0)+1,H=I[U];if(H)return{data:{index:U,overflows:N},reset:{placement:H}};let z=(A=N.filter(V=>V.overflows[0]<=0).sort((V,M)=>V.overflows[1]-M.overflows[1])[0])==null?void 0:A.placement;if(!z)switch(v){case"bestFit":{var T;const V=(T=N.filter(M=>{if(O){const $=so(M.placement);return $===g||$==="y"}return!0}).map(M=>[M.placement,M.overflows.filter($=>$>0).reduce(($,L)=>$+L,0)]).sort((M,$)=>M[1]-$[1])[0])==null?void 0:T[0];V&&(z=V);break}case"initialPlacement":z=l;break}if(i!==z)return{reset:{placement:z}}}return{}}}};function sE(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function iE(t){return VH.some(e=>t[e]>=0)}const YH=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=Ki(t,e);switch(r){case"referenceHidden":{const a=await mh(e,{...i,elementContext:"reference"}),o=sE(a,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:iE(o)}}}case"escaped":{const a=await mh(e,{...i,altBoundary:!0}),o=sE(a,n.floating);return{data:{escapedOffsets:o,escaped:iE(o)}}}default:return{}}}}};async function QH(t,e){const{placement:n,platform:r,elements:i}=t,a=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Yi(n),l=yu(n),c=so(n)==="y",u=["left","top"].includes(o)?-1:1,d=a&&c?-1:1,f=Ki(e,t);let{mainAxis:m,crossAxis:v,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof y=="number"&&(v=l==="end"?y*-1:y),c?{x:v*d,y:m*u}:{x:m*u,y:v*d}}const XH=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:a,placement:o,middlewareData:l}=e,c=await QH(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:a+c.y,data:{...c,placement:o}}}}},ZH=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:b=>{let{x,y:g}=b;return{x,y:g}}},...c}=Ki(t,e),u={x:n,y:r},d=await mh(e,c),f=so(Yi(i)),m=Yb(f);let v=u[m],y=u[f];if(a){const b=m==="y"?"top":"left",x=m==="y"?"bottom":"right",g=v+d[b],_=v-d[x];v=iw(g,v,_)}if(o){const b=f==="y"?"top":"left",x=f==="y"?"bottom":"right",g=y+d[b],_=y-d[x];y=iw(g,y,_)}const w=l.fn({...e,[m]:v,[f]:y});return{...w,data:{x:w.x-n,y:w.y-r,enabled:{[m]:a,[f]:o}}}}}},JH=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:a,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Ki(t,e),d={x:n,y:r},f=so(i),m=Yb(f);let v=d[m],y=d[f];const w=Ki(l,e),b=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(c){const _=m==="y"?"height":"width",E=a.reference[m]-a.floating[_]+b.mainAxis,S=a.reference[m]+a.reference[_]-b.mainAxis;v<E?v=E:v>S&&(v=S)}if(u){var x,g;const _=m==="y"?"width":"height",E=["top","left"].includes(Yi(i)),S=a.reference[f]-a.floating[_]+(E&&((x=o.offset)==null?void 0:x[f])||0)+(E?0:b.crossAxis),O=a.reference[f]+a.reference[_]+(E?0:((g=o.offset)==null?void 0:g[f])||0)-(E?b.crossAxis:0);y<S?y=S:y>O&&(y=O)}return{[m]:v,[f]:y}}}},eG=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:a,platform:o,elements:l}=e,{apply:c=()=>{},...u}=Ki(t,e),d=await mh(e,u),f=Yi(i),m=yu(i),v=so(i)==="y",{width:y,height:w}=a.floating;let b,x;f==="top"||f==="bottom"?(b=f,x=m===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(x=f,b=m==="end"?"top":"bottom");const g=w-d.top-d.bottom,_=y-d.left-d.right,E=no(w-d[b],g),S=no(y-d[x],_),O=!e.middlewareData.shift;let I=E,k=S;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(k=_),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(I=g),O&&!m){const N=Mr(d.left,0),P=Mr(d.right,0),A=Mr(d.top,0),T=Mr(d.bottom,0);v?k=y-2*(N!==0||P!==0?N+P:Mr(d.left,d.right)):I=w-2*(A!==0||T!==0?A+T:Mr(d.top,d.bottom))}await c({...e,availableWidth:k,availableHeight:I});const R=await o.getDimensions(l.floating);return y!==R.width||w!==R.height?{reset:{rects:!0}}:{}}}};function jv(){return typeof window<"u"}function wu(t){return JA(t)?(t.nodeName||"").toLowerCase():"#document"}function Ur(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function pi(t){var e;return(e=(JA(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function JA(t){return jv()?t instanceof Node||t instanceof Ur(t).Node:!1}function Ps(t){return jv()?t instanceof Element||t instanceof Ur(t).Element:!1}function ci(t){return jv()?t instanceof HTMLElement||t instanceof Ur(t).HTMLElement:!1}function aE(t){return!jv()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ur(t).ShadowRoot}function uf(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=As(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function tG(t){return["table","td","th"].includes(wu(t))}function _v(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Zb(t){const e=Jb(),n=Ps(t)?As(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function nG(t){let e=io(t);for(;ci(e)&&!Yc(e);){if(Zb(e))return e;if(_v(e))return null;e=io(e)}return null}function Jb(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Yc(t){return["html","body","#document"].includes(wu(t))}function As(t){return Ur(t).getComputedStyle(t)}function Nv(t){return Ps(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function io(t){if(wu(t)==="html")return t;const e=t.assignedSlot||t.parentNode||aE(t)&&t.host||pi(t);return aE(e)?e.host:e}function eR(t){const e=io(t);return Yc(e)?t.ownerDocument?t.ownerDocument.body:t.body:ci(e)&&uf(e)?e:eR(e)}function ph(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=eR(t),a=i===((r=t.ownerDocument)==null?void 0:r.body),o=Ur(i);if(a){const l=ow(o);return e.concat(o,o.visualViewport||[],uf(i)?i:[],l&&n?ph(l):[])}return e.concat(i,ph(i,[],n))}function ow(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function tR(t){const e=As(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=ci(t),a=i?t.offsetWidth:n,o=i?t.offsetHeight:r,l=Xp(n)!==a||Xp(r)!==o;return l&&(n=a,r=o),{width:n,height:r,$:l}}function ej(t){return Ps(t)?t:t.contextElement}function Nc(t){const e=ej(t);if(!ci(e))return ro(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:a}=tR(e);let o=(a?Xp(n.width):n.width)/r,l=(a?Xp(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const rG=ro(0);function nR(t){const e=Ur(t);return!Jb()||!e.visualViewport?rG:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function sG(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Ur(t)?!1:e}function fl(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),a=ej(t);let o=ro(1);e&&(r?Ps(r)&&(o=Nc(r)):o=Nc(t));const l=sG(a,n,r)?nR(a):ro(0);let c=(i.left+l.x)/o.x,u=(i.top+l.y)/o.y,d=i.width/o.x,f=i.height/o.y;if(a){const m=Ur(a),v=r&&Ps(r)?Ur(r):r;let y=m,w=ow(y);for(;w&&r&&v!==y;){const b=Nc(w),x=w.getBoundingClientRect(),g=As(w),_=x.left+(w.clientLeft+parseFloat(g.paddingLeft))*b.x,E=x.top+(w.clientTop+parseFloat(g.paddingTop))*b.y;c*=b.x,u*=b.y,d*=b.x,f*=b.y,c+=_,u+=E,y=Ur(w),w=ow(y)}}return Jp({width:d,height:f,x:c,y:u})}function iG(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const a=i==="fixed",o=pi(r),l=e?_v(e.floating):!1;if(r===o||l&&a)return n;let c={scrollLeft:0,scrollTop:0},u=ro(1);const d=ro(0),f=ci(r);if((f||!f&&!a)&&((wu(r)!=="body"||uf(o))&&(c=Nv(r)),ci(r))){const m=fl(r);u=Nc(r),d.x=m.x+r.clientLeft,d.y=m.y+r.clientTop}return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x,y:n.y*u.y-c.scrollTop*u.y+d.y}}function aG(t){return Array.from(t.getClientRects())}function lw(t,e){const n=Nv(t).scrollLeft;return e?e.left+n:fl(pi(t)).left+n}function oG(t){const e=pi(t),n=Nv(t),r=t.ownerDocument.body,i=Mr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=Mr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+lw(t);const l=-n.scrollTop;return As(r).direction==="rtl"&&(o+=Mr(e.clientWidth,r.clientWidth)-i),{width:i,height:a,x:o,y:l}}function lG(t,e){const n=Ur(t),r=pi(t),i=n.visualViewport;let a=r.clientWidth,o=r.clientHeight,l=0,c=0;if(i){a=i.width,o=i.height;const u=Jb();(!u||u&&e==="fixed")&&(l=i.offsetLeft,c=i.offsetTop)}return{width:a,height:o,x:l,y:c}}function cG(t,e){const n=fl(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,a=ci(t)?Nc(t):ro(1),o=t.clientWidth*a.x,l=t.clientHeight*a.y,c=i*a.x,u=r*a.y;return{width:o,height:l,x:c,y:u}}function oE(t,e,n){let r;if(e==="viewport")r=lG(t,n);else if(e==="document")r=oG(pi(t));else if(Ps(e))r=cG(e,n);else{const i=nR(t);r={...e,x:e.x-i.x,y:e.y-i.y}}return Jp(r)}function rR(t,e){const n=io(t);return n===e||!Ps(n)||Yc(n)?!1:As(n).position==="fixed"||rR(n,e)}function uG(t,e){const n=e.get(t);if(n)return n;let r=ph(t,[],!1).filter(l=>Ps(l)&&wu(l)!=="body"),i=null;const a=As(t).position==="fixed";let o=a?io(t):t;for(;Ps(o)&&!Yc(o);){const l=As(o),c=Zb(o);!c&&l.position==="fixed"&&(i=null),(a?!c&&!i:!c&&l.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||uf(o)&&!c&&rR(t,o))?r=r.filter(d=>d!==o):i=l,o=io(o)}return e.set(t,r),r}function dG(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?_v(e)?[]:uG(e,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,d)=>{const f=oE(e,d,i);return u.top=Mr(f.top,u.top),u.right=no(f.right,u.right),u.bottom=no(f.bottom,u.bottom),u.left=Mr(f.left,u.left),u},oE(e,l,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function hG(t){const{width:e,height:n}=tR(t);return{width:e,height:n}}function fG(t,e,n){const r=ci(e),i=pi(e),a=n==="fixed",o=fl(t,!0,a,e);let l={scrollLeft:0,scrollTop:0};const c=ro(0);if(r||!r&&!a)if((wu(e)!=="body"||uf(i))&&(l=Nv(e)),r){const v=fl(e,!0,a,e);c.x=v.x+e.clientLeft,c.y=v.y+e.clientTop}else i&&(c.x=lw(i));let u=0,d=0;if(i&&!r&&!a){const v=i.getBoundingClientRect();d=v.top+l.scrollTop,u=v.left+l.scrollLeft-lw(i,v)}const f=o.left+l.scrollLeft-c.x-u,m=o.top+l.scrollTop-c.y-d;return{x:f,y:m,width:o.width,height:o.height}}function oy(t){return As(t).position==="static"}function lE(t,e){if(!ci(t)||As(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return pi(t)===n&&(n=n.ownerDocument.body),n}function sR(t,e){const n=Ur(t);if(_v(t))return n;if(!ci(t)){let i=io(t);for(;i&&!Yc(i);){if(Ps(i)&&!oy(i))return i;i=io(i)}return n}let r=lE(t,e);for(;r&&tG(r)&&oy(r);)r=lE(r,e);return r&&Yc(r)&&oy(r)&&!Zb(r)?n:r||nG(t)||n}const mG=async function(t){const e=this.getOffsetParent||sR,n=this.getDimensions,r=await n(t.floating);return{reference:fG(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function pG(t){return As(t).direction==="rtl"}const gG={convertOffsetParentRelativeRectToViewportRelativeRect:iG,getDocumentElement:pi,getClippingRect:dG,getOffsetParent:sR,getElementRects:mG,getClientRects:aG,getDimensions:hG,getScale:Nc,isElement:Ps,isRTL:pG};function vG(t,e){let n=null,r;const i=pi(t);function a(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const{left:u,top:d,width:f,height:m}=t.getBoundingClientRect();if(l||e(),!f||!m)return;const v=hm(d),y=hm(i.clientWidth-(u+f)),w=hm(i.clientHeight-(d+m)),b=hm(u),g={rootMargin:-v+"px "+-y+"px "+-w+"px "+-b+"px",threshold:Mr(0,no(1,c))||1};let _=!0;function E(S){const O=S[0].intersectionRatio;if(O!==c){if(!_)return o();O?o(!1,O):r=setTimeout(()=>{o(!1,1e-7)},1e3)}_=!1}try{n=new IntersectionObserver(E,{...g,root:i.ownerDocument})}catch{n=new IntersectionObserver(E,g)}n.observe(t)}return o(!0),a}function xG(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=ej(t),d=i||a?[...u?ph(u):[],...ph(e)]:[];d.forEach(x=>{i&&x.addEventListener("scroll",n,{passive:!0}),a&&x.addEventListener("resize",n)});const f=u&&l?vG(u,n):null;let m=-1,v=null;o&&(v=new ResizeObserver(x=>{let[g]=x;g&&g.target===u&&v&&(v.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var _;(_=v)==null||_.observe(e)})),n()}),u&&!c&&v.observe(u),v.observe(e));let y,w=c?fl(t):null;c&&b();function b(){const x=fl(t);w&&(x.x!==w.x||x.y!==w.y||x.width!==w.width||x.height!==w.height)&&n(),w=x,y=requestAnimationFrame(b)}return n(),()=>{var x;d.forEach(g=>{i&&g.removeEventListener("scroll",n),a&&g.removeEventListener("resize",n)}),f==null||f(),(x=v)==null||x.disconnect(),v=null,c&&cancelAnimationFrame(y)}}const yG=XH,wG=ZH,bG=KH,jG=eG,_G=YH,cE=GH,NG=JH,SG=(t,e,n)=>{const r=new Map,i={platform:gG,...n},a={...i.platform,_c:r};return HH(t,e,{...i,platform:a})};var Gm=typeof document<"u"?p.useLayoutEffect:p.useEffect;function eg(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!eg(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const a=i[r];if(!(a==="_owner"&&t.$$typeof)&&!eg(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function iR(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function uE(t,e){const n=iR(t);return Math.round(e*n)/n}function ly(t){const e=p.useRef(t);return Gm(()=>{e.current=t}),e}function EG(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[d,f]=p.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,v]=p.useState(r);eg(m,r)||v(r);const[y,w]=p.useState(null),[b,x]=p.useState(null),g=p.useCallback(M=>{M!==O.current&&(O.current=M,w(M))},[]),_=p.useCallback(M=>{M!==I.current&&(I.current=M,x(M))},[]),E=a||y,S=o||b,O=p.useRef(null),I=p.useRef(null),k=p.useRef(d),R=c!=null,N=ly(c),P=ly(i),A=ly(u),T=p.useCallback(()=>{if(!O.current||!I.current)return;const M={placement:e,strategy:n,middleware:m};P.current&&(M.platform=P.current),SG(O.current,I.current,M).then($=>{const L={...$,isPositioned:A.current!==!1};U.current&&!eg(k.current,L)&&(k.current=L,cu.flushSync(()=>{f(L)}))})},[m,e,n,P,A]);Gm(()=>{u===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,f(M=>({...M,isPositioned:!1})))},[u]);const U=p.useRef(!1);Gm(()=>(U.current=!0,()=>{U.current=!1}),[]),Gm(()=>{if(E&&(O.current=E),S&&(I.current=S),E&&S){if(N.current)return N.current(E,S,T);T()}},[E,S,T,N,R]);const H=p.useMemo(()=>({reference:O,floating:I,setReference:g,setFloating:_}),[g,_]),z=p.useMemo(()=>({reference:E,floating:S}),[E,S]),V=p.useMemo(()=>{const M={position:n,left:0,top:0};if(!z.floating)return M;const $=uE(z.floating,d.x),L=uE(z.floating,d.y);return l?{...M,transform:"translate("+$+"px, "+L+"px)",...iR(z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:$,top:L}},[n,l,z.floating,d.x,d.y]);return p.useMemo(()=>({...d,update:T,refs:H,elements:z,floatingStyles:V}),[d,T,H,z,V])}const CG=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?cE({element:r.current,padding:i}).fn(n):{}:r?cE({element:r,padding:i}).fn(n):{}}}},TG=(t,e)=>({...yG(t),options:[t,e]}),kG=(t,e)=>({...wG(t),options:[t,e]}),IG=(t,e)=>({...NG(t),options:[t,e]}),PG=(t,e)=>({...bG(t),options:[t,e]}),AG=(t,e)=>({...jG(t),options:[t,e]}),RG=(t,e)=>({..._G(t),options:[t,e]}),MG=(t,e)=>({...CG(t),options:[t,e]});var DG="Arrow",aR=p.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...a}=t;return s.jsx(Se.svg,{...a,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});aR.displayName=DG;var OG=aR;function LG(t,e=[]){let n=[];function r(a,o){const l=p.createContext(o),c=n.length;n=[...n,o];function u(f){const{scope:m,children:v,...y}=f,w=(m==null?void 0:m[t][c])||l,b=p.useMemo(()=>y,Object.values(y));return s.jsx(w.Provider,{value:b,children:v})}function d(f,m){const v=(m==null?void 0:m[t][c])||l,y=p.useContext(v);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${a}\``)}return u.displayName=a+"Provider",[u,d]}const i=()=>{const a=n.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[r,VG(i,...e)]}function VG(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(a)[`__scope${u}`];return{...l,...f}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Sv(t){const[e,n]=p.useState(void 0);return Sn(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let o,l;if("borderBoxSize"in a){const c=a.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=t.offsetWidth,l=t.offsetHeight;n({width:o,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var tj="Popper",[oR,bu]=LG(tj),[FG,lR]=oR(tj),cR=t=>{const{__scopePopper:e,children:n}=t,[r,i]=p.useState(null);return s.jsx(FG,{scope:e,anchor:r,onAnchorChange:i,children:n})};cR.displayName=tj;var uR="PopperAnchor",dR=p.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,a=lR(uR,n),o=p.useRef(null),l=We(e,o);return p.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:s.jsx(Se.div,{...i,ref:l})});dR.displayName=uR;var nj="PopperContent",[UG,$G]=oR(nj),hR=p.forwardRef((t,e)=>{var ve,Qe,X,de,ke,Le;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:v="optimized",onPlaced:y,...w}=t,b=lR(nj,n),[x,g]=p.useState(null),_=We(e,He=>g(He)),[E,S]=p.useState(null),O=Sv(E),I=(O==null?void 0:O.width)??0,k=(O==null?void 0:O.height)??0,R=r+(a!=="center"?"-"+a:""),N=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},P=Array.isArray(u)?u:[u],A=P.length>0,T={padding:N,boundary:P.filter(BG),altBoundary:A},{refs:U,floatingStyles:H,placement:z,isPositioned:V,middlewareData:M}=EG({strategy:"fixed",placement:R,whileElementsMounted:(...He)=>xG(...He,{animationFrame:v==="always"}),elements:{reference:b.anchor},middleware:[TG({mainAxis:i+k,alignmentAxis:o}),c&&kG({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?IG():void 0,...T}),c&&PG({...T}),AG({...T,apply:({elements:He,rects:Tt,availableWidth:Gr,availableHeight:vi})=>{const{width:aa,height:F}=Tt.reference,G=He.floating.style;G.setProperty("--radix-popper-available-width",`${Gr}px`),G.setProperty("--radix-popper-available-height",`${vi}px`),G.setProperty("--radix-popper-anchor-width",`${aa}px`),G.setProperty("--radix-popper-anchor-height",`${F}px`)}}),E&&MG({element:E,padding:l}),qG({arrowWidth:I,arrowHeight:k}),m&&RG({strategy:"referenceHidden",...T})]}),[$,L]=pR(z),W=mn(y);Sn(()=>{V&&(W==null||W())},[V,W]);const ne=(ve=M.arrow)==null?void 0:ve.x,ye=(Qe=M.arrow)==null?void 0:Qe.y,Xe=((X=M.arrow)==null?void 0:X.centerOffset)!==0,[xt,ut]=p.useState();return Sn(()=>{x&&ut(window.getComputedStyle(x).zIndex)},[x]),s.jsx("div",{ref:U.setFloating,"data-radix-popper-content-wrapper":"",style:{...H,transform:V?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:xt,"--radix-popper-transform-origin":[(de=M.transformOrigin)==null?void 0:de.x,(ke=M.transformOrigin)==null?void 0:ke.y].join(" "),...((Le=M.hide)==null?void 0:Le.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:s.jsx(UG,{scope:n,placedSide:$,onArrowChange:S,arrowX:ne,arrowY:ye,shouldHideArrow:Xe,children:s.jsx(Se.div,{"data-side":$,"data-align":L,...w,ref:_,style:{...w.style,animation:V?void 0:"none"}})})})});hR.displayName=nj;var fR="PopperArrow",zG={top:"bottom",right:"left",bottom:"top",left:"right"},mR=p.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,a=$G(fR,r),o=zG[a.placedSide];return s.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:s.jsx(OG,{...i,ref:n,style:{...i.style,display:"block"}})})});mR.displayName=fR;function BG(t){return t!==null}var qG=t=>({name:"transformOrigin",options:t,fn(e){var b,x,g;const{placement:n,rects:r,middlewareData:i}=e,o=((b=i.arrow)==null?void 0:b.centerOffset)!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,d]=pR(n),f={start:"0%",center:"50%",end:"100%"}[d],m=(((x=i.arrow)==null?void 0:x.x)??0)+l/2,v=(((g=i.arrow)==null?void 0:g.y)??0)+c/2;let y="",w="";return u==="bottom"?(y=o?f:`${m}px`,w=`${-c}px`):u==="top"?(y=o?f:`${m}px`,w=`${r.floating.height+c}px`):u==="right"?(y=`${-c}px`,w=o?f:`${v}px`):u==="left"&&(y=`${r.floating.width+c}px`,w=o?f:`${v}px`),{data:{x:y,y:w}}}});function pR(t){const[e,n="center"]=t.split("-");return[e,n]}var rj=cR,Ev=dR,sj=hR,ij=mR,WG="Portal",df=p.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[i,a]=p.useState(!1);Sn(()=>a(!0),[]);const o=n||i&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?VL.createPortal(s.jsx(Se.div,{...r,ref:e}),o):null});df.displayName=WG;function HG(t,e){return p.useReducer((n,r)=>e[n][r]??n,t)}var Un=t=>{const{present:e,children:n}=t,r=GG(e),i=typeof n=="function"?n({present:r.isPresent}):p.Children.only(n),a=We(r.ref,KG(i));return typeof n=="function"||r.isPresent?p.cloneElement(i,{ref:a}):null};Un.displayName="Presence";function GG(t){const[e,n]=p.useState(),r=p.useRef({}),i=p.useRef(t),a=p.useRef("none"),o=t?"mounted":"unmounted",[l,c]=HG(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const u=fm(r.current);a.current=l==="mounted"?u:"none"},[l]),Sn(()=>{const u=r.current,d=i.current;if(d!==t){const m=a.current,v=fm(u);t?c("MOUNT"):v==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&m!==v?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,c]),Sn(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,f=v=>{const w=fm(r.current).includes(v.animationName);if(v.target===e&&w&&(c("ANIMATION_END"),!i.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},m=v=>{v.target===e&&(a.current=fm(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function fm(t){return(t==null?void 0:t.animationName)||"none"}function KG(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function YG(t,e=[]){let n=[];function r(a,o){const l=p.createContext(o),c=n.length;n=[...n,o];function u(f){const{scope:m,children:v,...y}=f,w=(m==null?void 0:m[t][c])||l,b=p.useMemo(()=>y,Object.values(y));return s.jsx(w.Provider,{value:b,children:v})}function d(f,m){const v=(m==null?void 0:m[t][c])||l,y=p.useContext(v);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${a}\``)}return u.displayName=a+"Provider",[u,d]}const i=()=>{const a=n.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[r,QG(i,...e)]}function QG(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(a)[`__scope${u}`];return{...l,...f}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var cy="rovingFocusGroup.onEntryFocus",XG={bubbles:!1,cancelable:!0},Cv="RovingFocusGroup",[cw,gR,ZG]=of(Cv),[JG,Tv]=YG(Cv,[ZG]),[eK,tK]=JG(Cv),vR=p.forwardRef((t,e)=>s.jsx(cw.Provider,{scope:t.__scopeRovingFocusGroup,children:s.jsx(cw.Slot,{scope:t.__scopeRovingFocusGroup,children:s.jsx(nK,{...t,ref:e})})}));vR.displayName=Cv;var nK=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=t,m=p.useRef(null),v=We(e,m),y=Tl(a),[w=null,b]=Br({prop:o,defaultProp:l,onChange:c}),[x,g]=p.useState(!1),_=mn(u),E=gR(n),S=p.useRef(!1),[O,I]=p.useState(0);return p.useEffect(()=>{const k=m.current;if(k)return k.addEventListener(cy,_),()=>k.removeEventListener(cy,_)},[_]),s.jsx(eK,{scope:n,orientation:r,dir:y,loop:i,currentTabStopId:w,onItemFocus:p.useCallback(k=>b(k),[b]),onItemShiftTab:p.useCallback(()=>g(!0),[]),onFocusableItemAdd:p.useCallback(()=>I(k=>k+1),[]),onFocusableItemRemove:p.useCallback(()=>I(k=>k-1),[]),children:s.jsx(Se.div,{tabIndex:x||O===0?-1:0,"data-orientation":r,...f,ref:v,style:{outline:"none",...t.style},onMouseDown:le(t.onMouseDown,()=>{S.current=!0}),onFocus:le(t.onFocus,k=>{const R=!S.current;if(k.target===k.currentTarget&&R&&!x){const N=new CustomEvent(cy,XG);if(k.currentTarget.dispatchEvent(N),!N.defaultPrevented){const P=E().filter(z=>z.focusable),A=P.find(z=>z.active),T=P.find(z=>z.id===w),H=[A,T,...P].filter(Boolean).map(z=>z.ref.current);wR(H,d)}}S.current=!1}),onBlur:le(t.onBlur,()=>g(!1))})})}),xR="RovingFocusGroupItem",yR=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:a,...o}=t,l=Fr(),c=a||l,u=tK(xR,n),d=u.currentTabStopId===c,f=gR(n),{onFocusableItemAdd:m,onFocusableItemRemove:v}=u;return p.useEffect(()=>{if(r)return m(),()=>v()},[r,m,v]),s.jsx(cw.ItemSlot,{scope:n,id:c,focusable:r,active:i,children:s.jsx(Se.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...o,ref:e,onMouseDown:le(t.onMouseDown,y=>{r?u.onItemFocus(c):y.preventDefault()}),onFocus:le(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:le(t.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){u.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const w=iK(y,u.orientation,u.dir);if(w!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let x=f().filter(g=>g.focusable).map(g=>g.ref.current);if(w==="last")x.reverse();else if(w==="prev"||w==="next"){w==="prev"&&x.reverse();const g=x.indexOf(y.currentTarget);x=u.loop?aK(x,g+1):x.slice(g+1)}setTimeout(()=>wR(x))}})})})});yR.displayName=xR;var rK={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function sK(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function iK(t,e,n){const r=sK(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return rK[r]}function wR(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function aK(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var bR=vR,jR=yR,oK=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Fl=new WeakMap,mm=new WeakMap,pm={},uy=0,_R=function(t){return t&&(t.host||_R(t.parentNode))},lK=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=_R(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},cK=function(t,e,n,r){var i=lK(e,Array.isArray(t)?t:[t]);pm[n]||(pm[n]=new WeakMap);var a=pm[n],o=[],l=new Set,c=new Set(i),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};i.forEach(u);var d=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(m){if(l.has(m))d(m);else try{var v=m.getAttribute(r),y=v!==null&&v!=="false",w=(Fl.get(m)||0)+1,b=(a.get(m)||0)+1;Fl.set(m,w),a.set(m,b),o.push(m),w===1&&y&&mm.set(m,!0),b===1&&m.setAttribute(n,"true"),y||m.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",m,x)}})};return d(e),l.clear(),uy++,function(){o.forEach(function(f){var m=Fl.get(f)-1,v=a.get(f)-1;Fl.set(f,m),a.set(f,v),m||(mm.has(f)||f.removeAttribute(r),mm.delete(f)),v||f.removeAttribute(n)}),uy--,uy||(Fl=new WeakMap,Fl=new WeakMap,mm=new WeakMap,pm={})}},kv=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=oK(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),cK(r,i,n,"aria-hidden")):function(){return null}},Km="right-scroll-bar-position",Ym="width-before-scroll-bar",uK="with-scroll-bars-hidden",dK="--removed-body-scroll-bar-size";function dy(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function hK(t,e){var n=p.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var fK=typeof window<"u"?p.useLayoutEffect:p.useEffect,dE=new WeakMap;function mK(t,e){var n=hK(null,function(r){return t.forEach(function(i){return dy(i,r)})});return fK(function(){var r=dE.get(n);if(r){var i=new Set(r),a=new Set(t),o=n.current;i.forEach(function(l){a.has(l)||dy(l,null)}),a.forEach(function(l){i.has(l)||dy(l,o)})}dE.set(n,t)},[t]),n}function pK(t){return t}function gK(t,e){e===void 0&&(e=pK);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(a){var o=e(a,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(r=!0;n.length;){var o=n;n=[],o.forEach(a)}n={push:function(l){return a(l)},filter:function(){return n}}},assignMedium:function(a){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(a),o=n}var c=function(){var d=o;o=[],d.forEach(a)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),n}}}};return i}function vK(t){t===void 0&&(t={});var e=gK(null);return e.options=qs({async:!0,ssr:!1},t),e}var NR=function(t){var e=t.sideCar,n=Bh(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return p.createElement(r,qs({},n))};NR.isSideCarExport=!0;function xK(t,e){return t.useMedium(e),NR}var SR=vK(),hy=function(){},Iv=p.forwardRef(function(t,e){var n=p.useRef(null),r=p.useState({onScrollCapture:hy,onWheelCapture:hy,onTouchMoveCapture:hy}),i=r[0],a=r[1],o=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,d=t.enabled,f=t.shards,m=t.sideCar,v=t.noIsolation,y=t.inert,w=t.allowPinchZoom,b=t.as,x=b===void 0?"div":b,g=t.gapMode,_=Bh(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=m,S=mK([n,e]),O=qs(qs({},_),i);return p.createElement(p.Fragment,null,d&&p.createElement(E,{sideCar:SR,removeScrollBar:u,shards:f,noIsolation:v,inert:y,setCallbacks:a,allowPinchZoom:!!w,lockRef:n,gapMode:g}),o?p.cloneElement(p.Children.only(l),qs(qs({},O),{ref:S})):p.createElement(x,qs({},O,{className:c,ref:S}),l))});Iv.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Iv.classNames={fullWidth:Ym,zeroRight:Km};var yK=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function wK(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=yK();return e&&t.setAttribute("nonce",e),t}function bK(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function jK(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var _K=function(){var t=0,e=null;return{add:function(n){t==0&&(e=wK())&&(bK(e,n),jK(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},NK=function(){var t=_K();return function(e,n){p.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},ER=function(){var t=NK(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},SK={left:0,top:0,right:0,gap:0},fy=function(t){return parseInt(t||"",10)||0},EK=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[fy(n),fy(r),fy(i)]},CK=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return SK;var e=EK(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},TK=ER(),Sc="data-scroll-locked",kK=function(t,e,n,r){var i=t.left,a=t.top,o=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(uK,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(Sc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Km,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Ym,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Km," .").concat(Km,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Ym," .").concat(Ym,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Sc,`] {
    `).concat(dK,": ").concat(l,`px;
  }
`)},hE=function(){var t=parseInt(document.body.getAttribute(Sc)||"0",10);return isFinite(t)?t:0},IK=function(){p.useEffect(function(){return document.body.setAttribute(Sc,(hE()+1).toString()),function(){var t=hE()-1;t<=0?document.body.removeAttribute(Sc):document.body.setAttribute(Sc,t.toString())}},[])},PK=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;IK();var a=p.useMemo(function(){return CK(i)},[i]);return p.createElement(TK,{styles:kK(a,!e,i,n?"":"!important")})},uw=!1;if(typeof window<"u")try{var gm=Object.defineProperty({},"passive",{get:function(){return uw=!0,!0}});window.addEventListener("test",gm,gm),window.removeEventListener("test",gm,gm)}catch{uw=!1}var Ul=uw?{passive:!1}:!1,AK=function(t){return t.tagName==="TEXTAREA"},CR=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!AK(t)&&n[e]==="visible")},RK=function(t){return CR(t,"overflowY")},MK=function(t){return CR(t,"overflowX")},fE=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=TR(t,r);if(i){var a=kR(t,r),o=a[1],l=a[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},DK=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},OK=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},TR=function(t,e){return t==="v"?RK(e):MK(e)},kR=function(t,e){return t==="v"?DK(e):OK(e)},LK=function(t,e){return t==="h"&&e==="rtl"?-1:1},VK=function(t,e,n,r,i){var a=LK(t,window.getComputedStyle(e).direction),o=a*r,l=n.target,c=e.contains(l),u=!1,d=o>0,f=0,m=0;do{var v=kR(t,l),y=v[0],w=v[1],b=v[2],x=w-b-a*y;(y||x)&&TR(t,l)&&(f+=x,m+=y),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(d&&(Math.abs(f)<1||!i)||!d&&(Math.abs(m)<1||!i))&&(u=!0),u},vm=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},mE=function(t){return[t.deltaX,t.deltaY]},pE=function(t){return t&&"current"in t?t.current:t},FK=function(t,e){return t[0]===e[0]&&t[1]===e[1]},UK=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},$K=0,$l=[];function zK(t){var e=p.useRef([]),n=p.useRef([0,0]),r=p.useRef(),i=p.useState($K++)[0],a=p.useState(ER)[0],o=p.useRef(t);p.useEffect(function(){o.current=t},[t]),p.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var w=p8([t.lockRef.current],(t.shards||[]).map(pE),!0).filter(Boolean);return w.forEach(function(b){return b.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),w.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var l=p.useCallback(function(w,b){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!o.current.allowPinchZoom;var x=vm(w),g=n.current,_="deltaX"in w?w.deltaX:g[0]-x[0],E="deltaY"in w?w.deltaY:g[1]-x[1],S,O=w.target,I=Math.abs(_)>Math.abs(E)?"h":"v";if("touches"in w&&I==="h"&&O.type==="range")return!1;var k=fE(I,O);if(!k)return!0;if(k?S=I:(S=I==="v"?"h":"v",k=fE(I,O)),!k)return!1;if(!r.current&&"changedTouches"in w&&(_||E)&&(r.current=S),!S)return!0;var R=r.current||S;return VK(R,b,w,R==="h"?_:E,!0)},[]),c=p.useCallback(function(w){var b=w;if(!(!$l.length||$l[$l.length-1]!==a)){var x="deltaY"in b?mE(b):vm(b),g=e.current.filter(function(S){return S.name===b.type&&(S.target===b.target||b.target===S.shadowParent)&&FK(S.delta,x)})[0];if(g&&g.should){b.cancelable&&b.preventDefault();return}if(!g){var _=(o.current.shards||[]).map(pE).filter(Boolean).filter(function(S){return S.contains(b.target)}),E=_.length>0?l(b,_[0]):!o.current.noIsolation;E&&b.cancelable&&b.preventDefault()}}},[]),u=p.useCallback(function(w,b,x,g){var _={name:w,delta:b,target:x,should:g,shadowParent:BK(x)};e.current.push(_),setTimeout(function(){e.current=e.current.filter(function(E){return E!==_})},1)},[]),d=p.useCallback(function(w){n.current=vm(w),r.current=void 0},[]),f=p.useCallback(function(w){u(w.type,mE(w),w.target,l(w,t.lockRef.current))},[]),m=p.useCallback(function(w){u(w.type,vm(w),w.target,l(w,t.lockRef.current))},[]);p.useEffect(function(){return $l.push(a),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",c,Ul),document.addEventListener("touchmove",c,Ul),document.addEventListener("touchstart",d,Ul),function(){$l=$l.filter(function(w){return w!==a}),document.removeEventListener("wheel",c,Ul),document.removeEventListener("touchmove",c,Ul),document.removeEventListener("touchstart",d,Ul)}},[]);var v=t.removeScrollBar,y=t.inert;return p.createElement(p.Fragment,null,y?p.createElement(a,{styles:UK(i)}):null,v?p.createElement(PK,{gapMode:t.gapMode}):null)}function BK(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const qK=xK(SR,zK);var hf=p.forwardRef(function(t,e){return p.createElement(Iv,qs({},t,{ref:e,sideCar:qK}))});hf.classNames=Iv.classNames;var dw=["Enter"," "],WK=["ArrowDown","PageUp","Home"],IR=["ArrowUp","PageDown","End"],HK=[...WK,...IR],GK={ltr:[...dw,"ArrowRight"],rtl:[...dw,"ArrowLeft"]},KK={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ff="Menu",[gh,YK,QK]=of(ff),[kl,PR]=Hr(ff,[QK,bu,Tv]),Pv=bu(),AR=Tv(),[XK,Il]=kl(ff),[ZK,mf]=kl(ff),RR=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:i,onOpenChange:a,modal:o=!0}=t,l=Pv(e),[c,u]=p.useState(null),d=p.useRef(!1),f=mn(a),m=Tl(i);return p.useEffect(()=>{const v=()=>{d.current=!0,document.addEventListener("pointerdown",y,{capture:!0,once:!0}),document.addEventListener("pointermove",y,{capture:!0,once:!0})},y=()=>d.current=!1;return document.addEventListener("keydown",v,{capture:!0}),()=>{document.removeEventListener("keydown",v,{capture:!0}),document.removeEventListener("pointerdown",y,{capture:!0}),document.removeEventListener("pointermove",y,{capture:!0})}},[]),s.jsx(rj,{...l,children:s.jsx(XK,{scope:e,open:n,onOpenChange:f,content:c,onContentChange:u,children:s.jsx(ZK,{scope:e,onClose:p.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:m,modal:o,children:r})})})};RR.displayName=ff;var JK="MenuAnchor",aj=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=Pv(n);return s.jsx(Ev,{...i,...r,ref:e})});aj.displayName=JK;var oj="MenuPortal",[eY,MR]=kl(oj,{forceMount:void 0}),DR=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:i}=t,a=Il(oj,e);return s.jsx(eY,{scope:e,forceMount:n,children:s.jsx(Un,{present:n||a.open,children:s.jsx(df,{asChild:!0,container:i,children:r})})})};DR.displayName=oj;var is="MenuContent",[tY,lj]=kl(is),OR=p.forwardRef((t,e)=>{const n=MR(is,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,a=Il(is,t.__scopeMenu),o=mf(is,t.__scopeMenu);return s.jsx(gh.Provider,{scope:t.__scopeMenu,children:s.jsx(Un,{present:r||a.open,children:s.jsx(gh.Slot,{scope:t.__scopeMenu,children:o.modal?s.jsx(nY,{...i,ref:e}):s.jsx(rY,{...i,ref:e})})})})}),nY=p.forwardRef((t,e)=>{const n=Il(is,t.__scopeMenu),r=p.useRef(null),i=We(e,r);return p.useEffect(()=>{const a=r.current;if(a)return kv(a)},[]),s.jsx(cj,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:le(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),rY=p.forwardRef((t,e)=>{const n=Il(is,t.__scopeMenu);return s.jsx(cj,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),cj=p.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:m,onDismiss:v,disableOutsideScroll:y,...w}=t,b=Il(is,n),x=mf(is,n),g=Pv(n),_=AR(n),E=YK(n),[S,O]=p.useState(null),I=p.useRef(null),k=We(e,I,b.onContentChange),R=p.useRef(0),N=p.useRef(""),P=p.useRef(0),A=p.useRef(null),T=p.useRef("right"),U=p.useRef(0),H=y?hf:p.Fragment,z=y?{as:Gi,allowPinchZoom:!0}:void 0,V=$=>{var ve,Qe;const L=N.current+$,W=E().filter(X=>!X.disabled),ne=document.activeElement,ye=(ve=W.find(X=>X.ref.current===ne))==null?void 0:ve.textValue,Xe=W.map(X=>X.textValue),xt=pY(Xe,L,ye),ut=(Qe=W.find(X=>X.textValue===xt))==null?void 0:Qe.ref.current;(function X(de){N.current=de,window.clearTimeout(R.current),de!==""&&(R.current=window.setTimeout(()=>X(""),1e3))})(L),ut&&setTimeout(()=>ut.focus())};p.useEffect(()=>()=>window.clearTimeout(R.current),[]),bv();const M=p.useCallback($=>{var W,ne;return T.current===((W=A.current)==null?void 0:W.side)&&vY($,(ne=A.current)==null?void 0:ne.area)},[]);return s.jsx(tY,{scope:n,searchRef:N,onItemEnter:p.useCallback($=>{M($)&&$.preventDefault()},[M]),onItemLeave:p.useCallback($=>{var L;M($)||((L=I.current)==null||L.focus(),O(null))},[M]),onTriggerLeave:p.useCallback($=>{M($)&&$.preventDefault()},[M]),pointerGraceTimerRef:P,onPointerGraceIntentChange:p.useCallback($=>{A.current=$},[]),children:s.jsx(H,{...z,children:s.jsx(cf,{asChild:!0,trapped:i,onMountAutoFocus:le(a,$=>{var L;$.preventDefault(),(L=I.current)==null||L.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:s.jsx(lf,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:m,onDismiss:v,children:s.jsx(bR,{asChild:!0,..._,dir:x.dir,orientation:"vertical",loop:r,currentTabStopId:S,onCurrentTabStopIdChange:O,onEntryFocus:le(c,$=>{x.isUsingKeyboardRef.current||$.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(sj,{role:"menu","aria-orientation":"vertical","data-state":ZR(b.open),"data-radix-menu-content":"",dir:x.dir,...g,...w,ref:k,style:{outline:"none",...w.style},onKeyDown:le(w.onKeyDown,$=>{const W=$.target.closest("[data-radix-menu-content]")===$.currentTarget,ne=$.ctrlKey||$.altKey||$.metaKey,ye=$.key.length===1;W&&($.key==="Tab"&&$.preventDefault(),!ne&&ye&&V($.key));const Xe=I.current;if($.target!==Xe||!HK.includes($.key))return;$.preventDefault();const ut=E().filter(ve=>!ve.disabled).map(ve=>ve.ref.current);IR.includes($.key)&&ut.reverse(),fY(ut)}),onBlur:le(t.onBlur,$=>{$.currentTarget.contains($.target)||(window.clearTimeout(R.current),N.current="")}),onPointerMove:le(t.onPointerMove,vh($=>{const L=$.target,W=U.current!==$.clientX;if($.currentTarget.contains(L)&&W){const ne=$.clientX>U.current?"right":"left";T.current=ne,U.current=$.clientX}}))})})})})})})});OR.displayName=is;var sY="MenuGroup",uj=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return s.jsx(Se.div,{role:"group",...r,ref:e})});uj.displayName=sY;var iY="MenuLabel",LR=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return s.jsx(Se.div,{...r,ref:e})});LR.displayName=iY;var tg="MenuItem",gE="menu.itemSelect",Av=p.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...i}=t,a=p.useRef(null),o=mf(tg,t.__scopeMenu),l=lj(tg,t.__scopeMenu),c=We(e,a),u=p.useRef(!1),d=()=>{const f=a.current;if(!n&&f){const m=new CustomEvent(gE,{bubbles:!0,cancelable:!0});f.addEventListener(gE,v=>r==null?void 0:r(v),{once:!0}),KA(f,m),m.defaultPrevented?u.current=!1:o.onClose()}};return s.jsx(VR,{...i,ref:c,disabled:n,onClick:le(t.onClick,d),onPointerDown:f=>{var m;(m=t.onPointerDown)==null||m.call(t,f),u.current=!0},onPointerUp:le(t.onPointerUp,f=>{var m;u.current||(m=f.currentTarget)==null||m.click()}),onKeyDown:le(t.onKeyDown,f=>{const m=l.searchRef.current!=="";n||m&&f.key===" "||dw.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});Av.displayName=tg;var VR=p.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...a}=t,o=lj(tg,n),l=AR(n),c=p.useRef(null),u=We(e,c),[d,f]=p.useState(!1),[m,v]=p.useState("");return p.useEffect(()=>{const y=c.current;y&&v((y.textContent??"").trim())},[a.children]),s.jsx(gh.ItemSlot,{scope:n,disabled:r,textValue:i??m,children:s.jsx(jR,{asChild:!0,...l,focusable:!r,children:s.jsx(Se.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:u,onPointerMove:le(t.onPointerMove,vh(y=>{r?o.onItemLeave(y):(o.onItemEnter(y),y.defaultPrevented||y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:le(t.onPointerLeave,vh(y=>o.onItemLeave(y))),onFocus:le(t.onFocus,()=>f(!0)),onBlur:le(t.onBlur,()=>f(!1))})})})}),aY="MenuCheckboxItem",FR=p.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...i}=t;return s.jsx(qR,{scope:t.__scopeMenu,checked:n,children:s.jsx(Av,{role:"menuitemcheckbox","aria-checked":ng(n)?"mixed":n,...i,ref:e,"data-state":hj(n),onSelect:le(i.onSelect,()=>r==null?void 0:r(ng(n)?!0:!n),{checkForDefaultPrevented:!1})})})});FR.displayName=aY;var UR="MenuRadioGroup",[oY,lY]=kl(UR,{value:void 0,onValueChange:()=>{}}),$R=p.forwardRef((t,e)=>{const{value:n,onValueChange:r,...i}=t,a=mn(r);return s.jsx(oY,{scope:t.__scopeMenu,value:n,onValueChange:a,children:s.jsx(uj,{...i,ref:e})})});$R.displayName=UR;var zR="MenuRadioItem",BR=p.forwardRef((t,e)=>{const{value:n,...r}=t,i=lY(zR,t.__scopeMenu),a=n===i.value;return s.jsx(qR,{scope:t.__scopeMenu,checked:a,children:s.jsx(Av,{role:"menuitemradio","aria-checked":a,...r,ref:e,"data-state":hj(a),onSelect:le(r.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,n)},{checkForDefaultPrevented:!1})})})});BR.displayName=zR;var dj="MenuItemIndicator",[qR,cY]=kl(dj,{checked:!1}),WR=p.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...i}=t,a=cY(dj,n);return s.jsx(Un,{present:r||ng(a.checked)||a.checked===!0,children:s.jsx(Se.span,{...i,ref:e,"data-state":hj(a.checked)})})});WR.displayName=dj;var uY="MenuSeparator",HR=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return s.jsx(Se.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});HR.displayName=uY;var dY="MenuArrow",GR=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=Pv(n);return s.jsx(ij,{...i,...r,ref:e})});GR.displayName=dY;var hY="MenuSub",[Wae,KR]=kl(hY),md="MenuSubTrigger",YR=p.forwardRef((t,e)=>{const n=Il(md,t.__scopeMenu),r=mf(md,t.__scopeMenu),i=KR(md,t.__scopeMenu),a=lj(md,t.__scopeMenu),o=p.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=a,u={__scopeMenu:t.__scopeMenu},d=p.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return p.useEffect(()=>d,[d]),p.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),s.jsx(aj,{asChild:!0,...u,children:s.jsx(VR,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":ZR(n.open),...t,ref:yv(e,i.onTriggerChange),onClick:f=>{var m;(m=t.onClick)==null||m.call(t,f),!(t.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:le(t.onPointerMove,vh(f=>{a.onItemEnter(f),!f.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:le(t.onPointerLeave,vh(f=>{var v,y;d();const m=(v=n.content)==null?void 0:v.getBoundingClientRect();if(m){const w=(y=n.content)==null?void 0:y.dataset.side,b=w==="right",x=b?-5:5,g=m[b?"left":"right"],_=m[b?"right":"left"];a.onPointerGraceIntentChange({area:[{x:f.clientX+x,y:f.clientY},{x:g,y:m.top},{x:_,y:m.top},{x:_,y:m.bottom},{x:g,y:m.bottom}],side:w}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(f),f.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:le(t.onKeyDown,f=>{var v;const m=a.searchRef.current!=="";t.disabled||m&&f.key===" "||GK[r.dir].includes(f.key)&&(n.onOpenChange(!0),(v=n.content)==null||v.focus(),f.preventDefault())})})})});YR.displayName=md;var QR="MenuSubContent",XR=p.forwardRef((t,e)=>{const n=MR(is,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,a=Il(is,t.__scopeMenu),o=mf(is,t.__scopeMenu),l=KR(QR,t.__scopeMenu),c=p.useRef(null),u=We(e,c);return s.jsx(gh.Provider,{scope:t.__scopeMenu,children:s.jsx(Un,{present:r||a.open,children:s.jsx(gh.Slot,{scope:t.__scopeMenu,children:s.jsx(cj,{id:l.contentId,"aria-labelledby":l.triggerId,...i,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var f;o.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:le(t.onFocusOutside,d=>{d.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:le(t.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:le(t.onKeyDown,d=>{var v;const f=d.currentTarget.contains(d.target),m=KK[o.dir].includes(d.key);f&&m&&(a.onOpenChange(!1),(v=l.trigger)==null||v.focus(),d.preventDefault())})})})})})});XR.displayName=QR;function ZR(t){return t?"open":"closed"}function ng(t){return t==="indeterminate"}function hj(t){return ng(t)?"indeterminate":t?"checked":"unchecked"}function fY(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function mY(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function pY(t,e,n){const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let o=mY(t,Math.max(a,0));i.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function gY(t,e){const{x:n,y:r}=t;let i=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const l=e[a].x,c=e[a].y,u=e[o].x,d=e[o].y;c>r!=d>r&&n<(u-l)*(r-c)/(d-c)+l&&(i=!i)}return i}function vY(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return gY(n,e)}function vh(t){return e=>e.pointerType==="mouse"?t(e):void 0}var xY=RR,yY=aj,wY=DR,bY=OR,jY=uj,_Y=LR,NY=Av,SY=FR,EY=$R,CY=BR,TY=WR,kY=HR,IY=GR,PY=YR,AY=XR,fj="DropdownMenu",[RY,Hae]=Hr(fj,[PR]),vr=PR(),[MY,JR]=RY(fj),e4=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:i,defaultOpen:a,onOpenChange:o,modal:l=!0}=t,c=vr(e),u=p.useRef(null),[d=!1,f]=Br({prop:i,defaultProp:a,onChange:o});return s.jsx(MY,{scope:e,triggerId:Fr(),triggerRef:u,contentId:Fr(),open:d,onOpenChange:f,onOpenToggle:p.useCallback(()=>f(m=>!m),[f]),modal:l,children:s.jsx(xY,{...c,open:d,onOpenChange:f,dir:r,modal:l,children:n})})};e4.displayName=fj;var t4="DropdownMenuTrigger",n4=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=t,a=JR(t4,n),o=vr(n);return s.jsx(yY,{asChild:!0,...o,children:s.jsx(Se.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:yv(e,a.triggerRef),onPointerDown:le(t.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:le(t.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});n4.displayName=t4;var DY="DropdownMenuPortal",r4=t=>{const{__scopeDropdownMenu:e,...n}=t,r=vr(e);return s.jsx(wY,{...r,...n})};r4.displayName=DY;var s4="DropdownMenuContent",i4=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=JR(s4,n),a=vr(n),o=p.useRef(!1);return s.jsx(bY,{id:i.contentId,"aria-labelledby":i.triggerId,...a,...r,ref:e,onCloseAutoFocus:le(t.onCloseAutoFocus,l=>{var c;o.current||(c=i.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:le(t.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!i.modal||d)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});i4.displayName=s4;var OY="DropdownMenuGroup",LY=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=vr(n);return s.jsx(jY,{...i,...r,ref:e})});LY.displayName=OY;var VY="DropdownMenuLabel",a4=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=vr(n);return s.jsx(_Y,{...i,...r,ref:e})});a4.displayName=VY;var FY="DropdownMenuItem",o4=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=vr(n);return s.jsx(NY,{...i,...r,ref:e})});o4.displayName=FY;var UY="DropdownMenuCheckboxItem",l4=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=vr(n);return s.jsx(SY,{...i,...r,ref:e})});l4.displayName=UY;var $Y="DropdownMenuRadioGroup",zY=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=vr(n);return s.jsx(EY,{...i,...r,ref:e})});zY.displayName=$Y;var BY="DropdownMenuRadioItem",c4=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=vr(n);return s.jsx(CY,{...i,...r,ref:e})});c4.displayName=BY;var qY="DropdownMenuItemIndicator",u4=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=vr(n);return s.jsx(TY,{...i,...r,ref:e})});u4.displayName=qY;var WY="DropdownMenuSeparator",d4=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=vr(n);return s.jsx(kY,{...i,...r,ref:e})});d4.displayName=WY;var HY="DropdownMenuArrow",GY=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=vr(n);return s.jsx(IY,{...i,...r,ref:e})});GY.displayName=HY;var KY="DropdownMenuSubTrigger",h4=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=vr(n);return s.jsx(PY,{...i,...r,ref:e})});h4.displayName=KY;var YY="DropdownMenuSubContent",f4=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=vr(n);return s.jsx(AY,{...i,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});f4.displayName=YY;var QY=e4,XY=n4,ZY=r4,m4=i4,p4=a4,g4=o4,v4=l4,x4=c4,y4=u4,w4=d4,b4=h4,j4=f4;function vo(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var JY=["color"],eQ=p.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=vo(t,JY);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),p.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),tQ=["color"],mj=p.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=vo(t,tQ);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),p.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),nQ=["color"],_4=p.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=vo(t,nQ);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),p.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),rQ=["color"],sQ=p.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=vo(t,rQ);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),p.createElement("path",{d:"M8.84182 3.13514C9.04327 3.32401 9.05348 3.64042 8.86462 3.84188L5.43521 7.49991L8.86462 11.1579C9.05348 11.3594 9.04327 11.6758 8.84182 11.8647C8.64036 12.0535 8.32394 12.0433 8.13508 11.8419L4.38508 7.84188C4.20477 7.64955 4.20477 7.35027 4.38508 7.15794L8.13508 3.15794C8.32394 2.95648 8.64036 2.94628 8.84182 3.13514Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),iQ=["color"],N4=p.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=vo(t,iQ);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),p.createElement("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),aQ=["color"],oQ=p.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=vo(t,aQ);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),p.createElement("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),lQ=["color"],cQ=p.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=vo(t,lQ);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),p.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),uQ=["color"],dQ=p.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=vo(t,uQ);return p.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),p.createElement("path",{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:r}))});const hw=QY,fw=XY,hQ=p.forwardRef(({className:t,inset:e,children:n,...r},i)=>s.jsxs(b4,{ref:i,className:Pe("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[n,s.jsx(N4,{className:"ml-auto h-4 w-4"})]}));hQ.displayName=b4.displayName;const fQ=p.forwardRef(({className:t,...e},n)=>s.jsx(j4,{ref:n,className:Pe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));fQ.displayName=j4.displayName;const rg=p.forwardRef(({className:t,sideOffset:e=4,...n},r)=>s.jsx(ZY,{children:s.jsx(m4,{ref:r,sideOffset:e,className:Pe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));rg.displayName=m4.displayName;const St=p.forwardRef(({className:t,inset:e,...n},r)=>s.jsx(g4,{ref:r,className:Pe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));St.displayName=g4.displayName;const mQ=p.forwardRef(({className:t,children:e,checked:n,...r},i)=>s.jsxs(v4,{ref:i,className:Pe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(y4,{children:s.jsx(mj,{className:"h-4 w-4"})})}),e]}));mQ.displayName=v4.displayName;const pQ=p.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(x4,{ref:r,className:Pe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(y4,{children:s.jsx(dQ,{className:"h-4 w-4 fill-current"})})}),e]}));pQ.displayName=x4.displayName;const gQ=p.forwardRef(({className:t,inset:e,...n},r)=>s.jsx(p4,{ref:r,className:Pe("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));gQ.displayName=p4.displayName;const Us=p.forwardRef(({className:t,...e},n)=>s.jsx(w4,{ref:n,className:Pe("-mx-1 my-1 h-px bg-muted",t),...e}));Us.displayName=w4.displayName;var pj="Avatar",[vQ,Gae]=Hr(pj),[xQ,S4]=vQ(pj),E4=p.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[i,a]=p.useState("idle");return s.jsx(xQ,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:s.jsx(Se.span,{...r,ref:e})})});E4.displayName=pj;var C4="AvatarImage",T4=p.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:i=()=>{},...a}=t,o=S4(C4,n),l=yQ(r,a.referrerPolicy),c=mn(u=>{i(u),o.onImageLoadingStatusChange(u)});return Sn(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?s.jsx(Se.img,{...a,ref:e,src:r}):null});T4.displayName=C4;var k4="AvatarFallback",I4=p.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...i}=t,a=S4(k4,n),[o,l]=p.useState(r===void 0);return p.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&a.imageLoadingStatus!=="loaded"?s.jsx(Se.span,{...i,ref:e}):null});I4.displayName=k4;function yQ(t,e){const[n,r]=p.useState("idle");return Sn(()=>{if(!t){r("error");return}let i=!0;const a=new window.Image,o=l=>()=>{i&&r(l)};return r("loading"),a.onload=o("loaded"),a.onerror=o("error"),a.src=t,e&&(a.referrerPolicy=e),()=>{i=!1}},[t,e]),n}var P4=E4,A4=T4,R4=I4;const Qi=p.forwardRef(({className:t,...e},n)=>s.jsx(P4,{ref:n,className:Pe("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));Qi.displayName=P4.displayName;const Xi=p.forwardRef(({className:t,...e},n)=>s.jsx(A4,{ref:n,className:Pe("aspect-square h-full w-full",t),...e}));Xi.displayName=A4.displayName;const Zi=p.forwardRef(({className:t,...e},n)=>s.jsx(R4,{ref:n,className:Pe("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));Zi.displayName=R4.displayName;const wQ=wv("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ae({className:t,variant:e,...n}){return s.jsx("div",{className:Pe(wQ({variant:e}),t),...n})}const bQ={BASE_URL:"/StudyMarket/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyDXD6WpZoQNLNU0DAqH1wd3q9Q4vthOWv4",VITE_FIREBASE_APP_ID:"1:603697837611:web:858cf99bb80004d0f25c6e",VITE_FIREBASE_AUTH_DOMAIN:"annonces-app-44d27.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"603697837611",VITE_FIREBASE_PROJECT_ID:"annonces-app-44d27",VITE_FIREBASE_STORAGE_BUCKET:"annonces-app-44d27.firebasestorage.app"},vE=t=>{let e;const n=new Set,r=(d,f)=>{const m=typeof d=="function"?d(e):d;if(!Object.is(m,e)){const v=e;e=f??(typeof m!="object"||m===null)?m:Object.assign({},e,m),n.forEach(y=>y(e,v))}},i=()=>e,c={setState:r,getState:i,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(bQ?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=e=t(r,i,c);return c},jQ=t=>t?vE(t):vE;var M4={exports:{}},D4={},O4={exports:{}},L4={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qc=p;function _Q(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var NQ=typeof Object.is=="function"?Object.is:_Q,SQ=Qc.useState,EQ=Qc.useEffect,CQ=Qc.useLayoutEffect,TQ=Qc.useDebugValue;function kQ(t,e){var n=e(),r=SQ({inst:{value:n,getSnapshot:e}}),i=r[0].inst,a=r[1];return CQ(function(){i.value=n,i.getSnapshot=e,my(i)&&a({inst:i})},[t,n,e]),EQ(function(){return my(i)&&a({inst:i}),t(function(){my(i)&&a({inst:i})})},[t]),TQ(n),n}function my(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!NQ(t,n)}catch{return!0}}function IQ(t,e){return e()}var PQ=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?IQ:kQ;L4.useSyncExternalStore=Qc.useSyncExternalStore!==void 0?Qc.useSyncExternalStore:PQ;O4.exports=L4;var AQ=O4.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rv=p,RQ=AQ;function MQ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var DQ=typeof Object.is=="function"?Object.is:MQ,OQ=RQ.useSyncExternalStore,LQ=Rv.useRef,VQ=Rv.useEffect,FQ=Rv.useMemo,UQ=Rv.useDebugValue;D4.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var a=LQ(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=FQ(function(){function c(v){if(!u){if(u=!0,d=v,v=r(v),i!==void 0&&o.hasValue){var y=o.value;if(i(y,v))return f=y}return f=v}if(y=f,DQ(d,v))return y;var w=r(v);return i!==void 0&&i(y,w)?(d=v,y):(d=v,f=w)}var u=!1,d,f,m=n===void 0?null:n;return[function(){return c(e())},m===null?void 0:function(){return c(m())}]},[e,n,r,i]);var l=OQ(t,a[0],a[1]);return VQ(function(){o.hasValue=!0,o.value=l},[l]),UQ(l),l};M4.exports=D4;var $Q=M4.exports;const zQ=Cg($Q),V4={BASE_URL:"/StudyMarket/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyDXD6WpZoQNLNU0DAqH1wd3q9Q4vthOWv4",VITE_FIREBASE_APP_ID:"1:603697837611:web:858cf99bb80004d0f25c6e",VITE_FIREBASE_AUTH_DOMAIN:"annonces-app-44d27.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"603697837611",VITE_FIREBASE_PROJECT_ID:"annonces-app-44d27",VITE_FIREBASE_STORAGE_BUCKET:"annonces-app-44d27.firebasestorage.app"},{useDebugValue:BQ}=me,{useSyncExternalStoreWithSelector:qQ}=zQ;let xE=!1;const WQ=t=>t;function HQ(t,e=WQ,n){(V4?"production":void 0)!=="production"&&n&&!xE&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),xE=!0);const r=qQ(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return BQ(r),r}const yE=t=>{(V4?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?jQ(t):t,n=(r,i)=>HQ(e,r,i);return Object.assign(n,e),n},ju=t=>t?yE(t):yE,ko=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},GQ=(t,e,n)=>{const r=[t,e].sort();return`${r[0]}_${r[1]}_${n}`},KQ=async(t,e,n,r,i,a,o)=>{try{if(!t||!t.includes("@")){console.log("No valid email address for notification");return}const l=`${window.location.origin}/messages?conversation=${o}`,c=await fetch("/api/send-message-notification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recipientEmail:t,recipientName:e,senderName:n,senderUniversity:r,listingTitle:i,messagePreview:a,conversationUrl:l})});c.ok?console.log("Email notification sent successfully"):console.error("Failed to send email notification:",await c.text())}catch(l){console.error("Error sending email notification:",l)}},Mv=ju((t,e)=>({conversations:[],currentConversation:null,messages:[],loading:!1,fetchConversations:n=>{t({loading:!0});const{unsubscribeConversations:r}=e();r&&r();try{const i=Wt(vt(_e,"conversations"),hn("participants","array-contains",n)),a=OS(i,o=>{const l=[];o.docs.forEach(c=>{const u=c.data();u.deletedFor&&u.deletedFor.includes(n)||u.blockedBy&&u.blockedBy.includes(n)||l.push({id:c.id,participants:u.participants||[],listingId:u.listingId||"",listingTitle:u.listingTitle||"",listingImage:u.listingImage,listingPrice:u.listingPrice||0,participantDetails:u.participantDetails||{},lastMessage:u.lastMessage?{...u.lastMessage,sentAt:ko(u.lastMessage.sentAt)}:void 0,unreadCount:u.unreadCount||{},blockedBy:u.blockedBy||[],deletedFor:u.deletedFor||[],status:u.status||"active",createdAt:ko(u.createdAt),updatedAt:ko(u.updatedAt)})}),l.sort((c,u)=>u.updatedAt.getTime()-c.updatedAt.getTime()),t({conversations:l,loading:!1,unsubscribeConversations:a})},o=>{console.error("Error fetching conversations:",o),ee.error("Erreur lors du chargement des conversations"),t({loading:!1})})}catch(i){console.error("Error setting up conversations listener:",i),t({loading:!1})}},fetchMessages:n=>{const{unsubscribeMessages:r}=e();r&&r();try{const i=Wt(vt(_e,"conversations",n,"messages")),a=OS(i,o=>{const l=o.docs.map(c=>{const u=c.data();return{id:c.id,conversationId:n,senderId:u.senderId,senderName:u.senderName,senderAvatar:u.senderAvatar,text:u.text,type:u.type||"text",attachments:u.attachments||[],seen:u.seen||!1,sentAt:ko(u.sentAt)}});l.sort((c,u)=>c.sentAt.getTime()-u.sentAt.getTime()),t({messages:l,unsubscribeMessages:a})},o=>{console.error("Error fetching messages:",o),ee.error("Erreur lors du chargement des messages")})}catch(i){console.error("Error setting up messages listener:",i)}},sendMessage:async(n,r,i,a,o)=>{try{console.log("Sending message:",{conversationId:n,text:r,senderId:i,senderName:a});const l=e().currentConversation;if(!l){console.error("No current conversation");return}if(l.blockedBy&&l.blockedBy.includes(i)){ee.error("Vous ne pouvez pas envoyer de message dans cette conversation");return}const c={conversationId:n,senderId:i,senderName:a,senderAvatar:o||null,text:r,type:"text",seen:!1,sentAt:wn()};console.log("Adding message to Firestore:",c);const u=await Ja(vt(_e,"conversations",n,"messages"),c);console.log("Message added with ID:",u.id);const d=l.participants.filter(m=>m!==i),f={};d.forEach(m=>{f[`unreadCount.${m}`]=(l.unreadCount[m]||0)+1}),console.log("Updating conversation with:",{lastMessage:{text:r,sentAt:wn(),senderId:i,senderName:a},updatedAt:wn(),...f}),await Mn(tt(_e,"conversations",n),{lastMessage:{text:r,sentAt:wn(),senderId:i,senderName:a},updatedAt:wn(),...f}),d.forEach(async m=>{const v=l.participantDetails[m];if(v&&v.email){const y=l.participantDetails[i];await KQ(v.email,v.name,a,(y==null?void 0:y.university)||"Université non spécifiée",l.listingTitle,r,n)}}),console.log("Message sent successfully")}catch(l){console.error("Error sending message:",l),ee.error("Erreur lors de l'envoi du message")}},createConversation:async(n,r,i,a,o,l,c,u,d)=>{try{console.log("Creating conversation:",{listingId:n,buyerId:o,sellerId:l});const f=GQ(o,l,n);console.log("Generated conversation ID:",f);const m=await rs(tt(_e,"conversations",f));if(m.exists()){console.log("Conversation already exists, sending message");const w=m.data(),b={id:f,participants:w.participants||[],listingId:w.listingId||"",listingTitle:w.listingTitle||"",listingImage:w.listingImage,listingPrice:w.listingPrice||0,participantDetails:w.participantDetails||{},lastMessage:w.lastMessage?{...w.lastMessage,sentAt:ko(w.lastMessage.sentAt)}:void 0,unreadCount:w.unreadCount||{},blockedBy:w.blockedBy||[],deletedFor:w.deletedFor||[],status:w.status||"active",createdAt:ko(w.createdAt),updatedAt:ko(w.updatedAt)};return t({currentConversation:b}),await e().sendMessage(f,d,o,c.displayName,c.photoURL),f}console.log("Creating new conversation");const v={participants:[o,l],listingId:n,listingTitle:r,listingImage:a||null,listingPrice:i,participantDetails:{[o]:{name:c.displayName,avatar:c.photoURL||null,university:c.university,verified:c.isVerified||!1,email:c.email||null},[l]:{name:u.sellerName,avatar:u.sellerAvatar||null,university:u.sellerUniversity,verified:u.sellerVerified||!1,email:u.email||null}},unreadCount:{[o]:0,[l]:1},status:"active",createdAt:wn(),updatedAt:wn()};console.log("Setting conversation document:",v),await jc(tt(_e,"conversations",f),v);const y={id:f,participants:[o,l],listingId:n,listingTitle:r,listingImage:a||void 0,listingPrice:i,participantDetails:v.participantDetails,unreadCount:v.unreadCount,status:"active",createdAt:new Date,updatedAt:new Date};return t({currentConversation:y}),console.log("Sending initial message"),await e().sendMessage(f,d,o,c.displayName,c.photoURL),f}catch(f){throw console.error("Error creating conversation:",f),ee.error("Erreur lors de la création de la conversation"),f}},markMessagesAsSeen:async(n,r)=>{try{const i=tt(_e,"conversations",n);await Mn(i,{[`unreadCount.${r}`]:0})}catch(i){console.error("Error marking messages as seen:",i)}},setCurrentConversation:n=>{t({currentConversation:n})},blockUser:async(n,r)=>{try{const i=tt(_e,"conversations",n),a=await rs(i);if(a.exists()){const l=a.data().blockedBy||[];l.includes(r)||(await Mn(i,{blockedBy:[...l,r],status:"blocked",updatedAt:wn()}),ee.success("Utilisateur bloqué"))}}catch(i){console.error("Error blocking user:",i),ee.error("Erreur lors du blocage")}},reportUser:async(n,r,i,a,o)=>{try{const l={reporterId:r,reportedUserId:i,conversationId:n,reason:a,description:o,status:"pending",createdAt:wn()};await Ja(vt(_e,"reports"),l),ee.success("Signalement envoyé")}catch(l){console.error("Error reporting user:",l),ee.error("Erreur lors du signalement")}},deleteConversation:async(n,r)=>{try{const i=tt(_e,"conversations",n),a=await rs(i);if(a.exists()){const o=a.data(),l=o.deletedFor||[];if(!l.includes(r)){const c=[...l,r];c.length===o.participants.length?await qc(i):await Mn(i,{deletedFor:c,updatedAt:wn()}),ee.success("Conversation supprimée")}}}catch(i){console.error("Error deleting conversation:",i),ee.error("Erreur lors de la suppression")}},findConversationByListing:(n,r)=>{const{conversations:i}=e();return i.find(a=>a.listingId===n&&a.participants.includes(r))||null},cleanup:()=>{const{unsubscribeConversations:n,unsubscribeMessages:r}=e();n&&n(),r&&r(),t({conversations:[],currentConversation:null,messages:[],unsubscribeConversations:void 0,unsubscribeMessages:void 0})}})),YQ={BASE_URL:"/StudyMarket/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyDXD6WpZoQNLNU0DAqH1wd3q9Q4vthOWv4",VITE_FIREBASE_APP_ID:"1:603697837611:web:858cf99bb80004d0f25c6e",VITE_FIREBASE_AUTH_DOMAIN:"annonces-app-44d27.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"603697837611",VITE_FIREBASE_PROJECT_ID:"annonces-app-44d27",VITE_FIREBASE_STORAGE_BUCKET:"annonces-app-44d27.firebasestorage.app"};function QQ(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var a;const o=c=>c===null?null:JSON.parse(c,void 0),l=(a=n.getItem(i))!=null?a:null;return l instanceof Promise?l.then(o):o(l)},setItem:(i,a)=>n.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>n.removeItem(i)}}const xh=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return xh(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return xh(r)(n)}}}},XQ=(t,e)=>(n,r,i)=>{let a={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:b=>b,version:0,merge:(b,x)=>({...x,...b}),...e},o=!1;const l=new Set,c=new Set;let u;try{u=a.getStorage()}catch{}if(!u)return t((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...b)},r,i);const d=xh(a.serialize),f=()=>{const b=a.partialize({...r()});let x;const g=d({state:b,version:a.version}).then(_=>u.setItem(a.name,_)).catch(_=>{x=_});if(x)throw x;return g},m=i.setState;i.setState=(b,x)=>{m(b,x),f()};const v=t((...b)=>{n(...b),f()},r,i);let y;const w=()=>{var b;if(!u)return;o=!1,l.forEach(g=>g(r()));const x=((b=a.onRehydrateStorage)==null?void 0:b.call(a,r()))||void 0;return xh(u.getItem.bind(u))(a.name).then(g=>{if(g)return a.deserialize(g)}).then(g=>{if(g)if(typeof g.version=="number"&&g.version!==a.version){if(a.migrate)return a.migrate(g.state,g.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return g.state}).then(g=>{var _;return y=a.merge(g,(_=r())!=null?_:v),n(y,!0),f()}).then(()=>{x==null||x(y,void 0),o=!0,c.forEach(g=>g(y))}).catch(g=>{x==null||x(void 0,g)})};return i.persist={setOptions:b=>{a={...a,...b},b.getStorage&&(u=b.getStorage())},clearStorage:()=>{u==null||u.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>w(),hasHydrated:()=>o,onHydrate:b=>(l.add(b),()=>{l.delete(b)}),onFinishHydration:b=>(c.add(b),()=>{c.delete(b)})},w(),y||v},ZQ=(t,e)=>(n,r,i)=>{let a={storage:QQ(()=>localStorage),partialize:w=>w,version:0,merge:(w,b)=>({...b,...w}),...e},o=!1;const l=new Set,c=new Set;let u=a.storage;if(!u)return t((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...w)},r,i);const d=()=>{const w=a.partialize({...r()});return u.setItem(a.name,{state:w,version:a.version})},f=i.setState;i.setState=(w,b)=>{f(w,b),d()};const m=t((...w)=>{n(...w),d()},r,i);i.getInitialState=()=>m;let v;const y=()=>{var w,b;if(!u)return;o=!1,l.forEach(g=>{var _;return g((_=r())!=null?_:m)});const x=((b=a.onRehydrateStorage)==null?void 0:b.call(a,(w=r())!=null?w:m))||void 0;return xh(u.getItem.bind(u))(a.name).then(g=>{if(g)if(typeof g.version=="number"&&g.version!==a.version){if(a.migrate)return[!0,a.migrate(g.state,g.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,g.state];return[!1,void 0]}).then(g=>{var _;const[E,S]=g;if(v=a.merge(S,(_=r())!=null?_:m),n(v,!0),E)return d()}).then(()=>{x==null||x(v,void 0),v=r(),o=!0,c.forEach(g=>g(v))}).catch(g=>{x==null||x(void 0,g)})};return i.persist={setOptions:w=>{a={...a,...w},w.storage&&(u=w.storage)},clearStorage:()=>{u==null||u.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>y(),hasHydrated:()=>o,onHydrate:w=>(l.add(w),()=>{l.delete(w)}),onFinishHydration:w=>(c.add(w),()=>{c.delete(w)})},a.skipHydration||y(),v||m},JQ=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((YQ?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),XQ(t,e)):ZQ(t,e),eX=JQ,_u=ju()(eX((t,e)=>({cart:[],cartTotal:0,addToCart:n=>{const{cart:r}=e(),i=r.find(a=>a.id===n.id);t(i?{cart:r.map(a=>a.id===n.id?{...a,quantity:a.quantity+1}:a),cartTotal:e().cartTotal+n.price}:{cart:[...r,{...n,quantity:1}],cartTotal:e().cartTotal+n.price}),ee.success("Article ajouté au panier")},removeFromCart:n=>{const{cart:r}=e(),i=r.find(a=>a.id===n);i&&t({cart:r.filter(a=>a.id!==n),cartTotal:e().cartTotal-i.price*i.quantity})},updateQuantity:(n,r)=>{const{cart:i}=e(),a=i.find(o=>o.id===n);if(a){const o=r-a.quantity;t({cart:i.map(l=>l.id===n?{...l,quantity:r}:l),cartTotal:e().cartTotal+a.price*o})}},clearCart:()=>{t({cart:[],cartTotal:0})},getCartItemCount:()=>e().cart.reduce((n,r)=>n+r.quantity,0)}),{name:"cart-storage",partialize:t=>({cart:t.cart,cartTotal:t.cartTotal})})),tX=()=>{var _,E;const{currentUser:t,userProfile:e,logout:n}=Qt(),{conversations:r,fetchConversations:i}=Mv(),{getCartItemCount:a}=_u(),{theme:o,setTheme:l}=zV(),c=En(),[u,d]=p.useState(""),f=me.useMemo(()=>!t||!r.length?0:r.reduce((S,O)=>{const I=O.unreadCount[t.uid]||0;return S+I},0),[r,t]);p.useEffect(()=>{t&&i(t.uid)},[t,i]);const m=S=>{S.preventDefault(),u.trim()&&c(`/listings?q=${encodeURIComponent(u.trim())}`)},v=async()=>{try{await n(),c("/")}catch(S){console.error("Logout error:",S)}},y=a(),w=localStorage.getItem("pendingUserData"),b=w?JSON.parse(w):{};let x=(e==null?void 0:e.displayName)||b.displayName||"";!x&&(t!=null&&t.displayName)&&(x=t.displayName),!x&&(t!=null&&t.email)&&(x=t.email.split("@")[0]),x||(x="Utilisateur");let g=(e==null?void 0:e.university)||b.university||"";return((e==null?void 0:e.university)==="Autre université"&&e.otherUniversity||b.university==="Autre université"&&b.otherUniversity)&&(g=e&&e.otherUniversity||b.otherUniversity),g||(g="Université spécifiée lors de l'inscription"),p.useEffect(()=>{w&&(t!=null&&t.emailVerified)&&JSON.parse(w)},[t,w]),s.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-background/95 backdrop-blur-sm border-b border-border",children:s.jsxs("div",{className:"container mx-auto px-4 h-16 flex items-center justify-between",children:[s.jsxs(fe,{to:"/",className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-primary to-secondary rounded-lg flex items-center justify-center",children:s.jsx(pu,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{className:"hidden sm:block",children:[s.jsx("span",{className:"font-bold text-xl bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"StudyMarket"}),s.jsx("div",{className:"text-xs text-muted-foreground -mt-1",children:"Étudiants certifiés"})]})]}),s.jsx("form",{onSubmit:m,className:"flex-1 max-w-lg mx-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(Dn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(Ee,{type:"text",placeholder:"Rechercher entre étudiants...",value:u,onChange:S=>d(S.target.value),className:"pl-10 w-full"})]})}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("div",{onClick:()=>l(o==="dark"?"light":"dark"),className:"relative cursor-pointer text-foreground hover:text-primary transition-colors","aria-label":"Changer le thème",children:[s.jsx(SW,{className:"h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),s.jsx(xW,{className:"absolute top-0 left-0 h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"})]}),t?s.jsxs(s.Fragment,{children:[s.jsx(B,{asChild:!0,className:"hidden sm:flex bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90",children:s.jsxs(fe,{to:"/create",children:[s.jsx(Go,{className:"w-4 h-4 mr-2"}),"Publier"]})}),s.jsxs("div",{className:"relative hidden sm:block",children:[s.jsx(B,{variant:"ghost",size:"icon",asChild:!0,children:s.jsx(fe,{to:"/cart",children:s.jsx(to,{className:"w-4 h-4"})})}),y>0&&s.jsx(Ae,{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full border-2 border-background",children:y>99?"99+":y})]}),s.jsx(B,{variant:"ghost",size:"icon",asChild:!0,children:s.jsx(fe,{to:"/saved-searches",children:s.jsx(gs,{className:"w-4 h-4"})})}),s.jsxs("div",{className:"relative hidden sm:block",children:[s.jsx(B,{variant:"ghost",size:"icon",asChild:!0,children:s.jsx(fe,{to:"/messages",children:s.jsx(Ht,{className:"w-4 h-4"})})}),f>0&&s.jsx(Ae,{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full border-2 border-background",children:f>99?"99+":f})]}),s.jsxs(hw,{children:[s.jsx(fw,{asChild:!0,children:s.jsxs(B,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:[s.jsxs(Qi,{className:"h-8 w-8",children:[s.jsx(Xi,{src:e==null?void 0:e.photoURL}),s.jsx(Zi,{children:((E=(_=e==null?void 0:e.displayName)==null?void 0:_[0])==null?void 0:E.toUpperCase())||"U"})]}),(e==null?void 0:e.isVerified)&&s.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full flex items-center justify-center",children:s.jsx(ft,{className:"w-2 h-2 text-white"})})]})}),s.jsxs(rg,{className:"w-64",align:"end",children:[s.jsx("div",{className:"flex items-center justify-start gap-2 p-2",children:s.jsxs("div",{className:"flex flex-col space-y-1 leading-none",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"font-medium",children:x}),(e==null?void 0:e.isVerified)&&s.jsxs(Ae,{variant:"secondary",className:"text-xs bg-green-100 text-green-800",children:[s.jsx(ft,{className:"w-3 h-3 mr-1"}),"Vérifié"]})]}),s.jsx("p",{className:"w-[200px] truncate text-sm text-muted-foreground",children:g==="Autre université"?e==null?void 0:e.otherUniversity:g}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[s.jsx(Ns,{className:"w-3 h-3 text-green-600"}),s.jsxs("span",{children:[(e==null?void 0:e.co2Saved)||0," kg CO₂ économisés"]})]})]})}),s.jsx(Us,{}),s.jsx(St,{asChild:!0,children:s.jsxs(fe,{to:"/profile",className:"cursor-pointer",children:[s.jsx(fr,{className:"w-4 h-4 mr-2"}),"Mon profil"]})}),s.jsx(St,{asChild:!0,children:s.jsxs(fe,{to:"/settings",className:"cursor-pointer",children:[s.jsx(vv,{className:"w-4 h-4 mr-2"}),"Paramètres"]})}),s.jsx(Us,{}),s.jsx(St,{asChild:!0,children:s.jsxs(fe,{to:"/orders",className:"cursor-pointer",children:[s.jsx(Ft,{className:"w-4 h-4 mr-2"}),"Mes commandes"]})}),s.jsx(St,{asChild:!0,children:s.jsxs(fe,{to:"/payments",className:"cursor-pointer",children:[s.jsx(sf,{className:"w-4 h-4 mr-2"}),"Paiements"]})}),s.jsx(Us,{}),s.jsx(St,{asChild:!0,children:s.jsxs(fe,{to:"/favorites",className:"cursor-pointer",children:[s.jsx(cr,{className:"w-4 h-4 mr-2"}),"Mes favoris"]})}),s.jsx(St,{asChild:!0,children:s.jsxs(fe,{to:"/saved-searches",className:"cursor-pointer",children:[s.jsx(Wb,{className:"w-4 h-4 mr-2"}),"Alertes sauvegardées"]})}),s.jsx(Us,{}),s.jsx(St,{asChild:!0,children:s.jsxs(fe,{to:"/messages",className:"cursor-pointer relative",children:[s.jsx(Ht,{className:"w-4 h-4 mr-2"}),"Messages",f>0&&s.jsx(Ae,{className:"ml-auto bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1",children:f>99?"99+":f})]})}),s.jsx(Us,{}),s.jsx(St,{asChild:!0,children:s.jsxs(fe,{to:"/impact",className:"cursor-pointer",children:[s.jsx(Ns,{className:"w-4 h-4 mr-2"}),"Mon impact écologique"]})}),s.jsx(Us,{}),s.jsx(St,{asChild:!0,children:s.jsxs(fe,{to:"/help",className:"cursor-pointer",children:[s.jsx(Jt,{className:"w-4 h-4 mr-2"}),"Aide & Support"]})}),s.jsx(St,{asChild:!0,children:s.jsxs(fe,{to:"/safety",className:"cursor-pointer",children:[s.jsx(ft,{className:"w-4 h-4 mr-2"}),"Conseils de sécurité"]})}),s.jsx(Us,{}),s.jsxs(St,{onClick:v,className:"cursor-pointer text-destructive",children:[s.jsx(pW,{className:"w-4 h-4 mr-2"}),"Se déconnecter"]})]})]}),s.jsx(B,{size:"icon",asChild:!0,className:"sm:hidden bg-gradient-to-r from-primary to-secondary",children:s.jsx(fe,{to:"/create",children:s.jsx(Go,{className:"w-4 h-4"})})})]}):s.jsxs(s.Fragment,{children:[s.jsx(B,{variant:"ghost",asChild:!0,children:s.jsx(fe,{to:"/auth",children:"Se connecter"})}),s.jsx(B,{asChild:!0,className:"bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90",children:s.jsx(fe,{to:"/auth",children:"Rejoindre"})})]}),s.jsxs(hw,{children:[s.jsx(fw,{asChild:!0,className:"sm:hidden",children:s.jsx(B,{className:"p-2 text-foreground hover:text-primary transition-colors","aria-label":"Menu",children:s.jsx(vW,{className:"w-5 h-5"})})}),s.jsxs(rg,{className:"w-56",align:"end",children:[s.jsx(St,{asChild:!0,children:s.jsx(fe,{to:"/listings",className:"cursor-pointer",children:"Toutes les annonces"})}),s.jsx(St,{asChild:!0,children:s.jsx(fe,{to:"/listings?transactionType=donation",className:"cursor-pointer",children:"Dons entre étudiants"})}),s.jsx(St,{asChild:!0,children:s.jsx(fe,{to:"/listings?transactionType=exchange",className:"cursor-pointer",children:"Troc & Échanges"})}),s.jsx(St,{asChild:!0,children:s.jsx(fe,{to:"/listings?category=services",className:"cursor-pointer",children:"Services étudiants"})}),s.jsx(St,{asChild:!0,children:s.jsx(fe,{to:"/listings?category=housing",className:"cursor-pointer",children:"Logement & Colocation"})}),s.jsx(St,{asChild:!0,children:s.jsx(fe,{to:"/products",className:"cursor-pointer",children:"Boutique"})}),t&&s.jsxs(s.Fragment,{children:[s.jsx(Us,{}),s.jsx(St,{asChild:!0,children:s.jsxs(fe,{to:"/create",className:"cursor-pointer",children:[s.jsx(Go,{className:"w-4 h-4 mr-2"}),"Publier une annonce"]})}),s.jsx(St,{asChild:!0,children:s.jsxs(fe,{to:"/cart",className:"cursor-pointer relative",children:[s.jsx(to,{className:"w-4 h-4 mr-2 "}),"Panier",y>0&&s.jsx(Ae,{className:"ml-auto bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1 ",children:y})]})}),s.jsx(St,{asChild:!0,children:s.jsxs(fe,{to:"/messages",className:"cursor-pointer relative",children:[s.jsx(Ht,{className:"w-4 h-4 mr-2"}),"Messages",f>0&&s.jsx(Ae,{className:"ml-auto bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1",children:f>99?"99+":f})]})}),s.jsx(St,{asChild:!0,children:s.jsxs(fe,{to:"/favorites",className:"cursor-pointer",children:[s.jsx(cr,{className:"w-4 h-4 mr-2"}),"Mes favoris"]})})]})]})]})]})]})})};function nX({icon:t,size:e=32,gradientId:n}){return s.jsxs("svg",{width:e,height:e,viewBox:`0 0 ${e} ${e}`,xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:n,x1:"0",y1:"0",x2:"1",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:"#2ECC71"}),s.jsx("stop",{offset:"100%",stopColor:"#4A90E2"})]})}),s.jsx(t,{width:e,height:e,fill:`url(#${n})`})]})}const rX=()=>s.jsx("footer",{className:"bg-muted/50 border-t border-border mt-auto",children:s.jsxs("div",{className:"container mx-auto px-4 py-12",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(nX,{icon:pu,gradientId:"gradient-footer",size:32}),s.jsxs("div",{children:[s.jsx("span",{className:"font-bold text-xl bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"StudyMarket"}),s.jsx("div",{className:"text-xs text-muted-foreground -mt-1",children:"Étudiants certifiés"})]})]}),s.jsx("p",{className:"text-muted-foreground text-sm",children:"La première plateforme d'échange entre étudiants vérifiés. Achetez, vendez, donnez et échangez en toute sécurité au sein de votre communauté universitaire."}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsx("a",{href:"https://facebook.com/studymarket",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors",children:s.jsx(cW,{className:"w-5 h-5"})}),s.jsx("a",{href:"https://twitter.com/studymarket",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors",children:s.jsx(CW,{className:"w-5 h-5"})}),s.jsx("a",{href:"https://instagram.com/studymarket",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors",children:s.jsx(fW,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold",children:"Navigation"}),s.jsxs("ul",{className:"space-y-2 text-sm",children:[s.jsx("li",{children:s.jsx(fe,{to:"/listings",className:"text-muted-foreground hover:text-primary transition-colors",children:"Toutes les annonces"})}),s.jsx("li",{children:s.jsx(fe,{to:"/listings?transactionType=donation",className:"text-muted-foreground hover:text-primary transition-colors",children:"Dons entre étudiants"})}),s.jsx("li",{children:s.jsx(fe,{to:"/listings?transactionType=exchange",className:"text-muted-foreground hover:text-primary transition-colors",children:"Troc & Échanges"})}),s.jsx("li",{children:s.jsx(fe,{to:"/create",className:"text-muted-foreground hover:text-primary transition-colors",children:"Publier une annonce"})}),s.jsx("li",{children:s.jsx(fe,{to:"/how-it-works",className:"text-muted-foreground hover:text-primary transition-colors",children:"Comment ça marche"})})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold",children:"Catégories populaires"}),s.jsxs("ul",{className:"space-y-2 text-sm",children:[s.jsx("li",{children:s.jsx(fe,{to:"/listings?category=books",className:"text-muted-foreground hover:text-primary transition-colors",children:"Livres & Cours"})}),s.jsx("li",{children:s.jsx(fe,{to:"/listings?category=electronics",className:"text-muted-foreground hover:text-primary transition-colors",children:"Électronique"})}),s.jsx("li",{children:s.jsx(fe,{to:"/listings?category=housing",className:"text-muted-foreground hover:text-primary transition-colors",children:"Logement & Colocation"})}),s.jsx("li",{children:s.jsx(fe,{to:"/listings?category=services",className:"text-muted-foreground hover:text-primary transition-colors",children:"Services étudiants"})}),s.jsx("li",{children:s.jsx(fe,{to:"/listings?category=jobs",className:"text-muted-foreground hover:text-primary transition-colors",children:"Jobs & Stages"})})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold",children:"Sécurité & Confiance"}),s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[s.jsx(ft,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{children:"Étudiants 100% vérifiés"})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[s.jsx(Ns,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{children:"Impact écologique mesuré"})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[s.jsx(Cr,{className:"w-4 h-4"}),s.jsx("span",{children:"support@studymarket.fr"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{to:"/safety",className:"block text-muted-foreground hover:text-primary transition-colors text-sm",children:"Conseils de sécurité"}),s.jsx(fe,{to:"/verification",className:"block text-muted-foreground hover:text-primary transition-colors text-sm",children:"Processus de vérification"}),s.jsx(fe,{to:"/community-guidelines",className:"block text-muted-foreground hover:text-primary transition-colors text-sm",children:"Règles de la communauté"}),s.jsx(fe,{to:"/help",className:"block text-muted-foreground hover:text-primary transition-colors text-sm",children:"Centre d'aide"})]})]})]}),s.jsxs("div",{className:"border-t border-border mt-8 pt-8 flex flex-col sm:flex-row justify-between items-center",children:[s.jsx("p",{className:"text-muted-foreground text-sm",children:"© 2024 StudyMarket. Tous droits réservés. Plateforme dédiée aux étudiants vérifiés."}),s.jsxs("div",{className:"flex space-x-6 mt-4 sm:mt-0",children:[s.jsx(fe,{to:"/terms",className:"text-muted-foreground hover:text-primary transition-colors text-sm",children:"Conditions d'utilisation"}),s.jsx(fe,{to:"/privacy",className:"text-muted-foreground hover:text-primary transition-colors text-sm",children:"Politique de confidentialité"}),s.jsx(fe,{to:"/cookies",className:"text-muted-foreground hover:text-primary transition-colors text-sm",children:"Cookies"}),s.jsxs("a",{href:"mailto:support@studymarket.fr",className:"text-muted-foreground hover:text-primary transition-colors text-sm flex items-center gap-1",children:[s.jsx(jr,{className:"w-3 h-3"}),"Contact"]})]})]})]})}),K=p.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:Pe("rounded-xl border bg-card text-card-foreground shadow",t),...e}));K.displayName="Card";const Ne=p.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:Pe("flex flex-col space-y-1.5 p-6",t),...e}));Ne.displayName="CardHeader";const Ce=p.forwardRef(({className:t,...e},n)=>s.jsx("h3",{ref:n,className:Pe("font-semibold leading-none tracking-tight",t),...e}));Ce.displayName="CardTitle";const nt=p.forwardRef(({className:t,...e},n)=>s.jsx("p",{ref:n,className:Pe("text-sm text-muted-foreground",t),...e}));nt.displayName="CardDescription";const Y=p.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:Pe("p-6 pt-0",t),...e}));Y.displayName="CardContent";const F4=p.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:Pe("flex items-center p-6 pt-0",t),...e}));F4.displayName="CardFooter";const sg=t=>{if(t==null)return null;if(Array.isArray(t))return t.map(sg).filter(e=>e!==void 0);if(typeof t=="object"&&t!==null){const e={};return Object.keys(t).forEach(n=>{const r=sg(t[n]);r!==void 0&&(e[n]=r)}),e}return t},wE=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch(e){return console.warn("Error converting timestamp:",e),new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},py=t=>{var n,r,i,a,o,l;const e=t.data();return{id:t.id,...e,createdAt:wE(e.createdAt),updatedAt:wE(e.updatedAt),title:e.title||"Sans titre",description:e.description||"",price:e.price||0,currency:e.currency||"EUR",category:e.category||"electronics",condition:e.condition||"good",images:e.images||[],tags:e.tags||[],location:{city:((n=e.location)==null?void 0:n.city)||"Paris",state:((r=e.location)==null?void 0:r.state)||"Île-de-France",country:((i=e.location)==null?void 0:i.country)||"France",campus:((a=e.location)==null?void 0:a.campus)||null,university:((o=e.location)==null?void 0:o.university)||null,coordinates:((l=e.location)==null?void 0:l.coordinates)||null},transactionType:e.transactionType||"sale",sellerId:e.sellerId||"",sellerName:e.sellerName||"Utilisateur",sellerAvatar:e.sellerAvatar||null,sellerUniversity:e.sellerUniversity||"Université non spécifiée",sellerVerified:e.sellerVerified||!1,status:e.status||"active",views:e.views||0,likes:e.likes||0,saves:e.saves||0,reportCount:e.reportCount||0,moderationStatus:e.moderationStatus||"approved"}},pf=ju((t,e)=>({listings:[],featuredListings:[],currentListing:null,loading:!1,hasMore:!0,lastDoc:null,fetchListings:async(n={},r=!1)=>{const{listings:i,lastDoc:a}=e();if(!(!r&&!a)){t({loading:!0});try{let o=Wt(vt(_e,"listings"),RS("createdAt","desc"),ns(20));!r&&a&&(o=Wt(o,TB(a)));const l=await fn(o);let c=l.docs.map(py);if(n.category&&n.category!=="all"&&(c=c.filter(d=>d.category===n.category)),n.minPrice!==void 0&&(c=c.filter(d=>d.price>=n.minPrice)),n.maxPrice!==void 0&&(c=c.filter(d=>d.price<=n.maxPrice)),n.query){const d=n.query.toLowerCase();c=c.filter(f=>{var m;return f.title.toLowerCase().includes(d)||f.description.toLowerCase().includes(d)||((m=f.tags)==null?void 0:m.some(v=>v.toLowerCase().includes(d)))})}if(n.condition&&n.condition.length>0&&(c=c.filter(d=>n.condition.includes(d.condition))),n.sortBy)switch(n.sortBy){case"price-asc":c.sort((d,f)=>d.price-f.price);break;case"price-desc":c.sort((d,f)=>f.price-d.price);break;case"date":default:c.sort((d,f)=>new Date(f.createdAt).getTime()-new Date(d.createdAt).getTime());break}const u=l.docs[l.docs.length-1];t({listings:r?c:[...i,...c],lastDoc:u,hasMore:l.docs.length===20,loading:!1})}catch(o){console.error("Error fetching listings:",o),ee.error("Erreur lors du chargement des annonces"),t({loading:!1})}}},fetchFeaturedListings:async()=>{try{console.log("🔍 Fetching featured listings...");const n=Wt(vt(_e,"listings"),RS("createdAt","desc"),ns(6)),r=await fn(n);console.log(`📊 Found ${r.docs.length} documents`);const i=r.docs.map((a,o)=>{try{console.log(`🔄 Processing document ${o+1}:`,a.id);const l=py(a);return console.log(`✅ Successfully converted listing: ${l.title}`),l}catch(l){return console.error(`❌ Error converting document ${a.id}:`,l),{id:a.id,title:"Annonce non disponible",description:"Cette annonce ne peut pas être affichée pour le moment.",price:0,currency:"EUR",category:"electronics",condition:"good",images:[],tags:[],location:{city:"Paris",state:"Île-de-France",country:"France",campus:null,university:null,coordinates:null},transactionType:"sale",sellerId:"",sellerName:"Utilisateur",sellerAvatar:null,sellerUniversity:"Université non spécifiée",sellerVerified:!1,status:"active",views:0,likes:0,saves:0,reportCount:0,moderationStatus:"approved",createdAt:new Date,updatedAt:new Date}}});console.log(`🎉 Successfully processed ${i.length} featured listings`),t({featuredListings:i})}catch(n){console.error("❌ Error fetching featured listings:",n),t({featuredListings:[]})}},fetchListingById:async n=>{t({loading:!0});try{const r=tt(_e,"listings",n),i=await rs(r);if(i.exists()){const a=py(i);await Mn(r,{views:(a.views||0)+1}),t({currentListing:a,loading:!1})}else t({currentListing:null,loading:!1}),ee.error("Annonce introuvable")}catch(r){console.error("Error fetching listing:",r),ee.error("Erreur lors du chargement de l'annonce"),t({currentListing:null,loading:!1})}},createListing:async n=>{var r,i,a,o,l,c;try{const u=sg({...n,views:0,likes:0,saves:0,reportCount:0,moderationStatus:"approved",status:"active",createdAt:new Date,updatedAt:new Date,location:{city:((r=n.location)==null?void 0:r.city)||"Paris",state:((i=n.location)==null?void 0:i.state)||"Île-de-France",country:((a=n.location)==null?void 0:a.country)||"France",campus:((o=n.location)==null?void 0:o.campus)||null,university:((l=n.location)==null?void 0:l.university)||null,coordinates:((c=n.location)==null?void 0:c.coordinates)||null},currency:n.currency||"EUR",images:n.images||[],tags:n.tags||[],condition:n.condition||"good",transactionType:n.transactionType||"sale"});console.log("Creating listing with data:",u);const d=await Ja(vt(_e,"listings"),u);return ee.success("Annonce créée avec succès !"),d.id}catch(u){throw console.error("Error creating listing:",u),ee.error("Erreur lors de la création de l'annonce"),u}},updateListing:async(n,r)=>{try{const i=tt(_e,"listings",n),a=sg({...r,updatedAt:new Date});await Mn(i,a);const{listings:o,currentListing:l}=e(),c=o.map(u=>u.id===n?{...u,...r}:u);t({listings:c,currentListing:(l==null?void 0:l.id)===n?{...l,...r}:l}),ee.success("Annonce mise à jour !")}catch(i){throw console.error("Error updating listing:",i),ee.error("Erreur lors de la mise à jour"),i}},deleteListing:async n=>{try{await qc(tt(_e,"listings",n));const{listings:r}=e(),i=r.filter(a=>a.id!==n);t({listings:i}),ee.success("Annonce supprimée !")}catch(r){throw console.error("Error deleting listing:",r),ee.error("Erreur lors de la suppression"),r}},searchListings:async n=>{await e().fetchListings(n,!0)},clearListings:()=>{t({listings:[],lastDoc:null,hasMore:!0,currentListing:null})}})),bE=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},U4=ju((t,e)=>({favorites:[],userFavoriteIds:new Set,loading:!1,fetchUserFavorites:async n=>{if(n){t({loading:!0});try{const r=Wt(vt(_e,"favorites"),hn("userId","==",n),ns(100)),i=await fn(r),a=[],o=new Set;i.forEach(l=>{const c=l.data(),u={id:l.id,...c,createdAt:bE(c.createdAt),updatedAt:bE(c.updatedAt)};a.push(u),o.add(u.listingId)}),a.sort((l,c)=>c.createdAt.getTime()-l.createdAt.getTime()),t({favorites:a,userFavoriteIds:o,loading:!1})}catch(r){console.error("Erreur lors du chargement des favoris:",r),ee.error("Erreur lors du chargement des favoris"),t({loading:!1})}}},addToFavorites:async(n,r)=>{var i;if(!(!n||!r))try{if(e().userFavoriteIds.has(r.id)){ee.info("Déjà dans vos favoris");return}const a={userId:n,listingId:r.id,listingTitle:r.title,listingPrice:r.price,listingImage:((i=r.images)==null?void 0:i[0])||null,listingCategory:r.category,listingTransactionType:r.transactionType,sellerName:r.sellerName,sellerUniversity:r.sellerUniversity,notes:"",tags:r.tags||[],createdAt:wn(),updatedAt:wn()},l={id:(await Ja(vt(_e,"favorites"),a)).id,...a,createdAt:new Date,updatedAt:new Date},{favorites:c,userFavoriteIds:u}=e(),d=new Set(u);d.add(r.id),t({favorites:[l,...c],userFavoriteIds:d});try{await Mn(tt(_e,"listings",r.id),{likes:(r.likes||0)+1})}catch(f){console.error("Erreur lors de la mise à jour du compteur de likes:",f)}ee.success("Ajouté aux favoris ❤️")}catch(a){console.error("Erreur lors de l'ajout aux favoris:",a),ee.error("Erreur lors de l'ajout aux favoris")}},removeFromFavorites:async(n,r)=>{if(!(!n||!r))try{const i=Wt(vt(_e,"favorites"),hn("userId","==",n),hn("listingId","==",r)),a=await fn(i);if(a.empty){ee.info("Pas dans vos favoris");return}const o=a.docs[0];await qc(tt(_e,"favorites",o.id));const{favorites:l,userFavoriteIds:c}=e(),u=new Set(c);u.delete(r),t({favorites:l.filter(d=>d.listingId!==r),userFavoriteIds:u});try{const d=tt(_e,"listings",r),f=await fn(Wt(vt(_e,"listings"),hn("__name__","==",r)));if(!f.empty){const m=f.docs[0].data().likes||0;await Mn(d,{likes:Math.max(0,m-1)})}}catch(d){console.error("Erreur lors de la mise à jour du compteur de likes:",d)}ee.success("Retiré des favoris")}catch(i){console.error("Erreur lors de la suppression des favoris:",i),ee.error("Erreur lors de la suppression des favoris")}},isFavorite:n=>e().userFavoriteIds.has(n),toggleFavorite:async(n,r)=>{const{isFavorite:i,addToFavorites:a,removeFromFavorites:o}=e();i(r.id)?await o(n,r.id):await a(n,r)},clearFavorites:()=>{t({favorites:[],userFavoriteIds:new Set,loading:!1})}})),$4=({listing:t,size:e="default",showText:n=!0,className:r=""})=>{const{currentUser:i}=Qt(),{isFavorite:a,toggleFavorite:o}=U4(),l=En(),c=a(t.id),u=f=>{if(f.preventDefault(),f.stopPropagation(),!i){ee.error("Connectez-vous pour ajouter aux favoris"),l("/auth");return}o(i.uid,t)},d=()=>{switch(e){case"sm":return"h-8 w-8";case"lg":return"h-10 w-10";default:return"h-9 w-9"}};return s.jsx(B,{variant:"ghost",size:"icon",onClick:u,className:`${d()} ${c?"text-red-500 hover:text-red-600":"text-foreground hover:text-red-500"} ${r}`,"aria-label":c?"Retirer des favoris":"Ajouter aux favoris",children:s.jsx(cr,{className:`w-4 h-4 ${c?"fill-current":""}`})})},z4=({listing:t,size:e="default",showText:n=!0,className:r=""})=>{const i=async o=>{o.preventDefault(),o.stopPropagation();const l={title:t.title,text:`Découvrez cette annonce sur StudyMarket: ${t.title}`,url:window.location.href};try{navigator.share?await navigator.share(l):(await navigator.clipboard.writeText(window.location.href),ee.success("Lien copié dans le presse-papiers"))}catch(c){console.error("Error sharing:",c)}},a=()=>{switch(e){case"sm":return"h-8 w-8";case"lg":return"h-10 w-10";default:return"h-9 w-9"}};return s.jsx(B,{variant:"ghost",size:"icon",onClick:i,className:`${a()} ${r}`,"aria-label":"Partager",children:s.jsx(Hb,{className:"w-4 h-4"})})};function ze(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function kr(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function ir(t,e){const n=ze(t);return isNaN(e)?kr(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function Rs(t,e){const n=ze(t);if(isNaN(e))return kr(t,NaN);if(!e)return n;const r=n.getDate(),i=kr(t,n.getTime());i.setMonth(n.getMonth()+e+1,0);const a=i.getDate();return r>=a?i:(n.setFullYear(i.getFullYear(),i.getMonth(),r),n)}const gj=6048e5,sX=864e5,xm=43200,jE=1440;let iX={};function Nu(){return iX}function ui(t,e){var l,c,u,d;const n=Nu(),r=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=ze(t),a=i.getDay(),o=(a<r?7:0)+a-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function ml(t){return ui(t,{weekStartsOn:1})}function B4(t){const e=ze(t),n=e.getFullYear(),r=kr(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=ml(r),a=kr(t,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const o=ml(a);return e.getTime()>=i.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function Xc(t){const e=ze(t);return e.setHours(0,0,0,0),e}function Zc(t){const e=ze(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Ys(t,e){const n=Xc(t),r=Xc(e),i=+n-Zc(n),a=+r-Zc(r);return Math.round((i-a)/sX)}function aX(t){const e=B4(t),n=kr(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),ml(n)}function mw(t,e){const n=e*7;return ir(t,n)}function oX(t,e){return Rs(t,e*12)}function lX(t){let e;return t.forEach(function(n){const r=ze(n);(e===void 0||e<r||isNaN(Number(r)))&&(e=r)}),e||new Date(NaN)}function cX(t){let e;return t.forEach(n=>{const r=ze(n);(!e||e>r||isNaN(+r))&&(e=r)}),e||new Date(NaN)}function Qm(t,e){const n=ze(t),r=ze(e),i=n.getTime()-r.getTime();return i<0?-1:i>0?1:i}function uX(t){return kr(t,Date.now())}function _r(t,e){const n=Xc(t),r=Xc(e);return+n==+r}function vj(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function dX(t){if(!vj(t)&&typeof t!="number")return!1;const e=ze(t);return!isNaN(Number(e))}function Jc(t,e){const n=ze(t),r=ze(e),i=n.getFullYear()-r.getFullYear(),a=n.getMonth()-r.getMonth();return i*12+a}function hX(t,e,n){const r=ui(t,n),i=ui(e,n),a=+r-Zc(r),o=+i-Zc(i);return Math.round((a-o)/gj)}function fX(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function mX(t,e){return+ze(t)-+ze(e)}function pX(t){const e=ze(t);return e.setHours(23,59,59,999),e}function Dv(t){const e=ze(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function gX(t){const e=ze(t);return+pX(e)==+Dv(e)}function vX(t,e){const n=ze(t),r=ze(e),i=Qm(n,r),a=Math.abs(Jc(n,r));let o;if(a<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-i*a);let l=Qm(n,r)===-i;gX(ze(t))&&a===1&&Qm(t,r)===1&&(l=!1),o=i*(a-Number(l))}return o===0?0:o}function xX(t,e,n){const r=mX(t,e)/1e3;return fX(n==null?void 0:n.roundingMethod)(r)}function Tr(t){const e=ze(t);return e.setDate(1),e.setHours(0,0,0,0),e}function q4(t){const e=ze(t),n=kr(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function xj(t,e){var l,c,u,d;const n=Nu(),r=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=ze(t),a=i.getDay(),o=(a<r?-7:0)+6-(a-r);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function W4(t){return xj(t,{weekStartsOn:1})}const yX={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},wX=(t,e,n)=>{let r;const i=yX[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Ec(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const bX={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},jX={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},_X={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},NX={date:Ec({formats:bX,defaultWidth:"full"}),time:Ec({formats:jX,defaultWidth:"full"}),dateTime:Ec({formats:_X,defaultWidth:"full"})},SX={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},EX=(t,e,n,r)=>SX[t];function Ws(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=n!=null&&n.width?String(n.width):o;i=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[l]||t.values[o]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const CX={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},TX={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},kX={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},IX={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},PX={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},AX={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},RX=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},MX={ordinalNumber:RX,era:Ws({values:CX,defaultWidth:"wide"}),quarter:Ws({values:TX,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Ws({values:kX,defaultWidth:"wide"}),day:Ws({values:IX,defaultWidth:"wide"}),dayPeriod:Ws({values:PX,defaultWidth:"wide",formattingValues:AX,defaultFormattingWidth:"wide"})};function Hs(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const o=a[0],l=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?OX(l,f=>f.test(o)):DX(l,f=>f.test(o));let u;u=t.valueCallback?t.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=e.slice(o.length);return{value:u,rest:d}}}function DX(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function OX(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function H4(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],a=e.match(t.parsePattern);if(!a)return null;let o=t.valueCallback?t.valueCallback(a[0]):a[0];o=n.valueCallback?n.valueCallback(o):o;const l=e.slice(i.length);return{value:o,rest:l}}}const LX=/^(\d+)(th|st|nd|rd)?/i,VX=/\d+/i,FX={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},UX={any:[/^b/i,/^(a|c)/i]},$X={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},zX={any:[/1/i,/2/i,/3/i,/4/i]},BX={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},qX={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},WX={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},HX={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},GX={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},KX={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},YX={ordinalNumber:H4({matchPattern:LX,parsePattern:VX,valueCallback:t=>parseInt(t,10)}),era:Hs({matchPatterns:FX,defaultMatchWidth:"wide",parsePatterns:UX,defaultParseWidth:"any"}),quarter:Hs({matchPatterns:$X,defaultMatchWidth:"wide",parsePatterns:zX,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Hs({matchPatterns:BX,defaultMatchWidth:"wide",parsePatterns:qX,defaultParseWidth:"any"}),day:Hs({matchPatterns:WX,defaultMatchWidth:"wide",parsePatterns:HX,defaultParseWidth:"any"}),dayPeriod:Hs({matchPatterns:GX,defaultMatchWidth:"any",parsePatterns:KX,defaultParseWidth:"any"})},yj={code:"en-US",formatDistance:wX,formatLong:NX,formatRelative:EX,localize:MX,match:YX,options:{weekStartsOn:0,firstWeekContainsDate:1}};function QX(t){const e=ze(t);return Ys(e,q4(e))+1}function G4(t){const e=ze(t),n=+ml(e)-+aX(e);return Math.round(n/gj)+1}function K4(t,e){var d,f,m,v;const n=ze(t),r=n.getFullYear(),i=Nu(),a=(e==null?void 0:e.firstWeekContainsDate)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??i.firstWeekContainsDate??((v=(m=i.locale)==null?void 0:m.options)==null?void 0:v.firstWeekContainsDate)??1,o=kr(t,0);o.setFullYear(r+1,0,a),o.setHours(0,0,0,0);const l=ui(o,e),c=kr(t,0);c.setFullYear(r,0,a),c.setHours(0,0,0,0);const u=ui(c,e);return n.getTime()>=l.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function XX(t,e){var l,c,u,d;const n=Nu(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,i=K4(t,e),a=kr(t,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),ui(a,e)}function Y4(t,e){const n=ze(t),r=+ui(n,e)-+XX(n,e);return Math.round(r/gj)+1}function yt(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const ma={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return yt(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):yt(n+1,2)},d(t,e){return yt(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return yt(t.getHours()%12||12,e.length)},H(t,e){return yt(t.getHours(),e.length)},m(t,e){return yt(t.getMinutes(),e.length)},s(t,e){return yt(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return yt(i,e.length)}},zl={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},_E={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return ma.y(t,e)},Y:function(t,e,n,r){const i=K4(t,r),a=i>0?i:1-i;if(e==="YY"){const o=a%100;return yt(o,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):yt(a,e.length)},R:function(t,e){const n=B4(t);return yt(n,e.length)},u:function(t,e){const n=t.getFullYear();return yt(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return yt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return yt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return ma.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return yt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=Y4(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):yt(i,e.length)},I:function(t,e,n){const r=G4(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):yt(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):ma.d(t,e)},D:function(t,e,n){const r=QX(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):yt(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return yt(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return yt(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return yt(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=zl.noon:r===0?i=zl.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=zl.evening:r>=12?i=zl.afternoon:r>=4?i=zl.morning:i=zl.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ma.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):ma.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):yt(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):yt(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):ma.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):ma.s(t,e)},S:function(t,e){return ma.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return SE(r);case"XXXX":case"XX":return Mo(r);case"XXXXX":case"XXX":default:return Mo(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return SE(r);case"xxxx":case"xx":return Mo(r);case"xxxxx":case"xxx":default:return Mo(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+NE(r,":");case"OOOO":default:return"GMT"+Mo(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+NE(r,":");case"zzzz":default:return"GMT"+Mo(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return yt(r,e.length)},T:function(t,e,n){const r=t.getTime();return yt(r,e.length)}};function NE(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),a=r%60;return a===0?n+String(i):n+String(i)+e+yt(a,2)}function SE(t,e){return t%60===0?(t>0?"-":"+")+yt(Math.abs(t)/60,2):Mo(t,e)}function Mo(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=yt(Math.trunc(r/60),2),a=yt(r%60,2);return n+i+e+a}const EE=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Q4=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},ZX=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return EE(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",EE(r,e)).replace("{{time}}",Q4(i,e))},JX={p:Q4,P:ZX},eZ=/^D+$/,tZ=/^Y+$/,nZ=["D","DD","YY","YYYY"];function rZ(t){return eZ.test(t)}function sZ(t){return tZ.test(t)}function iZ(t,e,n){const r=aZ(t,e,n);if(console.warn(r),nZ.includes(t))throw new RangeError(r)}function aZ(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const oZ=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,lZ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,cZ=/^'([^]*?)'?$/,uZ=/''/g,dZ=/[a-zA-Z]/;function _n(t,e,n){var d,f,m,v,y,w,b,x;const r=Nu(),i=(n==null?void 0:n.locale)??r.locale??yj,a=(n==null?void 0:n.firstWeekContainsDate)??((f=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((v=(m=r.locale)==null?void 0:m.options)==null?void 0:v.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((w=(y=n==null?void 0:n.locale)==null?void 0:y.options)==null?void 0:w.weekStartsOn)??r.weekStartsOn??((x=(b=r.locale)==null?void 0:b.options)==null?void 0:x.weekStartsOn)??0,l=ze(t);if(!dX(l))throw new RangeError("Invalid time value");let c=e.match(lZ).map(g=>{const _=g[0];if(_==="p"||_==="P"){const E=JX[_];return E(g,i.formatLong)}return g}).join("").match(oZ).map(g=>{if(g==="''")return{isToken:!1,value:"'"};const _=g[0];if(_==="'")return{isToken:!1,value:hZ(g)};if(_E[_])return{isToken:!0,value:g};if(_.match(dZ))throw new RangeError("Format string contains an unescaped latin alphabet character `"+_+"`");return{isToken:!1,value:g}});i.localize.preprocessor&&(c=i.localize.preprocessor(l,c));const u={firstWeekContainsDate:a,weekStartsOn:o,locale:i};return c.map(g=>{if(!g.isToken)return g.value;const _=g.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&sZ(_)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&rZ(_))&&iZ(_,e,String(t));const E=_E[_[0]];return E(l,_,i.localize,u)}).join("")}function hZ(t){const e=t.match(cZ);return e?e[1].replace(uZ,"'"):t}function fZ(t,e,n){const r=Nu(),i=(n==null?void 0:n.locale)??r.locale??yj,a=2520,o=Qm(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o});let c,u;o>0?(c=ze(e),u=ze(t)):(c=ze(t),u=ze(e));const d=xX(u,c),f=(Zc(u)-Zc(c))/1e3,m=Math.round((d-f)/60);let v;if(m<2)return n!=null&&n.includeSeconds?d<5?i.formatDistance("lessThanXSeconds",5,l):d<10?i.formatDistance("lessThanXSeconds",10,l):d<20?i.formatDistance("lessThanXSeconds",20,l):d<40?i.formatDistance("halfAMinute",0,l):d<60?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",1,l):m===0?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",m,l);if(m<45)return i.formatDistance("xMinutes",m,l);if(m<90)return i.formatDistance("aboutXHours",1,l);if(m<jE){const y=Math.round(m/60);return i.formatDistance("aboutXHours",y,l)}else{if(m<a)return i.formatDistance("xDays",1,l);if(m<xm){const y=Math.round(m/jE);return i.formatDistance("xDays",y,l)}else if(m<xm*2)return v=Math.round(m/xm),i.formatDistance("aboutXMonths",v,l)}if(v=vX(u,c),v<12){const y=Math.round(m/xm);return i.formatDistance("xMonths",y,l)}else{const y=v%12,w=Math.trunc(v/12);return y<3?i.formatDistance("aboutXYears",w,l):y<9?i.formatDistance("overXYears",w,l):i.formatDistance("almostXYears",w+1,l)}}function Su(t,e){return fZ(t,uX(t),e)}function mZ(t){const e=ze(t),n=e.getFullYear(),r=e.getMonth(),i=kr(t,0);return i.setFullYear(n,r+1,0),i.setHours(0,0,0,0),i.getDate()}function pZ(t){return Math.trunc(+ze(t)/1e3)}function gZ(t){const e=ze(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(0,0,0,0),e}function vZ(t,e){return hX(gZ(t),Tr(t),e)+1}function pw(t,e){const n=ze(t),r=ze(e);return n.getTime()>r.getTime()}function X4(t,e){const n=ze(t),r=ze(e);return+n<+r}function wj(t,e){const n=ze(t),r=ze(e);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function xZ(t,e){const n=ze(t),r=ze(e);return n.getFullYear()===r.getFullYear()}function gy(t,e){return ir(t,-e)}function vy(t,e){const n=ze(t),r=n.getFullYear(),i=n.getDate(),a=kr(t,0);a.setFullYear(r,e,15),a.setHours(0,0,0,0);const o=mZ(a);return n.setMonth(e,Math.min(i,o)),n}function CE(t,e){const n=ze(t);return isNaN(+n)?kr(t,NaN):(n.setFullYear(e),n)}const yZ={lessThanXSeconds:{one:"moins d’une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d’une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d’un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu’un an",other:"presque {{count}} ans"}},wZ=(t,e,n)=>{let r;const i=yZ[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",String(e)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"dans "+r:"il y a "+r:r},bZ={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},jZ={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},_Z={full:"{{date}} 'à' {{time}}",long:"{{date}} 'à' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},NZ={date:Ec({formats:bZ,defaultWidth:"full"}),time:Ec({formats:jZ,defaultWidth:"full"}),dateTime:Ec({formats:_Z,defaultWidth:"full"})},SZ={lastWeek:"eeee 'dernier à' p",yesterday:"'hier à' p",today:"'aujourd’hui à' p",tomorrow:"'demain à' p'",nextWeek:"eeee 'prochain à' p",other:"P"},EZ=(t,e,n,r)=>SZ[t],CZ={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jésus-Christ","après Jésus-Christ"]},TZ={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2ème trim.","3ème trim.","4ème trim."],wide:["1er trimestre","2ème trimestre","3ème trimestre","4ème trimestre"]},kZ={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],wide:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},IZ={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},PZ={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"après-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l’après-midi",evening:"du soir",night:"du matin"}},AZ=(t,e)=>{const n=Number(t),r=e==null?void 0:e.unit;if(n===0)return"0";const i=["year","week","hour","minute","second"];let a;return n===1?a=r&&i.includes(r)?"ère":"er":a="ème",n+a},RZ=["MMM","MMMM"],MZ={preprocessor:(t,e)=>t.getDate()===1||!e.some(r=>r.isToken&&RZ.includes(r.value))?e:e.map(r=>r.isToken&&r.value==="do"?{isToken:!0,value:"d"}:r),ordinalNumber:AZ,era:Ws({values:CZ,defaultWidth:"wide"}),quarter:Ws({values:TZ,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Ws({values:kZ,defaultWidth:"wide"}),day:Ws({values:IZ,defaultWidth:"wide"}),dayPeriod:Ws({values:PZ,defaultWidth:"wide"})},DZ=/^(\d+)(ième|ère|ème|er|e)?/i,OZ=/\d+/i,LZ={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jésus-Christ|après Jésus-Christ)/i},VZ={any:[/^av/i,/^ap/i]},FZ={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|ème|e)? trim\.?/i,wide:/^[1234](er|ème|e)? trimestre/i},UZ={any:[/1/i,/2/i,/3/i,/4/i]},$Z={narrow:/^[jfmasond]/i,abbreviated:/^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\.?/i,wide:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i},zZ={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},BZ={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},qZ={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},WZ={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'après[-\s]midi|du soir|de la nuit)/i},HZ={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},GZ={ordinalNumber:H4({matchPattern:DZ,parsePattern:OZ,valueCallback:t=>parseInt(t)}),era:Hs({matchPatterns:LZ,defaultMatchWidth:"wide",parsePatterns:VZ,defaultParseWidth:"any"}),quarter:Hs({matchPatterns:FZ,defaultMatchWidth:"wide",parsePatterns:UZ,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Hs({matchPatterns:$Z,defaultMatchWidth:"wide",parsePatterns:zZ,defaultParseWidth:"any"}),day:Hs({matchPatterns:BZ,defaultMatchWidth:"wide",parsePatterns:qZ,defaultParseWidth:"any"}),dayPeriod:Hs({matchPatterns:WZ,defaultMatchWidth:"any",parsePatterns:HZ,defaultParseWidth:"any"})},Qn={code:"fr",formatDistance:wZ,formatLong:NZ,formatRelative:EZ,localize:MZ,match:GZ,options:{weekStartsOn:1,firstWeekContainsDate:4}},yh=({listing:t})=>{var f,m,v,y,w,b;const e=(x,g)=>{if(t.transactionType==="donation")return"Gratuit";if(t.transactionType==="exchange")return"Échange";const _=g||"EUR";try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:_}).format(x)}catch{return`${x} €`}},n=x=>{switch(x){case"new":return"bg-emerald-100 text-emerald-700 border-emerald-200";case"like-new":return"bg-blue-100 text-blue-700 border-blue-200";case"good":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"fair":return"bg-orange-100 text-orange-700 border-orange-200";case"poor":return"bg-red-100 text-red-700 border-red-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},r=x=>{switch(x){case"new":return"Neuf";case"like-new":return"Comme neuf";case"good":return"Bon état";case"fair":return"État correct";case"poor":return"Mauvais état";default:return x}},i=()=>{switch(t.transactionType){case"donation":return s.jsx(Gc,{className:"w-3 h-3"});case"exchange":return s.jsx(Hi,{className:"w-3 h-3"});default:return null}},a=()=>{switch(t.transactionType){case"donation":return"bg-green-500 text-white hover:bg-green-600";case"exchange":return"bg-purple-500 text-white hover:bg-purple-600";default:return"bg-primary text-white hover:bg-primary/90"}},o=x=>{try{let g;if(!x)return"Date inconnue";if(x instanceof Date)g=x;else if(typeof x=="string"||typeof x=="number")g=new Date(x);else if(x&&typeof x.toDate=="function")g=x.toDate();else if(x&&typeof x=="object"&&x.seconds)g=new Date(x.seconds*1e3);else return"Date inconnue";return isNaN(g.getTime())?"Date inconnue":Su(g,{addSuffix:!0,locale:Qn})}catch(g){return console.warn("Error formatting date:",g),"Date inconnue"}},l=t.price||0,c=t.currency||"EUR",u=t.condition||"good",d=t.transactionType||"sale";return s.jsxs(K,{className:"group relative bg-white rounded-xl border border-gray-200 hover:border-gray-300 shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden w-full max-w-sm",children:[s.jsx(fe,{to:`/listing/${t.id}`,className:"block",children:s.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden bg-gray-100",children:[s.jsx("img",{src:((f=t.images)==null?void 0:f[0])||"/assets/image.png",alt:t.title,className:"w-full h-full object-cover group-hover:scale-[1.02] transition-transform duration-500"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/10 via-transparent to-black/20 pointer-events-none"}),s.jsxs("div",{className:"absolute top-3 right-3 flex flex-col gap-2",children:[s.jsx($4,{listing:t,size:"sm",className:"bg-white/90 backdrop-blur-sm hover:bg-white shadow-sm border-0 rounded-full p-2"}),s.jsx(z4,{listing:t,size:"sm",className:"bg-white/90 backdrop-blur-sm hover:bg-white shadow-sm border-0 rounded-full p-2"})]}),d!=="sale"&&s.jsxs(Ae,{className:`absolute top-3 left-3 ${a()} border-0 shadow-sm font-medium px-3 py-1.5 rounded-full`,children:[i(),s.jsx("span",{className:"ml-1.5 text-sm",children:d==="donation"?"Don":"Troc"})]}),d==="sale"&&s.jsx(Ae,{className:`absolute top-3 left-3 ${n(u)} font-medium px-3 py-1.5 rounded-full shadow-sm`,children:r(u)}),t.environmentalImpact&&s.jsxs(Ae,{className:"absolute bottom-3 left-3 bg-emerald-500 text-white border-0 shadow-sm font-medium px-3 py-1.5 rounded-full",children:[s.jsx(Ns,{className:"w-3 h-3 mr-1.5"}),"-",t.environmentalImpact.co2Saved,"kg CO₂"]}),t.images&&t.images.length>1&&s.jsxs("div",{className:"absolute bottom-3 right-3 bg-black/70 backdrop-blur-sm text-white text-sm px-2.5 py-1 rounded-full font-medium",children:["+",t.images.length-1]})]})}),s.jsxs(Y,{className:"p-6 space-y-4",children:[s.jsxs(fe,{to:`/listing/${t.id}`,className:"block",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("span",{className:`text-2xl font-bold ${d==="donation"?"text-green-600":d==="exchange"?"text-purple-600":"text-slate-900"}`,children:e(l,c)}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500 bg-gray-50 px-2.5 py-1 rounded-full",children:[s.jsx(Hc,{className:"w-3.5 h-3.5"}),s.jsx("span",{className:"font-medium",children:t.views||0})]})]}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 line-clamp-2 mb-3 leading-tight text-left",children:t.title||"Sans titre"}),d==="exchange"&&t.exchangeFor&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 bg-purple-50 px-3 py-2 rounded-lg mb-4",children:[s.jsx(Hi,{className:"w-4 h-4 text-purple-500"}),s.jsxs("span",{children:[s.jsx("span",{className:"font-medium",children:"Contre:"})," ",t.exchangeFor]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-4",children:[s.jsxs("div",{className:"flex items-center gap-1.5 flex-1 min-w-0",children:[s.jsx(lr,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:((m=t.location)==null?void 0:m.campus)||((v=t.location)!=null&&v.city&&((y=t.location)!=null&&y.state)?`${t.location.city}, ${t.location.state}`:"Localisation non spécifiée")})]}),s.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0 ml-3",children:[s.jsx(ln,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"whitespace-nowrap",children:o(t.createdAt)})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsxs(Qi,{className:"w-9 h-9 border-2 border-gray-100",children:[s.jsx(Xi,{src:t.sellerAvatar}),s.jsx(Zi,{className:"text-sm bg-gray-100 text-gray-600 font-medium",children:((b=(w=t.sellerName)==null?void 0:w[0])==null?void 0:b.toUpperCase())||"U"})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:"text-sm font-medium text-gray-900 truncate",children:t.sellerName||"Utilisateur"}),t.sellerVerified&&s.jsx(ft,{className:"w-4 h-4 text-green-500 flex-shrink-0"})]}),s.jsx("span",{className:"text-xs text-gray-500 truncate block text-left",children:t.sellerUniversity||"Université non spécifiée"})]})]}),t.aiPriceEstimate&&d==="sale"&&s.jsx(Ae,{className:"bg-green-50 text-green-700 border-green-200 hover:bg-green-100 text-xs font-medium px-2.5 py-1 rounded-full flex-shrink-0 ml-2",children:"Prix juste ✓"})]})]})]})},TE=[{email:"marie.dupont@sorbonne-universite.fr",displayName:"Marie Dupont",photoURL:"https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&dpr=2",isVerified:!0,verificationStatus:"verified",university:"Sorbonne Université",graduationYear:2025,fieldOfStudy:"Informatique",campus:"Campus Pierre et Marie Curie",bio:"Étudiante en Master 2 Informatique, passionnée de développement web",rating:4.8,reviewCount:12,trustScore:95,co2Saved:45,transactionsCount:15,donationsCount:3,location:"Paris, France",notificationPreferences:{email:!0,push:!0,sms:!1,alerts:!0},createdAt:new Date("2023-09-15"),lastSeen:new Date},{email:"thomas.martin@dauphine.psl.eu",displayName:"Thomas Martin",photoURL:"https://images.pexels.com/photos/1222271/pexels-photo-1222271.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&dpr=2",isVerified:!0,verificationStatus:"verified",university:"Université Paris-Dauphine",graduationYear:2024,fieldOfStudy:"Finance",campus:"Campus Dauphine",bio:"Étudiant en finance, vendeur de confiance depuis 2 ans",rating:4.9,reviewCount:28,trustScore:98,co2Saved:78,transactionsCount:32,donationsCount:8,location:"Paris, France",notificationPreferences:{email:!0,push:!0,sms:!0,alerts:!0},createdAt:new Date("2022-10-01"),lastSeen:new Date},{email:"sophie.bernard@polytechnique.edu",displayName:"Sophie Bernard",photoURL:"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&dpr=2",isVerified:!0,verificationStatus:"verified",university:"École Polytechnique",graduationYear:2026,fieldOfStudy:"Ingénierie",campus:"Campus de Palaiseau",bio:"Élève ingénieure, spécialisée en technologies durables",rating:4.7,reviewCount:8,trustScore:92,co2Saved:23,transactionsCount:10,donationsCount:5,location:"Palaiseau, France",notificationPreferences:{email:!0,push:!1,sms:!1,alerts:!0},createdAt:new Date("2024-01-20"),lastSeen:new Date}],kE=[{title:'MacBook Pro 13" M1 - Parfait état',description:"MacBook Pro 13 pouces avec puce M1, 8GB RAM, 256GB SSD. Utilisé uniquement pour les cours, toujours dans sa housse de protection. Vendu avec chargeur original et boîte. Idéal pour étudiant en informatique !",price:850,currency:"EUR",category:"electronics",subcategory:"ordinateurs",condition:"like-new",images:["https://images.pexels.com/photos/205421/pexels-photo-205421.jpeg?auto=compress&cs=tinysrgb&w=800","https://images.pexels.com/photos/1029757/pexels-photo-1029757.jpeg?auto=compress&cs=tinysrgb&w=800"],tags:["apple","macbook","étudiant","informatique","portable"],location:{city:"Paris",state:"Île-de-France",country:"France",campus:"Campus Pierre et Marie Curie",university:"Sorbonne Université",coordinates:{lat:48.8566,lng:2.3522}},transactionType:"sale",sellerId:"user1",sellerName:"Marie Dupont",sellerAvatar:"https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&dpr=2",sellerUniversity:"Sorbonne Université",sellerVerified:!0,status:"active",views:45,likes:12,saves:8,aiPriceEstimate:{min:800,max:900,confidence:.85},environmentalImpact:{co2Saved:15,category:"electronics"},reportCount:0,moderationStatus:"approved",createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")},{title:"Livres de cours Finance M1 - Lot complet",description:"Lot de 5 livres essentiels pour le Master 1 Finance à Dauphine. Tous en excellent état, annotations au crayon facilement effaçables. Économisez plus de 200€ par rapport au neuf !",price:120,currency:"EUR",category:"books",subcategory:"manuels-universitaires",condition:"good",images:["https://images.pexels.com/photos/159711/books-bookstore-book-reading-159711.jpeg?auto=compress&cs=tinysrgb&w=800","https://images.pexels.com/photos/1370295/pexels-photo-1370295.jpeg?auto=compress&cs=tinysrgb&w=800"],tags:["finance","master","dauphine","livres","économie"],location:{city:"Paris",state:"Île-de-France",country:"France",campus:"Campus Dauphine",university:"Université Paris-Dauphine",coordinates:{lat:48.8698,lng:2.2734}},transactionType:"sale",sellerId:"user2",sellerName:"Thomas Martin",sellerAvatar:"https://images.pexels.com/photos/1222271/pexels-photo-1222271.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&dpr=2",sellerUniversity:"Université Paris-Dauphine",sellerVerified:!0,status:"active",views:28,likes:6,saves:4,environmentalImpact:{co2Saved:8,category:"books"},reportCount:0,moderationStatus:"approved",createdAt:new Date("2024-01-12"),updatedAt:new Date("2024-01-12")},{title:"Vélo de ville - Don gratuit !",description:"Vélo de ville en bon état que je donne car je déménage. Quelques rayures mais fonctionne parfaitement. Idéal pour se déplacer sur le campus ! À récupérer rapidement.",price:0,currency:"EUR",category:"furniture",subcategory:"transport",condition:"fair",images:["https://images.pexels.com/photos/100582/pexels-photo-100582.jpeg?auto=compress&cs=tinysrgb&w=800"],tags:["vélo","transport","campus","gratuit","écologique"],location:{city:"Palaiseau",state:"Île-de-France",country:"France",campus:"Campus de Palaiseau",university:"École Polytechnique",coordinates:{lat:48.7135,lng:2.207}},transactionType:"donation",sellerId:"user3",sellerName:"Sophie Bernard",sellerAvatar:"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&dpr=2",sellerUniversity:"École Polytechnique",sellerVerified:!0,status:"active",views:67,likes:23,saves:15,environmentalImpact:{co2Saved:25,category:"transport"},reportCount:0,moderationStatus:"approved",createdAt:new Date("2024-01-10"),updatedAt:new Date("2024-01-10")},{title:"Cours particuliers Mathématiques",description:"Élève ingénieure à Polytechnique propose cours particuliers en mathématiques niveau lycée et prépa. Expérience de 2 ans, méthode personnalisée. Disponible soirs et week-ends.",price:25,currency:"EUR",category:"services",subcategory:"cours-particuliers",condition:"new",images:["https://images.pexels.com/photos/5212345/pexels-photo-5212345.jpeg?auto=compress&cs=tinysrgb&w=800"],tags:["mathématiques","cours","prépa","lycée","polytechnique"],location:{city:"Paris",state:"Île-de-France",country:"France",campus:"Campus de Palaiseau",university:"École Polytechnique",coordinates:{lat:48.7135,lng:2.207}},transactionType:"service",sellerId:"user3",sellerName:"Sophie Bernard",sellerAvatar:"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&dpr=2",sellerUniversity:"École Polytechnique",sellerVerified:!0,status:"active",views:34,likes:8,saves:12,reportCount:0,moderationStatus:"approved",createdAt:new Date("2024-01-08"),updatedAt:new Date("2024-01-08")},{title:"Échange : Notes de cours Droit contre Économie",description:"Je propose mes notes complètes de cours de Droit L2 (très bien organisées) contre des notes d'Économie du même niveau. Mes notes sont tapées et illustrées.",price:0,currency:"EUR",category:"books",subcategory:"notes-cours",condition:"like-new",images:["https://images.pexels.com/photos/4050315/pexels-photo-4050315.jpeg?auto=compress&cs=tinysrgb&w=800"],tags:["droit","économie","notes","L2","échange"],location:{city:"Paris",state:"Île-de-France",country:"France",campus:"Campus Dauphine",university:"Université Paris-Dauphine",coordinates:{lat:48.8698,lng:2.2734}},transactionType:"exchange",exchangeFor:"Notes de cours d'Économie L2",sellerId:"user2",sellerName:"Thomas Martin",sellerAvatar:"https://images.pexels.com/photos/1222271/pexels-photo-1222271.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&dpr=2",sellerUniversity:"Université Paris-Dauphine",sellerVerified:!0,status:"active",views:19,likes:5,saves:7,environmentalImpact:{co2Saved:3,category:"education"},reportCount:0,moderationStatus:"approved",createdAt:new Date("2024-01-05"),updatedAt:new Date("2024-01-05")},{title:"iPhone 12 - Excellent état",description:"iPhone 12 128GB Bleu, acheté il y a 1 an. Toujours eu une coque et verre trempé. Batterie à 89%. Vendu avec chargeur Lightning et coque.",price:420,currency:"EUR",category:"electronics",subcategory:"smartphones",condition:"good",images:["https://images.pexels.com/photos/788946/pexels-photo-788946.jpeg?auto=compress&cs=tinysrgb&w=800"],tags:["iphone","apple","smartphone","étudiant"],location:{city:"Paris",state:"Île-de-France",country:"France",campus:"Campus Pierre et Marie Curie",university:"Sorbonne Université",coordinates:{lat:48.8566,lng:2.3522}},transactionType:"sale",sellerId:"user1",sellerName:"Marie Dupont",sellerAvatar:"https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&dpr=2",sellerUniversity:"Sorbonne Université",sellerVerified:!0,status:"active",views:89,likes:24,saves:18,aiPriceEstimate:{min:400,max:450,confidence:.92},environmentalImpact:{co2Saved:12,category:"electronics"},reportCount:0,moderationStatus:"approved",createdAt:new Date("2024-01-03"),updatedAt:new Date("2024-01-03")},{title:"Meuble de rangement IKEA - Parfait pour chambre étudiante",description:"Étagère IKEA Kallax 2x2 cases, blanche, en parfait état. Idéale pour organiser une chambre étudiante. Facile à monter/démonter. Vendue car déménagement.",price:25,currency:"EUR",category:"furniture",subcategory:"rangement",condition:"like-new",images:["https://images.pexels.com/photos/1350789/pexels-photo-1350789.jpeg?auto=compress&cs=tinysrgb&w=800"],tags:["ikea","meuble","rangement","chambre","étudiant"],location:{city:"Paris",state:"Île-de-France",country:"France",campus:"Campus Dauphine",university:"Université Paris-Dauphine",coordinates:{lat:48.8698,lng:2.2734}},transactionType:"sale",sellerId:"user2",sellerName:"Thomas Martin",sellerAvatar:"https://images.pexels.com/photos/1222271/pexels-photo-1222271.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&dpr=2",sellerUniversity:"Université Paris-Dauphine",sellerVerified:!0,status:"active",views:42,likes:11,saves:9,environmentalImpact:{co2Saved:18,category:"furniture"},reportCount:0,moderationStatus:"approved",createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")},{title:"Calculatrice scientifique TI-82 - Don",description:"Calculatrice Texas Instruments TI-82 que je donne car j'ai fini mes études. Fonctionne parfaitement, quelques traces d'usure normales. Parfaite pour lycée/prépa.",price:0,currency:"EUR",category:"electronics",subcategory:"calculatrices",condition:"good",images:["https://images.pexels.com/photos/6238297/pexels-photo-6238297.jpeg?auto=compress&cs=tinysrgb&w=800"],tags:["calculatrice","TI-82","mathématiques","gratuit","lycée"],location:{city:"Palaiseau",state:"Île-de-France",country:"France",campus:"Campus de Palaiseau",university:"École Polytechnique",coordinates:{lat:48.7135,lng:2.207}},transactionType:"donation",sellerId:"user3",sellerName:"Sophie Bernard",sellerAvatar:"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&dpr=2",sellerUniversity:"École Polytechnique",sellerVerified:!0,status:"active",views:31,likes:14,saves:8,environmentalImpact:{co2Saved:5,category:"electronics"},reportCount:0,moderationStatus:"approved",createdAt:new Date("2023-12-28"),updatedAt:new Date("2023-12-28")}],KZ=async()=>{try{console.log("🚀 Début du peuplement de la base de données...");const t=[];for(let e=0;e<TE.length;e++){const n=TE[e],r=`user${e+1}`;await jc(tt(_e,"users",r),n),t.push(r),console.log(`✅ Utilisateur ${n.displayName} ajouté`)}for(let e=0;e<kE.length;e++){const n=kE[e],r=e%t.length,i={...n,sellerId:t[r]};await Ja(vt(_e,"listings"),i),console.log(`✅ Annonce "${n.title}" ajoutée`)}console.log("🎉 Base de données peuplée avec succès !"),ee.success("Données d'exemple ajoutées avec succès !"),window.location.reload()}catch(t){console.error("❌ Erreur lors du peuplement:",t),ee.error("Erreur lors de l'ajout des données d'exemple")}},YZ=()=>{const[t,e]=p.useState(!1),n=async()=>{if(window.confirm("Voulez-vous ajouter des données d'exemple à la base de données ? Cela ajoutera des utilisateurs et des annonces de test.")){e(!0);try{await KZ()}finally{e(!1)}}};return s.jsxs(B,{onClick:n,disabled:t,variant:"outline",className:"fixed bottom-4 right-4 z-50 bg-background border-2 border-primary/20 hover:border-primary/40 shadow-lg",children:[t?s.jsx(Yn,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(aW,{className:"w-4 h-4 mr-2"}),t?"Ajout en cours...":"Ajouter données test"]})};var Z4={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IE=me.createContext&&me.createContext(Z4),QZ=["attr","size","title"];function XZ(t,e){if(t==null)return{};var n=ZZ(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ZZ(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ig(){return ig=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ig.apply(this,arguments)}function PE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ag(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PE(Object(n),!0).forEach(function(r){JZ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function JZ(t,e,n){return e=eJ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eJ(t){var e=tJ(t,"string");return typeof e=="symbol"?e:e+""}function tJ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function J4(t){return t&&t.map((e,n)=>me.createElement(e.tag,ag({key:n},e.attr),J4(e.child)))}function xo(t){return e=>me.createElement(nJ,ig({attr:ag({},t.attr)},e),J4(t.child))}function nJ(t){var e=n=>{var{attr:r,size:i,title:a}=t,o=XZ(t,QZ),l=i||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),me.createElement("svg",ig({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:c,style:ag(ag({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&me.createElement("title",null,a),t.children)};return IE!==void 0?me.createElement(IE.Consumer,null,n=>e(n)):e(Z4)}function rJ(t){return xo({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M16 9.226l-8-6.21-8 6.21v-2.532l8-6.21 8 6.21zM14 9v6h-4v-4h-4v4h-4v-6l6-4.5z"},child:[]}]})(t)}function sJ(t){return xo({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M14 2v13h-10.5c-0.829 0-1.5-0.672-1.5-1.5s0.671-1.5 1.5-1.5h9.5v-12h-10c-1.1 0-2 0.9-2 2v12c0 1.1 0.9 2 2 2h12v-14h-1z"},child:[]},{tag:"path",attr:{d:"M3.501 13v0c-0 0-0.001 0-0.001 0-0.276 0-0.5 0.224-0.5 0.5s0.224 0.5 0.5 0.5c0 0 0.001-0 0.001-0v0h9.498v-1h-9.498z"},child:[]}]})(t)}function iJ(t){return xo({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0c-2.761 0-5 2.239-5 5 0 5 5 11 5 11s5-6 5-11c0-2.761-2.239-5-5-5zM8 8c-1.657 0-3-1.343-3-3s1.343-3 3-3 3 1.343 3 3-1.343 3-3 3z"},child:[]}]})(t)}function aJ(t){return xo({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M11.5 0h-7c-0.825 0-1.5 0.675-1.5 1.5v13c0 0.825 0.675 1.5 1.5 1.5h7c0.825 0 1.5-0.675 1.5-1.5v-13c0-0.825-0.675-1.5-1.5-1.5zM6 0.75h4v0.5h-4v-0.5zM8 15c-0.552 0-1-0.448-1-1s0.448-1 1-1 1 0.448 1 1-0.448 1-1 1zM12 12h-8v-10h8v10z"},child:[]}]})(t)}function oJ(t){return xo({tag:"svg",attr:{version:"1.1",viewBox:"0 0 18 16"},child:[{tag:"path",attr:{d:"M12 12.041v-0.825c1.102-0.621 2-2.168 2-3.716 0-2.485 0-4.5-3-4.5s-3 2.015-3 4.5c0 1.548 0.898 3.095 2 3.716v0.825c-3.392 0.277-6 1.944-6 3.959h14c0-2.015-2.608-3.682-6-3.959z"},child:[]},{tag:"path",attr:{d:"M5.112 12.427c0.864-0.565 1.939-0.994 3.122-1.256-0.235-0.278-0.449-0.588-0.633-0.922-0.475-0.863-0.726-1.813-0.726-2.748 0-1.344 0-2.614 0.478-3.653 0.464-1.008 1.299-1.633 2.488-1.867-0.264-1.195-0.968-1.98-2.841-1.98-3 0-3 2.015-3 4.5 0 1.548 0.898 3.095 2 3.716v0.825c-3.392 0.277-6 1.944-6 3.959h4.359c0.227-0.202 0.478-0.393 0.753-0.573z"},child:[]}]})(t)}function lJ(t){return xo({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5 3c0-1.657 1.343-3 3-3s3 1.343 3 3c0 1.657-1.343 3-3 3s-3-1.343-3-3zM12.001 7h-0.553l-3.111 6.316 1.163-5.816-1.5-1.5-1.5 1.5 1.163 5.816-3.111-6.316h-0.554c-1.999 0-1.999 1.344-1.999 3v5h12v-5c0-1.656 0-3-1.999-3z"},child:[]}]})(t)}function cJ(t){return xo({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0c-4.355 0-7.898 3.481-7.998 7.812 0.092-3.779 2.966-6.812 6.498-6.812 3.59 0 6.5 3.134 6.5 7 0 0.828 0.672 1.5 1.5 1.5s1.5-0.672 1.5-1.5c0-4.418-3.582-8-8-8zM8 16c4.355 0 7.898-3.481 7.998-7.812-0.092 3.779-2.966 6.812-6.498 6.812-3.59 0-6.5-3.134-6.5-7 0-0.828-0.672-1.5-1.5-1.5s-1.5 0.672-1.5 1.5c0 4.418 3.582 8 8 8z"},child:[]}]})(t)}function uJ(t){return xo({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M12.055 5c0.283-0.201 0.555-0.425 0.804-0.674 0.522-0.522 0.871-1.164 0.983-1.808 0.123-0.706-0.057-1.362-0.494-1.798-0.348-0.348-0.82-0.533-1.365-0.533-0.775 0-1.593 0.372-2.242 1.021-1.039 1.039-1.644 2.472-1.97 3.496-0.241-1.028-0.722-2.416-1.657-3.351-0.501-0.501-1.142-0.759-1.748-0.759-0.495 0-0.965 0.172-1.317 0.523-0.781 0.781-0.675 2.153 0.236 3.064 0.325 0.325 0.705 0.595 1.105 0.819h-3.391v4h1v7h12v-7h1v-4h-2.945zM10.536 2.003c0.433-0.433 0.974-0.692 1.446-0.692 0.167 0 0.402 0.035 0.57 0.203 0.407 0.407 0.178 1.349-0.489 2.016-0.687 0.687-1.61 1.159-2.413 1.47h-0.792c0.29-0.899 0.813-2.132 1.678-2.997zM3.655 2.514c-0.011-0.143-0.001-0.41 0.191-0.601 0.16-0.16 0.372-0.194 0.521-0.194v0c0.332 0 0.679 0.157 0.952 0.429 0.529 0.529 0.965 1.371 1.26 2.436 0.008 0.029 0.016 0.057 0.023 0.086-0.028-0.008-0.057-0.015-0.086-0.023-1.064-0.295-1.906-0.731-2.436-1.26-0.247-0.247-0.403-0.565-0.426-0.872zM7 15h-4v-6.5h4v6.5zM7 8h-5v-2h5v2zM13 15h-4v-6.5h4v6.5zM14 8h-5v-2h5v2z"},child:[]}]})(t)}const dJ=()=>{const[t,e]=p.useState(""),n=En(),r=i=>{i.preventDefault(),t.trim()&&n(`/listings?q=${encodeURIComponent(t.trim())}`)};return s.jsxs("form",{onSubmit:r,className:"flex items-center w-full max-w-2xl mx-auto rounded-full border-2 border-primary/40 bg-white shadow-sm focus-within:ring-2 focus-within:ring-primary/30 transition px-1 sm:px-1",role:"search","aria-label":"Recherche",children:[s.jsx("span",{className:"pl-0 sm:pl-4 text-gray-400",children:s.jsx(Dn,{className:"w-5 h-5"})}),s.jsx("input",{type:"text",className:"flex-1 bg-transparent outline-none border-0 px-2 sm:px-4 py-2 sm:py-3 text-base rounded-l-full min-w-0",placeholder:"Rechercher parmi les étudiants de votre région...",value:t,onChange:i=>e(i.target.value),"aria-label":"Rechercher"}),s.jsx("button",{type:"submit",className:"rounded-full bg-gradient-to-r from-primary to-secondary text-white font-semibold px-3 sm:px-6 py-2 m-1 transition hover:from-primary/90 hover:to-secondary/90 focus:outline-none whitespace-nowrap text-sm sm:text-base",children:"Rechercher"})]})},hJ={electronics:"/StudyMarket/assets/Icon/Gradient/electronic.svg",books:"/StudyMarket/assets/Icon/Gradient/livre.svg",furniture:"/StudyMarket/assets/Icon/Gradient/mobilier.svg",housing:"/StudyMarket/assets/Icon/Gradient/logement.svg",services:"/StudyMarket/assets/Icon/Gradient/services.svg",jobs:"/StudyMarket/assets/Icon/Gradient/job.svg",donations:"/StudyMarket/assets/Icon/Gradient/don.svg",exchange:"/StudyMarket/assets/Icon/Gradient/troc.svg"},fJ=()=>s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/launch.svg",alt:"Trending Up",className:"w-50 h-50"}),mJ=()=>s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/handshake.svg",alt:"Trending Up",className:"w-50 h-50"}),pJ=()=>s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/refresh.svg",alt:"Trending Up",className:"w-50 h-50"}),gJ=()=>s.jsx("img",{src:"/StudyMarket/assets/Icon/Bleu/chat.svg",alt:"Trending Up",className:"w-50 h-50"}),vJ=[{id:"electronics",name:"Électronique",icon:aJ,color:"text-blue-600",description:"Ordinateurs, téléphones, accessoires tech"},{id:"books",name:"Livres & Cours",icon:sJ,color:"text-blue-600",description:"Manuels, livres, notes de cours"},{id:"furniture",name:"Mobilier",icon:rJ,color:"text-blue-600",description:"Meubles, déco, électroménager"},{id:"housing",name:"Logement",icon:iJ,color:"text-blue-600",description:"Colocations, studios, chambres"},{id:"services",name:"Services",icon:oJ,color:"text-blue-600",description:"Cours particuliers, aide, babysitting"},{id:"jobs",name:"Jobs & Stages",icon:lJ,color:"text-blue-600",description:"Petits boulots, stages, missions"},{id:"donations",name:"Dons",icon:uJ,color:"text-blue-600",description:"Objets gratuits, entraide"},{id:"exchange",name:"Troc",icon:cJ,color:"text-blue-600",description:"Échanges de services et objets"}],xJ=[{icon:ft,title:"Étudiants vérifiés uniquement",description:'Chaque membre est vérifié avec son adresse universitaire. Badge "Étudiant certifié" sur tous les profils.'},{icon:gJ,title:"Chat sécurisé intégré",description:"Messagerie avec proposition de rendez-vous, points de rencontre campus et protection des données."},{icon:Ns,title:"Impact écologique mesuré",description:"Suivez votre impact environnemental : CO₂ économisé, ressources préservées grâce à vos achats d'occasion."},{icon:SA,title:"Avis publics et réputation",description:"Système de notation transparent. Consultez les avis avant chaque transaction pour échanger en confiance."}],yJ=[{title:"Vendre rapidement",description:"Publiez votre annonce en moins d'une minute",icon:fJ,link:"/create",color:"border-2 border-green-500 text-green-500"},{title:"Donner gratuitement",description:"Offrez ce dont vous n'avez plus besoin",icon:mJ,link:"/create?type=donation",color:"border-2 border-green-500 text-green-500"},{title:"Proposer un troc",description:"Échangez services et objets sans argent",icon:pJ,link:"/create?type=exchange",color:"border-2 border-green-500 text-green-500"}],wJ=()=>{const{featuredListings:t,fetchFeaturedListings:e}=pf();return p.useEffect(()=>{e()},[e]),s.jsxs("div",{className:"min-h-screen w-full overflow-x-hidden",children:[s.jsx("section",{className:"relative bg-gradient-to-br from-primary/10 via-background to-secondary/10 py-8 sm:py-16 px-4",children:s.jsxs("div",{className:"container mx-auto text-center max-w-4xl",children:[s.jsx("div",{className:"flex items-center justify-center mb-4 sm:mb-6",children:s.jsxs(Ae,{className:"bg-green-100 text-green-800 border-green-200 px-3 py-1.5 sm:px-4 sm:py-2",children:[s.jsx(ft,{className:"w-4 h-4 mr-2"}),"Communauté 100% étudiants vérifiés"]})}),s.jsx("h1",{className:"text-2xl sm:text-4xl md:text-5xl font-bold mb-4 sm:mb-6 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"La marketplace des étudiants"}),s.jsx("p",{className:"text-base sm:text-lg text-muted-foreground mb-6 sm:mb-8 max-w-2xl mx-auto",children:"Achetez, vendez, donnez et échangez entre étudiants certifiés de votre région. Sécurisé, écologique et pensé pour la vie étudiante."}),s.jsx("div",{className:"mb-6 sm:mb-8 px-4",children:s.jsx(dJ,{})}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-6 sm:mb-8",children:yJ.map((n,r)=>s.jsx(fe,{to:n.link,className:"group",children:s.jsx(K,{className:"border-2 hover:border-primary/20 transition-all duration-300 hover:shadow-lg hover:-translate-y-1",children:s.jsxs(Y,{className:"p-4 text-center",children:[s.jsx("div",{className:`w-12 h-12 ${n.color} rounded-full flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform`,children:s.jsx(n.icon,{})}),s.jsx("h3",{className:"font-semibold mb-1",children:n.title}),s.jsx("p",{className:"text-sm text-muted-foreground",children:n.description})]})})},r))}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[s.jsx(B,{size:"lg",asChild:!0,className:"bg-gradient-to-r from-primary to-secondary w-full sm:w-auto",children:s.jsxs(fe,{to:"/listings",children:["Parcourir les annonces",s.jsx(hh,{className:"w-4 h-4 ml-2"})]})}),s.jsx(B,{size:"lg",variant:"outline",asChild:!0,className:"w-full sm:w-auto",children:s.jsx(fe,{to:"/auth",children:"Rejoindre la communauté"})})]})]})}),s.jsx("section",{className:"py-10 sm:py-16 px-4",children:s.jsxs("div",{className:"container mx-auto",children:[s.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-center mb-3 sm:mb-4",children:"Catégories étudiantes"}),s.jsx("p",{className:"text-center text-muted-foreground mb-8 sm:mb-12 max-w-2xl mx-auto text-sm sm:text-base",children:"Des catégories pensées spécifiquement pour la vie étudiante, avec des filtres adaptés à vos besoins"}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:vJ.map(n=>s.jsx(fe,{to:`/listings?category=${n.id}`,className:"group",children:s.jsx(K,{className:"h-full transition-all duration-300 hover:shadow-lg hover:-translate-y-1 border-2 hover:border-primary/20",children:s.jsxs(Y,{className:"p-4 text-center",children:[s.jsx("img",{src:hJ[n.id],alt:n.name,className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-3"}),s.jsx("h3",{className:"font-semibold text-sm mb-1",children:n.name}),s.jsx("p",{className:"text-xs text-muted-foreground",children:n.description})]})})},n.id))})]})}),t.length>0&&s.jsx("section",{className:"py-16 px-4 bg-muted/30",children:s.jsxs("div",{className:"container mx-auto",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-8 sm:mb-12 gap-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-2",children:"Annonces récentes"}),s.jsx("p",{className:"text-muted-foreground",children:"Les dernières offres de la communauté étudiante"})]}),s.jsx(B,{variant:"outline",asChild:!0,children:s.jsxs(fe,{to:"/listings",children:["Voir tout",s.jsx(hh,{className:"w-4 h-4 ml-2"})]})})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.slice(0,6).map(n=>s.jsx(yh,{listing:n},n.id))})]})}),s.jsx("section",{className:"py-16 px-4",children:s.jsxs("div",{className:"container mx-auto",children:[s.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-center mb-4",children:"Pourquoi StudyMarket ?"}),s.jsx("p",{className:"text-center text-muted-foreground mb-12 max-w-2xl mx-auto",children:"Une plateforme pensée par et pour les étudiants, avec des fonctionnalités uniques pour votre sécurité et votre tranquillité d'esprit"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:xJ.map((n,r)=>s.jsx(K,{className:"border-0 shadow-none",children:s.jsx(Y,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0",children:s.jsx(n.icon,{className:"w-5 h-5 sm:w-6 sm:h-6 text-primary"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-2",children:n.title}),s.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:n.description})]})]})})},r))})]})}),s.jsx("section",{className:"py-16 px-4 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-950/20 dark:to-emerald-950/20",children:s.jsx("div",{className:"container mx-auto text-center",children:s.jsxs("div",{className:"max-w-3xl mx-auto",children:[s.jsx(Ns,{className:"w-12 h-12 sm:w-16 sm:h-16 text-green-600 mx-auto mb-6"}),s.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-4",children:"Votre impact écologique compte"}),s.jsx("p",{className:"text-base sm:text-xl text-muted-foreground mb-8",children:"Chaque achat d'occasion évite la production d'un objet neuf. Suivez votre impact environnemental et découvrez combien de CO₂ vous économisez grâce à vos échanges étudiants."}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6 mb-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-green-600 mb-2",children:"2.5T"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"CO₂ économisé par la communauté"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-green-600 mb-2",children:"15K"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Objets donnés cette année"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-green-600 mb-2",children:"8K"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Étudiants engagés"})]})]}),s.jsx(B,{size:"lg",variant:"outline",className:"border-green-600 text-green-600 hover:bg-green-600 hover:text-white",children:s.jsx(fe,{to:"/impact",className:"cursor-pointer",children:"Découvrir mon impact"})})]})})}),s.jsx("section",{className:"py-16 px-4 bg-gradient-to-r from-primary to-secondary",children:s.jsxs("div",{className:"container mx-auto text-center",children:[s.jsx(pu,{className:"w-12 h-12 sm:w-16 sm:h-16 text-white mx-auto mb-6"}),s.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-4",children:"Rejoignez la communauté étudiante"}),s.jsx("p",{className:"text-base sm:text-xl text-white/90 mb-8 max-w-2xl mx-auto",children:"Plus de 10 000 étudiants font déjà confiance à StudyMarket pour leurs achats, ventes et échanges. Rejoignez une communauté sûre, vérifiée et solidaire."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsx(B,{size:"lg",variant:"secondary",asChild:!0,children:s.jsxs(fe,{to:"/auth",children:[s.jsx(ft,{className:"w-4 h-4 mr-2"}),"Inscription vérifiée"]})}),s.jsx(B,{size:"lg",variant:"outline",className:"border-white text-white bg-transparent hover:bg-white hover:text-primary",asChild:!0,children:s.jsx(fe,{to:"/listings",children:"Commencer à explorer"})})]})]})}),s.jsx(YZ,{})]})};function wh(t,[e,n]){return Math.min(n,Math.max(e,t))}function Ov(t){const e=p.useRef({value:t,previous:t});return p.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var bJ="VisuallyHidden",eM=p.forwardRef((t,e)=>s.jsx(Se.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));eM.displayName=bJ;var jJ=[" ","Enter","ArrowUp","ArrowDown"],_J=[" ","Enter"],gf="Select",[Lv,Vv,NJ]=of(gf),[Eu,Kae]=Hr(gf,[NJ,bu]),Fv=bu(),[SJ,yo]=Eu(gf),[EJ,CJ]=Eu(gf),tM=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:a,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:f,disabled:m,required:v,form:y}=t,w=Fv(e),[b,x]=p.useState(null),[g,_]=p.useState(null),[E,S]=p.useState(!1),O=Tl(u),[I=!1,k]=Br({prop:r,defaultProp:i,onChange:a}),[R,N]=Br({prop:o,defaultProp:l,onChange:c}),P=p.useRef(null),A=b?y||!!b.closest("form"):!0,[T,U]=p.useState(new Set),H=Array.from(T).map(z=>z.props.value).join(";");return s.jsx(rj,{...w,children:s.jsxs(SJ,{required:v,scope:e,trigger:b,onTriggerChange:x,valueNode:g,onValueNodeChange:_,valueNodeHasChildren:E,onValueNodeHasChildrenChange:S,contentId:Fr(),value:R,onValueChange:N,open:I,onOpenChange:k,dir:O,triggerPointerDownPosRef:P,disabled:m,children:[s.jsx(Lv.Provider,{scope:e,children:s.jsx(EJ,{scope:t.__scopeSelect,onNativeOptionAdd:p.useCallback(z=>{U(V=>new Set(V).add(z))},[]),onNativeOptionRemove:p.useCallback(z=>{U(V=>{const M=new Set(V);return M.delete(z),M})},[]),children:n})}),A?s.jsxs(EM,{"aria-hidden":!0,required:v,tabIndex:-1,name:d,autoComplete:f,value:R,onChange:z=>N(z.target.value),disabled:m,form:y,children:[R===void 0?s.jsx("option",{value:""}):null,Array.from(T)]},H):null]})})};tM.displayName=gf;var nM="SelectTrigger",rM=p.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,a=Fv(n),o=yo(nM,n),l=o.disabled||r,c=We(e,o.onTriggerChange),u=Vv(n),d=p.useRef("touch"),[f,m,v]=CM(w=>{const b=u().filter(_=>!_.disabled),x=b.find(_=>_.value===o.value),g=TM(b,w,x);g!==void 0&&o.onValueChange(g.value)}),y=w=>{l||(o.onOpenChange(!0),v()),w&&(o.triggerPointerDownPosRef.current={x:Math.round(w.pageX),y:Math.round(w.pageY)})};return s.jsx(Ev,{asChild:!0,...a,children:s.jsx(Se.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":SM(o.value)?"":void 0,...i,ref:c,onClick:le(i.onClick,w=>{w.currentTarget.focus(),d.current!=="mouse"&&y(w)}),onPointerDown:le(i.onPointerDown,w=>{d.current=w.pointerType;const b=w.target;b.hasPointerCapture(w.pointerId)&&b.releasePointerCapture(w.pointerId),w.button===0&&w.ctrlKey===!1&&w.pointerType==="mouse"&&(y(w),w.preventDefault())}),onKeyDown:le(i.onKeyDown,w=>{const b=f.current!=="";!(w.ctrlKey||w.altKey||w.metaKey)&&w.key.length===1&&m(w.key),!(b&&w.key===" ")&&jJ.includes(w.key)&&(y(),w.preventDefault())})})})});rM.displayName=nM;var sM="SelectValue",iM=p.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:a,placeholder:o="",...l}=t,c=yo(sM,n),{onValueNodeHasChildrenChange:u}=c,d=a!==void 0,f=We(e,c.onValueNodeChange);return Sn(()=>{u(d)},[u,d]),s.jsx(Se.span,{...l,ref:f,style:{pointerEvents:"none"},children:SM(c.value)?s.jsx(s.Fragment,{children:o}):a})});iM.displayName=sM;var TJ="SelectIcon",aM=p.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return s.jsx(Se.span,{"aria-hidden":!0,...i,ref:e,children:r||"▼"})});aM.displayName=TJ;var kJ="SelectPortal",oM=t=>s.jsx(df,{asChild:!0,...t});oM.displayName=kJ;var pl="SelectContent",lM=p.forwardRef((t,e)=>{const n=yo(pl,t.__scopeSelect),[r,i]=p.useState();if(Sn(()=>{i(new DocumentFragment)},[]),!n.open){const a=r;return a?cu.createPortal(s.jsx(cM,{scope:t.__scopeSelect,children:s.jsx(Lv.Slot,{scope:t.__scopeSelect,children:s.jsx("div",{children:t.children})})}),a):null}return s.jsx(uM,{...t,ref:e})});lM.displayName=pl;var fs=10,[cM,wo]=Eu(pl),IJ="SelectContentImpl",uM=p.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:m,collisionPadding:v,sticky:y,hideWhenDetached:w,avoidCollisions:b,...x}=t,g=yo(pl,n),[_,E]=p.useState(null),[S,O]=p.useState(null),I=We(e,ve=>E(ve)),[k,R]=p.useState(null),[N,P]=p.useState(null),A=Vv(n),[T,U]=p.useState(!1),H=p.useRef(!1);p.useEffect(()=>{if(_)return kv(_)},[_]),bv();const z=p.useCallback(ve=>{const[Qe,...X]=A().map(Le=>Le.ref.current),[de]=X.slice(-1),ke=document.activeElement;for(const Le of ve)if(Le===ke||(Le==null||Le.scrollIntoView({block:"nearest"}),Le===Qe&&S&&(S.scrollTop=0),Le===de&&S&&(S.scrollTop=S.scrollHeight),Le==null||Le.focus(),document.activeElement!==ke))return},[A,S]),V=p.useCallback(()=>z([k,_]),[z,k,_]);p.useEffect(()=>{T&&V()},[T,V]);const{onOpenChange:M,triggerPointerDownPosRef:$}=g;p.useEffect(()=>{if(_){let ve={x:0,y:0};const Qe=de=>{var ke,Le;ve={x:Math.abs(Math.round(de.pageX)-(((ke=$.current)==null?void 0:ke.x)??0)),y:Math.abs(Math.round(de.pageY)-(((Le=$.current)==null?void 0:Le.y)??0))}},X=de=>{ve.x<=10&&ve.y<=10?de.preventDefault():_.contains(de.target)||M(!1),document.removeEventListener("pointermove",Qe),$.current=null};return $.current!==null&&(document.addEventListener("pointermove",Qe),document.addEventListener("pointerup",X,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Qe),document.removeEventListener("pointerup",X,{capture:!0})}}},[_,M,$]),p.useEffect(()=>{const ve=()=>M(!1);return window.addEventListener("blur",ve),window.addEventListener("resize",ve),()=>{window.removeEventListener("blur",ve),window.removeEventListener("resize",ve)}},[M]);const[L,W]=CM(ve=>{const Qe=A().filter(ke=>!ke.disabled),X=Qe.find(ke=>ke.ref.current===document.activeElement),de=TM(Qe,ve,X);de&&setTimeout(()=>de.ref.current.focus())}),ne=p.useCallback((ve,Qe,X)=>{const de=!H.current&&!X;(g.value!==void 0&&g.value===Qe||de)&&(R(ve),de&&(H.current=!0))},[g.value]),ye=p.useCallback(()=>_==null?void 0:_.focus(),[_]),Xe=p.useCallback((ve,Qe,X)=>{const de=!H.current&&!X;(g.value!==void 0&&g.value===Qe||de)&&P(ve)},[g.value]),xt=r==="popper"?gw:dM,ut=xt===gw?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:m,collisionPadding:v,sticky:y,hideWhenDetached:w,avoidCollisions:b}:{};return s.jsx(cM,{scope:n,content:_,viewport:S,onViewportChange:O,itemRefCallback:ne,selectedItem:k,onItemLeave:ye,itemTextRefCallback:Xe,focusSelectedItem:V,selectedItemText:N,position:r,isPositioned:T,searchRef:L,children:s.jsx(hf,{as:Gi,allowPinchZoom:!0,children:s.jsx(cf,{asChild:!0,trapped:g.open,onMountAutoFocus:ve=>{ve.preventDefault()},onUnmountAutoFocus:le(i,ve=>{var Qe;(Qe=g.trigger)==null||Qe.focus({preventScroll:!0}),ve.preventDefault()}),children:s.jsx(lf,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:ve=>ve.preventDefault(),onDismiss:()=>g.onOpenChange(!1),children:s.jsx(xt,{role:"listbox",id:g.contentId,"data-state":g.open?"open":"closed",dir:g.dir,onContextMenu:ve=>ve.preventDefault(),...x,...ut,onPlaced:()=>U(!0),ref:I,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:le(x.onKeyDown,ve=>{const Qe=ve.ctrlKey||ve.altKey||ve.metaKey;if(ve.key==="Tab"&&ve.preventDefault(),!Qe&&ve.key.length===1&&W(ve.key),["ArrowUp","ArrowDown","Home","End"].includes(ve.key)){let de=A().filter(ke=>!ke.disabled).map(ke=>ke.ref.current);if(["ArrowUp","End"].includes(ve.key)&&(de=de.slice().reverse()),["ArrowUp","ArrowDown"].includes(ve.key)){const ke=ve.target,Le=de.indexOf(ke);de=de.slice(Le+1)}setTimeout(()=>z(de)),ve.preventDefault()}})})})})})})});uM.displayName=IJ;var PJ="SelectItemAlignedPosition",dM=p.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,a=yo(pl,n),o=wo(pl,n),[l,c]=p.useState(null),[u,d]=p.useState(null),f=We(e,I=>d(I)),m=Vv(n),v=p.useRef(!1),y=p.useRef(!0),{viewport:w,selectedItem:b,selectedItemText:x,focusSelectedItem:g}=o,_=p.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&u&&w&&b&&x){const I=a.trigger.getBoundingClientRect(),k=u.getBoundingClientRect(),R=a.valueNode.getBoundingClientRect(),N=x.getBoundingClientRect();if(a.dir!=="rtl"){const ke=N.left-k.left,Le=R.left-ke,He=I.left-Le,Tt=I.width+He,Gr=Math.max(Tt,k.width),vi=window.innerWidth-fs,aa=wh(Le,[fs,Math.max(fs,vi-Gr)]);l.style.minWidth=Tt+"px",l.style.left=aa+"px"}else{const ke=k.right-N.right,Le=window.innerWidth-R.right-ke,He=window.innerWidth-I.right-Le,Tt=I.width+He,Gr=Math.max(Tt,k.width),vi=window.innerWidth-fs,aa=wh(Le,[fs,Math.max(fs,vi-Gr)]);l.style.minWidth=Tt+"px",l.style.right=aa+"px"}const P=m(),A=window.innerHeight-fs*2,T=w.scrollHeight,U=window.getComputedStyle(u),H=parseInt(U.borderTopWidth,10),z=parseInt(U.paddingTop,10),V=parseInt(U.borderBottomWidth,10),M=parseInt(U.paddingBottom,10),$=H+z+T+M+V,L=Math.min(b.offsetHeight*5,$),W=window.getComputedStyle(w),ne=parseInt(W.paddingTop,10),ye=parseInt(W.paddingBottom,10),Xe=I.top+I.height/2-fs,xt=A-Xe,ut=b.offsetHeight/2,ve=b.offsetTop+ut,Qe=H+z+ve,X=$-Qe;if(Qe<=Xe){const ke=P.length>0&&b===P[P.length-1].ref.current;l.style.bottom="0px";const Le=u.clientHeight-w.offsetTop-w.offsetHeight,He=Math.max(xt,ut+(ke?ye:0)+Le+V),Tt=Qe+He;l.style.height=Tt+"px"}else{const ke=P.length>0&&b===P[0].ref.current;l.style.top="0px";const He=Math.max(Xe,H+w.offsetTop+(ke?ne:0)+ut)+X;l.style.height=He+"px",w.scrollTop=Qe-Xe+w.offsetTop}l.style.margin=`${fs}px 0`,l.style.minHeight=L+"px",l.style.maxHeight=A+"px",r==null||r(),requestAnimationFrame(()=>v.current=!0)}},[m,a.trigger,a.valueNode,l,u,w,b,x,a.dir,r]);Sn(()=>_(),[_]);const[E,S]=p.useState();Sn(()=>{u&&S(window.getComputedStyle(u).zIndex)},[u]);const O=p.useCallback(I=>{I&&y.current===!0&&(_(),g==null||g(),y.current=!1)},[_,g]);return s.jsx(RJ,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:v,onScrollButtonChange:O,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:E},children:s.jsx(Se.div,{...i,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});dM.displayName=PJ;var AJ="SelectPopperPosition",gw=p.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=fs,...a}=t,o=Fv(n);return s.jsx(sj,{...o,...a,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});gw.displayName=AJ;var[RJ,bj]=Eu(pl,{}),vw="SelectViewport",hM=p.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,a=wo(vw,n),o=bj(vw,n),l=We(e,a.onViewportChange),c=p.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),s.jsx(Lv.Slot,{scope:n,children:s.jsx(Se.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:le(i.onScroll,u=>{const d=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&f){const v=Math.abs(c.current-d.scrollTop);if(v>0){const y=window.innerHeight-fs*2,w=parseFloat(f.style.minHeight),b=parseFloat(f.style.height),x=Math.max(w,b);if(x<y){const g=x+v,_=Math.min(y,g),E=g-_;f.style.height=_+"px",f.style.bottom==="0px"&&(d.scrollTop=E>0?E:0,f.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});hM.displayName=vw;var fM="SelectGroup",[MJ,DJ]=Eu(fM),OJ=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Fr();return s.jsx(MJ,{scope:n,id:i,children:s.jsx(Se.div,{role:"group","aria-labelledby":i,...r,ref:e})})});OJ.displayName=fM;var mM="SelectLabel",pM=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=DJ(mM,n);return s.jsx(Se.div,{id:i.id,...r,ref:e})});pM.displayName=mM;var og="SelectItem",[LJ,gM]=Eu(og),vM=p.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:a,...o}=t,l=yo(og,n),c=wo(og,n),u=l.value===r,[d,f]=p.useState(a??""),[m,v]=p.useState(!1),y=We(e,g=>{var _;return(_=c.itemRefCallback)==null?void 0:_.call(c,g,r,i)}),w=Fr(),b=p.useRef("touch"),x=()=>{i||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(LJ,{scope:n,value:r,disabled:i,textId:w,isSelected:u,onItemTextChange:p.useCallback(g=>{f(_=>_||((g==null?void 0:g.textContent)??"").trim())},[]),children:s.jsx(Lv.ItemSlot,{scope:n,value:r,disabled:i,textValue:d,children:s.jsx(Se.div,{role:"option","aria-labelledby":w,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:y,onFocus:le(o.onFocus,()=>v(!0)),onBlur:le(o.onBlur,()=>v(!1)),onClick:le(o.onClick,()=>{b.current!=="mouse"&&x()}),onPointerUp:le(o.onPointerUp,()=>{b.current==="mouse"&&x()}),onPointerDown:le(o.onPointerDown,g=>{b.current=g.pointerType}),onPointerMove:le(o.onPointerMove,g=>{var _;b.current=g.pointerType,i?(_=c.onItemLeave)==null||_.call(c):b.current==="mouse"&&g.currentTarget.focus({preventScroll:!0})}),onPointerLeave:le(o.onPointerLeave,g=>{var _;g.currentTarget===document.activeElement&&((_=c.onItemLeave)==null||_.call(c))}),onKeyDown:le(o.onKeyDown,g=>{var E;((E=c.searchRef)==null?void 0:E.current)!==""&&g.key===" "||(_J.includes(g.key)&&x(),g.key===" "&&g.preventDefault())})})})})});vM.displayName=og;var pd="SelectItemText",xM=p.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...a}=t,o=yo(pd,n),l=wo(pd,n),c=gM(pd,n),u=CJ(pd,n),[d,f]=p.useState(null),m=We(e,x=>f(x),c.onItemTextChange,x=>{var g;return(g=l.itemTextRefCallback)==null?void 0:g.call(l,x,c.value,c.disabled)}),v=d==null?void 0:d.textContent,y=p.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:v},c.value),[c.disabled,c.value,v]),{onNativeOptionAdd:w,onNativeOptionRemove:b}=u;return Sn(()=>(w(y),()=>b(y)),[w,b,y]),s.jsxs(s.Fragment,{children:[s.jsx(Se.span,{id:c.textId,...a,ref:m}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?cu.createPortal(a.children,o.valueNode):null]})});xM.displayName=pd;var yM="SelectItemIndicator",wM=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return gM(yM,n).isSelected?s.jsx(Se.span,{"aria-hidden":!0,...r,ref:e}):null});wM.displayName=yM;var xw="SelectScrollUpButton",bM=p.forwardRef((t,e)=>{const n=wo(xw,t.__scopeSelect),r=bj(xw,t.__scopeSelect),[i,a]=p.useState(!1),o=We(e,r.onScrollButtonChange);return Sn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;a(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?s.jsx(_M,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});bM.displayName=xw;var yw="SelectScrollDownButton",jM=p.forwardRef((t,e)=>{const n=wo(yw,t.__scopeSelect),r=bj(yw,t.__scopeSelect),[i,a]=p.useState(!1),o=We(e,r.onScrollButtonChange);return Sn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;a(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?s.jsx(_M,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});jM.displayName=yw;var _M=p.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,a=wo("SelectScrollButton",n),o=p.useRef(null),l=Vv(n),c=p.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return p.useEffect(()=>()=>c(),[c]),Sn(()=>{var d;const u=l().find(f=>f.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),s.jsx(Se.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:le(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:le(i.onPointerMove,()=>{var u;(u=a.onItemLeave)==null||u.call(a),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:le(i.onPointerLeave,()=>{c()})})}),VJ="SelectSeparator",NM=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return s.jsx(Se.div,{"aria-hidden":!0,...r,ref:e})});NM.displayName=VJ;var ww="SelectArrow",FJ=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Fv(n),a=yo(ww,n),o=wo(ww,n);return a.open&&o.position==="popper"?s.jsx(ij,{...i,...r,ref:e}):null});FJ.displayName=ww;function SM(t){return t===""||t===void 0}var EM=p.forwardRef((t,e)=>{const{value:n,...r}=t,i=p.useRef(null),a=We(e,i),o=Ov(n);return p.useEffect(()=>{const l=i.current,c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==n&&d){const f=new Event("change",{bubbles:!0});d.call(l,n),l.dispatchEvent(f)}},[o,n]),s.jsx(eM,{asChild:!0,children:s.jsx("select",{...r,ref:a,defaultValue:n})})});EM.displayName="BubbleSelect";function CM(t){const e=mn(t),n=p.useRef(""),r=p.useRef(0),i=p.useCallback(o=>{const l=n.current+o;e(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),a=p.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,a]}function TM(t,e,n){const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let o=UJ(t,Math.max(a,0));i.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function UJ(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var $J=tM,kM=rM,zJ=iM,BJ=aM,qJ=oM,IM=lM,WJ=hM,PM=pM,AM=vM,HJ=xM,GJ=wM,RM=bM,MM=jM,DM=NM;const Et=$J,Ct=zJ,wt=p.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(kM,{ref:r,className:Pe("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,s.jsx(BJ,{asChild:!0,children:s.jsx(eQ,{className:"h-4 w-4 opacity-50"})})]}));wt.displayName=kM.displayName;const OM=p.forwardRef(({className:t,...e},n)=>s.jsx(RM,{ref:n,className:Pe("flex cursor-default items-center justify-center py-1",t),...e,children:s.jsx(oQ,{})}));OM.displayName=RM.displayName;const LM=p.forwardRef(({className:t,...e},n)=>s.jsx(MM,{ref:n,className:Pe("flex cursor-default items-center justify-center py-1",t),...e,children:s.jsx(_4,{})}));LM.displayName=MM.displayName;const bt=p.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>s.jsx(qJ,{children:s.jsxs(IM,{ref:i,className:Pe("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[s.jsx(OM,{}),s.jsx(WJ,{className:Pe("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),s.jsx(LM,{})]})}));bt.displayName=IM.displayName;const KJ=p.forwardRef(({className:t,...e},n)=>s.jsx(PM,{ref:n,className:Pe("px-2 py-1.5 text-sm font-semibold",t),...e}));KJ.displayName=PM.displayName;const be=p.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(AM,{ref:r,className:Pe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[s.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(GJ,{children:s.jsx(mj,{className:"h-4 w-4"})})}),s.jsx(HJ,{children:e})]}));be.displayName=AM.displayName;const YJ=p.forwardRef(({className:t,...e},n)=>s.jsx(DM,{ref:n,className:Pe("-mx-1 my-1 h-px bg-muted",t),...e}));YJ.displayName=DM.displayName;var QJ="Separator",AE="horizontal",XJ=["horizontal","vertical"],VM=p.forwardRef((t,e)=>{const{decorative:n,orientation:r=AE,...i}=t,a=ZJ(r)?r:AE,l=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return s.jsx(Se.div,{"data-orientation":a,...l,...i,ref:e})});VM.displayName=QJ;function ZJ(t){return XJ.includes(t)}var FM=VM;const Zr=p.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},i)=>s.jsx(FM,{ref:i,decorative:n,orientation:e,className:Pe("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));Zr.displayName=FM.displayName;const xy=[{value:"all",label:"Toutes catégories",icon:null},{value:"electronics",label:"Électronique",icon:Cl},{value:"vehicles",label:"Véhicules",icon:IA},{value:"real-estate",label:"Immobilier",icon:Qp},{value:"fashion",label:"Mode",icon:Gb},{value:"gaming",label:"Jeux & Jouets",icon:hW},{value:"baby",label:"Bébé & Enfant",icon:Jq},{value:"business",label:"Équipement Pro",icon:kA}],JJ=[{value:"new",label:"Neuf"},{value:"like-new",label:"Comme neuf"},{value:"good",label:"Bon état"},{value:"fair",label:"État correct"},{value:"poor",label:"Mauvais état"}],eee=[{value:"relevance",label:"Pertinence"},{value:"date",label:"Plus récent"},{value:"price-asc",label:"Prix croissant"},{value:"price-desc",label:"Prix décroissant"}],tee=()=>{var x;const[t,e]=A1(),{listings:n,loading:r,hasMore:i,fetchListings:a,searchListings:o}=pf(),[l,c]=p.useState({query:t.get("q")||"",category:t.get("category")||"",sortBy:"date"}),[u,d]=p.useState("grid"),[f,m]=p.useState(!1);p.useEffect(()=>{const g={query:t.get("q")||"",category:t.get("category")||"",sortBy:"date"};c(g),o(g)},[t,o]);const v=()=>{const g={...l};o(g);const _=new URLSearchParams;g.query&&_.set("q",g.query),g.category&&_.set("category",g.category),e(_)},y=(g,_)=>{const E={...l,[g]:_};c(E)},w=()=>{a(l,!1)},b=()=>{const g={query:"",sortBy:"date"};c(g),o(g),e({})};return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Toutes les annonces"}),s.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 mb-6",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Dn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(Ee,{type:"text",placeholder:"Rechercher des articles...",value:l.query||"",onChange:g=>y("query",g.target.value),onKeyPress:g=>g.key==="Enter"&&v(),className:"pl-10"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(B,{onClick:v,className:"whitespace-nowrap",children:[s.jsx(Dn,{className:"w-4 h-4 mr-2"}),"Rechercher"]}),s.jsxs(B,{variant:"outline",onClick:()=>m(!f),className:"lg:hidden",children:[s.jsx(gv,{className:"w-4 h-4 mr-2"}),"Filtres"]})]})]}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:xy.slice(1,6).map(g=>{const _=g.icon;return s.jsxs(B,{variant:l.category===g.value?"default":"outline",size:"sm",onClick:()=>y("category",l.category===g.value?"":g.value),className:"flex items-center gap-2",children:[_&&s.jsx(_,{className:"w-4 h-4"}),g.label]},g.value)})})]}),s.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[s.jsx("aside",{className:`lg:w-80 space-y-6 ${f?"block":"hidden lg:block"}`,children:s.jsxs(K,{children:[s.jsx(Ne,{children:s.jsxs(Ce,{className:"flex items-center justify-between",children:[s.jsx("span",{children:"Filtres"}),s.jsx(B,{variant:"ghost",size:"sm",onClick:b,children:"Effacer"})]})}),s.jsxs(Y,{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Catégorie"}),s.jsxs(Et,{value:l.category||"all",onValueChange:g=>y("category",g==="all"?"":g),children:[s.jsx(wt,{children:s.jsx(Ct,{})}),s.jsx(bt,{children:xy.map(g=>{const _=g.icon;return s.jsx(be,{value:g.value,children:s.jsxs("div",{className:"flex items-center gap-2",children:[_&&s.jsx(_,{className:"w-4 h-4"}),g.label]})},g.value)})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Prix"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ee,{type:"number",placeholder:"Min",value:l.minPrice||"",onChange:g=>y("minPrice",g.target.value?parseInt(g.target.value):void 0)}),s.jsx(Ee,{type:"number",placeholder:"Max",value:l.maxPrice||"",onChange:g=>y("maxPrice",g.target.value?parseInt(g.target.value):void 0)})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"État"}),s.jsx("div",{className:"space-y-2",children:JJ.map(g=>{var _;return s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:((_=l.condition)==null?void 0:_.includes(g.value))||!1,onChange:E=>{const S=l.condition||[],O=E.target.checked?[...S,g.value]:S.filter(I=>I!==g.value);y("condition",O.length>0?O:void 0)},className:"rounded border-border"}),s.jsx("span",{className:"text-sm",children:g.label})]},g.value)})})]}),s.jsx(B,{onClick:v,className:"w-full",children:"Appliquer les filtres"})]})]})}),s.jsxs("main",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("span",{className:"text-muted-foreground",children:[n.length," résultat(s)"]}),(l.query||l.category||l.minPrice||l.maxPrice)&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Filtres actifs:"}),l.query&&s.jsxs(Ae,{variant:"secondary",children:['"',l.query,'"']}),l.category&&s.jsx(Ae,{variant:"secondary",children:(x=xy.find(g=>g.value===l.category))==null?void 0:x.label})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Et,{value:l.sortBy||"date",onValueChange:g=>y("sortBy",g),children:[s.jsx(wt,{className:"w-40",children:s.jsx(Ct,{})}),s.jsx(bt,{children:eee.map(g=>s.jsx(be,{value:g.value,children:g.label},g.value))})]}),s.jsx(Zr,{orientation:"vertical",className:"h-6"}),s.jsxs("div",{className:"flex border rounded-lg overflow-hidden",children:[s.jsx(B,{variant:u==="grid"?"default":"ghost",size:"icon",onClick:()=>d("grid"),className:"rounded-none w-15 h-15",title:"Vue en grille",children:s.jsx(MA,{className:"w-4 h-4"})}),s.jsx(B,{variant:u==="list"?"default":"ghost",size:"icon",onClick:()=>d("list"),className:"rounded-none w-15 h-15",title:"Vue en liste",children:s.jsx(LA,{className:"w-4 h-4"})})]})]})]}),r&&n.length===0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((g,_)=>s.jsxs(K,{className:"animate-pulse",children:[s.jsx("div",{className:"aspect-[4/3] bg-muted"}),s.jsxs(Y,{className:"p-4 space-y-2",children:[s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},_))}):n.length>0?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:`grid gap-8 justify-items-center ${u==="grid"?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3":"grid-cols-1"}`,children:n.map(g=>s.jsx(yh,{listing:g},g.id))}),i&&s.jsx("div",{className:"text-center mt-8",children:s.jsx(B,{onClick:w,disabled:r,variant:"outline",size:"lg",children:r?"Chargement...":"Charger plus"})})]}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Aucun résultat trouvé"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Essayez de modifier vos critères de recherche"}),s.jsx(B,{onClick:b,variant:"outline",children:"Effacer les filtres"})]})]})]})]})};var jj="Dialog",[UM,Yae]=Hr(jj),[nee,Ls]=UM(jj),$M=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:a,modal:o=!0}=t,l=p.useRef(null),c=p.useRef(null),[u=!1,d]=Br({prop:r,defaultProp:i,onChange:a});return s.jsx(nee,{scope:e,triggerRef:l,contentRef:c,contentId:Fr(),titleId:Fr(),descriptionId:Fr(),open:u,onOpenChange:d,onOpenToggle:p.useCallback(()=>d(f=>!f),[d]),modal:o,children:n})};$M.displayName=jj;var zM="DialogTrigger",BM=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Ls(zM,n),a=We(e,i.triggerRef);return s.jsx(Se.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Sj(i.open),...r,ref:a,onClick:le(t.onClick,i.onOpenToggle)})});BM.displayName=zM;var _j="DialogPortal",[ree,qM]=UM(_j,{forceMount:void 0}),WM=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,a=Ls(_j,e);return s.jsx(ree,{scope:e,forceMount:n,children:p.Children.map(r,o=>s.jsx(Un,{present:n||a.open,children:s.jsx(df,{asChild:!0,container:i,children:o})}))})};WM.displayName=_j;var lg="DialogOverlay",HM=p.forwardRef((t,e)=>{const n=qM(lg,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,a=Ls(lg,t.__scopeDialog);return a.modal?s.jsx(Un,{present:r||a.open,children:s.jsx(see,{...i,ref:e})}):null});HM.displayName=lg;var see=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Ls(lg,n);return s.jsx(hf,{as:Gi,allowPinchZoom:!0,shards:[i.contentRef],children:s.jsx(Se.div,{"data-state":Sj(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),gl="DialogContent",GM=p.forwardRef((t,e)=>{const n=qM(gl,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,a=Ls(gl,t.__scopeDialog);return s.jsx(Un,{present:r||a.open,children:a.modal?s.jsx(iee,{...i,ref:e}):s.jsx(aee,{...i,ref:e})})});GM.displayName=gl;var iee=p.forwardRef((t,e)=>{const n=Ls(gl,t.__scopeDialog),r=p.useRef(null),i=We(e,n.contentRef,r);return p.useEffect(()=>{const a=r.current;if(a)return kv(a)},[]),s.jsx(KM,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:le(t.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:le(t.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:le(t.onFocusOutside,a=>a.preventDefault())})}),aee=p.forwardRef((t,e)=>{const n=Ls(gl,t.__scopeDialog),r=p.useRef(!1),i=p.useRef(!1);return s.jsx(KM,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,a),a.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:a=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),KM=p.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,...o}=t,l=Ls(gl,n),c=p.useRef(null),u=We(e,c);return bv(),s.jsxs(s.Fragment,{children:[s.jsx(cf,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:s.jsx(lf,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Sj(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(oee,{titleId:l.titleId}),s.jsx(cee,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Nj="DialogTitle",YM=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Ls(Nj,n);return s.jsx(Se.h2,{id:i.titleId,...r,ref:e})});YM.displayName=Nj;var QM="DialogDescription",XM=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Ls(QM,n);return s.jsx(Se.p,{id:i.descriptionId,...r,ref:e})});XM.displayName=QM;var ZM="DialogClose",JM=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Ls(ZM,n);return s.jsx(Se.button,{type:"button",...r,ref:e,onClick:le(t.onClick,()=>i.onOpenChange(!1))})});JM.displayName=ZM;function Sj(t){return t?"open":"closed"}var eD="DialogTitleWarning",[Qae,tD]=mH(eD,{contentName:gl,titleName:Nj,docsSlug:"dialog"}),oee=({titleId:t})=>{const e=tD(eD),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return p.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},lee="DialogDescriptionWarning",cee=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${tD(lee).contentName}}.`;return p.useEffect(()=>{var a;const i=(a=t.current)==null?void 0:a.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},uee=$M,dee=BM,hee=WM,nD=HM,rD=GM,sD=YM,iD=XM,fee=JM;const si=uee,Cc=dee,mee=hee,aD=p.forwardRef(({className:t,...e},n)=>s.jsx(nD,{ref:n,className:Pe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));aD.displayName=nD.displayName;const Ss=p.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(mee,{children:[s.jsx(aD,{}),s.jsxs(rD,{ref:r,className:Pe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,s.jsxs(fee,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(cQ,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ss.displayName=rD.displayName;const ii=({className:t,...e})=>s.jsx("div",{className:Pe("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});ii.displayName="DialogHeader";const Xm=({className:t,...e})=>s.jsx("div",{className:Pe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Xm.displayName="DialogFooter";const Es=p.forwardRef(({className:t,...e},n)=>s.jsx(sD,{ref:n,className:Pe("text-lg font-semibold leading-none tracking-tight",t),...e}));Es.displayName=sD.displayName;const Yo=p.forwardRef(({className:t,...e},n)=>s.jsx(iD,{ref:n,className:Pe("text-sm text-muted-foreground",t),...e}));Yo.displayName=iD.displayName;const Cs=p.forwardRef(({className:t,...e},n)=>s.jsx("textarea",{className:Pe("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));Cs.displayName="Textarea";var pee="Label",oD=p.forwardRef((t,e)=>s.jsx(Se.label,{...t,ref:e,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));oD.displayName=pee;var lD=oD;const gee=wv("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),oe=p.forwardRef(({className:t,...e},n)=>s.jsx(lD,{ref:n,className:Pe(gee(),t),...e}));oe.displayName=lD.displayName;const vee=wv("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),pt=p.forwardRef(({className:t,variant:e,...n},r)=>s.jsx("div",{ref:r,role:"alert",className:Pe(vee({variant:e}),t),...n}));pt.displayName="Alert";const xee=p.forwardRef(({className:t,...e},n)=>s.jsx("h5",{ref:n,className:Pe("mb-1 font-medium leading-none tracking-tight",t),...e}));xee.displayName="AlertTitle";const gt=p.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:Pe("text-sm [&_p]:leading-relaxed",t),...e}));gt.displayName="AlertDescription";var Fe=function(){return Fe=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Fe.apply(this,arguments)};function yee(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function cD(t,e,n){for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function vf(t){return t.mode==="multiple"}function xf(t){return t.mode==="range"}function Uv(t){return t.mode==="single"}var wee={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function bee(t,e){return _n(t,"LLLL y",e)}function jee(t,e){return _n(t,"d",e)}function _ee(t,e){return _n(t,"LLLL",e)}function Nee(t){return"".concat(t)}function See(t,e){return _n(t,"cccccc",e)}function Eee(t,e){return _n(t,"yyyy",e)}var Cee=Object.freeze({__proto__:null,formatCaption:bee,formatDay:jee,formatMonthCaption:_ee,formatWeekNumber:Nee,formatWeekdayName:See,formatYearCaption:Eee}),Tee=function(t,e,n){return _n(t,"do MMMM (EEEE)",n)},kee=function(){return"Month: "},Iee=function(){return"Go to next month"},Pee=function(){return"Go to previous month"},Aee=function(t,e){return _n(t,"cccc",e)},Ree=function(t){return"Week n. ".concat(t)},Mee=function(){return"Year: "},Dee=Object.freeze({__proto__:null,labelDay:Tee,labelMonthDropdown:kee,labelNext:Iee,labelPrevious:Pee,labelWeekNumber:Ree,labelWeekday:Aee,labelYearDropdown:Mee});function Oee(){var t="buttons",e=wee,n=yj,r={},i={},a=1,o={},l=new Date;return{captionLayout:t,classNames:e,formatters:Cee,labels:Dee,locale:n,modifiersClassNames:r,modifiers:i,numberOfMonths:a,styles:o,today:l,mode:"default"}}function Lee(t){var e=t.fromYear,n=t.toYear,r=t.fromMonth,i=t.toMonth,a=t.fromDate,o=t.toDate;return r?a=Tr(r):e&&(a=new Date(e,0,1)),i?o=Dv(i):n&&(o=new Date(n,11,31)),{fromDate:a?Xc(a):void 0,toDate:o?Xc(o):void 0}}var uD=p.createContext(void 0);function Vee(t){var e,n=t.initialProps,r=Oee(),i=Lee(n),a=i.fromDate,o=i.toDate,l=(e=n.captionLayout)!==null&&e!==void 0?e:r.captionLayout;l!=="buttons"&&(!a||!o)&&(l="buttons");var c;(Uv(n)||vf(n)||xf(n))&&(c=n.onSelect);var u=Fe(Fe(Fe({},r),n),{captionLayout:l,classNames:Fe(Fe({},r.classNames),n.classNames),components:Fe({},n.components),formatters:Fe(Fe({},r.formatters),n.formatters),fromDate:a,labels:Fe(Fe({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:Fe(Fe({},r.modifiers),n.modifiers),modifiersClassNames:Fe(Fe({},r.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:Fe(Fe({},r.styles),n.styles),toDate:o});return s.jsx(uD.Provider,{value:u,children:t.children})}function At(){var t=p.useContext(uD);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function dD(t){var e=At(),n=e.locale,r=e.classNames,i=e.styles,a=e.formatters.formatCaption;return s.jsx("div",{className:r.caption_label,style:i.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:a(t.displayMonth,{locale:n})})}function Fee(t){return s.jsx("svg",Fe({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:s.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function hD(t){var e,n,r=t.onChange,i=t.value,a=t.children,o=t.caption,l=t.className,c=t.style,u=At(),d=(n=(e=u.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&n!==void 0?n:Fee;return s.jsxs("div",{className:l,style:c,children:[s.jsx("span",{className:u.classNames.vhidden,children:t["aria-label"]}),s.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:i,onChange:r,children:a}),s.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[o,s.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function Uee(t){var e,n=At(),r=n.fromDate,i=n.toDate,a=n.styles,o=n.locale,l=n.formatters.formatMonthCaption,c=n.classNames,u=n.components,d=n.labels.labelMonthDropdown;if(!r)return s.jsx(s.Fragment,{});if(!i)return s.jsx(s.Fragment,{});var f=[];if(xZ(r,i))for(var m=Tr(r),v=r.getMonth();v<=i.getMonth();v++)f.push(vy(m,v));else for(var m=Tr(new Date),v=0;v<=11;v++)f.push(vy(m,v));var y=function(b){var x=Number(b.target.value),g=vy(Tr(t.displayMonth),x);t.onChange(g)},w=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:hD;return s.jsx(w,{name:"months","aria-label":d(),className:c.dropdown_month,style:a.dropdown_month,onChange:y,value:t.displayMonth.getMonth(),caption:l(t.displayMonth,{locale:o}),children:f.map(function(b){return s.jsx("option",{value:b.getMonth(),children:l(b,{locale:o})},b.getMonth())})})}function $ee(t){var e,n=t.displayMonth,r=At(),i=r.fromDate,a=r.toDate,o=r.locale,l=r.styles,c=r.classNames,u=r.components,d=r.formatters.formatYearCaption,f=r.labels.labelYearDropdown,m=[];if(!i)return s.jsx(s.Fragment,{});if(!a)return s.jsx(s.Fragment,{});for(var v=i.getFullYear(),y=a.getFullYear(),w=v;w<=y;w++)m.push(CE(q4(new Date),w));var b=function(g){var _=CE(Tr(n),Number(g.target.value));t.onChange(_)},x=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:hD;return s.jsx(x,{name:"years","aria-label":f(),className:c.dropdown_year,style:l.dropdown_year,onChange:b,value:n.getFullYear(),caption:d(n,{locale:o}),children:m.map(function(g){return s.jsx("option",{value:g.getFullYear(),children:d(g,{locale:o})},g.getFullYear())})})}function zee(t,e){var n=p.useState(t),r=n[0],i=n[1],a=e===void 0?r:e;return[a,i]}function Bee(t){var e=t.month,n=t.defaultMonth,r=t.today,i=e||n||r||new Date,a=t.toDate,o=t.fromDate,l=t.numberOfMonths,c=l===void 0?1:l;if(a&&Jc(a,i)<0){var u=-1*(c-1);i=Rs(a,u)}return o&&Jc(i,o)<0&&(i=o),Tr(i)}function qee(){var t=At(),e=Bee(t),n=zee(e,t.month),r=n[0],i=n[1],a=function(o){var l;if(!t.disableNavigation){var c=Tr(o);i(c),(l=t.onMonthChange)===null||l===void 0||l.call(t,c)}};return[r,a]}function Wee(t,e){for(var n=e.reverseMonths,r=e.numberOfMonths,i=Tr(t),a=Tr(Rs(i,r)),o=Jc(a,i),l=[],c=0;c<o;c++){var u=Rs(i,c);l.push(u)}return n&&(l=l.reverse()),l}function Hee(t,e){if(!e.disableNavigation){var n=e.toDate,r=e.pagedNavigation,i=e.numberOfMonths,a=i===void 0?1:i,o=r?a:1,l=Tr(t);if(!n)return Rs(l,o);var c=Jc(n,t);if(!(c<a))return Rs(l,o)}}function Gee(t,e){if(!e.disableNavigation){var n=e.fromDate,r=e.pagedNavigation,i=e.numberOfMonths,a=i===void 0?1:i,o=r?a:1,l=Tr(t);if(!n)return Rs(l,-o);var c=Jc(l,n);if(!(c<=0))return Rs(l,-o)}}var fD=p.createContext(void 0);function Kee(t){var e=At(),n=qee(),r=n[0],i=n[1],a=Wee(r,e),o=Hee(r,e),l=Gee(r,e),c=function(f){return a.some(function(m){return wj(f,m)})},u=function(f,m){c(f)||(m&&X4(f,m)?i(Rs(f,1+e.numberOfMonths*-1)):i(f))},d={currentMonth:r,displayMonths:a,goToMonth:i,goToDate:u,previousMonth:l,nextMonth:o,isDateDisplayed:c};return s.jsx(fD.Provider,{value:d,children:t.children})}function yf(){var t=p.useContext(fD);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function RE(t){var e,n=At(),r=n.classNames,i=n.styles,a=n.components,o=yf().goToMonth,l=function(d){o(Rs(d,t.displayIndex?-t.displayIndex:0))},c=(e=a==null?void 0:a.CaptionLabel)!==null&&e!==void 0?e:dD,u=s.jsx(c,{id:t.id,displayMonth:t.displayMonth});return s.jsxs("div",{className:r.caption_dropdowns,style:i.caption_dropdowns,children:[s.jsx("div",{className:r.vhidden,children:u}),s.jsx(Uee,{onChange:l,displayMonth:t.displayMonth}),s.jsx($ee,{onChange:l,displayMonth:t.displayMonth})]})}function Yee(t){return s.jsx("svg",Fe({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:s.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Qee(t){return s.jsx("svg",Fe({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:s.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var cg=p.forwardRef(function(t,e){var n=At(),r=n.classNames,i=n.styles,a=[r.button_reset,r.button];t.className&&a.push(t.className);var o=a.join(" "),l=Fe(Fe({},i.button_reset),i.button);return t.style&&Object.assign(l,t.style),s.jsx("button",Fe({},t,{ref:e,type:"button",className:o,style:l}))});function Xee(t){var e,n,r=At(),i=r.dir,a=r.locale,o=r.classNames,l=r.styles,c=r.labels,u=c.labelPrevious,d=c.labelNext,f=r.components;if(!t.nextMonth&&!t.previousMonth)return s.jsx(s.Fragment,{});var m=u(t.previousMonth,{locale:a}),v=[o.nav_button,o.nav_button_previous].join(" "),y=d(t.nextMonth,{locale:a}),w=[o.nav_button,o.nav_button_next].join(" "),b=(e=f==null?void 0:f.IconRight)!==null&&e!==void 0?e:Qee,x=(n=f==null?void 0:f.IconLeft)!==null&&n!==void 0?n:Yee;return s.jsxs("div",{className:o.nav,style:l.nav,children:[!t.hidePrevious&&s.jsx(cg,{name:"previous-month","aria-label":m,className:v,style:l.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:i==="rtl"?s.jsx(b,{className:o.nav_icon,style:l.nav_icon}):s.jsx(x,{className:o.nav_icon,style:l.nav_icon})}),!t.hideNext&&s.jsx(cg,{name:"next-month","aria-label":y,className:w,style:l.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:i==="rtl"?s.jsx(x,{className:o.nav_icon,style:l.nav_icon}):s.jsx(b,{className:o.nav_icon,style:l.nav_icon})})]})}function ME(t){var e=At().numberOfMonths,n=yf(),r=n.previousMonth,i=n.nextMonth,a=n.goToMonth,o=n.displayMonths,l=o.findIndex(function(y){return wj(t.displayMonth,y)}),c=l===0,u=l===o.length-1,d=e>1&&(c||!u),f=e>1&&(u||!c),m=function(){r&&a(r)},v=function(){i&&a(i)};return s.jsx(Xee,{displayMonth:t.displayMonth,hideNext:d,hidePrevious:f,nextMonth:i,previousMonth:r,onPreviousClick:m,onNextClick:v})}function Zee(t){var e,n=At(),r=n.classNames,i=n.disableNavigation,a=n.styles,o=n.captionLayout,l=n.components,c=(e=l==null?void 0:l.CaptionLabel)!==null&&e!==void 0?e:dD,u;return i?u=s.jsx(c,{id:t.id,displayMonth:t.displayMonth}):o==="dropdown"?u=s.jsx(RE,{displayMonth:t.displayMonth,id:t.id}):o==="dropdown-buttons"?u=s.jsxs(s.Fragment,{children:[s.jsx(RE,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),s.jsx(ME,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):u=s.jsxs(s.Fragment,{children:[s.jsx(c,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),s.jsx(ME,{displayMonth:t.displayMonth,id:t.id})]}),s.jsx("div",{className:r.caption,style:a.caption,children:u})}function Jee(t){var e=At(),n=e.footer,r=e.styles,i=e.classNames.tfoot;return n?s.jsx("tfoot",{className:i,style:r.tfoot,children:s.jsx("tr",{children:s.jsx("td",{colSpan:8,children:n})})}):s.jsx(s.Fragment,{})}function ete(t,e,n){for(var r=n?ml(new Date):ui(new Date,{locale:t,weekStartsOn:e}),i=[],a=0;a<7;a++){var o=ir(r,a);i.push(o)}return i}function tte(){var t=At(),e=t.classNames,n=t.styles,r=t.showWeekNumber,i=t.locale,a=t.weekStartsOn,o=t.ISOWeek,l=t.formatters.formatWeekdayName,c=t.labels.labelWeekday,u=ete(i,a,o);return s.jsxs("tr",{style:n.head_row,className:e.head_row,children:[r&&s.jsx("td",{style:n.head_cell,className:e.head_cell}),u.map(function(d,f){return s.jsx("th",{scope:"col",className:e.head_cell,style:n.head_cell,"aria-label":c(d,{locale:i}),children:l(d,{locale:i})},f)})]})}function nte(){var t,e=At(),n=e.classNames,r=e.styles,i=e.components,a=(t=i==null?void 0:i.HeadRow)!==null&&t!==void 0?t:tte;return s.jsx("thead",{style:r.head,className:n.head,children:s.jsx(a,{})})}function rte(t){var e=At(),n=e.locale,r=e.formatters.formatDay;return s.jsx(s.Fragment,{children:r(t.date,{locale:n})})}var Ej=p.createContext(void 0);function ste(t){if(!vf(t.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return s.jsx(Ej.Provider,{value:e,children:t.children})}return s.jsx(ite,{initialProps:t.initialProps,children:t.children})}function ite(t){var e=t.initialProps,n=t.children,r=e.selected,i=e.min,a=e.max,o=function(u,d,f){var m,v;(m=e.onDayClick)===null||m===void 0||m.call(e,u,d,f);var y=!!(d.selected&&i&&(r==null?void 0:r.length)===i);if(!y){var w=!!(!d.selected&&a&&(r==null?void 0:r.length)===a);if(!w){var b=r?cD([],r):[];if(d.selected){var x=b.findIndex(function(g){return _r(u,g)});b.splice(x,1)}else b.push(u);(v=e.onSelect)===null||v===void 0||v.call(e,b,u,d,f)}}},l={disabled:[]};r&&l.disabled.push(function(u){var d=a&&r.length>a-1,f=r.some(function(m){return _r(m,u)});return!!(d&&!f)});var c={selected:r,onDayClick:o,modifiers:l};return s.jsx(Ej.Provider,{value:c,children:n})}function Cj(){var t=p.useContext(Ej);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function ate(t,e){var n=e||{},r=n.from,i=n.to;return r&&i?_r(i,t)&&_r(r,t)?void 0:_r(i,t)?{from:i,to:void 0}:_r(r,t)?void 0:pw(r,t)?{from:t,to:i}:{from:r,to:t}:i?pw(t,i)?{from:i,to:t}:{from:t,to:i}:r?X4(t,r)?{from:t,to:r}:{from:r,to:t}:{from:t,to:void 0}}var Tj=p.createContext(void 0);function ote(t){if(!xf(t.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return s.jsx(Tj.Provider,{value:e,children:t.children})}return s.jsx(lte,{initialProps:t.initialProps,children:t.children})}function lte(t){var e=t.initialProps,n=t.children,r=e.selected,i=r||{},a=i.from,o=i.to,l=e.min,c=e.max,u=function(v,y,w){var b,x;(b=e.onDayClick)===null||b===void 0||b.call(e,v,y,w);var g=ate(v,r);(x=e.onSelect)===null||x===void 0||x.call(e,g,v,y,w)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(a?(d.range_start=[a],o?(d.range_end=[o],_r(a,o)||(d.range_middle=[{after:a,before:o}])):d.range_end=[a]):o&&(d.range_start=[o],d.range_end=[o]),l&&(a&&!o&&d.disabled.push({after:gy(a,l-1),before:ir(a,l-1)}),a&&o&&d.disabled.push({after:a,before:ir(a,l-1)}),!a&&o&&d.disabled.push({after:gy(o,l-1),before:ir(o,l-1)})),c){if(a&&!o&&(d.disabled.push({before:ir(a,-c+1)}),d.disabled.push({after:ir(a,c-1)})),a&&o){var f=Ys(o,a)+1,m=c-f;d.disabled.push({before:gy(a,m)}),d.disabled.push({after:ir(o,m)})}!a&&o&&(d.disabled.push({before:ir(o,-c+1)}),d.disabled.push({after:ir(o,c-1)}))}return s.jsx(Tj.Provider,{value:{selected:r,onDayClick:u,modifiers:d},children:n})}function kj(){var t=p.useContext(Tj);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function Zm(t){return Array.isArray(t)?cD([],t):t!==void 0?[t]:[]}function cte(t){var e={};return Object.entries(t).forEach(function(n){var r=n[0],i=n[1];e[r]=Zm(i)}),e}var Ms;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(Ms||(Ms={}));var ute=Ms.Selected,ji=Ms.Disabled,dte=Ms.Hidden,hte=Ms.Today,yy=Ms.RangeEnd,wy=Ms.RangeMiddle,by=Ms.RangeStart,fte=Ms.Outside;function mte(t,e,n){var r,i=(r={},r[ute]=Zm(t.selected),r[ji]=Zm(t.disabled),r[dte]=Zm(t.hidden),r[hte]=[t.today],r[yy]=[],r[wy]=[],r[by]=[],r[fte]=[],r);return t.fromDate&&i[ji].push({before:t.fromDate}),t.toDate&&i[ji].push({after:t.toDate}),vf(t)?i[ji]=i[ji].concat(e.modifiers[ji]):xf(t)&&(i[ji]=i[ji].concat(n.modifiers[ji]),i[by]=n.modifiers[by],i[wy]=n.modifiers[wy],i[yy]=n.modifiers[yy]),i}var mD=p.createContext(void 0);function pte(t){var e=At(),n=Cj(),r=kj(),i=mte(e,n,r),a=cte(e.modifiers),o=Fe(Fe({},i),a);return s.jsx(mD.Provider,{value:o,children:t.children})}function pD(){var t=p.useContext(mD);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function gte(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function vte(t){return!!(t&&typeof t=="object"&&"from"in t)}function xte(t){return!!(t&&typeof t=="object"&&"after"in t)}function yte(t){return!!(t&&typeof t=="object"&&"before"in t)}function wte(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function bte(t,e){var n,r=e.from,i=e.to;if(r&&i){var a=Ys(i,r)<0;a&&(n=[i,r],r=n[0],i=n[1]);var o=Ys(t,r)>=0&&Ys(i,t)>=0;return o}return i?_r(i,t):r?_r(r,t):!1}function jte(t){return vj(t)}function _te(t){return Array.isArray(t)&&t.every(vj)}function Nte(t,e){return e.some(function(n){if(typeof n=="boolean")return n;if(jte(n))return _r(t,n);if(_te(n))return n.includes(t);if(vte(n))return bte(t,n);if(wte(n))return n.dayOfWeek.includes(t.getDay());if(gte(n)){var r=Ys(n.before,t),i=Ys(n.after,t),a=r>0,o=i<0,l=pw(n.before,n.after);return l?o&&a:a||o}return xte(n)?Ys(t,n.after)>0:yte(n)?Ys(n.before,t)>0:typeof n=="function"?n(t):!1})}function Ij(t,e,n){var r=Object.keys(e).reduce(function(a,o){var l=e[o];return Nte(t,l)&&a.push(o),a},[]),i={};return r.forEach(function(a){return i[a]=!0}),n&&!wj(t,n)&&(i.outside=!0),i}function Ste(t,e){for(var n=Tr(t[0]),r=Dv(t[t.length-1]),i,a,o=n;o<=r;){var l=Ij(o,e),c=!l.disabled&&!l.hidden;if(!c){o=ir(o,1);continue}if(l.selected)return o;l.today&&!a&&(a=o),i||(i=o),o=ir(o,1)}return a||i}var Ete=365;function gD(t,e){var n=e.moveBy,r=e.direction,i=e.context,a=e.modifiers,o=e.retry,l=o===void 0?{count:0,lastFocused:t}:o,c=i.weekStartsOn,u=i.fromDate,d=i.toDate,f=i.locale,m={day:ir,week:mw,month:Rs,year:oX,startOfWeek:function(b){return i.ISOWeek?ml(b):ui(b,{locale:f,weekStartsOn:c})},endOfWeek:function(b){return i.ISOWeek?W4(b):xj(b,{locale:f,weekStartsOn:c})}},v=m[n](t,r==="after"?1:-1);r==="before"&&u?v=lX([u,v]):r==="after"&&d&&(v=cX([d,v]));var y=!0;if(a){var w=Ij(v,a);y=!w.disabled&&!w.hidden}return y?v:l.count>Ete?l.lastFocused:gD(v,{moveBy:n,direction:r,context:i,modifiers:a,retry:Fe(Fe({},l),{count:l.count+1})})}var vD=p.createContext(void 0);function Cte(t){var e=yf(),n=pD(),r=p.useState(),i=r[0],a=r[1],o=p.useState(),l=o[0],c=o[1],u=Ste(e.displayMonths,n),d=i??(l&&e.isDateDisplayed(l))?l:u,f=function(){c(i),a(void 0)},m=function(b){a(b)},v=At(),y=function(b,x){if(i){var g=gD(i,{moveBy:b,direction:x,context:v,modifiers:n});_r(i,g)||(e.goToDate(g,i),m(g))}},w={focusedDay:i,focusTarget:d,blur:f,focus:m,focusDayAfter:function(){return y("day","after")},focusDayBefore:function(){return y("day","before")},focusWeekAfter:function(){return y("week","after")},focusWeekBefore:function(){return y("week","before")},focusMonthBefore:function(){return y("month","before")},focusMonthAfter:function(){return y("month","after")},focusYearBefore:function(){return y("year","before")},focusYearAfter:function(){return y("year","after")},focusStartOfWeek:function(){return y("startOfWeek","before")},focusEndOfWeek:function(){return y("endOfWeek","after")}};return s.jsx(vD.Provider,{value:w,children:t.children})}function Pj(){var t=p.useContext(vD);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function Tte(t,e){var n=pD(),r=Ij(t,n,e);return r}var Aj=p.createContext(void 0);function kte(t){if(!Uv(t.initialProps)){var e={selected:void 0};return s.jsx(Aj.Provider,{value:e,children:t.children})}return s.jsx(Ite,{initialProps:t.initialProps,children:t.children})}function Ite(t){var e=t.initialProps,n=t.children,r=function(a,o,l){var c,u,d;if((c=e.onDayClick)===null||c===void 0||c.call(e,a,o,l),o.selected&&!e.required){(u=e.onSelect)===null||u===void 0||u.call(e,void 0,a,o,l);return}(d=e.onSelect)===null||d===void 0||d.call(e,a,a,o,l)},i={selected:e.selected,onDayClick:r};return s.jsx(Aj.Provider,{value:i,children:n})}function xD(){var t=p.useContext(Aj);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function Pte(t,e){var n=At(),r=xD(),i=Cj(),a=kj(),o=Pj(),l=o.focusDayAfter,c=o.focusDayBefore,u=o.focusWeekAfter,d=o.focusWeekBefore,f=o.blur,m=o.focus,v=o.focusMonthBefore,y=o.focusMonthAfter,w=o.focusYearBefore,b=o.focusYearAfter,x=o.focusStartOfWeek,g=o.focusEndOfWeek,_=function(V){var M,$,L,W;Uv(n)?(M=r.onDayClick)===null||M===void 0||M.call(r,t,e,V):vf(n)?($=i.onDayClick)===null||$===void 0||$.call(i,t,e,V):xf(n)?(L=a.onDayClick)===null||L===void 0||L.call(a,t,e,V):(W=n.onDayClick)===null||W===void 0||W.call(n,t,e,V)},E=function(V){var M;m(t),(M=n.onDayFocus)===null||M===void 0||M.call(n,t,e,V)},S=function(V){var M;f(),(M=n.onDayBlur)===null||M===void 0||M.call(n,t,e,V)},O=function(V){var M;(M=n.onDayMouseEnter)===null||M===void 0||M.call(n,t,e,V)},I=function(V){var M;(M=n.onDayMouseLeave)===null||M===void 0||M.call(n,t,e,V)},k=function(V){var M;(M=n.onDayPointerEnter)===null||M===void 0||M.call(n,t,e,V)},R=function(V){var M;(M=n.onDayPointerLeave)===null||M===void 0||M.call(n,t,e,V)},N=function(V){var M;(M=n.onDayTouchCancel)===null||M===void 0||M.call(n,t,e,V)},P=function(V){var M;(M=n.onDayTouchEnd)===null||M===void 0||M.call(n,t,e,V)},A=function(V){var M;(M=n.onDayTouchMove)===null||M===void 0||M.call(n,t,e,V)},T=function(V){var M;(M=n.onDayTouchStart)===null||M===void 0||M.call(n,t,e,V)},U=function(V){var M;(M=n.onDayKeyUp)===null||M===void 0||M.call(n,t,e,V)},H=function(V){var M;switch(V.key){case"ArrowLeft":V.preventDefault(),V.stopPropagation(),n.dir==="rtl"?l():c();break;case"ArrowRight":V.preventDefault(),V.stopPropagation(),n.dir==="rtl"?c():l();break;case"ArrowDown":V.preventDefault(),V.stopPropagation(),u();break;case"ArrowUp":V.preventDefault(),V.stopPropagation(),d();break;case"PageUp":V.preventDefault(),V.stopPropagation(),V.shiftKey?w():v();break;case"PageDown":V.preventDefault(),V.stopPropagation(),V.shiftKey?b():y();break;case"Home":V.preventDefault(),V.stopPropagation(),x();break;case"End":V.preventDefault(),V.stopPropagation(),g();break}(M=n.onDayKeyDown)===null||M===void 0||M.call(n,t,e,V)},z={onClick:_,onFocus:E,onBlur:S,onKeyDown:H,onKeyUp:U,onMouseEnter:O,onMouseLeave:I,onPointerEnter:k,onPointerLeave:R,onTouchCancel:N,onTouchEnd:P,onTouchMove:A,onTouchStart:T};return z}function Ate(){var t=At(),e=xD(),n=Cj(),r=kj(),i=Uv(t)?e.selected:vf(t)?n.selected:xf(t)?r.selected:void 0;return i}function Rte(t){return Object.values(Ms).includes(t)}function Mte(t,e){var n=[t.classNames.day];return Object.keys(e).forEach(function(r){var i=t.modifiersClassNames[r];if(i)n.push(i);else if(Rte(r)){var a=t.classNames["day_".concat(r)];a&&n.push(a)}}),n}function Dte(t,e){var n=Fe({},t.styles.day);return Object.keys(e).forEach(function(r){var i;n=Fe(Fe({},n),(i=t.modifiersStyles)===null||i===void 0?void 0:i[r])}),n}function Ote(t,e,n){var r,i,a,o=At(),l=Pj(),c=Tte(t,e),u=Pte(t,c),d=Ate(),f=!!(o.onDayClick||o.mode!=="default");p.useEffect(function(){var O;c.outside||l.focusedDay&&f&&_r(l.focusedDay,t)&&((O=n.current)===null||O===void 0||O.focus())},[l.focusedDay,t,n,f,c.outside]);var m=Mte(o,c).join(" "),v=Dte(o,c),y=!!(c.outside&&!o.showOutsideDays||c.hidden),w=(a=(i=o.components)===null||i===void 0?void 0:i.DayContent)!==null&&a!==void 0?a:rte,b=s.jsx(w,{date:t,displayMonth:e,activeModifiers:c}),x={style:v,className:m,children:b,role:"gridcell"},g=l.focusTarget&&_r(l.focusTarget,t)&&!c.outside,_=l.focusedDay&&_r(l.focusedDay,t),E=Fe(Fe(Fe({},x),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=_||g?0:-1,r)),u),S={isButton:f,isHidden:y,activeModifiers:c,selectedDays:d,buttonProps:E,divProps:x};return S}function Lte(t){var e=p.useRef(null),n=Ote(t.date,t.displayMonth,e);return n.isHidden?s.jsx("div",{role:"gridcell"}):n.isButton?s.jsx(cg,Fe({name:"day",ref:e},n.buttonProps)):s.jsx("div",Fe({},n.divProps))}function Vte(t){var e=t.number,n=t.dates,r=At(),i=r.onWeekNumberClick,a=r.styles,o=r.classNames,l=r.locale,c=r.labels.labelWeekNumber,u=r.formatters.formatWeekNumber,d=u(Number(e),{locale:l});if(!i)return s.jsx("span",{className:o.weeknumber,style:a.weeknumber,children:d});var f=c(Number(e),{locale:l}),m=function(v){i(e,n,v)};return s.jsx(cg,{name:"week-number","aria-label":f,className:o.weeknumber,style:a.weeknumber,onClick:m,children:d})}function Fte(t){var e,n,r=At(),i=r.styles,a=r.classNames,o=r.showWeekNumber,l=r.components,c=(e=l==null?void 0:l.Day)!==null&&e!==void 0?e:Lte,u=(n=l==null?void 0:l.WeekNumber)!==null&&n!==void 0?n:Vte,d;return o&&(d=s.jsx("td",{className:a.cell,style:i.cell,children:s.jsx(u,{number:t.weekNumber,dates:t.dates})})),s.jsxs("tr",{className:a.row,style:i.row,children:[d,t.dates.map(function(f){return s.jsx("td",{className:a.cell,style:i.cell,role:"presentation",children:s.jsx(c,{displayMonth:t.displayMonth,date:f})},pZ(f))})]})}function DE(t,e,n){for(var r=n!=null&&n.ISOWeek?W4(e):xj(e,n),i=n!=null&&n.ISOWeek?ml(t):ui(t,n),a=Ys(r,i),o=[],l=0;l<=a;l++)o.push(ir(i,l));var c=o.reduce(function(u,d){var f=n!=null&&n.ISOWeek?G4(d):Y4(d,n),m=u.find(function(v){return v.weekNumber===f});return m?(m.dates.push(d),u):(u.push({weekNumber:f,dates:[d]}),u)},[]);return c}function Ute(t,e){var n=DE(Tr(t),Dv(t),e);if(e!=null&&e.useFixedWeeks){var r=vZ(t,e);if(r<6){var i=n[n.length-1],a=i.dates[i.dates.length-1],o=mw(a,6-r),l=DE(mw(a,1),o,e);n.push.apply(n,l)}}return n}function $te(t){var e,n,r,i=At(),a=i.locale,o=i.classNames,l=i.styles,c=i.hideHead,u=i.fixedWeeks,d=i.components,f=i.weekStartsOn,m=i.firstWeekContainsDate,v=i.ISOWeek,y=Ute(t.displayMonth,{useFixedWeeks:!!u,ISOWeek:v,locale:a,weekStartsOn:f,firstWeekContainsDate:m}),w=(e=d==null?void 0:d.Head)!==null&&e!==void 0?e:nte,b=(n=d==null?void 0:d.Row)!==null&&n!==void 0?n:Fte,x=(r=d==null?void 0:d.Footer)!==null&&r!==void 0?r:Jee;return s.jsxs("table",{id:t.id,className:o.table,style:l.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!c&&s.jsx(w,{}),s.jsx("tbody",{className:o.tbody,style:l.tbody,children:y.map(function(g){return s.jsx(b,{displayMonth:t.displayMonth,dates:g.dates,weekNumber:g.weekNumber},g.weekNumber)})}),s.jsx(x,{displayMonth:t.displayMonth})]})}function zte(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var Bte=zte()?p.useLayoutEffect:p.useEffect,jy=!1,qte=0;function OE(){return"react-day-picker-".concat(++qte)}function Wte(t){var e,n=t??(jy?OE():null),r=p.useState(n),i=r[0],a=r[1];return Bte(function(){i===null&&a(OE())},[]),p.useEffect(function(){jy===!1&&(jy=!0)},[]),(e=t??i)!==null&&e!==void 0?e:void 0}function Hte(t){var e,n,r=At(),i=r.dir,a=r.classNames,o=r.styles,l=r.components,c=yf().displayMonths,u=Wte(r.id?"".concat(r.id,"-").concat(t.displayIndex):void 0),d=r.id?"".concat(r.id,"-grid-").concat(t.displayIndex):void 0,f=[a.month],m=o.month,v=t.displayIndex===0,y=t.displayIndex===c.length-1,w=!v&&!y;i==="rtl"&&(e=[v,y],y=e[0],v=e[1]),v&&(f.push(a.caption_start),m=Fe(Fe({},m),o.caption_start)),y&&(f.push(a.caption_end),m=Fe(Fe({},m),o.caption_end)),w&&(f.push(a.caption_between),m=Fe(Fe({},m),o.caption_between));var b=(n=l==null?void 0:l.Caption)!==null&&n!==void 0?n:Zee;return s.jsxs("div",{className:f.join(" "),style:m,children:[s.jsx(b,{id:u,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),s.jsx($te,{id:d,"aria-labelledby":u,displayMonth:t.displayMonth})]},t.displayIndex)}function Gte(t){var e=At(),n=e.classNames,r=e.styles;return s.jsx("div",{className:n.months,style:r.months,children:t.children})}function Kte(t){var e,n,r=t.initialProps,i=At(),a=Pj(),o=yf(),l=p.useState(!1),c=l[0],u=l[1];p.useEffect(function(){i.initialFocus&&a.focusTarget&&(c||(a.focus(a.focusTarget),u(!0)))},[i.initialFocus,c,a.focus,a.focusTarget,a]);var d=[i.classNames.root,i.className];i.numberOfMonths>1&&d.push(i.classNames.multiple_months),i.showWeekNumber&&d.push(i.classNames.with_weeknumber);var f=Fe(Fe({},i.styles.root),i.style),m=Object.keys(r).filter(function(y){return y.startsWith("data-")}).reduce(function(y,w){var b;return Fe(Fe({},y),(b={},b[w]=r[w],b))},{}),v=(n=(e=r.components)===null||e===void 0?void 0:e.Months)!==null&&n!==void 0?n:Gte;return s.jsx("div",Fe({className:d.join(" "),style:f,dir:i.dir,id:i.id,nonce:r.nonce,title:r.title,lang:r.lang},m,{children:s.jsx(v,{children:o.displayMonths.map(function(y,w){return s.jsx(Hte,{displayIndex:w,displayMonth:y},w)})})}))}function Yte(t){var e=t.children,n=yee(t,["children"]);return s.jsx(Vee,{initialProps:n,children:s.jsx(Kee,{children:s.jsx(kte,{initialProps:n,children:s.jsx(ste,{initialProps:n,children:s.jsx(ote,{initialProps:n,children:s.jsx(pte,{children:s.jsx(Cte,{children:e})})})})})})})}function Qte(t){return s.jsx(Yte,Fe({},t,{children:s.jsx(Kte,{initialProps:t})}))}function yD({className:t,classNames:e,showOutsideDays:n=!0,...r}){return s.jsx(Qte,{showOutsideDays:n,className:Pe("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Pe(rw({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:Pe("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected].day-range-end)]:rounded-r-md",r.mode==="range"?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:Pe(rw({variant:"ghost"}),"h-8 w-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50  aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...e},components:{IconLeft:({...i})=>s.jsx(sQ,{className:"h-4 w-4"}),IconRight:({...i})=>s.jsx(N4,{className:"h-4 w-4"})},...r})}yD.displayName="Calendar";var Rj="Popover",[wD,Xae]=Hr(Rj,[bu]),wf=bu(),[Xte,bo]=wD(Rj),bD=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:i,onOpenChange:a,modal:o=!1}=t,l=wf(e),c=p.useRef(null),[u,d]=p.useState(!1),[f=!1,m]=Br({prop:r,defaultProp:i,onChange:a});return s.jsx(rj,{...l,children:s.jsx(Xte,{scope:e,contentId:Fr(),triggerRef:c,open:f,onOpenChange:m,onOpenToggle:p.useCallback(()=>m(v=>!v),[m]),hasCustomAnchor:u,onCustomAnchorAdd:p.useCallback(()=>d(!0),[]),onCustomAnchorRemove:p.useCallback(()=>d(!1),[]),modal:o,children:n})})};bD.displayName=Rj;var jD="PopoverAnchor",Zte=p.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=bo(jD,n),a=wf(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=i;return p.useEffect(()=>(o(),()=>l()),[o,l]),s.jsx(Ev,{...a,...r,ref:e})});Zte.displayName=jD;var _D="PopoverTrigger",ND=p.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=bo(_D,n),a=wf(n),o=We(e,i.triggerRef),l=s.jsx(Se.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":kD(i.open),...r,ref:o,onClick:le(t.onClick,i.onOpenToggle)});return i.hasCustomAnchor?l:s.jsx(Ev,{asChild:!0,...a,children:l})});ND.displayName=_D;var Mj="PopoverPortal",[Jte,ene]=wD(Mj,{forceMount:void 0}),SD=t=>{const{__scopePopover:e,forceMount:n,children:r,container:i}=t,a=bo(Mj,e);return s.jsx(Jte,{scope:e,forceMount:n,children:s.jsx(Un,{present:n||a.open,children:s.jsx(df,{asChild:!0,container:i,children:r})})})};SD.displayName=Mj;var eu="PopoverContent",ED=p.forwardRef((t,e)=>{const n=ene(eu,t.__scopePopover),{forceMount:r=n.forceMount,...i}=t,a=bo(eu,t.__scopePopover);return s.jsx(Un,{present:r||a.open,children:a.modal?s.jsx(tne,{...i,ref:e}):s.jsx(nne,{...i,ref:e})})});ED.displayName=eu;var tne=p.forwardRef((t,e)=>{const n=bo(eu,t.__scopePopover),r=p.useRef(null),i=We(e,r),a=p.useRef(!1);return p.useEffect(()=>{const o=r.current;if(o)return kv(o)},[]),s.jsx(hf,{as:Gi,allowPinchZoom:!0,children:s.jsx(CD,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:le(t.onCloseAutoFocus,o=>{var l;o.preventDefault(),a.current||(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:le(t.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;a.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:le(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),nne=p.forwardRef((t,e)=>{const n=bo(eu,t.__scopePopover),r=p.useRef(!1),i=p.useRef(!1);return s.jsx(CD,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,a),a.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:a=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),CD=p.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...f}=t,m=bo(eu,n),v=wf(n);return bv(),s.jsx(cf,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:s.jsx(lf,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>m.onOpenChange(!1),children:s.jsx(sj,{"data-state":kD(m.open),role:"dialog",id:m.contentId,...v,...f,ref:e,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),TD="PopoverClose",rne=p.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=bo(TD,n);return s.jsx(Se.button,{type:"button",...r,ref:e,onClick:le(t.onClick,()=>i.onOpenChange(!1))})});rne.displayName=TD;var sne="PopoverArrow",ine=p.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=wf(n);return s.jsx(ij,{...i,...r,ref:e})});ine.displayName=sne;function kD(t){return t?"open":"closed"}var ane=bD,one=ND,lne=SD,ID=ED;const cne=ane,une=one,PD=p.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},i)=>s.jsx(lne,{children:s.jsx(ID,{ref:i,align:e,sideOffset:n,className:Pe("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));PD.displayName=ID.displayName;const Bl=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},$v=ju((t,e)=>({paymentMethods:[],paymentRequests:[],loading:!1,initializePaymentMethods:()=>{t({paymentMethods:[{id:"cash",type:"cash",name:"Espèces",icon:"💵",description:"Paiement en liquide lors de la rencontre",fees:0,processingTime:"Immédiat",securityLevel:"medium",available:!0},{id:"transfer",type:"transfer",name:"Virement bancaire",icon:"🏦",description:"Virement SEPA sécurisé",fees:0,processingTime:"1-2 jours ouvrés",securityLevel:"high",available:!0},{id:"paypal",type:"paypal",name:"PayPal",icon:"💳",description:"Paiement sécurisé via PayPal",fees:2.9,processingTime:"Immédiat",securityLevel:"high",available:!0},{id:"lydia",type:"lydia",name:"Lydia",icon:"📱",description:"Paiement mobile instantané",fees:0,processingTime:"Immédiat",securityLevel:"medium",available:!0}]})},createPaymentRequest:async n=>{try{t({loading:!0});const r=e().generateSecurityCode(),i={...n,securityCode:r,status:"pending",createdAt:wn(),updatedAt:wn()},a=await Ja(vt(_e,"paymentRequests"),i),o={id:a.id,...n,securityCode:r,status:"pending",createdAt:new Date,updatedAt:new Date};return t(l=>({paymentRequests:[o,...l.paymentRequests],loading:!1})),ee.success("Demande de paiement créée avec succès"),a.id}catch(r){throw console.error("Erreur lors de la création de la demande de paiement:",r),ee.error("Erreur lors de la création de la demande de paiement"),t({loading:!1}),r}},updatePaymentStatus:async(n,r,i)=>{try{const a={status:r,updatedAt:wn()};i&&(a.notes=i),await Mn(tt(_e,"paymentRequests",n),a),t(l=>({paymentRequests:l.paymentRequests.map(c=>c.id===n?{...c,status:r,notes:i||c.notes,updatedAt:new Date}:c)}));const o={confirmed:"Paiement confirmé",completed:"Paiement terminé",cancelled:"Paiement annulé",disputed:"Litige signalé"};ee.success(o[r]||"Statut mis à jour")}catch(a){console.error("Erreur lors de la mise à jour du statut:",a),ee.error("Erreur lors de la mise à jour du statut")}},fetchUserPaymentRequests:async n=>{if(n)try{t({loading:!0});const r=Wt(vt(_e,"paymentRequests"),hn("buyerId","==",n),ns(50)),i=Wt(vt(_e,"paymentRequests"),hn("sellerId","==",n),ns(50)),[a,o]=await Promise.all([fn(r),fn(i)]),l=[];a.forEach(c=>{const u=c.data();l.push({id:c.id,...u,createdAt:Bl(u.createdAt),updatedAt:Bl(u.updatedAt),meetingDateTime:u.meetingDateTime?Bl(u.meetingDateTime):void 0})}),o.forEach(c=>{const u=c.data();l.find(d=>d.id===c.id)||l.push({id:c.id,...u,createdAt:Bl(u.createdAt),updatedAt:Bl(u.updatedAt),meetingDateTime:u.meetingDateTime?Bl(u.meetingDateTime):void 0})}),l.sort((c,u)=>u.createdAt.getTime()-c.createdAt.getTime()),t({paymentRequests:l,loading:!1})}catch(r){console.error("Erreur lors du chargement des demandes de paiement:",r),ee.error("Erreur lors du chargement des demandes de paiement"),t({loading:!1})}},generateSecurityCode:()=>Math.random().toString(36).substring(2,8).toUpperCase(),validatePaymentMethod:(n,r)=>{switch(n){case"cash":return!0;case"transfer":return r.bankDetails&&r.bankDetails.iban&&r.bankDetails.accountName;case"paypal":return r.paypalEmail&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.paypalEmail);case"lydia":return r.lydiaPhone&&/^(\+33|0)[1-9](\d{8})$/.test(r.lydiaPhone.replace(/\s/g,""));default:return!1}},calculateFees:(n,r)=>{const{paymentMethods:i}=e(),a=i.find(o=>o.type===r);return a?n*a.fees/100:0},getPaymentInstructions:(n,r)=>{var a,o,l;const i=[];switch(n){case"cash":i.push("💵 Paiement en espèces","📍 Rencontrez-vous au lieu convenu","🔍 Vérifiez l'objet avant de payer","🧾 Demandez un reçu si nécessaire",`🔐 Code de sécurité : ${r.securityCode}`);break;case"transfer":i.push("🏦 Virement bancaire SEPA","📋 Utilisez les coordonnées bancaires fournies","💬 Indiquez la référence de transaction","⏱️ Délai : 1-2 jours ouvrés",`🔐 Code de sécurité : ${r.securityCode}`),(a=r.paymentDetails)!=null&&a.bankDetails&&i.push(`📊 IBAN : ${r.paymentDetails.bankDetails.iban}`,`🏛️ Titulaire : ${r.paymentDetails.bankDetails.accountName}`);break;case"paypal":i.push("💳 Paiement PayPal","📧 Envoyez le paiement à l'adresse email fournie",'🛡️ Utilisez "Biens et services" pour la protection',"⚡ Paiement instantané",`🔐 Code de sécurité : ${r.securityCode}`),(o=r.paymentDetails)!=null&&o.paypalEmail&&i.push(`📧 Email PayPal : ${r.paymentDetails.paypalEmail}`);break;case"lydia":i.push("📱 Paiement Lydia","📞 Envoyez le paiement au numéro fourni","💬 Indiquez la référence de transaction","⚡ Paiement instantané",`🔐 Code de sécurité : ${r.securityCode}`),(l=r.paymentDetails)!=null&&l.lydiaPhone&&i.push(`📞 Numéro Lydia : ${r.paymentDetails.lydiaPhone}`);break}return i}}));var AD="https://js.stripe.com/v3",dne=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,LE="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",hne=function(){for(var e=document.querySelectorAll('script[src^="'.concat(AD,'"]')),n=0;n<e.length;n++){var r=e[n];if(dne.test(r.src))return r}return null},VE=function(e){var n="",r=document.createElement("script");r.src="".concat(AD).concat(n);var i=document.head||document.body;if(!i)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return i.appendChild(r),r},fne=function(e,n){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"2.4.0",startTime:n})},ed=null,ym=null,wm=null,mne=function(e){return function(){e(new Error("Failed to load Stripe.js"))}},pne=function(e,n){return function(){window.Stripe?e(window.Stripe):n(new Error("Stripe.js not available"))}},gne=function(e){return ed!==null?ed:(ed=new Promise(function(n,r){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe&&e&&console.warn(LE),window.Stripe){n(window.Stripe);return}try{var i=hne();if(i&&e)console.warn(LE);else if(!i)i=VE(e);else if(i&&wm!==null&&ym!==null){var a;i.removeEventListener("load",wm),i.removeEventListener("error",ym),(a=i.parentNode)===null||a===void 0||a.removeChild(i),i=VE(e)}wm=pne(n,r),ym=mne(r),i.addEventListener("load",wm),i.addEventListener("error",ym)}catch(o){r(o);return}}),ed.catch(function(n){return ed=null,Promise.reject(n)}))},vne=function(e,n,r){if(e===null)return null;var i=e.apply(void 0,n);return fne(i,r),i},td,RD=!1,MD=function(){return td||(td=gne(null).catch(function(e){return td=null,Promise.reject(e)}),td)};Promise.resolve().then(function(){return MD()}).catch(function(t){RD||console.warn(t)});var DD=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];RD=!0;var i=Date.now();return MD().then(function(a){return vne(a,n,i)})},OD={exports:{}},xne="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",yne=xne,wne=yne;function LD(){}function VD(){}VD.resetWarningCache=LD;var bne=function(){function t(r,i,a,o,l,c){if(c!==wne){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:VD,resetWarningCache:LD};return n.PropTypes=n,n};OD.exports=bne();var jne=OD.exports;const zt=Cg(jne);function FE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function UE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FE(Object(n),!0).forEach(function(r){FD(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Jm(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Jm=function(e){return typeof e}:Jm=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jm(t)}function FD(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function UD(t,e){return _ne(t)||Nne(t,e)||Sne(t,e)||Ene()}function _ne(t){if(Array.isArray(t))return t}function Nne(t,e){var n=t&&(typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"]);if(n!=null){var r=[],i=!0,a=!1,o,l;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(c){a=!0,l=c}finally{try{!i&&n.return!=null&&n.return()}finally{if(a)throw l}}return r}}function Sne(t,e){if(t){if(typeof t=="string")return $E(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $E(t,e)}}function $E(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ene(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Pr=function(e,n,r){var i=!!r,a=me.useRef(r);me.useEffect(function(){a.current=r},[r]),me.useEffect(function(){if(!i||!e)return function(){};var o=function(){a.current&&a.current.apply(a,arguments)};return e.on(n,o),function(){e.off(n,o)}},[i,n,e,a])},bw=function(e){var n=me.useRef(e);return me.useEffect(function(){n.current=e},[e]),n.current},tu=function(e){return e!==null&&Jm(e)==="object"},Cne=function(e){return tu(e)&&typeof e.then=="function"},Tne=function(e){return tu(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},zE="[object Object]",kne=function t(e,n){if(!tu(e)||!tu(n))return e===n;var r=Array.isArray(e),i=Array.isArray(n);if(r!==i)return!1;var a=Object.prototype.toString.call(e)===zE,o=Object.prototype.toString.call(n)===zE;if(a!==o)return!1;if(!a&&!r)return e===n;var l=Object.keys(e),c=Object.keys(n);if(l.length!==c.length)return!1;for(var u={},d=0;d<l.length;d+=1)u[l[d]]=!0;for(var f=0;f<c.length;f+=1)u[c[f]]=!0;var m=Object.keys(u);if(m.length!==l.length)return!1;var v=e,y=n,w=function(x){return t(v[x],y[x])};return m.every(w)},$D=function(e,n,r){return tu(e)?Object.keys(e).reduce(function(i,a){var o=!tu(n)||!kne(e[a],n[a]);return r.includes(a)?(o&&console.warn("Unsupported prop change: options.".concat(a," is not a mutable property.")),i):o?UE(UE({},i||{}),{},FD({},a,e[a])):i},null):null},zD="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",BE=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zD;if(e===null||Tne(e))return e;throw new Error(n)},Ine=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zD;if(Cne(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(i){return BE(i,n)})};var r=BE(e,n);return r===null?{tag:"empty"}:{tag:"sync",stripe:r}},Pne=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"2.8.1"}),e.registerAppInfo({name:"react-stripe-js",version:"2.8.1",url:"https://stripe.com/docs/stripe-js/react"}))},zv=me.createContext(null);zv.displayName="ElementsContext";var BD=function(e,n){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(n," in an <Elements> provider."));return e},qD=function(e){var n=e.stripe,r=e.options,i=e.children,a=me.useMemo(function(){return Ine(n)},[n]),o=me.useState(function(){return{stripe:a.tag==="sync"?a.stripe:null,elements:a.tag==="sync"?a.stripe.elements(r):null}}),l=UD(o,2),c=l[0],u=l[1];me.useEffect(function(){var m=!0,v=function(w){u(function(b){return b.stripe?b:{stripe:w,elements:w.elements(r)}})};return a.tag==="async"&&!c.stripe?a.stripePromise.then(function(y){y&&m&&v(y)}):a.tag==="sync"&&!c.stripe&&v(a.stripe),function(){m=!1}},[a,c,r]);var d=bw(n);me.useEffect(function(){d!==null&&d!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[d,n]);var f=bw(r);return me.useEffect(function(){if(c.elements){var m=$D(r,f,["clientSecret","fonts"]);m&&c.elements.update(m)}},[r,f,c.elements]),me.useEffect(function(){Pne(c.stripe)},[c.stripe]),me.createElement(zv.Provider,{value:c},i)};qD.propTypes={stripe:zt.any,options:zt.object};var Ane=function(e){var n=me.useContext(zv);return BD(n,e)},Rne=function(){var e=Ane("calls useElements()"),n=e.elements;return n};zt.func.isRequired;var WD=me.createContext(null);WD.displayName="CustomCheckoutSdkContext";var Mne=function(e,n){if(!e)throw new Error("Could not find CustomCheckoutProvider context; You need to wrap the part of your app that ".concat(n," in an <CustomCheckoutProvider> provider."));return e},Dne=me.createContext(null);Dne.displayName="CustomCheckoutContext";zt.any,zt.shape({clientSecret:zt.string.isRequired,elementsOptions:zt.object}).isRequired;var jw=function(e){var n=me.useContext(WD),r=me.useContext(zv);if(n&&r)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CustomCheckoutProvider> and <Elements> providers."));return n?Mne(n,e):BD(r,e)},One=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},gn=function(e,n){var r="".concat(One(e),"Element"),i=function(c){var u=c.id,d=c.className,f=c.options,m=f===void 0?{}:f,v=c.onBlur,y=c.onFocus,w=c.onReady,b=c.onChange,x=c.onEscape,g=c.onClick,_=c.onLoadError,E=c.onLoaderStart,S=c.onNetworksChange,O=c.onConfirm,I=c.onCancel,k=c.onShippingAddressChange,R=c.onShippingRateChange,N=jw("mounts <".concat(r,">")),P="elements"in N?N.elements:null,A="customCheckoutSdk"in N?N.customCheckoutSdk:null,T=me.useState(null),U=UD(T,2),H=U[0],z=U[1],V=me.useRef(null),M=me.useRef(null);Pr(H,"blur",v),Pr(H,"focus",y),Pr(H,"escape",x),Pr(H,"click",g),Pr(H,"loaderror",_),Pr(H,"loaderstart",E),Pr(H,"networkschange",S),Pr(H,"confirm",O),Pr(H,"cancel",I),Pr(H,"shippingaddresschange",k),Pr(H,"shippingratechange",R),Pr(H,"change",b);var $;w&&(e==="expressCheckout"?$=w:$=function(){w(H)}),Pr(H,"ready",$),me.useLayoutEffect(function(){if(V.current===null&&M.current!==null&&(P||A)){var W=null;A?W=A.createElement(e,m):P&&(W=P.create(e,m)),V.current=W,z(W),W&&W.mount(M.current)}},[P,A,m]);var L=bw(m);return me.useEffect(function(){if(V.current){var W=$D(m,L,["paymentRequest"]);W&&"update"in V.current&&V.current.update(W)}},[m,L]),me.useLayoutEffect(function(){return function(){if(V.current&&typeof V.current.destroy=="function")try{V.current.destroy(),V.current=null}catch{}}},[]),me.createElement("div",{id:u,className:d,ref:M})},a=function(c){jw("mounts <".concat(r,">"));var u=c.id,d=c.className;return me.createElement("div",{id:u,className:d})},o=n?a:i;return o.propTypes={id:zt.string,className:zt.string,onChange:zt.func,onBlur:zt.func,onFocus:zt.func,onReady:zt.func,onEscape:zt.func,onClick:zt.func,onLoadError:zt.func,onLoaderStart:zt.func,onNetworksChange:zt.func,onConfirm:zt.func,onCancel:zt.func,onShippingAddressChange:zt.func,onShippingRateChange:zt.func,options:zt.object},o.displayName=r,o.__elementType=e,o},vn=typeof window>"u",Lne=me.createContext(null);Lne.displayName="EmbeddedCheckoutProviderContext";var Vne=function(){var e=jw("calls useStripe()"),n=e.stripe;return n};gn("auBankAccount",vn);gn("card",vn);gn("cardNumber",vn);gn("cardExpiry",vn);gn("cardCvc",vn);gn("fpxBank",vn);gn("iban",vn);gn("idealBank",vn);gn("p24Bank",vn);gn("epsBank",vn);gn("payment",vn);gn("expressCheckout",vn);gn("currencySelector",vn);gn("paymentRequestButton",vn);gn("linkAuthentication",vn);gn("address",vn);gn("shippingAddress",vn);gn("paymentMethodMessaging",vn);gn("affirmMessage",vn);gn("afterpayClearpayMessage",vn);const Fne=({amount:t,currency:e,onPaymentSuccess:n,onPaymentError:r})=>{Vne(),Rne();const[i,a]=p.useState(!1),[o,l]=p.useState(null),c=async u=>{u.preventDefault(),a(!0),l(null);try{await new Promise(f=>setTimeout(f,2e3));const d="pi_"+Math.random().toString(36).substring(2,15);ee.success("Paiement réussi !"),n(d)}catch(d){console.error("Payment error:",d),l(d.message||"Une erreur est survenue lors du paiement"),r(d.message||"Une erreur est survenue lors du paiement")}finally{a(!1)}};return s.jsxs(K,{children:[s.jsxs(Ne,{children:[s.jsxs(Ce,{className:"flex items-center gap-2",children:[s.jsx(an,{className:"w-5 h-5"}),"Paiement par carte bancaire"]}),s.jsx(nt,{children:"Paiement sécurisé via Stripe"})]}),s.jsx(Y,{children:s.jsxs("form",{onSubmit:c,className:"space-y-4",children:[s.jsx("div",{className:"p-4 border rounded-md",children:s.jsx("div",{className:"h-10 flex items-center",children:s.jsx("div",{className:"text-muted-foreground",children:"Formulaire de carte bancaire (simulation)"})})}),o&&s.jsxs(pt,{className:"border-red-200 bg-red-50",children:[s.jsx(Jt,{className:"h-4 w-4 text-red-600"}),s.jsx(gt,{className:"text-red-800",children:o})]}),s.jsxs(pt,{className:"border-blue-200 bg-blue-50",children:[s.jsx(hl,{className:"h-4 w-4 text-blue-600"}),s.jsx(gt,{className:"text-blue-800",children:"Vos informations de paiement sont sécurisées et cryptées par Stripe."})]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx("p",{children:"Pour tester, utilisez ces cartes :"}),s.jsxs("ul",{className:"list-disc pl-5 mt-1",children:[s.jsx("li",{children:"Succès : 4242 4242 4242 4242"}),s.jsx("li",{children:"Échec : 4000 0000 0000 0002"}),s.jsx("li",{children:"Date : n'importe quelle date future"}),s.jsx("li",{children:"CVC : n'importe quel nombre à 3 chiffres"})]})]}),s.jsx(B,{type:"submit",disabled:i,className:"w-full bg-gradient-to-r from-primary to-secondary",children:i?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Traitement..."]}):s.jsxs(s.Fragment,{children:[s.jsx(hl,{className:"w-4 h-4 mr-2"}),"Payer ",new Intl.NumberFormat("fr-FR",{style:"currency",currency:e}).format(t)]})})]})})]})},qE=DD("pk_test_51O5JqHLVDYKrxBIwIyiUQOmNk9HFZJKvBz6zJyRNBNjkKSGVEvZKEwlKnwL2JV8PmXVjWSHoZ9XQfKOiLkXGZ9Nh00wPxKdm9p"),Une=({amount:t,currency:e,onPaymentSuccess:n,onPaymentError:r})=>{const i={appearance:{theme:"stripe"},locale:"fr"};return qE?s.jsx(qD,{stripe:qE,options:i,children:s.jsx(Fne,{amount:t,currency:e,onPaymentSuccess:n,onPaymentError:r})}):s.jsxs(pt,{className:"border-yellow-200 bg-yellow-50",children:[s.jsx(Jt,{className:"h-4 w-4 text-yellow-600"}),s.jsxs(gt,{className:"text-yellow-800",children:[s.jsx("strong",{children:"Configuration Stripe manquante"})," - Veuillez configurer votre clé publique Stripe dans le fichier .env"]})]})},HD=({amount:t,currency:e,onMethodSelect:n,selectedMethod:r})=>{const{paymentMethods:i,calculateFees:a}=$v(),[o,l]=p.useState({}),[c,u]=p.useState({}),[d,f]=p.useState(null),m=[{id:"card",type:"card",name:"Carte bancaire",icon:an,description:"Paiement sécurisé par carte",fees:1.5,processingTime:"Immédiat",securityLevel:"high",available:!0},...i],v=S=>{switch(S){case"card":return an;case"cash":return EA;case"transfer":return nW;case"paypal":return an;case"lydia":return Cl;default:return an}},y=S=>{switch(S){case"high":return"text-green-600 bg-green-100";case"medium":return"text-yellow-600 bg-yellow-100";case"low":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},w=(S,O)=>{var k,R;const I={};switch(S){case"card":return!0;case"transfer":(k=O.bankDetails)!=null&&k.iban?/^[A-Z]{2}\d{2}[A-Z0-9]{4}\d{7}([A-Z0-9]?){0,16}$/.test(O.bankDetails.iban.replace(/\s/g,""))||(I.iban="Format IBAN invalide"):I.iban="IBAN requis",(R=O.bankDetails)!=null&&R.accountName||(I.accountName="Nom du titulaire requis");break;case"paypal":O.paypalEmail?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(O.paypalEmail)||(I.paypalEmail="Format email invalide"):I.paypalEmail="Email PayPal requis";break;case"lydia":O.lydiaPhone?/^(\+33|0)[1-9](\d{8})$/.test(O.lydiaPhone.replace(/\s/g,""))||(I.lydiaPhone="Format de téléphone invalide"):I.lydiaPhone="Numéro de téléphone requis";break}return u(I),Object.keys(I).length===0},b=S=>{if(S==="card"){n(S,{});return}const O=o[S]||{};(S==="cash"||w(S,O))&&n(S,O)},x=(S,O,I)=>{l(k=>({...k,[S]:{...k[S],[O]:I}}))},g=(S,O)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:O||"EUR"}).format(S),_=S=>{f(S),n("card",{stripePaymentId:S})},E=S=>{console.error("Stripe payment error:",S)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Choisissez votre mode de paiement"}),s.jsxs("p",{className:"text-muted-foreground",children:["Montant à payer : ",s.jsx("span",{className:"font-semibold text-primary",children:g(t,e)})]})]}),r==="card"?s.jsx(Une,{amount:t,currency:e,onPaymentSuccess:_,onPaymentError:E}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:m.map(S=>{var N,P,A,T,U,H,z,V;const O=v(S.type),I=S.type==="card"?t*S.fees/100:a(t,S.type),k=t+I,R=r===S.type;return s.jsxs(K,{className:`cursor-pointer transition-all hover:shadow-md ${R?"ring-2 ring-primary bg-primary/5":""} ${S.available?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>S.available&&b(S.type),children:[s.jsx(Ne,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(O,{className:"w-6 h-6 text-primary"})}),s.jsxs("div",{children:[s.jsx(Ce,{className:"text-lg",children:S.name}),s.jsx(nt,{className:"text-sm",children:S.description})]})]}),R&&s.jsx(Je,{className:"w-6 h-6 text-green-600"})]})}),s.jsxs(Y,{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ln,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("span",{children:S.processingTime})]}),s.jsxs(Ae,{className:y(S.securityLevel),children:[s.jsx(ft,{className:"w-3 h-3 mr-1"}),S.securityLevel==="high"?"Très sécurisé":S.securityLevel==="medium"?"Sécurisé":"Basique"]})]}),I>0&&s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Montant :"}),s.jsx("span",{children:g(t,e)})]}),s.jsxs("div",{className:"flex justify-between text-orange-600",children:[s.jsxs("span",{children:["Frais (",S.fees,"%) :"]}),s.jsx("span",{children:g(I,e)})]}),s.jsxs("div",{className:"flex justify-between font-semibold border-t pt-1",children:[s.jsx("span",{children:"Total :"}),s.jsx("span",{children:g(k,e)})]})]}),R&&S.type!=="cash"&&S.type!=="card"&&s.jsxs("div",{className:"space-y-3 pt-3 border-t",children:[S.type==="transfer"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx(oe,{htmlFor:`iban-${S.id}`,children:"IBAN *"}),s.jsx(Ee,{id:`iban-${S.id}`,placeholder:"FR76 1234 5678 9012 3456 7890 123",value:((P=(N=o[S.type])==null?void 0:N.bankDetails)==null?void 0:P.iban)||"",onChange:M=>{var $;return x(S.type,"bankDetails",{...($=o[S.type])==null?void 0:$.bankDetails,iban:M.target.value})},className:c.iban?"border-red-500":""}),c.iban&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:c.iban})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:`account-name-${S.id}`,children:"Nom du titulaire *"}),s.jsx(Ee,{id:`account-name-${S.id}`,placeholder:"Jean Dupont",value:((T=(A=o[S.type])==null?void 0:A.bankDetails)==null?void 0:T.accountName)||"",onChange:M=>{var $;return x(S.type,"bankDetails",{...($=o[S.type])==null?void 0:$.bankDetails,accountName:M.target.value})},className:c.accountName?"border-red-500":""}),c.accountName&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:c.accountName})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:`bic-${S.id}`,children:"BIC (optionnel)"}),s.jsx(Ee,{id:`bic-${S.id}`,placeholder:"BNPAFRPP",value:((H=(U=o[S.type])==null?void 0:U.bankDetails)==null?void 0:H.bic)||"",onChange:M=>{var $;return x(S.type,"bankDetails",{...($=o[S.type])==null?void 0:$.bankDetails,bic:M.target.value})}})]})]}),S.type==="paypal"&&s.jsxs("div",{children:[s.jsx(oe,{htmlFor:`paypal-email-${S.id}`,children:"Email PayPal *"}),s.jsx(Ee,{id:`paypal-email-${S.id}`,type:"email",placeholder:"votre.email@example.com",value:((z=o[S.type])==null?void 0:z.paypalEmail)||"",onChange:M=>x(S.type,"paypalEmail",M.target.value),className:c.paypalEmail?"border-red-500":""}),c.paypalEmail&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:c.paypalEmail})]}),S.type==="lydia"&&s.jsxs("div",{children:[s.jsx(oe,{htmlFor:`lydia-phone-${S.id}`,children:"Numéro de téléphone *"}),s.jsx(Ee,{id:`lydia-phone-${S.id}`,type:"tel",placeholder:"06 12 34 56 78",value:((V=o[S.type])==null?void 0:V.lydiaPhone)||"",onChange:M=>x(S.type,"lydiaPhone",M.target.value),className:c.lydiaPhone?"border-red-500":""}),c.lydiaPhone&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:c.lydiaPhone})]})]}),R&&S.type!=="card"&&s.jsxs(pt,{className:"mt-3",children:[s.jsx(eo,{className:"h-4 w-4"}),s.jsxs(gt,{children:[S.type==="cash"&&"Rencontrez-vous dans un lieu public et vérifiez l'objet avant de payer.",S.type==="transfer"&&"Le virement sera effectué après confirmation de la transaction. Délai : 1-2 jours ouvrés.",S.type==="paypal"&&"Utilisez l'option 'Biens et services' pour bénéficier de la protection PayPal.",S.type==="lydia"&&"Le paiement Lydia est instantané. Vérifiez le numéro avant d'envoyer."]})]})]})]},S.id)})}),s.jsxs(pt,{className:"border-yellow-200 bg-yellow-50",children:[s.jsx(Jt,{className:"h-4 w-4 text-yellow-600"}),s.jsxs(gt,{className:"text-yellow-800",children:[s.jsx("strong",{children:"Conseils de sécurité :"})," Ne communiquez jamais vos informations bancaires par message. Utilisez uniquement les canaux sécurisés de StudyMarket pour les transactions."]})]})]})},$ne=({open:t,onOpenChange:e,listing:n})=>{var E;const{currentUser:r,userProfile:i}=Qt(),{createPaymentRequest:a,loading:o}=$v(),[l,c]=p.useState("method"),[u,d]=p.useState(null),[f,m]=p.useState({}),[v,y]=p.useState({location:"",date:void 0,time:"",notes:""}),w=(S,O)=>{d(S),m(O),c("details")},b=async()=>{if(!(!r||!u))try{const S=v.date&&v.time?new Date(`${_n(v.date,"yyyy-MM-dd")} ${v.time}`):void 0;await a({listingId:n.id,buyerId:r.uid,sellerId:n.sellerId,amount:n.price,currency:n.currency||"EUR",paymentMethod:u,meetingLocation:v.location,meetingDateTime:S,paymentDetails:f,notes:v.notes}),e(!1),x()}catch(S){console.error("Erreur lors de la création de la demande:",S)}},x=()=>{c("method"),d(null),m({}),y({location:"",date:void 0,time:"",notes:""})},g=(S,O)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:O||"EUR"}).format(S),_=S=>({cash:"Espèces",transfer:"Virement bancaire",paypal:"PayPal",lydia:"Lydia"})[S]||S;return s.jsx(si,{open:t,onOpenChange:e,children:s.jsxs(Ss,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(ii,{children:[s.jsxs(Es,{className:"flex items-center gap-2",children:[s.jsx(an,{className:"w-5 h-5"}),"Demande de paiement"]}),s.jsxs(Yo,{children:['Créez une demande de paiement sécurisée pour "',n.title,'"']})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[s.jsxs("div",{className:`flex items-center ${l==="method"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${l==="method"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"1"}),s.jsx("span",{className:"ml-2 text-sm font-medium",children:"Mode de paiement"})]}),s.jsx("div",{className:"w-8 h-px bg-muted-foreground"}),s.jsxs("div",{className:`flex items-center ${l==="details"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${l==="details"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"2"}),s.jsx("span",{className:"ml-2 text-sm font-medium",children:"Détails"})]}),s.jsx("div",{className:"w-8 h-px bg-muted-foreground"}),s.jsxs("div",{className:`flex items-center ${l==="confirmation"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${l==="confirmation"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"3"}),s.jsx("span",{className:"ml-2 text-sm font-medium",children:"Confirmation"})]})]}),s.jsx("div",{className:"p-4 bg-muted/50 rounded-lg",children:s.jsxs("div",{className:"flex items-center gap-4",children:[((E=n.images)==null?void 0:E[0])&&s.jsx("img",{src:n.images[0],alt:n.title,className:"w-16 h-16 object-cover rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold",children:n.title}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Vendeur : ",n.sellerName," • ",n.sellerUniversity]}),s.jsx("p",{className:"text-lg font-bold text-primary",children:g(n.price,n.currency||"EUR")})]})]})}),l==="method"&&s.jsx(HD,{amount:n.price,currency:n.currency||"EUR",onMethodSelect:w,selectedMethod:u}),l==="details"&&u&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(Je,{className:"w-5 h-5 text-green-600"}),s.jsxs("span",{className:"font-medium",children:["Mode de paiement sélectionné : ",_(u)]})]}),u==="cash"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[s.jsx(lr,{className:"w-5 h-5"}),"Détails de la rencontre"]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"meeting-location",children:"Lieu de rencontre *"}),s.jsx(Ee,{id:"meeting-location",placeholder:"Ex: Bibliothèque universitaire, Hall principal...",value:v.location,onChange:S=>y(O=>({...O,location:S.target.value})),className:"mt-1"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(oe,{children:"Date de rencontre"}),s.jsxs(cne,{children:[s.jsx(une,{asChild:!0,children:s.jsxs(B,{variant:"outline",className:"w-full justify-start text-left font-normal mt-1",children:[s.jsx(ys,{className:"mr-2 h-4 w-4"}),v.date?_n(v.date,"PPP",{locale:Qn}):s.jsx("span",{children:"Choisir une date"})]})}),s.jsx(PD,{className:"w-auto p-0",children:s.jsx(yD,{mode:"single",selected:v.date,onSelect:S=>y(O=>({...O,date:S})),disabled:S=>S<new Date,initialFocus:!0})})]})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"meeting-time",children:"Heure de rencontre"}),s.jsx(Ee,{id:"meeting-time",type:"time",value:v.time,onChange:S=>y(O=>({...O,time:S.target.value})),className:"mt-1"})]})]})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"payment-notes",children:"Notes additionnelles (optionnel)"}),s.jsx(Cs,{id:"payment-notes",placeholder:"Informations complémentaires pour le vendeur...",value:v.notes,onChange:S=>y(O=>({...O,notes:S.target.value})),rows:3,className:"mt-1"})]}),s.jsxs(pt,{className:"border-blue-200 bg-blue-50",children:[s.jsx(ft,{className:"h-4 w-4 text-blue-600"}),s.jsxs(gt,{className:"text-blue-800",children:[s.jsx("strong",{children:"Sécurité :"})," Un code de sécurité unique sera généré pour cette transaction. Partagez-le uniquement avec le vendeur lors de la finalisation du paiement."]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(B,{variant:"outline",onClick:()=>c("method"),className:"flex-1",children:"Retour"}),s.jsx(B,{onClick:()=>c("confirmation"),className:"flex-1",disabled:u==="cash"&&!v.location,children:"Continuer"})]})]}),l==="confirmation"&&u&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Récapitulatif de la demande"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Mode de paiement :"}),s.jsx("p",{className:"font-medium",children:_(u)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Montant :"}),s.jsx("p",{className:"font-medium",children:g(n.price,n.currency||"EUR")})]}),u==="cash"&&v.location&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Lieu de rencontre :"}),s.jsx("p",{className:"font-medium",children:v.location})]}),v.date&&v.time&&s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Date et heure :"}),s.jsxs("p",{className:"font-medium",children:[_n(v.date,"PPP",{locale:Qn})," à ",v.time]})]})]})]}),v.notes&&s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground text-sm",children:"Notes :"}),s.jsx("p",{className:"text-sm bg-muted/50 p-2 rounded",children:v.notes})]})]}),s.jsxs(pt,{children:[s.jsx(eo,{className:"h-4 w-4"}),s.jsx(gt,{children:"En créant cette demande, vous vous engagez à effectuer le paiement selon les modalités convenues. Le vendeur recevra une notification et pourra accepter ou refuser votre demande."})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(B,{variant:"outline",onClick:()=>c("details"),className:"flex-1",children:"Retour"}),s.jsx(B,{onClick:b,className:"flex-1",disabled:o,children:o?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Création..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Je,{className:"w-4 h-4 mr-2"}),"Créer la demande"]})})]})]})]})]})})},zne=({listing:t,className:e})=>{const{currentUser:n,userProfile:r}=Qt(),{createConversation:i,setCurrentConversation:a,conversations:o}=Mv(),l=En(),[c,u]=p.useState(!1),[d,f]=p.useState(!1),[m,v]=p.useState(""),[y,w]=p.useState(""),[b,x]=p.useState(!1);if((n==null?void 0:n.uid)===t.sellerId)return null;const g=o.find(I=>I.listingId===t.id&&I.participants.includes((n==null?void 0:n.uid)||"")&&I.participants.includes(t.sellerId)),_=()=>{if(!n){l("/auth");return}if(g){a(g),l("/messages");return}const I=`Bonjour ${t.sellerName},

Je suis intéressé(e) par votre annonce "${t.title}".

Pourriez-vous me donner plus d'informations ? Je suis disponible pour un rendez-vous si nécessaire.

Cordialement,
${(r==null?void 0:r.displayName)||"Un étudiant intéressé"}`;v(I),w((r==null?void 0:r.email)||""),u(!0)},E=()=>{if(!n){l("/auth");return}f(!0)},S=async()=>{var I;if(!m.trim()||!y.trim()||!n||!r){ee.error("Veuillez remplir tous les champs");return}x(!0);try{const k=await i(t.id,t.title,t.price,(I=t.images)==null?void 0:I[0],n.uid,t.sellerId,{displayName:r.displayName,photoURL:r.photoURL,university:r.university,isVerified:r.isVerified,email:r.email},{sellerName:t.sellerName,sellerAvatar:t.sellerAvatar,sellerUniversity:t.sellerUniversity,sellerVerified:t.sellerVerified,email:t.sellerEmail||null},m.trim());u(!1),ee.success(s.jsxs("div",{className:"flex items-center justify-between w-full",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Message envoyé !"}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["📧 ",t.sellerName," recevra une notification email"]})]}),s.jsxs(B,{size:"sm",variant:"ghost",onClick:()=>{ee.dismiss(),l("/messages")},className:"ml-2 text-xs",children:["Voir la conversation",s.jsx(hh,{className:"w-3 h-3 ml-1"})]})]}),{duration:6e3,style:{minWidth:"350px"}}),setTimeout(()=>{l("/messages")},2e3)}catch(k){console.error("Erreur lors de l'envoi du message:",k),ee.error("Erreur lors de l'envoi du message")}finally{x(!1)}},O=(I,k)=>{if(t.transactionType==="donation")return"Gratuit";if(t.transactionType==="exchange")return"Échange";const R=k||"EUR";try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:R}).format(I)}catch{return`${I} €`}};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(B,{onClick:_,className:`flex-1 bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 ${e}`,children:[s.jsx(Ht,{className:"w-4 h-4 mr-2"}),g?"Continuer la conversation":"Contacter le vendeur"]}),t.transactionType==="sale"&&t.price>0&&s.jsxs(B,{onClick:E,variant:"outline",className:"flex items-center gap-2",children:[s.jsx(an,{className:"w-4 h-4"}),"Payer"]})]}),s.jsx(si,{open:c,onOpenChange:u,children:s.jsxs(Ss,{className:"max-w-md",children:[s.jsx(ii,{children:s.jsxs(Es,{className:"flex items-center gap-2",children:[s.jsx(Ht,{className:"w-5 h-5"}),"Contacter le vendeur"]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsxs(Qi,{className:"w-8 h-8",children:[s.jsx(Xi,{src:t.sellerAvatar||void 0}),s.jsx(Zi,{children:t.sellerName[0]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:t.sellerName}),s.jsx("p",{className:"text-xs text-muted-foreground",children:t.sellerUniversity})]})]}),s.jsx("p",{className:"text-sm font-medium",children:t.title}),s.jsx("p",{className:"text-sm text-primary font-semibold",children:O(t.price,t.currency)})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"contact-email",children:"Votre email"}),s.jsx(Ee,{id:"contact-email",type:"email",value:y,onChange:I=>w(I.target.value),placeholder:"votre.email@universite.fr",className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"contact-message",children:"Votre message"}),s.jsx(Cs,{id:"contact-message",value:m,onChange:I=>v(I.target.value),placeholder:"Décrivez votre intérêt pour cette annonce...",rows:6,className:"mt-1"})]}),s.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(eo,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsx("p",{className:"font-medium mb-1",children:"📧 Notification automatique"}),s.jsxs("p",{children:["Votre message sera envoyé via la messagerie StudyMarket ET ",t.sellerName," recevra une notification email pour répondre rapidement."]})]})]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(B,{variant:"outline",onClick:()=>u(!1),className:"flex-1",children:"Annuler"}),s.jsx(B,{onClick:S,disabled:b||!m.trim()||!y.trim(),className:"flex-1",children:b?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Envoi..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Kc,{className:"w-4 h-4 mr-2"}),"Envoyer + Notifier"]})})]})]})]})}),s.jsx($ne,{open:d,onOpenChange:f,listing:t})]})},Bne=()=>{var g;const{id:t}=P1(),e=En(),{currentUser:n}=Qt(),{currentListing:r,loading:i,fetchListingById:a}=pf(),{fetchUserFavorites:o}=U4(),[l,c]=p.useState(0);if(p.useEffect(()=>{t&&a(t)},[t,a]),p.useEffect(()=>{n&&o(n.uid)},[n,o]),i)return s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"animate-pulse space-y-6",children:[s.jsx("div",{className:"h-8 bg-muted rounded w-1/4"}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsx("div",{className:"aspect-square bg-muted rounded-lg"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"h-8 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-6 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-20 bg-muted rounded"})]})]})]})});if(!r)return s.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:s.jsxs("div",{className:"max-w-md mx-auto",children:[s.jsx(Jt,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),s.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Annonce introuvable"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Cette annonce n'existe pas ou a été supprimée."}),s.jsx(B,{onClick:()=>e("/listings"),children:"Retour aux annonces"})]})});const u=r,d=(n==null?void 0:n.uid)===u.sellerId,f=(_,E)=>{if(u.transactionType==="donation")return"Gratuit";if(u.transactionType==="exchange")return"Échange";const S=E||"EUR";try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:S}).format(_)}catch{return`${_} €`}},m=_=>{switch(_){case"new":return"Neuf";case"like-new":return"Comme neuf";case"good":return"Bon état";case"fair":return"État correct";case"poor":return"Mauvais état";default:return _}},v=_=>{switch(_){case"new":return"bg-green-100 text-green-800 border-green-200";case"like-new":return"bg-blue-100 text-blue-800 border-blue-200";case"good":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"fair":return"bg-orange-100 text-orange-800 border-orange-200";case"poor":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},y=()=>{switch(u.transactionType){case"donation":return s.jsx(Gc,{className:"w-4 h-4"});case"exchange":return s.jsx(Hi,{className:"w-4 h-4"});case"service":return s.jsx(vu,{className:"w-4 h-4"});default:return s.jsx(Yp,{className:"w-4 h-4"})}},w=()=>{switch(u.transactionType){case"donation":return"Don gratuit";case"exchange":return"Troc";case"service":return"Service";default:return"Vente"}},b=()=>{u.images&&u.images.length>1&&c(_=>_===u.images.length-1?0:_+1)},x=()=>{u.images&&u.images.length>1&&c(_=>_===0?u.images.length-1:_-1)};return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"border-b border-border bg-muted/30",children:s.jsx("div",{className:"container mx-auto px-4 py-4",children:s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(fe,{to:"/",className:"hover:text-foreground transition-colors",children:"Accueil"}),s.jsx("span",{children:"/"}),s.jsx(fe,{to:"/listings",className:"hover:text-foreground transition-colors",children:"Annonces"}),s.jsx("span",{children:"/"}),s.jsx("span",{className:"text-foreground",children:u.title})]})})}),s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs(B,{variant:"ghost",onClick:()=>e(-1),className:"mb-6 -ml-4",children:[s.jsx(Wo,{className:"w-4 h-4 mr-2"}),"Retour"]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"relative aspect-[4/3] rounded-lg overflow-hidden bg-muted",children:u.images&&u.images.length>0?s.jsxs(s.Fragment,{children:[s.jsx("img",{src:u.images[l],alt:u.title,className:"w-full h-full object-cover"}),u.images.length>1&&s.jsxs(s.Fragment,{children:[s.jsx("div",{onClick:x,className:"absolute left-4 top-1/2 transform -translate-y-1/2 cursor-pointer text-white hover:text-primary transition-colors bg-black/50 rounded-full p-2","aria-label":"Image précédente",children:s.jsx(iW,{className:"w-6 h-6"})}),s.jsx("div",{onClick:b,className:"absolute right-4 top-1/2 transform -translate-y-1/2 cursor-pointer text-white hover:text-primary transition-colors bg-black/50 rounded-full p-2","aria-label":"Image suivante",children:s.jsx(Ks,{className:"w-6 h-6"})}),s.jsxs("div",{className:"absolute bottom-4 right-4 bg-black/70 text-white px-3 py-1 rounded-full text-sm",children:[l+1," / ",u.images.length]})]}),s.jsxs(si,{children:[s.jsx(Cc,{asChild:!0,children:s.jsx("div",{className:"absolute top-4 right-4 cursor-pointer text-white hover:text-primary transition-colors bg-black/50 rounded-full p-2","aria-label":"Agrandir l'image",children:s.jsx(Ho,{className:"w-5 h-5"})})}),s.jsxs(Ss,{className:"max-w-4xl",children:[s.jsx(Es,{children:"Image en plein écran de l'annonce"}),s.jsx("img",{src:u.images[l],alt:u.title,className:"w-full h-auto max-h-[80vh] object-contain"})]})]})]}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-muted-foreground",children:[s.jsx(Ho,{className:"w-16 h-16 mx-auto mb-4"}),s.jsx("p",{children:"Aucune image disponible"})]})})}),u.images&&u.images.length>1&&s.jsx("div",{className:"grid grid-cols-6 gap-2",children:u.images.map((_,E)=>s.jsx("button",{onClick:()=>c(E),className:`aspect-square rounded-lg overflow-hidden border-2 transition-all ${E===l?"border-primary":"border-transparent hover:border-muted-foreground"}`,children:s.jsx("img",{src:_,alt:`${u.title} ${E+1}`,className:"w-full h-full object-cover"})},E))})]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsx(K,{children:s.jsx(Y,{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Ae,{className:"bg-primary/10 text-primary border-primary/20",children:[y(),s.jsx("span",{className:"ml-1",children:w()})]}),u.sellerVerified&&s.jsxs(Ae,{className:"bg-green-100 text-green-800 border-green-200",children:[s.jsx(ft,{className:"w-3 h-3 mr-1"}),"Vérifié"]})]}),s.jsxs("div",{className:"text-3xl font-bold text-primary",children:[f(u.price,u.currency),u.transactionType==="service"&&s.jsx("span",{className:"text-lg text-muted-foreground",children:"/h"})]}),u.transactionType==="exchange"&&u.exchangeFor&&s.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 text-purple-800",children:[s.jsx(Hi,{className:"w-4 h-4"}),s.jsx("span",{className:"font-medium",children:"Recherche en échange :"})]}),s.jsx("p",{className:"text-purple-700 mt-1",children:u.exchangeFor})]}),u.aiPriceEstimate&&u.transactionType==="sale"&&s.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 text-green-800",children:[s.jsx(sf,{className:"w-4 h-4"}),s.jsx("span",{className:"font-medium",children:"Prix estimé par IA :"})]}),s.jsxs("p",{className:"text-green-700 text-sm",children:[u.aiPriceEstimate.min,"€ - ",u.aiPriceEstimate.max,"€",s.jsxs("span",{className:"ml-2 text-xs",children:["(Confiance: ",Math.round(u.aiPriceEstimate.confidence*100),"%)"]})]})]}),s.jsx("div",{className:"space-y-3",children:d?s.jsxs("div",{className:"space-y-2",children:[s.jsx(fe,{to:`/edit-listing/${u.id}`,children:s.jsxs(B,{variant:"outline",className:"w-full",children:[s.jsx(fr,{className:"w-4 h-4 mr-2"}),"Modifier l'annonce"]})}),s.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"C'est votre annonce"})]}):s.jsxs(s.Fragment,{children:[s.jsx(zne,{listing:u,className:"w-full"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx($4,{listing:u,size:"lg",showText:!1}),s.jsx(z4,{listing:u,size:"lg",showText:!1})]}),s.jsx("div",{className:"cursor-pointer text-muted-foreground hover:text-destructive transition-colors","aria-label":"Signaler",children:s.jsx(Uo,{className:"w-5 h-5"})})]})]})})]})})}),s.jsxs(K,{children:[s.jsx(Ne,{children:s.jsx(Ce,{className:"text-lg",children:"Vendeur"})}),s.jsx(Y,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(Qi,{className:"w-12 h-12",children:[s.jsx(Xi,{src:u.sellerAvatar||void 0}),s.jsx(Zi,{children:(g=u.sellerName[0])==null?void 0:g.toUpperCase()})]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h3",{className:"font-semibold",children:u.sellerName}),u.sellerVerified&&s.jsx(ft,{className:"w-4 h-4 text-green-600"})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:u.sellerUniversity})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-semibold",children:"4.8"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Note"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-semibold",children:"23"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Ventes"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-semibold",children:"98%"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Confiance"})]})]})]})})]}),u.environmentalImpact&&s.jsxs(K,{children:[s.jsx(Ne,{children:s.jsxs(Ce,{className:"text-lg flex items-center gap-2",children:[s.jsx(Ns,{className:"w-5 h-5 text-green-600"}),"Impact écologique"]})}),s.jsx(Y,{children:s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-green-600 mb-1",children:["-",u.environmentalImpact.co2Saved," kg CO₂"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"économisés en achetant d'occasion"})]})})]})]})]}),s.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs(K,{children:[s.jsx(Ne,{children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-2xl font-bold mb-2",children:u.title}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Hc,{className:"w-4 h-4"}),s.jsxs("span",{children:[u.views," vues"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ln,{className:"w-4 h-4"}),s.jsx("span",{children:Su(u.createdAt,{addSuffix:!0,locale:Qn})})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(lr,{className:"w-4 h-4"}),s.jsx("span",{children:u.location.city})]})]})]}),s.jsx(Ae,{className:v(u.condition),children:m(u.condition)})]})}),s.jsx(Y,{children:s.jsx("div",{className:"prose prose-sm max-w-none",children:s.jsx("p",{className:"whitespace-pre-wrap",children:u.description})})})]}),u.tags&&u.tags.length>0&&s.jsxs(K,{children:[s.jsx(Ne,{children:s.jsx(Ce,{className:"text-lg",children:"Tags"})}),s.jsx(Y,{children:s.jsx("div",{className:"flex flex-wrap gap-2",children:u.tags.map((_,E)=>s.jsx(Ae,{variant:"secondary",children:_},E))})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(K,{children:[s.jsx(Ne,{children:s.jsxs(Ce,{className:"text-lg flex items-center gap-2",children:[s.jsx(lr,{className:"w-5 h-5"}),"Localisation"]})}),s.jsxs(Y,{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:u.location.city}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[u.location.state,", ",u.location.country]})]}),u.location.campus&&s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium",children:"Campus"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:u.location.campus})]}),u.location.university&&s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium",children:"Université"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:u.location.university})]})]})]}),s.jsxs(K,{children:[s.jsx(Ne,{children:s.jsxs(Ce,{className:"text-lg flex items-center gap-2",children:[s.jsx(ft,{className:"w-5 h-5"}),"Conseils de sécurité"]})}),s.jsx(Y,{children:s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Je,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:"Rencontrez-vous dans un lieu public"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Je,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:"Vérifiez l'identité de l'autre personne"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Je,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:"Testez l'objet avant la transaction"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(eo,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:"Utilisez la messagerie StudyMarket"})]})]})})]})]})]})]})]})};var bf=t=>t.type==="checkbox",cc=t=>t instanceof Date,ar=t=>t==null;const GD=t=>typeof t=="object";var pn=t=>!ar(t)&&!Array.isArray(t)&&GD(t)&&!cc(t),qne=t=>pn(t)&&t.target?bf(t.target)?t.target.checked:t.target.value:t,Wne=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,Hne=(t,e)=>t.has(Wne(e)),Gne=t=>{const e=t.constructor&&t.constructor.prototype;return pn(e)&&e.hasOwnProperty("isPrototypeOf")},Dj=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Yr(t){let e;const n=Array.isArray(t);if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(Dj&&(t instanceof Blob||t instanceof FileList))&&(n||pn(t)))if(e=n?[]:{},!n&&!Gne(t))e=t;else for(const r in t)t.hasOwnProperty(r)&&(e[r]=Yr(t[r]));else return t;return e}var Bv=t=>Array.isArray(t)?t.filter(Boolean):[],nn=t=>t===void 0,we=(t,e,n)=>{if(!e||!pn(t))return n;const r=Bv(e.split(/[,[\].]+?/)).reduce((i,a)=>ar(i)?i:i[a],t);return nn(r)||r===t?nn(t[e])?n:t[e]:r},$s=t=>typeof t=="boolean",Oj=t=>/^\w*$/.test(t),KD=t=>Bv(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Nt=(t,e,n)=>{let r=-1;const i=Oj(e)?[e]:KD(e),a=i.length,o=a-1;for(;++r<a;){const l=i[r];let c=n;if(r!==o){const u=t[l];c=pn(u)||Array.isArray(u)?u:isNaN(+i[r+1])?{}:[]}if(l==="__proto__")return;t[l]=c,t=t[l]}return t};const WE={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},xs={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},_i={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};me.createContext(null);var Kne=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const a in t)Object.defineProperty(i,a,{get:()=>{const o=a;return e._proxyFormState[o]!==xs.all&&(e._proxyFormState[o]=!r||xs.all),t[o]}});return i},xr=t=>pn(t)&&!Object.keys(t).length,Yne=(t,e,n,r)=>{n(t);const{name:i,...a}=t;return xr(a)||Object.keys(a).length>=Object.keys(e).length||Object.keys(a).find(o=>e[o]===xs.all)},ep=t=>Array.isArray(t)?t:[t];function Qne(t){const e=me.useRef(t);e.current=t,me.useEffect(()=>{const n=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{n&&n.unsubscribe()}},[t.disabled])}var Qs=t=>typeof t=="string",Xne=(t,e,n,r,i)=>Qs(t)?(r&&e.watch.add(t),we(n,t,i)):Array.isArray(t)?t.map(a=>(r&&e.watch.add(a),we(n,a))):(r&&(e.watchAll=!0),n),YD=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},HE=t=>({isOnSubmit:!t||t===xs.onSubmit,isOnBlur:t===xs.onBlur,isOnChange:t===xs.onChange,isOnAll:t===xs.all,isOnTouch:t===xs.onTouched}),GE=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Md=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const a=we(t,i);if(a){const{_f:o,...l}=a;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(Md(l,e))break}else if(pn(l)&&Md(l,e))break}}};var Zne=(t,e,n)=>{const r=ep(we(t,n));return Nt(r,"root",e[n]),Nt(t,n,r),t},Lj=t=>t.type==="file",Ri=t=>typeof t=="function",ug=t=>{if(!Dj)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},tp=t=>Qs(t),Vj=t=>t.type==="radio",dg=t=>t instanceof RegExp;const KE={value:!1,isValid:!1},YE={value:!0,isValid:!0};var QD=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!nn(t[0].attributes.value)?nn(t[0].value)||t[0].value===""?YE:{value:t[0].value,isValid:!0}:YE:KE}return KE};const QE={isValid:!1,value:null};var XD=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,QE):QE;function XE(t,e,n="validate"){if(tp(t)||Array.isArray(t)&&t.every(tp)||$s(t)&&!t)return{type:n,message:tp(t)?t:"",ref:e}}var ql=t=>pn(t)&&!dg(t)?t:{value:t,message:""},ZE=async(t,e,n,r,i)=>{const{ref:a,refs:o,required:l,maxLength:c,minLength:u,min:d,max:f,pattern:m,validate:v,name:y,valueAsNumber:w,mount:b,disabled:x}=t._f,g=we(e,y);if(!b||x)return{};const _=o?o[0]:a,E=A=>{r&&_.reportValidity&&(_.setCustomValidity($s(A)?"":A||""),_.reportValidity())},S={},O=Vj(a),I=bf(a),k=O||I,R=(w||Lj(a))&&nn(a.value)&&nn(g)||ug(a)&&a.value===""||g===""||Array.isArray(g)&&!g.length,N=YD.bind(null,y,n,S),P=(A,T,U,H=_i.maxLength,z=_i.minLength)=>{const V=A?T:U;S[y]={type:A?H:z,message:V,ref:a,...N(A?H:z,V)}};if(i?!Array.isArray(g)||!g.length:l&&(!k&&(R||ar(g))||$s(g)&&!g||I&&!QD(o).isValid||O&&!XD(o).isValid)){const{value:A,message:T}=tp(l)?{value:!!l,message:l}:ql(l);if(A&&(S[y]={type:_i.required,message:T,ref:_,...N(_i.required,T)},!n))return E(T),S}if(!R&&(!ar(d)||!ar(f))){let A,T;const U=ql(f),H=ql(d);if(!ar(g)&&!isNaN(g)){const z=a.valueAsNumber||g&&+g;ar(U.value)||(A=z>U.value),ar(H.value)||(T=z<H.value)}else{const z=a.valueAsDate||new Date(g),V=L=>new Date(new Date().toDateString()+" "+L),M=a.type=="time",$=a.type=="week";Qs(U.value)&&g&&(A=M?V(g)>V(U.value):$?g>U.value:z>new Date(U.value)),Qs(H.value)&&g&&(T=M?V(g)<V(H.value):$?g<H.value:z<new Date(H.value))}if((A||T)&&(P(!!A,U.message,H.message,_i.max,_i.min),!n))return E(S[y].message),S}if((c||u)&&!R&&(Qs(g)||i&&Array.isArray(g))){const A=ql(c),T=ql(u),U=!ar(A.value)&&g.length>+A.value,H=!ar(T.value)&&g.length<+T.value;if((U||H)&&(P(U,A.message,T.message),!n))return E(S[y].message),S}if(m&&!R&&Qs(g)){const{value:A,message:T}=ql(m);if(dg(A)&&!g.match(A)&&(S[y]={type:_i.pattern,message:T,ref:a,...N(_i.pattern,T)},!n))return E(T),S}if(v){if(Ri(v)){const A=await v(g,e),T=XE(A,_);if(T&&(S[y]={...T,...N(_i.validate,T.message)},!n))return E(T.message),S}else if(pn(v)){let A={};for(const T in v){if(!xr(A)&&!n)break;const U=XE(await v[T](g,e),_,T);U&&(A={...U,...N(T,U.message)},E(U.message),n&&(S[y]=A))}if(!xr(A)&&(S[y]={ref:_,...A},!n))return S}}return E(!0),S};function Jne(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=nn(t)?r++:t[e[r++]];return t}function ere(t){for(const e in t)if(t.hasOwnProperty(e)&&!nn(t[e]))return!1;return!0}function xn(t,e){const n=Array.isArray(e)?e:Oj(e)?[e]:KD(e),r=n.length===1?t:Jne(t,n),i=n.length-1,a=n[i];return r&&delete r[a],i!==0&&(pn(r)&&xr(r)||Array.isArray(r)&&ere(r))&&xn(t,n.slice(0,-1)),t}var _y=()=>{let t=[];return{get observers(){return t},next:i=>{for(const a of t)a.next&&a.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(a=>a!==i)}}),unsubscribe:()=>{t=[]}}},hg=t=>ar(t)||!GD(t);function Ea(t,e){if(hg(t)||hg(e))return t===e;if(cc(t)&&cc(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n){const a=t[i];if(!r.includes(i))return!1;if(i!=="ref"){const o=e[i];if(cc(a)&&cc(o)||pn(a)&&pn(o)||Array.isArray(a)&&Array.isArray(o)?!Ea(a,o):a!==o)return!1}}return!0}var ZD=t=>t.type==="select-multiple",tre=t=>Vj(t)||bf(t),Ny=t=>ug(t)&&t.isConnected,JD=t=>{for(const e in t)if(Ri(t[e]))return!0;return!1};function fg(t,e={}){const n=Array.isArray(t);if(pn(t)||n)for(const r in t)Array.isArray(t[r])||pn(t[r])&&!JD(t[r])?(e[r]=Array.isArray(t[r])?[]:{},fg(t[r],e[r])):ar(t[r])||(e[r]=!0);return e}function eO(t,e,n){const r=Array.isArray(t);if(pn(t)||r)for(const i in t)Array.isArray(t[i])||pn(t[i])&&!JD(t[i])?nn(e)||hg(n[i])?n[i]=Array.isArray(t[i])?fg(t[i],[]):{...fg(t[i])}:eO(t[i],ar(e)?{}:e[i],n[i]):n[i]=!Ea(t[i],e[i]);return n}var bm=(t,e)=>eO(t,e,fg(e)),tO=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>nn(t)?t:e?t===""?NaN:t&&+t:n&&Qs(t)?new Date(t):r?r(t):t;function Sy(t){const e=t.ref;if(!(t.refs?t.refs.every(n=>n.disabled):e.disabled))return Lj(e)?e.files:Vj(e)?XD(t.refs).value:ZD(e)?[...e.selectedOptions].map(({value:n})=>n):bf(e)?QD(t.refs).value:tO(nn(e.value)?t.ref.value:e.value,t)}var nre=(t,e,n,r)=>{const i={};for(const a of t){const o=we(e,a);o&&Nt(i,a,o._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},nd=t=>nn(t)?t:dg(t)?t.source:pn(t)?dg(t.value)?t.value.source:t.value:t;const JE="AsyncFunction";var rre=t=>(!t||!t.validate)&&!!(Ri(t.validate)&&t.validate.constructor.name===JE||pn(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===JE)),sre=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function eC(t,e,n){const r=we(t,n);if(r||Oj(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const a=i.join("."),o=we(e,a),l=we(t,a);if(o&&!Array.isArray(o)&&n!==a)return{name:n};if(l&&l.type)return{name:a,error:l};i.pop()}return{name:n}}var ire=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,are=(t,e)=>!Bv(we(t,e)).length&&xn(t,e);const ore={mode:xs.onSubmit,reValidateMode:xs.onChange,shouldFocusError:!0};function lre(t={}){let e={...ore,...t},n={submitCount:0,isDirty:!1,isLoading:Ri(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=pn(e.defaultValues)||pn(e.values)?Yr(e.defaultValues||e.values)||{}:{},a=e.shouldUnregister?{}:Yr(i),o={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},f={values:_y(),array:_y(),state:_y()},m=HE(e.mode),v=HE(e.reValidateMode),y=e.criteriaMode===xs.all,w=F=>G=>{clearTimeout(u),u=setTimeout(F,G)},b=async F=>{if(d.isValid||F){const G=e.resolver?xr((await k()).errors):await N(r,!0);G!==n.isValid&&f.state.next({isValid:G})}},x=(F,G)=>{(d.isValidating||d.validatingFields)&&((F||Array.from(l.mount)).forEach(Z=>{Z&&(G?Nt(n.validatingFields,Z,G):xn(n.validatingFields,Z))}),f.state.next({validatingFields:n.validatingFields,isValidating:!xr(n.validatingFields)}))},g=(F,G=[],Z,pe,ue=!0,ae=!0)=>{if(pe&&Z){if(o.action=!0,ae&&Array.isArray(we(r,F))){const Ie=Z(we(r,F),pe.argA,pe.argB);ue&&Nt(r,F,Ie)}if(ae&&Array.isArray(we(n.errors,F))){const Ie=Z(we(n.errors,F),pe.argA,pe.argB);ue&&Nt(n.errors,F,Ie),are(n.errors,F)}if(d.touchedFields&&ae&&Array.isArray(we(n.touchedFields,F))){const Ie=Z(we(n.touchedFields,F),pe.argA,pe.argB);ue&&Nt(n.touchedFields,F,Ie)}d.dirtyFields&&(n.dirtyFields=bm(i,a)),f.state.next({name:F,isDirty:A(F,G),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Nt(a,F,G)},_=(F,G)=>{Nt(n.errors,F,G),f.state.next({errors:n.errors})},E=F=>{n.errors=F,f.state.next({errors:n.errors,isValid:!1})},S=(F,G,Z,pe)=>{const ue=we(r,F);if(ue){const ae=we(a,F,nn(Z)?we(i,F):Z);nn(ae)||pe&&pe.defaultChecked||G?Nt(a,F,G?ae:Sy(ue._f)):H(F,ae),o.mount&&b()}},O=(F,G,Z,pe,ue)=>{let ae=!1,Ie=!1;const lt={name:F},rt=!!(we(r,F)&&we(r,F)._f&&we(r,F)._f.disabled);if(!Z||pe){d.isDirty&&(Ie=n.isDirty,n.isDirty=lt.isDirty=A(),ae=Ie!==lt.isDirty);const it=rt||Ea(we(i,F),G);Ie=!!(!rt&&we(n.dirtyFields,F)),it||rt?xn(n.dirtyFields,F):Nt(n.dirtyFields,F,!0),lt.dirtyFields=n.dirtyFields,ae=ae||d.dirtyFields&&Ie!==!it}if(Z){const it=we(n.touchedFields,F);it||(Nt(n.touchedFields,F,Z),lt.touchedFields=n.touchedFields,ae=ae||d.touchedFields&&it!==Z)}return ae&&ue&&f.state.next(lt),ae?lt:{}},I=(F,G,Z,pe)=>{const ue=we(n.errors,F),ae=d.isValid&&$s(G)&&n.isValid!==G;if(t.delayError&&Z?(c=w(()=>_(F,Z)),c(t.delayError)):(clearTimeout(u),c=null,Z?Nt(n.errors,F,Z):xn(n.errors,F)),(Z?!Ea(ue,Z):ue)||!xr(pe)||ae){const Ie={...pe,...ae&&$s(G)?{isValid:G}:{},errors:n.errors,name:F};n={...n,...Ie},f.state.next(Ie)}},k=async F=>{x(F,!0);const G=await e.resolver(a,e.context,nre(F||l.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return x(F),G},R=async F=>{const{errors:G}=await k(F);if(F)for(const Z of F){const pe=we(G,Z);pe?Nt(n.errors,Z,pe):xn(n.errors,Z)}else n.errors=G;return G},N=async(F,G,Z={valid:!0})=>{for(const pe in F){const ue=F[pe];if(ue){const{_f:ae,...Ie}=ue;if(ae){const lt=l.array.has(ae.name),rt=ue._f&&rre(ue._f);rt&&d.validatingFields&&x([pe],!0);const it=await ZE(ue,a,y,e.shouldUseNativeValidation&&!G,lt);if(rt&&d.validatingFields&&x([pe]),it[ae.name]&&(Z.valid=!1,G))break;!G&&(we(it,ae.name)?lt?Zne(n.errors,it,ae.name):Nt(n.errors,ae.name,it[ae.name]):xn(n.errors,ae.name))}!xr(Ie)&&await N(Ie,G,Z)}}return Z.valid},P=()=>{for(const F of l.unMount){const G=we(r,F);G&&(G._f.refs?G._f.refs.every(Z=>!Ny(Z)):!Ny(G._f.ref))&&ut(F)}l.unMount=new Set},A=(F,G)=>(F&&G&&Nt(a,F,G),!Ea(W(),i)),T=(F,G,Z)=>Xne(F,l,{...o.mount?a:nn(G)?i:Qs(F)?{[F]:G}:G},Z,G),U=F=>Bv(we(o.mount?a:i,F,t.shouldUnregister?we(i,F,[]):[])),H=(F,G,Z={})=>{const pe=we(r,F);let ue=G;if(pe){const ae=pe._f;ae&&(!ae.disabled&&Nt(a,F,tO(G,ae)),ue=ug(ae.ref)&&ar(G)?"":G,ZD(ae.ref)?[...ae.ref.options].forEach(Ie=>Ie.selected=ue.includes(Ie.value)):ae.refs?bf(ae.ref)?ae.refs.length>1?ae.refs.forEach(Ie=>(!Ie.defaultChecked||!Ie.disabled)&&(Ie.checked=Array.isArray(ue)?!!ue.find(lt=>lt===Ie.value):ue===Ie.value)):ae.refs[0]&&(ae.refs[0].checked=!!ue):ae.refs.forEach(Ie=>Ie.checked=Ie.value===ue):Lj(ae.ref)?ae.ref.value="":(ae.ref.value=ue,ae.ref.type||f.values.next({name:F,values:{...a}})))}(Z.shouldDirty||Z.shouldTouch)&&O(F,ue,Z.shouldTouch,Z.shouldDirty,!0),Z.shouldValidate&&L(F)},z=(F,G,Z)=>{for(const pe in G){const ue=G[pe],ae=`${F}.${pe}`,Ie=we(r,ae);(l.array.has(F)||!hg(ue)||Ie&&!Ie._f)&&!cc(ue)?z(ae,ue,Z):H(ae,ue,Z)}},V=(F,G,Z={})=>{const pe=we(r,F),ue=l.array.has(F),ae=Yr(G);Nt(a,F,ae),ue?(f.array.next({name:F,values:{...a}}),(d.isDirty||d.dirtyFields)&&Z.shouldDirty&&f.state.next({name:F,dirtyFields:bm(i,a),isDirty:A(F,ae)})):pe&&!pe._f&&!ar(ae)?z(F,ae,Z):H(F,ae,Z),GE(F,l)&&f.state.next({...n}),f.values.next({name:o.mount?F:void 0,values:{...a}})},M=async F=>{o.mount=!0;const G=F.target;let Z=G.name,pe=!0;const ue=we(r,Z),ae=()=>G.type?Sy(ue._f):qne(F),Ie=lt=>{pe=Number.isNaN(lt)||Ea(lt,we(a,Z,lt))};if(ue){let lt,rt;const it=ae(),Kr=F.type===WE.BLUR||F.type===WE.FOCUS_OUT,Nf=!sre(ue._f)&&!e.resolver&&!we(n.errors,Z)&&!ue._f.deps||ire(Kr,we(n.touchedFields,Z),n.isSubmitted,v,m),Al=GE(Z,l,Kr);Nt(a,Z,it),Kr?(ue._f.onBlur&&ue._f.onBlur(F),c&&c(0)):ue._f.onChange&&ue._f.onChange(F);const Tu=O(Z,it,Kr,!1),_o=!xr(Tu)||Al;if(!Kr&&f.values.next({name:Z,type:F.type,values:{...a}}),Nf)return d.isValid&&(t.mode==="onBlur"?Kr&&b():b()),_o&&f.state.next({name:Z,...Al?{}:Tu});if(!Kr&&Al&&f.state.next({...n}),e.resolver){const{errors:ku}=await k([Z]);if(Ie(it),pe){const Sf=eC(n.errors,r,Z),Rl=eC(ku,r,Sf.name||Z);lt=Rl.error,Z=Rl.name,rt=xr(ku)}}else x([Z],!0),lt=(await ZE(ue,a,y,e.shouldUseNativeValidation))[Z],x([Z]),Ie(it),pe&&(lt?rt=!1:d.isValid&&(rt=await N(r,!0)));pe&&(ue._f.deps&&L(ue._f.deps),I(Z,rt,lt,Tu))}},$=(F,G)=>{if(we(n.errors,G)&&F.focus)return F.focus(),1},L=async(F,G={})=>{let Z,pe;const ue=ep(F);if(e.resolver){const ae=await R(nn(F)?F:ue);Z=xr(ae),pe=F?!ue.some(Ie=>we(ae,Ie)):Z}else F?(pe=(await Promise.all(ue.map(async ae=>{const Ie=we(r,ae);return await N(Ie&&Ie._f?{[ae]:Ie}:Ie)}))).every(Boolean),!(!pe&&!n.isValid)&&b()):pe=Z=await N(r);return f.state.next({...!Qs(F)||d.isValid&&Z!==n.isValid?{}:{name:F},...e.resolver||!F?{isValid:Z}:{},errors:n.errors}),G.shouldFocus&&!pe&&Md(r,$,F?ue:l.mount),pe},W=F=>{const G={...o.mount?a:i};return nn(F)?G:Qs(F)?we(G,F):F.map(Z=>we(G,Z))},ne=(F,G)=>({invalid:!!we((G||n).errors,F),isDirty:!!we((G||n).dirtyFields,F),error:we((G||n).errors,F),isValidating:!!we(n.validatingFields,F),isTouched:!!we((G||n).touchedFields,F)}),ye=F=>{F&&ep(F).forEach(G=>xn(n.errors,G)),f.state.next({errors:F?n.errors:{}})},Xe=(F,G,Z)=>{const pe=(we(r,F,{_f:{}})._f||{}).ref,ue=we(n.errors,F)||{},{ref:ae,message:Ie,type:lt,...rt}=ue;Nt(n.errors,F,{...rt,...G,ref:pe}),f.state.next({name:F,errors:n.errors,isValid:!1}),Z&&Z.shouldFocus&&pe&&pe.focus&&pe.focus()},xt=(F,G)=>Ri(F)?f.values.subscribe({next:Z=>F(T(void 0,G),Z)}):T(F,G,!0),ut=(F,G={})=>{for(const Z of F?ep(F):l.mount)l.mount.delete(Z),l.array.delete(Z),G.keepValue||(xn(r,Z),xn(a,Z)),!G.keepError&&xn(n.errors,Z),!G.keepDirty&&xn(n.dirtyFields,Z),!G.keepTouched&&xn(n.touchedFields,Z),!G.keepIsValidating&&xn(n.validatingFields,Z),!e.shouldUnregister&&!G.keepDefaultValue&&xn(i,Z);f.values.next({values:{...a}}),f.state.next({...n,...G.keepDirty?{isDirty:A()}:{}}),!G.keepIsValid&&b()},ve=({disabled:F,name:G,field:Z,fields:pe,value:ue})=>{if($s(F)&&o.mount||F){const ae=F?void 0:nn(ue)?Sy(Z?Z._f:we(pe,G)._f):ue;Nt(a,G,ae),O(G,ae,!1,!1,!0)}},Qe=(F,G={})=>{let Z=we(r,F);const pe=$s(G.disabled)||$s(t.disabled);return Nt(r,F,{...Z||{},_f:{...Z&&Z._f?Z._f:{ref:{name:F}},name:F,mount:!0,...G}}),l.mount.add(F),Z?ve({field:Z,disabled:$s(G.disabled)?G.disabled:t.disabled,name:F,value:G.value}):S(F,!0,G.value),{...pe?{disabled:G.disabled||t.disabled}:{},...e.progressive?{required:!!G.required,min:nd(G.min),max:nd(G.max),minLength:nd(G.minLength),maxLength:nd(G.maxLength),pattern:nd(G.pattern)}:{},name:F,onChange:M,onBlur:M,ref:ue=>{if(ue){Qe(F,G),Z=we(r,F);const ae=nn(ue.value)&&ue.querySelectorAll&&ue.querySelectorAll("input,select,textarea")[0]||ue,Ie=tre(ae),lt=Z._f.refs||[];if(Ie?lt.find(rt=>rt===ae):ae===Z._f.ref)return;Nt(r,F,{_f:{...Z._f,...Ie?{refs:[...lt.filter(Ny),ae,...Array.isArray(we(i,F))?[{}]:[]],ref:{type:ae.type,name:F}}:{ref:ae}}}),S(F,!1,void 0,ae)}else Z=we(r,F,{}),Z._f&&(Z._f.mount=!1),(e.shouldUnregister||G.shouldUnregister)&&!(Hne(l.array,F)&&o.action)&&l.unMount.add(F)}}},X=()=>e.shouldFocusError&&Md(r,$,l.mount),de=F=>{$s(F)&&(f.state.next({disabled:F}),Md(r,(G,Z)=>{const pe=we(r,Z);pe&&(G.disabled=pe._f.disabled||F,Array.isArray(pe._f.refs)&&pe._f.refs.forEach(ue=>{ue.disabled=pe._f.disabled||F}))},0,!1))},ke=(F,G)=>async Z=>{let pe;Z&&(Z.preventDefault&&Z.preventDefault(),Z.persist&&Z.persist());let ue=Yr(a);if(f.state.next({isSubmitting:!0}),e.resolver){const{errors:ae,values:Ie}=await k();n.errors=ae,ue=Ie}else await N(r);if(xn(n.errors,"root"),xr(n.errors)){f.state.next({errors:{}});try{await F(ue,Z)}catch(ae){pe=ae}}else G&&await G({...n.errors},Z),X(),setTimeout(X);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:xr(n.errors)&&!pe,submitCount:n.submitCount+1,errors:n.errors}),pe)throw pe},Le=(F,G={})=>{we(r,F)&&(nn(G.defaultValue)?V(F,Yr(we(i,F))):(V(F,G.defaultValue),Nt(i,F,Yr(G.defaultValue))),G.keepTouched||xn(n.touchedFields,F),G.keepDirty||(xn(n.dirtyFields,F),n.isDirty=G.defaultValue?A(F,Yr(we(i,F))):A()),G.keepError||(xn(n.errors,F),d.isValid&&b()),f.state.next({...n}))},He=(F,G={})=>{const Z=F?Yr(F):i,pe=Yr(Z),ue=xr(F),ae=ue?i:pe;if(G.keepDefaultValues||(i=Z),!G.keepValues){if(G.keepDirtyValues)for(const Ie of l.mount)we(n.dirtyFields,Ie)?Nt(ae,Ie,we(a,Ie)):V(Ie,we(ae,Ie));else{if(Dj&&nn(F))for(const Ie of l.mount){const lt=we(r,Ie);if(lt&&lt._f){const rt=Array.isArray(lt._f.refs)?lt._f.refs[0]:lt._f.ref;if(ug(rt)){const it=rt.closest("form");if(it){it.reset();break}}}}r={}}a=t.shouldUnregister?G.keepDefaultValues?Yr(i):{}:Yr(ae),f.array.next({values:{...ae}}),f.values.next({values:{...ae}})}l={mount:G.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!G.keepIsValid||!!G.keepDirtyValues,o.watch=!!t.shouldUnregister,f.state.next({submitCount:G.keepSubmitCount?n.submitCount:0,isDirty:ue?!1:G.keepDirty?n.isDirty:!!(G.keepDefaultValues&&!Ea(F,i)),isSubmitted:G.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:ue?{}:G.keepDirtyValues?G.keepDefaultValues&&a?bm(i,a):n.dirtyFields:G.keepDefaultValues&&F?bm(i,F):G.keepDirty?n.dirtyFields:{},touchedFields:G.keepTouched?n.touchedFields:{},errors:G.keepErrors?n.errors:{},isSubmitSuccessful:G.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},Tt=(F,G)=>He(Ri(F)?F(a):F,G);return{control:{register:Qe,unregister:ut,getFieldState:ne,handleSubmit:ke,setError:Xe,_executeSchema:k,_getWatch:T,_getDirty:A,_updateValid:b,_removeUnmounted:P,_updateFieldArray:g,_updateDisabledField:ve,_getFieldArray:U,_reset:He,_resetDefaultValues:()=>Ri(e.defaultValues)&&e.defaultValues().then(F=>{Tt(F,e.resetOptions),f.state.next({isLoading:!1})}),_updateFormState:F=>{n={...n,...F}},_disableForm:de,_subjects:f,_proxyFormState:d,_setErrors:E,get _fields(){return r},get _formValues(){return a},get _state(){return o},set _state(F){o=F},get _defaultValues(){return i},get _names(){return l},set _names(F){l=F},get _formState(){return n},set _formState(F){n=F},get _options(){return e},set _options(F){e={...e,...F}}},trigger:L,register:Qe,handleSubmit:ke,watch:xt,setValue:V,getValues:W,reset:Tt,resetField:Le,clearErrors:ye,unregister:ut,setError:Xe,setFocus:(F,G={})=>{const Z=we(r,F),pe=Z&&Z._f;if(pe){const ue=pe.refs?pe.refs[0]:pe.ref;ue.focus&&(ue.focus(),G.shouldSelect&&ue.select())}},getFieldState:ne}}function Qo(t={}){const e=me.useRef(),n=me.useRef(),[r,i]=me.useState({isDirty:!1,isValidating:!1,isLoading:Ri(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:Ri(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...lre(t),formState:r});const a=e.current.control;return a._options=t,Qne({subject:a._subjects.state,next:o=>{Yne(o,a._proxyFormState,a._updateFormState)&&i({...a._formState})}}),me.useEffect(()=>a._disableForm(t.disabled),[a,t.disabled]),me.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==r.isDirty&&a._subjects.state.next({isDirty:o})}},[a,r.isDirty]),me.useEffect(()=>{t.values&&!Ea(t.values,n.current)?(a._reset(t.values,a._options.resetOptions),n.current=t.values,i(o=>({...o}))):a._resetDefaultValues()},[t.values,a]),me.useEffect(()=>{t.errors&&a._setErrors(t.errors)},[t.errors,a]),me.useEffect(()=>{a._state.mount||(a._updateValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),me.useEffect(()=>{t.shouldUnregister&&a._subjects.values.next({values:a._getWatch()})},[t.shouldUnregister,a]),e.current.formState=Kne(r,a),e.current}const tC=(t,e,n)=>{if(t&&"reportValidity"in t){const r=we(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},nO=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?tC(r.ref,n,t):r.refs&&r.refs.forEach(i=>tC(i,n,t))}},cre=(t,e)=>{e.shouldUseNativeValidation&&nO(t,e);const n={};for(const r in t){const i=we(e.fields,r),a=Object.assign(t[r]||{},{ref:i&&i.ref});if(ure(e.names||Object.keys(t),r)){const o=Object.assign({},we(n,r));Nt(o,"root",a),Nt(n,r,o)}else Nt(n,r,a)}return n},ure=(t,e)=>t.some(n=>n.startsWith(e+"."));var dre=function(t,e){for(var n={};t.length;){var r=t[0],i=r.code,a=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var l=r.unionErrors[0].errors[0];n[o]={message:l.message,type:l.code}}else n[o]={message:a,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(d){return d.errors.forEach(function(f){return t.push(f)})}),e){var c=n[o].types,u=c&&c[r.code];n[o]=YD(o,e,n,i,u?[].concat(u,r.message):r.message)}t.shift()}return n},Xo=function(t,e,n){return n===void 0&&(n={}),function(r,i,a){try{return Promise.resolve(function(o,l){try{var c=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(u){return a.shouldUseNativeValidation&&nO({},a),{errors:{},values:n.raw?r:u}})}catch(u){return l(u)}return c&&c.then?c.then(void 0,l):c}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:cre(dre(o.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw o}))}catch(o){return Promise.reject(o)}}},ot;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const a={};for(const o of i)a[o]=o;return a},t.getValidEnumValues=i=>{const a=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),o={};for(const l of a)o[l]=i[l];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(a){return i[a]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&a.push(o);return a},t.find=(i,a)=>{for(const o of i)if(a(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,a=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}t.joinValues=r,t.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(ot||(ot={}));var _w;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(_w||(_w={}));const xe=ot.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ca=t=>{switch(typeof t){case"undefined":return xe.undefined;case"string":return xe.string;case"number":return isNaN(t)?xe.nan:xe.number;case"boolean":return xe.boolean;case"function":return xe.function;case"bigint":return xe.bigint;case"symbol":return xe.symbol;case"object":return Array.isArray(t)?xe.array:t===null?xe.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?xe.promise:typeof Map<"u"&&t instanceof Map?xe.map:typeof Set<"u"&&t instanceof Set?xe.set:typeof Date<"u"&&t instanceof Date?xe.date:xe.object;default:return xe.unknown}},ie=ot.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),hre=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class $r extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(a){return a.message},r={_errors:[]},i=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let l=r,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(n(o))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return i(this),r}static assert(e){if(!(e instanceof $r))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ot.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}$r.create=t=>new $r(t);const nu=(t,e)=>{let n;switch(t.code){case ie.invalid_type:t.received===xe.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ie.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,ot.jsonStringifyReplacer)}`;break;case ie.unrecognized_keys:n=`Unrecognized key(s) in object: ${ot.joinValues(t.keys,", ")}`;break;case ie.invalid_union:n="Invalid input";break;case ie.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${ot.joinValues(t.options)}`;break;case ie.invalid_enum_value:n=`Invalid enum value. Expected ${ot.joinValues(t.options)}, received '${t.received}'`;break;case ie.invalid_arguments:n="Invalid function arguments";break;case ie.invalid_return_type:n="Invalid function return type";break;case ie.invalid_date:n="Invalid date";break;case ie.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:ot.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ie.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ie.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ie.custom:n="Invalid input";break;case ie.invalid_intersection_types:n="Intersection results could not be merged";break;case ie.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ie.not_finite:n="Number must be finite";break;default:n=e.defaultError,ot.assertNever(t)}return{message:n}};let rO=nu;function fre(t){rO=t}function mg(){return rO}const pg=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,a=[...n,...i.path||[]],o={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let l="";const c=r.filter(u=>!!u).slice().reverse();for(const u of c)l=u(o,{data:e,defaultError:l}).message;return{...i,path:a,message:l}},mre=[];function ge(t,e){const n=mg(),r=pg({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===nu?void 0:nu].filter(i=>!!i)});t.common.issues.push(r)}class er{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return Ue;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const a=await i.key,o=await i.value;r.push({key:a,value:o})}return er.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:a,value:o}=i;if(a.status==="aborted"||o.status==="aborted")return Ue;a.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[a.value]=o.value)}return{status:e.value,value:r}}}const Ue=Object.freeze({status:"aborted"}),uc=t=>({status:"dirty",value:t}),mr=t=>({status:"valid",value:t}),Nw=t=>t.status==="aborted",Sw=t=>t.status==="dirty",bh=t=>t.status==="valid",jh=t=>typeof Promise<"u"&&t instanceof Promise;function gg(t,e,n,r){if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function sO(t,e,n,r,i){if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var Re;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Re||(Re={}));var gd,vd;class di{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const nC=(t,e)=>{if(bh(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new $r(t.common.issues);return this._error=n,this._error}}};function Ge(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,l)=>{var c,u;const{message:d}=t;return o.code==="invalid_enum_value"?{message:d??l.defaultError}:typeof l.data>"u"?{message:(c=d??r)!==null&&c!==void 0?c:l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:(u=d??n)!==null&&u!==void 0?u:l.defaultError}},description:i}}class Ye{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Ca(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Ca(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new er,ctx:{common:e.parent.common,data:e.data,parsedType:Ca(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(jh(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const i={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ca(e)},a=this._parseSync({data:e,path:i.path,parent:i});return nC(i,a)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ca(e)},i=this._parse({data:e,path:r.path,parent:r}),a=await(jh(i)?i:Promise.resolve(i));return nC(r,a)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,a)=>{const o=e(i),l=()=>a.addIssue({code:ie.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new Ds({schema:this,typeName:Ve.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return ai.create(this,this._def)}nullable(){return co.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ts.create(this,this._def)}promise(){return su.create(this,this._def)}or(e){return Eh.create([this,e],this._def)}and(e){return Ch.create(this,e,this._def)}transform(e){return new Ds({...Ge(this._def),schema:this,typeName:Ve.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Ah({...Ge(this._def),innerType:this,defaultValue:n,typeName:Ve.ZodDefault})}brand(){return new Fj({typeName:Ve.ZodBranded,type:this,...Ge(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Rh({...Ge(this._def),innerType:this,catchValue:n,typeName:Ve.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return jf.create(this,e)}readonly(){return Mh.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const pre=/^c[^\s-]{8,}$/i,gre=/^[0-9a-z]+$/,vre=/^[0-9A-HJKMNP-TV-Z]{26}$/,xre=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,yre=/^[a-z0-9_-]{21}$/i,wre=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,bre=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,jre="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Ey;const _re=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Nre=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Sre=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,iO="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Ere=new RegExp(`^${iO}$`);function aO(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function Cre(t){return new RegExp(`^${aO(t)}$`)}function oO(t){let e=`${iO}T${aO(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function Tre(t,e){return!!((e==="v4"||!e)&&_re.test(t)||(e==="v6"||!e)&&Nre.test(t))}class ws extends Ye{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==xe.string){const a=this._getOrReturnCtx(e);return ge(a,{code:ie.invalid_type,expected:xe.string,received:a.parsedType}),Ue}const r=new er;let i;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(i=this._getOrReturnCtx(e,i),ge(i,{code:ie.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")e.data.length>a.value&&(i=this._getOrReturnCtx(e,i),ge(i,{code:ie.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){const o=e.data.length>a.value,l=e.data.length<a.value;(o||l)&&(i=this._getOrReturnCtx(e,i),o?ge(i,{code:ie.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):l&&ge(i,{code:ie.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")bre.test(e.data)||(i=this._getOrReturnCtx(e,i),ge(i,{validation:"email",code:ie.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")Ey||(Ey=new RegExp(jre,"u")),Ey.test(e.data)||(i=this._getOrReturnCtx(e,i),ge(i,{validation:"emoji",code:ie.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")xre.test(e.data)||(i=this._getOrReturnCtx(e,i),ge(i,{validation:"uuid",code:ie.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")yre.test(e.data)||(i=this._getOrReturnCtx(e,i),ge(i,{validation:"nanoid",code:ie.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")pre.test(e.data)||(i=this._getOrReturnCtx(e,i),ge(i,{validation:"cuid",code:ie.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")gre.test(e.data)||(i=this._getOrReturnCtx(e,i),ge(i,{validation:"cuid2",code:ie.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")vre.test(e.data)||(i=this._getOrReturnCtx(e,i),ge(i,{validation:"ulid",code:ie.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),ge(i,{validation:"url",code:ie.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),ge(i,{validation:"regex",code:ie.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(e,i),ge(i,{code:ie.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(i=this._getOrReturnCtx(e,i),ge(i,{code:ie.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(i=this._getOrReturnCtx(e,i),ge(i,{code:ie.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?oO(a).test(e.data)||(i=this._getOrReturnCtx(e,i),ge(i,{code:ie.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?Ere.test(e.data)||(i=this._getOrReturnCtx(e,i),ge(i,{code:ie.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?Cre(a).test(e.data)||(i=this._getOrReturnCtx(e,i),ge(i,{code:ie.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?wre.test(e.data)||(i=this._getOrReturnCtx(e,i),ge(i,{validation:"duration",code:ie.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?Tre(e.data,a.version)||(i=this._getOrReturnCtx(e,i),ge(i,{validation:"ip",code:ie.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?Sre.test(e.data)||(i=this._getOrReturnCtx(e,i),ge(i,{validation:"base64",code:ie.invalid_string,message:a.message}),r.dirty()):ot.assertNever(a);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:ie.invalid_string,...Re.errToObj(r)})}_addCheck(e){return new ws({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Re.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Re.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Re.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Re.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Re.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Re.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Re.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Re.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Re.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Re.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...Re.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Re.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Re.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Re.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Re.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Re.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Re.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Re.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Re.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Re.errToObj(n)})}nonempty(e){return this.min(1,Re.errToObj(e))}trim(){return new ws({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ws({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ws({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ws.create=t=>{var e;return new ws({checks:[],typeName:Ve.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ge(t)})};function kre(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,a=parseInt(t.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return a%o/Math.pow(10,i)}class ao extends Ye{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==xe.number){const a=this._getOrReturnCtx(e);return ge(a,{code:ie.invalid_type,expected:xe.number,received:a.parsedType}),Ue}let r;const i=new er;for(const a of this._def.checks)a.kind==="int"?ot.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),ge(r,{code:ie.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),ge(r,{code:ie.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),ge(r,{code:ie.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?kre(e.data,a.value)!==0&&(r=this._getOrReturnCtx(e,r),ge(r,{code:ie.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),ge(r,{code:ie.not_finite,message:a.message}),i.dirty()):ot.assertNever(a);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Re.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Re.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Re.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Re.toString(n))}setLimit(e,n,r,i){return new ao({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Re.toString(i)}]})}_addCheck(e){return new ao({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Re.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Re.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Re.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Re.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Re.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Re.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Re.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Re.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Re.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ot.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}ao.create=t=>new ao({checks:[],typeName:Ve.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Ge(t)});class oo extends Ye{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==xe.bigint){const a=this._getOrReturnCtx(e);return ge(a,{code:ie.invalid_type,expected:xe.bigint,received:a.parsedType}),Ue}let r;const i=new er;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),ge(r,{code:ie.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),ge(r,{code:ie.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),ge(r,{code:ie.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):ot.assertNever(a);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Re.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Re.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Re.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Re.toString(n))}setLimit(e,n,r,i){return new oo({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Re.toString(i)}]})}_addCheck(e){return new oo({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Re.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Re.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Re.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Re.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Re.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}oo.create=t=>{var e;return new oo({checks:[],typeName:Ve.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ge(t)})};class _h extends Ye{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==xe.boolean){const r=this._getOrReturnCtx(e);return ge(r,{code:ie.invalid_type,expected:xe.boolean,received:r.parsedType}),Ue}return mr(e.data)}}_h.create=t=>new _h({typeName:Ve.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Ge(t)});class vl extends Ye{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==xe.date){const a=this._getOrReturnCtx(e);return ge(a,{code:ie.invalid_type,expected:xe.date,received:a.parsedType}),Ue}if(isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return ge(a,{code:ie.invalid_date}),Ue}const r=new er;let i;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(i=this._getOrReturnCtx(e,i),ge(i,{code:ie.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(i=this._getOrReturnCtx(e,i),ge(i,{code:ie.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):ot.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new vl({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Re.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Re.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}vl.create=t=>new vl({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Ve.ZodDate,...Ge(t)});class vg extends Ye{_parse(e){if(this._getType(e)!==xe.symbol){const r=this._getOrReturnCtx(e);return ge(r,{code:ie.invalid_type,expected:xe.symbol,received:r.parsedType}),Ue}return mr(e.data)}}vg.create=t=>new vg({typeName:Ve.ZodSymbol,...Ge(t)});class Nh extends Ye{_parse(e){if(this._getType(e)!==xe.undefined){const r=this._getOrReturnCtx(e);return ge(r,{code:ie.invalid_type,expected:xe.undefined,received:r.parsedType}),Ue}return mr(e.data)}}Nh.create=t=>new Nh({typeName:Ve.ZodUndefined,...Ge(t)});class Sh extends Ye{_parse(e){if(this._getType(e)!==xe.null){const r=this._getOrReturnCtx(e);return ge(r,{code:ie.invalid_type,expected:xe.null,received:r.parsedType}),Ue}return mr(e.data)}}Sh.create=t=>new Sh({typeName:Ve.ZodNull,...Ge(t)});class ru extends Ye{constructor(){super(...arguments),this._any=!0}_parse(e){return mr(e.data)}}ru.create=t=>new ru({typeName:Ve.ZodAny,...Ge(t)});class Zo extends Ye{constructor(){super(...arguments),this._unknown=!0}_parse(e){return mr(e.data)}}Zo.create=t=>new Zo({typeName:Ve.ZodUnknown,...Ge(t)});class Ji extends Ye{_parse(e){const n=this._getOrReturnCtx(e);return ge(n,{code:ie.invalid_type,expected:xe.never,received:n.parsedType}),Ue}}Ji.create=t=>new Ji({typeName:Ve.ZodNever,...Ge(t)});class xg extends Ye{_parse(e){if(this._getType(e)!==xe.undefined){const r=this._getOrReturnCtx(e);return ge(r,{code:ie.invalid_type,expected:xe.void,received:r.parsedType}),Ue}return mr(e.data)}}xg.create=t=>new xg({typeName:Ve.ZodVoid,...Ge(t)});class Ts extends Ye{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==xe.array)return ge(n,{code:ie.invalid_type,expected:xe.array,received:n.parsedType}),Ue;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,l=n.data.length<i.exactLength.value;(o||l)&&(ge(n,{code:o?ie.too_big:ie.too_small,minimum:l?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(ge(n,{code:ie.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(ge(n,{code:ie.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,l)=>i.type._parseAsync(new di(n,o,n.path,l)))).then(o=>er.mergeArray(r,o));const a=[...n.data].map((o,l)=>i.type._parseSync(new di(n,o,n.path,l)));return er.mergeArray(r,a)}get element(){return this._def.type}min(e,n){return new Ts({...this._def,minLength:{value:e,message:Re.toString(n)}})}max(e,n){return new Ts({...this._def,maxLength:{value:e,message:Re.toString(n)}})}length(e,n){return new Ts({...this._def,exactLength:{value:e,message:Re.toString(n)}})}nonempty(e){return this.min(1,e)}}Ts.create=(t,e)=>new Ts({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Ve.ZodArray,...Ge(e)});function Yl(t){if(t instanceof Bt){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=ai.create(Yl(r))}return new Bt({...t._def,shape:()=>e})}else return t instanceof Ts?new Ts({...t._def,type:Yl(t.element)}):t instanceof ai?ai.create(Yl(t.unwrap())):t instanceof co?co.create(Yl(t.unwrap())):t instanceof hi?hi.create(t.items.map(e=>Yl(e))):t}class Bt extends Ye{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=ot.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==xe.object){const u=this._getOrReturnCtx(e);return ge(u,{code:ie.invalid_type,expected:xe.object,received:u.parsedType}),Ue}const{status:r,ctx:i}=this._processInputParams(e),{shape:a,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Ji&&this._def.unknownKeys==="strip"))for(const u in i.data)o.includes(u)||l.push(u);const c=[];for(const u of o){const d=a[u],f=i.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new di(i,f,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof Ji){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of l)c.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(u==="strict")l.length>0&&(ge(i,{code:ie.unrecognized_keys,keys:l}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of l){const f=i.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new di(i,f,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of c){const f=await d.key,m=await d.value;u.push({key:f,value:m,alwaysSet:d.alwaysSet})}return u}).then(u=>er.mergeObjectSync(r,u)):er.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return Re.errToObj,new Bt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,a,o,l;const c=(o=(a=(i=this._def).errorMap)===null||a===void 0?void 0:a.call(i,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(l=Re.errToObj(e).message)!==null&&l!==void 0?l:c}:{message:c}}}:{}})}strip(){return new Bt({...this._def,unknownKeys:"strip"})}passthrough(){return new Bt({...this._def,unknownKeys:"passthrough"})}extend(e){return new Bt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Bt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ve.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Bt({...this._def,catchall:e})}pick(e){const n={};return ot.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Bt({...this._def,shape:()=>n})}omit(e){const n={};return ot.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new Bt({...this._def,shape:()=>n})}deepPartial(){return Yl(this)}partial(e){const n={};return ot.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}),new Bt({...this._def,shape:()=>n})}required(e){const n={};return ot.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof ai;)a=a._def.innerType;n[r]=a}}),new Bt({...this._def,shape:()=>n})}keyof(){return lO(ot.objectKeys(this.shape))}}Bt.create=(t,e)=>new Bt({shape:()=>t,unknownKeys:"strip",catchall:Ji.create(),typeName:Ve.ZodObject,...Ge(e)});Bt.strictCreate=(t,e)=>new Bt({shape:()=>t,unknownKeys:"strict",catchall:Ji.create(),typeName:Ve.ZodObject,...Ge(e)});Bt.lazycreate=(t,e)=>new Bt({shape:t,unknownKeys:"strip",catchall:Ji.create(),typeName:Ve.ZodObject,...Ge(e)});class Eh extends Ye{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(a){for(const l of a)if(l.result.status==="valid")return l.result;for(const l of a)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;const o=a.map(l=>new $r(l.ctx.common.issues));return ge(n,{code:ie.invalid_union,unionErrors:o}),Ue}if(n.common.async)return Promise.all(r.map(async a=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let a;const o=[];for(const c of r){const u={...n,common:{...n.common,issues:[]},parent:null},d=c._parseSync({data:n.data,path:n.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!a&&(a={result:d,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const l=o.map(c=>new $r(c));return ge(n,{code:ie.invalid_union,unionErrors:l}),Ue}}get options(){return this._def.options}}Eh.create=(t,e)=>new Eh({options:t,typeName:Ve.ZodUnion,...Ge(e)});const Ni=t=>t instanceof kh?Ni(t.schema):t instanceof Ds?Ni(t.innerType()):t instanceof Ih?[t.value]:t instanceof lo?t.options:t instanceof Ph?ot.objectValues(t.enum):t instanceof Ah?Ni(t._def.innerType):t instanceof Nh?[void 0]:t instanceof Sh?[null]:t instanceof ai?[void 0,...Ni(t.unwrap())]:t instanceof co?[null,...Ni(t.unwrap())]:t instanceof Fj||t instanceof Mh?Ni(t.unwrap()):t instanceof Rh?Ni(t._def.innerType):[];class qv extends Ye{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==xe.object)return ge(n,{code:ie.invalid_type,expected:xe.object,received:n.parsedType}),Ue;const r=this.discriminator,i=n.data[r],a=this.optionsMap.get(i);return a?n.common.async?a._parseAsync({data:n.data,path:n.path,parent:n}):a._parseSync({data:n.data,path:n.path,parent:n}):(ge(n,{code:ie.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Ue)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const i=new Map;for(const a of n){const o=Ni(a.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const l of o){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,a)}}return new qv({typeName:Ve.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...Ge(r)})}}function Ew(t,e){const n=Ca(t),r=Ca(e);if(t===e)return{valid:!0,data:t};if(n===xe.object&&r===xe.object){const i=ot.objectKeys(e),a=ot.objectKeys(t).filter(l=>i.indexOf(l)!==-1),o={...t,...e};for(const l of a){const c=Ew(t[l],e[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(n===xe.array&&r===xe.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let a=0;a<t.length;a++){const o=t[a],l=e[a],c=Ew(o,l);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return n===xe.date&&r===xe.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Ch extends Ye{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(a,o)=>{if(Nw(a)||Nw(o))return Ue;const l=Ew(a.value,o.value);return l.valid?((Sw(a)||Sw(o))&&n.dirty(),{status:n.value,value:l.data}):(ge(r,{code:ie.invalid_intersection_types}),Ue)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,o])=>i(a,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Ch.create=(t,e,n)=>new Ch({left:t,right:e,typeName:Ve.ZodIntersection,...Ge(n)});class hi extends Ye{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==xe.array)return ge(r,{code:ie.invalid_type,expected:xe.array,received:r.parsedType}),Ue;if(r.data.length<this._def.items.length)return ge(r,{code:ie.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ue;!this._def.rest&&r.data.length>this._def.items.length&&(ge(r,{code:ie.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...r.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new di(r,o,r.path,l)):null}).filter(o=>!!o);return r.common.async?Promise.all(a).then(o=>er.mergeArray(n,o)):er.mergeArray(n,a)}get items(){return this._def.items}rest(e){return new hi({...this._def,rest:e})}}hi.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new hi({items:t,typeName:Ve.ZodTuple,rest:null,...Ge(e)})};class Th extends Ye{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==xe.object)return ge(r,{code:ie.invalid_type,expected:xe.object,received:r.parsedType}),Ue;const i=[],a=this._def.keyType,o=this._def.valueType;for(const l in r.data)i.push({key:a._parse(new di(r,l,r.path,l)),value:o._parse(new di(r,r.data[l],r.path,l)),alwaysSet:l in r.data});return r.common.async?er.mergeObjectAsync(n,i):er.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Ye?new Th({keyType:e,valueType:n,typeName:Ve.ZodRecord,...Ge(r)}):new Th({keyType:ws.create(),valueType:e,typeName:Ve.ZodRecord,...Ge(n)})}}class yg extends Ye{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==xe.map)return ge(r,{code:ie.invalid_type,expected:xe.map,received:r.parsedType}),Ue;const i=this._def.keyType,a=this._def.valueType,o=[...r.data.entries()].map(([l,c],u)=>({key:i._parse(new di(r,l,r.path,[u,"key"])),value:a._parse(new di(r,c,r.path,[u,"value"]))}));if(r.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return Ue;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),l.set(u.value,d.value)}return{status:n.value,value:l}})}else{const l=new Map;for(const c of o){const u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return Ue;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),l.set(u.value,d.value)}return{status:n.value,value:l}}}}yg.create=(t,e,n)=>new yg({valueType:e,keyType:t,typeName:Ve.ZodMap,...Ge(n)});class xl extends Ye{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==xe.set)return ge(r,{code:ie.invalid_type,expected:xe.set,received:r.parsedType}),Ue;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(ge(r,{code:ie.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(ge(r,{code:ie.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const a=this._def.valueType;function o(c){const u=new Set;for(const d of c){if(d.status==="aborted")return Ue;d.status==="dirty"&&n.dirty(),u.add(d.value)}return{status:n.value,value:u}}const l=[...r.data.values()].map((c,u)=>a._parse(new di(r,c,r.path,u)));return r.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(e,n){return new xl({...this._def,minSize:{value:e,message:Re.toString(n)}})}max(e,n){return new xl({...this._def,maxSize:{value:e,message:Re.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}xl.create=(t,e)=>new xl({valueType:t,minSize:null,maxSize:null,typeName:Ve.ZodSet,...Ge(e)});class Tc extends Ye{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==xe.function)return ge(n,{code:ie.invalid_type,expected:xe.function,received:n.parsedType}),Ue;function r(l,c){return pg({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,mg(),nu].filter(u=>!!u),issueData:{code:ie.invalid_arguments,argumentsError:c}})}function i(l,c){return pg({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,mg(),nu].filter(u=>!!u),issueData:{code:ie.invalid_return_type,returnTypeError:c}})}const a={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof su){const l=this;return mr(async function(...c){const u=new $r([]),d=await l._def.args.parseAsync(c,a).catch(v=>{throw u.addIssue(r(c,v)),u}),f=await Reflect.apply(o,this,d);return await l._def.returns._def.type.parseAsync(f,a).catch(v=>{throw u.addIssue(i(f,v)),u})})}else{const l=this;return mr(function(...c){const u=l._def.args.safeParse(c,a);if(!u.success)throw new $r([r(c,u.error)]);const d=Reflect.apply(o,this,u.data),f=l._def.returns.safeParse(d,a);if(!f.success)throw new $r([i(d,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Tc({...this._def,args:hi.create(e).rest(Zo.create())})}returns(e){return new Tc({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new Tc({args:e||hi.create([]).rest(Zo.create()),returns:n||Zo.create(),typeName:Ve.ZodFunction,...Ge(r)})}}class kh extends Ye{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}kh.create=(t,e)=>new kh({getter:t,typeName:Ve.ZodLazy,...Ge(e)});class Ih extends Ye{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return ge(n,{received:n.data,code:ie.invalid_literal,expected:this._def.value}),Ue}return{status:"valid",value:e.data}}get value(){return this._def.value}}Ih.create=(t,e)=>new Ih({value:t,typeName:Ve.ZodLiteral,...Ge(e)});function lO(t,e){return new lo({values:t,typeName:Ve.ZodEnum,...Ge(e)})}class lo extends Ye{constructor(){super(...arguments),gd.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return ge(n,{expected:ot.joinValues(r),received:n.parsedType,code:ie.invalid_type}),Ue}if(gg(this,gd)||sO(this,gd,new Set(this._def.values)),!gg(this,gd).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return ge(n,{received:n.data,code:ie.invalid_enum_value,options:r}),Ue}return mr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return lo.create(e,{...this._def,...n})}exclude(e,n=this._def){return lo.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}gd=new WeakMap;lo.create=lO;class Ph extends Ye{constructor(){super(...arguments),vd.set(this,void 0)}_parse(e){const n=ot.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==xe.string&&r.parsedType!==xe.number){const i=ot.objectValues(n);return ge(r,{expected:ot.joinValues(i),received:r.parsedType,code:ie.invalid_type}),Ue}if(gg(this,vd)||sO(this,vd,new Set(ot.getValidEnumValues(this._def.values))),!gg(this,vd).has(e.data)){const i=ot.objectValues(n);return ge(r,{received:r.data,code:ie.invalid_enum_value,options:i}),Ue}return mr(e.data)}get enum(){return this._def.values}}vd=new WeakMap;Ph.create=(t,e)=>new Ph({values:t,typeName:Ve.ZodNativeEnum,...Ge(e)});class su extends Ye{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==xe.promise&&n.common.async===!1)return ge(n,{code:ie.invalid_type,expected:xe.promise,received:n.parsedType}),Ue;const r=n.parsedType===xe.promise?n.data:Promise.resolve(n.data);return mr(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}su.create=(t,e)=>new su({type:t,typeName:Ve.ZodPromise,...Ge(e)});class Ds extends Ye{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ve.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,a={addIssue:o=>{ge(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const o=i.transform(r.data,a);if(r.common.async)return Promise.resolve(o).then(async l=>{if(n.value==="aborted")return Ue;const c=await this._def.schema._parseAsync({data:l,path:r.path,parent:r});return c.status==="aborted"?Ue:c.status==="dirty"||n.value==="dirty"?uc(c.value):c});{if(n.value==="aborted")return Ue;const l=this._def.schema._parseSync({data:o,path:r.path,parent:r});return l.status==="aborted"?Ue:l.status==="dirty"||n.value==="dirty"?uc(l.value):l}}if(i.type==="refinement"){const o=l=>{const c=i.refinement(l,a);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?Ue:(l.status==="dirty"&&n.dirty(),o(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?Ue:(l.status==="dirty"&&n.dirty(),o(l.value).then(()=>({status:n.value,value:l.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!bh(o))return o;const l=i.transform(o.value,a);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>bh(o)?Promise.resolve(i.transform(o.value,a)).then(l=>({status:n.value,value:l})):o);ot.assertNever(i)}}Ds.create=(t,e,n)=>new Ds({schema:t,typeName:Ve.ZodEffects,effect:e,...Ge(n)});Ds.createWithPreprocess=(t,e,n)=>new Ds({schema:e,effect:{type:"preprocess",transform:t},typeName:Ve.ZodEffects,...Ge(n)});class ai extends Ye{_parse(e){return this._getType(e)===xe.undefined?mr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ai.create=(t,e)=>new ai({innerType:t,typeName:Ve.ZodOptional,...Ge(e)});class co extends Ye{_parse(e){return this._getType(e)===xe.null?mr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}co.create=(t,e)=>new co({innerType:t,typeName:Ve.ZodNullable,...Ge(e)});class Ah extends Ye{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===xe.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Ah.create=(t,e)=>new Ah({innerType:t,typeName:Ve.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ge(e)});class Rh extends Ye{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return jh(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new $r(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new $r(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Rh.create=(t,e)=>new Rh({innerType:t,typeName:Ve.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ge(e)});class wg extends Ye{_parse(e){if(this._getType(e)!==xe.nan){const r=this._getOrReturnCtx(e);return ge(r,{code:ie.invalid_type,expected:xe.nan,received:r.parsedType}),Ue}return{status:"valid",value:e.data}}}wg.create=t=>new wg({typeName:Ve.ZodNaN,...Ge(t)});const Ire=Symbol("zod_brand");class Fj extends Ye{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class jf extends Ye{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Ue:a.status==="dirty"?(n.dirty(),uc(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Ue:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new jf({in:e,out:n,typeName:Ve.ZodPipeline})}}class Mh extends Ye{_parse(e){const n=this._def.innerType._parse(e),r=i=>(bh(i)&&(i.value=Object.freeze(i.value)),i);return jh(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}Mh.create=(t,e)=>new Mh({innerType:t,typeName:Ve.ZodReadonly,...Ge(e)});function cO(t,e={},n){return t?ru.create().superRefine((r,i)=>{var a,o;if(!t(r)){const l=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(a=l.fatal)!==null&&a!==void 0?a:n)!==null&&o!==void 0?o:!0,u=typeof l=="string"?{message:l}:l;i.addIssue({code:"custom",...u,fatal:c})}}):ru.create()}const Pre={object:Bt.lazycreate};var Ve;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Ve||(Ve={}));const Are=(t,e={message:`Input not instance of ${t.name}`})=>cO(n=>n instanceof t,e),uO=ws.create,dO=ao.create,Rre=wg.create,Mre=oo.create,hO=_h.create,Dre=vl.create,Ore=vg.create,Lre=Nh.create,Vre=Sh.create,Fre=ru.create,Ure=Zo.create,$re=Ji.create,zre=xg.create,Bre=Ts.create,qre=Bt.create,Wre=Bt.strictCreate,Hre=Eh.create,Gre=qv.create,Kre=Ch.create,Yre=hi.create,Qre=Th.create,Xre=yg.create,Zre=xl.create,Jre=Tc.create,ese=kh.create,tse=Ih.create,nse=lo.create,rse=Ph.create,sse=su.create,rC=Ds.create,ise=ai.create,ase=co.create,ose=Ds.createWithPreprocess,lse=jf.create,cse=()=>uO().optional(),use=()=>dO().optional(),dse=()=>hO().optional(),hse={string:t=>ws.create({...t,coerce:!0}),number:t=>ao.create({...t,coerce:!0}),boolean:t=>_h.create({...t,coerce:!0}),bigint:t=>oo.create({...t,coerce:!0}),date:t=>vl.create({...t,coerce:!0})},fse=Ue;var De=Object.freeze({__proto__:null,defaultErrorMap:nu,setErrorMap:fre,getErrorMap:mg,makeIssue:pg,EMPTY_PATH:mre,addIssueToContext:ge,ParseStatus:er,INVALID:Ue,DIRTY:uc,OK:mr,isAborted:Nw,isDirty:Sw,isValid:bh,isAsync:jh,get util(){return ot},get objectUtil(){return _w},ZodParsedType:xe,getParsedType:Ca,ZodType:Ye,datetimeRegex:oO,ZodString:ws,ZodNumber:ao,ZodBigInt:oo,ZodBoolean:_h,ZodDate:vl,ZodSymbol:vg,ZodUndefined:Nh,ZodNull:Sh,ZodAny:ru,ZodUnknown:Zo,ZodNever:Ji,ZodVoid:xg,ZodArray:Ts,ZodObject:Bt,ZodUnion:Eh,ZodDiscriminatedUnion:qv,ZodIntersection:Ch,ZodTuple:hi,ZodRecord:Th,ZodMap:yg,ZodSet:xl,ZodFunction:Tc,ZodLazy:kh,ZodLiteral:Ih,ZodEnum:lo,ZodNativeEnum:Ph,ZodPromise:su,ZodEffects:Ds,ZodTransformer:Ds,ZodOptional:ai,ZodNullable:co,ZodDefault:Ah,ZodCatch:Rh,ZodNaN:wg,BRAND:Ire,ZodBranded:Fj,ZodPipeline:jf,ZodReadonly:Mh,custom:cO,Schema:Ye,ZodSchema:Ye,late:Pre,get ZodFirstPartyTypeKind(){return Ve},coerce:hse,any:Fre,array:Bre,bigint:Mre,boolean:hO,date:Dre,discriminatedUnion:Gre,effect:rC,enum:nse,function:Jre,instanceof:Are,intersection:Kre,lazy:ese,literal:tse,map:Xre,nan:Rre,nativeEnum:rse,never:$re,null:Vre,nullable:ase,number:dO,object:qre,oboolean:dse,onumber:use,optional:ise,ostring:cse,pipeline:lse,preprocess:ose,promise:sse,record:Qre,set:Zre,strictObject:Wre,string:uO,symbol:Ore,transformer:rC,tuple:Yre,undefined:Lre,union:Hre,unknown:Ure,void:zre,NEVER:fse,ZodIssueCode:ie,quotelessJson:hre,ZodError:$r}),Uj="Checkbox",[mse,Zae]=Hr(Uj),[pse,gse]=mse(Uj),fO=p.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:i,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...f}=t,[m,v]=p.useState(null),y=We(e,E=>v(E)),w=p.useRef(!1),b=m?d||!!m.closest("form"):!0,[x=!1,g]=Br({prop:i,defaultProp:a,onChange:u}),_=p.useRef(x);return p.useEffect(()=>{const E=m==null?void 0:m.form;if(E){const S=()=>g(_.current);return E.addEventListener("reset",S),()=>E.removeEventListener("reset",S)}},[m,g]),s.jsxs(pse,{scope:n,state:x,disabled:l,children:[s.jsx(Se.button,{type:"button",role:"checkbox","aria-checked":Wa(x)?"mixed":x,"aria-required":o,"data-state":gO(x),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:y,onKeyDown:le(t.onKeyDown,E=>{E.key==="Enter"&&E.preventDefault()}),onClick:le(t.onClick,E=>{g(S=>Wa(S)?!0:!S),b&&(w.current=E.isPropagationStopped(),w.current||E.stopPropagation())})}),b&&s.jsx(vse,{control:m,bubbles:!w.current,name:r,value:c,checked:x,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"},defaultChecked:Wa(a)?!1:a})]})});fO.displayName=Uj;var mO="CheckboxIndicator",pO=p.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...i}=t,a=gse(mO,n);return s.jsx(Un,{present:r||Wa(a.state)||a.state===!0,children:s.jsx(Se.span,{"data-state":gO(a.state),"data-disabled":a.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...t.style}})})});pO.displayName=mO;var vse=t=>{const{control:e,checked:n,bubbles:r=!0,defaultChecked:i,...a}=t,o=p.useRef(null),l=Ov(n),c=Sv(e);p.useEffect(()=>{const d=o.current,f=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(f,"checked").set;if(l!==n&&v){const y=new Event("click",{bubbles:r});d.indeterminate=Wa(n),v.call(d,Wa(n)?!1:n),d.dispatchEvent(y)}},[l,n,r]);const u=p.useRef(Wa(n)?!1:n);return s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i??u.current,...a,tabIndex:-1,ref:o,style:{...t.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Wa(t){return t==="indeterminate"}function gO(t){return Wa(t)?"indeterminate":t?"checked":"unchecked"}var vO=fO,xse=pO;const bg=p.forwardRef(({className:t,...e},n)=>s.jsx(vO,{ref:n,className:Pe("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:s.jsx(xse,{className:Pe("flex items-center justify-center text-current"),children:s.jsx(mj,{className:"h-4 w-4"})})}));bg.displayName=vO.displayName;var xO=["PageUp","PageDown"],yO=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],wO={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Cu="Slider",[Cw,yse,wse]=of(Cu),[bO,Jae]=Hr(Cu,[wse]),[bse,Wv]=bO(Cu),jO=p.forwardRef((t,e)=>{const{name:n,min:r=0,max:i=100,step:a=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[r],value:d,onValueChange:f=()=>{},onValueCommit:m=()=>{},inverted:v=!1,form:y,...w}=t,b=p.useRef(new Set),x=p.useRef(0),_=o==="horizontal"?jse:_se,[E=[],S]=Br({prop:d,defaultProp:u,onChange:P=>{var T;(T=[...b.current][x.current])==null||T.focus(),f(P)}}),O=p.useRef(E);function I(P){const A=Tse(E,P);N(P,A)}function k(P){N(P,x.current)}function R(){const P=O.current[x.current];E[x.current]!==P&&m(E)}function N(P,A,{commit:T}={commit:!1}){const U=Ase(a),H=Rse(Math.round((P-r)/a)*a+r,U),z=wh(H,[r,i]);S((V=[])=>{const M=Ese(V,z,A);if(Pse(M,c*a)){x.current=M.indexOf(z);const $=String(M)!==String(V);return $&&T&&m(M),$?M:V}else return V})}return s.jsx(bse,{scope:t.__scopeSlider,name:n,disabled:l,min:r,max:i,valueIndexToChangeRef:x,thumbs:b.current,values:E,orientation:o,form:y,children:s.jsx(Cw.Provider,{scope:t.__scopeSlider,children:s.jsx(Cw.Slot,{scope:t.__scopeSlider,children:s.jsx(_,{"aria-disabled":l,"data-disabled":l?"":void 0,...w,ref:e,onPointerDown:le(w.onPointerDown,()=>{l||(O.current=E)}),min:r,max:i,inverted:v,onSlideStart:l?void 0:I,onSlideMove:l?void 0:k,onSlideEnd:l?void 0:R,onHomeKeyDown:()=>!l&&N(r,0,{commit:!0}),onEndKeyDown:()=>!l&&N(i,E.length-1,{commit:!0}),onStepKeyDown:({event:P,direction:A})=>{if(!l){const H=xO.includes(P.key)||P.shiftKey&&yO.includes(P.key)?10:1,z=x.current,V=E[z],M=a*H*A;N(V+M,z,{commit:!0})}}})})})})});jO.displayName=Cu;var[_O,NO]=bO(Cu,{startEdge:"left",endEdge:"right",size:"width",direction:1}),jse=p.forwardRef((t,e)=>{const{min:n,max:r,dir:i,inverted:a,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u,...d}=t,[f,m]=p.useState(null),v=We(e,_=>m(_)),y=p.useRef(),w=Tl(i),b=w==="ltr",x=b&&!a||!b&&a;function g(_){const E=y.current||f.getBoundingClientRect(),S=[0,E.width],I=$j(S,x?[n,r]:[r,n]);return y.current=E,I(_-E.left)}return s.jsx(_O,{scope:t.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:s.jsx(SO,{dir:w,"data-orientation":"horizontal",...d,ref:v,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:_=>{const E=g(_.clientX);o==null||o(E)},onSlideMove:_=>{const E=g(_.clientX);l==null||l(E)},onSlideEnd:()=>{y.current=void 0,c==null||c()},onStepKeyDown:_=>{const S=wO[x?"from-left":"from-right"].includes(_.key);u==null||u({event:_,direction:S?-1:1})}})})}),_se=p.forwardRef((t,e)=>{const{min:n,max:r,inverted:i,onSlideStart:a,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...u}=t,d=p.useRef(null),f=We(e,d),m=p.useRef(),v=!i;function y(w){const b=m.current||d.current.getBoundingClientRect(),x=[0,b.height],_=$j(x,v?[r,n]:[n,r]);return m.current=b,_(w-b.top)}return s.jsx(_O,{scope:t.__scopeSlider,startEdge:v?"bottom":"top",endEdge:v?"top":"bottom",size:"height",direction:v?1:-1,children:s.jsx(SO,{"data-orientation":"vertical",...u,ref:f,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:w=>{const b=y(w.clientY);a==null||a(b)},onSlideMove:w=>{const b=y(w.clientY);o==null||o(b)},onSlideEnd:()=>{m.current=void 0,l==null||l()},onStepKeyDown:w=>{const x=wO[v?"from-bottom":"from-top"].includes(w.key);c==null||c({event:w,direction:x?-1:1})}})})}),SO=p.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:i,onSlideEnd:a,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:c,...u}=t,d=Wv(Cu,n);return s.jsx(Se.span,{...u,ref:e,onKeyDown:le(t.onKeyDown,f=>{f.key==="Home"?(o(f),f.preventDefault()):f.key==="End"?(l(f),f.preventDefault()):xO.concat(yO).includes(f.key)&&(c(f),f.preventDefault())}),onPointerDown:le(t.onPointerDown,f=>{const m=f.target;m.setPointerCapture(f.pointerId),f.preventDefault(),d.thumbs.has(m)?m.focus():r(f)}),onPointerMove:le(t.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&i(f)}),onPointerUp:le(t.onPointerUp,f=>{const m=f.target;m.hasPointerCapture(f.pointerId)&&(m.releasePointerCapture(f.pointerId),a(f))})})}),EO="SliderTrack",CO=p.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=Wv(EO,n);return s.jsx(Se.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...r,ref:e})});CO.displayName=EO;var Tw="SliderRange",TO=p.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=Wv(Tw,n),a=NO(Tw,n),o=p.useRef(null),l=We(e,o),c=i.values.length,u=i.values.map(m=>IO(m,i.min,i.max)),d=c>1?Math.min(...u):0,f=100-Math.max(...u);return s.jsx(Se.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...r,ref:l,style:{...t.style,[a.startEdge]:d+"%",[a.endEdge]:f+"%"}})});TO.displayName=Tw;var kw="SliderThumb",kO=p.forwardRef((t,e)=>{const n=yse(t.__scopeSlider),[r,i]=p.useState(null),a=We(e,l=>i(l)),o=p.useMemo(()=>r?n().findIndex(l=>l.ref.current===r):-1,[n,r]);return s.jsx(Nse,{...t,ref:a,index:o})}),Nse=p.forwardRef((t,e)=>{const{__scopeSlider:n,index:r,name:i,...a}=t,o=Wv(kw,n),l=NO(kw,n),[c,u]=p.useState(null),d=We(e,g=>u(g)),f=c?o.form||!!c.closest("form"):!0,m=Sv(c),v=o.values[r],y=v===void 0?0:IO(v,o.min,o.max),w=Cse(r,o.values.length),b=m==null?void 0:m[l.size],x=b?kse(b,y,l.direction):0;return p.useEffect(()=>{if(c)return o.thumbs.add(c),()=>{o.thumbs.delete(c)}},[c,o.thumbs]),s.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${y}% + ${x}px)`},children:[s.jsx(Cw.ItemSlot,{scope:t.__scopeSlider,children:s.jsx(Se.span,{role:"slider","aria-label":t["aria-label"]||w,"aria-valuemin":o.min,"aria-valuenow":v,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...a,ref:d,style:v===void 0?{display:"none"}:t.style,onFocus:le(t.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),f&&s.jsx(Sse,{name:i??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:v},r)]})});kO.displayName=kw;var Sse=t=>{const{value:e,...n}=t,r=p.useRef(null),i=Ov(e);return p.useEffect(()=>{const a=r.current,o=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(o,"value").set;if(i!==e&&c){const u=new Event("input",{bubbles:!0});c.call(a,e),a.dispatchEvent(u)}},[i,e]),s.jsx("input",{style:{display:"none"},...n,ref:r,defaultValue:e})};function Ese(t=[],e,n){const r=[...t];return r[n]=e,r.sort((i,a)=>i-a)}function IO(t,e,n){const a=100/(n-e)*(t-e);return wh(a,[0,100])}function Cse(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function Tse(t,e){if(t.length===1)return 0;const n=t.map(i=>Math.abs(i-e)),r=Math.min(...n);return n.indexOf(r)}function kse(t,e,n){const r=t/2,a=$j([0,50],[0,r]);return(r-a(e)*n)*n}function Ise(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function Pse(t,e){if(e>0){const n=Ise(t);return Math.min(...n)>=e}return!0}function $j(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function Ase(t){return(String(t).split(".")[1]||"").length}function Rse(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var PO=jO,Mse=CO,Dse=TO,Ose=kO;const AO=p.forwardRef(({className:t,...e},n)=>s.jsxs(PO,{ref:n,className:Pe("relative flex w-full touch-none select-none items-center",t),...e,children:[s.jsx(Mse,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:s.jsx(Dse,{className:"absolute h-full bg-primary"})}),s.jsx(Ose,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));AO.displayName=PO.displayName;const _f=De.object({title:De.string().min(5,"Le titre doit contenir au moins 5 caractères").max(80,"Le titre ne peut pas dépasser 80 caractères"),description:De.string().min(20,"La description doit contenir au moins 20 caractères").max(1e3,"La description ne peut pas dépasser 1000 caractères"),tags:De.array(De.string()).min(1,"Ajoutez au moins un tag").max(5,"Maximum 5 tags"),meetingLocation:De.string().min(1,"Veuillez spécifier un lieu de rencontre")}),Lse=_f.extend({price:De.string().min(1,"Le prix est obligatoire").transform(t=>{const e=parseFloat(t.replace(",","."));if(isNaN(e)||e<1)throw new Error("Le prix doit être d'au moins 1€");if(e>1e4)throw new Error("Le prix ne peut pas dépasser 10 000€");return e}),condition:De.enum(["new","like-new","good","fair"]),paymentMethods:De.array(De.string()).min(1,"Sélectionnez au moins un mode de paiement")}),Vse=_f.extend({donationReason:De.string().min(10,"Expliquez pourquoi vous donnez cet objet").max(140,"Maximum 140 caractères")}),Fse=_f.extend({desiredItems:De.array(De.string()).min(1,"Ajoutez au moins un objet recherché"),estimatedValue:De.string().min(1,"La valeur estimée est obligatoire").transform(t=>{const e=parseFloat(t.replace(",","."));if(isNaN(e)||e<1)throw new Error("La valeur estimée doit être d'au moins 1€");return e})}),Use=_f.extend({hourlyRate:De.string().min(1,"Le tarif horaire est obligatoire").transform(t=>{const e=parseFloat(t.replace(",","."));if(isNaN(e)||e<5)throw new Error("Le tarif horaire doit être d'au moins 5€/h");if(e>200)throw new Error("Le tarif ne peut pas dépasser 200€/h");return e}),duration:De.number().min(1,"La durée doit être d'au moins 1 heure").max(720,"Maximum 720 heures"),skills:De.string().min(20,"Décrivez vos compétences en détail").max(500,"Maximum 500 caractères"),availability:De.string().optional()}),$se=[{value:"new",label:"Neuf",description:"Jamais utilisé, dans son emballage"},{value:"like-new",label:"Très bon",description:"Utilisé très peu, aucun défaut visible"},{value:"good",label:"Bon",description:"Utilisé mais bien entretenu"},{value:"fair",label:"Correct",description:"Signes d'usure mais fonctionnel"}],sC=[{value:"cash",label:"Espèces",icon:EA},{value:"transfer",label:"Virement bancaire",icon:an},{value:"lydia",label:"Lydia",icon:Cl},{value:"paypal",label:"PayPal",icon:an}],zse=()=>{var W,ne,ye,Xe,xt,ut,ve,Qe;const{currentUser:t,userProfile:e}=Qt(),{createListing:n}=pf(),r=En(),[i]=A1(),[a,o]=p.useState(()=>i.get("type")||"sell"),[l,c]=p.useState([]),[u,d]=p.useState(!1),[f,m]=p.useState(""),[v,y]=p.useState([]),[w,b]=p.useState(!1),[x,g]=p.useState([""]),[_,E]=p.useState(""),[S,O]=p.useState([]),[I,k]=p.useState([1]),N=Qo({resolver:Xo((()=>{switch(a){case"sell":return Lse;case"gift":return Vse;case"swap":return Fse;case"service":return Use;default:return _f}})()),defaultValues:{title:"",description:"",price:"",condition:"good",paymentMethods:[],donationReason:"",desiredItems:[],estimatedValue:"",hourlyRate:"",duration:1,skills:"",availability:"",tags:[],meetingLocation:""},mode:"onChange"});p.useEffect(()=>{N.reset({title:"",description:"",price:"",condition:"good",paymentMethods:[],donationReason:"",desiredItems:[],estimatedValue:"",hourlyRate:"",duration:1,skills:"",availability:"",tags:[],meetingLocation:""}),y([]),g([""]),O([]),k([1]),c([])},[a,N]);const P=async X=>{if(!t)throw new Error("User not authenticated");const de=Date.now(),ke=`listings/${t.uid}/${de}_${X.name}`,Le=zb(qb,ke),He=await Ub(Le,X);return await $b(He.ref)},A=async X=>{const de=X.target.files;if(!(!de||de.length===0)){d(!0);try{const Le=Array.from(de).slice(0,10-l.length).filter(Tt=>Tt.size<=15728640).map(Tt=>P(Tt)),He=await Promise.all(Le);c(Tt=>[...Tt,...He])}catch(ke){console.error("Error uploading images:",ke)}finally{d(!1)}}},T=X=>{c(de=>de.filter((ke,Le)=>Le!==X))},U=()=>{if(f.trim()&&!v.includes(f.trim())&&v.length<5){const X=[...v,f.trim()];y(X),N.setValue("tags",X),m("")}},H=X=>{const de=v.filter(ke=>ke!==X);y(de),N.setValue("tags",de)},z=()=>{if(_.trim()){const X=[...x.filter(de=>de.trim()),_.trim()];g(X),N.setValue("desiredItems",X),E("")}},V=X=>{const de=x.filter((ke,Le)=>Le!==X);g(de),N.setValue("desiredItems",de)},M=(X,de)=>{const ke=de?[...S,X]:S.filter(Le=>Le!==X);O(ke),N.setValue("paymentMethods",ke)},$=async X=>{if(!(!t||!e)){b(!0);try{const de={title:X.title,description:X.description,currency:"EUR",category:"electronics",images:l,tags:X.tags,location:{city:"Paris",state:"Île-de-France",country:"France",campus:e.campus||null,university:e.university||null,coordinates:null},sellerId:t.uid,sellerName:e.displayName,sellerAvatar:e.photoURL,sellerUniversity:e.university,sellerVerified:e.isVerified,status:"active",views:0,likes:0,saves:0,reportCount:0,moderationStatus:"approved"};let ke;switch(a){case"sell":ke={...de,price:X.price,condition:X.condition,transactionType:"sale",description:`${X.description}

Modes de paiement acceptés: ${S.map(He=>{var Tt;return(Tt=sC.find(Gr=>Gr.value===He))==null?void 0:Tt.label}).join(", ")}`};break;case"gift":ke={...de,price:0,condition:"good",transactionType:"donation",description:`${X.description}

Raison du don: ${X.donationReason}`};break;case"swap":ke={...de,price:X.estimatedValue,condition:"good",transactionType:"exchange",exchangeFor:x.filter(He=>He.trim()).join(", "),description:`${X.description}

Recherche en échange: ${x.filter(He=>He.trim()).join(", ")}
Valeur estimée: ${X.estimatedValue}€`};break;case"service":ke={...de,price:X.hourlyRate,condition:"new",transactionType:"service",description:`${X.description}

Compétences: ${X.skills}
Tarif: ${X.hourlyRate}€/h
Durée prévue: ${I[0]}h${X.availability?`
Disponibilités: ${X.availability}`:""}`};break;default:throw new Error("Type de transaction non supporté")}console.log("Submitting listing data:",ke);const Le=await n(ke);r(`/listing/${Le}`)}catch(de){console.error("Error creating listing:",de)}finally{b(!1)}}},L=()=>{const X=N.formState.errors,de=N.watch("title")&&N.watch("description")&&N.watch("meetingLocation")&&v.length>0;switch(a){case"sell":return de&&N.watch("price")&&S.length>0&&!X.title&&!X.description&&!X.price;case"gift":return de&&N.watch("donationReason")&&!X.title&&!X.description&&!X.donationReason;case"swap":return de&&x.some(ke=>ke.trim())&&N.watch("estimatedValue")&&!X.title&&!X.description&&!X.estimatedValue;case"service":return de&&N.watch("hourlyRate")&&N.watch("skills")&&!X.title&&!X.description&&!X.hourlyRate&&!X.skills;default:return!1}};return s.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-2 text-foreground",children:"Créer une annonce"}),s.jsx("p",{className:"text-muted-foreground",children:"Partagez vos objets, services ou recherches avec la communauté étudiante vérifiée"})]}),s.jsxs("form",{onSubmit:N.handleSubmit($),className:"space-y-8",children:[s.jsxs(K,{children:[s.jsxs(Ne,{children:[s.jsxs(Ce,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(Z0,{className:"w-5 h-5"}),"Type d'annonce"]}),s.jsx(nt,{children:"Le formulaire s'adapte automatiquement selon votre choix"})]}),s.jsx(Y,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(K,{className:`cursor-pointer transition-all ${a==="sell"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("sell"),children:s.jsxs(Y,{className:"p-4 text-center",children:[s.jsx(Yp,{className:"w-8 h-8 mx-auto mb-2 text-blue-600"}),s.jsx("h3",{className:"font-semibold text-foreground",children:"Vendre"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Vendre un objet"})]})}),s.jsx(K,{className:`cursor-pointer transition-all ${a==="gift"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("gift"),children:s.jsxs(Y,{className:"p-4 text-center",children:[s.jsx(Gc,{className:"w-8 h-8 mx-auto mb-2 text-green-600"}),s.jsx("h3",{className:"font-semibold text-foreground",children:"Donner"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Don gratuit"})]})}),s.jsx(K,{className:`cursor-pointer transition-all ${a==="swap"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("swap"),children:s.jsxs(Y,{className:"p-4 text-center",children:[s.jsx(Hi,{className:"w-8 h-8 mx-auto mb-2 text-purple-600"}),s.jsx("h3",{className:"font-semibold text-foreground",children:"Troc"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Échanger des objets"})]})}),s.jsx(K,{className:`cursor-pointer transition-all ${a==="service"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("service"),children:s.jsxs(Y,{className:"p-4 text-center",children:[s.jsx(ln,{className:"w-8 h-8 mx-auto mb-2 text-orange-600"}),s.jsx("h3",{className:"font-semibold text-foreground",children:"Service"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Proposer un service"})]})})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs(K,{children:[s.jsx(Ne,{children:s.jsx(Ce,{className:"text-foreground",children:"Informations principales"})}),s.jsxs(Y,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"title",className:"text-foreground",children:"Titre * (max 80 caractères)"}),s.jsx(Ee,{id:"title",placeholder:a==="sell"?"Ex: MacBook Pro 13' M1 - Parfait état":a==="gift"?"Ex: Vélo de ville - Don gratuit":a==="swap"?"Ex: Livre de maths contre livre de physique":"Ex: Cours particuliers de mathématiques",...N.register("title"),className:"mt-1",maxLength:80}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[s.jsx("span",{className:"text-destructive",children:(W=N.formState.errors.title)==null?void 0:W.message}),s.jsxs("span",{children:[((ne=N.watch("title"))==null?void 0:ne.length)||0,"/80"]})]})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"description",className:"text-foreground",children:"Description détaillée * (max 1000 caractères)"}),s.jsx(Cs,{id:"description",placeholder:a==="sell"?"Décrivez l'état, l'utilisation, la raison de la vente...":a==="gift"?"Décrivez l'objet et pourquoi vous le donnez...":a==="swap"?"Décrivez ce que vous proposez et ce que vous recherchez...":"Décrivez vos compétences, votre expérience, votre méthode...",rows:6,...N.register("description"),className:"mt-1",maxLength:1e3}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[s.jsx("span",{className:"text-destructive",children:(ye=N.formState.errors.description)==null?void 0:ye.message}),s.jsxs("span",{children:[((Xe=N.watch("description"))==null?void 0:Xe.length)||0,"/1000"]})]})]})]})]}),a==="sell"&&s.jsxs(K,{children:[s.jsx(Ne,{children:s.jsxs(Ce,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(Yp,{className:"w-5 h-5 text-blue-600"}),"Informations de vente"]})}),s.jsxs(Y,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"price",className:"text-foreground",children:"Prix (€) *"}),s.jsx(Ee,{id:"price",type:"text",placeholder:"0,00",...N.register("price"),className:"mt-1"}),N.formState.errors.price&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:N.formState.errors.price.message})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"condition",className:"text-foreground",children:"État du produit *"}),s.jsxs(Et,{onValueChange:X=>N.setValue("condition",X),children:[s.jsx(wt,{className:"mt-1",children:s.jsx(Ct,{placeholder:"Sélectionnez un état"})}),s.jsx(bt,{children:$se.map(X=>s.jsx(be,{value:X.value,children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-foreground",children:X.label}),s.jsx("div",{className:"text-xs text-muted-foreground",children:X.description})]})},X.value))})]}),N.formState.errors.condition&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:N.formState.errors.condition.message})]})]}),s.jsxs("div",{children:[s.jsx(oe,{className:"text-foreground",children:"Modes de paiement acceptés *"}),s.jsx("div",{className:"grid grid-cols-2 gap-3 mt-2",children:sC.map(X=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(bg,{id:X.value,checked:S.includes(X.value),onCheckedChange:de=>M(X.value,de)}),s.jsxs(oe,{htmlFor:X.value,className:"flex items-center gap-2 cursor-pointer text-foreground",children:[s.jsx(X.icon,{className:"w-4 h-4"}),X.label]})]},X.value))}),S.length===0&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:"Sélectionnez au moins un mode de paiement"})]})]})]}),a==="gift"&&s.jsxs(K,{children:[s.jsx(Ne,{children:s.jsxs(Ce,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(Gc,{className:"w-5 h-5 text-green-600"}),"Informations du don"]})}),s.jsx(Y,{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"donationReason",className:"text-foreground",children:"Motif du don * (max 140 caractères)"}),s.jsx(Cs,{id:"donationReason",placeholder:"Ex: Je déménage, plus besoin, fin d'études...",rows:3,...N.register("donationReason"),className:"mt-1",maxLength:140}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[s.jsx("span",{className:"text-destructive",children:(xt=N.formState.errors.donationReason)==null?void 0:xt.message}),s.jsxs("span",{children:[((ut=N.watch("donationReason"))==null?void 0:ut.length)||0,"/140"]})]})]})})]}),a==="swap"&&s.jsxs(K,{children:[s.jsx(Ne,{children:s.jsxs(Ce,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(Hi,{className:"w-5 h-5 text-purple-600"}),"Informations d'échange"]})}),s.jsxs(Y,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(oe,{className:"text-foreground",children:"Objets recherchés * (minimum 1)"}),s.jsxs("div",{className:"space-y-2 mt-2",children:[x.filter(X=>X.trim()).map((X,de)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ee,{value:X,readOnly:!0,className:"flex-1"}),s.jsx(B,{type:"button",variant:"outline",size:"icon",onClick:()=>V(de),children:s.jsx(VA,{className:"w-4 h-4"})})]},de)),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ee,{placeholder:"Ex: Livre de physique L2",value:_,onChange:X=>E(X.target.value),onKeyPress:X=>X.key==="Enter"&&(X.preventDefault(),z()),className:"flex-1"}),s.jsx(B,{type:"button",onClick:z,disabled:!_.trim(),children:s.jsx(Go,{className:"w-4 h-4"})})]})]})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"estimatedValue",className:"text-foreground",children:"Valeur estimée (€) *"}),s.jsx(Ee,{id:"estimatedValue",type:"text",placeholder:"0,00",...N.register("estimatedValue"),className:"mt-1"}),N.formState.errors.estimatedValue&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:N.formState.errors.estimatedValue.message})]})]})]}),a==="service"&&s.jsxs(K,{children:[s.jsx(Ne,{children:s.jsxs(Ce,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(ln,{className:"w-5 h-5 text-orange-600"}),"Informations du service"]})}),s.jsxs(Y,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"skills",className:"text-foreground",children:"Description des compétences *"}),s.jsx(Cs,{id:"skills",placeholder:"Décrivez vos compétences, votre expérience, votre méthode d'enseignement...",rows:4,...N.register("skills"),className:"mt-1",maxLength:500}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[s.jsx("span",{className:"text-destructive",children:(ve=N.formState.errors.skills)==null?void 0:ve.message}),s.jsxs("span",{children:[((Qe=N.watch("skills"))==null?void 0:Qe.length)||0,"/500"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"hourlyRate",className:"text-foreground",children:"Tarif horaire (€/h) *"}),s.jsx(Ee,{id:"hourlyRate",type:"text",placeholder:"15,00",...N.register("hourlyRate"),className:"mt-1"}),N.formState.errors.hourlyRate&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:N.formState.errors.hourlyRate.message})]}),s.jsxs("div",{children:[s.jsxs(oe,{className:"text-foreground",children:["Durée prévue: ",I[0],"h"]}),s.jsx(AO,{value:I,onValueChange:X=>{k(X),N.setValue("duration",X[0])},max:720,min:1,step:1,className:"mt-2"}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[s.jsx("span",{children:"1h"}),s.jsx("span",{children:"720h"})]})]})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"availability",className:"text-foreground",children:"Disponibilités (optionnel)"}),s.jsx(Ee,{id:"availability",placeholder:"Ex: Lundi-Vendredi 18h-20h, Week-ends",...N.register("availability"),className:"mt-1"})]})]})]}),s.jsxs(K,{children:[s.jsxs(Ne,{children:[s.jsxs(Ce,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(Ho,{className:"w-5 h-5"}),"Photos ",a==="gift"?"(optionnelles)":"(1-10 photos)"]}),s.jsx(nt,{children:a==="gift"?"Ajoutez des photos pour donner envie (optionnel)":"Première photo = photo principale. Max 15MB par image."})]}),s.jsx(Y,{children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-4",children:[l.map((X,de)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:X,alt:`Photo ${de+1}`,className:"w-full h-20 object-cover rounded-lg"}),s.jsx(B,{type:"button",variant:"destructive",size:"icon",className:"absolute top-1 right-1 w-5 h-5 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>T(de),children:s.jsx(ew,{className:"w-3 h-3"})}),de===0&&s.jsx(Ae,{className:"absolute bottom-1 left-1 text-xs bg-primary text-primary-foreground",children:"Principale"})]},de)),l.length<10&&s.jsxs("label",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg h-20 flex items-center justify-center cursor-pointer hover:border-primary/50 transition-colors",children:[s.jsxs("div",{className:"text-center",children:[u?s.jsx("div",{className:"w-5 h-5 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-1"}):s.jsx(J0,{className:"w-5 h-5 mx-auto mb-1 text-muted-foreground"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:u?"Upload...":"Ajouter"})]}),s.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:A,className:"hidden",disabled:u})]})]})})]}),s.jsxs(K,{children:[s.jsx(Ne,{children:s.jsxs(Ce,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(fh,{className:"w-5 h-5"}),"Tags et localisation"]})}),s.jsxs(Y,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(oe,{className:"text-foreground",children:"Tags * (max 5)"}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:v.map(X=>s.jsxs(Ae,{variant:"secondary",className:"flex items-center gap-1",children:[X,s.jsx(B,{type:"button",variant:"ghost",size:"icon",className:"w-4 h-4 p-0 hover:bg-transparent",onClick:()=>H(X),children:s.jsx(ew,{className:"w-3 h-3"})})]},X))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ee,{placeholder:"Ajouter un tag...",value:f,onChange:X=>m(X.target.value),onKeyPress:X=>X.key==="Enter"&&(X.preventDefault(),U()),className:"flex-1"}),s.jsx(B,{type:"button",onClick:U,disabled:!f.trim()||v.length>=5,children:"Ajouter"})]}),v.length===0&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:"Ajoutez au moins un tag"})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"meetingLocation",className:"text-foreground",children:"Point de rencontre *"}),s.jsx(Ee,{id:"meetingLocation",placeholder:"Ex: Bibliothèque universitaire, Hall principal...",...N.register("meetingLocation"),className:"mt-1"}),N.formState.errors.meetingLocation&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:N.formState.errors.meetingLocation.message}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Privilégiez les lieux publics et fréquentés"})]})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(K,{children:[s.jsx(Ne,{children:s.jsxs(Ce,{className:"flex items-center gap-2 text-sm text-foreground",children:[s.jsx(Rd,{className:"w-4 h-4"}),"Validation"]})}),s.jsx(Y,{children:s.jsxs("div",{className:"space-y-2 text-xs",children:[s.jsxs("div",{className:`flex items-center gap-2 ${N.watch("title")&&N.watch("title").length>=5?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${N.watch("title")&&N.watch("title").length>=5?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Titre (5-80 caractères)"})]}),s.jsxs("div",{className:`flex items-center gap-2 ${N.watch("description")&&N.watch("description").length>=20?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${N.watch("description")&&N.watch("description").length>=20?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Description (20-1000 caractères)"})]}),s.jsxs("div",{className:`flex items-center gap-2 ${v.length>0?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${v.length>0?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Tags (1-5)"})]}),s.jsxs("div",{className:`flex items-center gap-2 ${N.watch("meetingLocation")?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${N.watch("meetingLocation")?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Point de rencontre"})]}),a==="sell"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:`flex items-center gap-2 ${N.watch("price")?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${N.watch("price")?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Prix (≥ 1€)"})]}),s.jsxs("div",{className:`flex items-center gap-2 ${S.length>0?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${S.length>0?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Modes de paiement"})]})]}),a==="gift"&&s.jsxs("div",{className:`flex items-center gap-2 ${N.watch("donationReason")&&N.watch("donationReason").length>=10?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${N.watch("donationReason")&&N.watch("donationReason").length>=10?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Motif du don"})]}),a==="swap"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:`flex items-center gap-2 ${x.some(X=>X.trim())?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${x.some(X=>X.trim())?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Objets recherchés"})]}),s.jsxs("div",{className:`flex items-center gap-2 ${N.watch("estimatedValue")?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${N.watch("estimatedValue")?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Valeur estimée"})]})]}),a==="service"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:`flex items-center gap-2 ${N.watch("hourlyRate")?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${N.watch("hourlyRate")?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Tarif (≥ 5€/h)"})]}),s.jsxs("div",{className:`flex items-center gap-2 ${N.watch("skills")&&N.watch("skills").length>=20?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${N.watch("skills")&&N.watch("skills").length>=20?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Compétences"})]})]})]})})]}),s.jsxs(K,{children:[s.jsx(Ne,{children:s.jsxs(Ce,{className:"flex items-center gap-2 text-sm text-foreground",children:[s.jsx(ft,{className:"w-4 h-4"}),"Conseils de sécurité"]})}),s.jsx(Y,{children:s.jsxs("div",{className:"space-y-2 text-xs",children:[s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),s.jsx("span",{className:"text-muted-foreground",children:"Rencontrez-vous dans un lieu public"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),s.jsx("span",{className:"text-muted-foreground",children:"Vérifiez l'identité de l'autre personne"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),s.jsx("span",{className:"text-muted-foreground",children:"Testez l'objet avant la transaction"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),s.jsx("span",{className:"text-muted-foreground",children:"Privilégiez les paiements sécurisés"})]})]})})]}),s.jsx(K,{children:s.jsxs(Y,{className:"pt-6",children:[s.jsx(B,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 text-white",disabled:w||!L()||u,children:w?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Publication..."]}):u?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Upload des images..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Z0,{className:"w-4 h-4 mr-2"}),"Publier l'annonce"]})}),s.jsx("p",{className:"text-xs text-muted-foreground text-center mt-2",children:L()?"Votre annonce sera visible immédiatement":"Complétez tous les champs obligatoires"})]})})]})]})]})]})};var zj="Tabs",[Bse,eoe]=Hr(zj,[Tv]),RO=Tv(),[qse,Bj]=Bse(zj),MO=p.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:a,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=t,d=Tl(l),[f,m]=Br({prop:r,onChange:i,defaultProp:a});return s.jsx(qse,{scope:n,baseId:Fr(),value:f,onValueChange:m,orientation:o,dir:d,activationMode:c,children:s.jsx(Se.div,{dir:d,"data-orientation":o,...u,ref:e})})});MO.displayName=zj;var DO="TabsList",OO=p.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,a=Bj(DO,n),o=RO(n);return s.jsx(bR,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:r,children:s.jsx(Se.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:e})})});OO.displayName=DO;var LO="TabsTrigger",VO=p.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...a}=t,o=Bj(LO,n),l=RO(n),c=$O(o.baseId,r),u=zO(o.baseId,r),d=r===o.value;return s.jsx(jR,{asChild:!0,...l,focusable:!i,active:d,children:s.jsx(Se.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...a,ref:e,onMouseDown:le(t.onMouseDown,f=>{!i&&f.button===0&&f.ctrlKey===!1?o.onValueChange(r):f.preventDefault()}),onKeyDown:le(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(r)}),onFocus:le(t.onFocus,()=>{const f=o.activationMode!=="manual";!d&&!i&&f&&o.onValueChange(r)})})})});VO.displayName=LO;var FO="TabsContent",UO=p.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:a,...o}=t,l=Bj(FO,n),c=$O(l.baseId,r),u=zO(l.baseId,r),d=r===l.value,f=p.useRef(d);return p.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),s.jsx(Un,{present:i||d,children:({present:m})=>s.jsx(Se.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:m&&a})})});UO.displayName=FO;function $O(t,e){return`${t}-trigger-${e}`}function zO(t,e){return`${t}-content-${e}`}var Wse=MO,BO=OO,qO=VO,WO=UO;const Pl=Wse,jo=p.forwardRef(({className:t,...e},n)=>s.jsx(BO,{ref:n,className:Pe("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...e}));jo.displayName=BO.displayName;const Ot=p.forwardRef(({className:t,...e},n)=>s.jsx(qO,{ref:n,className:Pe("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...e}));Ot.displayName=qO.displayName;const Lt=p.forwardRef(({className:t,...e},n)=>s.jsx(WO,{ref:n,className:Pe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Lt.displayName=WO.displayName;const HO=({currentPhotoURL:t,displayName:e})=>{var x,g;const{currentUser:n,updateUserProfile:r}=Qt(),[i,a]=p.useState(!1),[o,l]=p.useState(!1),[c,u]=p.useState(null),[d,f]=p.useState(null),m=p.useRef(null),v=_=>{var O;const E=(O=_.target.files)==null?void 0:O[0];if(!E)return;if(!E.type.startsWith("image/")){ee.error("Veuillez sélectionner une image");return}if(E.size>5*1024*1024){ee.error("L'image ne doit pas dépasser 5MB");return}f(E);const S=new FileReader;S.onload=I=>{var k;u((k=I.target)==null?void 0:k.result)},S.readAsDataURL(E)},y=async()=>{if(!(!d||!n)){l(!0);try{const _=`profile-photos/${n.uid}-${Date.now()}.${d.name.split(".").pop()}`,E=zb(qb,_),S=await Ub(E,d),O=await $b(S.ref);await rh(n,{photoURL:O}),await r({photoURL:O}),ee.success("Photo de profil mise à jour !"),a(!1),u(null),f(null)}catch(_){console.error("Erreur lors de l'upload:",_),ee.error("Erreur lors de la mise à jour de la photo")}finally{l(!1)}}},w=async()=>{if(n){l(!0);try{await rh(n,{photoURL:null}),await r({photoURL:null}),ee.success("Photo de profil supprimée"),a(!1)}catch(_){console.error("Erreur lors de la suppression:",_),ee.error("Erreur lors de la suppression de la photo")}finally{l(!1)}}},b=()=>{f(null),u(null),m.current&&(m.current.value="")};return s.jsxs(si,{open:i,onOpenChange:a,children:[s.jsx(Cc,{asChild:!0,children:s.jsxs("div",{className:"relative group cursor-pointer",children:[s.jsxs(Qi,{className:"h-20 w-20",children:[s.jsx(Xi,{src:t||""}),s.jsx(Zi,{className:"text-lg bg-gradient-to-br from-primary to-secondary text-white",children:((x=e[0])==null?void 0:x.toUpperCase())||"U"})]}),s.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(Ho,{className:"w-6 h-6 text-white"})}),s.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-primary rounded-full flex items-center justify-center border-2 border-background",children:s.jsx(Ho,{className:"w-3 h-3 text-white"})})]})}),s.jsxs(Ss,{className:"max-w-md",children:[s.jsx(ii,{children:s.jsxs(Es,{className:"flex items-center gap-2",children:[s.jsx(Ho,{className:"w-5 h-5"}),"Photo de profil"]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex justify-center",children:s.jsxs(Qi,{className:"h-32 w-32",children:[s.jsx(Xi,{src:c||t||""}),s.jsx(Zi,{className:"text-2xl bg-gradient-to-br from-primary to-secondary text-white",children:((g=e[0])==null?void 0:g.toUpperCase())||"U"})]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("input",{ref:m,type:"file",accept:"image/*",onChange:v,className:"hidden"}),d?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"text-sm text-muted-foreground text-center",children:[s.jsx("p",{className:"font-medium",children:d.name}),s.jsxs("p",{children:[(d.size/1024/1024).toFixed(2)," MB"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(B,{onClick:b,variant:"outline",className:"flex-1",disabled:o,children:"Annuler"}),s.jsx(B,{onClick:y,className:"flex-1",disabled:o,children:o?s.jsxs(s.Fragment,{children:[s.jsx(Yn,{className:"w-4 h-4 mr-2 animate-spin"}),"Upload..."]}):s.jsxs(s.Fragment,{children:[s.jsx(J0,{className:"w-4 h-4 mr-2"}),"Confirmer"]})})]})]}):s.jsxs("div",{className:"space-y-3",children:[s.jsxs(B,{onClick:()=>{var _;return(_=m.current)==null?void 0:_.click()},variant:"outline",className:"w-full",children:[s.jsx(J0,{className:"w-4 h-4 mr-2"}),"Choisir une photo"]}),t&&s.jsxs(B,{onClick:w,variant:"outline",disabled:o,className:"w-full text-destructive hover:text-destructive",children:[o?s.jsx(Yn,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(ew,{className:"w-4 h-4 mr-2"}),"Supprimer la photo"]})]})]}),s.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[s.jsx("p",{children:"• Formats acceptés : JPG, PNG, GIF"}),s.jsx("p",{children:"• Taille maximale : 5MB"}),s.jsx("p",{children:"• Recommandé : image carrée, minimum 200x200px"})]})]})]})]})},rr=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(typeof t=="object"&&t!==null&&"toDate"in t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return typeof t=="object"&&t!==null&&"seconds"in t&&typeof t.seconds=="number"?new Date(t.seconds*1e3):new Date},Hse=()=>{const{currentUser:t,userProfile:e}=Qt(),[n,r]=p.useState([]),[i,a]=p.useState([]),[o,l]=p.useState([]),[c,u]=p.useState(null),[d,f]=p.useState({totalListings:0,activeListings:0,totalReviews:0,averageRating:0,totalFavorites:0}),[m,v]=p.useState({profile:!0,listings:!0,reviews:!0,favorites:!0}),y=async()=>{if(t)try{v(V=>({...V,profile:!0}));const z=await rs(tt(_e,"users",t.uid));if(z.exists()){const V=z.data();u({...V,createdAt:rr(V.createdAt),updatedAt:rr(V.updatedAt)})}else console.log("Aucun document utilisateur trouvé dans Firestore"),u(null)}catch(z){console.error("Erreur lors du chargement du profil:",z),u(null)}finally{v(z=>({...z,profile:!1}))}};p.useEffect(()=>{t&&(y(),w(),b(),x())},[t]);const w=async()=>{if(t)try{v(L=>({...L,listings:!0}));const z=Wt(vt(_e,"listings"),hn("sellerId","==",t.uid),ns(20)),V=await fn(z),M=[];V.forEach(L=>{const W=L.data();M.push({id:L.id,...W,createdAt:rr(W.createdAt),updatedAt:rr(W.updatedAt)})}),M.sort((L,W)=>rr(W.createdAt).getTime()-rr(L.createdAt).getTime()),r(M);const $=M.filter(L=>L.status==="active");f(L=>({...L,totalListings:M.length,activeListings:$.length}))}catch(z){console.error("Erreur lors du chargement des annonces:",z)}finally{v(z=>({...z,listings:!1}))}},b=async()=>{if(t)try{v(W=>({...W,reviews:!0}));const z=Wt(vt(_e,"reviews"),hn("revieweeId","==",t.uid),ns(10)),V=await fn(z),M=[];V.forEach(W=>{const ne=W.data();M.push({id:W.id,...ne,createdAt:rr(ne.createdAt)})}),M.sort((W,ne)=>rr(ne.createdAt).getTime()-rr(W.createdAt).getTime()),a(M);const $=M.reduce((W,ne)=>W+ne.rating,0),L=M.length>0?$/M.length:0;f(W=>({...W,totalReviews:M.length,averageRating:Math.round(L*10)/10}))}catch(z){console.error("Erreur lors du chargement des avis:",z)}finally{v(z=>({...z,reviews:!1}))}},x=async()=>{if(t)try{v($=>({...$,favorites:!0}));const z=Wt(vt(_e,"favorites"),hn("userId","==",t.uid),ns(20)),V=await fn(z),M=[];if(V.forEach($=>{const L=$.data();M.push({id:$.id,...L,createdAt:rr(L.createdAt)})}),M.sort(($,L)=>rr(L.createdAt).getTime()-rr($.createdAt).getTime()),f($=>({...$,totalFavorites:M.length})),M.length>0){const $=M.slice(0,6).map(async W=>{try{const ne=await rs(tt(_e,"listings",W.listingId));if(ne.exists()){const ye=ne.data();return{id:ne.id,...ye,createdAt:rr(ye.createdAt),updatedAt:rr(ye.updatedAt)}}return null}catch(ne){return console.error("Erreur lors du chargement d'une annonce favorite:",ne),null}}),L=await Promise.all($);l(L.filter(W=>W!==null))}}catch(z){console.error("Erreur lors du chargement des favoris:",z)}finally{v(z=>({...z,favorites:!1}))}},g=z=>{if(!z)return"Date inconnue";try{const V=rr(z);return isNaN(V.getTime())?"Date invalide":Su(V,{addSuffix:!0,locale:Qn})}catch{return"Date invalide"}},_=z=>Array.from({length:5},(V,M)=>s.jsx(Aa,{className:`h-4 w-4 ${M<z?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},M)),E=localStorage.getItem("pendingUserData"),S=E?JSON.parse(E):{};let O=(c==null?void 0:c.displayName)||(e==null?void 0:e.displayName)||S.displayName||"";!O&&(t!=null&&t.displayName)&&(O=t.displayName),!O&&(t!=null&&t.email)&&(O=t.email.split("@")[0]),O||(O="Utilisateur");let I=(c==null?void 0:c.university)||(e==null?void 0:e.university)||S.university||"";if((c==null?void 0:c.university)==="Autre université"&&c.otherUniversity||(e==null?void 0:e.university)==="Autre université"&&e.otherUniversity||S.university==="Autre université"&&S.otherUniversity){const z=c==null?void 0:c.otherUniversity,V=e==null?void 0:e.otherUniversity,M=S.otherUniversity;I=z||V||M||"Université personnalisée"}I||(I="Université spécifiée lors de l'inscription");let k=(c==null?void 0:c.fieldOfStudy)||(e==null?void 0:e.fieldOfStudy)||S.fieldOfStudy||"";if((c==null?void 0:c.fieldOfStudy)==="Autre"&&c.otherFieldOfStudy||(e==null?void 0:e.fieldOfStudy)==="Autre"&&e.otherFieldOfStudy||S.fieldOfStudy==="Autre"&&S.otherFieldOfStudy){const z=c==null?void 0:c.otherFieldOfStudy,V=e==null?void 0:e.otherFieldOfStudy,M=S.otherFieldOfStudy;k=z||V||M||"Filière personnalisée"}k||(k="Filière non spécifiée");const R=(c==null?void 0:c.graduationYear)||(e==null?void 0:e.graduationYear)||S.graduationYear||"",N=(c==null?void 0:c.email)||(e==null?void 0:e.email)||S.email||(t==null?void 0:t.email)||"",P=(c==null?void 0:c.photoURL)||(e==null?void 0:e.photoURL)||"",A=(c==null?void 0:c.createdAt)||(e==null?void 0:e.createdAt),T=(c==null?void 0:c.isVerified)||(e==null?void 0:e.isVerified),U=(c==null?void 0:c.location)||(e==null?void 0:e.location)||"",H=(c==null?void 0:c.co2Saved)||(e==null?void 0:e.co2Saved)||0;return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsx(K,{children:s.jsx(Ne,{className:"text-left",children:s.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-4 sm:space-x-4 text-center sm:text-left",children:[s.jsxs("div",{className:"relative flex-shrink-0 mx-auto sm:mx-0",children:[s.jsx(HO,{currentPhotoURL:P,displayName:O}),T&&s.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center border-2 border-background",children:s.jsx(ft,{className:"w-3 h-3 text-white"})})]}),s.jsxs("div",{className:"flex-1 w-full",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-2 mb-1",children:[s.jsx(Ce,{className:"text-2xl text-center sm:text-left w-full sm:w-auto",children:O}),T&&s.jsxs(Ae,{className:"bg-green-100 text-green-800 border-green-200 mt-2 sm:mt-0",children:[s.jsx(ft,{className:"w-3 h-3 mr-1"}),"Vérifié"]})]}),s.jsx(nt,{className:"text-base text-center sm:text-left break-all",children:N}),s.jsxs("div",{className:"flex flex-col gap-1 mt-2 text-muted-foreground text-center sm:text-left",children:[s.jsxs("div",{children:[s.jsx(fr,{className:"h-4 w-4 mr-1 inline"})," Université : ",s.jsx("span",{className:"text-sm",children:I})]}),s.jsxs("div",{children:[s.jsx(pu,{className:"h-4 w-4 mr-1 inline"})," Filière : ",s.jsx("span",{className:"text-sm",children:k})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-bold",children:"Année de diplôme :"})," ",s.jsx("span",{className:"text-sm",children:R})]})]}),U&&s.jsxs("div",{className:"flex items-center justify-center sm:justify-start mt-1 text-muted-foreground text-center sm:text-left",children:[s.jsx(lr,{className:"h-4 w-4 mr-1"}),s.jsx("span",{className:"text-sm",children:U})]}),s.jsxs("div",{className:"flex items-center justify-center sm:justify-start mt-1 text-muted-foreground text-center sm:text-left",children:[s.jsx(ys,{className:"h-4 w-4 mr-1"}),s.jsxs("span",{className:"text-sm",children:["Membre depuis ",g(A)]})]}),H&&H>0&&s.jsxs("div",{className:"flex items-center justify-center sm:justify-start mt-1 text-green-600 text-center sm:text-left",children:[s.jsx(Ns,{className:"h-4 w-4 mr-1"}),s.jsxs("span",{className:"text-sm font-medium",children:[H," kg CO₂ économisés"]})]})]})]})})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ft,{className:"h-5 w-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:m.listings?s.jsx("div",{className:"h-8 w-8 bg-muted animate-pulse rounded"}):d.totalListings}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Annonces totales"})]})]})})}),s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(sf,{className:"h-5 w-5 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:m.listings?s.jsx("div",{className:"h-8 w-8 bg-muted animate-pulse rounded"}):d.activeListings}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Annonces actives"})]})]})})}),s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Aa,{className:"h-5 w-5 text-yellow-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:m.reviews?s.jsx("div",{className:"h-8 w-8 bg-muted animate-pulse rounded"}):d.averageRating||"—"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Note moyenne"})]})]})})}),s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(cr,{className:"h-5 w-5 text-red-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:m.favorites?s.jsx("div",{className:"h-8 w-8 bg-muted animate-pulse rounded"}):d.totalFavorites}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Favoris"})]})]})})})]}),s.jsxs(Pl,{defaultValue:"listings",className:"space-y-4",children:[s.jsxs(jo,{className:"grid w-full grid-cols-3",children:[s.jsxs(Ot,{value:"listings",className:"flex items-center gap-2",children:[s.jsx(Ft,{className:"w-4 h-4"}),"Mes Annonces",!m.listings&&d.totalListings>0&&s.jsx(Ae,{variant:"secondary",className:"ml-1",children:d.totalListings})]}),s.jsxs(Ot,{value:"reviews",className:"flex items-center gap-2",children:[s.jsx(Aa,{className:"w-4 h-4"}),"Avis Reçus",!m.reviews&&d.totalReviews>0&&s.jsx(Ae,{variant:"secondary",className:"ml-1",children:d.totalReviews})]}),s.jsxs(Ot,{value:"favorites",className:"flex items-center gap-2",children:[s.jsx(cr,{className:"w-4 h-4"}),"Favoris",!m.favorites&&d.totalFavorites>0&&s.jsx(Ae,{variant:"secondary",className:"ml-1",children:d.totalFavorites})]})]}),s.jsx(Lt,{value:"listings",className:"space-y-4",children:s.jsxs(K,{children:[s.jsxs(Ne,{children:[s.jsxs(Ce,{className:"flex items-center gap-2",children:[s.jsx(Ft,{className:"w-5 h-5"}),"Mes Annonces"]}),s.jsx(nt,{children:"Gérez vos annonces publiées sur StudyMarket"})]}),s.jsx(Y,{children:m.listings?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:3}).map((z,V)=>s.jsxs(K,{className:"animate-pulse",children:[s.jsx("div",{className:"aspect-[4/3] bg-muted"}),s.jsxs(Y,{className:"p-4 space-y-2",children:[s.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},V))}):n.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Ft,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune annonce"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous n'avez pas encore publié d'annonces."}),s.jsx(B,{asChild:!0,children:s.jsx("a",{href:"/create",children:"Publier ma première annonce"})})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(z=>s.jsx(yh,{listing:z},z.id))})})]})}),s.jsx(Lt,{value:"reviews",className:"space-y-4",children:s.jsxs(K,{children:[s.jsxs(Ne,{children:[s.jsxs(Ce,{className:"flex items-center gap-2",children:[s.jsx(Aa,{className:"w-5 h-5"}),"Avis Reçus"]}),s.jsx(nt,{children:"Les avis laissés par d'autres étudiants"})]}),s.jsx(Y,{children:m.reviews?s.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((z,V)=>s.jsxs("div",{className:"border rounded-lg p-4 animate-pulse",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"flex space-x-1",children:Array.from({length:5}).map((M,$)=>s.jsx("div",{className:"w-4 h-4 bg-muted rounded"},$))}),s.jsx("div",{className:"h-4 w-20 bg-muted rounded"})]}),s.jsx("div",{className:"h-4 bg-muted rounded w-full mb-2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/3"})]},V))}):i.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Ht,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucun avis"}),s.jsx("p",{className:"text-muted-foreground",children:"Aucun avis reçu pour le moment. Les avis apparaîtront après vos premières transactions."})]}):s.jsx("div",{className:"space-y-4",children:i.map(z=>s.jsxs("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"flex",children:_(z.rating)}),s.jsxs(Ae,{variant:"secondary",className:"text-xs",children:[z.rating,"/5"]})]}),s.jsx("span",{className:"text-sm text-muted-foreground",children:g(z.createdAt)})]}),s.jsx("p",{className:"text-foreground mb-3 leading-relaxed",children:z.comment}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[s.jsxs("span",{children:["Par ",z.reviewerName||"Utilisateur anonyme"]}),s.jsx(Ae,{variant:"outline",className:"text-xs",children:z.reviewType==="buyer"?"Acheteur":"Vendeur"})]})]},z.id))})})]})}),s.jsx(Lt,{value:"favorites",className:"space-y-4",children:s.jsxs(K,{children:[s.jsxs(Ne,{children:[s.jsxs(Ce,{className:"flex items-center gap-2",children:[s.jsx(cr,{className:"w-5 h-5"}),"Mes Favoris"]}),s.jsx(nt,{children:"Les annonces que vous avez ajoutées à vos favoris"})]}),s.jsx(Y,{children:m.favorites?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:3}).map((z,V)=>s.jsxs(K,{className:"animate-pulse",children:[s.jsx("div",{className:"aspect-[4/3] bg-muted"}),s.jsxs(Y,{className:"p-4 space-y-2",children:[s.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},V))}):o.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(cr,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucun favori"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous n'avez pas encore d'annonces favorites. Explorez les annonces et ajoutez-les à vos favoris !"}),s.jsx(B,{asChild:!0,children:s.jsx("a",{href:"/listings",children:"Explorer les annonces"})})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(z=>s.jsx(yh,{listing:z},z.id))})})]})})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsx("p",{className:"text-center text-muted-foreground",children:"Vous devez être connecté pour voir votre profil."})})})})};var qj="Switch",[Gse,toe]=Hr(qj),[Kse,Yse]=Gse(qj),GO=p.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...f}=t,[m,v]=p.useState(null),y=We(e,_=>v(_)),w=p.useRef(!1),b=m?d||!!m.closest("form"):!0,[x=!1,g]=Br({prop:i,defaultProp:a,onChange:u});return s.jsxs(Kse,{scope:n,checked:x,disabled:l,children:[s.jsx(Se.button,{type:"button",role:"switch","aria-checked":x,"aria-required":o,"data-state":QO(x),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:y,onClick:le(t.onClick,_=>{g(E=>!E),b&&(w.current=_.isPropagationStopped(),w.current||_.stopPropagation())})}),b&&s.jsx(Qse,{control:m,bubbles:!w.current,name:r,value:c,checked:x,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});GO.displayName=qj;var KO="SwitchThumb",YO=p.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,i=Yse(KO,n);return s.jsx(Se.span,{"data-state":QO(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})});YO.displayName=KO;var Qse=t=>{const{control:e,checked:n,bubbles:r=!0,...i}=t,a=p.useRef(null),o=Ov(n),l=Sv(e);return p.useEffect(()=>{const c=a.current,u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==n&&f){const m=new Event("click",{bubbles:r});f.call(c,n),c.dispatchEvent(m)}},[o,n,r]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:a,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function QO(t){return t?"checked":"unchecked"}var XO=GO,Xse=YO;const yn=p.forwardRef(({className:t,...e},n)=>s.jsx(XO,{className:Pe("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:s.jsx(Xse,{className:Pe("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));yn.displayName=XO.displayName;const Zse=De.object({displayName:De.string().min(2,"Le nom doit contenir au moins 2 caractères"),bio:De.string().max(500,"La bio ne peut pas dépasser 500 caractères").optional(),phone:De.string().optional(),university:De.string().min(1,"Veuillez sélectionner votre université"),fieldOfStudy:De.string().min(1,"Veuillez indiquer votre filière"),graduationYear:De.number().min(2020).max(2035),campus:De.string().optional(),location:De.string().optional()}),Jse=De.object({currentPassword:De.string().min(6,"Le mot de passe actuel est requis"),newPassword:De.string().min(6,"Le nouveau mot de passe doit contenir au moins 6 caractères"),confirmPassword:De.string()}).refine(t=>t.newPassword===t.confirmPassword,{message:"Les mots de passe ne correspondent pas",path:["confirmPassword"]}),eie=De.object({newEmail:De.string().email("Email invalide"),password:De.string().min(6,"Mot de passe requis pour changer l'email")}),tie=["Sorbonne Université","Université Paris-Dauphine","École Polytechnique","ENS Paris","CentraleSupélec","MINES ParisTech","HEC Paris","ESSEC","ESCP","Université Paris 1 Panthéon-Sorbonne","Université Paris Cité","Sciences Po Paris","Université de Lyon","Université de Marseille","Université de Toulouse","Université de Bordeaux","Université de Lille","Université de Strasbourg","Université de Nantes","Université de Montpellier","Autre université"],nie=["Informatique","Ingénierie","Commerce/Management","Droit","Médecine","Sciences","Lettres/Langues","Sciences Humaines","Arts","Architecture","Économie","Psychologie","Communication","Design","Autre"],rie=()=>{var U,H,z,V,M,$;const{currentUser:t,userProfile:e,updateUserProfile:n,logout:r}=Qt(),i=En(),[a,o]=p.useState("profile"),[l,c]=p.useState(!1),[u,d]=p.useState(!1),[f,m]=p.useState(!1),[v,y]=p.useState(!1),[w,b]=p.useState(""),[x,g]=p.useState({email:((U=e==null?void 0:e.notificationPreferences)==null?void 0:U.email)??!0,push:((H=e==null?void 0:e.notificationPreferences)==null?void 0:H.push)??!0,sms:((z=e==null?void 0:e.notificationPreferences)==null?void 0:z.sms)??!1,alerts:((V=e==null?void 0:e.notificationPreferences)==null?void 0:V.alerts)??!0,messages:!0,listings:!0,reviews:!0,marketing:!1}),[_,E]=p.useState({profileVisibility:"public",showEmail:!1,showPhone:!1,showUniversity:!0,allowMessages:!0,showOnlineStatus:!0}),S=Qo({resolver:Xo(Zse),defaultValues:{displayName:(e==null?void 0:e.displayName)||"",bio:(e==null?void 0:e.bio)||"",phone:(e==null?void 0:e.phone)||"",university:(e==null?void 0:e.university)||"",fieldOfStudy:(e==null?void 0:e.fieldOfStudy)||"",graduationYear:(e==null?void 0:e.graduationYear)||new Date().getFullYear()+2,campus:(e==null?void 0:e.campus)||"",location:(e==null?void 0:e.location)||""}}),O=Qo({resolver:Xo(Jse)}),I=Qo({resolver:Xo(eie)});p.useEffect(()=>{var L,W,ne,ye;e&&(S.reset({displayName:e.displayName||"",bio:e.bio||"",phone:e.phone||"",university:e.university||"",fieldOfStudy:e.fieldOfStudy||"",graduationYear:e.graduationYear||new Date().getFullYear()+2,campus:e.campus||"",location:e.location||""}),g({email:((L=e.notificationPreferences)==null?void 0:L.email)??!0,push:((W=e.notificationPreferences)==null?void 0:W.push)??!0,sms:((ne=e.notificationPreferences)==null?void 0:ne.sms)??!1,alerts:((ye=e.notificationPreferences)==null?void 0:ye.alerts)??!0,messages:!0,listings:!0,reviews:!0,marketing:!1}))},[e,S]);const k=async L=>{c(!0);try{await n({displayName:L.displayName,bio:L.bio||null,phone:L.phone||null,university:L.university,fieldOfStudy:L.fieldOfStudy,graduationYear:L.graduationYear,campus:L.campus||null,location:L.location||null}),ee.success("Profil mis à jour avec succès !")}catch(W){console.error("Erreur lors de la mise à jour du profil:",W),ee.error("Erreur lors de la mise à jour du profil")}finally{c(!1)}},R=async()=>{c(!0);try{await n({notificationPreferences:{email:x.email,push:x.push,sms:x.sms,alerts:x.alerts}}),ee.success("Préférences de notification mises à jour !")}catch(L){console.error("Erreur lors de la mise à jour des notifications:",L),ee.error("Erreur lors de la mise à jour des notifications")}finally{c(!1)}},N=async L=>{if(t){c(!0);try{const W=Ya.credential(t.email,L.currentPassword);await F2(t,W),await vU(t,L.newPassword),ee.success("Mot de passe mis à jour avec succès !"),m(!1),O.reset()}catch(W){console.error("Erreur lors du changement de mot de passe:",W),W.code==="auth/wrong-password"?ee.error("Mot de passe actuel incorrect"):ee.error("Erreur lors du changement de mot de passe")}finally{c(!1)}}},P=async L=>{if(t){c(!0);try{const W=Ya.credential(t.email,L.password);await F2(t,W),await gU(t,L.newEmail),await n({email:L.newEmail}),ee.success("Email mis à jour avec succès !"),y(!1),I.reset()}catch(W){console.error("Erreur lors du changement d'email:",W),W.code==="auth/wrong-password"?ee.error("Mot de passe incorrect"):W.code==="auth/email-already-in-use"?ee.error("Cet email est déjà utilisé"):ee.error("Erreur lors du changement d'email")}finally{c(!1)}}},A=async()=>{if(!(!t||w!=="SUPPRIMER")){c(!0);try{const L=RB(_e),W=["listings","conversations","reviews","favorites","reports"];for(const ne of W){const ye=Wt(vt(_e,ne),hn("userId","==",t.uid));(await fn(ye)).forEach(xt=>{L.delete(xt.ref)})}L.delete(tt(_e,"users",t.uid)),await L.commit(),await jU(t),ee.success("Compte supprimé avec succès"),i("/")}catch(L){console.error("Erreur lors de la suppression du compte:",L),ee.error("Erreur lors de la suppression du compte")}finally{c(!1)}}},T=async()=>{if(t){c(!0);try{const L={profile:e,listings:[],conversations:[],reviews:[],favorites:[]},W=Wt(vt(_e,"listings"),hn("sellerId","==",t.uid)),ne=await fn(W);L.listings=ne.docs.map(He=>({id:He.id,...He.data()}));const ye=Wt(vt(_e,"conversations"),hn("participants","array-contains",t.uid)),Xe=await fn(ye);L.conversations=Xe.docs.map(He=>({id:He.id,...He.data()}));const xt=Wt(vt(_e,"reviews"),hn("revieweeId","==",t.uid)),ut=await fn(xt);L.reviews=ut.docs.map(He=>({id:He.id,...He.data()}));const ve=Wt(vt(_e,"favorites"),hn("userId","==",t.uid)),Qe=await fn(ve);L.favorites=Qe.docs.map(He=>({id:He.id,...He.data()}));const X=JSON.stringify(L,null,2),de=new Blob([X],{type:"application/json"}),ke=URL.createObjectURL(de),Le=document.createElement("a");Le.href=ke,Le.download=`studymarket-data-${new Date().toISOString().split("T")[0]}.json`,Le.click(),URL.revokeObjectURL(ke),ee.success("Données exportées avec succès !")}catch(L){console.error("Erreur lors de l'export des données:",L),ee.error("Erreur lors de l'export des données")}finally{c(!1)}}};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[s.jsx(vv,{className:"w-8 h-8"}),"Paramètres"]}),s.jsx("p",{className:"text-muted-foreground",children:"Gérez votre profil, vos préférences et votre sécurité"})]}),s.jsxs(Pl,{value:a,onValueChange:o,className:"space-y-6",children:[s.jsxs(jo,{className:"grid w-full grid-cols-5",children:[s.jsxs(Ot,{value:"profile",className:"flex items-center gap-2",children:[s.jsx(fr,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Profil"})]}),s.jsxs(Ot,{value:"notifications",className:"flex items-center gap-2",children:[s.jsx(gs,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Notifications"})]}),s.jsxs(Ot,{value:"privacy",className:"flex items-center gap-2",children:[s.jsx(Hc,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Confidentialité"})]}),s.jsxs(Ot,{value:"security",className:"flex items-center gap-2",children:[s.jsx(ft,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Sécurité"})]}),s.jsxs(Ot,{value:"data",className:"flex items-center gap-2",children:[s.jsx(ss,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Données"})]})]}),s.jsx(Lt,{value:"profile",className:"space-y-6",children:s.jsxs(K,{children:[s.jsxs(Ne,{children:[s.jsxs(Ce,{className:"flex items-center gap-2",children:[s.jsx(fr,{className:"w-5 h-5"}),"Informations personnelles"]}),s.jsx(nt,{children:"Mettez à jour vos informations de profil et vos préférences"})]}),s.jsxs(Y,{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(HO,{currentPhotoURL:(e==null?void 0:e.photoURL)||"",displayName:(e==null?void 0:e.displayName)||t.email||"Utilisateur"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium",children:"Photo de profil"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Cliquez sur votre avatar pour changer votre photo"})]})]}),s.jsx(Zr,{}),s.jsxs("form",{onSubmit:S.handleSubmit(k),className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"displayName",children:"Nom complet *"}),s.jsx(Ee,{id:"displayName",...S.register("displayName"),placeholder:"Votre nom complet"}),S.formState.errors.displayName&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:S.formState.errors.displayName.message})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"phone",children:"Téléphone"}),s.jsx(Ee,{id:"phone",type:"tel",...S.register("phone"),placeholder:"+33 6 12 34 56 78"})]})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"bio",children:"Biographie"}),s.jsx(Cs,{id:"bio",...S.register("bio"),placeholder:"Parlez-nous de vous...",rows:3,maxLength:500}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[((M=S.watch("bio"))==null?void 0:M.length)||0,"/500 caractères"]})]}),s.jsx(Zr,{}),s.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[s.jsx(pu,{className:"w-4 h-4"}),"Informations académiques"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"university",children:"Université *"}),s.jsxs(Et,{value:S.watch("university"),onValueChange:L=>S.setValue("university",L),children:[s.jsx(wt,{children:s.jsx(Ct,{placeholder:"Sélectionnez votre université"})}),s.jsx(bt,{children:tie.map(L=>s.jsx(be,{value:L,children:L},L))})]}),S.formState.errors.university&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:S.formState.errors.university.message})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"fieldOfStudy",children:"Filière d'études *"}),s.jsxs(Et,{value:S.watch("fieldOfStudy"),onValueChange:L=>S.setValue("fieldOfStudy",L),children:[s.jsx(wt,{children:s.jsx(Ct,{placeholder:"Sélectionnez votre filière"})}),s.jsx(bt,{children:nie.map(L=>s.jsx(be,{value:L,children:L},L))})]}),S.formState.errors.fieldOfStudy&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:S.formState.errors.fieldOfStudy.message})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"graduationYear",children:"Année de diplôme *"}),s.jsxs(Et,{value:($=S.watch("graduationYear"))==null?void 0:$.toString(),onValueChange:L=>S.setValue("graduationYear",parseInt(L)),children:[s.jsx(wt,{children:s.jsx(Ct,{placeholder:"Année de diplôme"})}),s.jsx(bt,{children:Array.from({length:16},(L,W)=>2020+W).map(L=>s.jsx(be,{value:L.toString(),children:L},L))})]}),S.formState.errors.graduationYear&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:S.formState.errors.graduationYear.message})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"campus",children:"Campus"}),s.jsx(Ee,{id:"campus",...S.register("campus"),placeholder:"Campus principal"})]})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"location",children:"Localisation"}),s.jsx(Ee,{id:"location",...S.register("location"),placeholder:"Paris, France"})]}),s.jsx(B,{type:"submit",disabled:l,className:"w-full",children:l?s.jsxs(s.Fragment,{children:[s.jsx(Yn,{className:"w-4 h-4 mr-2 animate-spin"}),"Sauvegarde..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ny,{className:"w-4 h-4 mr-2"}),"Sauvegarder les modifications"]})})]})]})]})}),s.jsx(Lt,{value:"notifications",className:"space-y-6",children:s.jsxs(K,{children:[s.jsxs(Ne,{children:[s.jsxs(Ce,{className:"flex items-center gap-2",children:[s.jsx(gs,{className:"w-5 h-5"}),"Préférences de notification"]}),s.jsx(nt,{children:"Choisissez comment vous souhaitez être notifié"})]}),s.jsxs(Y,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Canaux de notification"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Cr,{className:"w-4 h-4 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Email"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevez des notifications par email"})]})]}),s.jsx(yn,{checked:x.email,onCheckedChange:L=>g(W=>({...W,email:L}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Cl,{className:"w-4 h-4 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Notifications push"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications dans le navigateur"})]})]}),s.jsx(yn,{checked:x.push,onCheckedChange:L=>g(W=>({...W,push:L}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(gu,{className:"w-4 h-4 text-purple-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"SMS"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications par SMS (bientôt disponible)"})]})]}),s.jsx(yn,{checked:x.sms,onCheckedChange:L=>g(W=>({...W,sms:L})),disabled:!0})]})]})]}),s.jsx(Zr,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Types de notifications"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Ht,{className:"w-4 h-4 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Messages"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouveaux messages et conversations"})]})]}),s.jsx(yn,{checked:x.messages,onCheckedChange:L=>g(W=>({...W,messages:L}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Ft,{className:"w-4 h-4 text-orange-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Annonces"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouvelles annonces correspondant à vos recherches"})]})]}),s.jsx(yn,{checked:x.listings,onCheckedChange:L=>g(W=>({...W,listings:L}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Aa,{className:"w-4 h-4 text-yellow-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Avis et évaluations"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouveaux avis sur vos transactions"})]})]}),s.jsx(yn,{checked:x.reviews,onCheckedChange:L=>g(W=>({...W,reviews:L}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(gs,{className:"w-4 h-4 text-red-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Alertes de sécurité"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Alertes importantes et mises à jour de sécurité"})]})]}),s.jsx(yn,{checked:x.alerts,onCheckedChange:L=>g(W=>({...W,alerts:L}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(yW,{className:"w-4 h-4 text-pink-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Marketing"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouvelles fonctionnalités et promotions"})]})]}),s.jsx(yn,{checked:x.marketing,onCheckedChange:L=>g(W=>({...W,marketing:L}))})]})]})]}),s.jsx(B,{onClick:R,disabled:l,className:"w-full",children:l?s.jsxs(s.Fragment,{children:[s.jsx(Yn,{className:"w-4 h-4 mr-2 animate-spin"}),"Sauvegarde..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ny,{className:"w-4 h-4 mr-2"}),"Sauvegarder les préférences"]})})]})]})}),s.jsx(Lt,{value:"privacy",className:"space-y-6",children:s.jsxs(K,{children:[s.jsxs(Ne,{children:[s.jsxs(Ce,{className:"flex items-center gap-2",children:[s.jsx(Hc,{className:"w-5 h-5"}),"Confidentialité et visibilité"]}),s.jsx(nt,{children:"Contrôlez qui peut voir vos informations"})]}),s.jsxs(Y,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Visibilité du profil"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Profil public"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre profil est visible par tous les étudiants vérifiés"})]}),s.jsx(yn,{checked:_.profileVisibility==="public",onCheckedChange:L=>E(W=>({...W,profileVisibility:L?"public":"private"}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Afficher l'email"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre email est visible sur votre profil public"})]}),s.jsx(yn,{checked:_.showEmail,onCheckedChange:L=>E(W=>({...W,showEmail:L}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Afficher le téléphone"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre numéro de téléphone est visible sur votre profil"})]}),s.jsx(yn,{checked:_.showPhone,onCheckedChange:L=>E(W=>({...W,showPhone:L}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Afficher l'université"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre université est visible sur votre profil"})]}),s.jsx(yn,{checked:_.showUniversity,onCheckedChange:L=>E(W=>({...W,showUniversity:L}))})]})]})]}),s.jsx(Zr,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Interactions"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Autoriser les messages"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Les autres étudiants peuvent vous envoyer des messages"})]}),s.jsx(yn,{checked:_.allowMessages,onCheckedChange:L=>E(W=>({...W,allowMessages:L}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Statut en ligne"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Afficher quand vous êtes en ligne"})]}),s.jsx(yn,{checked:_.showOnlineStatus,onCheckedChange:L=>E(W=>({...W,showOnlineStatus:L}))})]})]})]}),s.jsxs(pt,{children:[s.jsx(ft,{className:"h-4 w-4"}),s.jsx(gt,{children:"Vos informations personnelles sont toujours protégées et ne sont jamais partagées avec des tiers sans votre consentement."})]})]})]})}),s.jsx(Lt,{value:"security",className:"space-y-6",children:s.jsxs(K,{children:[s.jsxs(Ne,{children:[s.jsxs(Ce,{className:"flex items-center gap-2",children:[s.jsx(ft,{className:"w-5 h-5"}),"Sécurité du compte"]}),s.jsx(nt,{children:"Gérez la sécurité de votre compte StudyMarket"})]}),s.jsxs(Y,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Informations du compte"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Cr,{className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"font-medium",children:"Email"})]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:t.email}),s.jsxs(si,{open:v,onOpenChange:y,children:[s.jsx(Cc,{asChild:!0,children:s.jsx(B,{variant:"outline",size:"sm",children:"Changer l'email"})}),s.jsxs(Ss,{children:[s.jsxs(ii,{children:[s.jsx(Es,{children:"Changer l'adresse email"}),s.jsx(Yo,{children:"Entrez votre nouveau email et votre mot de passe actuel"})]}),s.jsxs("form",{onSubmit:I.handleSubmit(P),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"newEmail",children:"Nouvel email"}),s.jsx(Ee,{id:"newEmail",type:"email",...I.register("newEmail"),placeholder:"nouveau@email.com"}),I.formState.errors.newEmail&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:I.formState.errors.newEmail.message})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"emailPassword",children:"Mot de passe actuel"}),s.jsx(Ee,{id:"emailPassword",type:"password",...I.register("password"),placeholder:"••••••••"}),I.formState.errors.password&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:I.formState.errors.password.message})]}),s.jsxs(Xm,{children:[s.jsx(B,{type:"button",variant:"outline",onClick:()=>y(!1),children:"Annuler"}),s.jsxs(B,{type:"submit",disabled:l,children:[l?s.jsx(Yn,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(ny,{className:"w-4 h-4 mr-2"}),"Changer l'email"]})]})]})]})]})]}),s.jsxs("div",{className:"p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(hl,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{className:"font-medium",children:"Mot de passe"})]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Dernière modification : il y a 30 jours"}),s.jsxs(si,{open:f,onOpenChange:m,children:[s.jsx(Cc,{asChild:!0,children:s.jsx(B,{variant:"outline",size:"sm",children:"Changer le mot de passe"})}),s.jsxs(Ss,{children:[s.jsxs(ii,{children:[s.jsx(Es,{children:"Changer le mot de passe"}),s.jsx(Yo,{children:"Entrez votre mot de passe actuel et votre nouveau mot de passe"})]}),s.jsxs("form",{onSubmit:O.handleSubmit(N),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"currentPassword",children:"Mot de passe actuel"}),s.jsx(Ee,{id:"currentPassword",type:"password",...O.register("currentPassword"),placeholder:"••••••••"}),O.formState.errors.currentPassword&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:O.formState.errors.currentPassword.message})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"newPassword",children:"Nouveau mot de passe"}),s.jsx(Ee,{id:"newPassword",type:"password",...O.register("newPassword"),placeholder:"••••••••"}),O.formState.errors.newPassword&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:O.formState.errors.newPassword.message})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"confirmPassword",children:"Confirmer le nouveau mot de passe"}),s.jsx(Ee,{id:"confirmPassword",type:"password",...O.register("confirmPassword"),placeholder:"••••••••"}),O.formState.errors.confirmPassword&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:O.formState.errors.confirmPassword.message})]}),s.jsxs(Xm,{children:[s.jsx(B,{type:"button",variant:"outline",onClick:()=>m(!1),children:"Annuler"}),s.jsxs(B,{type:"submit",disabled:l,children:[l?s.jsx(Yn,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(mW,{className:"w-4 h-4 mr-2"}),"Changer le mot de passe"]})]})]})]})]})]})]})]}),s.jsx(Zr,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Vérification du compte"}),s.jsx("div",{className:"p-4 border rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${e!=null&&e.isVerified?"bg-green-500":"bg-yellow-500"}`}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:e!=null&&e.isVerified?"Compte vérifié":"Vérification en attente"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e!=null&&e.isVerified?"Votre statut étudiant a été vérifié":"Votre statut étudiant est en cours de vérification"})]})]}),e!=null&&e.isVerified?s.jsxs(Ae,{className:"bg-green-100 text-green-800",children:[s.jsx(Je,{className:"w-3 h-3 mr-1"}),"Vérifié"]}):s.jsx(Ae,{variant:"outline",children:"En attente"})]})})]}),s.jsxs(pt,{children:[s.jsx(ft,{className:"h-4 w-4"}),s.jsx(gt,{children:"Pour votre sécurité, nous vous recommandons d'utiliser un mot de passe fort et de le changer régulièrement."})]})]})]})}),s.jsxs(Lt,{value:"data",className:"space-y-6",children:[s.jsxs(K,{children:[s.jsxs(Ne,{children:[s.jsxs(Ce,{className:"flex items-center gap-2",children:[s.jsx(ss,{className:"w-5 h-5"}),"Gestion des données"]}),s.jsx(nt,{children:"Exportez ou supprimez vos données personnelles"})]}),s.jsxs(Y,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Exporter mes données"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Téléchargez une copie de toutes vos données StudyMarket au format JSON."}),s.jsxs(B,{onClick:T,disabled:l,variant:"outline",children:[l?s.jsx(Yn,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(ss,{className:"w-4 h-4 mr-2"}),"Exporter mes données"]})]}),s.jsx(Zr,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium text-destructive",children:"Zone de danger"}),s.jsxs(pt,{className:"border-destructive",children:[s.jsx(Jt,{className:"h-4 w-4"}),s.jsx(gt,{children:"La suppression de votre compte est irréversible. Toutes vos données seront définitivement supprimées."})]}),s.jsxs(si,{open:u,onOpenChange:d,children:[s.jsx(Cc,{asChild:!0,children:s.jsxs(B,{variant:"destructive",children:[s.jsx(Oi,{className:"w-4 h-4 mr-2"}),"Supprimer mon compte"]})}),s.jsxs(Ss,{children:[s.jsxs(ii,{children:[s.jsx(Es,{className:"text-destructive",children:"Supprimer définitivement le compte"}),s.jsxs(Yo,{children:["Cette action est irréversible. Toutes vos données seront supprimées :",s.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[s.jsx("li",{children:"Profil utilisateur"}),s.jsx("li",{children:"Toutes vos annonces"}),s.jsx("li",{children:"Conversations et messages"}),s.jsx("li",{children:"Avis et évaluations"}),s.jsx("li",{children:"Favoris et recherches sauvegardées"})]})]})]}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"deleteConfirm",children:'Tapez "SUPPRIMER" pour confirmer'}),s.jsx(Ee,{id:"deleteConfirm",value:w,onChange:L=>b(L.target.value),placeholder:"SUPPRIMER"})]})}),s.jsxs(Xm,{children:[s.jsx(B,{variant:"outline",onClick:()=>d(!1),children:"Annuler"}),s.jsxs(B,{variant:"destructive",onClick:A,disabled:w!=="SUPPRIMER"||l,children:[l?s.jsx(Yn,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(Oi,{className:"w-4 h-4 mr-2"}),"Supprimer définitivement"]})]})]})]})]})]})]}),s.jsxs(K,{children:[s.jsx(Ne,{children:s.jsxs(Ce,{className:"flex items-center gap-2",children:[s.jsx(Kp,{className:"w-5 h-5"}),"Informations légales"]})}),s.jsx(Y,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(B,{variant:"outline",asChild:!0,children:s.jsxs("a",{href:"/terms",target:"_blank",className:"flex items-center gap-2",children:[s.jsx(jr,{className:"w-4 h-4"}),"Conditions d'utilisation"]})}),s.jsx(B,{variant:"outline",asChild:!0,children:s.jsxs("a",{href:"/privacy",target:"_blank",className:"flex items-center gap-2",children:[s.jsx(jr,{className:"w-4 h-4"}),"Politique de confidentialité"]})}),s.jsx(B,{variant:"outline",asChild:!0,children:s.jsxs("a",{href:"/cookies",target:"_blank",className:"flex items-center gap-2",children:[s.jsx(jr,{className:"w-4 h-4"}),"Politique des cookies"]})}),s.jsx(B,{variant:"outline",asChild:!0,children:s.jsxs("a",{href:"/support",target:"_blank",className:"flex items-center gap-2",children:[s.jsx(jr,{className:"w-4 h-4"}),"Centre d'aide"]})})]})})]})]})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsx("p",{className:"text-center text-muted-foreground",children:"Vous devez être connecté pour accéder aux paramètres."})})})})};function sie(t,e=[]){let n=[];function r(a,o){const l=p.createContext(o),c=n.length;n=[...n,o];function u(f){const{scope:m,children:v,...y}=f,w=(m==null?void 0:m[t][c])||l,b=p.useMemo(()=>y,Object.values(y));return s.jsx(w.Provider,{value:b,children:v})}function d(f,m){const v=(m==null?void 0:m[t][c])||l,y=p.useContext(v);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${a}\``)}return u.displayName=a+"Provider",[u,d]}const i=()=>{const a=n.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[r,iie(i,...e)]}function iie(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(a)[`__scope${u}`];return{...l,...f}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var Wj="Progress",Hj=100,[aie,noe]=sie(Wj),[oie,lie]=aie(Wj),ZO=p.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:i,getValueLabel:a=cie,...o}=t;(i||i===0)&&!iC(i)&&console.error(uie(`${i}`,"Progress"));const l=iC(i)?i:Hj;r!==null&&!aC(r,l)&&console.error(die(`${r}`,"Progress"));const c=aC(r,l)?r:null,u=jg(c)?a(c,l):void 0;return s.jsx(oie,{scope:n,value:c,max:l,children:s.jsx(Se.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":jg(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":t3(c,l),"data-value":c??void 0,"data-max":l,...o,ref:e})})});ZO.displayName=Wj;var JO="ProgressIndicator",e3=p.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,i=lie(JO,n);return s.jsx(Se.div,{"data-state":t3(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:e})});e3.displayName=JO;function cie(t,e){return`${Math.round(t/e*100)}%`}function t3(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function jg(t){return typeof t=="number"}function iC(t){return jg(t)&&!isNaN(t)&&t>0}function aC(t,e){return jg(t)&&!isNaN(t)&&t<=e&&t>=0}function uie(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Hj}\`.`}function die(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Hj} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var n3=ZO,hie=e3;const r3=p.forwardRef(({className:t,value:e,...n},r)=>s.jsx(n3,{ref:r,className:Pe("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",t),...n,children:s.jsx(hie,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));r3.displayName=n3.displayName;const Io={electronics:{category:"Électronique",icon:Cl,color:"text-blue-600",co2PerItem:85,waterPerItem:1200,energyPerItem:450,wastePerItem:2.5,description:"Smartphones, ordinateurs, accessoires tech"},books:{category:"Livres & Cours",icon:CA,color:"text-green-600",co2PerItem:8.5,waterPerItem:85,energyPerItem:12,wastePerItem:.8,description:"Manuels, livres, notes de cours"},furniture:{category:"Mobilier",icon:Qp,color:"text-purple-600",co2PerItem:45,waterPerItem:350,energyPerItem:180,wastePerItem:15,description:"Meubles, déco, électroménager"},clothing:{category:"Vêtements",icon:Gb,color:"text-pink-600",co2PerItem:22,waterPerItem:2700,energyPerItem:35,wastePerItem:.5,description:"Vêtements, chaussures, accessoires"}},fie=[{id:"first_transaction",name:"Premier Pas",icon:"🌱",threshold:1,description:"Première transaction écologique"},{id:"co2_saver_10",name:"Éco-Warrior",icon:"🌍",threshold:10,description:"10 kg CO₂ économisés"},{id:"co2_saver_50",name:"Planète Protecteur",icon:"🛡️",threshold:50,description:"50 kg CO₂ économisés"},{id:"co2_saver_100",name:"Héros Climatique",icon:"🦸",threshold:100,description:"100 kg CO₂ économisés"},{id:"water_saver",name:"Gardien de l'Eau",icon:"💧",threshold:1e3,description:"1000L d'eau économisés"},{id:"recycling_master",name:"Maître du Recyclage",icon:"♻️",threshold:20,description:"20 transactions de seconde main"},{id:"donation_hero",name:"Ange du Don",icon:"😇",threshold:5,description:"5 dons gratuits"},{id:"monthly_champion",name:"Champion Mensuel",icon:"🏆",threshold:10,description:"10 transactions en un mois"}],Wl=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},mie=()=>{const{currentUser:t,userProfile:e}=Qt(),[n,r]=p.useState({totalCo2Saved:0,totalWaterSaved:0,totalEnergySaved:0,totalWasteAvoided:0,transactionsByCategory:{},monthlyImpact:[],badges:[],rank:"Débutant",percentile:0}),[i,a]=p.useState([]),[o,l]=p.useState(!0),[c,u]=p.useState("all");p.useEffect(()=>{t&&d()},[t,c]);const d=async()=>{if(t){l(!0);try{const g=Wt(vt(_e,"listings"),hn("sellerId","==",t.uid)),_=await fn(g),E=[];_.forEach(O=>{const I=O.data();E.push({id:O.id,...I,createdAt:Wl(I.createdAt),updatedAt:Wl(I.updatedAt)})}),a(E);const S=f(E,c);r(S),await w(S)}catch(g){console.error("Erreur lors du chargement des données environnementales:",g)}finally{l(!1)}}},f=(g,_)=>{const E=new Date;let S=g;if(_==="month"){const H=new Date(E.getFullYear(),E.getMonth()-1,E.getDate());S=g.filter(z=>Wl(z.createdAt)>=H)}else if(_==="year"){const H=new Date(E.getFullYear()-1,E.getMonth(),E.getDate());S=g.filter(z=>Wl(z.createdAt)>=H)}let O=0,I=0,k=0,R=0;const N={};S.forEach(H=>{const z=Io[H.category]||Io.electronics,V=1;let M=1;H.transactionType==="donation"?M=1.2:H.transactionType==="exchange"&&(M=.8),O+=z.co2PerItem*V*M,I+=z.waterPerItem*V*M,k+=z.energyPerItem*V*M,R+=z.wastePerItem*V*M,N[H.category]=(N[H.category]||0)+1});const P=m(g),A=v(g,O,I),{rank:T,percentile:U}=y(O,g.length);return{totalCo2Saved:Math.round(O*10)/10,totalWaterSaved:Math.round(I),totalEnergySaved:Math.round(k*10)/10,totalWasteAvoided:Math.round(R*10)/10,transactionsByCategory:N,monthlyImpact:P,badges:A,rank:T,percentile:U}},m=g=>{const _={};for(let E=11;E>=0;E--){const S=new Date;S.setMonth(S.getMonth()-E);const O=S.toISOString().slice(0,7);_[O]={co2Saved:0,transactions:0,waterSaved:0,energySaved:0}}return g.forEach(E=>{const O=Wl(E.createdAt).toISOString().slice(0,7);if(_[O]){const I=Io[E.category]||Io.electronics;let k=1;E.transactionType==="donation"?k=1.2:E.transactionType==="exchange"&&(k=.8),_[O].co2Saved+=I.co2PerItem*k,_[O].waterSaved+=I.waterPerItem*k,_[O].energySaved+=I.energyPerItem*k,_[O].transactions+=1}}),Object.entries(_).map(([E,S])=>({month:E,co2Saved:Math.round(S.co2Saved*10)/10,transactions:S.transactions,waterSaved:Math.round(S.waterSaved),energySaved:Math.round(S.energySaved*10)/10}))},v=(g,_,E)=>{const S=[];g.length>=1&&S.push("first_transaction"),_>=10&&S.push("co2_saver_10"),_>=50&&S.push("co2_saver_50"),_>=100&&S.push("co2_saver_100"),E>=1e3&&S.push("water_saver"),g.length>=20&&S.push("recycling_master"),g.filter(R=>R.transactionType==="donation").length>=5&&S.push("donation_hero");const I=new Date().toISOString().slice(0,7);return g.filter(R=>Wl(R.createdAt).toISOString().slice(0,7)===I).length>=10&&S.push("monthly_champion"),S},y=(g,_)=>{let E="Débutant",S=0;return g>=200?(E="Légende Écologique",S=95):g>=100?(E="Maître Environnemental",S=85):g>=50?(E="Expert Vert",S=70):g>=25?(E="Éco-Warrior",S=50):g>=10?(E="Protecteur",S=30):g>=5&&(E="Apprenti Vert",S=15),{rank:E,percentile:S}},w=async g=>{if(t)try{const _=tt(_e,"users",t.uid);await Mn(_,{co2Saved:g.totalCo2Saved,environmentalRank:g.rank,environmentalBadges:g.badges,lastEnvironmentalUpdate:new Date})}catch(_){console.error("Erreur lors de la mise à jour des données environnementales:",_)}},b=async()=>{const g=`🌍 Mon impact écologique sur StudyMarket :

🌱 ${n.totalCo2Saved} kg CO₂ économisés
💧 ${n.totalWaterSaved} L d'eau préservés
⚡ ${n.totalEnergySaved} kWh d'énergie économisés
🏆 Rang : ${n.rank}

Rejoignez la communauté étudiante éco-responsable ! 🎓`;if(navigator.share)try{await navigator.share({title:"Mon Impact Écologique - StudyMarket",text:g,url:window.location.origin})}catch{navigator.clipboard.writeText(g)}else navigator.clipboard.writeText(g)},x=()=>{const g={user:e==null?void 0:e.displayName,date:new Date().toISOString(),impact:n,transactions:i.length,period:c},_=new Blob([JSON.stringify(g,null,2)],{type:"application/json"}),E=URL.createObjectURL(_),S=document.createElement("a");S.href=E,S.download=`impact-ecologique-${new Date().toISOString().slice(0,10)}.json`,S.click(),URL.revokeObjectURL(E)};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(Ns,{className:"w-8 h-8 text-green-600"}),"Mon Impact Écologique"]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Découvrez votre contribution à la protection de l'environnement"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(B,{variant:"outline",onClick:b,className:"flex items-center gap-2",children:[s.jsx(Hb,{className:"w-4 h-4"}),"Partager"]}),s.jsxs(B,{variant:"outline",onClick:x,className:"flex items-center gap-2",children:[s.jsx(ss,{className:"w-4 h-4"}),"Exporter"]})]})]}),s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ys,{className:"w-5 h-5 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:"Période d'analyse :"})]}),s.jsx("div",{className:"flex gap-2",children:[{key:"month",label:"Ce mois"},{key:"year",label:"Cette année"},{key:"all",label:"Tout"}].map(g=>s.jsx(B,{variant:c===g.key?"default":"outline",size:"sm",onClick:()=>u(g.key),children:g.label},g.key))})]})})}),o?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Array.from({length:4}).map((g,_)=>s.jsx(K,{className:"animate-pulse",children:s.jsx(Y,{className:"pt-6",children:s.jsx("div",{className:"h-16 bg-muted rounded"})})},_))}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(K,{className:"border-green-200 bg-green-50/50",children:s.jsxs(Y,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-green-700",children:n.totalCo2Saved}),s.jsx("p",{className:"text-sm text-green-600",children:"kg CO₂ économisés"})]}),s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(Ns,{className:"w-6 h-6 text-green-600"})})]}),s.jsxs("div",{className:"mt-2 text-xs text-green-600",children:["≈ ",Math.round(n.totalCo2Saved/2.3)," km en voiture évités"]})]})}),s.jsx(K,{className:"border-blue-200 bg-blue-50/50",children:s.jsxs(Y,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-blue-700",children:n.totalWaterSaved.toLocaleString()}),s.jsx("p",{className:"text-sm text-blue-600",children:"L d'eau préservés"})]}),s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(BS,{className:"w-6 h-6 text-blue-600"})})]}),s.jsxs("div",{className:"mt-2 text-xs text-blue-600",children:["≈ ",Math.round(n.totalWaterSaved/150)," douches économisées"]})]})}),s.jsx(K,{className:"border-yellow-200 bg-yellow-50/50",children:s.jsxs(Y,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-yellow-700",children:n.totalEnergySaved}),s.jsx("p",{className:"text-sm text-yellow-600",children:"kWh économisés"})]}),s.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center",children:s.jsx(vu,{className:"w-6 h-6 text-yellow-600"})})]}),s.jsxs("div",{className:"mt-2 text-xs text-yellow-600",children:["≈ ",Math.round(n.totalEnergySaved/3.5)," jours d'électricité"]})]})}),s.jsx(K,{className:"border-purple-200 bg-purple-50/50",children:s.jsxs(Y,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-purple-700",children:n.totalWasteAvoided}),s.jsx("p",{className:"text-sm text-purple-600",children:"kg déchets évités"})]}),s.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:s.jsx(jW,{className:"w-6 h-6 text-purple-600"})})]}),s.jsxs("div",{className:"mt-2 text-xs text-purple-600",children:["≈ ",Math.round(n.totalWasteAvoided/.5)," sacs poubelle évités"]})]})})]}),s.jsxs(K,{children:[s.jsx(Ne,{children:s.jsxs(Ce,{className:"flex items-center gap-2",children:[s.jsx(SA,{className:"w-5 h-5 text-yellow-600"}),"Votre Rang Écologique"]})}),s.jsxs(Y,{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold text-primary",children:n.rank}),s.jsxs("p",{className:"text-muted-foreground",children:["Vous êtes dans le top ",100-n.percentile,"% des utilisateurs"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-3xl",children:"🏆"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Rang actuel"})]})]}),s.jsx(r3,{value:n.percentile,className:"h-3"}),s.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground mt-2",children:[s.jsx("span",{children:"Débutant"}),s.jsx("span",{children:"Légende Écologique"})]})]})]}),s.jsxs(Pl,{defaultValue:"overview",className:"space-y-4",children:[s.jsxs(jo,{className:"grid w-full grid-cols-4",children:[s.jsx(Ot,{value:"overview",children:"Vue d'ensemble"}),s.jsx(Ot,{value:"categories",children:"Par catégorie"}),s.jsx(Ot,{value:"badges",children:"Badges"}),s.jsx(Ot,{value:"methodology",children:"Méthodologie"})]}),s.jsxs(Lt,{value:"overview",className:"space-y-6",children:[s.jsxs(K,{children:[s.jsxs(Ne,{children:[s.jsxs(Ce,{className:"flex items-center gap-2",children:[s.jsx(PA,{className:"w-5 h-5"}),"Évolution Mensuelle"]}),s.jsx(nt,{children:"Votre impact environnemental au cours des 12 derniers mois"})]}),s.jsx(Y,{children:s.jsx("div",{className:"space-y-4",children:n.monthlyImpact.slice(-6).map((g,_)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),s.jsx("span",{className:"font-medium",children:new Date(g.month+"-01").toLocaleDateString("fr-FR",{month:"long",year:"numeric"})})]}),s.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"font-semibold text-green-600",children:[g.co2Saved," kg"]}),s.jsx("div",{className:"text-muted-foreground",children:"CO₂"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"font-semibold text-blue-600",children:[g.waterSaved," L"]}),s.jsx("div",{className:"text-muted-foreground",children:"Eau"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-semibold text-primary",children:g.transactions}),s.jsx("div",{className:"text-muted-foreground",children:"Transactions"})]})]})]},g.month))})})]}),s.jsxs(K,{children:[s.jsxs(Ne,{children:[s.jsxs(Ce,{className:"flex items-center gap-2",children:[s.jsx(RA,{className:"w-5 h-5"}),"Équivalences Concrètes"]}),s.jsx(nt,{children:"Votre impact traduit en équivalences du quotidien"})]}),s.jsx(Y,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-50 rounded-lg",children:[s.jsx(IA,{className:"w-8 h-8 text-green-600"}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold",children:[Math.round(n.totalCo2Saved/2.3)," km"]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"de trajet en voiture évités"})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-blue-50 rounded-lg",children:[s.jsx(EW,{className:"w-8 h-8 text-blue-600"}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold",children:[Math.round(n.totalCo2Saved/22)," arbres"]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"plantés (équivalent CO₂)"})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-yellow-50 rounded-lg",children:[s.jsx(uW,{className:"w-8 h-8 text-yellow-600"}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold",children:[Math.round(n.totalEnergySaved/24)," jours"]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"de consommation électrique"})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-purple-50 rounded-lg",children:[s.jsx(BS,{className:"w-8 h-8 text-purple-600"}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold",children:[Math.round(n.totalWaterSaved/150)," douches"]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"de 10 minutes économisées"})]})]})]})})]})]}),s.jsx(Lt,{value:"categories",className:"space-y-6",children:s.jsxs(K,{children:[s.jsxs(Ne,{children:[s.jsxs(Ce,{className:"flex items-center gap-2",children:[s.jsx(Ft,{className:"w-5 h-5"}),"Impact par Catégorie"]}),s.jsx(nt,{children:"Détail de votre impact selon les types d'objets échangés"})]}),s.jsx(Y,{children:s.jsx("div",{className:"space-y-4",children:Object.entries(n.transactionsByCategory).map(([g,_])=>{const E=Io[g]||Io.electronics,S=E.icon,O=_*E.co2PerItem;return s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-muted flex items-center justify-center",children:s.jsx(S,{className:`w-5 h-5 ${E.color}`})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:E.category}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[_," transaction",_>1?"s":""]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-semibold text-green-600",children:[Math.round(O*10)/10," kg CO₂"]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[Math.round(_*E.waterPerItem)," L eau"]})]})]},g)})})})]})}),s.jsx(Lt,{value:"badges",className:"space-y-6",children:s.jsxs(K,{children:[s.jsxs(Ne,{children:[s.jsxs(Ce,{className:"flex items-center gap-2",children:[s.jsx(Z0,{className:"w-5 h-5"}),"Badges Écologiques"]}),s.jsx(nt,{children:"Vos récompenses pour votre engagement environnemental"})]}),s.jsx(Y,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:fie.map(g=>{const _=n.badges.includes(g.id);return s.jsx("div",{className:`p-4 rounded-lg border-2 transition-all ${_?"border-green-200 bg-green-50":"border-gray-200 bg-gray-50 opacity-60"}`,children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl mb-2",children:g.icon}),s.jsx("h3",{className:`font-semibold ${_?"text-green-800":"text-gray-600"}`,children:g.name}),s.jsx("p",{className:`text-sm ${_?"text-green-600":"text-gray-500"}`,children:g.description}),_&&s.jsx(Ae,{className:"mt-2 bg-green-100 text-green-800",children:"Obtenu !"})]})},g.id)})})})]})}),s.jsx(Lt,{value:"methodology",className:"space-y-6",children:s.jsxs(K,{children:[s.jsxs(Ne,{children:[s.jsxs(Ce,{className:"flex items-center gap-2",children:[s.jsx(eo,{className:"w-5 h-5"}),"Méthodologie de Calcul"]}),s.jsx(nt,{children:"Comment nous calculons votre impact environnemental"})]}),s.jsxs(Y,{className:"space-y-6",children:[s.jsxs(pt,{children:[s.jsx(eo,{className:"h-4 w-4"}),s.jsx(gt,{children:"Nos calculs sont basés sur des études scientifiques et des données de l'ADEME (Agence de l'Environnement et de la Maîtrise de l'Énergie)."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Principe de Base"}),s.jsx("p",{className:"text-muted-foreground",children:"Chaque objet acheté d'occasion évite la production d'un objet neuf. Nous calculons l'impact environnemental évité en nous basant sur l'empreinte carbone, hydrique et énergétique de la production de chaque catégorie d'objets."}),s.jsx("h3",{className:"text-lg font-semibold",children:"Facteurs de Calcul par Catégorie"}),s.jsx("div",{className:"space-y-3",children:Object.entries(Io).map(([g,_])=>{const E=_.icon;return s.jsxs("div",{className:"p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(E,{className:`w-4 h-4 ${_.color}`}),s.jsx("span",{className:"font-medium",children:_.category})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"CO₂:"}),s.jsxs("span",{className:"ml-1 font-medium",children:[_.co2PerItem," kg"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Eau:"}),s.jsxs("span",{className:"ml-1 font-medium",children:[_.waterPerItem," L"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Énergie:"}),s.jsxs("span",{className:"ml-1 font-medium",children:[_.energyPerItem," kWh"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Déchets:"}),s.jsxs("span",{className:"ml-1 font-medium",children:[_.wastePerItem," kg"]})]})]})]},g)})}),s.jsx("h3",{className:"text-lg font-semibold",children:"Facteurs de Pondération"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Gc,{className:"w-4 h-4 text-green-600"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Dons gratuits :"})," +20% d'impact (encourage le partage)"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Hi,{className:"w-4 h-4 text-purple-600"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Échanges/Troc :"})," -20% d'impact (pas de transaction monétaire)"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ft,{className:"w-4 h-4 text-blue-600"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Ventes :"})," Impact standard (100%)"]})]})]}),s.jsx("h3",{className:"text-lg font-semibold",children:"Sources et Références"}),s.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[s.jsx("li",{children:"• ADEME - Base Carbone® pour les facteurs d'émission"}),s.jsx("li",{children:"• Water Footprint Network pour l'empreinte hydrique"}),s.jsx("li",{children:"• IEA (International Energy Agency) pour l'énergie"}),s.jsx("li",{children:"• Ellen MacArthur Foundation pour l'économie circulaire"})]})]})]})]})})]})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(K,{children:s.jsxs(Y,{className:"pt-6 text-center",children:[s.jsx(Ns,{className:"w-12 h-12 text-green-600 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir votre impact"}),s.jsx("p",{className:"text-muted-foreground",children:"Découvrez combien vous contribuez à la protection de l'environnement"})]})})})},jm=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},_g=t=>{if(t==null)return null;if(Array.isArray(t))return t.map(_g).filter(e=>e!==void 0);if(typeof t=="object"&&t!==null){const e={};return Object.keys(t).forEach(n=>{const r=_g(t[n]);r!==void 0&&(e[n]=r)}),e}return t},oC=[{value:"all",label:"Toutes catégories"},{value:"electronics",label:"Électronique"},{value:"books",label:"Livres & Cours"},{value:"furniture",label:"Mobilier"},{value:"clothing",label:"Vêtements"},{value:"services",label:"Services"},{value:"housing",label:"Logement"},{value:"jobs",label:"Jobs & Stages"}],lC=[{value:"all",label:"Tous types"},{value:"sale",label:"Vente"},{value:"donation",label:"Don"},{value:"exchange",label:"Échange"},{value:"service",label:"Service"}],pie=[{value:"all",label:"Toutes universités"},{value:"sorbonne",label:"Sorbonne Université"},{value:"dauphine",label:"Université Paris-Dauphine"},{value:"polytechnique",label:"École Polytechnique"},{value:"ens",label:"ENS Paris"},{value:"centrale",label:"CentraleSupélec"}],gie=()=>{const{currentUser:t,userProfile:e}=Qt(),[n,r]=p.useState([]),[i,a]=p.useState([]),[o,l]=p.useState({totalSearches:0,activeAlerts:0,totalMatches:0,newMatches:0}),[c,u]=p.useState({searches:!0,matches:!0,creating:!1,updating:!1}),[d,f]=p.useState(!1),[m,v]=p.useState(null),[y,w]=p.useState({name:"",query:"",category:"all",transactionType:"all",university:"all",minPrice:"",maxPrice:"",alertsEnabled:!0,notificationFrequency:"daily",notificationMethods:{email:!0,push:!0,sms:!1}});p.useEffect(()=>{t&&(b(),x())},[t]);const b=async()=>{if(t)try{u(U=>({...U,searches:!0}));const N=Wt(vt(_e,"savedSearches"),hn("userId","==",t.uid),ns(50)),P=await fn(N),A=[];P.forEach(U=>{const H=U.data();A.push({id:U.id,...H,createdAt:jm(H.createdAt),updatedAt:jm(H.updatedAt),lastNotified:H.lastNotified?jm(H.lastNotified):void 0})}),A.sort((U,H)=>H.createdAt.getTime()-U.createdAt.getTime()),r(A);const T=A.filter(U=>U.alertsEnabled).length;l(U=>({...U,totalSearches:A.length,activeAlerts:T}))}catch(N){console.error("Erreur lors du chargement des recherches sauvegardées:",N),ee.error("Erreur lors du chargement des recherches sauvegardées")}finally{u(N=>({...N,searches:!1}))}},x=async()=>{if(t)try{u(U=>({...U,matches:!0}));const N=Wt(vt(_e,"alertMatches"),hn("userId","==",t.uid),ns(100)),P=await fn(N),A=[];P.forEach(U=>{const H=U.data();A.push({id:U.id,...H,matchedAt:jm(H.matchedAt)})}),A.sort((U,H)=>H.matchedAt.getTime()-U.matchedAt.getTime()),a(A);const T=A.filter(U=>!U.seen).length;l(U=>({...U,totalMatches:A.length,newMatches:T}))}catch(N){console.error("Erreur lors du chargement des correspondances:",N),ee.error("Erreur lors du chargement des correspondances")}finally{u(N=>({...N,matches:!1}))}},g=async()=>{if(!t||!y.name.trim()){ee.error("Veuillez remplir le nom de la recherche");return}u(N=>({...N,creating:!0}));try{const N={};if(y.query&&y.query.trim()&&(N.query=y.query.trim()),y.category&&y.category!=="all"&&(N.category=y.category),y.transactionType&&y.transactionType!=="all"&&(N.transactionType=y.transactionType),y.university&&y.university!=="all"&&(N.university=y.university),y.minPrice&&y.minPrice.trim()){const T=parseFloat(y.minPrice);!isNaN(T)&&T>=0&&(N.minPrice=T)}if(y.maxPrice&&y.maxPrice.trim()){const T=parseFloat(y.maxPrice);!isNaN(T)&&T>=0&&(N.maxPrice=T)}const P={userId:t.uid,name:y.name.trim(),filters:N,alertsEnabled:y.alertsEnabled,notificationFrequency:y.notificationFrequency,notificationMethods:{email:y.notificationMethods.email,push:y.notificationMethods.push,sms:y.notificationMethods.sms},matchCount:0,createdAt:new Date,updatedAt:new Date},A=_g(P);await Ja(vt(_e,"savedSearches"),A),ee.success("Alerte créée avec succès !"),f(!1),I(),b()}catch(N){console.error("Erreur lors de la création de l'alerte:",N),ee.error("Erreur lors de la création de l'alerte")}finally{u(N=>({...N,creating:!1}))}},_=async(N,P)=>{try{u(T=>({...T,updating:!0}));const A=_g({...P,updatedAt:new Date});await Mn(tt(_e,"savedSearches",N),A),ee.success("Recherche mise à jour !"),b()}catch(A){console.error("Erreur lors de la mise à jour:",A),ee.error("Erreur lors de la mise à jour")}finally{u(A=>({...A,updating:!1}))}},E=async N=>{if(window.confirm("Êtes-vous sûr de vouloir supprimer cette recherche sauvegardée ?"))try{await qc(tt(_e,"savedSearches",N)),ee.success("Recherche supprimée !"),b()}catch(P){console.error("Erreur lors de la suppression:",P),ee.error("Erreur lors de la suppression")}},S=async(N,P)=>{await _(N,{alertsEnabled:P})},O=async N=>{try{await Mn(tt(_e,"alertMatches",N),{seen:!0,seenAt:new Date}),x()}catch(P){console.error("Erreur lors du marquage comme vu:",P)}},I=()=>{w({name:"",query:"",category:"all",transactionType:"all",university:"all",minPrice:"",maxPrice:"",alertsEnabled:!0,notificationFrequency:"daily",notificationMethods:{email:!0,push:!0,sms:!1}}),v(null)},k=N=>{try{return Su(N,{addSuffix:!0,locale:Qn})}catch{return"Date inconnue"}},R=N=>{const P=[];if(N.query&&P.push(`"${N.query}"`),N.category&&N.category!=="all"){const A=oC.find(T=>T.value===N.category);A&&P.push(A.label)}if(N.transactionType&&N.transactionType!=="all"){const A=lC.find(T=>T.value===N.transactionType);A&&P.push(A.label)}return N.minPrice!==void 0&&P.push(`≥ ${N.minPrice}€`),N.maxPrice!==void 0&&P.push(`≤ ${N.maxPrice}€`),P.length>0?P.join(" • "):"Tous les critères"};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(gs,{className:"w-8 h-8 text-primary"}),"Mes Alertes",o.totalSearches>0&&s.jsx(Ae,{variant:"secondary\\",className:"ml-1",children:o.totalSearches})]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Gérez vos recherches sauvegardées et recevez des notifications"})]}),s.jsxs(si,{open:d,onOpenChange:f,children:[s.jsx(Cc,{asChild:!0,children:s.jsxs(B,{className:"bg-gradient-to-r from-primary to-secondary",children:[s.jsx(Go,{className:"w-4 h-4 mr-2"}),"Nouvelle Alerte"]})}),s.jsxs(Ss,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(ii,{children:[s.jsxs(Es,{className:"flex items-center gap-2",children:[s.jsx(To,{className:"w-5 h-5"}),"Créer une Alerte Personnalisée"]}),s.jsx(Yo,{children:"Définissez vos critères de recherche et recevez des notifications pour les nouvelles annonces correspondantes"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"alert-name",children:"Nom de l'alerte *"}),s.jsx(Ee,{id:"alert-name",value:y.name,onChange:N=>w(P=>({...P,name:N.target.value})),placeholder:"Ex: MacBook Pro pas cher",className:"mt-1"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[s.jsx(gv,{className:"w-4 h-4"}),"Critères de Recherche"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"search-query",children:"Mots-clés"}),s.jsx(Ee,{id:"search-query",value:y.query,onChange:N=>w(P=>({...P,query:N.target.value})),placeholder:"Ex: MacBook, iPhone, livre...",className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"search-category",children:"Catégorie"}),s.jsxs(Et,{value:y.category,onValueChange:N=>w(P=>({...P,category:N})),children:[s.jsx(wt,{className:"mt-1",children:s.jsx(Ct,{})}),s.jsx(bt,{children:oC.map(N=>s.jsx(be,{value:N.value,children:N.label},N.value))})]})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"transaction-type",children:"Type de transaction"}),s.jsxs(Et,{value:y.transactionType,onValueChange:N=>w(P=>({...P,transactionType:N})),children:[s.jsx(wt,{className:"mt-1",children:s.jsx(Ct,{})}),s.jsx(bt,{children:lC.map(N=>s.jsx(be,{value:N.value,children:N.label},N.value))})]})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"search-university",children:"Université"}),s.jsxs(Et,{value:y.university,onValueChange:N=>w(P=>({...P,university:N})),children:[s.jsx(wt,{className:"mt-1",children:s.jsx(Ct,{})}),s.jsx(bt,{children:pie.map(N=>s.jsx(be,{value:N.value,children:N.label},N.value))})]})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"min-price",children:"Prix minimum (€)"}),s.jsx(Ee,{id:"min-price",type:"number",value:y.minPrice,onChange:N=>w(P=>({...P,minPrice:N.target.value})),placeholder:"0",className:"mt-1",min:"0"})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"max-price",children:"Prix maximum (€)"}),s.jsx(Ee,{id:"max-price",type:"number",value:y.maxPrice,onChange:N=>w(P=>({...P,maxPrice:N.target.value})),placeholder:"1000",className:"mt-1",min:"0"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[s.jsx(gs,{className:"w-4 h-4"}),"Notifications"]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"alerts-enabled",children:"Activer les notifications"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevoir des alertes pour cette recherche"})]}),s.jsx(yn,{id:"alerts-enabled",checked:y.alertsEnabled,onCheckedChange:N=>w(P=>({...P,alertsEnabled:N}))})]}),y.alertsEnabled&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx(oe,{children:"Fréquence des notifications"}),s.jsx("div",{className:"mt-2 space-y-2",children:[{value:"instant",label:"Instantané",description:"Dès qu'une nouvelle annonce correspond"},{value:"daily",label:"Quotidien",description:"Un résumé par jour"},{value:"weekly",label:"Hebdomadaire",description:"Un résumé par semaine"}].map(N=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",id:N.value,name:"frequency",value:N.value,checked:y.notificationFrequency===N.value,onChange:P=>w(A=>({...A,notificationFrequency:P.target.value})),className:"rounded border-border"}),s.jsx(oe,{htmlFor:N.value,className:"cursor-pointer",children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:N.label}),s.jsx("div",{className:"text-sm text-muted-foreground",children:N.description})]})})]},N.value))})]}),s.jsxs("div",{children:[s.jsx(oe,{children:"Méthodes de notification"}),s.jsxs("div",{className:"mt-2 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Cr,{className:"w-4 h-4 text-blue-600"}),s.jsx(oe,{htmlFor:"email-notifications",children:"Email"})]}),s.jsx(yn,{id:"email-notifications",checked:y.notificationMethods.email,onCheckedChange:N=>w(P=>({...P,notificationMethods:{...P.notificationMethods,email:N}}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(gs,{className:"w-4 h-4 text-green-600"}),s.jsx(oe,{htmlFor:"push-notifications",children:"Notifications push"})]}),s.jsx(yn,{id:"push-notifications",checked:y.notificationMethods.push,onCheckedChange:N=>w(P=>({...P,notificationMethods:{...P.notificationMethods,push:N}}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(qS,{className:"w-4 h-4 text-purple-600"}),s.jsx(oe,{htmlFor:"sms-notifications",children:"SMS"}),s.jsx(Ae,{variant:"outline",className:"text-xs",children:"Bientôt"})]}),s.jsx(yn,{id:"sms-notifications",checked:y.notificationMethods.sms,onCheckedChange:N=>w(P=>({...P,notificationMethods:{...P.notificationMethods,sms:N}})),disabled:!0})]})]})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[s.jsx(B,{variant:"outline",onClick:()=>f(!1),children:"Annuler"}),s.jsx(B,{onClick:g,disabled:c.creating||!y.name.trim(),children:c.creating?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Création..."]}):s.jsxs(s.Fragment,{children:[s.jsx(To,{className:"w-4 h-4 mr-2"}),"Créer l'alerte"]})})]})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:o.totalSearches}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recherches sauvées"})]}),s.jsx(Dn,{className:"w-8 h-8 text-blue-600"})]})})}),s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:o.activeAlerts}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Alertes actives"})]}),s.jsx(gs,{className:"w-8 h-8 text-green-600"})]})})}),s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:o.totalMatches}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Correspondances"})]}),s.jsx(To,{className:"w-8 h-8 text-purple-600"})]})})}),s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-orange-600",children:o.newMatches}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouvelles"})]}),s.jsx(vu,{className:"w-8 h-8 text-orange-600"})]})})})]}),s.jsxs(Pl,{defaultValue:"searches",className:"space-y-4",children:[s.jsxs(jo,{className:"grid w-full grid-cols-2",children:[s.jsxs(Ot,{value:"searches",className:"flex items-center gap-2",children:[s.jsx(Dn,{className:"w-4 h-4"}),"Mes Recherches",o.totalSearches>0&&s.jsx(Ae,{variant:"secondary\\",className:"ml-1",children:o.totalSearches})]}),s.jsxs(Ot,{value:"matches",className:"flex items-center gap-2",children:[s.jsx(To,{className:"w-4 h-4"}),"Correspondances",o.newMatches>0&&s.jsx(Ae,{className:"ml-1 bg-orange-500",children:o.newMatches})]})]}),s.jsx(Lt,{value:"searches",className:"space-y-4",children:s.jsxs(K,{children:[s.jsxs(Ne,{children:[s.jsxs(Ce,{className:"flex items-center gap-2",children:[s.jsx(Wb,{className:"w-5 h-5"}),"Recherches Sauvegardées"]}),s.jsx(nt,{children:"Gérez vos alertes et critères de recherche personnalisés"})]}),s.jsx(Y,{children:c.searches?s.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((N,P)=>s.jsxs("div",{className:"border rounded-lg p-4 animate-pulse",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"h-5 bg-muted rounded w-1/3"}),s.jsx("div",{className:"h-6 bg-muted rounded w-16"})]}),s.jsx("div",{className:"h-4 bg-muted rounded w-2/3 mb-2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]},P))}):n.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Dn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune recherche sauvegardée"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Créez votre première alerte pour être notifié des nouvelles annonces"}),s.jsxs(B,{onClick:()=>f(!0),children:[s.jsx(Go,{className:"w-4 h-4 mr-2"}),"Créer ma première alerte"]})]}):s.jsx("div",{className:"space-y-4",children:n.map(N=>s.jsxs("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h3",{className:"font-semibold",children:N.name}),N.alertsEnabled?s.jsxs(Ae,{className:"bg-green-100 text-green-800",children:[s.jsx(gs,{className:"w-3 h-3 mr-1"}),"Actif"]}):s.jsxs(Ae,{variant:"secondary",children:[s.jsx(WS,{className:"w-3 h-3 mr-1"}),"Pausé"]})]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:R(N.filters)}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(ys,{className:"w-3 h-3"}),"Créé ",k(N.createdAt)]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(To,{className:"w-3 h-3"}),N.matchCount," correspondance",N.matchCount!==1?"s":""]}),N.lastNotified&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(gs,{className:"w-3 h-3"}),"Dernière alerte ",k(N.lastNotified)]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(B,{variant:"ghost",size:"icon",onClick:()=>S(N.id,!N.alertsEnabled),title:N.alertsEnabled?"Désactiver les alertes":"Activer les alertes",children:N.alertsEnabled?s.jsx(WS,{className:"w-4 h-4"}):s.jsx(bW,{className:"w-4 h-4"})}),s.jsx(B,{variant:"ghost",size:"icon",onClick:()=>{var P,A;v(N),w({name:N.name,query:N.filters.query||"",category:N.filters.category||"all",transactionType:N.filters.transactionType||"all",university:N.filters.university||"all",minPrice:((P=N.filters.minPrice)==null?void 0:P.toString())||"",maxPrice:((A=N.filters.maxPrice)==null?void 0:A.toString())||"",alertsEnabled:N.alertsEnabled,notificationFrequency:N.notificationFrequency,notificationMethods:N.notificationMethods}),f(!0)},title:"Modifier",children:s.jsx(NW,{className:"w-4 h-4"})}),s.jsx(B,{variant:"ghost",size:"icon",onClick:()=>E(N.id),title:"Supprimer",className:"text-destructive hover:text-destructive",children:s.jsx(Oi,{className:"w-4 h-4"})})]})]}),N.alertsEnabled&&s.jsxs("div",{className:"flex items-center gap-4 text-xs bg-muted/50 rounded p-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ln,{className:"w-3 h-3"}),s.jsxs("span",{children:["Fréquence: ",N.notificationFrequency==="instant"?"Instantané":N.notificationFrequency==="daily"?"Quotidien":"Hebdomadaire"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[N.notificationMethods.email&&s.jsx(Cr,{className:"w-3 h-3 text-blue-600\\",title:"Email activé"}),N.notificationMethods.push&&s.jsx(gs,{className:"w-3 h-3 text-green-600\\",title:"Push activé"}),N.notificationMethods.sms&&s.jsx(qS,{className:"w-3 h-3 text-purple-600\\",title:"SMS activé"})]})]})]},N.id))})})]})}),s.jsx(Lt,{value:"matches",className:"space-y-4",children:s.jsxs(K,{children:[s.jsxs(Ne,{children:[s.jsxs(Ce,{className:"flex items-center gap-2",children:[s.jsx(To,{className:"w-5 h-5"}),"Correspondances Trouvées"]}),s.jsx(nt,{children:"Les annonces qui correspondent à vos critères de recherche"})]}),s.jsx(Y,{children:c.matches?s.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((N,P)=>s.jsx("div",{className:"border rounded-lg p-4 animate-pulse",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-16 h-16 bg-muted rounded"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]})},P))}):i.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(To,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune correspondance"}),s.jsx("p",{className:"text-muted-foreground",children:"Aucune annonce ne correspond encore à vos critères. Les nouvelles correspondances apparaîtront ici."})]}):s.jsx("div",{className:"space-y-4",children:i.map(N=>s.jsx("div",{className:`border rounded-lg p-4 transition-colors ${N.seen?"hover:bg-muted/50":"bg-blue-50 border-blue-200"}`,children:s.jsxs("div",{className:"flex items-center gap-4",children:[N.listingImage?s.jsx("img",{src:N.listingImage,alt:N.listingTitle,className:"w-16 h-16 object-cover rounded"}):s.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsx(Package,{className:"w-6 h-6 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx("h3",{className:"font-semibold",children:N.listingTitle}),s.jsxs("div",{className:"flex items-center gap-2",children:[!N.seen&&s.jsx(Ae,{className:"bg-blue-500",children:"Nouveau"}),s.jsx("span",{className:"font-semibold text-primary",children:N.listingPrice===0?"Gratuit":`${N.listingPrice}€`})]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(ln,{className:"w-3 h-3"}),"Trouvé ",k(N.matchedAt)]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(B,{variant:"outline",size:"sm",onClick:()=>O(N.id),disabled:N.seen,children:N.seen?s.jsxs(s.Fragment,{children:[s.jsx(Je,{className:"w-3 h-3 mr-1"}),"Vu"]}):s.jsxs(s.Fragment,{children:[s.jsx(Hc,{className:"w-3 h-3 mr-1"}),"Marquer comme vu"]})}),s.jsxs(B,{size:"sm",onClick:()=>window.open(`/listing/${N.listingId}`,"_blank"),children:[s.jsx(jr,{className:"w-3 h-3 mr-1"}),"Voir l'annonce"]})]})]})]})]})},N.id))})})]})})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(K,{children:s.jsxs(Y,{className:"pt-6 text-center",children:[s.jsx(Dn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour gérer vos alertes"}),s.jsx("p",{className:"text-muted-foreground",children:"Créez des alertes personnalisées pour être notifié des nouvelles annonces"})]})})})},_m=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},cC=[{value:"all",label:"Toutes catégories",icon:Ft},{value:"electronics",label:"Électronique",icon:Cl},{value:"books",label:"Livres & Cours",icon:CA},{value:"furniture",label:"Mobilier",icon:Qp},{value:"clothing",label:"Vêtements",icon:Gb},{value:"services",label:"Services",icon:af},{value:"housing",label:"Logement",icon:Qp},{value:"jobs",label:"Jobs & Stages",icon:kA}],vie=[{value:"all",label:"Tous types",icon:Ft},{value:"sale",label:"Vente",icon:Yp},{value:"donation",label:"Don",icon:Gc},{value:"exchange",label:"Échange",icon:Hi},{value:"service",label:"Service",icon:af}],xie=[{value:"recent",label:"Plus récents",icon:ln},{value:"oldest",label:"Plus anciens",icon:ys},{value:"price-asc",label:"Prix croissant",icon:zS},{value:"price-desc",label:"Prix décroissant",icon:NA},{value:"title",label:"Titre A-Z",icon:zS},{value:"category",label:"Par catégorie",icon:fh}],yie=()=>{const{currentUser:t,userProfile:e}=Qt(),[n,r]=p.useState([]),[i,a]=p.useState([]),[o,l]=p.useState({totalFavorites:0,byCategory:{},byTransactionType:{},averagePrice:0,recentlyAdded:0,availableCount:0,soldCount:0}),[c,u]=p.useState({favorites:!0,listings:!0,removing:!1}),[d,f]=p.useState({search:"",category:"all",transactionType:"all",priceRange:"all",availability:"all"}),[m,v]=p.useState("recent"),[y,w]=p.useState("grid"),[b,x]=p.useState([]);p.useEffect(()=>{t&&g()},[t]),p.useEffect(()=>{n.length>0&&_()},[n]);const g=async()=>{if(t)try{u(z=>({...z,favorites:!0}));const T=Wt(vt(_e,"favorites"),hn("userId","==",t.uid),ns(100)),U=await fn(T),H=[];U.forEach(z=>{const V=z.data();H.push({id:z.id,...V,createdAt:_m(V.createdAt),updatedAt:_m(V.updatedAt)})}),H.sort((z,V)=>V.createdAt.getTime()-z.createdAt.getTime()),r(H),E(H)}catch(T){console.error("Erreur lors du chargement des favoris:",T),ee.error("Erreur lors du chargement des favoris")}finally{u(T=>({...T,favorites:!1}))}},_=async()=>{try{u(z=>({...z,listings:!0}));const T=n.map(async z=>{try{const V=await rs(tt(_e,"listings",z.listingId));if(V.exists()){const M=V.data();return{id:V.id,...M,createdAt:_m(M.createdAt),updatedAt:_m(M.updatedAt)}}return null}catch(V){return console.error(`Erreur lors du chargement de l'annonce ${z.listingId}:`,V),null}}),H=(await Promise.all(T)).filter(z=>z!==null);a(H)}catch(T){console.error("Erreur lors du chargement des annonces favorites:",T)}finally{u(T=>({...T,listings:!1}))}},E=T=>{const U={},H={};let z=0,V=0;const M=new Date;M.setDate(M.getDate()-7);let $=0;T.forEach(L=>{U[L.listingCategory]=(U[L.listingCategory]||0)+1,H[L.listingTransactionType]=(H[L.listingTransactionType]||0)+1,L.listingPrice>0&&(z+=L.listingPrice,V++),L.createdAt>=M&&$++}),l({totalFavorites:T.length,byCategory:U,byTransactionType:H,averagePrice:V>0?Math.round(z/V):0,recentlyAdded:$,availableCount:T.length,soldCount:0})},S=async T=>{try{await qc(tt(_e,"favorites",T)),ee.success("Favori supprimé"),g()}catch(U){console.error("Erreur lors de la suppression:",U),ee.error("Erreur lors de la suppression")}},O=async()=>{if(b.length!==0&&window.confirm(`Supprimer ${b.length} favori(s) sélectionné(s) ?`)){u(T=>({...T,removing:!0}));try{const T=b.map(U=>qc(tt(_e,"favorites",U)));await Promise.all(T),ee.success(`${b.length} favori(s) supprimé(s)`),x([]),g()}catch(T){console.error("Erreur lors de la suppression multiple:",T),ee.error("Erreur lors de la suppression")}finally{u(T=>({...T,removing:!1}))}}},I=()=>{const T={user:e==null?void 0:e.displayName,exportDate:new Date().toISOString(),totalFavorites:n.length,favorites:n.map(V=>({title:V.listingTitle,price:V.listingPrice,category:V.listingCategory,transactionType:V.listingTransactionType,seller:V.sellerName,university:V.sellerUniversity,addedDate:V.createdAt.toISOString(),notes:V.notes||"",tags:V.tags}))},U=new Blob([JSON.stringify(T,null,2)],{type:"application/json"}),H=URL.createObjectURL(U),z=document.createElement("a");z.href=H,z.download=`mes-favoris-${new Date().toISOString().slice(0,10)}.json`,z.click(),URL.revokeObjectURL(H)},k=async()=>{const T=`🌟 Mes favoris StudyMarket :

📚 ${o.totalFavorites} annonces sauvegardées
💰 Prix moyen : ${o.averagePrice}€
🆕 ${o.recentlyAdded} ajoutées cette semaine

Découvrez la marketplace étudiante ! 🎓`;if(navigator.share)try{await navigator.share({title:"Mes Favoris - StudyMarket",text:T,url:window.location.origin})}catch{navigator.clipboard.writeText(T),ee.success("Lien copié dans le presse-papiers")}else navigator.clipboard.writeText(T),ee.success("Lien copié dans le presse-papiers")},R=()=>{let T=n;if(d.search){const U=d.search.toLowerCase();T=T.filter(H=>H.listingTitle.toLowerCase().includes(U)||H.sellerName.toLowerCase().includes(U)||H.tags.some(z=>z.toLowerCase().includes(U)))}if(d.category!=="all"&&(T=T.filter(U=>U.listingCategory===d.category)),d.transactionType!=="all"&&(T=T.filter(U=>U.listingTransactionType===d.transactionType)),d.priceRange!=="all")switch(d.priceRange){case"free":T=T.filter(U=>U.listingPrice===0);break;case"under-50":T=T.filter(U=>U.listingPrice>0&&U.listingPrice<50);break;case"50-200":T=T.filter(U=>U.listingPrice>=50&&U.listingPrice<=200);break;case"over-200":T=T.filter(U=>U.listingPrice>200);break}switch(m){case"recent":T.sort((U,H)=>H.createdAt.getTime()-U.createdAt.getTime());break;case"oldest":T.sort((U,H)=>U.createdAt.getTime()-H.createdAt.getTime());break;case"price-asc":T.sort((U,H)=>U.listingPrice-H.listingPrice);break;case"price-desc":T.sort((U,H)=>H.listingPrice-U.listingPrice);break;case"title":T.sort((U,H)=>U.listingTitle.localeCompare(H.listingTitle));break;case"category":T.sort((U,H)=>U.listingCategory.localeCompare(H.listingCategory));break}return T},N=T=>{try{return Su(T,{addSuffix:!0,locale:Qn})}catch{return"Date inconnue"}},P=(T,U)=>U==="donation"?"Gratuit":U==="exchange"?"Échange":T===0?"Gratuit":new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(T),A=R();return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(cr,{className:"w-8 h-8 text-red-500"}),"Mes Favoris",o.totalFavorites>0&&s.jsx(Ae,{variant:"secondary\\",className:"ml-1",children:o.totalFavorites})]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Retrouvez toutes vos annonces sauvegardées"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(B,{variant:"outline",onClick:k,className:"flex items-center gap-2",children:[s.jsx(Hb,{className:"w-4 h-4"}),"Partager"]}),s.jsxs(B,{variant:"outline",onClick:I,className:"flex items-center gap-2",children:[s.jsx(ss,{className:"w-4 h-4"}),"Exporter"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:o.totalFavorites}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Favoris totaux"})]}),s.jsx(cr,{className:"w-8 h-8 text-red-500"})]})})}),s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-2xl font-bold",children:[o.averagePrice,"€"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Prix moyen"})]}),s.jsx(sf,{className:"w-8 h-8 text-green-600"})]})})}),s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:o.recentlyAdded}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Cette semaine"})]}),s.jsx(vu,{className:"w-8 h-8 text-orange-600"})]})})}),s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:Object.keys(o.byCategory).length}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Catégories"})]}),s.jsx(fh,{className:"w-8 h-8 text-purple-600"})]})})})]}),s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Dn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(Ee,{placeholder:"Rechercher dans vos favoris...",value:d.search,onChange:T=>f(U=>({...U,search:T.target.value})),className:"pl-10"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Et,{value:m,onValueChange:v,children:[s.jsx(wt,{className:"w-40",children:s.jsx(Ct,{})}),s.jsx(bt,{children:xie.map(T=>s.jsx(be,{value:T.value,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(T.icon,{className:"w-4 h-4"}),T.label]})},T.value))})]}),s.jsxs("div",{className:"flex border rounded-lg overflow-hidden",children:[s.jsx(B,{variant:y==="grid"?"default":"ghost",size:"icon",onClick:()=>w("grid"),className:"rounded-none",children:s.jsx(MA,{className:"w-4 h-4"})}),s.jsx(B,{variant:y==="list"?"default":"ghost",size:"icon",onClick:()=>w("list"),className:"rounded-none",children:s.jsx(LA,{className:"w-4 h-4"})})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs(Et,{value:d.category,onValueChange:T=>f(U=>({...U,category:T})),children:[s.jsx(wt,{children:s.jsx(Ct,{placeholder:"Catégorie"})}),s.jsx(bt,{children:cC.map(T=>s.jsx(be,{value:T.value,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(T.icon,{className:"w-4 h-4"}),T.label]})},T.value))})]}),s.jsxs(Et,{value:d.transactionType,onValueChange:T=>f(U=>({...U,transactionType:T})),children:[s.jsx(wt,{children:s.jsx(Ct,{placeholder:"Type"})}),s.jsx(bt,{children:vie.map(T=>s.jsx(be,{value:T.value,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(T.icon,{className:"w-4 h-4"}),T.label]})},T.value))})]}),s.jsxs(Et,{value:d.priceRange,onValueChange:T=>f(U=>({...U,priceRange:T})),children:[s.jsx(wt,{children:s.jsx(Ct,{placeholder:"Prix"})}),s.jsxs(bt,{children:[s.jsx(be,{value:"all",children:"Tous les prix"}),s.jsx(be,{value:"free",children:"Gratuit"}),s.jsx(be,{value:"under-50",children:"Moins de 50€"}),s.jsx(be,{value:"50-200",children:"50€ - 200€"}),s.jsx(be,{value:"over-200",children:"Plus de 200€"})]})]}),s.jsxs(Et,{value:d.availability,onValueChange:T=>f(U=>({...U,availability:T})),children:[s.jsx(wt,{children:s.jsx(Ct,{placeholder:"Disponibilité"})}),s.jsxs(bt,{children:[s.jsx(be,{value:"all",children:"Toutes"}),s.jsx(be,{value:"available",children:"Disponibles"}),s.jsx(be,{value:"sold",children:"Vendues"}),s.jsx(be,{value:"reserved",children:"Réservées"})]})]})]}),b.length>0&&s.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsxs("span",{className:"text-sm font-medium text-blue-800",children:[b.length," favori(s) sélectionné(s)"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(B,{variant:"outline",size:"sm",onClick:()=>x([]),children:"Désélectionner"}),s.jsx(B,{variant:"destructive",size:"sm",onClick:O,disabled:c.removing,children:c.removing?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin mr-1"}),"Suppression..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Oi,{className:"w-3 h-3 mr-1"}),"Supprimer"]})})]})]})]})})}),s.jsx("div",{className:"space-y-4",children:c.favorites?s.jsx("div",{className:`grid gap-6 ${y==="grid"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3":"grid-cols-1"}`,children:Array.from({length:6}).map((T,U)=>s.jsxs(K,{className:"animate-pulse",children:[s.jsx("div",{className:"aspect-[4/3] bg-muted"}),s.jsxs(Y,{className:"p-4 space-y-2",children:[s.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},U))}):A.length===0?s.jsx(K,{children:s.jsx(Y,{className:"pt-12 pb-12 text-center",children:n.length===0?s.jsxs(s.Fragment,{children:[s.jsx(cr,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun favori"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas encore ajouté d'annonces à vos favoris. Explorez les annonces et cliquez sur ❤️ pour les sauvegarder !"}),s.jsx(B,{asChild:!0,children:s.jsxs("a",{href:"/listings",children:[s.jsx(Dn,{className:"w-4 h-4 mr-2"}),"Explorer les annonces"]})})]}):s.jsxs(s.Fragment,{children:[s.jsx(gv,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun résultat"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Aucun favori ne correspond à vos critères de recherche. Essayez de modifier vos filtres."}),s.jsx(B,{variant:"outline",onClick:()=>f({search:"",category:"all",transactionType:"all",priceRange:"all",availability:"all"}),children:"Réinitialiser les filtres"})]})})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("p",{className:"text-muted-foreground",children:[A.length," favori(s) trouvé(s)",A.length!==n.length&&` sur ${n.length}`]}),s.jsx(B,{variant:"outline",size:"sm",onClick:()=>{b.length===A.length?x([]):x(A.map(T=>T.id))},children:b.length===A.length?"Désélectionner tout":"Sélectionner tout"})]}),y==="grid"?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:A.map(T=>{const U=i.find(H=>H.id===T.listingId);return s.jsxs("div",{className:"relative group",children:[s.jsx("div",{className:"absolute top-2 left-2 z-10",children:s.jsx("input",{type:"checkbox",checked:b.includes(T.id),onChange:H=>{H.target.checked?x(z=>[...z,T.id]):x(z=>z.filter(V=>V!==T.id))},className:"w-4 h-4 rounded border-border bg-background"})}),s.jsx("div",{className:"absolute top-2 right-2 z-10 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(B,{variant:"destructive",size:"icon",className:"w-8 h-8",onClick:()=>S(T.id),children:s.jsx(Oi,{className:"w-4 h-4"})})}),U?s.jsx(yh,{listing:U}):s.jsxs(K,{children:[s.jsx("div",{className:"aspect-[4/3] bg-muted flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-muted-foreground",children:[s.jsx(Rd,{className:"w-8 h-8 mx-auto mb-2"}),s.jsx("p",{className:"text-sm",children:"Annonce non disponible"})]})}),s.jsxs(Y,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold mb-2",children:T.listingTitle}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:P(T.listingPrice,T.listingTransactionType)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Ajouté ",N(T.createdAt)]})]})]})]},T.id)})}):s.jsx("div",{className:"space-y-4",children:A.map(T=>{var H;const U=i.find(z=>z.id===T.listingId);return s.jsx(K,{className:"hover:shadow-md transition-shadow",children:s.jsx(Y,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("input",{type:"checkbox",checked:b.includes(T.id),onChange:z=>{z.target.checked?x(V=>[...V,T.id]):x(V=>V.filter(M=>M!==T.id))},className:"w-4 h-4 rounded border-border"}),s.jsx("div",{className:"w-20 h-20 bg-muted rounded-lg flex items-center justify-center flex-shrink-0",children:T.listingImage?s.jsx("img",{src:T.listingImage,alt:T.listingTitle,className:"w-full h-full object-cover rounded-lg"}):s.jsx(Ft,{className:"w-8 h-8 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx("h3",{className:"font-semibold truncate",children:T.listingTitle}),s.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[s.jsx("span",{className:"font-semibold text-primary",children:P(T.listingPrice,T.listingTransactionType)}),(U==null?void 0:U.status)&&s.jsx(Ae,{variant:U.status==="active"?"default":"secondary",children:U.status==="active"?"Disponible":U.status==="sold"?"Vendu":"Réservé"})]})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-2",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(fr,{className:"w-3 h-3"}),T.sellerName]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(lr,{className:"w-3 h-3"}),T.sellerUniversity]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(fh,{className:"w-3 h-3"}),(H=cC.find(z=>z.value===T.listingCategory))==null?void 0:H.label]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs text-muted-foreground",children:["Ajouté ",N(T.createdAt)]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(B,{variant:"outline",size:"sm",onClick:()=>window.open(`/listing/${T.listingId}`,"_blank"),children:[s.jsx(jr,{className:"w-3 h-3 mr-1"}),"Voir"]}),s.jsx(B,{variant:"ghost",size:"sm",onClick:()=>S(T.id),className:"text-destructive hover:text-destructive",children:s.jsx(Oi,{className:"w-3 h-3"})})]})]})]})]})})},T.id)})})]})})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(K,{children:s.jsxs(Y,{className:"pt-6 text-center",children:[s.jsx(cr,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir vos favoris"}),s.jsx("p",{className:"text-muted-foreground",children:"Sauvegardez vos annonces préférées et retrouvez-les facilement"})]})})})},Cy=({request:t,userRole:e,onStatusUpdate:n})=>{const{updatePaymentStatus:r,getPaymentInstructions:i}=$v(),a=y=>{switch(y){case"pending":return ln;case"confirmed":return Je;case"completed":return Je;case"cancelled":return Wc;case"disputed":return Jt;default:return ln}},o=y=>{switch(y){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"confirmed":return"bg-blue-100 text-blue-800 border-blue-200";case"completed":return"bg-green-100 text-green-800 border-green-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";case"disputed":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},l=y=>{switch(y){case"pending":return"En attente";case"confirmed":return"Confirmé";case"completed":return"Terminé";case"cancelled":return"Annulé";case"disputed":return"Litige";default:return y}},c=y=>({cash:"Espèces",transfer:"Virement bancaire",paypal:"PayPal",lydia:"Lydia"})[y]||y,u=(y,w)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:w||"EUR"}).format(y),d=(y,w)=>{navigator.clipboard.writeText(y),ee.success(`${w} copié dans le presse-papiers`)},f=async y=>{try{await r(t.id,y),n==null||n(y)}catch(w){console.error("Erreur lors de la mise à jour du statut:",w)}},m=a(t.status),v=i(t.paymentMethod,t);return s.jsxs(K,{className:"w-full",children:[s.jsx(Ne,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(an,{className:"w-6 h-6 text-primary"})}),s.jsxs("div",{children:[s.jsxs(Ce,{className:"text-lg",children:["Paiement ",c(t.paymentMethod)]}),s.jsxs(nt,{children:[u(t.amount,t.currency)," • ",e==="buyer"?"Achat":"Vente"]})]})]}),s.jsxs(Ae,{className:o(t.status),children:[s.jsx(m,{className:"w-3 h-3 mr-1"}),l(t.status)]})]})}),s.jsxs(Y,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Créé le :"}),s.jsx("p",{className:"font-medium",children:_n(t.createdAt,"PPP à HH:mm",{locale:Qn})})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Dernière mise à jour :"}),s.jsx("p",{className:"font-medium",children:_n(t.updatedAt,"PPP à HH:mm",{locale:Qn})})]})]}),t.paymentMethod==="cash"&&t.meetingLocation&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[s.jsx(lr,{className:"w-4 h-4"}),"Détails de la rencontre"]}),s.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg space-y-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground text-sm",children:"Lieu :"}),s.jsx("p",{className:"font-medium",children:t.meetingLocation})]}),t.meetingDateTime&&s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground text-sm",children:"Date et heure :"}),s.jsx("p",{className:"font-medium",children:_n(t.meetingDateTime,"PPP à HH:mm",{locale:Qn})})]})]})]}),t.securityCode&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[s.jsx(ft,{className:"w-4 h-4"}),"Code de sécurité"]}),s.jsxs("div",{className:"flex items-center gap-2 bg-muted/50 p-3 rounded-lg",children:[s.jsx("code",{className:"font-mono text-lg font-bold",children:t.securityCode}),s.jsx(B,{variant:"ghost",size:"icon",onClick:()=>d(t.securityCode,"Code de sécurité"),children:s.jsx(AA,{className:"w-4 h-4"})})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Partagez ce code uniquement avec votre interlocuteur lors de la finalisation du paiement."})]}),t.status==="confirmed"&&v.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium",children:"Instructions de paiement"}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 p-3 rounded-lg",children:s.jsx("ul",{className:"space-y-1 text-sm",children:v.map((y,w)=>s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-blue-600 mt-0.5",children:"•"}),s.jsx("span",{children:y})]},w))})})]}),t.notes&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium",children:"Notes"}),s.jsx("p",{className:"text-sm bg-muted/50 p-3 rounded-lg",children:t.notes})]}),s.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e==="seller"&&t.status==="pending"&&s.jsxs(s.Fragment,{children:[s.jsxs(B,{onClick:()=>f("confirmed"),className:"flex-1",children:[s.jsx(Je,{className:"w-4 h-4 mr-2"}),"Accepter"]}),s.jsxs(B,{variant:"outline",onClick:()=>f("cancelled"),className:"flex-1",children:[s.jsx(Wc,{className:"w-4 h-4 mr-2"}),"Refuser"]})]}),e==="buyer"&&t.status==="confirmed"&&s.jsxs(B,{onClick:()=>f("completed"),className:"flex-1",children:[s.jsx(Je,{className:"w-4 h-4 mr-2"}),"Marquer comme payé"]}),e==="seller"&&t.status==="confirmed"&&s.jsxs(B,{onClick:()=>f("completed"),className:"flex-1",children:[s.jsx(Je,{className:"w-4 h-4 mr-2"}),"Confirmer la réception"]}),(t.status==="pending"||t.status==="confirmed")&&s.jsxs(B,{variant:"outline",onClick:()=>f("disputed"),className:"text-orange-600 hover:text-orange-700",children:[s.jsx(Jt,{className:"w-4 h-4 mr-2"}),"Signaler un problème"]})]}),t.status==="pending"&&e==="buyer"&&s.jsxs(pt,{children:[s.jsx(ln,{className:"h-4 w-4"}),s.jsx(gt,{children:"Votre demande de paiement a été envoyée au vendeur. Vous recevrez une notification dès qu'il l'aura acceptée."})]}),t.status==="confirmed"&&e==="buyer"&&s.jsxs(pt,{className:"border-green-200 bg-green-50",children:[s.jsx(Je,{className:"h-4 w-4 text-green-600"}),s.jsx(gt,{className:"text-green-800",children:"Le vendeur a accepté votre demande ! Suivez les instructions ci-dessus pour effectuer le paiement."})]}),t.status==="completed"&&s.jsxs(pt,{className:"border-green-200 bg-green-50",children:[s.jsx(Je,{className:"h-4 w-4 text-green-600"}),s.jsx(gt,{className:"text-green-800",children:"Transaction terminée avec succès ! Merci d'avoir utilisé StudyMarket."})]}),t.status==="disputed"&&s.jsxs(pt,{className:"border-orange-200 bg-orange-50",children:[s.jsx(Jt,{className:"h-4 w-4 text-orange-600"}),s.jsx(gt,{className:"text-orange-800",children:"Un litige a été signalé. Notre équipe support va examiner la situation et vous contacter sous 24h."})]})]})]})},wie=()=>{const{currentUser:t,userProfile:e}=Qt(),{paymentRequests:n,loading:r,fetchUserPaymentRequests:i,initializePaymentMethods:a}=$v(),[o,l]=p.useState(""),[c,u]=p.useState("all"),[d,f]=p.useState("all"),[m,v]=p.useState({totalRequests:0,pendingRequests:0,completedRequests:0,totalAmount:0,averageAmount:0,byMethod:{},byStatus:{}});p.useEffect(()=>{a()},[a]),p.useEffect(()=>{t&&i(t.uid)},[t,i]),p.useEffect(()=>{y()},[n]);const y=()=>{const E={},S={};let O=0;n.forEach(I=>{E[I.paymentMethod]=(E[I.paymentMethod]||0)+1,S[I.status]=(S[I.status]||0)+1,O+=I.amount}),v({totalRequests:n.length,pendingRequests:S.pending||0,completedRequests:S.completed||0,totalAmount:O,averageAmount:n.length>0?O/n.length:0,byMethod:E,byStatus:S})},w=()=>n.filter(E=>{const S=!o||E.listingId.toLowerCase().includes(o.toLowerCase())||E.id.toLowerCase().includes(o.toLowerCase()),O=c==="all"||E.status===c,I=d==="all"||E.paymentMethod===d;return S&&O&&I}),b=()=>w().filter(E=>E.buyerId===(t==null?void 0:t.uid)),x=()=>w().filter(E=>E.sellerId===(t==null?void 0:t.uid)),g=E=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(E),_=()=>{const E={user:e==null?void 0:e.displayName,exportDate:new Date().toISOString(),stats:m,payments:n.map(k=>({id:k.id,amount:k.amount,currency:k.currency,method:k.paymentMethod,status:k.status,role:k.buyerId===(t==null?void 0:t.uid)?"buyer":"seller",createdAt:k.createdAt.toISOString(),updatedAt:k.updatedAt.toISOString()}))},S=new Blob([JSON.stringify(E,null,2)],{type:"application/json"}),O=URL.createObjectURL(S),I=document.createElement("a");I.href=O,I.download=`paiements-${new Date().toISOString().slice(0,10)}.json`,I.click(),URL.revokeObjectURL(O)};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(TW,{className:"w-8 h-8 text-primary"}),"Mes Paiements",m.totalRequests>0&&s.jsx(Ae,{variant:"secondary\\",className:"ml-1",children:m.totalRequests})]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Gérez vos demandes de paiement et suivez vos transactions"})]}),s.jsxs(B,{variant:"outline",onClick:_,className:"flex items-center gap-2",children:[s.jsx(ss,{className:"w-4 h-4"}),"Exporter"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:m.totalRequests}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Demandes totales"})]}),s.jsx(an,{className:"w-8 h-8 text-blue-600"})]})})}),s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:m.pendingRequests}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"En attente"})]}),s.jsx(ln,{className:"w-8 h-8 text-orange-600"})]})})}),s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:m.completedRequests}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Terminées"})]}),s.jsx(Je,{className:"w-8 h-8 text-green-600"})]})})}),s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:g(m.totalAmount)}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Montant total"})]}),s.jsx(sf,{className:"w-8 h-8 text-purple-600"})]})})})]}),s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Dn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(Ee,{placeholder:"Rechercher par ID de transaction...",value:o,onChange:E=>l(E.target.value),className:"pl-10"})]}),s.jsxs(Et,{value:c,onValueChange:u,children:[s.jsx(wt,{className:"w-40",children:s.jsx(Ct,{placeholder:"Statut"})}),s.jsxs(bt,{children:[s.jsx(be,{value:"all",children:"Tous les statuts"}),s.jsx(be,{value:"pending",children:"En attente"}),s.jsx(be,{value:"confirmed",children:"Confirmé"}),s.jsx(be,{value:"completed",children:"Terminé"}),s.jsx(be,{value:"cancelled",children:"Annulé"}),s.jsx(be,{value:"disputed",children:"Litige"})]})]}),s.jsxs(Et,{value:d,onValueChange:f,children:[s.jsx(wt,{className:"w-40",children:s.jsx(Ct,{placeholder:"Méthode"})}),s.jsxs(bt,{children:[s.jsx(be,{value:"all",children:"Toutes les méthodes"}),s.jsx(be,{value:"cash",children:"Espèces"}),s.jsx(be,{value:"transfer",children:"Virement"}),s.jsx(be,{value:"paypal",children:"PayPal"}),s.jsx(be,{value:"lydia",children:"Lydia"})]})]})]})})}),s.jsxs(Pl,{defaultValue:"all",className:"space-y-4",children:[s.jsxs(jo,{className:"grid w-full grid-cols-3",children:[s.jsxs(Ot,{value:"all",className:"flex items-center gap-2",children:[s.jsx(an,{className:"w-4 h-4"}),"Toutes",m.totalRequests>0&&s.jsx(Ae,{variant:"secondary\\",className:"ml-1",children:m.totalRequests})]}),s.jsxs(Ot,{value:"purchases",className:"flex items-center gap-2",children:[s.jsx(ty,{className:"w-4 h-4"}),"Mes achats",b().length>0&&s.jsx(Ae,{variant:"secondary\\",className:"ml-1",children:b().length})]}),s.jsxs(Ot,{value:"sales",className:"flex items-center gap-2",children:[s.jsx(ey,{className:"w-4 h-4"}),"Mes ventes",x().length>0&&s.jsx(Ae,{variant:"secondary\\",className:"ml-1",children:x().length})]})]}),s.jsx(Lt,{value:"all",className:"space-y-4",children:s.jsxs(K,{children:[s.jsxs(Ne,{children:[s.jsxs(Ce,{className:"flex items-center gap-2",children:[s.jsx(PA,{className:"w-5 h-5"}),"Toutes les Demandes de Paiement"]}),s.jsx(nt,{children:"Historique complet de vos transactions"})]}),s.jsx(Y,{children:r?s.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((E,S)=>s.jsxs("div",{className:"border rounded-lg p-4 animate-pulse",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"h-5 bg-muted rounded w-1/3"}),s.jsx("div",{className:"h-6 bg-muted rounded w-16"})]}),s.jsx("div",{className:"h-4 bg-muted rounded w-2/3 mb-2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]},S))}):w().length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(an,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune demande de paiement"}),s.jsx("p",{className:"text-muted-foreground",children:n.length===0?"Vous n'avez pas encore de demandes de paiement.":"Aucune demande ne correspond à vos critères de recherche."})]}):s.jsx("div",{className:"space-y-4",children:w().map(E=>s.jsx(Cy,{request:E,userRole:E.buyerId===t.uid?"buyer":"seller"},E.id))})})]})}),s.jsx(Lt,{value:"purchases",className:"space-y-4",children:s.jsxs(K,{children:[s.jsxs(Ne,{children:[s.jsxs(Ce,{className:"flex items-center gap-2",children:[s.jsx(ty,{className:"w-5 h-5"}),"Mes Achats"]}),s.jsx(nt,{children:"Demandes de paiement que vous avez initiées"})]}),s.jsx(Y,{children:b().length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(ty,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucun achat"}),s.jsx("p",{className:"text-muted-foreground",children:"Vous n'avez pas encore initié de demandes de paiement pour vos achats."})]}):s.jsx("div",{className:"space-y-4",children:b().map(E=>s.jsx(Cy,{request:E,userRole:"buyer"},E.id))})})]})}),s.jsx(Lt,{value:"sales",className:"space-y-4",children:s.jsxs(K,{children:[s.jsxs(Ne,{children:[s.jsxs(Ce,{className:"flex items-center gap-2",children:[s.jsx(ey,{className:"w-5 h-5"}),"Mes Ventes"]}),s.jsx(nt,{children:"Demandes de paiement reçues pour vos annonces"})]}),s.jsx(Y,{children:x().length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(ey,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune vente"}),s.jsx("p",{className:"text-muted-foreground",children:"Vous n'avez pas encore reçu de demandes de paiement pour vos annonces."})]}):s.jsx("div",{className:"space-y-4",children:x().map(E=>s.jsx(Cy,{request:E,userRole:"seller"},E.id))})})]})})]}),s.jsxs(pt,{className:"border-blue-200 bg-blue-50",children:[s.jsx(ft,{className:"h-4 w-4 text-blue-600"}),s.jsxs(gt,{className:"text-blue-800",children:[s.jsx("strong",{children:"Conseils de sécurité :"})," Ne communiquez jamais vos informations bancaires par message privé. Utilisez uniquement les canaux sécurisés de StudyMarket pour vos transactions."]})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(K,{children:s.jsxs(Y,{className:"pt-6 text-center",children:[s.jsx(an,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir vos paiements"}),s.jsx("p",{className:"text-muted-foreground",children:"Gérez vos demandes de paiement et suivez vos transactions"})]})})})};var Gj="Collapsible",[bie,s3]=Hr(Gj),[jie,Kj]=bie(Gj),i3=p.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:i,disabled:a,onOpenChange:o,...l}=t,[c=!1,u]=Br({prop:r,defaultProp:i,onChange:o});return s.jsx(jie,{scope:n,disabled:a,contentId:Fr(),open:c,onOpenToggle:p.useCallback(()=>u(d=>!d),[u]),children:s.jsx(Se.div,{"data-state":Qj(c),"data-disabled":a?"":void 0,...l,ref:e})})});i3.displayName=Gj;var a3="CollapsibleTrigger",o3=p.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,i=Kj(a3,n);return s.jsx(Se.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":Qj(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...r,ref:e,onClick:le(t.onClick,i.onOpenToggle)})});o3.displayName=a3;var Yj="CollapsibleContent",l3=p.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=Kj(Yj,t.__scopeCollapsible);return s.jsx(Un,{present:n||i.open,children:({present:a})=>s.jsx(_ie,{...r,ref:e,present:a})})});l3.displayName=Yj;var _ie=p.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:i,...a}=t,o=Kj(Yj,n),[l,c]=p.useState(r),u=p.useRef(null),d=We(e,u),f=p.useRef(0),m=f.current,v=p.useRef(0),y=v.current,w=o.open||l,b=p.useRef(w),x=p.useRef();return p.useEffect(()=>{const g=requestAnimationFrame(()=>b.current=!1);return()=>cancelAnimationFrame(g)},[]),Sn(()=>{const g=u.current;if(g){x.current=x.current||{transitionDuration:g.style.transitionDuration,animationName:g.style.animationName},g.style.transitionDuration="0s",g.style.animationName="none";const _=g.getBoundingClientRect();f.current=_.height,v.current=_.width,b.current||(g.style.transitionDuration=x.current.transitionDuration,g.style.animationName=x.current.animationName),c(r)}},[o.open,r]),s.jsx(Se.div,{"data-state":Qj(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!w,...a,ref:d,style:{"--radix-collapsible-content-height":m?`${m}px`:void 0,"--radix-collapsible-content-width":y?`${y}px`:void 0,...t.style},children:w&&i})});function Qj(t){return t?"open":"closed"}var Nie=i3,Sie=o3,Eie=l3,ia="Accordion",Cie=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[Xj,Tie,kie]=of(ia),[Hv,roe]=Hr(ia,[kie,s3]),Zj=s3(),c3=me.forwardRef((t,e)=>{const{type:n,...r}=t,i=r,a=r;return s.jsx(Xj.Provider,{scope:t.__scopeAccordion,children:n==="multiple"?s.jsx(Rie,{...a,ref:e}):s.jsx(Aie,{...i,ref:e})})});c3.displayName=ia;var[u3,Iie]=Hv(ia),[d3,Pie]=Hv(ia,{collapsible:!1}),Aie=me.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},collapsible:a=!1,...o}=t,[l,c]=Br({prop:n,defaultProp:r,onChange:i});return s.jsx(u3,{scope:t.__scopeAccordion,value:l?[l]:[],onItemOpen:c,onItemClose:me.useCallback(()=>a&&c(""),[a,c]),children:s.jsx(d3,{scope:t.__scopeAccordion,collapsible:a,children:s.jsx(h3,{...o,ref:e})})})}),Rie=me.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...a}=t,[o=[],l]=Br({prop:n,defaultProp:r,onChange:i}),c=me.useCallback(d=>l((f=[])=>[...f,d]),[l]),u=me.useCallback(d=>l((f=[])=>f.filter(m=>m!==d)),[l]);return s.jsx(u3,{scope:t.__scopeAccordion,value:o,onItemOpen:c,onItemClose:u,children:s.jsx(d3,{scope:t.__scopeAccordion,collapsible:!0,children:s.jsx(h3,{...a,ref:e})})})}),[Mie,Gv]=Hv(ia),h3=me.forwardRef((t,e)=>{const{__scopeAccordion:n,disabled:r,dir:i,orientation:a="vertical",...o}=t,l=me.useRef(null),c=We(l,e),u=Tie(n),f=Tl(i)==="ltr",m=le(t.onKeyDown,v=>{var k;if(!Cie.includes(v.key))return;const y=v.target,w=u().filter(R=>{var N;return!((N=R.ref.current)!=null&&N.disabled)}),b=w.findIndex(R=>R.ref.current===y),x=w.length;if(b===-1)return;v.preventDefault();let g=b;const _=0,E=x-1,S=()=>{g=b+1,g>E&&(g=_)},O=()=>{g=b-1,g<_&&(g=E)};switch(v.key){case"Home":g=_;break;case"End":g=E;break;case"ArrowRight":a==="horizontal"&&(f?S():O());break;case"ArrowDown":a==="vertical"&&S();break;case"ArrowLeft":a==="horizontal"&&(f?O():S());break;case"ArrowUp":a==="vertical"&&O();break}const I=g%x;(k=w[I].ref.current)==null||k.focus()});return s.jsx(Mie,{scope:n,disabled:r,direction:i,orientation:a,children:s.jsx(Xj.Slot,{scope:n,children:s.jsx(Se.div,{...o,"data-orientation":a,ref:c,onKeyDown:r?void 0:m})})})}),Ng="AccordionItem",[Die,Jj]=Hv(Ng),f3=me.forwardRef((t,e)=>{const{__scopeAccordion:n,value:r,...i}=t,a=Gv(Ng,n),o=Iie(Ng,n),l=Zj(n),c=Fr(),u=r&&o.value.includes(r)||!1,d=a.disabled||t.disabled;return s.jsx(Die,{scope:n,open:u,disabled:d,triggerId:c,children:s.jsx(Nie,{"data-orientation":a.orientation,"data-state":y3(u),...l,...i,ref:e,disabled:d,open:u,onOpenChange:f=>{f?o.onItemOpen(r):o.onItemClose(r)}})})});f3.displayName=Ng;var m3="AccordionHeader",p3=me.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=Gv(ia,n),a=Jj(m3,n);return s.jsx(Se.h3,{"data-orientation":i.orientation,"data-state":y3(a.open),"data-disabled":a.disabled?"":void 0,...r,ref:e})});p3.displayName=m3;var Iw="AccordionTrigger",g3=me.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=Gv(ia,n),a=Jj(Iw,n),o=Pie(Iw,n),l=Zj(n);return s.jsx(Xj.ItemSlot,{scope:n,children:s.jsx(Sie,{"aria-disabled":a.open&&!o.collapsible||void 0,"data-orientation":i.orientation,id:a.triggerId,...l,...r,ref:e})})});g3.displayName=Iw;var v3="AccordionContent",x3=me.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=Gv(ia,n),a=Jj(v3,n),o=Zj(n);return s.jsx(Eie,{role:"region","aria-labelledby":a.triggerId,"data-orientation":i.orientation,...o,...r,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});x3.displayName=v3;function y3(t){return t?"open":"closed"}var Oie=c3,Lie=f3,Vie=p3,w3=g3,b3=x3;const Fie=Oie,j3=p.forwardRef(({className:t,...e},n)=>s.jsx(Lie,{ref:n,className:Pe("border-b",t),...e}));j3.displayName="AccordionItem";const _3=p.forwardRef(({className:t,children:e,...n},r)=>s.jsx(Vie,{className:"flex",children:s.jsxs(w3,{ref:r,className:Pe("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...n,children:[e,s.jsx(_4,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})}));_3.displayName=w3.displayName;const N3=p.forwardRef(({className:t,children:e,...n},r)=>s.jsx(b3,{ref:r,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:s.jsx("div",{className:Pe("pb-4 pt-0",t),children:e})}));N3.displayName=b3.displayName;const uC=[{category:"Compte et Inscription",icon:af,questions:[{question:"Comment créer un compte étudiant vérifié ?",answer:'Pour créer votre compte, utilisez votre adresse email universitaire (ex: prenom.nom@univ-exemple.fr). Notre système vérifie automatiquement votre statut étudiant. Vous recevrez un badge "Étudiant certifié" une fois la vérification terminée.'},{question:"Pourquoi mon université n'est pas reconnue ?",answer:"Nous ajoutons régulièrement de nouvelles universités. Si la vôtre n'apparaît pas, contactez-nous avec votre carte étudiante et nous l'ajouterons rapidement à notre base de données."},{question:"Comment modifier mes informations de profil ?",answer:'Rendez-vous dans "Mon profil" depuis le menu utilisateur. Vous pouvez modifier votre photo, bio, université, et préférences de notification. Certaines informations nécessitent une re-vérification.'},{question:"Puis-je avoir plusieurs comptes ?",answer:"Non, un seul compte par personne est autorisé. Cela garantit la confiance et la sécurité de notre communauté étudiante."}]},{category:"Achats et Ventes",icon:an,questions:[{question:"Comment publier une annonce ?",answer:'Cliquez sur "Publier" dans le menu principal. Remplissez le formulaire avec photos, description détaillée, prix et lieu de rencontre. Votre annonce sera visible immédiatement après publication.'},{question:"Quels modes de paiement sont acceptés ?",answer:"Nous recommandons les paiements sécurisés : espèces lors de la remise en main propre, virements bancaires, Lydia, ou PayPal. Évitez les paiements à distance sans garantie."},{question:"Comment fixer le bon prix ?",answer:"Notre IA vous suggère une fourchette de prix basée sur l'état et la catégorie. Consultez les annonces similaires et considérez l'état réel de votre objet. Les prix justes se vendent plus rapidement."},{question:"Que faire si un acheteur ne se présente pas ?",answer:"Contactez-le via notre messagerie. Si pas de réponse sous 24h, vous pouvez signaler le comportement et remettre votre annonce en ligne. Nous prenons ces situations au sérieux."}]},{category:"Sécurité et Confiance",icon:ft,questions:[{question:"Comment éviter les arnaques ?",answer:"Rencontrez-vous toujours en personne dans un lieu public (campus, bibliothèque). Vérifiez l'identité avec la carte étudiante. Ne payez jamais à l'avance sans avoir vu l'objet. Utilisez notre système de signalement en cas de doute."},{question:"Où se rencontrer en sécurité ?",answer:`Privilégiez les lieux publics de votre campus : bibliothèques, halls d'entrée, cafétérias. Évitez les parkings isolés ou les domiciles privés. Certaines universités ont des "zones d'échange sécurisées".`},{question:"Comment signaler un utilisateur suspect ?",answer:'Utilisez le bouton "Signaler" sur le profil ou dans la conversation. Décrivez précisément le problème. Notre équipe examine tous les signalements sous 24h et prend les mesures appropriées.'},{question:"Que faire en cas de litige ?",answer:"Contactez d'abord l'autre partie via notre messagerie. Si pas de résolution, utilisez notre service de médiation gratuit. En dernier recours, contactez le support avec toutes les preuves (captures, messages)."}]},{category:"Messagerie et Communication",icon:Ht,questions:[{question:"Comment contacter un vendeur ?",answer:`Cliquez sur "Contacter le vendeur" sur l'annonce. Rédigez un message poli et précis. Le vendeur recevra une notification email et pourra vous répondre via notre messagerie sécurisée.`},{question:"Pourquoi mes messages ne sont pas lus ?",answer:"Les utilisateurs reçoivent des notifications email mais peuvent avoir des délais de réponse. Soyez patient (24-48h). Si pas de réponse, l'annonce est peut-être déjà vendue ou l'utilisateur inactif."},{question:"Puis-je partager mes coordonnées ?",answer:"Oui, mais seulement après les premiers échanges via notre messagerie. Cela nous permet de garder une trace en cas de problème et de vous protéger contre le spam."},{question:"Comment bloquer un utilisateur ?",answer:`Dans la conversation, cliquez sur les trois points puis "Bloquer". L'utilisateur ne pourra plus vous contacter. Vous pouvez débloquer depuis vos paramètres si nécessaire.`}]},{category:"Impact Écologique",icon:cr,questions:[{question:"Comment est calculé mon impact CO₂ ?",answer:"Chaque objet acheté d'occasion évite la production d'un neuf. Nous calculons le CO₂ économisé selon des données ADEME : 85kg pour un smartphone, 8.5kg pour un livre, etc. Votre total s'affiche dans votre profil."},{question:"Qu'est-ce que les badges écologiques ?",answer:'Vous gagnez des badges selon vos actions : "Premier Pas" (1ère transaction), "Éco-Warrior" (10kg CO₂), "Héros Climatique" (100kg CO₂). Ils apparaissent sur votre profil et motivent la communauté.'},{question:"Comment améliorer mon rang écologique ?",answer:"Multipliez les transactions d'occasion, privilégiez les dons (bonus +20%), participez aux échanges. Plus vous économisez de CO₂, plus votre rang augmente : Débutant → Éco-Warrior → Maître Environnemental → Légende Écologique."}]},{category:"Technique et Bugs",icon:vv,questions:[{question:"L'application ne fonctionne pas correctement",answer:"Essayez de vider le cache de votre navigateur (Ctrl+F5) ou utilisez un autre navigateur. Vérifiez votre connexion internet. Si le problème persiste, contactez-nous avec votre navigateur et système d'exploitation."},{question:"Je ne reçois pas les notifications email",answer:'Vérifiez vos spams/courriers indésirables. Ajoutez notifications@studymarket.fr à vos contacts. Vérifiez vos préférences de notification dans "Paramètres". Certains emails universitaires bloquent les notifications externes.'},{question:"Mes photos ne s'uploadent pas",answer:"Vérifiez que vos images font moins de 15MB et sont au format JPG/PNG. Essayez de les redimensionner. Si vous êtes sur mobile, autorisez l'accès à la galerie dans les paramètres de votre navigateur."},{question:"Comment supprimer mon compte ?",answer:'Rendez-vous dans "Paramètres" > "Compte" > "Supprimer mon compte". Cette action est irréversible et supprime toutes vos données. Vos annonces actives seront automatiquement retirées.'}]}],Uie=[{title:"Chat en direct",description:"Réponse immédiate pendant les heures ouvrables",icon:Ht,action:"Démarrer le chat",available:!0,hours:"Lun-Ven 9h-18h"},{title:"Email Support",description:"Réponse sous 24h maximum",icon:Cr,action:"support@studymarket.fr",available:!0,hours:"24h/7j"},{title:"Téléphone",description:"Pour les urgences uniquement",icon:gu,action:"01 23 45 67 89",available:!1,hours:"Bientôt disponible"},{title:"Centre de ressources",description:"Guides détaillés et tutoriels",icon:TA,action:"Consulter les guides",available:!0,hours:"Toujours accessible"}],$ie=[{title:"Guide du vendeur débutant",description:"Tout savoir pour vendre efficacement",icon:Aa,duration:"5 min",type:"Article"},{title:"Sécurité : éviter les arnaques",description:"Reconnaître et éviter les situations dangereuses",icon:ft,duration:"3 min",type:"Vidéo"},{title:"Optimiser ses annonces",description:"Photos, descriptions et prix pour vendre vite",icon:vu,duration:"7 min",type:"Article"},{title:"Impact écologique expliqué",description:"Comment nous calculons votre empreinte carbone",icon:cr,duration:"4 min",type:"Infographie"}],zie=()=>{const{currentUser:t,userProfile:e}=Qt(),[n,r]=p.useState(""),[i,a]=p.useState("all"),[o,l]=p.useState({subject:"",category:"",message:"",priority:"normal"}),[c,u]=p.useState(!1),d=uC.filter(m=>{if(i!=="all"&&m.category!==i)return!1;if(n){const v=n.toLowerCase();return m.questions.some(y=>y.question.toLowerCase().includes(v)||y.answer.toLowerCase().includes(v))}return!0}),f=async m=>{if(m.preventDefault(),!o.subject||!o.message){ee.error("Veuillez remplir tous les champs obligatoires");return}u(!0);try{await new Promise(v=>setTimeout(v,1e3)),ee.success("Votre message a été envoyé ! Nous vous répondrons sous 24h."),l({subject:"",category:"",message:"",priority:"normal"})}catch{ee.error("Erreur lors de l'envoi. Veuillez réessayer.")}finally{u(!1)}};return s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"flex items-center justify-center gap-2 mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center",children:s.jsx(Kp,{className:"w-6 h-6 text-white"})})}),s.jsx("h1",{className:"text-4xl font-bold",children:"Centre d'Aide StudyMarket"}),s.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Trouvez rapidement les réponses à vos questions ou contactez notre équipe support"})]}),s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"relative max-w-2xl mx-auto",children:[s.jsx(Dn,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-muted-foreground"}),s.jsx(Ee,{type:"text",placeholder:"Rechercher dans l'aide... (ex: comment vendre, sécurité, notifications)",value:n,onChange:m=>r(m.target.value),className:"pl-12 h-14 text-lg"})]})})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Uie.map((m,v)=>s.jsx(K,{className:`transition-all hover:shadow-lg ${m.available?"hover:-translate-y-1":"opacity-60"}`,children:s.jsxs(Y,{className:"pt-6 text-center",children:[s.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-4 ${m.available?"bg-primary/10 text-primary":"bg-muted text-muted-foreground"}`,children:s.jsx(m.icon,{className:"w-6 h-6"})}),s.jsx("h3",{className:"font-semibold mb-2",children:m.title}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:m.description}),s.jsx("div",{className:"text-xs text-muted-foreground mb-3",children:m.hours}),s.jsx(B,{variant:m.available?"default":"secondary",size:"sm",disabled:!m.available,className:"w-full",children:m.action})]})},v))}),s.jsxs(Pl,{defaultValue:"faq",className:"space-y-6",children:[s.jsxs(jo,{className:"grid w-full grid-cols-3",children:[s.jsxs(Ot,{value:"faq",className:"flex items-center gap-2",children:[s.jsx(Kp,{className:"w-4 h-4"}),"FAQ"]}),s.jsxs(Ot,{value:"guides",className:"flex items-center gap-2",children:[s.jsx(TA,{className:"w-4 h-4"}),"Guides"]}),s.jsxs(Ot,{value:"contact",className:"flex items-center gap-2",children:[s.jsx(Ht,{className:"w-4 h-4"}),"Contact"]})]}),s.jsxs(Lt,{value:"faq",className:"space-y-6",children:[s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx(B,{variant:i==="all"?"default":"outline",size:"sm",onClick:()=>a("all"),children:"Toutes les catégories"}),uC.map(m=>s.jsxs(B,{variant:i===m.category?"default":"outline",size:"sm",onClick:()=>a(m.category),className:"flex items-center gap-2",children:[s.jsx(m.icon,{className:"w-4 h-4"}),m.category]},m.category))]})})}),d.length===0?s.jsx(K,{children:s.jsxs(Y,{className:"pt-12 pb-12 text-center",children:[s.jsx(Dn,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun résultat trouvé"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Essayez avec d'autres mots-clés ou contactez notre support"}),s.jsx(B,{variant:"outline",onClick:()=>r(""),children:"Effacer la recherche"})]})}):s.jsx("div",{className:"space-y-6",children:d.map((m,v)=>s.jsxs(K,{children:[s.jsx(Ne,{children:s.jsxs(Ce,{className:"flex items-center gap-2",children:[s.jsx(m.icon,{className:"w-5 h-5"}),m.category]})}),s.jsx(Y,{children:s.jsx(Fie,{type:"single",collapsible:!0,className:"w-full",children:m.questions.map((y,w)=>s.jsxs(j3,{value:`${v}-${w}`,children:[s.jsx(_3,{className:"text-left",children:y.question}),s.jsx(N3,{className:"text-muted-foreground leading-relaxed",children:y.answer})]},w))})})]},v))})]}),s.jsxs(Lt,{value:"guides",className:"space-y-6",children:[s.jsxs(K,{children:[s.jsxs(Ne,{children:[s.jsxs(Ce,{className:"flex items-center gap-2",children:[s.jsx(OA,{className:"w-5 h-5"}),"Guides et Tutoriels"]}),s.jsx(nt,{children:"Apprenez à utiliser StudyMarket comme un pro avec nos guides détaillés"})]}),s.jsx(Y,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:$ie.map((m,v)=>s.jsx("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center flex-shrink-0",children:s.jsx(m.icon,{className:"w-6 h-6 text-primary"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("h3",{className:"font-semibold",children:m.title}),s.jsx(Ae,{variant:"outline",className:"text-xs",children:m.type})]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:m.description}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[s.jsx(ln,{className:"w-3 h-3"}),m.duration]}),s.jsxs(B,{size:"sm",variant:"outline",children:[s.jsx(jr,{className:"w-3 h-3 mr-1"}),"Lire"]})]})]})]})},v))})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(K,{children:s.jsxs(Y,{className:"pt-6 text-center",children:[s.jsx(UA,{className:"w-8 h-8 text-blue-600 mx-auto mb-3"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Tutoriels Vidéo"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Apprenez visuellement avec nos vidéos courtes"}),s.jsxs(B,{variant:"outline",size:"sm",children:[s.jsx(jr,{className:"w-3 h-3 mr-1"}),"Voir les vidéos"]})]})}),s.jsx(K,{children:s.jsxs(Y,{className:"pt-6 text-center",children:[s.jsx(ss,{className:"w-8 h-8 text-green-600 mx-auto mb-3"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Ressources PDF"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Téléchargez nos guides au format PDF"}),s.jsxs(B,{variant:"outline",size:"sm",children:[s.jsx(ss,{className:"w-3 h-3 mr-1"}),"Télécharger"]})]})}),s.jsx(K,{children:s.jsxs(Y,{className:"pt-6 text-center",children:[s.jsx(af,{className:"w-8 h-8 text-purple-600 mx-auto mb-3"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Communauté"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Échangez avec d'autres étudiants"}),s.jsxs(B,{variant:"outline",size:"sm",children:[s.jsx(jr,{className:"w-3 h-3 mr-1"}),"Rejoindre"]})]})})]})]}),s.jsx(Lt,{value:"contact",className:"space-y-6",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs(K,{children:[s.jsxs(Ne,{children:[s.jsxs(Ce,{className:"flex items-center gap-2",children:[s.jsx(Kc,{className:"w-5 h-5"}),"Contactez notre équipe"]}),s.jsx(nt,{children:"Décrivez votre problème en détail pour une réponse rapide et précise"})]}),s.jsx(Y,{children:s.jsxs("form",{onSubmit:f,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"subject",children:"Sujet *"}),s.jsx(Ee,{id:"subject",value:o.subject,onChange:m=>l(v=>({...v,subject:m.target.value})),placeholder:"Résumez votre problème en quelques mots",className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"category",children:"Catégorie"}),s.jsxs(Et,{value:o.category,onValueChange:m=>l(v=>({...v,category:m})),children:[s.jsx(wt,{className:"mt-1",children:s.jsx(Ct,{placeholder:"Sélectionnez une catégorie"})}),s.jsxs(bt,{children:[s.jsx(be,{value:"account",children:"Compte et profil"}),s.jsx(be,{value:"listing",children:"Annonces"}),s.jsx(be,{value:"payment",children:"Paiements"}),s.jsx(be,{value:"security",children:"Sécurité"}),s.jsx(be,{value:"technical",children:"Problème technique"}),s.jsx(be,{value:"other",children:"Autre"})]})]})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"priority",children:"Priorité"}),s.jsxs(Et,{value:o.priority,onValueChange:m=>l(v=>({...v,priority:m})),children:[s.jsx(wt,{className:"mt-1",children:s.jsx(Ct,{})}),s.jsxs(bt,{children:[s.jsx(be,{value:"low",children:"Basse - Question générale"}),s.jsx(be,{value:"normal",children:"Normale - Besoin d'aide"}),s.jsx(be,{value:"high",children:"Haute - Problème bloquant"}),s.jsx(be,{value:"urgent",children:"Urgente - Sécurité/Arnaque"})]})]})]}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"message",children:"Message *"}),s.jsx(Cs,{id:"message",value:o.message,onChange:m=>l(v=>({...v,message:m.target.value})),placeholder:"Décrivez votre problème en détail. Plus vous donnez d'informations, plus nous pourrons vous aider efficacement.",rows:6,className:"mt-1"})]}),t&&s.jsxs(pt,{children:[s.jsx(Je,{className:"h-4 w-4"}),s.jsxs(gt,{children:["Nous vous répondrons à l'adresse ",s.jsx("strong",{children:t.email})]})]}),s.jsx(B,{type:"submit",className:"w-full",disabled:c||!o.subject||!o.message,children:c?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Envoi en cours..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Kc,{className:"w-4 h-4 mr-2"}),"Envoyer le message"]})})]})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(K,{children:[s.jsx(Ne,{children:s.jsxs(Ce,{className:"flex items-center gap-2",children:[s.jsx(ln,{className:"w-5 h-5"}),"Temps de réponse"]})}),s.jsxs(Y,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Questions générales"}),s.jsx(Ae,{variant:"secondary",children:"24h"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Problèmes techniques"}),s.jsx(Ae,{variant:"secondary",children:"12h"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Urgences sécurité"}),s.jsx(Ae,{className:"bg-red-500",children:"2h"})]})]})]}),s.jsxs(K,{children:[s.jsx(Ne,{children:s.jsxs(Ce,{className:"flex items-center gap-2",children:[s.jsx(RA,{className:"w-5 h-5"}),"Autres moyens de contact"]})}),s.jsxs(Y,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Cr,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Email direct"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"support@studymarket.fr"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Ht,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Chat en direct"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Lun-Ven 9h-18h"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Cl,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Application mobile"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Bientôt disponible"})]})]})]})]}),s.jsxs(K,{children:[s.jsx(Ne,{children:s.jsxs(Ce,{className:"flex items-center gap-2",children:[s.jsx(vu,{className:"w-5 h-5"}),"État du système"]})}),s.jsxs(Y,{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Plateforme web"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),s.jsx("span",{className:"text-sm text-green-600",children:"Opérationnel"})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Messagerie"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),s.jsx("span",{className:"text-sm text-green-600",children:"Opérationnel"})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Notifications email"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),s.jsx("span",{className:"text-sm text-yellow-600",children:"Maintenance"})]})]}),s.jsxs(B,{variant:"outline",size:"sm",className:"w-full mt-3",children:[s.jsx(jr,{className:"w-3 h-3 mr-1"}),"Page de statut complète"]})]})]})]})]})})]})]})},Bie=[{category:"Rencontres et Échanges",icon:lr,color:"text-blue-600",tips:[{title:"Choisissez des lieux publics",description:"Rencontrez-vous toujours dans des endroits fréquentés : bibliothèques universitaires, halls d'entrée, cafétérias du campus.",type:"do",icon:Je},{title:"Évitez les lieux isolés",description:"Ne vous donnez jamais rendez-vous dans des parkings souterrains, domiciles privés ou endroits déserts.",type:"dont",icon:Wc},{title:"Prévenez un proche",description:"Informez toujours quelqu'un de votre rendez-vous : lieu, heure, personne rencontrée.",type:"do",icon:Je},{title:"Rencontrez en journée",description:"Privilégiez les rendez-vous en journée, évitez les rencontres tardives ou nocturnes.",type:"do",icon:Je}]},{category:"Vérification d'Identité",icon:FA,color:"text-green-600",tips:[{title:"Demandez la carte étudiante",description:"Vérifiez toujours l'identité avec la carte étudiante. C'est votre garantie de sécurité.",type:"do",icon:Je},{title:"Vérifiez le profil StudyMarket",description:"Consultez le profil : badge vérifié, avis, nombre de transactions, ancienneté du compte.",type:"do",icon:Je},{title:"Méfiez-vous des profils récents",description:"Soyez prudent avec les comptes créés récemment sans historique de transactions.",type:"dont",icon:Jt},{title:"Utilisez la messagerie StudyMarket",description:"Gardez une trace de vos échanges via notre messagerie sécurisée.",type:"do",icon:Je}]},{category:"Paiements Sécurisés",icon:an,color:"text-purple-600",tips:[{title:"Payez à la remise",description:"Ne payez qu'après avoir inspecté l'objet et lors de la remise en main propre.",type:"do",icon:Je},{title:"Évitez les paiements à l'avance",description:"Ne versez jamais d'acompte ou de paiement intégral avant d'avoir vu l'objet.",type:"dont",icon:Wc},{title:"Utilisez des moyens traçables",description:"Privilégiez Lydia, PayPal, virements ou espèces. Évitez les cryptomonnaies.",type:"do",icon:Je},{title:"Méfiez-vous des prix trop bas",description:"Un iPhone à 50€ ou un MacBook à 200€ sont probablement des arnaques.",type:"dont",icon:Jt}]},{category:"Communication",icon:Ht,color:"text-orange-600",tips:[{title:"Restez poli et respectueux",description:"Maintenez un ton courtois dans tous vos échanges, même en cas de désaccord.",type:"do",icon:Je},{title:"Posez des questions précises",description:"Demandez des détails sur l'état, l'âge, la raison de la vente, les défauts éventuels.",type:"do",icon:Je},{title:"Méfiez-vous de l'urgence",description:'Les vendeurs qui pressent ("achetez maintenant", "dernière chance") sont suspects.',type:"dont",icon:Jt},{title:"Gardez les preuves",description:"Conservez les captures d'écran des conversations en cas de litige.",type:"do",icon:Je}]}],qie=[{title:"Prix anormalement bas",description:"Un objet vendu bien en-dessous de sa valeur marchande",severity:"high",icon:Jt},{title:"Paiement demandé à l'avance",description:"Demande d'acompte ou paiement avant la rencontre",severity:"high",icon:an},{title:"Refus de se rencontrer",description:"Propose uniquement l'envoi postal ou la livraison",severity:"high",icon:lr},{title:"Photos de mauvaise qualité",description:"Images floues, prises sur internet ou très peu nombreuses",severity:"medium",icon:Ho},{title:"Profil incomplet",description:"Pas de photo de profil, peu d'informations, compte récent",severity:"medium",icon:af},{title:"Communication étrange",description:"Français approximatif, réponses évasives, pression temporelle",severity:"medium",icon:Ht},{title:"Changement de lieu",description:"Modifie le lieu de rendez-vous au dernier moment",severity:"medium",icon:ln},{title:"Demande d'informations personnelles",description:"Veut votre adresse, RIB, ou autres données sensibles",severity:"high",icon:hl}],Wie=[{title:"Urgence immédiate",description:"Danger physique, menaces, agression",contact:"17 (Police)",icon:gu,color:"text-red-600"},{title:"Signalement StudyMarket",description:"Comportement suspect, arnaque, violation des règles",contact:`Bouton "Signaler" dans l'app`,icon:Uo,color:"text-orange-600"},{title:"Support StudyMarket",description:"Questions, aide, médiation de conflit",contact:"support@studymarket.fr",icon:Ht,color:"text-blue-600"},{title:"Sécurité Campus",description:"Incidents sur le campus universitaire",contact:"Service sécurité de votre université",icon:ft,color:"text-green-600"}],Hie=()=>s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"flex items-center justify-center gap-2 mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center",children:s.jsx(ft,{className:"w-6 h-6 text-white"})})}),s.jsx("h1",{className:"text-4xl font-bold",children:"Sécurité & Conseils"}),s.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"Votre sécurité est notre priorité. Suivez ces conseils pour des échanges sereins et sécurisés entre étudiants."})]}),s.jsxs(pt,{className:"border-green-200 bg-green-50",children:[s.jsx(ft,{className:"h-4 w-4 text-green-600"}),s.jsx(gt,{className:"text-green-800",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Rappel important :"})," Rencontrez-vous toujours dans un lieu public du campus et vérifiez l'identité avec la carte étudiante."]}),s.jsxs(B,{variant:"outline",size:"sm",className:"ml-4 border-green-300 text-green-700 hover:bg-green-100",children:[s.jsx(ss,{className:"w-3 h-3 mr-1"}),"Guide PDF"]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(K,{children:s.jsxs(Y,{className:"pt-6 text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(ft,{className:"w-6 h-6 text-green-600"})}),s.jsx("div",{className:"text-2xl font-bold text-green-600",children:"99.8%"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Transactions sécurisées"})]})}),s.jsx(K,{children:s.jsxs(Y,{className:"pt-6 text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(FA,{className:"w-6 h-6 text-blue-600"})}),s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"100%"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Étudiants vérifiés"})]})}),s.jsx(K,{children:s.jsxs(Y,{className:"pt-6 text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(ln,{className:"w-6 h-6 text-purple-600"})}),s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"< 2h"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Réponse aux signalements"})]})}),s.jsx(K,{children:s.jsxs(Y,{className:"pt-6 text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(Aa,{className:"w-6 h-6 text-orange-600"})}),s.jsx("div",{className:"text-2xl font-bold text-orange-600",children:"4.9/5"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Satisfaction sécurité"})]})})]}),s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Guide de Sécurité Complet"}),s.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Suivez ces conseils essentiels pour des échanges en toute sécurité"})]}),Bie.map((t,e)=>s.jsxs(K,{children:[s.jsx(Ne,{children:s.jsxs(Ce,{className:"flex items-center gap-2",children:[s.jsx(t.icon,{className:`w-6 h-6 ${t.color}`}),t.category]})}),s.jsx(Y,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.tips.map((n,r)=>s.jsx("div",{className:`p-4 rounded-lg border-2 ${n.type==="do"?"border-green-200 bg-green-50":n.type==="dont"?"border-red-200 bg-red-50":"border-orange-200 bg-orange-50"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(n.icon,{className:`w-5 h-5 mt-0.5 ${n.type==="do"?"text-green-600":n.type==="dont"?"text-red-600":"text-orange-600"}`}),s.jsxs("div",{children:[s.jsx("h4",{className:`font-semibold mb-2 ${n.type==="do"?"text-green-800":n.type==="dont"?"text-red-800":"text-orange-800"}`,children:n.title}),s.jsx("p",{className:`text-sm ${n.type==="do"?"text-green-700":n.type==="dont"?"text-red-700":"text-orange-700"}`,children:n.description})]})]})},r))})})]},e))]}),s.jsxs(K,{children:[s.jsxs(Ne,{children:[s.jsxs(Ce,{className:"flex items-center gap-2",children:[s.jsx(Jt,{className:"w-6 h-6 text-red-600"}),"Signaux d'Alarme à Reconnaître"]}),s.jsx(nt,{children:"Ces comportements doivent vous alerter et vous inciter à la prudence"})]}),s.jsx(Y,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:qie.map((t,e)=>s.jsx("div",{className:`p-4 rounded-lg border-2 ${t.severity==="high"?"border-red-200 bg-red-50":"border-orange-200 bg-orange-50"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(t.icon,{className:`w-5 h-5 mt-0.5 ${t.severity==="high"?"text-red-600":"text-orange-600"}`}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("h4",{className:`font-semibold ${t.severity==="high"?"text-red-800":"text-orange-800"}`,children:t.title}),s.jsx(Ae,{variant:t.severity==="high"?"destructive":"secondary",className:"text-xs",children:t.severity==="high"?"Danger":"Attention"})]}),s.jsx("p",{className:`text-sm ${t.severity==="high"?"text-red-700":"text-orange-700"}`,children:t.description})]})]})},e))})})]}),s.jsxs(K,{children:[s.jsxs(Ne,{children:[s.jsxs(Ce,{className:"flex items-center gap-2",children:[s.jsx(gu,{className:"w-6 h-6 text-blue-600"}),"Contacts d'Urgence et Signalement"]}),s.jsx(nt,{children:"En cas de problème, voici qui contacter selon la situation"})]}),s.jsx(Y,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Wie.map((t,e)=>s.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg",children:[s.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${t.color==="text-red-600"?"bg-red-100":t.color==="text-orange-600"?"bg-orange-100":t.color==="text-blue-600"?"bg-blue-100":"bg-green-100"}`,children:s.jsx(t.icon,{className:`w-6 h-6 ${t.color}`})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-semibold mb-1",children:t.title}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:t.description}),s.jsx("div",{className:`font-medium ${t.color}`,children:t.contact})]})]},e))})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(K,{children:s.jsxs(Y,{className:"pt-6 text-center",children:[s.jsx(dW,{className:"w-12 h-12 text-blue-600 mx-auto mb-4"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Guide Complet PDF"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Téléchargez notre guide de sécurité complet"}),s.jsxs(B,{variant:"outline",className:"w-full",children:[s.jsx(ss,{className:"w-4 h-4 mr-2"}),"Télécharger"]})]})}),s.jsx(K,{children:s.jsxs(Y,{className:"pt-6 text-center",children:[s.jsx(Kp,{className:"w-12 h-12 text-green-600 mx-auto mb-4"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Centre d'Aide"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Questions fréquentes sur la sécurité"}),s.jsx(B,{variant:"outline",className:"w-full",asChild:!0,children:s.jsxs(fe,{to:"/help",children:[s.jsx(jr,{className:"w-4 h-4 mr-2"}),"Consulter l'aide"]})})]})}),s.jsx(K,{children:s.jsxs(Y,{className:"pt-6 text-center",children:[s.jsx(Ht,{className:"w-12 h-12 text-purple-600 mx-auto mb-4"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Signaler un Problème"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Contactez notre équipe de sécurité"}),s.jsxs(B,{variant:"outline",className:"w-full",children:[s.jsx(Uo,{className:"w-4 h-4 mr-2"}),"Faire un signalement"]})]})})]}),s.jsxs(pt,{className:"border-blue-200 bg-blue-50",children:[s.jsx(OA,{className:"h-4 w-4 text-blue-600"}),s.jsxs(gt,{className:"text-blue-800",children:[s.jsx("strong",{children:"Rappel :"})," En cas de doute, n'hésitez pas à annuler la transaction. Votre sécurité vaut plus que n'importe quel objet. L'équipe StudyMarket est là pour vous aider 24h/7j."]})]})]});function Gie(t,e){return p.useReducer((n,r)=>e[n][r]??n,t)}var e_="ScrollArea",[S3,soe]=Hr(e_),[Kie,cs]=S3(e_),E3=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:a=600,...o}=t,[l,c]=p.useState(null),[u,d]=p.useState(null),[f,m]=p.useState(null),[v,y]=p.useState(null),[w,b]=p.useState(null),[x,g]=p.useState(0),[_,E]=p.useState(0),[S,O]=p.useState(!1),[I,k]=p.useState(!1),R=We(e,P=>c(P)),N=Tl(i);return s.jsx(Kie,{scope:n,type:r,dir:N,scrollHideDelay:a,scrollArea:l,viewport:u,onViewportChange:d,content:f,onContentChange:m,scrollbarX:v,onScrollbarXChange:y,scrollbarXEnabled:S,onScrollbarXEnabledChange:O,scrollbarY:w,onScrollbarYChange:b,scrollbarYEnabled:I,onScrollbarYEnabledChange:k,onCornerWidthChange:g,onCornerHeightChange:E,children:s.jsx(Se.div,{dir:N,...o,ref:R,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":_+"px",...t.style}})})});E3.displayName=e_;var C3="ScrollAreaViewport",T3=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,asChild:i,nonce:a,...o}=t,l=cs(C3,n),c=p.useRef(null),u=We(e,c,l.onViewportChange);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:`
[data-radix-scroll-area-viewport] {
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
}
[data-radix-scroll-area-viewport]::-webkit-scrollbar {
  display: none;
}
:where([data-radix-scroll-area-viewport]) {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
:where([data-radix-scroll-area-content]) {
  flex-grow: 1;
}
`},nonce:a}),s.jsx(Se.div,{"data-radix-scroll-area-viewport":"",...o,asChild:i,ref:u,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...t.style},children:sae({asChild:i,children:r},d=>s.jsx("div",{"data-radix-scroll-area-content":"",ref:l.onContentChange,style:{minWidth:l.scrollbarXEnabled?"fit-content":void 0},children:d}))})]})});T3.displayName=C3;var gi="ScrollAreaScrollbar",t_=p.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=cs(gi,t.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=i,l=t.orientation==="horizontal";return p.useEffect(()=>(l?a(!0):o(!0),()=>{l?a(!1):o(!1)}),[l,a,o]),i.type==="hover"?s.jsx(Yie,{...r,ref:e,forceMount:n}):i.type==="scroll"?s.jsx(Qie,{...r,ref:e,forceMount:n}):i.type==="auto"?s.jsx(k3,{...r,ref:e,forceMount:n}):i.type==="always"?s.jsx(n_,{...r,ref:e}):null});t_.displayName=gi;var Yie=p.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=cs(gi,t.__scopeScrollArea),[a,o]=p.useState(!1);return p.useEffect(()=>{const l=i.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[i.scrollArea,i.scrollHideDelay]),s.jsx(Un,{present:n||a,children:s.jsx(k3,{"data-state":a?"visible":"hidden",...r,ref:e})})}),Qie=p.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=cs(gi,t.__scopeScrollArea),a=t.orientation==="horizontal",o=Yv(()=>c("SCROLL_END"),100),[l,c]=Gie("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return p.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,i.scrollHideDelay,c]),p.useEffect(()=>{const u=i.viewport,d=a?"scrollLeft":"scrollTop";if(u){let f=u[d];const m=()=>{const v=u[d];f!==v&&(c("SCROLL"),o()),f=v};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[i.viewport,a,c,o]),s.jsx(Un,{present:n||l!=="hidden",children:s.jsx(n_,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:le(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:le(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),k3=p.forwardRef((t,e)=>{const n=cs(gi,t.__scopeScrollArea),{forceMount:r,...i}=t,[a,o]=p.useState(!1),l=t.orientation==="horizontal",c=Yv(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?u:d)}},10);return iu(n.viewport,c),iu(n.content,c),s.jsx(Un,{present:r||a,children:s.jsx(n_,{"data-state":a?"visible":"hidden",...i,ref:e})})}),n_=p.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,i=cs(gi,t.__scopeScrollArea),a=p.useRef(null),o=p.useRef(0),[l,c]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=M3(l.viewport,l.content),d={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:m=>a.current=m,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:m=>o.current=m};function f(m,v){return nae(m,o.current,l,v)}return n==="horizontal"?s.jsx(Xie,{...d,ref:e,onThumbPositionChange:()=>{if(i.viewport&&a.current){const m=i.viewport.scrollLeft,v=dC(m,l,i.dir);a.current.style.transform=`translate3d(${v}px, 0, 0)`}},onWheelScroll:m=>{i.viewport&&(i.viewport.scrollLeft=m)},onDragScroll:m=>{i.viewport&&(i.viewport.scrollLeft=f(m,i.dir))}}):n==="vertical"?s.jsx(Zie,{...d,ref:e,onThumbPositionChange:()=>{if(i.viewport&&a.current){const m=i.viewport.scrollTop,v=dC(m,l);a.current.style.transform=`translate3d(0, ${v}px, 0)`}},onWheelScroll:m=>{i.viewport&&(i.viewport.scrollTop=m)},onDragScroll:m=>{i.viewport&&(i.viewport.scrollTop=f(m))}}):null}),Xie=p.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,a=cs(gi,t.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),u=We(e,c,a.onScrollbarXChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(P3,{"data-orientation":"horizontal",...i,ref:u,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Kv(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.x),onDragScroll:d=>t.onDragScroll(d.x),onWheelScroll:(d,f)=>{if(a.viewport){const m=a.viewport.scrollLeft+d.deltaX;t.onWheelScroll(m),O3(m,f)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Eg(o.paddingLeft),paddingEnd:Eg(o.paddingRight)}})}})}),Zie=p.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,a=cs(gi,t.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),u=We(e,c,a.onScrollbarYChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(P3,{"data-orientation":"vertical",...i,ref:u,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Kv(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.y),onDragScroll:d=>t.onDragScroll(d.y),onWheelScroll:(d,f)=>{if(a.viewport){const m=a.viewport.scrollTop+d.deltaY;t.onWheelScroll(m),O3(m,f)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Eg(o.paddingTop),paddingEnd:Eg(o.paddingBottom)}})}})}),[Jie,I3]=S3(gi),P3=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:f,...m}=t,v=cs(gi,n),[y,w]=p.useState(null),b=We(e,R=>w(R)),x=p.useRef(null),g=p.useRef(""),_=v.viewport,E=r.content-r.viewport,S=mn(d),O=mn(c),I=Yv(f,10);function k(R){if(x.current){const N=R.clientX-x.current.left,P=R.clientY-x.current.top;u({x:N,y:P})}}return p.useEffect(()=>{const R=N=>{const P=N.target;(y==null?void 0:y.contains(P))&&S(N,E)};return document.addEventListener("wheel",R,{passive:!1}),()=>document.removeEventListener("wheel",R,{passive:!1})},[_,y,E,S]),p.useEffect(O,[r,O]),iu(y,I),iu(v.content,I),s.jsx(Jie,{scope:n,scrollbar:y,hasThumb:i,onThumbChange:mn(a),onThumbPointerUp:mn(o),onThumbPositionChange:O,onThumbPointerDown:mn(l),children:s.jsx(Se.div,{...m,ref:b,style:{position:"absolute",...m.style},onPointerDown:le(t.onPointerDown,R=>{R.button===0&&(R.target.setPointerCapture(R.pointerId),x.current=y.getBoundingClientRect(),g.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",v.viewport&&(v.viewport.style.scrollBehavior="auto"),k(R))}),onPointerMove:le(t.onPointerMove,k),onPointerUp:le(t.onPointerUp,R=>{const N=R.target;N.hasPointerCapture(R.pointerId)&&N.releasePointerCapture(R.pointerId),document.body.style.webkitUserSelect=g.current,v.viewport&&(v.viewport.style.scrollBehavior=""),x.current=null})})})}),Sg="ScrollAreaThumb",A3=p.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=I3(Sg,t.__scopeScrollArea);return s.jsx(Un,{present:n||i.hasThumb,children:s.jsx(eae,{ref:e,...r})})}),eae=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...i}=t,a=cs(Sg,n),o=I3(Sg,n),{onThumbPositionChange:l}=o,c=We(e,f=>o.onThumbChange(f)),u=p.useRef(),d=Yv(()=>{u.current&&(u.current(),u.current=void 0)},100);return p.useEffect(()=>{const f=a.viewport;if(f){const m=()=>{if(d(),!u.current){const v=rae(f,l);u.current=v,l()}};return l(),f.addEventListener("scroll",m),()=>f.removeEventListener("scroll",m)}},[a.viewport,d,l]),s.jsx(Se.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:le(t.onPointerDownCapture,f=>{const v=f.target.getBoundingClientRect(),y=f.clientX-v.left,w=f.clientY-v.top;o.onThumbPointerDown({x:y,y:w})}),onPointerUp:le(t.onPointerUp,o.onThumbPointerUp)})});A3.displayName=Sg;var r_="ScrollAreaCorner",R3=p.forwardRef((t,e)=>{const n=cs(r_,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?s.jsx(tae,{...t,ref:e}):null});R3.displayName=r_;var tae=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,i=cs(r_,n),[a,o]=p.useState(0),[l,c]=p.useState(0),u=!!(a&&l);return iu(i.scrollbarX,()=>{var f;const d=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(d),c(d)}),iu(i.scrollbarY,()=>{var f;const d=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(d),o(d)}),u?s.jsx(Se.div,{...r,ref:e,style:{width:a,height:l,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Eg(t){return t?parseInt(t,10):0}function M3(t,e){const n=t/e;return isNaN(n)?0:n}function Kv(t){const e=M3(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function nae(t,e,n,r="ltr"){const i=Kv(n),a=i/2,o=e||a,l=i-o,c=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,d=n.content-n.viewport,f=r==="ltr"?[0,d]:[d*-1,0];return D3([c,u],f)(t)}function dC(t,e,n="ltr"){const r=Kv(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-i,o=e.content-e.viewport,l=a-r,c=n==="ltr"?[0,o]:[o*-1,0],u=wh(t,c);return D3([0,o],[0,l])(u)}function D3(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function O3(t,e){return t>0&&t<e}var rae=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function i(){const a={left:t.scrollLeft,top:t.scrollTop},o=n.left!==a.left,l=n.top!==a.top;(o||l)&&e(),n=a,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function Yv(t,e){const n=mn(t),r=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),p.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function iu(t,e){const n=mn(e);Sn(()=>{let r=0;if(t){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(t),()=>{window.cancelAnimationFrame(r),i.unobserve(t)}}},[t,n])}function sae(t,e){const{asChild:n,children:r}=t;if(!n)return typeof e=="function"?e(r):e;const i=p.Children.only(r);return p.cloneElement(i,{children:typeof e=="function"?e(i.props.children):e})}var L3=E3,iae=T3,aae=R3;const s_=p.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(L3,{ref:r,className:Pe("relative overflow-hidden",t),...n,children:[s.jsx(iae,{className:"h-full w-full rounded-[inherit]",children:e}),s.jsx(V3,{}),s.jsx(aae,{})]}));s_.displayName=L3.displayName;const V3=p.forwardRef(({className:t,orientation:e="vertical",...n},r)=>s.jsx(t_,{ref:r,orientation:e,className:Pe("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:s.jsx(A3,{className:"relative flex-1 rounded-full bg-border"})}));V3.displayName=t_.displayName;const hC=({conversations:t,loading:e,searchQuery:n,setSearchQuery:r,currentConversation:i,currentUser:a,onSelectConversation:o})=>{const l=t.filter(d=>{const f=d.participants.find(v=>v!==(a==null?void 0:a.uid)),m=f?d.participantDetails[f]:null;return(m==null?void 0:m.name.toLowerCase().includes(n.toLowerCase()))||d.listingTitle.toLowerCase().includes(n.toLowerCase())}),c=d=>d===0?"Gratuit":new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(d),u=d=>{const f=d.participants.find(m=>m!==(a==null?void 0:a.uid));return f?d.participantDetails[f]:null};return s.jsxs("div",{className:"w-full lg:w-72 xl:w-80 border-r border-border bg-muted/20 flex flex-col h-full",children:[s.jsxs("div",{className:"p-3 border-b border-border bg-background/95 backdrop-blur",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ht,{className:"w-5 h-5 text-primary"}),s.jsx("h1",{className:"text-lg font-semibold",children:"Messages"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(B,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Filtrer",children:s.jsx(gv,{className:"w-4 h-4"})}),s.jsx(B,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Trier",children:s.jsx(NA,{className:"w-4 h-4"})}),s.jsx(B,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Paramètres",children:s.jsx(vv,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Dn,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(Ee,{placeholder:"Rechercher conversations...",value:n,onChange:d=>r(d.target.value),className:"pl-9 h-9 text-sm"})]})]}),s.jsx(s_,{className:"flex-1",children:e?s.jsx("div",{className:"p-2 space-y-2",children:Array.from({length:5}).map((d,f)=>s.jsx("div",{className:"animate-pulse",children:s.jsxs("div",{className:"flex items-center gap-2 p-2",children:[s.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:s.jsx(fr,{className:"w-5 h-5 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1 space-y-1",children:[s.jsx("div",{className:"h-3 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-2 bg-muted rounded w-1/2"})]})]})},f))}):l.length===0?s.jsxs("div",{className:"p-6 text-center",children:[s.jsx(Ht,{className:"w-10 h-10 text-muted-foreground mx-auto mb-3"}),s.jsx("h3",{className:"font-medium mb-1 text-sm",children:"Aucune conversation"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:n?s.jsxs(s.Fragment,{children:[s.jsx(Dn,{className:"w-3 h-3 inline mr-1"}),'Aucun résultat pour "',n,'"']}):s.jsxs(s.Fragment,{children:[s.jsx(Cr,{className:"w-3 h-3 inline mr-1"}),"Vos conversations apparaîtront ici"]})})]}):s.jsx("div",{className:"p-1",children:l.map(d=>{var y,w;const f=u(d),m=d.unreadCount[a==null?void 0:a.uid]||0,v=(i==null?void 0:i.id)===d.id;return s.jsx("div",{onClick:()=>o(d),className:`p-2 rounded-md cursor-pointer transition-colors hover:bg-accent/50 ${v?"bg-accent":""}`,children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsxs("div",{className:"relative",children:[s.jsxs(Qi,{className:"w-10 h-10",children:[s.jsx(Xi,{src:f==null?void 0:f.avatar}),s.jsx(Zi,{className:"text-xs bg-gradient-to-br from-primary to-secondary text-white",children:((w=(y=f==null?void 0:f.name)==null?void 0:y[0])==null?void 0:w.toUpperCase())||s.jsx(fr,{className:"w-4 h-4"})})]}),(f==null?void 0:f.verified)&&s.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 rounded-full flex items-center justify-center",children:s.jsx(ft,{className:"w-1.5 h-1.5 text-white"})})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[s.jsxs("h3",{className:"font-medium text-xs truncate flex items-center gap-1",children:[s.jsx(fr,{className:"w-3 h-3 text-muted-foreground"}),(f==null?void 0:f.name)||"Utilisateur"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[d.lastMessage&&s.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[s.jsx(ln,{className:"w-3 h-3"}),Su(d.lastMessage.sentAt,{addSuffix:!0,locale:Qn})]}),m>0&&s.jsx(Ae,{className:"bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1",children:m>99?"99+":m})]})]}),s.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[d.listingImage?s.jsx("img",{src:d.listingImage,alt:"",className:"w-3 h-3 rounded object-cover"}):s.jsx(DA,{className:"w-3 h-3 text-muted-foreground"}),s.jsx("span",{className:"text-xs text-muted-foreground truncate flex-1",children:d.listingTitle}),s.jsxs("span",{className:"text-xs font-medium text-primary flex items-center gap-1",children:[d.listingPrice===0?s.jsx(cr,{className:"w-3 h-3 text-green-600"}):s.jsx("span",{children:"€"}),c(d.listingPrice)]})]}),d.lastMessage&&s.jsxs("p",{className:"text-xs text-muted-foreground truncate flex items-center gap-1",children:[d.lastMessage.senderId===(a==null?void 0:a.uid)?s.jsx(Kc,{className:"w-3 h-3"}):s.jsx(Ht,{className:"w-3 h-3"}),d.lastMessage.senderId===(a==null?void 0:a.uid)&&"Vous: ",d.lastMessage.text]})]})]})},d.id)})})})]})},fC=({conversation:t,messages:e,loading:n,currentUser:r,onBack:i})=>{var L,W;const{sendMessage:a,markMessagesAsSeen:o,blockUser:l,reportUser:c,deleteConversation:u}=Mv(),[d,f]=p.useState(""),[m,v]=p.useState(40),[y,w]=p.useState(!1),[b,x]=p.useState(!1),[g,_]=p.useState(""),[E,S]=p.useState(""),O=p.useRef(null),I=p.useRef(null),k=()=>{var ne;(ne=I.current)==null||ne.scrollIntoView({behavior:"smooth"})},R=p.useCallback(()=>{const ne=O.current;if(!ne)return;ne.style.height="auto";const ye=Math.max(40,Math.min(ne.scrollHeight,120));v(ye)},[]),N=p.useCallback(ne=>{const ye=ne.target.value;f(ye),w(!!ye.trim()),setTimeout(R,0)},[R]),P=async()=>{if(!d.trim()||!t||!r)return;const ne=d.trim();f(""),w(!1),v(40),await a(t.id,ne,r.uid,r.displayName||"Utilisateur",r.photoURL)},A=ne=>{ne.key==="Enter"&&!ne.shiftKey&&(ne.preventDefault(),P())},T=async()=>{!t||!r||await l(t.id,r.uid)},U=async()=>{if(!t||!r||!g.trim())return;const ne=t.participants.find(ye=>ye!==r.uid);ne&&(await c(t.id,r.uid,ne,g,E),x(!1),_(""),S(""))},H=async()=>{!t||!r||(await u(t.id,r.uid),i())};if(p.useEffect(()=>{t&&r&&o(t.id,r.uid)},[t,r,o]),p.useEffect(k,[e]),!t)return s.jsx("div",{className:"flex-1 flex items-center justify-center bg-background",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Ht,{className:"w-8 h-8 text-white"})}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Sélectionnez une conversation"}),s.jsxs("p",{className:"text-muted-foreground flex items-center justify-center gap-2",children:[s.jsx(Dn,{className:"w-4 h-4"}),"Choisissez une conversation pour commencer à discuter"]})]})});const z=t.participants.find(ne=>ne!==(r==null?void 0:r.uid)),V=z?t.participantDetails[z]:null,M=ne=>{const ye=new Date,Xe=new Date(ne);return Xe.toDateString()===ye.toDateString()?Xe.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}):Math.floor((ye.getTime()-Xe.getTime())/(1e3*60*60*24))<7?Xe.toLocaleDateString("fr-FR",{weekday:"short",hour:"2-digit",minute:"2-digit"}):Xe.toLocaleDateString("fr-FR",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})},$=ne=>ne.senderId!==(r==null?void 0:r.uid)?null:ne.seen?s.jsx(rW,{className:"w-3 h-3 text-blue-500"}):s.jsx(sW,{className:"w-3 h-3 text-muted-foreground"});return s.jsxs("div",{className:"flex-1 flex flex-col bg-background h-full",children:[s.jsxs("div",{className:"p-3 border-b border-border bg-background/95 backdrop-blur shrink-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx(B,{variant:"ghost",size:"icon",onClick:i,className:"lg:hidden h-8 w-8",children:s.jsx(Wo,{className:"w-4 h-4"})}),s.jsxs(Qi,{className:"w-8 h-8",children:[s.jsx(Xi,{src:V==null?void 0:V.avatar}),s.jsx(Zi,{className:"text-xs bg-gradient-to-br from-primary to-secondary text-white",children:((W=(L=V==null?void 0:V.name)==null?void 0:L[0])==null?void 0:W.toUpperCase())||s.jsx(fr,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("h2",{className:"font-semibold truncate text-sm flex items-center gap-1",children:[s.jsx(fr,{className:"w-3 h-3 text-muted-foreground"}),(V==null?void 0:V.name)||"Utilisateur"]}),(V==null?void 0:V.verified)&&s.jsx(ft,{className:"w-3 h-3 text-green-600"})]}),s.jsxs("p",{className:"text-xs text-muted-foreground truncate flex items-center gap-1",children:[s.jsx(lr,{className:"w-3 h-3"}),V==null?void 0:V.university]})]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(B,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Appeler",children:s.jsx(gu,{className:"w-4 h-4"})}),s.jsx(B,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Vidéo",children:s.jsx(UA,{className:"w-4 h-4"})}),s.jsxs(hw,{children:[s.jsx(fw,{asChild:!0,children:s.jsx(B,{variant:"ghost",size:"icon",className:"h-8 w-8",children:s.jsx(oW,{className:"w-4 h-4"})})}),s.jsxs(rg,{align:"end",children:[s.jsx(St,{asChild:!0,children:s.jsxs(fe,{to:`/listing/${t.listingId}`,className:"flex items-center",children:[s.jsx(jr,{className:"w-4 h-4 mr-2"}),"Voir l'annonce"]})}),s.jsxs(St,{children:[s.jsx(Aa,{className:"w-4 h-4 mr-2"}),"Marquer comme favori"]}),s.jsxs(St,{children:[s.jsx(Zq,{className:"w-4 h-4 mr-2"}),"Archiver"]}),s.jsx(Us,{}),s.jsxs(St,{onClick:()=>x(!0),children:[s.jsx(Uo,{className:"w-4 h-4 mr-2"}),"Signaler"]}),s.jsxs(St,{onClick:T,children:[s.jsx(tW,{className:"w-4 h-4 mr-2"}),"Bloquer"]}),s.jsxs(St,{onClick:H,className:"text-destructive",children:[s.jsx(Oi,{className:"w-4 h-4 mr-2"}),"Supprimer"]})]})]})]})]}),s.jsx(K,{className:"mt-2",children:s.jsx(Y,{className:"p-2",children:s.jsxs("div",{className:"flex items-center gap-2",children:[t.listingImage?s.jsx("img",{src:t.listingImage,alt:"",className:"w-8 h-8 rounded object-cover"}):s.jsx("div",{className:"w-8 h-8 bg-muted rounded flex items-center justify-center",children:s.jsx(DA,{className:"w-4 h-4 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("h3",{className:"font-medium text-xs truncate flex items-center gap-1",children:[s.jsx(Wb,{className:"w-3 h-3 text-muted-foreground"}),t.listingTitle]}),s.jsx("p",{className:"text-sm font-semibold text-primary flex items-center gap-1",children:t.listingPrice===0?s.jsxs(s.Fragment,{children:[s.jsx(cr,{className:"w-3 h-3 text-green-600"}),"Gratuit"]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-xs",children:"€"}),new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(t.listingPrice)]})})]}),s.jsx(B,{variant:"outline",size:"sm",asChild:!0,className:"h-7 text-xs px-2",children:s.jsxs(fe,{to:`/listing/${t.listingId}`,className:"flex items-center gap-1",children:[s.jsx(jr,{className:"w-3 h-3"}),"Voir"]})})]})})})]}),s.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[s.jsx(s_,{className:"flex-1 p-3",children:s.jsxs("div",{className:"space-y-3",children:[n?s.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((ne,ye)=>s.jsx("div",{className:"animate-pulse",children:s.jsx("div",{className:`flex ${ye%2===0?"justify-start":"justify-end"}`,children:s.jsxs("div",{className:"max-w-xs",children:[s.jsx("div",{className:"h-3 bg-muted rounded w-3/4 mb-1"}),s.jsx("div",{className:"h-8 bg-muted rounded"})]})})},ye))}):e.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Ht,{className:"w-6 h-6 text-white"})}),s.jsx("h3",{className:"font-medium mb-2",children:"Aucun message"}),s.jsxs("p",{className:"text-sm text-muted-foreground flex items-center justify-center gap-2",children:[s.jsx(Kc,{className:"w-4 h-4"}),"Commencez la conversation en envoyant un message"]})]}):e.map(ne=>{const ye=ne.senderId===(r==null?void 0:r.uid);return s.jsx("div",{className:`flex ${ye?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`max-w-[75%] lg:max-w-[60%] ${ye?"order-2":"order-1"}`,children:[s.jsx("div",{className:`rounded-2xl px-4 py-2 ${ye?"bg-primary text-primary-foreground rounded-br-md":"bg-muted text-foreground rounded-bl-md"}`,children:s.jsx("p",{className:"text-sm whitespace-pre-wrap leading-relaxed",children:ne.text})}),s.jsxs("div",{className:`flex items-center gap-1 mt-1 text-xs text-muted-foreground ${ye?"justify-end":"justify-start"}`,children:[s.jsx(ln,{className:"w-3 h-3"}),s.jsx("span",{children:M(ne.sentAt)}),$(ne)]})]})},ne.id)}),s.jsx("div",{ref:I})]})}),s.jsxs("div",{className:"p-3 border-t border-border bg-background/95 backdrop-blur shrink-0",children:[s.jsxs("div",{className:"flex items-end gap-2 bg-muted/30 rounded-2xl border relative",children:[s.jsx(Cs,{ref:O,value:d,placeholder:"Tapez votre message...",onChange:N,onKeyDown:A,rows:1,style:{height:m,transition:"height 0.15s ease-out",overflow:"hidden"},className:"min-h-[40px] max-h-[120px] resize-none border-0 bg-transparent focus:ring-0 focus:outline-none placeholder:text-muted-foreground/60 text-sm leading-relaxed py-2.5 px-4 pr-12 rounded-2xl"}),s.jsx(B,{onClick:P,disabled:!d.trim(),size:"sm",className:"absolute right-1.5 bottom-1.5 h-7 w-7 p-0 rounded-full bg-gradient-to-r from-primary to-secondary",children:s.jsx(Kc,{className:"h-3.5 w-3.5"})})]}),y&&s.jsxs("div",{className:"text-xs text-muted-foreground mt-1 px-2 flex items-center gap-1",children:[s.jsx(Ht,{className:"w-3 h-3 animate-pulse"}),"En cours de frappe..."]})]})]}),s.jsx(si,{open:b,onOpenChange:x,children:s.jsxs(Ss,{children:[s.jsx(ii,{children:s.jsxs(Es,{className:"flex items-center gap-2",children:[s.jsx(Uo,{className:"w-5 h-5 text-red-500"}),"Signaler cet utilisateur"]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs(oe,{htmlFor:"report-reason",className:"flex items-center gap-2",children:[s.jsx(Jt,{className:"w-4 h-4"}),"Motif du signalement"]}),s.jsxs(Et,{value:g,onValueChange:_,children:[s.jsx(wt,{children:s.jsx(Ct,{placeholder:"Sélectionnez un motif"})}),s.jsxs(bt,{children:[s.jsx(be,{value:"spam",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Cr,{className:"w-4 h-4"}),"Spam"]})}),s.jsx(be,{value:"harassment",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Jt,{className:"w-4 h-4"}),"Harcèlement"]})}),s.jsx(be,{value:"inappropriate",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Uo,{className:"w-4 h-4"}),"Contenu inapproprié"]})}),s.jsx(be,{value:"scam",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Jt,{className:"w-4 h-4"}),"Arnaque"]})}),s.jsx(be,{value:"other",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(eo,{className:"w-4 h-4"}),"Autre"]})})]})]})]}),s.jsxs("div",{children:[s.jsxs(oe,{htmlFor:"report-description",className:"flex items-center gap-2",children:[s.jsx(Ht,{className:"w-4 h-4"}),"Description (optionnel)"]}),s.jsx(Cs,{id:"report-description",value:E,onChange:ne=>S(ne.target.value),placeholder:"Décrivez le problème...",rows:3})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(B,{variant:"outline",onClick:()=>x(!1),children:"Annuler"}),s.jsxs(B,{onClick:U,disabled:!g,className:"bg-red-500 hover:bg-red-600",children:[s.jsx(Uo,{className:"w-4 h-4 mr-2"}),"Signaler"]})]})]})]})})]})},oae=()=>{const{currentUser:t,userProfile:e}=Qt(),{conversations:n,currentConversation:r,messages:i,loading:a,fetchConversations:o,fetchMessages:l,setCurrentConversation:c,cleanup:u}=Mv(),[d,f]=p.useState(""),[m,v]=p.useState(!1);p.useEffect(()=>(t&&o(t.uid),()=>{u()}),[t,o,u]),p.useEffect(()=>{r&&l(r.id)},[r,l]);const y=b=>{c(b),v(!0)},w=()=>{v(!1),c(null)};return t?s.jsxs("div",{className:"h-[calc(100vh-64px)] flex overflow-hidden",children:[s.jsx("div",{className:"lg:hidden w-full h-full",children:m?s.jsx(fC,{conversation:r,messages:i,loading:a,currentUser:t,onBack:w}):s.jsx(hC,{conversations:n,loading:a,searchQuery:d,setSearchQuery:f,currentConversation:r,setCurrentConversation:c,currentUser:t,onSelectConversation:y})}),s.jsxs("div",{className:"hidden lg:flex w-full h-full",children:[s.jsx(hC,{conversations:n,loading:a,searchQuery:d,setSearchQuery:f,currentConversation:r,setCurrentConversation:c,currentUser:t,onSelectConversation:y}),s.jsx(fC,{conversation:r,messages:i,loading:a,currentUser:t,onBack:w})]})]}):s.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Ht,{className:"w-8 h-8 text-white"})}),s.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Connectez-vous pour accéder à vos messages"}),s.jsxs("p",{className:"text-muted-foreground mb-6 flex items-center justify-center gap-2",children:[s.jsx(fr,{className:"w-4 h-4"}),"Vous devez être connecté pour voir et envoyer des messages."]}),s.jsx(B,{asChild:!0,className:"bg-gradient-to-r from-primary to-secondary",children:s.jsxs(fe,{to:"/auth",className:"flex items-center gap-2",children:[s.jsx(fr,{className:"w-4 h-4"}),"Se connecter"]})})]})};var np={linear:function(t,e,n,r){var i=n-e;return i*t/r+e},easeInQuad:function(t,e,n,r){var i=n-e;return i*(t/=r)*t+e},easeOutQuad:function(t,e,n,r){var i=n-e;return-i*(t/=r)*(t-2)+e},easeInOutQuad:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,r){var i=n-e;return i*(t/=r)*t*t+e},easeOutCubic:function(t,e,n,r){var i=n-e;return i*((t=t/r-1)*t*t+1)+e},easeInOutCubic:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,n,r){var i=n-e;return i*(t/=r)*t*t*t+e},easeOutQuart:function(t,e,n,r){var i=n-e;return-i*((t=t/r-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,n,r){var i=n-e;return i*(t/=r)*t*t*t*t+e},easeOutQuint:function(t,e,n,r){var i=n-e;return i*((t=t/r-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,n,r){var i=n-e;return-i*Math.cos(t/r*(Math.PI/2))+i+e},easeOutSine:function(t,e,n,r){var i=n-e;return i*Math.sin(t/r*(Math.PI/2))+e},easeInOutSine:function(t,e,n,r){var i=n-e;return-i/2*(Math.cos(Math.PI*t/r)-1)+e},easeInExpo:function(t,e,n,r){var i=n-e;return t==0?e:i*Math.pow(2,10*(t/r-1))+e},easeOutExpo:function(t,e,n,r){var i=n-e;return t==r?e+i:i*(-Math.pow(2,-10*t/r)+1)+e},easeInOutExpo:function(t,e,n,r){var i=n-e;return t===0?e:t===r?e+i:(t/=r/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(-Math.pow(2,-10*--t)+2)+e},easeInCirc:function(t,e,n,r){var i=n-e;return-i*(Math.sqrt(1-(t/=r)*t)-1)+e},easeOutCirc:function(t,e,n,r){var i=n-e;return i*Math.sqrt(1-(t=t/r-1)*t)+e},easeInOutCirc:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,n,r){var i=n-e,a,o,l;return l=1.70158,o=0,a=i,t===0?e:(t/=r)===1?e+i:(o||(o=r*.3),a<Math.abs(i)?(a=i,l=o/4):l=o/(2*Math.PI)*Math.asin(i/a),-(a*Math.pow(2,10*(t-=1))*Math.sin((t*r-l)*(2*Math.PI)/o))+e)},easeOutElastic:function(t,e,n,r){var i=n-e,a,o,l;return l=1.70158,o=0,a=i,t===0?e:(t/=r)===1?e+i:(o||(o=r*.3),a<Math.abs(i)?(a=i,l=o/4):l=o/(2*Math.PI)*Math.asin(i/a),a*Math.pow(2,-10*t)*Math.sin((t*r-l)*(2*Math.PI)/o)+i+e)},easeInOutElastic:function(t,e,n,r){var i=n-e,a,o,l;return l=1.70158,o=0,a=i,t===0?e:(t/=r/2)===2?e+i:(o||(o=r*(.3*1.5)),a<Math.abs(i)?(a=i,l=o/4):l=o/(2*Math.PI)*Math.asin(i/a),t<1?-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*r-l)*(2*Math.PI)/o))+e:a*Math.pow(2,-10*(t-=1))*Math.sin((t*r-l)*(2*Math.PI)/o)*.5+i+e)},easeInBack:function(t,e,n,r,i){var a=n-e;return i===void 0&&(i=1.70158),a*(t/=r)*t*((i+1)*t-i)+e},easeOutBack:function(t,e,n,r,i){var a=n-e;return i===void 0&&(i=1.70158),a*((t=t/r-1)*t*((i+1)*t+i)+1)+e},easeInOutBack:function(t,e,n,r,i){var a=n-e;return i===void 0&&(i=1.70158),(t/=r/2)<1?a/2*(t*t*(((i*=1.525)+1)*t-i))+e:a/2*((t-=2)*t*(((i*=1.525)+1)*t+i)+2)+e},easeInBounce:function(t,e,n,r){var i=n-e,a;return a=np.easeOutBounce(r-t,0,i,r),i-a+e},easeOutBounce:function(t,e,n,r){var i=n-e;return(t/=r)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,n,r){var i=n-e,a;return t<r/2?(a=np.easeInBounce(t*2,0,i,r),a*.5+e):(a=np.easeOutBounce(t*2-r,0,i,r),a*.5+i*.5+e)}},lae=np;function cae(t){return t*Math.PI/180}function Ar(t,e){return t+Math.random()*(e-t)}function uae(t,e){return Math.floor(t+Math.random()*(e-t+1))}var Dd;(function(t){t[t.Circle=0]="Circle",t[t.Square=1]="Square",t[t.Strip=2]="Strip"})(Dd||(Dd={}));var xa;(function(t){t[t.Positive=1]="Positive",t[t.Negative=-1]="Negative"})(xa||(xa={}));const dae=1e3/60;class hae{constructor(e,n,r,i){this.getOptions=n;const{colors:a,initialVelocityX:o,initialVelocityY:l}=this.getOptions();this.context=e,this.x=r,this.y=i,this.w=Ar(5,20),this.h=Ar(5,20),this.radius=Ar(5,10),this.vx=typeof o=="number"?Ar(-o,o):Ar(o.min,o.max),this.vy=typeof l=="number"?Ar(-l,0):Ar(l.min,l.max),this.shape=uae(0,2),this.angle=cae(Ar(0,360)),this.angularSpin=Ar(-.2,.2),this.color=a[Math.floor(Math.random()*a.length)],this.rotateY=Ar(0,1),this.rotationDirection=Ar(0,1)?xa.Positive:xa.Negative}update(e){const{gravity:n,wind:r,friction:i,opacity:a,drawShape:o}=this.getOptions(),l=e/dae;this.x+=this.vx*l,this.y+=this.vy*l,this.vy+=n*l,this.vx+=r*l,this.vx*=i**l,this.vy*=i**l,this.rotateY>=1&&this.rotationDirection===xa.Positive?this.rotationDirection=xa.Negative:this.rotateY<=-1&&this.rotationDirection===xa.Negative&&(this.rotationDirection=xa.Positive);const c=.1*this.rotationDirection*l;if(this.rotateY+=c,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=a,this.context.lineCap="round",this.context.lineWidth=2,o&&typeof o=="function")o.call(this,this.context);else switch(this.shape){case Dd.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case Dd.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case Dd.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class fae{constructor(e,n){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=i=>{this.particles.splice(i,1)},this.getParticle=()=>{const i=Ar(this.x,this.w+this.x),a=Ar(this.y,this.h+this.y);return new hae(this.context,this.getOptions,i,a)},this.animate=i=>{const{canvas:a,context:o,particlesGenerated:l,lastNumberOfPieces:c}=this,{run:u,recycle:d,numberOfPieces:f,debug:m,tweenFunction:v,tweenDuration:y}=this.getOptions();if(!u)return!1;const w=this.particles.length,b=d?w:l;if(b<f){c!==f&&(this.tweenProgress=0,this.tweenFrom=b,this.lastNumberOfPieces=f),this.tweenProgress=Math.min(y,Math.max(0,this.tweenProgress+i));const x=v(this.tweenProgress,this.tweenFrom,f,y),g=Math.round(x-b);for(let _=0;_<g;_++)this.particles.push(this.getParticle());this.particlesGenerated+=g}m&&(o.font="12px sans-serif",o.fillStyle="#333",o.textAlign="right",o.fillText(`Particles: ${w}`,a.width-10,a.height-20));for(let x=this.particles.length-1;x>=0;x--){const g=this.particles[x];g.update(i),(g.y>a.height||g.y<-100||g.x>a.width+100||g.x<-100)&&(d&&b<=f?this.particles[x]=this.getParticle():this.removeParticleAt(x))}return w>0||b<f},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.getOptions=n}}const i_={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:lae.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class mae{constructor(e,n){this.lastFrameTime=0,this.setOptionsWithDefaults=i=>{const a={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...a,...i_,...i},Object.assign(this,i.confettiSource)},this.update=(i=0)=>{const{options:{run:a,onConfettiComplete:o,frameRate:l},canvas:c,context:u}=this,d=Math.min(i-this.lastFrameTime,50);if(l&&d<1e3/l){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=i-(l?d%l:0),a&&(u.fillStyle="white",u.clearRect(0,0,c.width,c.height)),this.generator.animate(d)?this.rafId=requestAnimationFrame(this.update):(o&&typeof o=="function"&&this.generator.particlesGenerated>0&&o.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.generator=new fae(this.canvas,()=>this.options),this.options=n,this.update()}get options(){return this._options}set options(e){var i,a;const n=(i=this._options)==null?void 0:i.run,r=(a=this._options)==null?void 0:a.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof e.recycle=="boolean"&&e.recycle&&r===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof e.run=="boolean"&&e.run&&n===!1&&this.update()}}const pae=me.createRef();class a_ extends me.Component{constructor(e){super(e),this.canvas=me.createRef(),this.canvas=e.canvasRef||pae}componentDidMount(){if(this.canvas.current){const e=Ty(this.props)[0];this.confetti=new mae(this.canvas.current,e)}}componentDidUpdate(){const e=Ty(this.props)[0];this.confetti&&(this.confetti.options=e)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[e,n]=Ty(this.props),r={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...n.style};return s.jsx("canvas",{width:e.width,height:e.height,ref:this.canvas,...n,style:r})}}a_.defaultProps={...i_};a_.displayName="ReactConfetti";function Ty(t){const e={},n={},r={},i=[...Object.keys(i_),"confettiSource","drawShape","onConfettiComplete","frameRate"],a=["canvasRef"];for(const o in t){const l=t[o];i.includes(o)?e[o]=l:a.includes(o)?a[o]=l:r[o]=l}return[e,r,n]}const gae=me.forwardRef((t,e)=>s.jsx(a_,{canvasRef:e,...t})),vae=({open:t,loading:e,email:n,onResend:r,onCheck:i,onClose:a,verified:o})=>s.jsx(si,{open:t,children:s.jsxs(Ss,{className:"max-w-md text-center",children:[o&&s.jsx(gae,{width:window.innerWidth,height:window.innerHeight,numberOfPieces:250,recycle:!1}),s.jsxs(ii,{children:[s.jsxs(Es,{className:"flex items-center justify-center gap-2 text-lg",children:[o?s.jsx(wW,{className:"w-6 h-6 text-green-500 animate-bounce"}):s.jsx(gW,{className:"w-5 h-5 text-primary"}),o?"Félicitations !":"Vérifie ton email"]}),s.jsx(Yo,{children:o?"Ton compte est maintenant activé. Tu peux accéder à la plateforme.":`Un lien de confirmation a été envoyé à ${n}. Clique dessus pour activer ton compte.`})]}),!o&&s.jsxs("div",{className:"space-y-3 mt-2",children:[s.jsxs("p",{className:"text-muted-foreground text-sm",children:["Pense à vérifier tes spams. ",s.jsx("br",{}),"La vérification est automatique dès que tu as cliqué sur le lien."]}),s.jsxs(B,{onClick:i,disabled:e,className:"w-full",children:[e?s.jsx(Yn,{className:"w-4 h-4 mr-2 animate-spin"}):null,"J'ai validé mon email"]}),s.jsxs(B,{onClick:r,variant:"outline",disabled:e,className:"w-full",children:[e?s.jsx(Yn,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Renvoyer l'email"]})]}),o&&s.jsxs("div",{className:"space-y-3 mt-4",children:[s.jsx("p",{className:"text-green-600 font-semibold text-lg",children:"Bienvenue sur StudyMarket !"}),s.jsx(B,{onClick:a,className:"w-full bg-gradient-to-r from-primary to-secondary",children:"Accéder au site"})]})]})}),xae=De.object({email:De.string().email("Email invalide"),password:De.string().min(6,"Le mot de passe doit contenir au moins 6 caractères")}),yae=De.object({displayName:De.string().min(2,"Le nom doit contenir au moins 2 caractères"),email:De.string().email("Email invalide").refine(t=>["univ-","edu","gmail.com","ac.","student.","etudiant.","etu.","sorbonne-universite.fr","sorbonne-nouvelle.fr","dauphine.psl.eu","polytechnique.edu","ens.fr","centralesupelec.fr","mines-paristech.fr"].some(n=>t.includes(n)),"Vous devez utiliser une adresse email universitaire"),university:De.string().min(1,"Veuillez sélectionner votre université"),otherUniversity:De.string().optional(),fieldOfStudy:De.string().min(1,"Veuillez indiquer votre filière"),otherFieldOfStudy:De.string().optional(),graduationYear:De.string().min(1,"Veuillez indiquer votre année de diplôme"),password:De.string().min(6,"Le mot de passe doit contenir au moins 6 caractères"),confirmPassword:De.string()}).refine(t=>t.password===t.confirmPassword,{message:"Les mots de passe ne correspondent pas",path:["confirmPassword"]}).refine(t=>t.university==="Autre université"?!!t.otherUniversity&&t.otherUniversity.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre université",path:["otherUniversity"]}).refine(t=>t.fieldOfStudy==="Autre"?!!t.otherFieldOfStudy&&t.otherFieldOfStudy.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre filière",path:["otherFieldOfStudy"]}),wae=De.object({university:De.string().min(1,"Veuillez sélectionner votre université"),otherUniversity:De.string().optional(),fieldOfStudy:De.string().min(1,"Veuillez indiquer votre filière"),otherFieldOfStudy:De.string().optional(),graduationYear:De.string().min(1,"Veuillez indiquer votre année de diplôme"),displayName:De.string().min(2,"Le nom doit contenir au moins 2 caractères")}).refine(t=>t.university==="Autre université"?!!t.otherUniversity&&t.otherUniversity.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre université",path:["otherUniversity"]}).refine(t=>t.fieldOfStudy==="Autre"?!!t.otherFieldOfStudy&&t.otherFieldOfStudy.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre filière",path:["otherFieldOfStudy"]}),mC=["Sorbonne Université","Université Paris-Dauphine","École Polytechnique","ENS Paris","CentraleSupélec","MINES ParisTech","HEC Paris","ESSEC","ESCP","Université Paris 1 Panthéon-Sorbonne","Université Paris 3 Sorbonne","Université Paris Cité","Sciences Po Paris","Autre université"],pC=["Informatique","Ingénierie","Commerce/Management","Droit","Médecine","Sciences","Lettres/Langues","Sciences Humaines","Arts","Architecture","Autre"],bae=t=>["univ-","edu","ac.","student.","etudiant.","etu.","sorbonne-universite.fr","sorbonne-nouvelle.fr","dauphine.psl.eu","polytechnique.edu","ens.fr","centralesupelec.fr","mines-paristech.fr"].some(n=>t.includes(n)),jae=()=>{var z,V;const{currentUser:t,signIn:e,signInWithGoogle:n}=Qt(),[r,i]=p.useState(!1),[a,o]=p.useState(!1),[l,c]=p.useState(!1),[u,d]=p.useState(!1),[f,m]=p.useState(""),[v,y]=p.useState(""),[w,b]=p.useState(!1),[x,g]=p.useState(null);na();const[_,E]=p.useState(!1),[S,O]=p.useState(!1),[I,k]=p.useState(!1),R=En(),N=Qo({resolver:Xo(xae),defaultValues:{email:"",password:""}}),P=Qo({resolver:Xo(yae),defaultValues:{displayName:"",email:"",university:"",otherUniversity:"",fieldOfStudy:"",otherFieldOfStudy:"",graduationYear:"",password:"",confirmPassword:""}}),A=Qo({resolver:Xo(wae),defaultValues:{university:"",fieldOfStudy:"",graduationYear:""}});if(p.useEffect(()=>{(async()=>{if(t)try{const $=await rs(tt(_e,"users",t.uid));if($.exists()){const L=$.data();if(!(t.emailVerified||t.providerData.some(ne=>ne.providerId==="google.com"))&&!L.emailVerified){y(t.email||""),d(!0),E(!0),k(!1);return}}else{if(t.providerData.some(W=>W.providerId==="google.com")){if(!bae(t.email||"")){m("Vous devez utiliser une adresse email universitaire"),zs.signOut();return}g({email:t.email,displayName:t.displayName,photoURL:t.photoURL,uid:t.uid}),b(!0);return}const L=localStorage.getItem("pendingUserData");if(L&&t.emailVerified){const W=JSON.parse(L);await jc(tt(_e,"users",t.uid),W),localStorage.removeItem("pendingUserData"),localStorage.removeItem("pendingUserEmail"),window.location.reload()}}}catch($){console.error("Error checking user profile:",$)}})()},[t]),p.useEffect(()=>{let M=null;return u&&t&&!t.emailVerified&&(M=setInterval(async()=>{await cd(t),t.emailVerified&&(d(!1),y(""),m(""),window.location.reload())},5e3)),()=>{M&&clearInterval(M)}},[u,t]),p.useEffect(()=>{t?t.emailVerified?(E(!1),k(!1)):(y(t.email||""),E(!0),k(!1)):(E(!1),k(!1))},[t]),p.useEffect(()=>{let M=null;return _&&t&&!t.emailVerified&&(M=setInterval(async()=>{await cd(t),t.emailVerified&&(k(!0),M&&clearInterval(M))},5e3)),()=>{M&&clearInterval(M)}},[_,t]),w&&x)return s.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-8",children:s.jsxs(K,{className:"w-full max-w-md",children:[s.jsxs(Ne,{className:"text-center",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:s.jsx(_W,{className:"w-6 h-6 text-green-600"})})}),s.jsx(Ce,{className:"text-2xl text-green-600",children:"Complétez votre profil étudiant"}),s.jsx(nt,{children:"Dernière étape pour accéder à StudyMarket"})]}),s.jsxs(Y,{className:"space-y-4",children:[s.jsxs(pt,{children:[s.jsx(Je,{className:"h-4 w-4"}),s.jsxs(gt,{children:["Connecté avec ",s.jsx("strong",{children:x.email})]})]}),f&&s.jsxs(pt,{variant:"destructive",children:[s.jsx(Rd,{className:"h-4 w-4"}),s.jsx(gt,{children:f})]}),s.jsxs("form",{onSubmit:A.handleSubmit(async M=>{c(!0),m("");try{const $=M.university==="Autre université"?M.otherUniversity:M.university,L=M.fieldOfStudy==="Autre"?M.otherFieldOfStudy:M.fieldOfStudy;if(await jc(tt(_e,"users",x.uid),{email:x.email,displayName:M.displayName,photoURL:x.photoURL,university:$,otherUniversity:M.university==="Autre université"?M.otherUniversity:void 0,fieldOfStudy:L,otherFieldOfStudy:M.fieldOfStudy==="Autre"?M.otherFieldOfStudy:void 0,graduationYear:parseInt(M.graduationYear),createdAt:new Date().toISOString(),emailVerified:!0,isStudent:!0,provider:"google",profileCompleted:!0}),t&&x.displayName)try{await rh(t,{displayName:M.displayName})}catch{}b(!1),window.location.reload()}catch($){console.error("Error completing profile:",$),m("Erreur lors de la sauvegarde du profil")}finally{c(!1)}}),className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"university",children:"Université"}),s.jsxs(Et,{onValueChange:M=>A.setValue("university",M),value:A.watch("university"),children:[s.jsx(wt,{children:s.jsx(Ct,{placeholder:"Sélectionnez votre université"})}),s.jsx(bt,{children:mC.map(M=>s.jsx(be,{value:M,children:M},M))})]}),A.watch("university")==="Autre université"&&s.jsx(Ee,{id:"otherUniversity",type:"text",placeholder:"Nom de votre université",...A.register("otherUniversity"),className:"mt-2"}),A.formState.errors.university&&s.jsx("p",{className:"text-sm text-destructive",children:A.formState.errors.university.message}),A.watch("university")==="Autre université"&&A.formState.errors.otherUniversity&&s.jsx("p",{className:"text-sm text-destructive",children:A.formState.errors.otherUniversity.message})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"fieldOfStudy",children:"Filière"}),s.jsxs(Et,{onValueChange:M=>A.setValue("fieldOfStudy",M),value:A.watch("fieldOfStudy"),children:[s.jsx(wt,{children:s.jsx(Ct,{placeholder:"Filière"})}),s.jsx(bt,{children:pC.map(M=>s.jsx(be,{value:M,children:M},M))})]}),A.watch("fieldOfStudy")==="Autre"&&s.jsx(Ee,{id:"otherFieldOfStudy",type:"text",placeholder:"Nom de votre filière",...A.register("otherFieldOfStudy"),className:"mt-2"}),A.formState.errors.fieldOfStudy&&s.jsx("p",{className:"text-sm text-destructive",children:A.formState.errors.fieldOfStudy.message}),A.watch("fieldOfStudy")==="Autre"&&A.formState.errors.otherFieldOfStudy&&s.jsx("p",{className:"text-sm text-destructive",children:A.formState.errors.otherFieldOfStudy.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"graduationYear",children:"Année de diplôme"}),s.jsxs(Et,{onValueChange:M=>A.setValue("graduationYear",M),children:[s.jsx(wt,{children:s.jsx(Ct,{placeholder:"Année"})}),s.jsx(bt,{children:Array.from({length:8},(M,$)=>2024+$).map(M=>s.jsx(be,{value:M.toString(),children:M},M))})]}),A.formState.errors.graduationYear&&s.jsx("p",{className:"text-sm text-destructive",children:A.formState.errors.graduationYear.message})]})]}),s.jsxs(B,{type:"submit",className:"w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800",disabled:l,children:[l?s.jsx(Yn,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Finaliser mon inscription"]})]}),s.jsx(B,{variant:"outline",onClick:()=>{zs.signOut(),b(!1),g(null)},className:"w-full",children:"Se déconnecter et recommencer"})]})]})});if(u)return s.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-8",children:s.jsxs(K,{className:"w-full max-w-md",children:[s.jsxs(Ne,{className:"text-center",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:s.jsx(Cr,{className:"w-6 h-6 text-blue-600"})})}),s.jsx(Ce,{className:"text-2xl text-blue-600",children:"Vérifiez votre email"}),s.jsxs(nt,{children:["Un lien d'activation a été envoyé à ",s.jsx("strong",{children:v}),".",s.jsx("br",{}),"Cliquez sur le lien pour activer votre compte.",s.jsx("br",{}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"(Vous pouvez fermer cette page et revenir après avoir validé l'email)"})]})]}),s.jsxs(Y,{className:"space-y-4",children:[s.jsxs(pt,{children:[s.jsx(Je,{className:"h-4 w-4"}),s.jsxs(gt,{children:["Nous avons envoyé un lien d'activation à ",s.jsx("strong",{children:v}),".",s.jsx("br",{}),s.jsx("span",{className:"text-xs",children:"Vérifiez vos spams si vous ne le trouvez pas."})]})]}),s.jsxs("div",{className:"text-sm text-muted-foreground space-y-2",children:[s.jsx("p",{children:s.jsx("strong",{children:"Important :"})}),s.jsx("p",{children:"• Cliquez sur le lien dans l'email pour activer votre compte"}),s.jsx("p",{children:"• Vérifiez votre boîte de réception et vos spams"}),s.jsx("p",{children:"• Le lien expire dans 24h"})]}),s.jsxs(B,{onClick:async()=>{if(t){c(!0);try{await qx(t),m(""),alert("Email d'activation renvoyé !")}catch(M){m("Erreur lors de l'envoi de l'email"),console.error("Error resending verification:",M)}c(!1)}},variant:"outline",className:"w-full",disabled:l||!t,children:[l?s.jsx(Yn,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(Cr,{className:"w-4 h-4 mr-2"}),"Renvoyer l'email d'activation"]}),s.jsx(B,{onClick:async()=>{if(t){c(!0);try{await cd(t),t.emailVerified?(d(!1),y(""),m(""),window.location.reload()):m("L'email n'est pas encore validé. Pensez à vérifier vos spams.")}catch{m("Erreur lors de la vérification de l'état de l'email")}c(!1)}},variant:"secondary",className:"w-full",disabled:l||!t,children:"J'ai déjà validé mon email"}),f&&s.jsxs(pt,{variant:"destructive",children:[s.jsx(Rd,{className:"h-4 w-4"}),s.jsx(gt,{children:f})]}),s.jsx(B,{variant:"link",onClick:()=>{d(!1),y(""),m(""),t&&zs.signOut()},className:"w-full",children:"Retour à l'inscription"})]})]})});const T=async M=>{c(!0),m("");try{await e(M.email,M.password),R("/profile")}catch($){$.code==="auth/invalid-credential"?m("Email ou mot de passe incorrect"):$.code==="auth/user-not-found"?m("Aucun compte trouvé avec cet email"):$.code==="auth/user-disabled"?m("Ce compte a été désactivé"):$.code==="auth/too-many-requests"?m("Trop de tentatives. Réessayez plus tard."):m("Erreur de connexion: "+($.message||"Erreur inconnue")),console.error("Sign in error:",$)}finally{c(!1)}},U=async M=>{c(!0),m("");try{const L=(await NI(zs,M.email,M.password)).user;await qx(L,{url:`${window.location.origin}/auth`,handleCodeInApp:!1});const W=M.university==="Autre université"?M.otherUniversity:M.university,ne=M.fieldOfStudy==="Autre"?M.otherFieldOfStudy:M.fieldOfStudy,ye={displayName:M.displayName,university:W,otherUniversity:M.university==="Autre université"?M.otherUniversity:void 0,fieldOfStudy:ne,otherFieldOfStudy:M.fieldOfStudy==="Autre"?M.otherFieldOfStudy:void 0,graduationYear:parseInt(M.graduationYear),email:M.email,createdAt:new Date().toISOString(),emailVerified:!0,isStudent:!0,provider:"email"};localStorage.setItem("pendingUserData",JSON.stringify(ye)),y(M.email),E(!0),k(!1),L&&await rh(L,{displayName:M.displayName})}catch($){console.error("Sign up error:",$),$.code==="auth/email-already-in-use"?m("Cette adresse email est déjà utilisée"):$.code==="auth/weak-password"?m("Le mot de passe est trop faible"):$.code==="auth/invalid-email"?m("Adresse email invalide"):m("Erreur lors de la création du compte")}finally{c(!1)}},H=async()=>{c(!0),m("");try{await n()}catch(M){M.code==="auth/popup-closed-by-user"?m("Connexion annulée"):M.code==="auth/popup-blocked"?m("Popup bloquée par le navigateur"):M.code==="auth/account-exists-with-different-credential"?m("Un compte existe déjà avec cet email"):m("Erreur de connexion avec Google: "+(M.message||"Erreur inconnue")),console.error("Google sign in error:",M)}finally{c(!1)}};return p.useEffect(()=>{(async()=>{if(t&&t.emailVerified&&!(await rs(tt(_e,"users",t.uid))).exists()){const L=localStorage.getItem("pendingUserData");if(L){const W=JSON.parse(L);await jc(tt(_e,"users",t.uid),W),localStorage.removeItem("pendingUserData"),localStorage.removeItem("pendingUserEmail"),window.location.reload()}}})()},[t]),s.jsxs("div",{className:"min-h-screen flex items-center justify-center px-2 sm:px-0",children:[s.jsxs(K,{className:"w-full max-w-md mx-auto px-2 py-4 sm:px-6",children:[s.jsxs(Ne,{className:"text-center",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-secondary rounded-lg flex items-center justify-center",children:s.jsx(pu,{className:"w-6 h-6 text-white"})})}),s.jsx(Ce,{className:"text-2xl",children:r?"Rejoindre StudyMarket":"Se connecter"}),s.jsx(nt,{children:r?"Inscription sécurisée pour étudiants":"Connectez-vous à votre compte étudiant"}),r&&s.jsx("div",{className:"flex items-center justify-center gap-2 mt-4",children:s.jsxs(Ae,{className:"bg-blue-100 text-blue-800 border-blue-200",children:[s.jsx(ft,{className:"w-3 h-3 mr-1"}),"Email universitaire requis"]})})]}),s.jsxs(Y,{className:"space-y-6",children:[f&&s.jsxs(pt,{variant:"destructive",children:[s.jsx(Rd,{className:"h-4 w-4"}),s.jsx(gt,{children:f})]}),s.jsxs(B,{variant:"outline",className:"w-full",onClick:H,disabled:l,children:[l?s.jsx(Yn,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsxs("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",children:[s.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{fill:"currentColor",d:"M12 1c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continuer avec Google Éducation"]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx(Zr,{className:"w-full"})}),s.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:s.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Ou avec votre email universitaire"})})]}),s.jsxs("form",{onSubmit:r?P.handleSubmit(U):N.handleSubmit(T),className:"space-y-4",children:[r&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"displayName",children:"Nom complet"}),s.jsxs("div",{className:"relative",children:[s.jsx(fr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(Ee,{id:"displayName",type:"text",placeholder:"Votre nom complet",className:"pl-10",...P.register("displayName")})]}),P.formState.errors.displayName&&s.jsx("p",{className:"text-sm text-destructive",children:P.formState.errors.displayName.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"email",children:"Email universitaire"}),s.jsxs("div",{className:"relative",children:[s.jsx(Cr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(Ee,{id:"email",type:"email",placeholder:"prenom.nom@univ-exemple.fr",className:"pl-10",...r?P.register("email"):N.register("email")})]}),(r?P.formState.errors.email:N.formState.errors.email)&&s.jsx("p",{className:"text-sm text-destructive",children:(z=r?P.formState.errors.email:N.formState.errors.email)==null?void 0:z.message}),r&&s.jsx("p",{className:"text-xs text-muted-foreground",children:"Un lien d'activation sera envoyé à cette adresse"})]}),r&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"university",children:"Université"}),s.jsxs(Et,{onValueChange:M=>P.setValue("university",M),value:P.watch("university"),children:[s.jsx(wt,{children:s.jsx(Ct,{placeholder:"Sélectionnez votre université"})}),s.jsx(bt,{children:mC.map(M=>s.jsx(be,{value:M,children:M},M))})]}),P.watch("university")==="Autre université"&&s.jsx(Ee,{id:"otherUniversity",type:"text",placeholder:"Nom de votre université",...P.register("otherUniversity"),className:"mt-2"}),P.formState.errors.university&&s.jsx("p",{className:"text-sm text-destructive",children:P.formState.errors.university.message}),P.watch("university")==="Autre université"&&P.formState.errors.otherUniversity&&s.jsx("p",{className:"text-sm text-destructive",children:P.formState.errors.otherUniversity.message})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"fieldOfStudy",children:"Filière"}),s.jsxs(Et,{onValueChange:M=>P.setValue("fieldOfStudy",M),value:P.watch("fieldOfStudy"),children:[s.jsx(wt,{children:s.jsx(Ct,{placeholder:"Filière"})}),s.jsx(bt,{children:pC.map(M=>s.jsx(be,{value:M,children:M},M))})]}),P.watch("fieldOfStudy")==="Autre"&&s.jsx(Ee,{id:"otherFieldOfStudy",type:"text",placeholder:"Nom de votre filière",...P.register("otherFieldOfStudy"),className:"mt-2"}),P.formState.errors.fieldOfStudy&&s.jsx("p",{className:"text-sm text-destructive",children:P.formState.errors.fieldOfStudy.message}),P.watch("fieldOfStudy")==="Autre"&&P.formState.errors.otherFieldOfStudy&&s.jsx("p",{className:"text-sm text-destructive",children:P.formState.errors.otherFieldOfStudy.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"graduationYear",children:"Année de diplôme"}),s.jsxs(Et,{onValueChange:M=>P.setValue("graduationYear",M),children:[s.jsx(wt,{children:s.jsx(Ct,{placeholder:"Année"})}),s.jsx(bt,{children:Array.from({length:8},(M,$)=>2024+$).map(M=>s.jsx(be,{value:M.toString(),children:M},M))})]}),P.formState.errors.graduationYear&&s.jsx("p",{className:"text-sm text-destructive",children:P.formState.errors.graduationYear.message})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"password",children:"Mot de passe"}),s.jsxs("div",{className:"relative",children:[s.jsx(hl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(Ee,{id:"password",type:a?"text":"password",placeholder:"••••••••",className:"pl-10 pr-10",...r?P.register("password"):N.register("password")}),s.jsx(B,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-1/2 transform -translate-y-1/2 h-full px-3",onClick:()=>o(!a),children:a?s.jsx(lW,{className:"w-4 h-4"}):s.jsx(Hc,{className:"w-4 h-4"})})]}),(r?P.formState.errors.password:N.formState.errors.password)&&s.jsx("p",{className:"text-sm text-destructive",children:(V=r?P.formState.errors.password:N.formState.errors.password)==null?void 0:V.message})]}),r&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"confirmPassword",children:"Confirmer le mot de passe"}),s.jsxs("div",{className:"relative",children:[s.jsx(hl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(Ee,{id:"confirmPassword",type:a?"text":"password",placeholder:"••••••••",className:"pl-10",...P.register("confirmPassword")})]}),P.formState.errors.confirmPassword&&s.jsx("p",{className:"text-sm text-destructive",children:P.formState.errors.confirmPassword.message})]}),s.jsxs(B,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90",disabled:l,children:[l?s.jsx(Yn,{className:"w-4 h-4 mr-2 animate-spin"}):null,r?"Créer le compte et envoyer l'email":"Se connecter"]})]}),s.jsx("div",{className:"w-full",children:s.jsx(B,{variant:"link",onClick:()=>i(!r),disabled:l,className:"w-full flex justify-center items-center text-center break-words px-1",children:r?"Déjà un compte ? Se connecter":"Pas encore de compte ? S'inscrire"})}),r&&s.jsx("div",{className:"text-center text-xs text-muted-foreground",children:"En créant un compte, vous acceptez nos conditions d'utilisation. Seules les adresses email universitaires sont acceptées."})]})]}),s.jsx(vae,{open:_,loading:S,email:v,onResend:async()=>{O(!0);try{t&&await qx(t)}finally{O(!1)}},onCheck:async()=>{O(!0);try{t&&(await cd(t),t.emailVerified&&k(!0))}finally{O(!1)}},onClose:()=>{E(!1),k(!1),R("/")},verified:I})]})},hs=({children:t})=>{const{currentUser:e}=Qt(),n=na();return e?s.jsx(s.Fragment,{children:t}):s.jsx(EV,{to:"/auth",state:{from:n},replace:!0})},F3=({cart:t,total:e,showCheckoutButton:n=!0})=>{const r=En(),i=e,a=0,o=0,l=i+a-o,c=u=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(u);return s.jsxs(K,{children:[s.jsx(Ne,{children:s.jsxs(Ce,{className:"flex items-center gap-2",children:[s.jsx(to,{className:"w-5 h-5"}),"Récapitulatif de commande"]})}),s.jsx(Y,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("span",{className:"text-muted-foreground",children:["Articles (",t.reduce((u,d)=>u+d.quantity,0),")"]}),s.jsx("span",{children:c(i)})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("span",{className:"flex items-center gap-1 text-muted-foreground",children:[s.jsx(xv,{className:"w-4 h-4"}),"Livraison"]}),s.jsx("span",{className:"text-green-600 font-medium",children:"Gratuite"})]}),o>0,s.jsx(Zr,{}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-semibold",children:"Total"}),s.jsx("span",{className:"font-bold text-lg",children:c(l)})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"* TVA incluse"}),n&&s.jsxs(B,{onClick:()=>r("/checkout"),className:"w-full mt-4 bg-gradient-to-r from-primary to-secondary",disabled:t.length===0,children:[s.jsx(an,{className:"mr-2 h-4 w-4"}),"Procéder au paiement",s.jsx(Ks,{className:"ml-2 h-4 w-4"})]})]})})]})},_ae=()=>{const{currentUser:t}=Qt(),{cart:e,updateQuantity:n,removeFromCart:r,clearCart:i,cartTotal:a}=_u(),o=En(),[l,c]=p.useState(""),[u,d]=p.useState(!1),f=(y,w)=>{if(!(w<1)){if(w>10){ee.error("Maximum 10 articles par produit");return}n(y,w)}},m=y=>{r(y),ee.success("Article retiré du panier")},v=()=>{l.trim()&&(d(!0),setTimeout(()=>{l.toLowerCase()==="etudiant10"?ee.success("Code promo appliqué : 10% de réduction"):ee.error("Code promo invalide ou expiré"),d(!1)},1e3))};return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs(B,{variant:"ghost",onClick:()=>o(-1),className:"-ml-4",children:[s.jsx(Wo,{className:"w-4 h-4 mr-2"}),"Retour"]}),s.jsxs("div",{className:"flex items-center justify-between mt-4",children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(to,{className:"w-8 h-8"}),"Mon Panier"]}),e.length>0&&s.jsxs(B,{variant:"outline",onClick:i,className:"text-destructive hover:text-destructive",children:[s.jsx(Oi,{className:"w-4 h-4 mr-2"}),"Vider le panier"]})]})]}),e.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(to,{className:"w-8 h-8 text-muted-foreground"})}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Votre panier est vide"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas encore ajouté d'articles à votre panier."}),s.jsx(B,{asChild:!0,children:s.jsxs(fe,{to:"/products",children:[s.jsx(Ko,{className:"w-4 h-4 mr-2"}),"Parcourir les produits"]})})]}):s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2",children:[s.jsxs(K,{children:[s.jsx(Ne,{children:s.jsxs(Ce,{className:"flex items-center justify-between",children:[s.jsxs("span",{children:["Articles (",e.reduce((y,w)=>y+w.quantity,0),")"]}),s.jsxs(B,{variant:"ghost",size:"sm",onClick:()=>o("/products"),children:[s.jsx(Ko,{className:"w-4 h-4 mr-2"}),"Continuer mes achats"]})]})}),s.jsx(Y,{children:s.jsx("div",{className:"space-y-4",children:e.map(y=>s.jsxs("div",{className:"flex items-center gap-4 p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[y.image?s.jsx("img",{src:y.image,alt:y.name,className:"w-20 h-20 object-cover rounded"}):s.jsx("div",{className:"w-20 h-20 bg-muted rounded flex items-center justify-center",children:s.jsx(Ko,{className:"w-8 h-8 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold",children:y.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:y.seller}),s.jsxs("div",{className:"flex items-center mt-2",children:[s.jsx(B,{variant:"outline",size:"icon",className:"h-8 w-8 rounded-r-none",onClick:()=>f(y.id,y.quantity-1),disabled:y.quantity<=1,children:s.jsx(VA,{className:"h-3 w-3"})}),s.jsx(Ee,{type:"number",value:y.quantity,onChange:w=>{const b=parseInt(w.target.value);isNaN(b)||f(y.id,b)},className:"h-8 w-12 rounded-none text-center [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),s.jsx(B,{variant:"outline",size:"icon",className:"h-8 w-8 rounded-l-none",onClick:()=>f(y.id,y.quantity+1),disabled:y.quantity>=10,children:s.jsx(Go,{className:"h-3 w-3"})})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(y.price*y.quantity)}),s.jsxs(B,{variant:"ghost",size:"sm",onClick:()=>m(y.id),className:"text-destructive hover:text-destructive mt-2",children:[s.jsx(Oi,{className:"h-3 w-3 mr-1"}),"Supprimer"]})]})]},y.id))})})]}),s.jsx(K,{className:"mt-6",children:s.jsxs(Y,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(fh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(Ee,{placeholder:"Code promo",value:l,onChange:y=>c(y.target.value),className:"pl-10"})]}),s.jsx(B,{onClick:v,disabled:!l.trim()||u,children:u?s.jsxs(s.Fragment,{children:[s.jsx(Hi,{className:"w-4 h-4 mr-2 animate-spin"}),"Application..."]}):"Appliquer"})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:'Essayez le code "ETUDIANT10" pour 10% de réduction'})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(F3,{cart:e,total:a,showCheckoutButton:!0}),!t&&s.jsxs(pt,{className:"border-orange-200 bg-orange-50",children:[s.jsx(Jt,{className:"h-4 w-4 text-orange-600"}),s.jsx(gt,{className:"text-orange-800",children:"Vous devez être connecté pour finaliser votre commande."})]})]})]})]})},Nm=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},o_=ju((t,e)=>({orders:[],loading:!1,fetchUserOrders:async n=>{if(n)try{t({loading:!0});const r=Wt(vt(_e,"orders"),hn("userId","==",n),ns(100)),i=await fn(r),a=[];i.forEach(o=>{const l=o.data();a.push({id:o.id,...l,createdAt:Nm(l.createdAt),updatedAt:Nm(l.updatedAt)})}),a.sort((o,l)=>l.createdAt.getTime()-o.createdAt.getTime()),t({orders:a,loading:!1})}catch(r){console.error("Error fetching orders:",r),ee.error("Erreur lors du chargement des commandes"),t({loading:!1})}},getOrderById:async n=>{try{const r=await rs(tt(_e,"orders",n));if(r.exists()){const i=r.data();return{id:r.id,...i,createdAt:Nm(i.createdAt),updatedAt:Nm(i.updatedAt)}}return null}catch(r){return console.error("Error getting order:",r),ee.error("Erreur lors du chargement de la commande"),null}},createOrder:async n=>{try{const r=Math.random().toString(36).substring(2,8).toUpperCase(),i={...n,securityCode:r,createdAt:wn(),updatedAt:wn()},a=await Ja(vt(_e,"orders"),i),o={id:a.id,...n,createdAt:new Date,updatedAt:new Date};return t(l=>({orders:[o,...l.orders]})),ee.success("Commande créée avec succès !"),a.id}catch(r){throw console.error("Error creating order:",r),ee.error("Erreur lors de la création de la commande"),r}},updateOrderStatus:async(n,r,i)=>{try{const a={status:r,updatedAt:wn()};i&&(a.notes=i),await Mn(tt(_e,"orders",n),a),t(o=>({orders:o.orders.map(l=>l.id===n?{...l,status:r,notes:i||l.notes,updatedAt:new Date}:l)})),ee.success(`Statut de la commande mis à jour : ${r}`)}catch(a){console.error("Error updating order status:",a),ee.error("Erreur lors de la mise à jour du statut")}},cancelOrder:async(n,r)=>{try{await Mn(tt(_e,"orders",n),{status:"cancelled",notes:r,updatedAt:wn()}),t(i=>({orders:i.orders.map(a=>a.id===n?{...a,status:"cancelled",notes:r,updatedAt:new Date}:a)})),ee.success("Commande annulée")}catch(i){console.error("Error cancelling order:",i),ee.error("Erreur lors de l'annulation de la commande")}}})),Nae=()=>{const{currentUser:t,userProfile:e}=Qt(),n=En(),r=na(),{cart:i,cartTotal:a,clearCart:o}=_u(),{createOrder:l}=o_(),[c,u]=p.useState("shipping"),[d,f]=p.useState(!1),[m,v]=p.useState(null),[y,w]=p.useState({}),[b,x]=p.useState({fullName:(e==null?void 0:e.displayName)||"",email:(e==null?void 0:e.email)||"",phone:(e==null?void 0:e.phone)||"",address:"",city:"",postalCode:"",country:"France",university:(e==null?void 0:e.university)||"",saveInfo:!0}),[g,_]=p.useState({}),[E,S]=p.useState(!1);p.useEffect(()=>{var P;i.length===0&&!((P=r.state)!=null&&P.directCheckout)&&(n("/cart"),ee.error("Votre panier est vide"))},[i,n,r]);const O=()=>{const P={};return b.fullName||(P.fullName="Nom complet requis"),b.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(b.email)||(P.email="Format d'email invalide"):P.email="Email requis",b.phone||(P.phone="Téléphone requis"),b.address||(P.address="Adresse requise"),b.city||(P.city="Ville requise"),b.postalCode||(P.postalCode="Code postal requis"),_(P),Object.keys(P).length===0},I=P=>{P.preventDefault(),O()&&(u("payment"),window.scrollTo(0,0))},k=(P,A)=>{v(P),w(A),P==="card"&&A.stripePaymentId&&(u("review"),window.scrollTo(0,0))},R=()=>{if(!m){ee.error("Veuillez sélectionner un mode de paiement");return}u("review"),window.scrollTo(0,0)},N=async()=>{if(!t){n("/auth");return}if(!E){ee.error("Veuillez accepter les conditions générales");return}f(!0);try{const P={userId:t.uid,items:i,total:a,shipping:b,payment:{method:m,details:y,transactionId:y.stripePaymentId},status:m==="card"?"processing":"pending"},A=await l(P);o(),n(`/order-confirmation/${A}`)}catch(P){console.error("Error placing order:",P),ee.error("Erreur lors de la création de la commande")}finally{f(!1)}};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs(B,{variant:"ghost",onClick:()=>n(-1),className:"-ml-4",children:[s.jsx(Wo,{className:"w-4 h-4 mr-2"}),"Retour"]}),s.jsx("h1",{className:"text-3xl font-bold mt-4",children:"Finaliser votre commande"}),s.jsxs("div",{className:"flex items-center mt-6",children:[s.jsxs("div",{className:`flex items-center ${c==="shipping"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${c==="shipping"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"1"}),s.jsx("span",{className:"ml-2 font-medium",children:"Livraison"})]}),s.jsx(Ks,{className:"mx-2 text-muted-foreground"}),s.jsxs("div",{className:`flex items-center ${c==="payment"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${c==="payment"||c==="review"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"2"}),s.jsx("span",{className:"ml-2 font-medium",children:"Paiement"})]}),s.jsx(Ks,{className:"mx-2 text-muted-foreground"}),s.jsxs("div",{className:`flex items-center ${c==="review"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${c==="review"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"3"}),s.jsx("span",{className:"ml-2 font-medium",children:"Vérification"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[c==="shipping"&&s.jsxs(K,{children:[s.jsxs(Ne,{children:[s.jsxs(Ce,{className:"flex items-center gap-2",children:[s.jsx(xv,{className:"w-5 h-5"}),"Informations de livraison"]}),s.jsx(nt,{children:"Entrez vos coordonnées pour la livraison"})]}),s.jsx(Y,{children:s.jsxs("form",{onSubmit:I,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs(oe,{htmlFor:"fullName",className:"flex items-center gap-1",children:[s.jsx(fr,{className:"w-4 h-4"}),"Nom complet *"]}),s.jsx(Ee,{id:"fullName",value:b.fullName,onChange:P=>x({...b,fullName:P.target.value}),className:g.fullName?"border-red-500":""}),g.fullName&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:g.fullName})]}),s.jsxs("div",{children:[s.jsxs(oe,{htmlFor:"email",className:"flex items-center gap-1",children:[s.jsx(Cr,{className:"w-4 h-4"}),"Email *"]}),s.jsx(Ee,{id:"email",type:"email",value:b.email,onChange:P=>x({...b,email:P.target.value}),className:g.email?"border-red-500":""}),g.email&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:g.email})]}),s.jsxs("div",{children:[s.jsxs(oe,{htmlFor:"phone",className:"flex items-center gap-1",children:[s.jsx(gu,{className:"w-4 h-4"}),"Téléphone *"]}),s.jsx(Ee,{id:"phone",value:b.phone,onChange:P=>x({...b,phone:P.target.value}),className:g.phone?"border-red-500":""}),g.phone&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:g.phone})]}),s.jsxs("div",{children:[s.jsxs(oe,{htmlFor:"university",className:"flex items-center gap-1",children:[s.jsx(lr,{className:"w-4 h-4"}),"Université"]}),s.jsx(Ee,{id:"university",value:b.university,onChange:P=>x({...b,university:P.target.value})})]})]}),s.jsxs("div",{children:[s.jsxs(oe,{htmlFor:"address",className:"flex items-center gap-1",children:[s.jsx(lr,{className:"w-4 h-4"}),"Adresse *"]}),s.jsx(Ee,{id:"address",value:b.address,onChange:P=>x({...b,address:P.target.value}),className:g.address?"border-red-500":""}),g.address&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:g.address})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsxs(oe,{htmlFor:"city",className:"flex items-center gap-1",children:[s.jsx(lr,{className:"w-4 h-4"}),"Ville *"]}),s.jsx(Ee,{id:"city",value:b.city,onChange:P=>x({...b,city:P.target.value}),className:g.city?"border-red-500":""}),g.city&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:g.city})]}),s.jsxs("div",{children:[s.jsxs(oe,{htmlFor:"postalCode",className:"flex items-center gap-1",children:[s.jsx(lr,{className:"w-4 h-4"}),"Code postal *"]}),s.jsx(Ee,{id:"postalCode",value:b.postalCode,onChange:P=>x({...b,postalCode:P.target.value}),className:g.postalCode?"border-red-500":""}),g.postalCode&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:g.postalCode})]}),s.jsxs("div",{children:[s.jsxs(oe,{htmlFor:"country",className:"flex items-center gap-1",children:[s.jsx(lr,{className:"w-4 h-4"}),"Pays *"]}),s.jsx(Ee,{id:"country",value:b.country,onChange:P=>x({...b,country:P.target.value}),disabled:!0})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 mt-4",children:[s.jsx(bg,{id:"saveInfo",checked:b.saveInfo,onCheckedChange:P=>x({...b,saveInfo:P})}),s.jsx(oe,{htmlFor:"saveInfo",children:"Sauvegarder ces informations pour mes prochaines commandes"})]}),s.jsx("div",{className:"pt-4 flex justify-end",children:s.jsxs(B,{type:"submit",className:"w-full md:w-auto",children:["Continuer vers le paiement",s.jsx(Ks,{className:"ml-2 h-4 w-4"})]})})]})})]}),c==="payment"&&s.jsxs(K,{children:[s.jsxs(Ne,{children:[s.jsxs(Ce,{className:"flex items-center gap-2",children:[s.jsx(an,{className:"w-5 h-5"}),"Méthode de paiement"]}),s.jsx(nt,{children:"Choisissez votre mode de paiement préféré"})]}),s.jsx(Y,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsx(HD,{amount:a,currency:"EUR",onMethodSelect:k,selectedMethod:m}),s.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[s.jsxs(B,{variant:"outline",onClick:()=>u("shipping"),children:[s.jsx(Wo,{className:"mr-2 h-4 w-4"}),"Retour"]}),s.jsxs(B,{onClick:R,disabled:!m||m==="card"&&!y.stripePaymentId,children:["Vérifier la commande",s.jsx(Ks,{className:"ml-2 h-4 w-4"})]})]})]})})]}),c==="review"&&s.jsxs(K,{children:[s.jsxs(Ne,{children:[s.jsxs(Ce,{className:"flex items-center gap-2",children:[s.jsx(Je,{className:"w-5 h-5"}),"Vérification de la commande"]}),s.jsx(nt,{children:"Vérifiez les détails de votre commande avant de confirmer"})]}),s.jsx(Y,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"font-semibold",children:"Informations de livraison"}),s.jsx(B,{variant:"ghost",size:"sm",onClick:()=>u("shipping"),children:"Modifier"})]}),s.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[s.jsx("p",{className:"font-medium",children:b.fullName}),s.jsx("p",{children:b.address}),s.jsxs("p",{children:[b.postalCode," ",b.city,", ",b.country]}),s.jsx("p",{children:b.email}),s.jsx("p",{children:b.phone})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"font-semibold",children:"Méthode de paiement"}),s.jsx(B,{variant:"ghost",size:"sm",onClick:()=>u("payment"),children:"Modifier"})]}),s.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[s.jsxs("p",{className:"font-medium",children:[m==="card"&&"Carte bancaire",m==="paypal"&&"PayPal",m==="transfer"&&"Virement bancaire",m==="cash"&&"Paiement à la livraison",m==="lydia"&&"Lydia"]}),m==="card"&&y.stripePaymentId&&s.jsxs("p",{className:"text-green-600 text-sm",children:[s.jsx(Je,{className:"w-3 h-3 inline mr-1"}),"Paiement autorisé"]}),m==="paypal"&&y.paypalEmail&&s.jsx("p",{children:y.paypalEmail}),m==="lydia"&&y.lydiaPhone&&s.jsx("p",{children:y.lydiaPhone})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold mb-2",children:["Articles (",i.length,")"]}),s.jsx("div",{className:"space-y-3",children:i.map(P=>s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg",children:[P.image&&s.jsx("img",{src:P.image,alt:P.name,className:"w-16 h-16 object-cover rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:P.name}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantité: ",P.quantity]})]}),s.jsx("p",{className:"font-semibold",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(P.price*P.quantity)})]},P.id))})]}),s.jsx("div",{className:"pt-4 border-t",children:s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx(bg,{id:"terms",checked:E,onCheckedChange:P=>S(P)}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"terms",className:"font-medium",children:"J'accepte les conditions générales de vente"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"En passant commande, vous acceptez nos conditions générales de vente et notre politique de confidentialité."})]})]})}),s.jsxs("div",{className:"flex justify-between pt-4",children:[s.jsxs(B,{variant:"outline",onClick:()=>u("payment"),children:[s.jsx(Wo,{className:"mr-2 h-4 w-4"}),"Retour"]}),s.jsx(B,{onClick:N,disabled:d||!E,className:"bg-gradient-to-r from-primary to-secondary",children:d?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Traitement..."]}):s.jsxs(s.Fragment,{children:[s.jsx(hl,{className:"mr-2 h-4 w-4"}),"Confirmer la commande"]})})]})]})})]})]}),s.jsxs("div",{children:[s.jsx(F3,{cart:i,total:a,showCheckoutButton:!1}),s.jsxs(pt,{className:"mt-4 border-blue-200 bg-blue-50",children:[s.jsx(ft,{className:"h-4 w-4 text-blue-600"}),s.jsxs(gt,{className:"text-blue-800",children:[s.jsx("strong",{children:"Paiement sécurisé :"})," Toutes vos informations sont cryptées et sécurisées."]})]}),s.jsx(K,{className:"mt-4",children:s.jsx(Y,{className:"pt-6",children:s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(eo,{className:"w-5 h-5 text-muted-foreground mt-0.5"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium",children:"Besoin d'aide ?"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Notre équipe est disponible 7j/7 pour vous aider avec votre commande."}),s.jsx(B,{variant:"link",className:"p-0 h-auto text-sm",children:"Contacter le support"})]})]})})})})]})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:s.jsx(K,{children:s.jsxs(Y,{className:"pt-6",children:[s.jsx(to,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour finaliser votre achat"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous devez être connecté pour accéder au processus de paiement"}),s.jsx(B,{onClick:()=>n("/auth"),children:"Se connecter"})]})})})},Sae=()=>{const{currentUser:t}=Qt(),{orders:e,fetchUserOrders:n,loading:r}=o_(),i=En(),[a,o]=p.useState(""),[l,c]=p.useState("all"),[u,d]=p.useState("date-desc"),[f,m]=p.useState("all");p.useEffect(()=>{t&&n(t.uid)},[t,n]);const v=()=>e.filter(x=>{const g=!a||x.id.toLowerCase().includes(a.toLowerCase()),_=l==="all"||x.status===l;let E=!0;if(f!=="all"){const S=new Date(x.createdAt),O=new Date;if(f==="last-30-days"){const I=new Date;I.setDate(O.getDate()-30),E=S>=I}else if(f==="last-6-months"){const I=new Date;I.setMonth(O.getMonth()-6),E=S>=I}}return g&&_&&E}).sort((x,g)=>u==="date-desc"?new Date(g.createdAt).getTime()-new Date(x.createdAt).getTime():u==="date-asc"?new Date(x.createdAt).getTime()-new Date(g.createdAt).getTime():u==="total-desc"?g.total-x.total:u==="total-asc"?x.total-g.total:0),y=x=>{switch(x){case"pending":return s.jsxs(Ae,{className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:[s.jsx(ln,{className:"w-3 h-3 mr-1"}),"En attente"]});case"processing":return s.jsxs(Ae,{className:"bg-blue-100 text-blue-800 border-blue-200",children:[s.jsx(Ft,{className:"w-3 h-3 mr-1"}),"En traitement"]});case"shipped":return s.jsxs(Ae,{className:"bg-purple-100 text-purple-800 border-purple-200",children:[s.jsx(xv,{className:"w-3 h-3 mr-1"}),"Expédiée"]});case"delivered":return s.jsxs(Ae,{className:"bg-green-100 text-green-800 border-green-200",children:[s.jsx(Je,{className:"w-3 h-3 mr-1"}),"Livrée"]});case"cancelled":return s.jsxs(Ae,{className:"bg-red-100 text-red-800 border-red-200",children:[s.jsx(Wc,{className:"w-3 h-3 mr-1"}),"Annulée"]});default:return s.jsx(Ae,{children:x})}},w=x=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(x),b=()=>{const x={user:(t==null?void 0:t.displayName)||(t==null?void 0:t.email),date:new Date().toISOString(),orders:e.map(S=>({id:S.id,date:S.createdAt,status:S.status,total:S.total,items:S.items.length}))},g=new Blob([JSON.stringify(x,null,2)],{type:"application/json"}),_=URL.createObjectURL(g),E=document.createElement("a");E.href=_,E.download=`commandes-${new Date().toISOString().slice(0,10)}.json`,E.click(),URL.revokeObjectURL(_)};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(Ft,{className:"w-8 h-8"}),"Mes Commandes"]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Suivez et gérez toutes vos commandes"})]}),s.jsxs(B,{variant:"outline",onClick:b,className:"flex items-center gap-2",children:[s.jsx(ss,{className:"w-4 h-4"}),"Exporter"]})]}),s.jsx(K,{children:s.jsx(Y,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Dn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(Ee,{placeholder:"Rechercher par numéro de commande...",value:a,onChange:x=>o(x.target.value),className:"pl-10"})]}),s.jsxs(Et,{value:l,onValueChange:c,children:[s.jsx(wt,{className:"w-40",children:s.jsx(Ct,{placeholder:"Statut"})}),s.jsxs(bt,{children:[s.jsx(be,{value:"all",children:"Tous les statuts"}),s.jsx(be,{value:"pending",children:"En attente"}),s.jsx(be,{value:"processing",children:"En traitement"}),s.jsx(be,{value:"shipped",children:"Expédiée"}),s.jsx(be,{value:"delivered",children:"Livrée"}),s.jsx(be,{value:"cancelled",children:"Annulée"})]})]}),s.jsxs(Et,{value:f,onValueChange:m,children:[s.jsx(wt,{className:"w-40",children:s.jsx(Ct,{placeholder:"Période"})}),s.jsxs(bt,{children:[s.jsx(be,{value:"all",children:"Toutes les périodes"}),s.jsx(be,{value:"last-30-days",children:"30 derniers jours"}),s.jsx(be,{value:"last-6-months",children:"6 derniers mois"})]})]}),s.jsxs(Et,{value:u,onValueChange:d,children:[s.jsx(wt,{className:"w-40",children:s.jsx(Ct,{placeholder:"Trier par"})}),s.jsxs(bt,{children:[s.jsx(be,{value:"date-desc",children:"Date (récent → ancien)"}),s.jsx(be,{value:"date-asc",children:"Date (ancien → récent)"}),s.jsx(be,{value:"total-desc",children:"Prix (élevé → bas)"}),s.jsx(be,{value:"total-asc",children:"Prix (bas → élevé)"})]})]})]})})}),s.jsxs(Pl,{defaultValue:"all",className:"space-y-4",children:[s.jsxs(jo,{className:"grid w-full grid-cols-4",children:[s.jsx(Ot,{value:"all",children:"Toutes"}),s.jsx(Ot,{value:"active",children:"En cours"}),s.jsx(Ot,{value:"completed",children:"Terminées"}),s.jsx(Ot,{value:"cancelled",children:"Annulées"})]}),s.jsx(Lt,{value:"all",className:"space-y-4",children:r?s.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((x,g)=>s.jsx(K,{className:"animate-pulse",children:s.jsxs(Y,{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between mb-4",children:[s.jsx("div",{className:"h-6 bg-muted rounded w-1/4"}),s.jsx("div",{className:"h-6 bg-muted rounded w-1/6"})]}),s.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"})]})},g))}):v().length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Ft,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande trouvée"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:e.length===0?"Vous n'avez pas encore passé de commande.":"Aucune commande ne correspond à vos critères de recherche."}),s.jsx(B,{asChild:!0,children:s.jsxs(fe,{to:"/listings",children:[s.jsx(Ko,{className:"w-4 h-4 mr-2"}),"Parcourir les produits"]})})]}):s.jsx("div",{className:"space-y-4",children:v().map(x=>s.jsx(K,{className:"hover:shadow-md transition-shadow",children:s.jsxs(Y,{className:"p-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs("h3",{className:"font-semibold",children:["Commande #",x.id.slice(0,8)]}),y(x.status)]}),s.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[s.jsx(ys,{className:"w-3 h-3"}),_n(new Date(x.createdAt),"dd MMMM yyyy",{locale:Qn})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold",children:w(x.total)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[x.items.length," article",x.items.length>1?"s":""]})]}),s.jsx(B,{asChild:!0,children:s.jsxs(fe,{to:`/order/${x.id}`,children:["Détails",s.jsx(Ks,{className:"ml-1 w-4 h-4"})]})})]})]}),s.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[x.items.slice(0,4).map((g,_)=>s.jsx("div",{className:"flex-shrink-0",children:g.image?s.jsx("img",{src:g.image,alt:g.name,className:"w-16 h-16 object-cover rounded"}):s.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsx(Ft,{className:"w-6 h-6 text-muted-foreground"})})},_)),x.items.length>4&&s.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsxs("span",{className:"text-sm font-medium",children:["+",x.items.length-4]})})]})]})},x.id))})}),s.jsx(Lt,{value:"active",className:"space-y-4",children:v().filter(x=>["pending","processing","shipped"].includes(x.status)).length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(ln,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande en cours"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas de commandes en cours de traitement."})]}):s.jsx("div",{className:"space-y-4",children:v().filter(x=>["pending","processing","shipped"].includes(x.status)).map(x=>s.jsx(K,{className:"hover:shadow-md transition-shadow",children:s.jsxs(Y,{className:"p-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs("h3",{className:"font-semibold",children:["Commande #",x.id.slice(0,8)]}),y(x.status)]}),s.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[s.jsx(ys,{className:"w-3 h-3"}),_n(new Date(x.createdAt),"dd MMMM yyyy",{locale:Qn})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold",children:w(x.total)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[x.items.length," article",x.items.length>1?"s":""]})]}),s.jsx(B,{asChild:!0,children:s.jsxs(fe,{to:`/order/${x.id}`,children:["Détails",s.jsx(Ks,{className:"ml-1 w-4 h-4"})]})})]})]}),s.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[x.items.slice(0,4).map((g,_)=>s.jsx("div",{className:"flex-shrink-0",children:g.image?s.jsx("img",{src:g.image,alt:g.name,className:"w-16 h-16 object-cover rounded"}):s.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsx(Ft,{className:"w-6 h-6 text-muted-foreground"})})},_)),x.items.length>4&&s.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsxs("span",{className:"text-sm font-medium",children:["+",x.items.length-4]})})]})]})},x.id))})}),s.jsx(Lt,{value:"completed",className:"space-y-4",children:v().filter(x=>x.status==="delivered").length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Je,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande terminée"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas encore de commandes livrées."})]}):s.jsx("div",{className:"space-y-4",children:v().filter(x=>x.status==="delivered").map(x=>s.jsx(K,{className:"hover:shadow-md transition-shadow",children:s.jsxs(Y,{className:"p-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs("h3",{className:"font-semibold",children:["Commande #",x.id.slice(0,8)]}),y(x.status)]}),s.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[s.jsx(ys,{className:"w-3 h-3"}),_n(new Date(x.createdAt),"dd MMMM yyyy",{locale:Qn})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold",children:w(x.total)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[x.items.length," article",x.items.length>1?"s":""]})]}),s.jsx(B,{asChild:!0,children:s.jsxs(fe,{to:`/order/${x.id}`,children:["Détails",s.jsx(Ks,{className:"ml-1 w-4 h-4"})]})})]})]}),s.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[x.items.slice(0,4).map((g,_)=>s.jsx("div",{className:"flex-shrink-0",children:g.image?s.jsx("img",{src:g.image,alt:g.name,className:"w-16 h-16 object-cover rounded"}):s.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsx(Ft,{className:"w-6 h-6 text-muted-foreground"})})},_)),x.items.length>4&&s.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsxs("span",{className:"text-sm font-medium",children:["+",x.items.length-4]})})]})]})},x.id))})}),s.jsx(Lt,{value:"cancelled",className:"space-y-4",children:v().filter(x=>x.status==="cancelled").length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Wc,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande annulée"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas de commandes annulées."})]}):s.jsx("div",{className:"space-y-4",children:v().filter(x=>x.status==="cancelled").map(x=>s.jsx(K,{className:"hover:shadow-md transition-shadow",children:s.jsxs(Y,{className:"p-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs("h3",{className:"font-semibold",children:["Commande #",x.id.slice(0,8)]}),y(x.status)]}),s.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[s.jsx(ys,{className:"w-3 h-3"}),_n(new Date(x.createdAt),"dd MMMM yyyy",{locale:Qn})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold",children:w(x.total)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[x.items.length," article",x.items.length>1?"s":""]})]}),s.jsx(B,{asChild:!0,children:s.jsxs(fe,{to:`/order/${x.id}`,children:["Détails",s.jsx(Ks,{className:"ml-1 w-4 h-4"})]})})]})]}),s.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[x.items.slice(0,4).map((g,_)=>s.jsx("div",{className:"flex-shrink-0",children:g.image?s.jsx("img",{src:g.image,alt:g.name,className:"w-16 h-16 object-cover rounded"}):s.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsx(Ft,{className:"w-6 h-6 text-muted-foreground"})})},_)),x.items.length>4&&s.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsxs("span",{className:"text-sm font-medium",children:["+",x.items.length-4]})})]})]})},x.id))})})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:s.jsx(K,{children:s.jsxs(Y,{className:"pt-6",children:[s.jsx(Ft,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir vos commandes"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous devez être connecté pour accéder à l'historique de vos commandes"}),s.jsx(B,{onClick:()=>i("/auth"),children:"Se connecter"})]})})})},Eae=()=>{var d,f;const{orderId:t}=P1(),{getOrderById:e}=o_(),[n,r]=p.useState(null),[i,a]=p.useState(!0);p.useEffect(()=>{(async()=>{if(t)try{a(!0);const v=await e(t);r(v)}catch(v){console.error("Error loading order:",v)}finally{a(!1)}})()},[t,e]);const o=m=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(m),l=m=>({card:"Carte bancaire",paypal:"PayPal",transfer:"Virement bancaire",cash:"Paiement à la livraison"})[m]||m,c=()=>{const m=new Date,v=new Date(m);return v.setDate(m.getDate()+3),_n(v,"EEEE d MMMM",{locale:Qn})},u=()=>{navigator.clipboard.writeText(t||""),ee.success("Numéro de commande copié !")};return i?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx("div",{className:"max-w-3xl mx-auto",children:s.jsxs("div",{className:"animate-pulse space-y-4",children:[s.jsx("div",{className:"h-8 bg-muted rounded w-3/4 mx-auto"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2 mx-auto"}),s.jsx("div",{className:"h-32 bg-muted rounded"}),s.jsx("div",{className:"h-64 bg-muted rounded"})]})})}):n?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"max-w-3xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Je,{className:"w-8 h-8 text-green-600"})}),s.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Commande confirmée !"}),s.jsxs("p",{className:"text-muted-foreground",children:["Merci pour votre commande. Vous recevrez un email de confirmation à ",n.shipping.email,"."]})]}),s.jsxs(K,{className:"mb-6",children:[s.jsx(Ne,{children:s.jsxs(Ce,{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(Ft,{className:"w-5 h-5"}),"Détails de la commande"]}),s.jsx(Ae,{className:"bg-green-100 text-green-800 border-green-200",children:n.status==="pending"?"En attente":n.status==="processing"?"En traitement":n.status==="shipped"?"Expédiée":n.status==="delivered"?"Livrée":"Confirmée"})]})}),s.jsx(Y,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Numéro de commande"}),s.jsxs("p",{className:"font-medium flex items-center gap-2",children:[t,s.jsx(B,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:u,children:s.jsx(AA,{className:"h-3 w-3"})})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Date"}),s.jsx("p",{className:"font-medium",children:_n(new Date(n.createdAt),"dd/MM/yyyy")})]})]}),s.jsx(Zr,{}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Articles"}),s.jsx("div",{className:"space-y-3",children:n.items.map((m,v)=>s.jsxs("div",{className:"flex items-center gap-3",children:[m.image&&s.jsx("img",{src:m.image,alt:m.name,className:"w-16 h-16 object-cover rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:m.name}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantité: ",m.quantity]})]}),s.jsx("p",{className:"font-semibold",children:o(m.price*m.quantity)})]},v))})]}),s.jsx(Zr,{}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Sous-total"}),s.jsx("span",{children:o(n.total)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Livraison"}),s.jsx("span",{className:"text-green-600",children:"Gratuite"})]}),s.jsxs("div",{className:"flex justify-between font-bold",children:[s.jsx("span",{children:"Total"}),s.jsx("span",{children:o(n.total)})]})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[s.jsxs(K,{children:[s.jsx(Ne,{children:s.jsxs(Ce,{className:"flex items-center gap-2 text-base",children:[s.jsx(xv,{className:"w-4 h-4"}),"Livraison"]})}),s.jsx(Y,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"font-medium",children:n.shipping.fullName}),s.jsx("p",{children:n.shipping.address}),s.jsxs("p",{children:[n.shipping.postalCode," ",n.shipping.city,", ",n.shipping.country]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:n.shipping.phone}),s.jsx("div",{className:"pt-2 mt-2 border-t",children:s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(ys,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("span",{children:["Livraison estimée: ",c()]})]})})]})})]}),s.jsxs(K,{children:[s.jsx(Ne,{children:s.jsxs(Ce,{className:"flex items-center gap-2 text-base",children:[s.jsx(an,{className:"w-4 h-4"}),"Paiement"]})}),s.jsx(Y,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"font-medium",children:l(n.payment.method)}),n.payment.method==="card"&&((d=n.payment.details)==null?void 0:d.cardNumber)&&s.jsxs("p",{children:["Carte se terminant par ",n.payment.details.cardNumber.slice(-4)]}),n.payment.method==="paypal"&&((f=n.payment.details)==null?void 0:f.paypalEmail)&&s.jsx("p",{children:n.payment.details.paypalEmail}),n.payment.method==="transfer"&&s.jsxs(pt,{className:"mt-2",children:[s.jsx(Jt,{className:"h-4 w-4"}),s.jsx(gt,{children:"Veuillez effectuer le virement dans les 48h pour valider votre commande."})]}),s.jsx("div",{className:"pt-2 mt-2 border-t",children:s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(ln,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("span",{children:["Statut: ",n.status==="pending"?"En attente":"Confirmé"]})]})})]})})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsx(B,{variant:"outline",className:"flex-1",asChild:!0,children:s.jsxs(fe,{to:"/orders",children:[s.jsx(Ft,{className:"mr-2 h-4 w-4"}),"Mes commandes"]})}),s.jsxs(B,{variant:"outline",className:"flex-1",children:[s.jsx(ss,{className:"mr-2 h-4 w-4"}),"Télécharger la facture"]}),s.jsx(B,{className:"flex-1 bg-gradient-to-r from-primary to-secondary",asChild:!0,children:s.jsxs(fe,{to:"/listings",children:[s.jsx(Ko,{className:"mr-2 h-4 w-4"}),"Continuer mes achats"]})})]}),s.jsxs("div",{className:"mt-8 text-center",children:[s.jsx("p",{className:"text-muted-foreground mb-2",children:"Besoin d'aide avec votre commande ?"}),s.jsxs("div",{className:"flex justify-center gap-4",children:[s.jsxs(B,{variant:"link",className:"text-primary",children:[s.jsx(Cr,{className:"mr-2 h-4 w-4"}),"Contacter le support"]}),s.jsxs(B,{variant:"link",className:"text-primary",children:[s.jsx(hh,{className:"mr-2 h-4 w-4"}),"FAQ"]})]})]})]})}):s.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:s.jsx(K,{children:s.jsxs(Y,{className:"pt-6",children:[s.jsx(Jt,{className:"w-12 h-12 text-orange-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Commande introuvable"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Nous n'avons pas pu trouver les détails de cette commande."}),s.jsx(B,{asChild:!0,children:s.jsx(fe,{to:"/orders",children:"Voir mes commandes"})})]})})})},Cae=({id:t,name:e,description:n,price:r,currency:i,image:a,mode:o})=>{const{currentUser:l}=Qt(),{addToCart:c}=_u(),u=En(),d=(v,y)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:y}).format(v),f=()=>{if(!l){ee.error("Veuillez vous connecter pour ajouter au panier"),u("/auth");return}c({id:t,name:e,price:r,image:a,seller:"StudyMarket",sellerId:"system",listingId:t})},m=()=>{if(!l){ee.error("Veuillez vous connecter pour acheter"),u("/auth");return}c({id:t,name:e,price:r,image:a,seller:"StudyMarket",sellerId:"system",listingId:t}),u("/checkout")};return s.jsxs(K,{className:"overflow-hidden transition-all hover:shadow-lg",children:[s.jsxs("div",{className:"aspect-video relative overflow-hidden",children:[a?s.jsx("img",{src:a,alt:e,className:"w-full h-full object-cover transition-transform hover:scale-105"}):s.jsx("div",{className:"w-full h-full bg-muted flex items-center justify-center",children:s.jsx(eW,{className:"w-12 h-12 text-muted-foreground"})}),s.jsx(Ae,{className:"absolute top-2 right-2 bg-primary",children:o==="subscription"?"Abonnement":"Achat unique"})]}),s.jsxs(Ne,{children:[s.jsx(Ce,{children:e}),s.jsx(nt,{children:n})]}),s.jsx(Y,{children:s.jsxs("div",{className:"text-2xl font-bold text-primary",children:[d(r,i),o==="subscription"&&s.jsx("span",{className:"text-sm text-muted-foreground ml-1",children:"/mois"})]})}),s.jsxs(F4,{className:"flex gap-2",children:[s.jsxs(B,{variant:"outline",className:"flex-1",onClick:f,children:[s.jsx(to,{className:"w-4 h-4 mr-2"}),"Ajouter"]}),s.jsx(B,{className:"flex-1 bg-gradient-to-r from-primary to-secondary",onClick:m,children:"Acheter"})]})]})},Pw=[{id:"prod_ST3q24zsLbS28p",name:"Bicyclette",description:"Vélo",priceId:"price_1RY7iN2XLhzYQhT9ErigqaGg",price:10,currency:"EUR",mode:"payment",image:"https://images.pexels.com/photos/100582/pexels-photo-100582.jpeg?auto=compress&cs=tinysrgb&w=800"}],Tae=t=>Pw.find(e=>e.priceId===t),U3="pk_test_51O5JqHLVDYKrxBIwIyiUQOmNk9HFZJKvBz6zJyRNBNjkKSGVEvZKEwlKnwL2JV8PmXVjWSHoZ9XQfKOiLkXGZ9Nh00wPxKdm9p";DD(U3);const kae={isConfigured:!0,key:`${U3.substring(0,8)}...`};async function Iae(){return{customer_id:"cus_mock123",subscription_id:"sub_mock123",subscription_status:"active",price_id:"price_1RY7iN2XLhzYQhT9ErigqaGg",current_period_start:Math.floor(Date.now()/1e3)-86400*15,current_period_end:Math.floor(Date.now()/1e3)+86400*15,cancel_at_period_end:!1,payment_method_brand:"visa",payment_method_last4:"4242"}}async function Pae(){return[{order_id:"ord_mock123",checkout_session_id:"cs_mock123",payment_intent_id:"pi_mock123",amount_subtotal:1e3,amount_total:1e3,currency:"eur",payment_status:"paid",order_status:"completed",order_date:new Date().toISOString()}]}const Aae=()=>{const{getCartItemCount:t}=_u(),e=En(),n=t();return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs(B,{variant:"ghost",onClick:()=>e(-1),className:"-ml-4",children:[s.jsx(Wo,{className:"w-4 h-4 mr-2"}),"Retour"]}),s.jsxs("div",{className:"flex items-center justify-between mt-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(Ko,{className:"w-8 h-8"}),"Boutique"]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Découvrez nos produits et services"})]}),n>0&&s.jsxs(B,{onClick:()=>e("/cart"),className:"flex items-center gap-2",children:[s.jsx(to,{className:"w-4 h-4"}),"Panier (",n,")"]})]})]}),!kae.isConfigured,s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Pw.map(r=>s.jsx(Cae,{id:r.id,name:r.name,description:r.description,price:r.price,currency:r.currency,image:r.image,mode:r.mode},r.id))}),Pw.length===0&&s.jsx(K,{className:"text-center py-12",children:s.jsxs(Y,{className:"pt-6",children:[s.jsx(Ft,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Aucun produit disponible"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Revenez bientôt pour découvrir nos nouveaux produits."})]})})]})},Rae=()=>{const[t]=A1(),e=En(),{currentUser:n}=Qt(),{clearCart:r}=_u(),[i,a]=p.useState(!0),[o,l]=p.useState(null),[c,u]=p.useState(null),[d,f]=p.useState(null),m=t.get("session_id"),v=t.get("type")==="subscription";p.useEffect(()=>{r();async function w(){if(n)try{if(a(!0),v){const x=await Iae();l(x)}else{const g=(await Pae())[0];u(g)}}catch(x){console.error("Error fetching checkout result:",x),f("Impossible de charger les détails de votre achat")}finally{a(!1)}}const b=setTimeout(()=>{w()},2e3);return()=>clearTimeout(b)},[n,v,m,r]);const y=()=>{if(v&&(o!=null&&o.price_id)){const w=Tae(o.price_id);return w?w.name:"Abonnement"}else if(c)return"Commande";return"Achat"};return n?i?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"max-w-md mx-auto text-center",children:[s.jsx(Yn,{className:"w-12 h-12 animate-spin text-primary mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Traitement de votre paiement..."}),s.jsx("p",{className:"text-muted-foreground",children:"Veuillez patienter pendant que nous confirmons votre transaction."})]})}):d?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"max-w-md mx-auto",children:[s.jsxs(pt,{className:"border-red-200 bg-red-50",children:[s.jsx(Jt,{className:"h-4 w-4 text-red-600"}),s.jsx(gt,{className:"text-red-800",children:d})]}),s.jsx("div",{className:"mt-4 text-center",children:s.jsx(B,{asChild:!0,children:s.jsx(fe,{to:"/",children:"Retour à l'accueil"})})})]})}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"max-w-md mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Je,{className:"w-8 h-8 text-green-600"})}),s.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Merci pour votre achat !"}),s.jsxs("p",{className:"text-muted-foreground",children:["Votre ",v?"abonnement":"commande"," a été confirmé",v?"":"e","."]})]}),s.jsxs(K,{className:"mb-6",children:[s.jsx(Ne,{children:s.jsxs(Ce,{className:"flex items-center gap-2",children:[v?s.jsx(an,{className:"w-5 h-5"}):s.jsx(Ft,{className:"w-5 h-5"}),y()]})}),s.jsx(Y,{children:s.jsx("div",{className:"space-y-4",children:v&&o?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Statut:"}),s.jsx("span",{className:"font-medium",children:o.subscription_status==="active"?"Actif":o.subscription_status==="trialing"?"Période d'essai":o.subscription_status})]}),o.current_period_end&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Prochain renouvellement:"}),s.jsx("span",{className:"font-medium",children:new Date(o.current_period_end*1e3).toLocaleDateString("fr-FR")})]}),o.payment_method_brand&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Méthode de paiement:"}),s.jsxs("span",{className:"font-medium",children:[o.payment_method_brand.toUpperCase()," •••• ",o.payment_method_last4]})]})]}):c?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Numéro de commande:"}),s.jsx("span",{className:"font-medium",children:c.order_id})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Date:"}),s.jsx("span",{className:"font-medium",children:new Date(c.order_date).toLocaleDateString("fr-FR")})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Montant:"}),s.jsx("span",{className:"font-medium",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:c.currency}).format(c.amount_total/100)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Statut:"}),s.jsx("span",{className:"font-medium",children:c.order_status==="completed"?"Complété":c.order_status==="pending"?"En attente":c.order_status})]})]}):s.jsx("p",{children:"Merci pour votre achat. Vous recevrez un email de confirmation."})})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs(pt,{className:"bg-blue-50 border-blue-200",children:[s.jsx(ys,{className:"h-4 w-4 text-blue-600"}),s.jsx(gt,{className:"text-blue-800",children:v?"Vous pouvez gérer votre abonnement à tout moment depuis votre compte.":"Vous recevrez un email de confirmation avec les détails de votre commande."})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsx(B,{variant:"outline",className:"flex-1",asChild:!0,children:s.jsxs(fe,{to:"/orders",children:[s.jsx(Ft,{className:"mr-2 h-4 w-4"}),"Mes commandes"]})}),s.jsx(B,{className:"flex-1 bg-gradient-to-r from-primary to-secondary",asChild:!0,children:s.jsxs(fe,{to:"/products",children:[s.jsx(Ko,{className:"mr-2 h-4 w-4"}),"Continuer mes achats",s.jsx(hh,{className:"ml-2 h-4 w-4"})]})})]})]})]})}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"max-w-md mx-auto",children:[s.jsxs(pt,{className:"border-orange-200 bg-orange-50",children:[s.jsx(Jt,{className:"h-4 w-4 text-orange-600"}),s.jsx(gt,{className:"text-orange-800",children:"Vous devez être connecté pour voir les détails de votre achat."})]}),s.jsx("div",{className:"mt-4 text-center",children:s.jsx(B,{onClick:()=>e("/auth"),children:"Se connecter"})})]})})},Mae=[{value:"electronics",label:"Électronique"},{value:"books",label:"Livres & Cours"},{value:"furniture",label:"Mobilier"},{value:"clothing",label:"Vêtements"},{value:"services",label:"Services"},{value:"housing",label:"Logement"},{value:"jobs",label:"Jobs & Stages"},{value:"donations",label:"Dons"},{value:"exchange",label:"Troc"}],Dae=()=>{const{id:t}=P1(),e=En(),{currentUser:n}=Qt(),{fetchListingById:r,updateListing:i,currentListing:a,loading:o}=pf(),[l,c]=p.useState({title:"",description:"",price:"",images:[]}),[u,d]=p.useState([]),[f,m]=p.useState(!1),[v,y]=p.useState(null),[w,b]=p.useState(""),[x,g]=p.useState([]),[_,E]=p.useState("");p.useEffect(()=>{t&&r(t)},[t,r]),p.useEffect(()=>{var A;a&&(c({title:a.title||"",description:a.description||"",price:((A=a.price)==null?void 0:A.toString())||"",images:a.images||[]}),b(a.category||""),g(a.tags||[]))},[a]);const S=A=>{c({...l,[A.target.name]:A.target.value})},O=A=>{if(!A.target.files)return;const T=Array.from(A.target.files);d(U=>[...U,...T])},I=A=>{c({...l,images:l.images.filter((T,U)=>U!==A)})},k=A=>{d(u.filter((T,U)=>U!==A))},R=()=>{_.trim()&&!x.includes(_.trim())&&x.length<5&&(g([...x,_.trim()]),E(""))},N=A=>{g(x.filter(T=>T!==A))},P=async A=>{if(A.preventDefault(),!(!t||!n)){m(!0);try{let T=[];u.length>0&&(T=await Promise.all(u.map(H=>Oae(H,n.uid))));const U=[...l.images,...T];await i(t,{...l,price:parseFloat(l.price),images:U,category:w,tags:x}),e(`/listing/${t}`)}catch{y("Erreur lors de la mise à jour de l'annonce")}finally{m(!1)}}};return o?s.jsx("div",{children:"Chargement..."}):a?v?s.jsx("div",{className:"text-red-500",children:v}):s.jsx("form",{onSubmit:P,className:"max-w-lg mx-auto mt-10",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 border border-gray-100",children:[s.jsx("h2",{className:"text-2xl font-bold mb-8 text-center",children:"Modifier mon annonce"}),s.jsxs("div",{className:"mb-5",children:[s.jsx(oe,{htmlFor:"title",className:"block mb-1 text-gray-700",children:"Titre"}),s.jsx(Ee,{id:"title",name:"title",value:l.title,onChange:S,placeholder:"Titre",className:"w-full"})]}),s.jsxs("div",{className:"mb-5",children:[s.jsx(oe,{htmlFor:"description",className:"block mb-1 text-gray-700",children:"Description"}),s.jsx(Cs,{id:"description",name:"description",value:l.description,onChange:S,placeholder:"Description",className:"w-full",rows:4})]}),s.jsxs("div",{className:"mb-5",children:[s.jsx(oe,{htmlFor:"price",className:"block mb-1 text-gray-700",children:"Prix (€)"}),s.jsx(Ee,{id:"price",name:"price",value:l.price,onChange:S,placeholder:"Prix",type:"number",min:0,className:"w-full"})]}),s.jsxs("div",{className:"mb-5",children:[s.jsx(oe,{htmlFor:"category",className:"block mb-1 text-gray-700",children:"Catégorie"}),s.jsxs("select",{id:"category",name:"category",value:w,onChange:A=>b(A.target.value),className:"w-full border rounded px-3 py-2 bg-gray-50",required:!0,children:[s.jsx("option",{value:"",children:"Sélectionnez une catégorie"}),Mae.map(A=>s.jsx("option",{value:A.value,children:A.label},A.value))]})]}),s.jsxs("div",{className:"mb-5",children:[s.jsx(oe,{className:"block mb-1 text-gray-700",children:"Tags (max 5)"}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:x.map(A=>s.jsxs("span",{className:"bg-gray-100 rounded px-2 py-1 flex items-center gap-1 text-sm",children:[A,s.jsx(B,{type:"button",size:"icon",variant:"ghost",className:"w-4 h-4 p-0",onClick:()=>N(A),children:"×"})]},A))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ee,{placeholder:"Ajouter un tag...",value:_,onChange:A=>E(A.target.value),onKeyDown:A=>A.key==="Enter"&&(A.preventDefault(),R()),className:"flex-1"}),s.jsx(B,{type:"button",onClick:R,disabled:!_.trim()||x.length>=5,children:"Ajouter"})]})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx(oe,{className:"block mb-1 text-gray-700",children:"Photos"}),s.jsxs("div",{className:"flex flex-wrap gap-4 mt-2",children:[l.images.map((A,T)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:A,alt:`photo-${T}`,className:"w-20 h-20 object-cover rounded-lg border border-gray-200"}),s.jsx(B,{type:"button",size:"icon",variant:"destructive",className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition",onClick:()=>I(T),children:"×"})]},T)),u.map((A,T)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:URL.createObjectURL(A),alt:`new-photo-${T}`,className:"w-20 h-20 object-cover rounded-lg border border-gray-200"}),s.jsx(B,{type:"button",size:"icon",variant:"destructive",className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition",onClick:()=>k(T),children:"×"})]},T)),s.jsxs("label",{className:"w-20 h-20 flex items-center justify-center border-2 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100 transition",children:[s.jsx("span",{className:"text-2xl text-gray-400",children:"+"}),s.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:O,disabled:f})]})]})]}),s.jsx(B,{type:"submit",className:"w-full",disabled:f,children:f?"Enregistrement...":"Enregistrer les modifications"}),v&&s.jsx("div",{className:"text-red-500 text-center mt-2",children:v})]})}):s.jsx("div",{className:"text-red-500",children:"Annonce introuvable"})};async function Oae(t,e){const n=Date.now(),r=`listings/${e}/${n}_${t.name}`,i=zb(qb,r),a=await Ub(i,t);return await $b(a.ref)}function Lae({children:t}){const[e,n]=me.useState(null);return me.useEffect(()=>{const r=i=>{n(i.error||new Error(i.message))};return window.addEventListener("error",r),()=>window.removeEventListener("error",r)},[]),e?s.jsxs("div",{style:{color:"red",padding:"2rem",textAlign:"center"},children:["Une erreur est survenue : ",e.message]}):s.jsx(s.Fragment,{children:t})}function Vae(){return s.jsx(BV,{attribute:"class",defaultTheme:"light",enableSystem:!0,children:s.jsx(Kq,{children:s.jsxs(OV,{children:[s.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[s.jsx(tX,{}),s.jsx("main",{className:"flex-1 pt-16",children:s.jsx(Lae,{children:s.jsxs(TV,{children:[s.jsx($t,{path:"/",element:s.jsx(wJ,{})}),s.jsx($t,{path:"/listings",element:s.jsx(tee,{})}),s.jsx($t,{path:"/listing/:id",element:s.jsx(Bne,{})}),s.jsx($t,{path:"/auth",element:s.jsx(jae,{})}),s.jsx($t,{path:"/help",element:s.jsx(zie,{})}),s.jsx($t,{path:"/safety",element:s.jsx(Hie,{})}),s.jsx($t,{path:"/cart",element:s.jsx(_ae,{})}),s.jsx($t,{path:"/products",element:s.jsx(Aae,{})}),s.jsx($t,{path:"/checkout/success",element:s.jsx(Rae,{})}),s.jsx($t,{path:"/checkout",element:s.jsx(hs,{children:s.jsx(Nae,{})})}),s.jsx($t,{path:"/orders",element:s.jsx(hs,{children:s.jsx(Sae,{})})}),s.jsx($t,{path:"/order-confirmation/:orderId",element:s.jsx(hs,{children:s.jsx(Eae,{})})}),s.jsx($t,{path:"/create",element:s.jsx(hs,{children:s.jsx(zse,{})})}),s.jsx($t,{path:"/profile",element:s.jsx(hs,{children:s.jsx(Hse,{})})}),s.jsx($t,{path:"/settings",element:s.jsx(hs,{children:s.jsx(rie,{})})}),s.jsx($t,{path:"/impact",element:s.jsx(hs,{children:s.jsx(mie,{})})}),s.jsx($t,{path:"/saved-searches",element:s.jsx(hs,{children:s.jsx(gie,{})})}),s.jsx($t,{path:"/favorites",element:s.jsx(hs,{children:s.jsx(yie,{})})}),s.jsx($t,{path:"/payments",element:s.jsx(hs,{children:s.jsx(wie,{})})}),s.jsx($t,{path:"/messages",element:s.jsx(hs,{children:s.jsx(oae,{})})}),s.jsx($t,{path:"/edit-listing/:id",element:s.jsx(Dae,{})}),s.jsx($t,{path:"*",element:s.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:"Page non trouvée (404)"})})]})})}),s.jsx(rX,{})]}),s.jsx(LF,{position:"top-right",toastOptions:{duration:4e3,style:{background:"hsl(var(--background))",color:"hsl(var(--foreground))",border:"1px solid hsl(var(--border))"}}})]})})})}kk(document.getElementById("root")).render(s.jsx(p.StrictMode,{children:s.jsx(Vae,{})}));
