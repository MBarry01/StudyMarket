function m6(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var p6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var lT={exports:{}},jx={},cT={exports:{}},St={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Em=Symbol.for("react.element"),g6=Symbol.for("react.portal"),v6=Symbol.for("react.fragment"),x6=Symbol.for("react.strict_mode"),y6=Symbol.for("react.profiler"),_6=Symbol.for("react.provider"),w6=Symbol.for("react.context"),b6=Symbol.for("react.forward_ref"),j6=Symbol.for("react.suspense"),N6=Symbol.for("react.memo"),S6=Symbol.for("react.lazy"),CS=Symbol.iterator;function E6(t){return t===null||typeof t!="object"?null:(t=CS&&t[CS]||t["@@iterator"],typeof t=="function"?t:null)}var uT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dT=Object.assign,hT={};function Bd(t,e,n){this.props=t,this.context=e,this.refs=hT,this.updater=n||uT}Bd.prototype.isReactComponent={};Bd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Bd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function fT(){}fT.prototype=Bd.prototype;function E1(t,e,n){this.props=t,this.context=e,this.refs=hT,this.updater=n||uT}var C1=E1.prototype=new fT;C1.constructor=E1;dT(C1,Bd.prototype);C1.isPureReactComponent=!0;var kS=Array.isArray,mT=Object.prototype.hasOwnProperty,k1={current:null},pT={key:!0,ref:!0,__self:!0,__source:!0};function gT(t,e,n){var r,i={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)mT.call(e,r)&&!pT.hasOwnProperty(r)&&(i[r]=e[r]);var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){for(var u=Array(c),h=0;h<c;h++)u[h]=arguments[h+2];i.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)i[r]===void 0&&(i[r]=c[r]);return{$$typeof:Em,type:t,key:a,ref:o,props:i,_owner:k1.current}}function C6(t,e){return{$$typeof:Em,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function T1(t){return typeof t=="object"&&t!==null&&t.$$typeof===Em}function k6(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var TS=/\/+/g;function i_(t,e){return typeof t=="object"&&t!==null&&t.key!=null?k6(""+t.key):e.toString(36)}function Eg(t,e,n,r,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Em:case g6:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+i_(o,0):r,kS(i)?(n="",t!=null&&(n=t.replace(TS,"$&/")+"/"),Eg(i,e,n,"",function(h){return h})):i!=null&&(T1(i)&&(i=C6(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(TS,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",kS(t))for(var c=0;c<t.length;c++){a=t[c];var u=r+i_(a,c);o+=Eg(a,e,n,u,i)}else if(u=E6(t),typeof u=="function")for(t=u.call(t),c=0;!(a=t.next()).done;)a=a.value,u=r+i_(a,c++),o+=Eg(a,e,n,u,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Bp(t,e,n){if(t==null)return t;var r=[],i=0;return Eg(t,r,"","",function(a){return e.call(n,a,i++)}),r}function T6(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Yr={current:null},Cg={transition:null},P6={ReactCurrentDispatcher:Yr,ReactCurrentBatchConfig:Cg,ReactCurrentOwner:k1};function vT(){throw Error("act(...) is not supported in production builds of React.")}St.Children={map:Bp,forEach:function(t,e,n){Bp(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Bp(t,function(){e++}),e},toArray:function(t){return Bp(t,function(e){return e})||[]},only:function(t){if(!T1(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};St.Component=Bd;St.Fragment=v6;St.Profiler=y6;St.PureComponent=E1;St.StrictMode=x6;St.Suspense=j6;St.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P6;St.act=vT;St.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=dT({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=k1.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)mT.call(e,u)&&!pT.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var h=0;h<u;h++)c[h]=arguments[h+2];r.children=c}return{$$typeof:Em,type:t.type,key:i,ref:a,props:r,_owner:o}};St.createContext=function(t){return t={$$typeof:w6,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:_6,_context:t},t.Consumer=t};St.createElement=gT;St.createFactory=function(t){var e=gT.bind(null,t);return e.type=t,e};St.createRef=function(){return{current:null}};St.forwardRef=function(t){return{$$typeof:b6,render:t}};St.isValidElement=T1;St.lazy=function(t){return{$$typeof:S6,_payload:{_status:-1,_result:t},_init:T6}};St.memo=function(t,e){return{$$typeof:N6,type:t,compare:e===void 0?null:e}};St.startTransition=function(t){var e=Cg.transition;Cg.transition={};try{t()}finally{Cg.transition=e}};St.unstable_act=vT;St.useCallback=function(t,e){return Yr.current.useCallback(t,e)};St.useContext=function(t){return Yr.current.useContext(t)};St.useDebugValue=function(){};St.useDeferredValue=function(t){return Yr.current.useDeferredValue(t)};St.useEffect=function(t,e){return Yr.current.useEffect(t,e)};St.useId=function(){return Yr.current.useId()};St.useImperativeHandle=function(t,e,n){return Yr.current.useImperativeHandle(t,e,n)};St.useInsertionEffect=function(t,e){return Yr.current.useInsertionEffect(t,e)};St.useLayoutEffect=function(t,e){return Yr.current.useLayoutEffect(t,e)};St.useMemo=function(t,e){return Yr.current.useMemo(t,e)};St.useReducer=function(t,e,n){return Yr.current.useReducer(t,e,n)};St.useRef=function(t){return Yr.current.useRef(t)};St.useState=function(t){return Yr.current.useState(t)};St.useSyncExternalStore=function(t,e,n){return Yr.current.useSyncExternalStore(t,e,n)};St.useTransition=function(){return Yr.current.useTransition()};St.version="18.3.1";cT.exports=St;var x=cT.exports;const Pe=Sm(x),P1=m6({__proto__:null,default:Pe},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I6=x,A6=Symbol.for("react.element"),R6=Symbol.for("react.fragment"),M6=Object.prototype.hasOwnProperty,D6=I6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,O6={key:!0,ref:!0,__self:!0,__source:!0};function xT(t,e,n){var r,i={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)M6.call(e,r)&&!O6.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:A6,type:t,key:a,ref:o,props:i,_owner:D6.current}}jx.Fragment=R6;jx.jsx=xT;jx.jsxs=xT;lT.exports=jx;var s=lT.exports,yT={exports:{}},Is={},_T={exports:{}},wT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,q){var H=U.length;U.push(q);e:for(;0<H;){var Q=H-1>>>1,he=U[Q];if(0<i(he,q))U[Q]=q,U[H]=he,H=Q;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var q=U[0],H=U.pop();if(H!==q){U[0]=H;e:for(var Q=0,he=U.length,ye=he>>>1;Q<ye;){var Ue=2*(Q+1)-1,He=U[Ue],re=Ue+1,ce=U[re];if(0>i(He,H))re<he&&0>i(ce,He)?(U[Q]=ce,U[re]=H,Q=re):(U[Q]=He,U[Ue]=H,Q=Ue);else if(re<he&&0>i(ce,H))U[Q]=ce,U[re]=H,Q=re;else break e}}return q}function i(U,q){var H=U.sortIndex-q.sortIndex;return H!==0?H:U.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],h=[],f=1,p=null,v=3,_=!1,N=!1,j=!1,S=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(U){for(var q=n(h);q!==null;){if(q.callback===null)r(h);else if(q.startTime<=U)r(h),q.sortIndex=q.expirationTime,e(u,q);else break;q=n(h)}}function I(U){if(j=!1,E(U),!N)if(n(u)!==null)N=!0,ee(D);else{var q=n(h);q!==null&&Z(I,q.startTime-U)}}function D(U,q){N=!1,j&&(j=!1,w(F),F=-1),_=!0;var H=v;try{for(E(q),p=n(u);p!==null&&(!(p.expirationTime>q)||U&&!M());){var Q=p.callback;if(typeof Q=="function"){p.callback=null,v=p.priorityLevel;var he=Q(p.expirationTime<=q);q=t.unstable_now(),typeof he=="function"?p.callback=he:p===n(u)&&r(u),E(q)}else r(u);p=n(u)}if(p!==null)var ye=!0;else{var Ue=n(h);Ue!==null&&Z(I,Ue.startTime-q),ye=!1}return ye}finally{p=null,v=H,_=!1}}var B=!1,R=null,F=-1,V=5,k=-1;function M(){return!(t.unstable_now()-k<V)}function O(){if(R!==null){var U=t.unstable_now();k=U;var q=!0;try{q=R(!0,U)}finally{q?P():(B=!1,R=null)}}else B=!1}var P;if(typeof y=="function")P=function(){y(O)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,X=W.port2;W.port1.onmessage=O,P=function(){X.postMessage(null)}}else P=function(){S(O,0)};function ee(U){R=U,B||(B=!0,P())}function Z(U,q){F=S(function(){U(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){N||_||(N=!0,ee(D))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(U){switch(v){case 1:case 2:case 3:var q=3;break;default:q=v}var H=v;v=q;try{return U()}finally{v=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,q){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var H=v;v=U;try{return q()}finally{v=H}},t.unstable_scheduleCallback=function(U,q,H){var Q=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?Q+H:Q):H=Q,U){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=H+he,U={id:f++,callback:q,priorityLevel:U,startTime:H,expirationTime:he,sortIndex:-1},H>Q?(U.sortIndex=H,e(h,U),n(u)===null&&U===n(h)&&(j?(w(F),F=-1):j=!0,Z(I,H-Q))):(U.sortIndex=he,e(u,U),N||_||(N=!0,ee(D))),U},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(U){var q=v;return function(){var H=v;v=q;try{return U.apply(this,arguments)}finally{v=H}}}})(wT);_T.exports=wT;var L6=_T.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F6=x,ks=L6;function ve(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bT=new Set,Ff={};function Fc(t,e){ud(t,e),ud(t+"Capture",e)}function ud(t,e){for(Ff[t]=e,t=0;t<e.length;t++)bT.add(e[t])}var Ha=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),w0=Object.prototype.hasOwnProperty,V6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,PS={},IS={};function z6(t){return w0.call(IS,t)?!0:w0.call(PS,t)?!1:V6.test(t)?IS[t]=!0:(PS[t]=!0,!1)}function U6(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function $6(t,e,n,r){if(e===null||typeof e>"u"||U6(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Qr(t,e,n,r,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var wr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){wr[t]=new Qr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];wr[e]=new Qr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){wr[t]=new Qr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){wr[t]=new Qr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){wr[t]=new Qr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){wr[t]=new Qr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){wr[t]=new Qr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){wr[t]=new Qr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){wr[t]=new Qr(t,5,!1,t.toLowerCase(),null,!1,!1)});var I1=/[\-:]([a-z])/g;function A1(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(I1,A1);wr[e]=new Qr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(I1,A1);wr[e]=new Qr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(I1,A1);wr[e]=new Qr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){wr[t]=new Qr(t,1,!1,t.toLowerCase(),null,!1,!1)});wr.xlinkHref=new Qr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){wr[t]=new Qr(t,1,!1,t.toLowerCase(),null,!0,!0)});function R1(t,e,n,r){var i=wr.hasOwnProperty(e)?wr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&($6(e,n,i,r)&&(n=null),r||i===null?z6(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var lo=F6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wp=Symbol.for("react.element"),Du=Symbol.for("react.portal"),Ou=Symbol.for("react.fragment"),M1=Symbol.for("react.strict_mode"),b0=Symbol.for("react.profiler"),jT=Symbol.for("react.provider"),NT=Symbol.for("react.context"),D1=Symbol.for("react.forward_ref"),j0=Symbol.for("react.suspense"),N0=Symbol.for("react.suspense_list"),O1=Symbol.for("react.memo"),Io=Symbol.for("react.lazy"),ST=Symbol.for("react.offscreen"),AS=Symbol.iterator;function Uh(t){return t===null||typeof t!="object"?null:(t=AS&&t[AS]||t["@@iterator"],typeof t=="function"?t:null)}var Sn=Object.assign,a_;function sf(t){if(a_===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);a_=e&&e[1]||""}return`
`+a_+t}var o_=!1;function l_(t,e){if(!t||o_)return"";o_=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),a=r.stack.split(`
`),o=i.length-1,c=a.length-1;1<=o&&0<=c&&i[o]!==a[c];)c--;for(;1<=o&&0<=c;o--,c--)if(i[o]!==a[c]){if(o!==1||c!==1)do if(o--,c--,0>c||i[o]!==a[c]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{o_=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?sf(t):""}function B6(t){switch(t.tag){case 5:return sf(t.type);case 16:return sf("Lazy");case 13:return sf("Suspense");case 19:return sf("SuspenseList");case 0:case 2:case 15:return t=l_(t.type,!1),t;case 11:return t=l_(t.type.render,!1),t;case 1:return t=l_(t.type,!0),t;default:return""}}function S0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ou:return"Fragment";case Du:return"Portal";case b0:return"Profiler";case M1:return"StrictMode";case j0:return"Suspense";case N0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case NT:return(t.displayName||"Context")+".Consumer";case jT:return(t._context.displayName||"Context")+".Provider";case D1:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case O1:return e=t.displayName||null,e!==null?e:S0(t.type)||"Memo";case Io:e=t._payload,t=t._init;try{return S0(t(e))}catch{}}return null}function W6(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return S0(e);case 8:return e===M1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function cl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ET(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function q6(t){var e=ET(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function qp(t){t._valueTracker||(t._valueTracker=q6(t))}function CT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=ET(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function rv(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function E0(t,e){var n=e.checked;return Sn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function RS(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=cl(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function kT(t,e){e=e.checked,e!=null&&R1(t,"checked",e,!1)}function C0(t,e){kT(t,e);var n=cl(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?k0(t,e.type,n):e.hasOwnProperty("defaultValue")&&k0(t,e.type,cl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function MS(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function k0(t,e,n){(e!=="number"||rv(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var af=Array.isArray;function Ku(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+cl(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function T0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ve(91));return Sn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function DS(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ve(92));if(af(n)){if(1<n.length)throw Error(ve(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:cl(n)}}function TT(t,e){var n=cl(e.value),r=cl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function OS(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function PT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function P0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?PT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Hp,IT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Hp=Hp||document.createElement("div"),Hp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Hp.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Vf(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var yf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},H6=["Webkit","ms","Moz","O"];Object.keys(yf).forEach(function(t){H6.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),yf[e]=yf[t]})});function AT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||yf.hasOwnProperty(t)&&yf[t]?(""+e).trim():e+"px"}function RT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=AT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var G6=Sn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function I0(t,e){if(e){if(G6[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ve(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ve(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ve(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ve(62))}}function A0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var R0=null;function L1(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var M0=null,Zu=null,Yu=null;function LS(t){if(t=Tm(t)){if(typeof M0!="function")throw Error(ve(280));var e=t.stateNode;e&&(e=kx(e),M0(t.stateNode,t.type,e))}}function MT(t){Zu?Yu?Yu.push(t):Yu=[t]:Zu=t}function DT(){if(Zu){var t=Zu,e=Yu;if(Yu=Zu=null,LS(t),e)for(t=0;t<e.length;t++)LS(e[t])}}function OT(t,e){return t(e)}function LT(){}var c_=!1;function FT(t,e,n){if(c_)return t(e,n);c_=!0;try{return OT(t,e,n)}finally{c_=!1,(Zu!==null||Yu!==null)&&(LT(),DT())}}function zf(t,e){var n=t.stateNode;if(n===null)return null;var r=kx(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ve(231,e,typeof n));return n}var D0=!1;if(Ha)try{var $h={};Object.defineProperty($h,"passive",{get:function(){D0=!0}}),window.addEventListener("test",$h,$h),window.removeEventListener("test",$h,$h)}catch{D0=!1}function K6(t,e,n,r,i,a,o,c,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(f){this.onError(f)}}var _f=!1,sv=null,iv=!1,O0=null,Z6={onError:function(t){_f=!0,sv=t}};function Y6(t,e,n,r,i,a,o,c,u){_f=!1,sv=null,K6.apply(Z6,arguments)}function Q6(t,e,n,r,i,a,o,c,u){if(Y6.apply(this,arguments),_f){if(_f){var h=sv;_f=!1,sv=null}else throw Error(ve(198));iv||(iv=!0,O0=h)}}function Vc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function VT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function FS(t){if(Vc(t)!==t)throw Error(ve(188))}function X6(t){var e=t.alternate;if(!e){if(e=Vc(t),e===null)throw Error(ve(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return FS(i),t;if(a===r)return FS(i),e;a=a.sibling}throw Error(ve(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,c=i.child;c;){if(c===n){o=!0,n=i,r=a;break}if(c===r){o=!0,r=i,n=a;break}c=c.sibling}if(!o){for(c=a.child;c;){if(c===n){o=!0,n=a,r=i;break}if(c===r){o=!0,r=a,n=i;break}c=c.sibling}if(!o)throw Error(ve(189))}}if(n.alternate!==r)throw Error(ve(190))}if(n.tag!==3)throw Error(ve(188));return n.stateNode.current===n?t:e}function zT(t){return t=X6(t),t!==null?UT(t):null}function UT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=UT(t);if(e!==null)return e;t=t.sibling}return null}var $T=ks.unstable_scheduleCallback,VS=ks.unstable_cancelCallback,J6=ks.unstable_shouldYield,eF=ks.unstable_requestPaint,Dn=ks.unstable_now,tF=ks.unstable_getCurrentPriorityLevel,F1=ks.unstable_ImmediatePriority,BT=ks.unstable_UserBlockingPriority,av=ks.unstable_NormalPriority,nF=ks.unstable_LowPriority,WT=ks.unstable_IdlePriority,Nx=null,Xi=null;function rF(t){if(Xi&&typeof Xi.onCommitFiberRoot=="function")try{Xi.onCommitFiberRoot(Nx,t,void 0,(t.current.flags&128)===128)}catch{}}var vi=Math.clz32?Math.clz32:aF,sF=Math.log,iF=Math.LN2;function aF(t){return t>>>=0,t===0?32:31-(sF(t)/iF|0)|0}var Gp=64,Kp=4194304;function of(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ov(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~i;c!==0?r=of(c):(a&=o,a!==0&&(r=of(a)))}else o=n&~i,o!==0?r=of(o):a!==0&&(r=of(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-vi(e),i=1<<n,r|=t[n],e&=~i;return r}function oF(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lF(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-vi(a),c=1<<o,u=i[o];u===-1?(!(c&n)||c&r)&&(i[o]=oF(c,e)):u<=e&&(t.expiredLanes|=c),a&=~c}}function L0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function qT(){var t=Gp;return Gp<<=1,!(Gp&4194240)&&(Gp=64),t}function u_(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Cm(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vi(e),t[e]=n}function cF(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-vi(n),a=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~a}}function V1(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-vi(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Gt=0;function HT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var GT,z1,KT,ZT,YT,F0=!1,Zp=[],Zo=null,Yo=null,Qo=null,Uf=new Map,$f=new Map,Do=[],uF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zS(t,e){switch(t){case"focusin":case"focusout":Zo=null;break;case"dragenter":case"dragleave":Yo=null;break;case"mouseover":case"mouseout":Qo=null;break;case"pointerover":case"pointerout":Uf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":$f.delete(e.pointerId)}}function Bh(t,e,n,r,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},e!==null&&(e=Tm(e),e!==null&&z1(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function dF(t,e,n,r,i){switch(e){case"focusin":return Zo=Bh(Zo,t,e,n,r,i),!0;case"dragenter":return Yo=Bh(Yo,t,e,n,r,i),!0;case"mouseover":return Qo=Bh(Qo,t,e,n,r,i),!0;case"pointerover":var a=i.pointerId;return Uf.set(a,Bh(Uf.get(a)||null,t,e,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,$f.set(a,Bh($f.get(a)||null,t,e,n,r,i)),!0}return!1}function QT(t){var e=Jl(t.target);if(e!==null){var n=Vc(e);if(n!==null){if(e=n.tag,e===13){if(e=VT(n),e!==null){t.blockedOn=e,YT(t.priority,function(){KT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function kg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=V0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);R0=r,n.target.dispatchEvent(r),R0=null}else return e=Tm(n),e!==null&&z1(e),t.blockedOn=n,!1;e.shift()}return!0}function US(t,e,n){kg(t)&&n.delete(e)}function hF(){F0=!1,Zo!==null&&kg(Zo)&&(Zo=null),Yo!==null&&kg(Yo)&&(Yo=null),Qo!==null&&kg(Qo)&&(Qo=null),Uf.forEach(US),$f.forEach(US)}function Wh(t,e){t.blockedOn===e&&(t.blockedOn=null,F0||(F0=!0,ks.unstable_scheduleCallback(ks.unstable_NormalPriority,hF)))}function Bf(t){function e(i){return Wh(i,t)}if(0<Zp.length){Wh(Zp[0],t);for(var n=1;n<Zp.length;n++){var r=Zp[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Zo!==null&&Wh(Zo,t),Yo!==null&&Wh(Yo,t),Qo!==null&&Wh(Qo,t),Uf.forEach(e),$f.forEach(e),n=0;n<Do.length;n++)r=Do[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Do.length&&(n=Do[0],n.blockedOn===null);)QT(n),n.blockedOn===null&&Do.shift()}var Qu=lo.ReactCurrentBatchConfig,lv=!0;function fF(t,e,n,r){var i=Gt,a=Qu.transition;Qu.transition=null;try{Gt=1,U1(t,e,n,r)}finally{Gt=i,Qu.transition=a}}function mF(t,e,n,r){var i=Gt,a=Qu.transition;Qu.transition=null;try{Gt=4,U1(t,e,n,r)}finally{Gt=i,Qu.transition=a}}function U1(t,e,n,r){if(lv){var i=V0(t,e,n,r);if(i===null)__(t,e,r,cv,n),zS(t,r);else if(dF(i,t,e,n,r))r.stopPropagation();else if(zS(t,r),e&4&&-1<uF.indexOf(t)){for(;i!==null;){var a=Tm(i);if(a!==null&&GT(a),a=V0(t,e,n,r),a===null&&__(t,e,r,cv,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else __(t,e,r,null,n)}}var cv=null;function V0(t,e,n,r){if(cv=null,t=L1(r),t=Jl(t),t!==null)if(e=Vc(t),e===null)t=null;else if(n=e.tag,n===13){if(t=VT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return cv=t,null}function XT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tF()){case F1:return 1;case BT:return 4;case av:case nF:return 16;case WT:return 536870912;default:return 16}default:return 16}}var Bo=null,$1=null,Tg=null;function JT(){if(Tg)return Tg;var t,e=$1,n=e.length,r,i="value"in Bo?Bo.value:Bo.textContent,a=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[a-r];r++);return Tg=i.slice(t,1<r?1-r:void 0)}function Pg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Yp(){return!0}function $S(){return!1}function As(t){function e(n,r,i,a,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(a):a[c]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Yp:$S,this.isPropagationStopped=$S,this}return Sn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Yp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Yp)},persist:function(){},isPersistent:Yp}),e}var Wd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},B1=As(Wd),km=Sn({},Wd,{view:0,detail:0}),pF=As(km),d_,h_,qh,Sx=Sn({},km,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:W1,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qh&&(qh&&t.type==="mousemove"?(d_=t.screenX-qh.screenX,h_=t.screenY-qh.screenY):h_=d_=0,qh=t),d_)},movementY:function(t){return"movementY"in t?t.movementY:h_}}),BS=As(Sx),gF=Sn({},Sx,{dataTransfer:0}),vF=As(gF),xF=Sn({},km,{relatedTarget:0}),f_=As(xF),yF=Sn({},Wd,{animationName:0,elapsedTime:0,pseudoElement:0}),_F=As(yF),wF=Sn({},Wd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),bF=As(wF),jF=Sn({},Wd,{data:0}),WS=As(jF),NF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},SF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},EF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function CF(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=EF[t])?!!e[t]:!1}function W1(){return CF}var kF=Sn({},km,{key:function(t){if(t.key){var e=NF[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Pg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?SF[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:W1,charCode:function(t){return t.type==="keypress"?Pg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Pg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),TF=As(kF),PF=Sn({},Sx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qS=As(PF),IF=Sn({},km,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:W1}),AF=As(IF),RF=Sn({},Wd,{propertyName:0,elapsedTime:0,pseudoElement:0}),MF=As(RF),DF=Sn({},Sx,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),OF=As(DF),LF=[9,13,27,32],q1=Ha&&"CompositionEvent"in window,wf=null;Ha&&"documentMode"in document&&(wf=document.documentMode);var FF=Ha&&"TextEvent"in window&&!wf,eP=Ha&&(!q1||wf&&8<wf&&11>=wf),HS=" ",GS=!1;function tP(t,e){switch(t){case"keyup":return LF.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nP(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Lu=!1;function VF(t,e){switch(t){case"compositionend":return nP(e);case"keypress":return e.which!==32?null:(GS=!0,HS);case"textInput":return t=e.data,t===HS&&GS?null:t;default:return null}}function zF(t,e){if(Lu)return t==="compositionend"||!q1&&tP(t,e)?(t=JT(),Tg=$1=Bo=null,Lu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return eP&&e.locale!=="ko"?null:e.data;default:return null}}var UF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function KS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!UF[t.type]:e==="textarea"}function rP(t,e,n,r){MT(r),e=uv(e,"onChange"),0<e.length&&(n=new B1("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var bf=null,Wf=null;function $F(t){mP(t,0)}function Ex(t){var e=zu(t);if(CT(e))return t}function BF(t,e){if(t==="change")return e}var sP=!1;if(Ha){var m_;if(Ha){var p_="oninput"in document;if(!p_){var ZS=document.createElement("div");ZS.setAttribute("oninput","return;"),p_=typeof ZS.oninput=="function"}m_=p_}else m_=!1;sP=m_&&(!document.documentMode||9<document.documentMode)}function YS(){bf&&(bf.detachEvent("onpropertychange",iP),Wf=bf=null)}function iP(t){if(t.propertyName==="value"&&Ex(Wf)){var e=[];rP(e,Wf,t,L1(t)),FT($F,e)}}function WF(t,e,n){t==="focusin"?(YS(),bf=e,Wf=n,bf.attachEvent("onpropertychange",iP)):t==="focusout"&&YS()}function qF(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ex(Wf)}function HF(t,e){if(t==="click")return Ex(e)}function GF(t,e){if(t==="input"||t==="change")return Ex(e)}function KF(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ji=typeof Object.is=="function"?Object.is:KF;function qf(t,e){if(ji(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!w0.call(e,i)||!ji(t[i],e[i]))return!1}return!0}function QS(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function XS(t,e){var n=QS(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=QS(n)}}function aP(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?aP(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function oP(){for(var t=window,e=rv();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=rv(t.document)}return e}function H1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ZF(t){var e=oP(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&aP(n.ownerDocument.documentElement,n)){if(r!==null&&H1(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!t.extend&&a>r&&(i=r,r=a,a=i),i=XS(n,a);var o=XS(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var YF=Ha&&"documentMode"in document&&11>=document.documentMode,Fu=null,z0=null,jf=null,U0=!1;function JS(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;U0||Fu==null||Fu!==rv(r)||(r=Fu,"selectionStart"in r&&H1(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),jf&&qf(jf,r)||(jf=r,r=uv(z0,"onSelect"),0<r.length&&(e=new B1("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Fu)))}function Qp(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Vu={animationend:Qp("Animation","AnimationEnd"),animationiteration:Qp("Animation","AnimationIteration"),animationstart:Qp("Animation","AnimationStart"),transitionend:Qp("Transition","TransitionEnd")},g_={},lP={};Ha&&(lP=document.createElement("div").style,"AnimationEvent"in window||(delete Vu.animationend.animation,delete Vu.animationiteration.animation,delete Vu.animationstart.animation),"TransitionEvent"in window||delete Vu.transitionend.transition);function Cx(t){if(g_[t])return g_[t];if(!Vu[t])return t;var e=Vu[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in lP)return g_[t]=e[n];return t}var cP=Cx("animationend"),uP=Cx("animationiteration"),dP=Cx("animationstart"),hP=Cx("transitionend"),fP=new Map,e2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nl(t,e){fP.set(t,e),Fc(e,[t])}for(var v_=0;v_<e2.length;v_++){var x_=e2[v_],QF=x_.toLowerCase(),XF=x_[0].toUpperCase()+x_.slice(1);Nl(QF,"on"+XF)}Nl(cP,"onAnimationEnd");Nl(uP,"onAnimationIteration");Nl(dP,"onAnimationStart");Nl("dblclick","onDoubleClick");Nl("focusin","onFocus");Nl("focusout","onBlur");Nl(hP,"onTransitionEnd");ud("onMouseEnter",["mouseout","mouseover"]);ud("onMouseLeave",["mouseout","mouseover"]);ud("onPointerEnter",["pointerout","pointerover"]);ud("onPointerLeave",["pointerout","pointerover"]);Fc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),JF=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function t2(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Q6(r,e,void 0,t),t.currentTarget=null}function mP(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,h=c.currentTarget;if(c=c.listener,u!==a&&i.isPropagationStopped())break e;t2(i,c,h),a=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,h=c.currentTarget,c=c.listener,u!==a&&i.isPropagationStopped())break e;t2(i,c,h),a=u}}}if(iv)throw t=O0,iv=!1,O0=null,t}function ln(t,e){var n=e[H0];n===void 0&&(n=e[H0]=new Set);var r=t+"__bubble";n.has(r)||(pP(e,t,2,!1),n.add(r))}function y_(t,e,n){var r=0;e&&(r|=4),pP(n,t,r,e)}var Xp="_reactListening"+Math.random().toString(36).slice(2);function Hf(t){if(!t[Xp]){t[Xp]=!0,bT.forEach(function(n){n!=="selectionchange"&&(JF.has(n)||y_(n,!1,t),y_(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Xp]||(e[Xp]=!0,y_("selectionchange",!1,e))}}function pP(t,e,n,r){switch(XT(e)){case 1:var i=fF;break;case 4:i=mF;break;default:i=U1}n=i.bind(null,e,n,t),i=void 0,!D0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function __(t,e,n,r,i){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;c!==null;){if(o=Jl(c),o===null)return;if(u=o.tag,u===5||u===6){r=a=o;continue e}c=c.parentNode}}r=r.return}FT(function(){var h=a,f=L1(n),p=[];e:{var v=fP.get(t);if(v!==void 0){var _=B1,N=t;switch(t){case"keypress":if(Pg(n)===0)break e;case"keydown":case"keyup":_=TF;break;case"focusin":N="focus",_=f_;break;case"focusout":N="blur",_=f_;break;case"beforeblur":case"afterblur":_=f_;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=BS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=vF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=AF;break;case cP:case uP:case dP:_=_F;break;case hP:_=MF;break;case"scroll":_=pF;break;case"wheel":_=OF;break;case"copy":case"cut":case"paste":_=bF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=qS}var j=(e&4)!==0,S=!j&&t==="scroll",w=j?v!==null?v+"Capture":null:v;j=[];for(var y=h,E;y!==null;){E=y;var I=E.stateNode;if(E.tag===5&&I!==null&&(E=I,w!==null&&(I=zf(y,w),I!=null&&j.push(Gf(y,I,E)))),S)break;y=y.return}0<j.length&&(v=new _(v,N,null,n,f),p.push({event:v,listeners:j}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",v&&n!==R0&&(N=n.relatedTarget||n.fromElement)&&(Jl(N)||N[Ga]))break e;if((_||v)&&(v=f.window===f?f:(v=f.ownerDocument)?v.defaultView||v.parentWindow:window,_?(N=n.relatedTarget||n.toElement,_=h,N=N?Jl(N):null,N!==null&&(S=Vc(N),N!==S||N.tag!==5&&N.tag!==6)&&(N=null)):(_=null,N=h),_!==N)){if(j=BS,I="onMouseLeave",w="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(j=qS,I="onPointerLeave",w="onPointerEnter",y="pointer"),S=_==null?v:zu(_),E=N==null?v:zu(N),v=new j(I,y+"leave",_,n,f),v.target=S,v.relatedTarget=E,I=null,Jl(f)===h&&(j=new j(w,y+"enter",N,n,f),j.target=E,j.relatedTarget=S,I=j),S=I,_&&N)t:{for(j=_,w=N,y=0,E=j;E;E=ju(E))y++;for(E=0,I=w;I;I=ju(I))E++;for(;0<y-E;)j=ju(j),y--;for(;0<E-y;)w=ju(w),E--;for(;y--;){if(j===w||w!==null&&j===w.alternate)break t;j=ju(j),w=ju(w)}j=null}else j=null;_!==null&&n2(p,v,_,j,!1),N!==null&&S!==null&&n2(p,S,N,j,!0)}}e:{if(v=h?zu(h):window,_=v.nodeName&&v.nodeName.toLowerCase(),_==="select"||_==="input"&&v.type==="file")var D=BF;else if(KS(v))if(sP)D=GF;else{D=qF;var B=WF}else(_=v.nodeName)&&_.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(D=HF);if(D&&(D=D(t,h))){rP(p,D,n,f);break e}B&&B(t,v,h),t==="focusout"&&(B=v._wrapperState)&&B.controlled&&v.type==="number"&&k0(v,"number",v.value)}switch(B=h?zu(h):window,t){case"focusin":(KS(B)||B.contentEditable==="true")&&(Fu=B,z0=h,jf=null);break;case"focusout":jf=z0=Fu=null;break;case"mousedown":U0=!0;break;case"contextmenu":case"mouseup":case"dragend":U0=!1,JS(p,n,f);break;case"selectionchange":if(YF)break;case"keydown":case"keyup":JS(p,n,f)}var R;if(q1)e:{switch(t){case"compositionstart":var F="onCompositionStart";break e;case"compositionend":F="onCompositionEnd";break e;case"compositionupdate":F="onCompositionUpdate";break e}F=void 0}else Lu?tP(t,n)&&(F="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(F="onCompositionStart");F&&(eP&&n.locale!=="ko"&&(Lu||F!=="onCompositionStart"?F==="onCompositionEnd"&&Lu&&(R=JT()):(Bo=f,$1="value"in Bo?Bo.value:Bo.textContent,Lu=!0)),B=uv(h,F),0<B.length&&(F=new WS(F,t,null,n,f),p.push({event:F,listeners:B}),R?F.data=R:(R=nP(n),R!==null&&(F.data=R)))),(R=FF?VF(t,n):zF(t,n))&&(h=uv(h,"onBeforeInput"),0<h.length&&(f=new WS("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:h}),f.data=R))}mP(p,e)})}function Gf(t,e,n){return{instance:t,listener:e,currentTarget:n}}function uv(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=zf(t,n),a!=null&&r.unshift(Gf(t,a,i)),a=zf(t,e),a!=null&&r.push(Gf(t,a,i))),t=t.return}return r}function ju(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function n2(t,e,n,r,i){for(var a=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,h=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&h!==null&&(c=h,i?(u=zf(n,a),u!=null&&o.unshift(Gf(n,u,c))):i||(u=zf(n,a),u!=null&&o.push(Gf(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var eV=/\r\n?/g,tV=/\u0000|\uFFFD/g;function r2(t){return(typeof t=="string"?t:""+t).replace(eV,`
`).replace(tV,"")}function Jp(t,e,n){if(e=r2(e),r2(t)!==e&&n)throw Error(ve(425))}function dv(){}var $0=null,B0=null;function W0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var q0=typeof setTimeout=="function"?setTimeout:void 0,nV=typeof clearTimeout=="function"?clearTimeout:void 0,s2=typeof Promise=="function"?Promise:void 0,rV=typeof queueMicrotask=="function"?queueMicrotask:typeof s2<"u"?function(t){return s2.resolve(null).then(t).catch(sV)}:q0;function sV(t){setTimeout(function(){throw t})}function w_(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Bf(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Bf(e)}function Xo(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function i2(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var qd=Math.random().toString(36).slice(2),Bi="__reactFiber$"+qd,Kf="__reactProps$"+qd,Ga="__reactContainer$"+qd,H0="__reactEvents$"+qd,iV="__reactListeners$"+qd,aV="__reactHandles$"+qd;function Jl(t){var e=t[Bi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ga]||n[Bi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=i2(t);t!==null;){if(n=t[Bi])return n;t=i2(t)}return e}t=n,n=t.parentNode}return null}function Tm(t){return t=t[Bi]||t[Ga],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function zu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ve(33))}function kx(t){return t[Kf]||null}var G0=[],Uu=-1;function Sl(t){return{current:t}}function dn(t){0>Uu||(t.current=G0[Uu],G0[Uu]=null,Uu--)}function rn(t,e){Uu++,G0[Uu]=t.current,t.current=e}var ul={},Or=Sl(ul),os=Sl(!1),xc=ul;function dd(t,e){var n=t.type.contextTypes;if(!n)return ul;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ls(t){return t=t.childContextTypes,t!=null}function hv(){dn(os),dn(Or)}function a2(t,e,n){if(Or.current!==ul)throw Error(ve(168));rn(Or,e),rn(os,n)}function gP(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ve(108,W6(t)||"Unknown",i));return Sn({},n,r)}function fv(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ul,xc=Or.current,rn(Or,t),rn(os,os.current),!0}function o2(t,e,n){var r=t.stateNode;if(!r)throw Error(ve(169));n?(t=gP(t,e,xc),r.__reactInternalMemoizedMergedChildContext=t,dn(os),dn(Or),rn(Or,t)):dn(os),rn(os,n)}var Oa=null,Tx=!1,b_=!1;function vP(t){Oa===null?Oa=[t]:Oa.push(t)}function oV(t){Tx=!0,vP(t)}function El(){if(!b_&&Oa!==null){b_=!0;var t=0,e=Gt;try{var n=Oa;for(Gt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Oa=null,Tx=!1}catch(i){throw Oa!==null&&(Oa=Oa.slice(t+1)),$T(F1,El),i}finally{Gt=e,b_=!1}}return null}var $u=[],Bu=0,mv=null,pv=0,Us=[],$s=0,yc=null,Fa=1,Va="";function Zl(t,e){$u[Bu++]=pv,$u[Bu++]=mv,mv=t,pv=e}function xP(t,e,n){Us[$s++]=Fa,Us[$s++]=Va,Us[$s++]=yc,yc=t;var r=Fa;t=Va;var i=32-vi(r)-1;r&=~(1<<i),n+=1;var a=32-vi(e)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Fa=1<<32-vi(e)+i|n<<i|r,Va=a+t}else Fa=1<<a|n<<i|r,Va=t}function G1(t){t.return!==null&&(Zl(t,1),xP(t,1,0))}function K1(t){for(;t===mv;)mv=$u[--Bu],$u[Bu]=null,pv=$u[--Bu],$u[Bu]=null;for(;t===yc;)yc=Us[--$s],Us[$s]=null,Va=Us[--$s],Us[$s]=null,Fa=Us[--$s],Us[$s]=null}var Ns=null,ws=null,gn=!1,mi=null;function yP(t,e){var n=Ws(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function l2(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ns=t,ws=Xo(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ns=t,ws=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=yc!==null?{id:Fa,overflow:Va}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ws(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ns=t,ws=null,!0):!1;default:return!1}}function K0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Z0(t){if(gn){var e=ws;if(e){var n=e;if(!l2(t,e)){if(K0(t))throw Error(ve(418));e=Xo(n.nextSibling);var r=Ns;e&&l2(t,e)?yP(r,n):(t.flags=t.flags&-4097|2,gn=!1,Ns=t)}}else{if(K0(t))throw Error(ve(418));t.flags=t.flags&-4097|2,gn=!1,Ns=t}}}function c2(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ns=t}function eg(t){if(t!==Ns)return!1;if(!gn)return c2(t),gn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!W0(t.type,t.memoizedProps)),e&&(e=ws)){if(K0(t))throw _P(),Error(ve(418));for(;e;)yP(t,e),e=Xo(e.nextSibling)}if(c2(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ve(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ws=Xo(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ws=null}}else ws=Ns?Xo(t.stateNode.nextSibling):null;return!0}function _P(){for(var t=ws;t;)t=Xo(t.nextSibling)}function hd(){ws=Ns=null,gn=!1}function Z1(t){mi===null?mi=[t]:mi.push(t)}var lV=lo.ReactCurrentBatchConfig;function Hh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ve(309));var r=n.stateNode}if(!r)throw Error(ve(147,t));var i=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var c=i.refs;o===null?delete c[a]:c[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(ve(284));if(!n._owner)throw Error(ve(290,t))}return t}function tg(t,e){throw t=Object.prototype.toString.call(e),Error(ve(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function u2(t){var e=t._init;return e(t._payload)}function wP(t){function e(w,y){if(t){var E=w.deletions;E===null?(w.deletions=[y],w.flags|=16):E.push(y)}}function n(w,y){if(!t)return null;for(;y!==null;)e(w,y),y=y.sibling;return null}function r(w,y){for(w=new Map;y!==null;)y.key!==null?w.set(y.key,y):w.set(y.index,y),y=y.sibling;return w}function i(w,y){return w=nl(w,y),w.index=0,w.sibling=null,w}function a(w,y,E){return w.index=E,t?(E=w.alternate,E!==null?(E=E.index,E<y?(w.flags|=2,y):E):(w.flags|=2,y)):(w.flags|=1048576,y)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function c(w,y,E,I){return y===null||y.tag!==6?(y=T_(E,w.mode,I),y.return=w,y):(y=i(y,E),y.return=w,y)}function u(w,y,E,I){var D=E.type;return D===Ou?f(w,y,E.props.children,I,E.key):y!==null&&(y.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Io&&u2(D)===y.type)?(I=i(y,E.props),I.ref=Hh(w,y,E),I.return=w,I):(I=Lg(E.type,E.key,E.props,null,w.mode,I),I.ref=Hh(w,y,E),I.return=w,I)}function h(w,y,E,I){return y===null||y.tag!==4||y.stateNode.containerInfo!==E.containerInfo||y.stateNode.implementation!==E.implementation?(y=P_(E,w.mode,I),y.return=w,y):(y=i(y,E.children||[]),y.return=w,y)}function f(w,y,E,I,D){return y===null||y.tag!==7?(y=lc(E,w.mode,I,D),y.return=w,y):(y=i(y,E),y.return=w,y)}function p(w,y,E){if(typeof y=="string"&&y!==""||typeof y=="number")return y=T_(""+y,w.mode,E),y.return=w,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Wp:return E=Lg(y.type,y.key,y.props,null,w.mode,E),E.ref=Hh(w,null,y),E.return=w,E;case Du:return y=P_(y,w.mode,E),y.return=w,y;case Io:var I=y._init;return p(w,I(y._payload),E)}if(af(y)||Uh(y))return y=lc(y,w.mode,E,null),y.return=w,y;tg(w,y)}return null}function v(w,y,E,I){var D=y!==null?y.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return D!==null?null:c(w,y,""+E,I);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Wp:return E.key===D?u(w,y,E,I):null;case Du:return E.key===D?h(w,y,E,I):null;case Io:return D=E._init,v(w,y,D(E._payload),I)}if(af(E)||Uh(E))return D!==null?null:f(w,y,E,I,null);tg(w,E)}return null}function _(w,y,E,I,D){if(typeof I=="string"&&I!==""||typeof I=="number")return w=w.get(E)||null,c(y,w,""+I,D);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Wp:return w=w.get(I.key===null?E:I.key)||null,u(y,w,I,D);case Du:return w=w.get(I.key===null?E:I.key)||null,h(y,w,I,D);case Io:var B=I._init;return _(w,y,E,B(I._payload),D)}if(af(I)||Uh(I))return w=w.get(E)||null,f(y,w,I,D,null);tg(y,I)}return null}function N(w,y,E,I){for(var D=null,B=null,R=y,F=y=0,V=null;R!==null&&F<E.length;F++){R.index>F?(V=R,R=null):V=R.sibling;var k=v(w,R,E[F],I);if(k===null){R===null&&(R=V);break}t&&R&&k.alternate===null&&e(w,R),y=a(k,y,F),B===null?D=k:B.sibling=k,B=k,R=V}if(F===E.length)return n(w,R),gn&&Zl(w,F),D;if(R===null){for(;F<E.length;F++)R=p(w,E[F],I),R!==null&&(y=a(R,y,F),B===null?D=R:B.sibling=R,B=R);return gn&&Zl(w,F),D}for(R=r(w,R);F<E.length;F++)V=_(R,w,F,E[F],I),V!==null&&(t&&V.alternate!==null&&R.delete(V.key===null?F:V.key),y=a(V,y,F),B===null?D=V:B.sibling=V,B=V);return t&&R.forEach(function(M){return e(w,M)}),gn&&Zl(w,F),D}function j(w,y,E,I){var D=Uh(E);if(typeof D!="function")throw Error(ve(150));if(E=D.call(E),E==null)throw Error(ve(151));for(var B=D=null,R=y,F=y=0,V=null,k=E.next();R!==null&&!k.done;F++,k=E.next()){R.index>F?(V=R,R=null):V=R.sibling;var M=v(w,R,k.value,I);if(M===null){R===null&&(R=V);break}t&&R&&M.alternate===null&&e(w,R),y=a(M,y,F),B===null?D=M:B.sibling=M,B=M,R=V}if(k.done)return n(w,R),gn&&Zl(w,F),D;if(R===null){for(;!k.done;F++,k=E.next())k=p(w,k.value,I),k!==null&&(y=a(k,y,F),B===null?D=k:B.sibling=k,B=k);return gn&&Zl(w,F),D}for(R=r(w,R);!k.done;F++,k=E.next())k=_(R,w,F,k.value,I),k!==null&&(t&&k.alternate!==null&&R.delete(k.key===null?F:k.key),y=a(k,y,F),B===null?D=k:B.sibling=k,B=k);return t&&R.forEach(function(O){return e(w,O)}),gn&&Zl(w,F),D}function S(w,y,E,I){if(typeof E=="object"&&E!==null&&E.type===Ou&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Wp:e:{for(var D=E.key,B=y;B!==null;){if(B.key===D){if(D=E.type,D===Ou){if(B.tag===7){n(w,B.sibling),y=i(B,E.props.children),y.return=w,w=y;break e}}else if(B.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Io&&u2(D)===B.type){n(w,B.sibling),y=i(B,E.props),y.ref=Hh(w,B,E),y.return=w,w=y;break e}n(w,B);break}else e(w,B);B=B.sibling}E.type===Ou?(y=lc(E.props.children,w.mode,I,E.key),y.return=w,w=y):(I=Lg(E.type,E.key,E.props,null,w.mode,I),I.ref=Hh(w,y,E),I.return=w,w=I)}return o(w);case Du:e:{for(B=E.key;y!==null;){if(y.key===B)if(y.tag===4&&y.stateNode.containerInfo===E.containerInfo&&y.stateNode.implementation===E.implementation){n(w,y.sibling),y=i(y,E.children||[]),y.return=w,w=y;break e}else{n(w,y);break}else e(w,y);y=y.sibling}y=P_(E,w.mode,I),y.return=w,w=y}return o(w);case Io:return B=E._init,S(w,y,B(E._payload),I)}if(af(E))return N(w,y,E,I);if(Uh(E))return j(w,y,E,I);tg(w,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,y!==null&&y.tag===6?(n(w,y.sibling),y=i(y,E),y.return=w,w=y):(n(w,y),y=T_(E,w.mode,I),y.return=w,w=y),o(w)):n(w,y)}return S}var fd=wP(!0),bP=wP(!1),gv=Sl(null),vv=null,Wu=null,Y1=null;function Q1(){Y1=Wu=vv=null}function X1(t){var e=gv.current;dn(gv),t._currentValue=e}function Y0(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Xu(t,e){vv=t,Y1=Wu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ss=!0),t.firstContext=null)}function Xs(t){var e=t._currentValue;if(Y1!==t)if(t={context:t,memoizedValue:e,next:null},Wu===null){if(vv===null)throw Error(ve(308));Wu=t,vv.dependencies={lanes:0,firstContext:t}}else Wu=Wu.next=t;return e}var ec=null;function J1(t){ec===null?ec=[t]:ec.push(t)}function jP(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,J1(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ka(t,r)}function Ka(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ao=!1;function eb(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function NP(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ba(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Jo(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Mt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ka(t,n)}return i=r.interleaved,i===null?(e.next=e,J1(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ka(t,n)}function Ig(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,V1(t,n)}}function d2(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=e:a=a.next=e}else i=a=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function xv(t,e,n,r){var i=t.updateQueue;Ao=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var u=c,h=u.next;u.next=null,o===null?a=h:o.next=h,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==o&&(c===null?f.firstBaseUpdate=h:c.next=h,f.lastBaseUpdate=u))}if(a!==null){var p=i.baseState;o=0,f=h=u=null,c=a;do{var v=c.lane,_=c.eventTime;if((r&v)===v){f!==null&&(f=f.next={eventTime:_,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var N=t,j=c;switch(v=e,_=n,j.tag){case 1:if(N=j.payload,typeof N=="function"){p=N.call(_,p,v);break e}p=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=j.payload,v=typeof N=="function"?N.call(_,p,v):N,v==null)break e;p=Sn({},p,v);break e;case 2:Ao=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,v=i.effects,v===null?i.effects=[c]:v.push(c))}else _={eventTime:_,lane:v,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(h=f=_,u=p):f=f.next=_,o|=v;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;v=c,c=v.next,v.next=null,i.lastBaseUpdate=v,i.shared.pending=null}}while(!0);if(f===null&&(u=p),i.baseState=u,i.firstBaseUpdate=h,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);wc|=o,t.lanes=o,t.memoizedState=p}}function h2(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ve(191,i));i.call(r)}}}var Pm={},Ji=Sl(Pm),Zf=Sl(Pm),Yf=Sl(Pm);function tc(t){if(t===Pm)throw Error(ve(174));return t}function tb(t,e){switch(rn(Yf,e),rn(Zf,t),rn(Ji,Pm),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:P0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=P0(e,t)}dn(Ji),rn(Ji,e)}function md(){dn(Ji),dn(Zf),dn(Yf)}function SP(t){tc(Yf.current);var e=tc(Ji.current),n=P0(e,t.type);e!==n&&(rn(Zf,t),rn(Ji,n))}function nb(t){Zf.current===t&&(dn(Ji),dn(Zf))}var jn=Sl(0);function yv(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var j_=[];function rb(){for(var t=0;t<j_.length;t++)j_[t]._workInProgressVersionPrimary=null;j_.length=0}var Ag=lo.ReactCurrentDispatcher,N_=lo.ReactCurrentBatchConfig,_c=0,Nn=null,tr=null,ur=null,_v=!1,Nf=!1,Qf=0,cV=0;function Sr(){throw Error(ve(321))}function sb(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ji(t[n],e[n]))return!1;return!0}function ib(t,e,n,r,i,a){if(_c=a,Nn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ag.current=t===null||t.memoizedState===null?fV:mV,t=n(r,i),Nf){a=0;do{if(Nf=!1,Qf=0,25<=a)throw Error(ve(301));a+=1,ur=tr=null,e.updateQueue=null,Ag.current=pV,t=n(r,i)}while(Nf)}if(Ag.current=wv,e=tr!==null&&tr.next!==null,_c=0,ur=tr=Nn=null,_v=!1,e)throw Error(ve(300));return t}function ab(){var t=Qf!==0;return Qf=0,t}function Vi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ur===null?Nn.memoizedState=ur=t:ur=ur.next=t,ur}function Js(){if(tr===null){var t=Nn.alternate;t=t!==null?t.memoizedState:null}else t=tr.next;var e=ur===null?Nn.memoizedState:ur.next;if(e!==null)ur=e,tr=t;else{if(t===null)throw Error(ve(310));tr=t,t={memoizedState:tr.memoizedState,baseState:tr.baseState,baseQueue:tr.baseQueue,queue:tr.queue,next:null},ur===null?Nn.memoizedState=ur=t:ur=ur.next=t}return ur}function Xf(t,e){return typeof e=="function"?e(t):e}function S_(t){var e=Js(),n=e.queue;if(n===null)throw Error(ve(311));n.lastRenderedReducer=t;var r=tr,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var c=o=null,u=null,h=a;do{var f=h.lane;if((_c&f)===f)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var p={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(c=u=p,o=r):u=u.next=p,Nn.lanes|=f,wc|=f}h=h.next}while(h!==null&&h!==a);u===null?o=r:u.next=c,ji(r,e.memoizedState)||(ss=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do a=i.lane,Nn.lanes|=a,wc|=a,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function E_(t){var e=Js(),n=e.queue;if(n===null)throw Error(ve(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);ji(a,e.memoizedState)||(ss=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function EP(){}function CP(t,e){var n=Nn,r=Js(),i=e(),a=!ji(r.memoizedState,i);if(a&&(r.memoizedState=i,ss=!0),r=r.queue,ob(PP.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||ur!==null&&ur.memoizedState.tag&1){if(n.flags|=2048,Jf(9,TP.bind(null,n,r,i,e),void 0,null),hr===null)throw Error(ve(349));_c&30||kP(n,e,i)}return i}function kP(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Nn.updateQueue,e===null?(e={lastEffect:null,stores:null},Nn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function TP(t,e,n,r){e.value=n,e.getSnapshot=r,IP(e)&&AP(t)}function PP(t,e,n){return n(function(){IP(e)&&AP(t)})}function IP(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ji(t,n)}catch{return!0}}function AP(t){var e=Ka(t,1);e!==null&&xi(e,t,1,-1)}function f2(t){var e=Vi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xf,lastRenderedState:t},e.queue=t,t=t.dispatch=hV.bind(null,Nn,t),[e.memoizedState,t]}function Jf(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Nn.updateQueue,e===null?(e={lastEffect:null,stores:null},Nn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function RP(){return Js().memoizedState}function Rg(t,e,n,r){var i=Vi();Nn.flags|=t,i.memoizedState=Jf(1|e,n,void 0,r===void 0?null:r)}function Px(t,e,n,r){var i=Js();r=r===void 0?null:r;var a=void 0;if(tr!==null){var o=tr.memoizedState;if(a=o.destroy,r!==null&&sb(r,o.deps)){i.memoizedState=Jf(e,n,a,r);return}}Nn.flags|=t,i.memoizedState=Jf(1|e,n,a,r)}function m2(t,e){return Rg(8390656,8,t,e)}function ob(t,e){return Px(2048,8,t,e)}function MP(t,e){return Px(4,2,t,e)}function DP(t,e){return Px(4,4,t,e)}function OP(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function LP(t,e,n){return n=n!=null?n.concat([t]):null,Px(4,4,OP.bind(null,e,t),n)}function lb(){}function FP(t,e){var n=Js();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sb(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function VP(t,e){var n=Js();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sb(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function zP(t,e,n){return _c&21?(ji(n,e)||(n=qT(),Nn.lanes|=n,wc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ss=!0),t.memoizedState=n)}function uV(t,e){var n=Gt;Gt=n!==0&&4>n?n:4,t(!0);var r=N_.transition;N_.transition={};try{t(!1),e()}finally{Gt=n,N_.transition=r}}function UP(){return Js().memoizedState}function dV(t,e,n){var r=tl(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$P(t))BP(e,n);else if(n=jP(t,e,n,r),n!==null){var i=Hr();xi(n,t,r,i),WP(n,e,r)}}function hV(t,e,n){var r=tl(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($P(t))BP(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,c=a(o,n);if(i.hasEagerState=!0,i.eagerState=c,ji(c,o)){var u=e.interleaved;u===null?(i.next=i,J1(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=jP(t,e,i,r),n!==null&&(i=Hr(),xi(n,t,r,i),WP(n,e,r))}}function $P(t){var e=t.alternate;return t===Nn||e!==null&&e===Nn}function BP(t,e){Nf=_v=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function WP(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,V1(t,n)}}var wv={readContext:Xs,useCallback:Sr,useContext:Sr,useEffect:Sr,useImperativeHandle:Sr,useInsertionEffect:Sr,useLayoutEffect:Sr,useMemo:Sr,useReducer:Sr,useRef:Sr,useState:Sr,useDebugValue:Sr,useDeferredValue:Sr,useTransition:Sr,useMutableSource:Sr,useSyncExternalStore:Sr,useId:Sr,unstable_isNewReconciler:!1},fV={readContext:Xs,useCallback:function(t,e){return Vi().memoizedState=[t,e===void 0?null:e],t},useContext:Xs,useEffect:m2,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Rg(4194308,4,OP.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Rg(4194308,4,t,e)},useInsertionEffect:function(t,e){return Rg(4,2,t,e)},useMemo:function(t,e){var n=Vi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Vi();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=dV.bind(null,Nn,t),[r.memoizedState,t]},useRef:function(t){var e=Vi();return t={current:t},e.memoizedState=t},useState:f2,useDebugValue:lb,useDeferredValue:function(t){return Vi().memoizedState=t},useTransition:function(){var t=f2(!1),e=t[0];return t=uV.bind(null,t[1]),Vi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Nn,i=Vi();if(gn){if(n===void 0)throw Error(ve(407));n=n()}else{if(n=e(),hr===null)throw Error(ve(349));_c&30||kP(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,m2(PP.bind(null,r,a,t),[t]),r.flags|=2048,Jf(9,TP.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=Vi(),e=hr.identifierPrefix;if(gn){var n=Va,r=Fa;n=(r&~(1<<32-vi(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Qf++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=cV++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},mV={readContext:Xs,useCallback:FP,useContext:Xs,useEffect:ob,useImperativeHandle:LP,useInsertionEffect:MP,useLayoutEffect:DP,useMemo:VP,useReducer:S_,useRef:RP,useState:function(){return S_(Xf)},useDebugValue:lb,useDeferredValue:function(t){var e=Js();return zP(e,tr.memoizedState,t)},useTransition:function(){var t=S_(Xf)[0],e=Js().memoizedState;return[t,e]},useMutableSource:EP,useSyncExternalStore:CP,useId:UP,unstable_isNewReconciler:!1},pV={readContext:Xs,useCallback:FP,useContext:Xs,useEffect:ob,useImperativeHandle:LP,useInsertionEffect:MP,useLayoutEffect:DP,useMemo:VP,useReducer:E_,useRef:RP,useState:function(){return E_(Xf)},useDebugValue:lb,useDeferredValue:function(t){var e=Js();return tr===null?e.memoizedState=t:zP(e,tr.memoizedState,t)},useTransition:function(){var t=E_(Xf)[0],e=Js().memoizedState;return[t,e]},useMutableSource:EP,useSyncExternalStore:CP,useId:UP,unstable_isNewReconciler:!1};function di(t,e){if(t&&t.defaultProps){e=Sn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Q0(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Sn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ix={isMounted:function(t){return(t=t._reactInternals)?Vc(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Hr(),i=tl(t),a=Ba(r,i);a.payload=e,n!=null&&(a.callback=n),e=Jo(t,a,i),e!==null&&(xi(e,t,i,r),Ig(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Hr(),i=tl(t),a=Ba(r,i);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=Jo(t,a,i),e!==null&&(xi(e,t,i,r),Ig(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Hr(),r=tl(t),i=Ba(n,r);i.tag=2,e!=null&&(i.callback=e),e=Jo(t,i,r),e!==null&&(xi(e,t,r,n),Ig(e,t,r))}};function p2(t,e,n,r,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!qf(n,r)||!qf(i,a):!0}function qP(t,e,n){var r=!1,i=ul,a=e.contextType;return typeof a=="object"&&a!==null?a=Xs(a):(i=ls(e)?xc:Or.current,r=e.contextTypes,a=(r=r!=null)?dd(t,i):ul),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ix,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function g2(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ix.enqueueReplaceState(e,e.state,null)}function X0(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},eb(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=Xs(a):(a=ls(e)?xc:Or.current,i.context=dd(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Q0(t,e,a,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ix.enqueueReplaceState(i,i.state,null),xv(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function pd(t,e){try{var n="",r=e;do n+=B6(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function C_(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function J0(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var gV=typeof WeakMap=="function"?WeakMap:Map;function HP(t,e,n){n=Ba(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){jv||(jv=!0,cw=r),J0(t,e)},n}function GP(t,e,n){n=Ba(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){J0(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){J0(t,e),typeof r!="function"&&(el===null?el=new Set([this]):el.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function v2(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new gV;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=PV.bind(null,t,e,n),e.then(t,t))}function x2(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function y2(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ba(-1,1),e.tag=2,Jo(n,e,1))),n.lanes|=1),t)}var vV=lo.ReactCurrentOwner,ss=!1;function $r(t,e,n,r){e.child=t===null?bP(e,null,n,r):fd(e,t.child,n,r)}function _2(t,e,n,r,i){n=n.render;var a=e.ref;return Xu(e,i),r=ib(t,e,n,r,a,i),n=ab(),t!==null&&!ss?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Za(t,e,i)):(gn&&n&&G1(e),e.flags|=1,$r(t,e,r,i),e.child)}function w2(t,e,n,r,i){if(t===null){var a=n.type;return typeof a=="function"&&!gb(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,KP(t,e,a,r,i)):(t=Lg(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:qf,n(o,r)&&t.ref===e.ref)return Za(t,e,i)}return e.flags|=1,t=nl(a,r),t.ref=e.ref,t.return=e,e.child=t}function KP(t,e,n,r,i){if(t!==null){var a=t.memoizedProps;if(qf(a,r)&&t.ref===e.ref)if(ss=!1,e.pendingProps=r=a,(t.lanes&i)!==0)t.flags&131072&&(ss=!0);else return e.lanes=t.lanes,Za(t,e,i)}return ew(t,e,n,r,i)}function ZP(t,e,n){var r=e.pendingProps,i=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},rn(Hu,ys),ys|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,rn(Hu,ys),ys|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,rn(Hu,ys),ys|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,rn(Hu,ys),ys|=r;return $r(t,e,i,n),e.child}function YP(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ew(t,e,n,r,i){var a=ls(n)?xc:Or.current;return a=dd(e,a),Xu(e,i),n=ib(t,e,n,r,a,i),r=ab(),t!==null&&!ss?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Za(t,e,i)):(gn&&r&&G1(e),e.flags|=1,$r(t,e,n,i),e.child)}function b2(t,e,n,r,i){if(ls(n)){var a=!0;fv(e)}else a=!1;if(Xu(e,i),e.stateNode===null)Mg(t,e),qP(e,n,r),X0(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Xs(h):(h=ls(n)?xc:Or.current,h=dd(e,h));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==h)&&g2(e,o,r,h),Ao=!1;var v=e.memoizedState;o.state=v,xv(e,r,o,i),u=e.memoizedState,c!==r||v!==u||os.current||Ao?(typeof f=="function"&&(Q0(e,n,f,r),u=e.memoizedState),(c=Ao||p2(e,n,c,r,v,u,h))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,NP(t,e),c=e.memoizedProps,h=e.type===e.elementType?c:di(e.type,c),o.props=h,p=e.pendingProps,v=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Xs(u):(u=ls(n)?xc:Or.current,u=dd(e,u));var _=n.getDerivedStateFromProps;(f=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==p||v!==u)&&g2(e,o,r,u),Ao=!1,v=e.memoizedState,o.state=v,xv(e,r,o,i);var N=e.memoizedState;c!==p||v!==N||os.current||Ao?(typeof _=="function"&&(Q0(e,n,_,r),N=e.memoizedState),(h=Ao||p2(e,n,h,r,v,N,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,N,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,N,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),o.props=r,o.state=N,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),r=!1)}return tw(t,e,n,r,a,i)}function tw(t,e,n,r,i,a){YP(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&o2(e,n,!1),Za(t,e,a);r=e.stateNode,vV.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=fd(e,t.child,null,a),e.child=fd(e,null,c,a)):$r(t,e,c,a),e.memoizedState=r.state,i&&o2(e,n,!0),e.child}function QP(t){var e=t.stateNode;e.pendingContext?a2(t,e.pendingContext,e.pendingContext!==e.context):e.context&&a2(t,e.context,!1),tb(t,e.containerInfo)}function j2(t,e,n,r,i){return hd(),Z1(i),e.flags|=256,$r(t,e,n,r),e.child}var nw={dehydrated:null,treeContext:null,retryLane:0};function rw(t){return{baseLanes:t,cachePool:null,transitions:null}}function XP(t,e,n){var r=e.pendingProps,i=jn.current,a=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(i&2)!==0),c?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),rn(jn,i&1),t===null)return Z0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Mx(o,r,0,null),t=lc(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=rw(n),e.memoizedState=nw,t):cb(e,o));if(i=t.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return xV(t,e,o,r,c,i,n);if(a){a=r.fallback,o=e.mode,i=t.child,c=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=nl(i,u),r.subtreeFlags=i.subtreeFlags&14680064),c!==null?a=nl(c,a):(a=lc(a,o,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=t.child.memoizedState,o=o===null?rw(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=nw,r}return a=t.child,t=a.sibling,r=nl(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function cb(t,e){return e=Mx({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ng(t,e,n,r){return r!==null&&Z1(r),fd(e,t.child,null,n),t=cb(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function xV(t,e,n,r,i,a,o){if(n)return e.flags&256?(e.flags&=-257,r=C_(Error(ve(422))),ng(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=Mx({mode:"visible",children:r.children},i,0,null),a=lc(a,i,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&fd(e,t.child,null,o),e.child.memoizedState=rw(o),e.memoizedState=nw,a);if(!(e.mode&1))return ng(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var c=r.dgst;return r=c,a=Error(ve(419)),r=C_(a,r,void 0),ng(t,e,o,r)}if(c=(o&t.childLanes)!==0,ss||c){if(r=hr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Ka(t,i),xi(r,t,i,-1))}return pb(),r=C_(Error(ve(421))),ng(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=IV.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,ws=Xo(i.nextSibling),Ns=e,gn=!0,mi=null,t!==null&&(Us[$s++]=Fa,Us[$s++]=Va,Us[$s++]=yc,Fa=t.id,Va=t.overflow,yc=e),e=cb(e,r.children),e.flags|=4096,e)}function N2(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Y0(t.return,e,n)}function k_(t,e,n,r,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function JP(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if($r(t,e,r.children,n),r=jn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&N2(t,n,e);else if(t.tag===19)N2(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(rn(jn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&yv(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),k_(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&yv(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}k_(e,!0,n,null,a);break;case"together":k_(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Mg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Za(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),wc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ve(153));if(e.child!==null){for(t=e.child,n=nl(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=nl(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function yV(t,e,n){switch(e.tag){case 3:QP(e),hd();break;case 5:SP(e);break;case 1:ls(e.type)&&fv(e);break;case 4:tb(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;rn(gv,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(rn(jn,jn.current&1),e.flags|=128,null):n&e.child.childLanes?XP(t,e,n):(rn(jn,jn.current&1),t=Za(t,e,n),t!==null?t.sibling:null);rn(jn,jn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return JP(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),rn(jn,jn.current),r)break;return null;case 22:case 23:return e.lanes=0,ZP(t,e,n)}return Za(t,e,n)}var eI,sw,tI,nI;eI=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};sw=function(){};tI=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,tc(Ji.current);var a=null;switch(n){case"input":i=E0(t,i),r=E0(t,r),a=[];break;case"select":i=Sn({},i,{value:void 0}),r=Sn({},r,{value:void 0}),a=[];break;case"textarea":i=T0(t,i),r=T0(t,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=dv)}I0(n,r);var o;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var c=i[h];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Ff.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in r){var u=r[h];if(c=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&u!==c&&(u!=null||c!=null))if(h==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(a=a||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Ff.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&ln("scroll",t),a||c===u||(a=[])):(a=a||[]).push(h,u))}n&&(a=a||[]).push("style",n);var h=a;(e.updateQueue=h)&&(e.flags|=4)}};nI=function(t,e,n,r){n!==r&&(e.flags|=4)};function Gh(t,e){if(!gn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Er(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function _V(t,e,n){var r=e.pendingProps;switch(K1(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Er(e),null;case 1:return ls(e.type)&&hv(),Er(e),null;case 3:return r=e.stateNode,md(),dn(os),dn(Or),rb(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(eg(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,mi!==null&&(hw(mi),mi=null))),sw(t,e),Er(e),null;case 5:nb(e);var i=tc(Yf.current);if(n=e.type,t!==null&&e.stateNode!=null)tI(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ve(166));return Er(e),null}if(t=tc(Ji.current),eg(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[Bi]=e,r[Kf]=a,t=(e.mode&1)!==0,n){case"dialog":ln("cancel",r),ln("close",r);break;case"iframe":case"object":case"embed":ln("load",r);break;case"video":case"audio":for(i=0;i<lf.length;i++)ln(lf[i],r);break;case"source":ln("error",r);break;case"img":case"image":case"link":ln("error",r),ln("load",r);break;case"details":ln("toggle",r);break;case"input":RS(r,a),ln("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},ln("invalid",r);break;case"textarea":DS(r,a),ln("invalid",r)}I0(n,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var c=a[o];o==="children"?typeof c=="string"?r.textContent!==c&&(a.suppressHydrationWarning!==!0&&Jp(r.textContent,c,t),i=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(a.suppressHydrationWarning!==!0&&Jp(r.textContent,c,t),i=["children",""+c]):Ff.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&ln("scroll",r)}switch(n){case"input":qp(r),MS(r,a,!0);break;case"textarea":qp(r),OS(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=dv)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=PT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Bi]=e,t[Kf]=r,eI(t,e,!1,!1),e.stateNode=t;e:{switch(o=A0(n,r),n){case"dialog":ln("cancel",t),ln("close",t),i=r;break;case"iframe":case"object":case"embed":ln("load",t),i=r;break;case"video":case"audio":for(i=0;i<lf.length;i++)ln(lf[i],t);i=r;break;case"source":ln("error",t),i=r;break;case"img":case"image":case"link":ln("error",t),ln("load",t),i=r;break;case"details":ln("toggle",t),i=r;break;case"input":RS(t,r),i=E0(t,r),ln("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Sn({},r,{value:void 0}),ln("invalid",t);break;case"textarea":DS(t,r),i=T0(t,r),ln("invalid",t);break;default:i=r}I0(n,i),c=i;for(a in c)if(c.hasOwnProperty(a)){var u=c[a];a==="style"?RT(t,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&IT(t,u)):a==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Vf(t,u):typeof u=="number"&&Vf(t,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Ff.hasOwnProperty(a)?u!=null&&a==="onScroll"&&ln("scroll",t):u!=null&&R1(t,a,u,o))}switch(n){case"input":qp(t),MS(t,r,!1);break;case"textarea":qp(t),OS(t);break;case"option":r.value!=null&&t.setAttribute("value",""+cl(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?Ku(t,!!r.multiple,a,!1):r.defaultValue!=null&&Ku(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=dv)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Er(e),null;case 6:if(t&&e.stateNode!=null)nI(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ve(166));if(n=tc(Yf.current),tc(Ji.current),eg(e)){if(r=e.stateNode,n=e.memoizedProps,r[Bi]=e,(a=r.nodeValue!==n)&&(t=Ns,t!==null))switch(t.tag){case 3:Jp(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Jp(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Bi]=e,e.stateNode=r}return Er(e),null;case 13:if(dn(jn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(gn&&ws!==null&&e.mode&1&&!(e.flags&128))_P(),hd(),e.flags|=98560,a=!1;else if(a=eg(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(ve(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ve(317));a[Bi]=e}else hd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Er(e),a=!1}else mi!==null&&(hw(mi),mi=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||jn.current&1?rr===0&&(rr=3):pb())),e.updateQueue!==null&&(e.flags|=4),Er(e),null);case 4:return md(),sw(t,e),t===null&&Hf(e.stateNode.containerInfo),Er(e),null;case 10:return X1(e.type._context),Er(e),null;case 17:return ls(e.type)&&hv(),Er(e),null;case 19:if(dn(jn),a=e.memoizedState,a===null)return Er(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)Gh(a,!1);else{if(rr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=yv(t),o!==null){for(e.flags|=128,Gh(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return rn(jn,jn.current&1|2),e.child}t=t.sibling}a.tail!==null&&Dn()>gd&&(e.flags|=128,r=!0,Gh(a,!1),e.lanes=4194304)}else{if(!r)if(t=yv(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Gh(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!gn)return Er(e),null}else 2*Dn()-a.renderingStartTime>gd&&n!==1073741824&&(e.flags|=128,r=!0,Gh(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Dn(),e.sibling=null,n=jn.current,rn(jn,r?n&1|2:n&1),e):(Er(e),null);case 22:case 23:return mb(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ys&1073741824&&(Er(e),e.subtreeFlags&6&&(e.flags|=8192)):Er(e),null;case 24:return null;case 25:return null}throw Error(ve(156,e.tag))}function wV(t,e){switch(K1(e),e.tag){case 1:return ls(e.type)&&hv(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return md(),dn(os),dn(Or),rb(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return nb(e),null;case 13:if(dn(jn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ve(340));hd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return dn(jn),null;case 4:return md(),null;case 10:return X1(e.type._context),null;case 22:case 23:return mb(),null;case 24:return null;default:return null}}var rg=!1,Pr=!1,bV=typeof WeakSet=="function"?WeakSet:Set,$e=null;function qu(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){kn(t,e,r)}else n.current=null}function iw(t,e,n){try{n()}catch(r){kn(t,e,r)}}var S2=!1;function jV(t,e){if($0=lv,t=oP(),H1(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,h=0,f=0,p=t,v=null;t:for(;;){for(var _;p!==n||i!==0&&p.nodeType!==3||(c=o+i),p!==a||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(_=p.firstChild)!==null;)v=p,p=_;for(;;){if(p===t)break t;if(v===n&&++h===i&&(c=o),v===a&&++f===r&&(u=o),(_=p.nextSibling)!==null)break;p=v,v=p.parentNode}p=_}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(B0={focusedElem:t,selectionRange:n},lv=!1,$e=e;$e!==null;)if(e=$e,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$e=t;else for(;$e!==null;){e=$e;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var j=N.memoizedProps,S=N.memoizedState,w=e.stateNode,y=w.getSnapshotBeforeUpdate(e.elementType===e.type?j:di(e.type,j),S);w.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ve(163))}}catch(I){kn(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,$e=t;break}$e=e.return}return N=S2,S2=!1,N}function Sf(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&iw(e,n,a)}i=i.next}while(i!==r)}}function Ax(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function aw(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function rI(t){var e=t.alternate;e!==null&&(t.alternate=null,rI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Bi],delete e[Kf],delete e[H0],delete e[iV],delete e[aV])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function sI(t){return t.tag===5||t.tag===3||t.tag===4}function E2(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||sI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ow(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=dv));else if(r!==4&&(t=t.child,t!==null))for(ow(t,e,n),t=t.sibling;t!==null;)ow(t,e,n),t=t.sibling}function lw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(lw(t,e,n),t=t.sibling;t!==null;)lw(t,e,n),t=t.sibling}var pr=null,hi=!1;function So(t,e,n){for(n=n.child;n!==null;)iI(t,e,n),n=n.sibling}function iI(t,e,n){if(Xi&&typeof Xi.onCommitFiberUnmount=="function")try{Xi.onCommitFiberUnmount(Nx,n)}catch{}switch(n.tag){case 5:Pr||qu(n,e);case 6:var r=pr,i=hi;pr=null,So(t,e,n),pr=r,hi=i,pr!==null&&(hi?(t=pr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):pr.removeChild(n.stateNode));break;case 18:pr!==null&&(hi?(t=pr,n=n.stateNode,t.nodeType===8?w_(t.parentNode,n):t.nodeType===1&&w_(t,n),Bf(t)):w_(pr,n.stateNode));break;case 4:r=pr,i=hi,pr=n.stateNode.containerInfo,hi=!0,So(t,e,n),pr=r,hi=i;break;case 0:case 11:case 14:case 15:if(!Pr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&iw(n,e,o),i=i.next}while(i!==r)}So(t,e,n);break;case 1:if(!Pr&&(qu(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){kn(n,e,c)}So(t,e,n);break;case 21:So(t,e,n);break;case 22:n.mode&1?(Pr=(r=Pr)||n.memoizedState!==null,So(t,e,n),Pr=r):So(t,e,n);break;default:So(t,e,n)}}function C2(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new bV),e.forEach(function(r){var i=AV.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function li(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:pr=c.stateNode,hi=!1;break e;case 3:pr=c.stateNode.containerInfo,hi=!0;break e;case 4:pr=c.stateNode.containerInfo,hi=!0;break e}c=c.return}if(pr===null)throw Error(ve(160));iI(a,o,i),pr=null,hi=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(h){kn(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)aI(e,t),e=e.sibling}function aI(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(li(e,t),Fi(t),r&4){try{Sf(3,t,t.return),Ax(3,t)}catch(j){kn(t,t.return,j)}try{Sf(5,t,t.return)}catch(j){kn(t,t.return,j)}}break;case 1:li(e,t),Fi(t),r&512&&n!==null&&qu(n,n.return);break;case 5:if(li(e,t),Fi(t),r&512&&n!==null&&qu(n,n.return),t.flags&32){var i=t.stateNode;try{Vf(i,"")}catch(j){kn(t,t.return,j)}}if(r&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&a.type==="radio"&&a.name!=null&&kT(i,a),A0(c,o);var h=A0(c,a);for(o=0;o<u.length;o+=2){var f=u[o],p=u[o+1];f==="style"?RT(i,p):f==="dangerouslySetInnerHTML"?IT(i,p):f==="children"?Vf(i,p):R1(i,f,p,h)}switch(c){case"input":C0(i,a);break;case"textarea":TT(i,a);break;case"select":var v=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var _=a.value;_!=null?Ku(i,!!a.multiple,_,!1):v!==!!a.multiple&&(a.defaultValue!=null?Ku(i,!!a.multiple,a.defaultValue,!0):Ku(i,!!a.multiple,a.multiple?[]:"",!1))}i[Kf]=a}catch(j){kn(t,t.return,j)}}break;case 6:if(li(e,t),Fi(t),r&4){if(t.stateNode===null)throw Error(ve(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(j){kn(t,t.return,j)}}break;case 3:if(li(e,t),Fi(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Bf(e.containerInfo)}catch(j){kn(t,t.return,j)}break;case 4:li(e,t),Fi(t);break;case 13:li(e,t),Fi(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(hb=Dn())),r&4&&C2(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Pr=(h=Pr)||f,li(e,t),Pr=h):li(e,t),Fi(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!f&&t.mode&1)for($e=t,f=t.child;f!==null;){for(p=$e=f;$e!==null;){switch(v=$e,_=v.child,v.tag){case 0:case 11:case 14:case 15:Sf(4,v,v.return);break;case 1:qu(v,v.return);var N=v.stateNode;if(typeof N.componentWillUnmount=="function"){r=v,n=v.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(j){kn(r,n,j)}}break;case 5:qu(v,v.return);break;case 22:if(v.memoizedState!==null){T2(p);continue}}_!==null?(_.return=v,$e=_):T2(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{i=p.stateNode,h?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(c=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=AT("display",o))}catch(j){kn(t,t.return,j)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(j){kn(t,t.return,j)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:li(e,t),Fi(t),r&4&&C2(t);break;case 21:break;default:li(e,t),Fi(t)}}function Fi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(sI(n)){var r=n;break e}n=n.return}throw Error(ve(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Vf(i,""),r.flags&=-33);var a=E2(t);lw(t,a,i);break;case 3:case 4:var o=r.stateNode.containerInfo,c=E2(t);ow(t,c,o);break;default:throw Error(ve(161))}}catch(u){kn(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function NV(t,e,n){$e=t,oI(t)}function oI(t,e,n){for(var r=(t.mode&1)!==0;$e!==null;){var i=$e,a=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||rg;if(!o){var c=i.alternate,u=c!==null&&c.memoizedState!==null||Pr;c=rg;var h=Pr;if(rg=o,(Pr=u)&&!h)for($e=i;$e!==null;)o=$e,u=o.child,o.tag===22&&o.memoizedState!==null?P2(i):u!==null?(u.return=o,$e=u):P2(i);for(;a!==null;)$e=a,oI(a),a=a.sibling;$e=i,rg=c,Pr=h}k2(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,$e=a):k2(t)}}function k2(t){for(;$e!==null;){var e=$e;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Pr||Ax(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Pr)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:di(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&h2(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}h2(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&Bf(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ve(163))}Pr||e.flags&512&&aw(e)}catch(v){kn(e,e.return,v)}}if(e===t){$e=null;break}if(n=e.sibling,n!==null){n.return=e.return,$e=n;break}$e=e.return}}function T2(t){for(;$e!==null;){var e=$e;if(e===t){$e=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$e=n;break}$e=e.return}}function P2(t){for(;$e!==null;){var e=$e;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ax(4,e)}catch(u){kn(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){kn(e,i,u)}}var a=e.return;try{aw(e)}catch(u){kn(e,a,u)}break;case 5:var o=e.return;try{aw(e)}catch(u){kn(e,o,u)}}}catch(u){kn(e,e.return,u)}if(e===t){$e=null;break}var c=e.sibling;if(c!==null){c.return=e.return,$e=c;break}$e=e.return}}var SV=Math.ceil,bv=lo.ReactCurrentDispatcher,ub=lo.ReactCurrentOwner,Gs=lo.ReactCurrentBatchConfig,Mt=0,hr=null,Gn=null,yr=0,ys=0,Hu=Sl(0),rr=0,em=null,wc=0,Rx=0,db=0,Ef=null,ns=null,hb=0,gd=1/0,Da=null,jv=!1,cw=null,el=null,sg=!1,Wo=null,Nv=0,Cf=0,uw=null,Dg=-1,Og=0;function Hr(){return Mt&6?Dn():Dg!==-1?Dg:Dg=Dn()}function tl(t){return t.mode&1?Mt&2&&yr!==0?yr&-yr:lV.transition!==null?(Og===0&&(Og=qT()),Og):(t=Gt,t!==0||(t=window.event,t=t===void 0?16:XT(t.type)),t):1}function xi(t,e,n,r){if(50<Cf)throw Cf=0,uw=null,Error(ve(185));Cm(t,n,r),(!(Mt&2)||t!==hr)&&(t===hr&&(!(Mt&2)&&(Rx|=n),rr===4&&Oo(t,yr)),cs(t,r),n===1&&Mt===0&&!(e.mode&1)&&(gd=Dn()+500,Tx&&El()))}function cs(t,e){var n=t.callbackNode;lF(t,e);var r=ov(t,t===hr?yr:0);if(r===0)n!==null&&VS(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&VS(n),e===1)t.tag===0?oV(I2.bind(null,t)):vP(I2.bind(null,t)),rV(function(){!(Mt&6)&&El()}),n=null;else{switch(HT(r)){case 1:n=F1;break;case 4:n=BT;break;case 16:n=av;break;case 536870912:n=WT;break;default:n=av}n=pI(n,lI.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function lI(t,e){if(Dg=-1,Og=0,Mt&6)throw Error(ve(327));var n=t.callbackNode;if(Ju()&&t.callbackNode!==n)return null;var r=ov(t,t===hr?yr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Sv(t,r);else{e=r;var i=Mt;Mt|=2;var a=uI();(hr!==t||yr!==e)&&(Da=null,gd=Dn()+500,oc(t,e));do try{kV();break}catch(c){cI(t,c)}while(!0);Q1(),bv.current=a,Mt=i,Gn!==null?e=0:(hr=null,yr=0,e=rr)}if(e!==0){if(e===2&&(i=L0(t),i!==0&&(r=i,e=dw(t,i))),e===1)throw n=em,oc(t,0),Oo(t,r),cs(t,Dn()),n;if(e===6)Oo(t,r);else{if(i=t.current.alternate,!(r&30)&&!EV(i)&&(e=Sv(t,r),e===2&&(a=L0(t),a!==0&&(r=a,e=dw(t,a))),e===1))throw n=em,oc(t,0),Oo(t,r),cs(t,Dn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ve(345));case 2:Yl(t,ns,Da);break;case 3:if(Oo(t,r),(r&130023424)===r&&(e=hb+500-Dn(),10<e)){if(ov(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Hr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=q0(Yl.bind(null,t,ns,Da),e);break}Yl(t,ns,Da);break;case 4:if(Oo(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-vi(r);a=1<<o,o=e[o],o>i&&(i=o),r&=~a}if(r=i,r=Dn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*SV(r/1960))-r,10<r){t.timeoutHandle=q0(Yl.bind(null,t,ns,Da),r);break}Yl(t,ns,Da);break;case 5:Yl(t,ns,Da);break;default:throw Error(ve(329))}}}return cs(t,Dn()),t.callbackNode===n?lI.bind(null,t):null}function dw(t,e){var n=Ef;return t.current.memoizedState.isDehydrated&&(oc(t,e).flags|=256),t=Sv(t,e),t!==2&&(e=ns,ns=n,e!==null&&hw(e)),t}function hw(t){ns===null?ns=t:ns.push.apply(ns,t)}function EV(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ji(a(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Oo(t,e){for(e&=~db,e&=~Rx,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vi(e),r=1<<n;t[n]=-1,e&=~r}}function I2(t){if(Mt&6)throw Error(ve(327));Ju();var e=ov(t,0);if(!(e&1))return cs(t,Dn()),null;var n=Sv(t,e);if(t.tag!==0&&n===2){var r=L0(t);r!==0&&(e=r,n=dw(t,r))}if(n===1)throw n=em,oc(t,0),Oo(t,e),cs(t,Dn()),n;if(n===6)throw Error(ve(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Yl(t,ns,Da),cs(t,Dn()),null}function fb(t,e){var n=Mt;Mt|=1;try{return t(e)}finally{Mt=n,Mt===0&&(gd=Dn()+500,Tx&&El())}}function bc(t){Wo!==null&&Wo.tag===0&&!(Mt&6)&&Ju();var e=Mt;Mt|=1;var n=Gs.transition,r=Gt;try{if(Gs.transition=null,Gt=1,t)return t()}finally{Gt=r,Gs.transition=n,Mt=e,!(Mt&6)&&El()}}function mb(){ys=Hu.current,dn(Hu)}function oc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,nV(n)),Gn!==null)for(n=Gn.return;n!==null;){var r=n;switch(K1(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&hv();break;case 3:md(),dn(os),dn(Or),rb();break;case 5:nb(r);break;case 4:md();break;case 13:dn(jn);break;case 19:dn(jn);break;case 10:X1(r.type._context);break;case 22:case 23:mb()}n=n.return}if(hr=t,Gn=t=nl(t.current,null),yr=ys=e,rr=0,em=null,db=Rx=wc=0,ns=Ef=null,ec!==null){for(e=0;e<ec.length;e++)if(n=ec[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=i,r.next=o}n.pending=r}ec=null}return t}function cI(t,e){do{var n=Gn;try{if(Q1(),Ag.current=wv,_v){for(var r=Nn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}_v=!1}if(_c=0,ur=tr=Nn=null,Nf=!1,Qf=0,ub.current=null,n===null||n.return===null){rr=1,em=e,Gn=null;break}e:{var a=t,o=n.return,c=n,u=e;if(e=yr,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,f=c,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var v=f.alternate;v?(f.updateQueue=v.updateQueue,f.memoizedState=v.memoizedState,f.lanes=v.lanes):(f.updateQueue=null,f.memoizedState=null)}var _=x2(o);if(_!==null){_.flags&=-257,y2(_,o,c,a,e),_.mode&1&&v2(a,h,e),e=_,u=h;var N=e.updateQueue;if(N===null){var j=new Set;j.add(u),e.updateQueue=j}else N.add(u);break e}else{if(!(e&1)){v2(a,h,e),pb();break e}u=Error(ve(426))}}else if(gn&&c.mode&1){var S=x2(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),y2(S,o,c,a,e),Z1(pd(u,c));break e}}a=u=pd(u,c),rr!==4&&(rr=2),Ef===null?Ef=[a]:Ef.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var w=HP(a,u,e);d2(a,w);break e;case 1:c=u;var y=a.type,E=a.stateNode;if(!(a.flags&128)&&(typeof y.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(el===null||!el.has(E)))){a.flags|=65536,e&=-e,a.lanes|=e;var I=GP(a,c,e);d2(a,I);break e}}a=a.return}while(a!==null)}hI(n)}catch(D){e=D,Gn===n&&n!==null&&(Gn=n=n.return);continue}break}while(!0)}function uI(){var t=bv.current;return bv.current=wv,t===null?wv:t}function pb(){(rr===0||rr===3||rr===2)&&(rr=4),hr===null||!(wc&268435455)&&!(Rx&268435455)||Oo(hr,yr)}function Sv(t,e){var n=Mt;Mt|=2;var r=uI();(hr!==t||yr!==e)&&(Da=null,oc(t,e));do try{CV();break}catch(i){cI(t,i)}while(!0);if(Q1(),Mt=n,bv.current=r,Gn!==null)throw Error(ve(261));return hr=null,yr=0,rr}function CV(){for(;Gn!==null;)dI(Gn)}function kV(){for(;Gn!==null&&!J6();)dI(Gn)}function dI(t){var e=mI(t.alternate,t,ys);t.memoizedProps=t.pendingProps,e===null?hI(t):Gn=e,ub.current=null}function hI(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=wV(n,e),n!==null){n.flags&=32767,Gn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{rr=6,Gn=null;return}}else if(n=_V(n,e,ys),n!==null){Gn=n;return}if(e=e.sibling,e!==null){Gn=e;return}Gn=e=t}while(e!==null);rr===0&&(rr=5)}function Yl(t,e,n){var r=Gt,i=Gs.transition;try{Gs.transition=null,Gt=1,TV(t,e,n,r)}finally{Gs.transition=i,Gt=r}return null}function TV(t,e,n,r){do Ju();while(Wo!==null);if(Mt&6)throw Error(ve(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ve(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(cF(t,a),t===hr&&(Gn=hr=null,yr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||sg||(sg=!0,pI(av,function(){return Ju(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Gs.transition,Gs.transition=null;var o=Gt;Gt=1;var c=Mt;Mt|=4,ub.current=null,jV(t,n),aI(n,t),ZF(B0),lv=!!$0,B0=$0=null,t.current=n,NV(n),eF(),Mt=c,Gt=o,Gs.transition=a}else t.current=n;if(sg&&(sg=!1,Wo=t,Nv=i),a=t.pendingLanes,a===0&&(el=null),rF(n.stateNode),cs(t,Dn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(jv)throw jv=!1,t=cw,cw=null,t;return Nv&1&&t.tag!==0&&Ju(),a=t.pendingLanes,a&1?t===uw?Cf++:(Cf=0,uw=t):Cf=0,El(),null}function Ju(){if(Wo!==null){var t=HT(Nv),e=Gs.transition,n=Gt;try{if(Gs.transition=null,Gt=16>t?16:t,Wo===null)var r=!1;else{if(t=Wo,Wo=null,Nv=0,Mt&6)throw Error(ve(331));var i=Mt;for(Mt|=4,$e=t.current;$e!==null;){var a=$e,o=a.child;if($e.flags&16){var c=a.deletions;if(c!==null){for(var u=0;u<c.length;u++){var h=c[u];for($e=h;$e!==null;){var f=$e;switch(f.tag){case 0:case 11:case 15:Sf(8,f,a)}var p=f.child;if(p!==null)p.return=f,$e=p;else for(;$e!==null;){f=$e;var v=f.sibling,_=f.return;if(rI(f),f===h){$e=null;break}if(v!==null){v.return=_,$e=v;break}$e=_}}}var N=a.alternate;if(N!==null){var j=N.child;if(j!==null){N.child=null;do{var S=j.sibling;j.sibling=null,j=S}while(j!==null)}}$e=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,$e=o;else e:for(;$e!==null;){if(a=$e,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Sf(9,a,a.return)}var w=a.sibling;if(w!==null){w.return=a.return,$e=w;break e}$e=a.return}}var y=t.current;for($e=y;$e!==null;){o=$e;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,$e=E;else e:for(o=y;$e!==null;){if(c=$e,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Ax(9,c)}}catch(D){kn(c,c.return,D)}if(c===o){$e=null;break e}var I=c.sibling;if(I!==null){I.return=c.return,$e=I;break e}$e=c.return}}if(Mt=i,El(),Xi&&typeof Xi.onPostCommitFiberRoot=="function")try{Xi.onPostCommitFiberRoot(Nx,t)}catch{}r=!0}return r}finally{Gt=n,Gs.transition=e}}return!1}function A2(t,e,n){e=pd(n,e),e=HP(t,e,1),t=Jo(t,e,1),e=Hr(),t!==null&&(Cm(t,1,e),cs(t,e))}function kn(t,e,n){if(t.tag===3)A2(t,t,n);else for(;e!==null;){if(e.tag===3){A2(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(el===null||!el.has(r))){t=pd(n,t),t=GP(e,t,1),e=Jo(e,t,1),t=Hr(),e!==null&&(Cm(e,1,t),cs(e,t));break}}e=e.return}}function PV(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Hr(),t.pingedLanes|=t.suspendedLanes&n,hr===t&&(yr&n)===n&&(rr===4||rr===3&&(yr&130023424)===yr&&500>Dn()-hb?oc(t,0):db|=n),cs(t,e)}function fI(t,e){e===0&&(t.mode&1?(e=Kp,Kp<<=1,!(Kp&130023424)&&(Kp=4194304)):e=1);var n=Hr();t=Ka(t,e),t!==null&&(Cm(t,e,n),cs(t,n))}function IV(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),fI(t,n)}function AV(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ve(314))}r!==null&&r.delete(e),fI(t,n)}var mI;mI=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||os.current)ss=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ss=!1,yV(t,e,n);ss=!!(t.flags&131072)}else ss=!1,gn&&e.flags&1048576&&xP(e,pv,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Mg(t,e),t=e.pendingProps;var i=dd(e,Or.current);Xu(e,n),i=ib(null,e,r,t,i,n);var a=ab();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ls(r)?(a=!0,fv(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,eb(e),i.updater=Ix,e.stateNode=i,i._reactInternals=e,X0(e,r,t,n),e=tw(null,e,r,!0,a,n)):(e.tag=0,gn&&a&&G1(e),$r(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Mg(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=MV(r),t=di(r,t),i){case 0:e=ew(null,e,r,t,n);break e;case 1:e=b2(null,e,r,t,n);break e;case 11:e=_2(null,e,r,t,n);break e;case 14:e=w2(null,e,r,di(r.type,t),n);break e}throw Error(ve(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:di(r,i),ew(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:di(r,i),b2(t,e,r,i,n);case 3:e:{if(QP(e),t===null)throw Error(ve(387));r=e.pendingProps,a=e.memoizedState,i=a.element,NP(t,e),xv(e,r,null,n);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=pd(Error(ve(423)),e),e=j2(t,e,r,n,i);break e}else if(r!==i){i=pd(Error(ve(424)),e),e=j2(t,e,r,n,i);break e}else for(ws=Xo(e.stateNode.containerInfo.firstChild),Ns=e,gn=!0,mi=null,n=bP(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(hd(),r===i){e=Za(t,e,n);break e}$r(t,e,r,n)}e=e.child}return e;case 5:return SP(e),t===null&&Z0(e),r=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,W0(r,i)?o=null:a!==null&&W0(r,a)&&(e.flags|=32),YP(t,e),$r(t,e,o,n),e.child;case 6:return t===null&&Z0(e),null;case 13:return XP(t,e,n);case 4:return tb(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=fd(e,null,r,n):$r(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:di(r,i),_2(t,e,r,i,n);case 7:return $r(t,e,e.pendingProps,n),e.child;case 8:return $r(t,e,e.pendingProps.children,n),e.child;case 12:return $r(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,rn(gv,r._currentValue),r._currentValue=o,a!==null)if(ji(a.value,o)){if(a.children===i.children&&!os.current){e=Za(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var c=a.dependencies;if(c!==null){o=a.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(a.tag===1){u=Ba(-1,n&-n),u.tag=2;var h=a.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?u.next=u:(u.next=f.next,f.next=u),h.pending=u}}a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),Y0(a.return,n,e),c.lanes|=n;break}u=u.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(ve(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Y0(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}$r(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Xu(e,n),i=Xs(i),r=r(i),e.flags|=1,$r(t,e,r,n),e.child;case 14:return r=e.type,i=di(r,e.pendingProps),i=di(r.type,i),w2(t,e,r,i,n);case 15:return KP(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:di(r,i),Mg(t,e),e.tag=1,ls(r)?(t=!0,fv(e)):t=!1,Xu(e,n),qP(e,r,i),X0(e,r,i,n),tw(null,e,r,!0,t,n);case 19:return JP(t,e,n);case 22:return ZP(t,e,n)}throw Error(ve(156,e.tag))};function pI(t,e){return $T(t,e)}function RV(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ws(t,e,n,r){return new RV(t,e,n,r)}function gb(t){return t=t.prototype,!(!t||!t.isReactComponent)}function MV(t){if(typeof t=="function")return gb(t)?1:0;if(t!=null){if(t=t.$$typeof,t===D1)return 11;if(t===O1)return 14}return 2}function nl(t,e){var n=t.alternate;return n===null?(n=Ws(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Lg(t,e,n,r,i,a){var o=2;if(r=t,typeof t=="function")gb(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ou:return lc(n.children,i,a,e);case M1:o=8,i|=8;break;case b0:return t=Ws(12,n,e,i|2),t.elementType=b0,t.lanes=a,t;case j0:return t=Ws(13,n,e,i),t.elementType=j0,t.lanes=a,t;case N0:return t=Ws(19,n,e,i),t.elementType=N0,t.lanes=a,t;case ST:return Mx(n,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case jT:o=10;break e;case NT:o=9;break e;case D1:o=11;break e;case O1:o=14;break e;case Io:o=16,r=null;break e}throw Error(ve(130,t==null?t:typeof t,""))}return e=Ws(o,n,e,i),e.elementType=t,e.type=r,e.lanes=a,e}function lc(t,e,n,r){return t=Ws(7,t,r,e),t.lanes=n,t}function Mx(t,e,n,r){return t=Ws(22,t,r,e),t.elementType=ST,t.lanes=n,t.stateNode={isHidden:!1},t}function T_(t,e,n){return t=Ws(6,t,null,e),t.lanes=n,t}function P_(t,e,n){return e=Ws(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function DV(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=u_(0),this.expirationTimes=u_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=u_(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function vb(t,e,n,r,i,a,o,c,u){return t=new DV(t,e,n,c,u),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Ws(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},eb(a),t}function OV(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Du,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function gI(t){if(!t)return ul;t=t._reactInternals;e:{if(Vc(t)!==t||t.tag!==1)throw Error(ve(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ls(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ve(171))}if(t.tag===1){var n=t.type;if(ls(n))return gP(t,n,e)}return e}function vI(t,e,n,r,i,a,o,c,u){return t=vb(n,r,!0,t,i,a,o,c,u),t.context=gI(null),n=t.current,r=Hr(),i=tl(n),a=Ba(r,i),a.callback=e??null,Jo(n,a,i),t.current.lanes=i,Cm(t,i,r),cs(t,r),t}function Dx(t,e,n,r){var i=e.current,a=Hr(),o=tl(i);return n=gI(n),e.context===null?e.context=n:e.pendingContext=n,e=Ba(a,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Jo(i,e,o),t!==null&&(xi(t,i,o,a),Ig(t,i,o)),o}function Ev(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function R2(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function xb(t,e){R2(t,e),(t=t.alternate)&&R2(t,e)}function LV(){return null}var xI=typeof reportError=="function"?reportError:function(t){console.error(t)};function yb(t){this._internalRoot=t}Ox.prototype.render=yb.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ve(409));Dx(t,e,null,null)};Ox.prototype.unmount=yb.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;bc(function(){Dx(null,t,null,null)}),e[Ga]=null}};function Ox(t){this._internalRoot=t}Ox.prototype.unstable_scheduleHydration=function(t){if(t){var e=ZT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Do.length&&e!==0&&e<Do[n].priority;n++);Do.splice(n,0,t),n===0&&QT(t)}};function _b(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Lx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function M2(){}function FV(t,e,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var h=Ev(o);a.call(h)}}var o=vI(e,r,t,0,null,!1,!1,"",M2);return t._reactRootContainer=o,t[Ga]=o.current,Hf(t.nodeType===8?t.parentNode:t),bc(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var c=r;r=function(){var h=Ev(u);c.call(h)}}var u=vb(t,0,!1,null,null,!1,!1,"",M2);return t._reactRootContainer=u,t[Ga]=u.current,Hf(t.nodeType===8?t.parentNode:t),bc(function(){Dx(e,u,n,r)}),u}function Fx(t,e,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var c=i;i=function(){var u=Ev(o);c.call(u)}}Dx(e,o,t,i)}else o=FV(n,e,t,i,r);return Ev(o)}GT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=of(e.pendingLanes);n!==0&&(V1(e,n|1),cs(e,Dn()),!(Mt&6)&&(gd=Dn()+500,El()))}break;case 13:bc(function(){var r=Ka(t,1);if(r!==null){var i=Hr();xi(r,t,1,i)}}),xb(t,1)}};z1=function(t){if(t.tag===13){var e=Ka(t,134217728);if(e!==null){var n=Hr();xi(e,t,134217728,n)}xb(t,134217728)}};KT=function(t){if(t.tag===13){var e=tl(t),n=Ka(t,e);if(n!==null){var r=Hr();xi(n,t,e,r)}xb(t,e)}};ZT=function(){return Gt};YT=function(t,e){var n=Gt;try{return Gt=t,e()}finally{Gt=n}};M0=function(t,e,n){switch(e){case"input":if(C0(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=kx(r);if(!i)throw Error(ve(90));CT(r),C0(r,i)}}}break;case"textarea":TT(t,n);break;case"select":e=n.value,e!=null&&Ku(t,!!n.multiple,e,!1)}};OT=fb;LT=bc;var VV={usingClientEntryPoint:!1,Events:[Tm,zu,kx,MT,DT,fb]},Kh={findFiberByHostInstance:Jl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zV={bundleType:Kh.bundleType,version:Kh.version,rendererPackageName:Kh.rendererPackageName,rendererConfig:Kh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:lo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=zT(t),t===null?null:t.stateNode},findFiberByHostInstance:Kh.findFiberByHostInstance||LV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ig=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ig.isDisabled&&ig.supportsFiber)try{Nx=ig.inject(zV),Xi=ig}catch{}}Is.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VV;Is.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_b(e))throw Error(ve(200));return OV(t,e,null,n)};Is.createRoot=function(t,e){if(!_b(t))throw Error(ve(299));var n=!1,r="",i=xI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=vb(t,1,!1,null,null,n,!1,r,i),t[Ga]=e.current,Hf(t.nodeType===8?t.parentNode:t),new yb(e)};Is.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ve(188)):(t=Object.keys(t).join(","),Error(ve(268,t)));return t=zT(e),t=t===null?null:t.stateNode,t};Is.flushSync=function(t){return bc(t)};Is.hydrate=function(t,e,n){if(!Lx(e))throw Error(ve(200));return Fx(null,t,e,!0,n)};Is.hydrateRoot=function(t,e,n){if(!_b(t))throw Error(ve(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",o=xI;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=vI(e,null,t,1,n??null,i,!1,a,o),t[Ga]=e.current,Hf(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Ox(e)};Is.render=function(t,e,n){if(!Lx(e))throw Error(ve(200));return Fx(null,t,e,!1,n)};Is.unmountComponentAtNode=function(t){if(!Lx(t))throw Error(ve(40));return t._reactRootContainer?(bc(function(){Fx(null,null,t,!1,function(){t._reactRootContainer=null,t[Ga]=null})}),!0):!1};Is.unstable_batchedUpdates=fb;Is.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Lx(n))throw Error(ve(200));if(t==null||t._reactInternals===void 0)throw Error(ve(38));return Fx(t,e,n,!1,r)};Is.version="18.3.1-next-f1338f8080-20240426";function yI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yI)}catch(t){console.error(t)}}yI(),yT.exports=Is;var Hd=yT.exports;const UV=Sm(Hd);var _I,D2=Hd;_I=D2.createRoot,D2.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tm(){return tm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tm.apply(this,arguments)}var qo;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(qo||(qo={}));const O2="popstate";function $V(t){t===void 0&&(t={});function e(i,a){let{pathname:o="/",search:c="",hash:u=""}=zc(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),fw("",{pathname:o,search:c,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){let o=i.document.querySelector("base"),c="";if(o&&o.getAttribute("href")){let u=i.location.href,h=u.indexOf("#");c=h===-1?u:u.slice(0,h)}return c+"#"+(typeof a=="string"?a:Cv(a))}function r(i,a){wb(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return WV(e,n,r,t)}function Fn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function wb(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function BV(){return Math.random().toString(36).substr(2,8)}function L2(t,e){return{usr:t.state,key:t.key,idx:e}}function fw(t,e,n,r){return n===void 0&&(n=null),tm({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?zc(e):e,{state:n,key:e&&e.key||r||BV()})}function Cv(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function zc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function WV(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,c=qo.Pop,u=null,h=f();h==null&&(h=0,o.replaceState(tm({},o.state,{idx:h}),""));function f(){return(o.state||{idx:null}).idx}function p(){c=qo.Pop;let S=f(),w=S==null?null:S-h;h=S,u&&u({action:c,location:j.location,delta:w})}function v(S,w){c=qo.Push;let y=fw(j.location,S,w);n&&n(y,S),h=f()+1;let E=L2(y,h),I=j.createHref(y);try{o.pushState(E,"",I)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(I)}a&&u&&u({action:c,location:j.location,delta:1})}function _(S,w){c=qo.Replace;let y=fw(j.location,S,w);n&&n(y,S),h=f();let E=L2(y,h),I=j.createHref(y);o.replaceState(E,"",I),a&&u&&u({action:c,location:j.location,delta:0})}function N(S){let w=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof S=="string"?S:Cv(S);return y=y.replace(/ $/,"%20"),Fn(w,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,w)}let j={get action(){return c},get location(){return t(i,o)},listen(S){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(O2,p),u=S,()=>{i.removeEventListener(O2,p),u=null}},createHref(S){return e(i,S)},createURL:N,encodeLocation(S){let w=N(S);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:v,replace:_,go(S){return o.go(S)}};return j}var F2;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(F2||(F2={}));function qV(t,e,n){return n===void 0&&(n="/"),HV(t,e,n)}function HV(t,e,n,r){let i=typeof e=="string"?zc(e):e,a=bb(i.pathname||"/",n);if(a==null)return null;let o=wI(t);GV(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let h=i9(a);c=n9(o[u],h)}return c}function wI(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(a,o,c)=>{let u={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};u.relativePath.startsWith("/")&&(Fn(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let h=rl([r,u.relativePath]),f=n.concat(u);a.children&&a.children.length>0&&(Fn(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),wI(a.children,e,f,h)),!(a.path==null&&!a.index)&&e.push({path:h,score:e9(h,a.index),routesMeta:f})};return t.forEach((a,o)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))i(a,o);else for(let u of bI(a.path))i(a,o,u)}),e}function bI(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=bI(r.join("/")),c=[];return c.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function GV(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:t9(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const KV=/^:[\w-]+$/,ZV=3,YV=2,QV=1,XV=10,JV=-2,V2=t=>t==="*";function e9(t,e){let n=t.split("/"),r=n.length;return n.some(V2)&&(r+=JV),e&&(r+=YV),n.filter(i=>!V2(i)).reduce((i,a)=>i+(KV.test(a)?ZV:a===""?QV:XV),r)}function t9(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function n9(t,e,n){let{routesMeta:r}=t,i={},a="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],h=c===r.length-1,f=a==="/"?e:e.slice(a.length)||"/",p=r9({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},f),v=u.route;if(!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:rl([a,p.pathname]),pathnameBase:c9(rl([a,p.pathnameBase])),route:v}),p.pathnameBase!=="/"&&(a=rl([a,p.pathnameBase]))}return o}function r9(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=s9(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((h,f,p)=>{let{paramName:v,isOptional:_}=f;if(v==="*"){let j=c[p]||"";o=a.slice(0,a.length-j.length).replace(/(.)\/+$/,"$1")}const N=c[p];return _&&!N?h[v]=void 0:h[v]=(N||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:o,pattern:t}}function s9(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),wb(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function i9(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return wb(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function bb(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function a9(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?zc(t):t;return{pathname:n?n.startsWith("/")?n:o9(n,e):e,search:u9(r),hash:d9(i)}}function o9(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function I_(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function l9(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function jb(t,e){let n=l9(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Nb(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=zc(t):(i=tm({},t),Fn(!i.pathname||!i.pathname.includes("?"),I_("?","pathname","search",i)),Fn(!i.pathname||!i.pathname.includes("#"),I_("#","pathname","hash",i)),Fn(!i.search||!i.search.includes("#"),I_("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,c;if(o==null)c=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let v=o.split("/");for(;v[0]==="..";)v.shift(),p-=1;i.pathname=v.join("/")}c=p>=0?e[p]:"/"}let u=a9(i,c),h=o&&o!=="/"&&o.endsWith("/"),f=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(h||f)&&(u.pathname+="/"),u}const rl=t=>t.join("/").replace(/\/\/+/g,"/"),c9=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),u9=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,d9=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function h9(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const jI=["post","put","patch","delete"];new Set(jI);const f9=["get",...jI];new Set(f9);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nm(){return nm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nm.apply(this,arguments)}const Sb=x.createContext(null),m9=x.createContext(null),Cl=x.createContext(null),Vx=x.createContext(null),co=x.createContext({outlet:null,matches:[],isDataRoute:!1}),NI=x.createContext(null);function p9(t,e){let{relative:n}=e===void 0?{}:e;Gd()||Fn(!1);let{basename:r,navigator:i}=x.useContext(Cl),{hash:a,pathname:o,search:c}=EI(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:rl([r,o])),i.createHref({pathname:u,search:c,hash:a})}function Gd(){return x.useContext(Vx)!=null}function uo(){return Gd()||Fn(!1),x.useContext(Vx).location}function SI(t){x.useContext(Cl).static||x.useLayoutEffect(t)}function ar(){let{isDataRoute:t}=x.useContext(co);return t?k9():g9()}function g9(){Gd()||Fn(!1);let t=x.useContext(Sb),{basename:e,future:n,navigator:r}=x.useContext(Cl),{matches:i}=x.useContext(co),{pathname:a}=uo(),o=JSON.stringify(jb(i,n.v7_relativeSplatPath)),c=x.useRef(!1);return SI(()=>{c.current=!0}),x.useCallback(function(h,f){if(f===void 0&&(f={}),!c.current)return;if(typeof h=="number"){r.go(h);return}let p=Nb(h,JSON.parse(o),a,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:rl([e,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[e,r,o,a,t])}function Eb(){let{matches:t}=x.useContext(co),e=t[t.length-1];return e?e.params:{}}function EI(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=x.useContext(Cl),{matches:i}=x.useContext(co),{pathname:a}=uo(),o=JSON.stringify(jb(i,r.v7_relativeSplatPath));return x.useMemo(()=>Nb(t,JSON.parse(o),a,n==="path"),[t,o,a,n])}function v9(t,e){return x9(t,e)}function x9(t,e,n,r){Gd()||Fn(!1);let{navigator:i}=x.useContext(Cl),{matches:a}=x.useContext(co),o=a[a.length-1],c=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let h=uo(),f;if(e){var p;let S=typeof e=="string"?zc(e):e;u==="/"||(p=S.pathname)!=null&&p.startsWith(u)||Fn(!1),f=S}else f=h;let v=f.pathname||"/",_=v;if(u!=="/"){let S=u.replace(/^\//,"").split("/");_="/"+v.replace(/^\//,"").split("/").slice(S.length).join("/")}let N=qV(t,{pathname:_}),j=j9(N&&N.map(S=>Object.assign({},S,{params:Object.assign({},c,S.params),pathname:rl([u,i.encodeLocation?i.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?u:rl([u,i.encodeLocation?i.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),a,n,r);return e&&j?x.createElement(Vx.Provider,{value:{location:nm({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:qo.Pop}},j):j}function y9(){let t=C9(),e=h9(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),n?x.createElement("pre",{style:i},n):null,null)}const _9=x.createElement(y9,null);class w9 extends x.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?x.createElement(co.Provider,{value:this.props.routeContext},x.createElement(NI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function b9(t){let{routeContext:e,match:n,children:r}=t,i=x.useContext(Sb);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),x.createElement(co.Provider,{value:e},r)}function j9(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,c=(i=n)==null?void 0:i.errors;if(c!=null){let f=o.findIndex(p=>p.route.id&&(c==null?void 0:c[p.route.id])!==void 0);f>=0||Fn(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let p=o[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=f),p.route.id){let{loaderData:v,errors:_}=n,N=p.route.loader&&v[p.route.id]===void 0&&(!_||_[p.route.id]===void 0);if(p.route.lazy||N){u=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((f,p,v)=>{let _,N=!1,j=null,S=null;n&&(_=c&&p.route.id?c[p.route.id]:void 0,j=p.route.errorElement||_9,u&&(h<0&&v===0?(T9("route-fallback"),N=!0,S=null):h===v&&(N=!0,S=p.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,v+1)),y=()=>{let E;return _?E=j:N?E=S:p.route.Component?E=x.createElement(p.route.Component,null):p.route.element?E=p.route.element:E=f,x.createElement(b9,{match:p,routeContext:{outlet:f,matches:w,isDataRoute:n!=null},children:E})};return n&&(p.route.ErrorBoundary||p.route.errorElement||v===0)?x.createElement(w9,{location:n.location,revalidation:n.revalidation,component:j,error:_,children:y(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):y()},null)}var CI=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(CI||{}),kI=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(kI||{});function N9(t){let e=x.useContext(Sb);return e||Fn(!1),e}function S9(t){let e=x.useContext(m9);return e||Fn(!1),e}function E9(t){let e=x.useContext(co);return e||Fn(!1),e}function TI(t){let e=E9(),n=e.matches[e.matches.length-1];return n.route.id||Fn(!1),n.route.id}function C9(){var t;let e=x.useContext(NI),n=S9(),r=TI();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function k9(){let{router:t}=N9(CI.UseNavigateStable),e=TI(kI.UseNavigateStable),n=x.useRef(!1);return SI(()=>{n.current=!0}),x.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,nm({fromRouteId:e},a)))},[t,e])}const z2={};function T9(t,e,n){z2[t]||(z2[t]=!0)}function P9(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function I9(t){let{to:e,replace:n,state:r,relative:i}=t;Gd()||Fn(!1);let{future:a,static:o}=x.useContext(Cl),{matches:c}=x.useContext(co),{pathname:u}=uo(),h=ar(),f=Nb(e,jb(c,a.v7_relativeSplatPath),u,i==="path"),p=JSON.stringify(f);return x.useEffect(()=>h(JSON.parse(p),{replace:n,state:r,relative:i}),[h,p,i,n,r]),null}function mn(t){Fn(!1)}function A9(t){let{basename:e="/",children:n=null,location:r,navigationType:i=qo.Pop,navigator:a,static:o=!1,future:c}=t;Gd()&&Fn(!1);let u=e.replace(/^\/*/,"/"),h=x.useMemo(()=>({basename:u,navigator:a,static:o,future:nm({v7_relativeSplatPath:!1},c)}),[u,c,a,o]);typeof r=="string"&&(r=zc(r));let{pathname:f="/",search:p="",hash:v="",state:_=null,key:N="default"}=r,j=x.useMemo(()=>{let S=bb(f,u);return S==null?null:{location:{pathname:S,search:p,hash:v,state:_,key:N},navigationType:i}},[u,f,p,v,_,N,i]);return j==null?null:x.createElement(Cl.Provider,{value:h},x.createElement(Vx.Provider,{children:n,value:j}))}function R9(t){let{children:e,location:n}=t;return v9(mw(e),n)}new Promise(()=>{});function mw(t,e){e===void 0&&(e=[]);let n=[];return x.Children.forEach(t,(r,i)=>{if(!x.isValidElement(r))return;let a=[...e,i];if(r.type===x.Fragment){n.push.apply(n,mw(r.props.children,a));return}r.type!==mn&&Fn(!1),!r.props.index||!r.props.children||Fn(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=mw(r.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pw(){return pw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pw.apply(this,arguments)}function M9(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function D9(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function O9(t,e){return t.button===0&&(!e||e==="_self")&&!D9(t)}function gw(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function L9(t,e){let n=gw(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}const F9=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],V9="6";try{window.__reactRouterVersion=V9}catch{}const z9="startTransition",U2=P1[z9];function U9(t){let{basename:e,children:n,future:r,window:i}=t,a=x.useRef();a.current==null&&(a.current=$V({window:i,v5Compat:!0}));let o=a.current,[c,u]=x.useState({action:o.action,location:o.location}),{v7_startTransition:h}=r||{},f=x.useCallback(p=>{h&&U2?U2(()=>u(p)):u(p)},[u,h]);return x.useLayoutEffect(()=>o.listen(f),[o,f]),x.useEffect(()=>P9(r),[r]),x.createElement(A9,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:o,future:r})}const $9=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",B9=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Te=x.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:a,replace:o,state:c,target:u,to:h,preventScrollReset:f,viewTransition:p}=e,v=M9(e,F9),{basename:_}=x.useContext(Cl),N,j=!1;if(typeof h=="string"&&B9.test(h)&&(N=h,$9))try{let E=new URL(window.location.href),I=h.startsWith("//")?new URL(E.protocol+h):new URL(h),D=bb(I.pathname,_);I.origin===E.origin&&D!=null?h=D+I.search+I.hash:j=!0}catch{}let S=p9(h,{relative:i}),w=W9(h,{replace:o,state:c,target:u,preventScrollReset:f,relative:i,viewTransition:p});function y(E){r&&r(E),E.defaultPrevented||w(E)}return x.createElement("a",pw({},v,{href:N||S,onClick:j||a?r:y,ref:n,target:u}))});var $2;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})($2||($2={}));var B2;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(B2||(B2={}));function W9(t,e){let{target:n,replace:r,state:i,preventScrollReset:a,relative:o,viewTransition:c}=e===void 0?{}:e,u=ar(),h=uo(),f=EI(t,{relative:o});return x.useCallback(p=>{if(O9(p,n)){p.preventDefault();let v=r!==void 0?r:Cv(h)===Cv(f);u(t,{replace:v,state:i,preventScrollReset:a,relative:o,viewTransition:c})}},[h,u,f,r,i,n,t,a,o,c])}function Cb(t){let e=x.useRef(gw(t)),n=x.useRef(!1),r=uo(),i=x.useMemo(()=>L9(r.search,n.current?null:e.current),[r.search]),a=ar(),o=x.useCallback((c,u)=>{const h=gw(typeof c=="function"?c(i):c);n.current=!0,a("?"+h,u)},[a,i]);return[i,o]}var kv=["light","dark"],kb="(prefers-color-scheme: dark)",q9=typeof window>"u",Tb=x.createContext(void 0),H9={setTheme:t=>{},themes:[]},G9=()=>{var t;return(t=x.useContext(Tb))!=null?t:H9},K9=t=>x.useContext(Tb)?t.children:x.createElement(Y9,{...t}),Z9=["light","dark"],Y9=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:i="theme",themes:a=Z9,defaultTheme:o=n?"system":"light",attribute:c="data-theme",value:u,children:h,nonce:f})=>{let[p,v]=x.useState(()=>W2(i,o)),[_,N]=x.useState(()=>W2(i)),j=u?Object.values(u):a,S=x.useCallback(I=>{let D=I;if(!D)return;I==="system"&&n&&(D=q2());let B=u?u[D]:D,R=e?X9():null,F=document.documentElement;if(c==="class"?(F.classList.remove(...j),B&&F.classList.add(B)):B?F.setAttribute(c,B):F.removeAttribute(c),r){let V=kv.includes(o)?o:null,k=kv.includes(D)?D:V;F.style.colorScheme=k}R==null||R()},[]),w=x.useCallback(I=>{let D=typeof I=="function"?I(I):I;v(D);try{localStorage.setItem(i,D)}catch{}},[t]),y=x.useCallback(I=>{let D=q2(I);N(D),p==="system"&&n&&!t&&S("system")},[p,t]);x.useEffect(()=>{let I=window.matchMedia(kb);return I.addListener(y),y(I),()=>I.removeListener(y)},[y]),x.useEffect(()=>{let I=D=>{if(D.key!==i)return;let B=D.newValue||o;w(B)};return window.addEventListener("storage",I),()=>window.removeEventListener("storage",I)},[w]),x.useEffect(()=>{S(t??p)},[t,p]);let E=x.useMemo(()=>({theme:p,setTheme:w,forcedTheme:t,resolvedTheme:p==="system"?_:p,themes:n?[...a,"system"]:a,systemTheme:n?_:void 0}),[p,w,t,_,n,a]);return x.createElement(Tb.Provider,{value:E},x.createElement(Q9,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:n,enableColorScheme:r,storageKey:i,themes:a,defaultTheme:o,attribute:c,value:u,children:h,attrs:j,nonce:f}),h)},Q9=x.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:i,defaultTheme:a,value:o,attrs:c,nonce:u})=>{let h=a==="system",f=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${c.map(N=>`'${N}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,p=i?kv.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",v=(N,j=!1,S=!0)=>{let w=o?o[N]:N,y=j?N+"|| ''":`'${w}'`,E="";return i&&S&&!j&&kv.includes(N)&&(E+=`d.style.colorScheme = '${N}';`),n==="class"?j||w?E+=`c.add(${y})`:E+="null":w&&(E+=`d[s](n,${y})`),E},_=t?`!function(){${f}${v(t)}}()`:r?`!function(){try{${f}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${h})){var t='${kb}',m=window.matchMedia(t);if(m.media!==t||m.matches){${v("dark")}}else{${v("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${v(o?"x[e]":"e",!0)}}${h?"":"else{"+v(a,!1,!1)+"}"}${p}}catch(e){}}()`:`!function(){try{${f}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${v(o?"x[e]":"e",!0)}}else{${v(a,!1,!1)};}${p}}catch(t){}}();`;return x.createElement("script",{nonce:u,dangerouslySetInnerHTML:{__html:_}})}),W2=(t,e)=>{if(q9)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},X9=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},q2=t=>(t||(t=window.matchMedia(kb)),t.matches?"dark":"light");let J9={data:""},e8=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||J9,t8=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,n8=/\/\*[^]*?\*\/|  +/g,H2=/\n+/g,Lo=(t,e)=>{let n="",r="",i="";for(let a in t){let o=t[a];a[0]=="@"?a[1]=="i"?n=a+" "+o+";":r+=a[1]=="f"?Lo(o,a):a+"{"+Lo(o,a[1]=="k"?"":e)+"}":typeof o=="object"?r+=Lo(o,e?e.replace(/([^,])+/g,c=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,c):c?c+" "+u:u)):a):o!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Lo.p?Lo.p(a,o):a+":"+o+";")}return n+(e&&i?e+"{"+i+"}":i)+r},Ia={},PI=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+PI(t[n]);return e}return t},r8=(t,e,n,r,i)=>{let a=PI(t),o=Ia[a]||(Ia[a]=(u=>{let h=0,f=11;for(;h<u.length;)f=101*f+u.charCodeAt(h++)>>>0;return"go"+f})(a));if(!Ia[o]){let u=a!==t?t:(h=>{let f,p,v=[{}];for(;f=t8.exec(h.replace(n8,""));)f[4]?v.shift():f[3]?(p=f[3].replace(H2," ").trim(),v.unshift(v[0][p]=v[0][p]||{})):v[0][f[1]]=f[2].replace(H2," ").trim();return v[0]})(t);Ia[o]=Lo(i?{["@keyframes "+o]:u}:u,n?"":"."+o)}let c=n&&Ia.g?Ia.g:null;return n&&(Ia.g=Ia[o]),((u,h,f,p)=>{p?h.data=h.data.replace(p,u):h.data.indexOf(u)===-1&&(h.data=f?u+h.data:h.data+u)})(Ia[o],e,r,c),o},s8=(t,e,n)=>t.reduce((r,i,a)=>{let o=e[a];if(o&&o.call){let c=o(n),u=c&&c.props&&c.props.className||/^go/.test(c)&&c;o=u?"."+u:c&&typeof c=="object"?c.props?"":Lo(c,""):c===!1?"":c}return r+i+(o??"")},"");function zx(t){let e=this||{},n=t.call?t(e.p):t;return r8(n.unshift?n.raw?s8(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,e8(e.target),e.g,e.o,e.k)}let II,vw,xw;zx.bind({g:1});let Ya=zx.bind({k:1});function i8(t,e,n,r){Lo.p=e,II=t,vw=n,xw=r}function kl(t,e){let n=this||{};return function(){let r=arguments;function i(a,o){let c=Object.assign({},a),u=c.className||i.className;n.p=Object.assign({theme:vw&&vw()},c),n.o=/ *go\d+/.test(u),c.className=zx.apply(n,r)+(u?" "+u:"");let h=t;return t[0]&&(h=c.as||t,delete c.as),xw&&h[0]&&xw(c),II(h,c)}return i}}var a8=t=>typeof t=="function",Tv=(t,e)=>a8(t)?t(e):t,o8=(()=>{let t=0;return()=>(++t).toString()})(),AI=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),l8=20,RI=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,l8)};case 1:return{...t,toasts:t.toasts.map(a=>a.id===e.toast.id?{...a,...e.toast}:a)};case 2:let{toast:n}=e;return RI(t,{type:t.toasts.find(a=>a.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=e;return{...t,toasts:t.toasts.map(a=>a.id===r||r===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(a=>a.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+i}))}}},Fg=[],nc={toasts:[],pausedAt:void 0},Uc=t=>{nc=RI(nc,t),Fg.forEach(e=>{e(nc)})},c8={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},u8=(t={})=>{let[e,n]=x.useState(nc),r=x.useRef(nc);x.useEffect(()=>(r.current!==nc&&n(nc),Fg.push(n),()=>{let a=Fg.indexOf(n);a>-1&&Fg.splice(a,1)}),[]);let i=e.toasts.map(a=>{var o,c,u;return{...t,...t[a.type],...a,removeDelay:a.removeDelay||((o=t[a.type])==null?void 0:o.removeDelay)||(t==null?void 0:t.removeDelay),duration:a.duration||((c=t[a.type])==null?void 0:c.duration)||(t==null?void 0:t.duration)||c8[a.type],style:{...t.style,...(u=t[a.type])==null?void 0:u.style,...a.style}}});return{...e,toasts:i}},d8=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||o8()}),Im=t=>(e,n)=>{let r=d8(e,t,n);return Uc({type:2,toast:r}),r.id},nr=(t,e)=>Im("blank")(t,e);nr.error=Im("error");nr.success=Im("success");nr.loading=Im("loading");nr.custom=Im("custom");nr.dismiss=t=>{Uc({type:3,toastId:t})};nr.remove=t=>Uc({type:4,toastId:t});nr.promise=(t,e,n)=>{let r=nr.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let a=e.success?Tv(e.success,i):void 0;return a?nr.success(a,{id:r,...n,...n==null?void 0:n.success}):nr.dismiss(r),i}).catch(i=>{let a=e.error?Tv(e.error,i):void 0;a?nr.error(a,{id:r,...n,...n==null?void 0:n.error}):nr.dismiss(r)}),t};var h8=(t,e)=>{Uc({type:1,toast:{id:t,height:e}})},f8=()=>{Uc({type:5,time:Date.now()})},kf=new Map,m8=1e3,p8=(t,e=m8)=>{if(kf.has(t))return;let n=setTimeout(()=>{kf.delete(t),Uc({type:4,toastId:t})},e);kf.set(t,n)},g8=t=>{let{toasts:e,pausedAt:n}=u8(t);x.useEffect(()=>{if(n)return;let a=Date.now(),o=e.map(c=>{if(c.duration===1/0)return;let u=(c.duration||0)+c.pauseDuration-(a-c.createdAt);if(u<0){c.visible&&nr.dismiss(c.id);return}return setTimeout(()=>nr.dismiss(c.id),u)});return()=>{o.forEach(c=>c&&clearTimeout(c))}},[e,n]);let r=x.useCallback(()=>{n&&Uc({type:6,time:Date.now()})},[n]),i=x.useCallback((a,o)=>{let{reverseOrder:c=!1,gutter:u=8,defaultPosition:h}=o||{},f=e.filter(_=>(_.position||h)===(a.position||h)&&_.height),p=f.findIndex(_=>_.id===a.id),v=f.filter((_,N)=>N<p&&_.visible).length;return f.filter(_=>_.visible).slice(...c?[v+1]:[0,v]).reduce((_,N)=>_+(N.height||0)+u,0)},[e]);return x.useEffect(()=>{e.forEach(a=>{if(a.dismissed)p8(a.id,a.removeDelay);else{let o=kf.get(a.id);o&&(clearTimeout(o),kf.delete(a.id))}})},[e]),{toasts:e,handlers:{updateHeight:h8,startPause:f8,endPause:r,calculateOffset:i}}},v8=Ya`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,x8=Ya`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,y8=Ya`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,_8=kl("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${v8} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${x8} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${y8} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,w8=Ya`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,b8=kl("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${w8} 1s linear infinite;
`,j8=Ya`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,N8=Ya`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,S8=kl("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${j8} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${N8} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,E8=kl("div")`
  position: absolute;
`,C8=kl("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,k8=Ya`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,T8=kl("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${k8} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,P8=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?x.createElement(T8,null,e):e:n==="blank"?null:x.createElement(C8,null,x.createElement(b8,{...r}),n!=="loading"&&x.createElement(E8,null,n==="error"?x.createElement(_8,{...r}):x.createElement(S8,{...r})))},I8=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,A8=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,R8="0%{opacity:0;} 100%{opacity:1;}",M8="0%{opacity:1;} 100%{opacity:0;}",D8=kl("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,O8=kl("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,L8=(t,e)=>{let n=t.includes("top")?1:-1,[r,i]=AI()?[R8,M8]:[I8(n),A8(n)];return{animation:e?`${Ya(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ya(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},F8=x.memo(({toast:t,position:e,style:n,children:r})=>{let i=t.height?L8(t.position||e||"top-center",t.visible):{opacity:0},a=x.createElement(P8,{toast:t}),o=x.createElement(O8,{...t.ariaProps},Tv(t.message,t));return x.createElement(D8,{className:t.className,style:{...i,...n,...t.style}},typeof r=="function"?r({icon:a,message:o}):x.createElement(x.Fragment,null,a,o))});i8(x.createElement);var V8=({id:t,className:e,style:n,onHeightUpdate:r,children:i})=>{let a=x.useCallback(o=>{if(o){let c=()=>{let u=o.getBoundingClientRect().height;r(t,u)};c(),new MutationObserver(c).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return x.createElement("div",{ref:a,className:e,style:n},i)},z8=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:AI()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...i}},U8=zx`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,ag=16,$8=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:i,containerStyle:a,containerClassName:o})=>{let{toasts:c,handlers:u}=g8(n);return x.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:ag,left:ag,right:ag,bottom:ag,pointerEvents:"none",...a},className:o,onMouseEnter:u.startPause,onMouseLeave:u.endPause},c.map(h=>{let f=h.position||e,p=u.calculateOffset(h,{reverseOrder:t,gutter:r,defaultPosition:e}),v=z8(f,p);return x.createElement(V8,{id:h.id,key:h.id,onHeightUpdate:u.updateHeight,className:h.visible?U8:"",style:v},h.type==="custom"?Tv(h.message,h):i?i(h):x.createElement(F8,{toast:h,position:f}))}))},fe=nr,G2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},B8=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],o=t[n++],c=t[n++],u=((i&7)<<18|(a&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},DI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],o=i+1<t.length,c=o?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,f=a>>2,p=(a&3)<<4|c>>4;let v=(c&15)<<2|h>>6,_=h&63;u||(_=64,o||(v=64)),r.push(n[f],n[p],n[v],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(MI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):B8(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||c==null||h==null||p==null)throw new W8;const v=a<<2|c>>4;if(r.push(v),h!==64){const _=c<<4&240|h>>2;if(r.push(_),p!==64){const N=h<<6&192|p;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class W8 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const q8=function(t){const e=MI(t);return DI.encodeByteArray(e,!0)},Pv=function(t){return q8(t).replace(/\./g,"")},OI=function(t){try{return DI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H8(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G8=()=>H8().__FIREBASE_DEFAULTS__,K8=()=>{if(typeof process>"u"||typeof G2>"u")return;const t=G2.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Z8=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&OI(t[1]);return e&&JSON.parse(e)},Ux=()=>{try{return G8()||K8()||Z8()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},LI=t=>{var e,n;return(n=(e=Ux())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},FI=t=>{const e=LI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},VI=()=>{var t;return(t=Ux())===null||t===void 0?void 0:t.config},zI=t=>{var e;return(e=Ux())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y8{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Pv(JSON.stringify(n)),Pv(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Q8(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Lr())}function X8(){var t;const e=(t=Ux())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function J8(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ez(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function tz(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function nz(){const t=Lr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function rz(){return!X8()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sz(){try{return typeof indexedDB=="object"}catch{return!1}}function iz(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const az="FirebaseError";class fa extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=az,Object.setPrototypeOf(this,fa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Am.prototype.create)}}class Am{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?oz(a,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new fa(i,c,r)}}function oz(t,e){return t.replace(lz,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const lz=/\{\$([^}]+)}/g;function cz(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Iv(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],o=e[i];if(K2(a)&&K2(o)){if(!Iv(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function K2(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function cf(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function uf(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function uz(t,e){const n=new dz(t,e);return n.subscribe.bind(n)}class dz{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");hz(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=A_),i.error===void 0&&(i.error=A_),i.complete===void 0&&(i.complete=A_);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hz(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function A_(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(t){return t&&t._delegate?t._delegate:t}class dl{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ql="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fz{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Y8;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(pz(e))try{this.getOrInitializeService({instanceIdentifier:Ql})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Ql){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ql){return this.instances.has(e)}getOptions(e=Ql){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);r===c&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const o=this.instances.get(i);return o&&e(o,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:mz(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ql){return this.component?this.component.multipleInstances?e:Ql:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mz(t){return t===Ql?void 0:t}function pz(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gz{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new fz(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Pt||(Pt={}));const vz={debug:Pt.DEBUG,verbose:Pt.VERBOSE,info:Pt.INFO,warn:Pt.WARN,error:Pt.ERROR,silent:Pt.SILENT},xz=Pt.INFO,yz={[Pt.DEBUG]:"log",[Pt.VERBOSE]:"log",[Pt.INFO]:"info",[Pt.WARN]:"warn",[Pt.ERROR]:"error"},_z=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=yz[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Pb{constructor(e){this.name=e,this._logLevel=xz,this._logHandler=_z,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vz[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pt.DEBUG,...e),this._logHandler(this,Pt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pt.VERBOSE,...e),this._logHandler(this,Pt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pt.INFO,...e),this._logHandler(this,Pt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pt.WARN,...e),this._logHandler(this,Pt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pt.ERROR,...e),this._logHandler(this,Pt.ERROR,...e)}}const wz=(t,e)=>e.some(n=>t instanceof n);let Z2,Y2;function bz(){return Z2||(Z2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jz(){return Y2||(Y2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $I=new WeakMap,yw=new WeakMap,BI=new WeakMap,R_=new WeakMap,Ib=new WeakMap;function Nz(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(sl(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&$I.set(n,t)}).catch(()=>{}),Ib.set(e,t),e}function Sz(t){if(yw.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});yw.set(t,e)}let _w={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return yw.get(t);if(e==="objectStoreNames")return t.objectStoreNames||BI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return sl(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Ez(t){_w=t(_w)}function Cz(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(M_(this),e,...n);return BI.set(r,e.sort?e.sort():[e]),sl(r)}:jz().includes(t)?function(...e){return t.apply(M_(this),e),sl($I.get(this))}:function(...e){return sl(t.apply(M_(this),e))}}function kz(t){return typeof t=="function"?Cz(t):(t instanceof IDBTransaction&&Sz(t),wz(t,bz())?new Proxy(t,_w):t)}function sl(t){if(t instanceof IDBRequest)return Nz(t);if(R_.has(t))return R_.get(t);const e=kz(t);return e!==t&&(R_.set(t,e),Ib.set(e,t)),e}const M_=t=>Ib.get(t);function Tz(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(t,e),c=sl(o);return r&&o.addEventListener("upgradeneeded",u=>{r(sl(o.result),u.oldVersion,u.newVersion,sl(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{a&&u.addEventListener("close",()=>a()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const Pz=["get","getKey","getAll","getAllKeys","count"],Iz=["put","add","delete","clear"],D_=new Map;function Q2(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(D_.get(e))return D_.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Iz.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Pz.includes(n)))return;const a=async function(o,...c){const u=this.transaction(o,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(c.shift())),(await Promise.all([h[n](...c),i&&u.done]))[0]};return D_.set(e,a),a}Ez(t=>({...t,get:(e,n,r)=>Q2(e,n)||t.get(e,n,r),has:(e,n)=>!!Q2(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Az{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Rz(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Rz(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ww="@firebase/app",X2="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa=new Pb("@firebase/app"),Mz="@firebase/app-compat",Dz="@firebase/analytics-compat",Oz="@firebase/analytics",Lz="@firebase/app-check-compat",Fz="@firebase/app-check",Vz="@firebase/auth",zz="@firebase/auth-compat",Uz="@firebase/database",$z="@firebase/data-connect",Bz="@firebase/database-compat",Wz="@firebase/functions",qz="@firebase/functions-compat",Hz="@firebase/installations",Gz="@firebase/installations-compat",Kz="@firebase/messaging",Zz="@firebase/messaging-compat",Yz="@firebase/performance",Qz="@firebase/performance-compat",Xz="@firebase/remote-config",Jz="@firebase/remote-config-compat",eU="@firebase/storage",tU="@firebase/storage-compat",nU="@firebase/firestore",rU="@firebase/vertexai-preview",sU="@firebase/firestore-compat",iU="firebase",aU="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw="[DEFAULT]",oU={[ww]:"fire-core",[Mz]:"fire-core-compat",[Oz]:"fire-analytics",[Dz]:"fire-analytics-compat",[Fz]:"fire-app-check",[Lz]:"fire-app-check-compat",[Vz]:"fire-auth",[zz]:"fire-auth-compat",[Uz]:"fire-rtdb",[$z]:"fire-data-connect",[Bz]:"fire-rtdb-compat",[Wz]:"fire-fn",[qz]:"fire-fn-compat",[Hz]:"fire-iid",[Gz]:"fire-iid-compat",[Kz]:"fire-fcm",[Zz]:"fire-fcm-compat",[Yz]:"fire-perf",[Qz]:"fire-perf-compat",[Xz]:"fire-rc",[Jz]:"fire-rc-compat",[eU]:"fire-gcs",[tU]:"fire-gcs-compat",[nU]:"fire-fst",[sU]:"fire-fst-compat",[rU]:"fire-vertex","fire-js":"fire-js",[iU]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av=new Map,lU=new Map,jw=new Map;function J2(t,e){try{t.container.addComponent(e)}catch(n){Qa.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function jc(t){const e=t.name;if(jw.has(e))return Qa.debug(`There were multiple attempts to register component ${e}.`),!1;jw.set(e,t);for(const n of Av.values())J2(n,t);for(const n of lU.values())J2(n,t);return!0}function $x(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function qs(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},il=new Am("app","Firebase",cU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new dl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw il.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $c=aU;function WI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:bw,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw il.create("bad-app-name",{appName:String(i)});if(n||(n=VI()),!n)throw il.create("no-options");const a=Av.get(i);if(a){if(Iv(n,a.options)&&Iv(r,a.config))return a;throw il.create("duplicate-app",{appName:i})}const o=new gz(i);for(const u of jw.values())o.addComponent(u);const c=new uU(n,r,o);return Av.set(i,c),c}function Ab(t=bw){const e=Av.get(t);if(!e&&t===bw&&VI())return WI();if(!e)throw il.create("no-app",{appName:t});return e}function ea(t,e,n){var r;let i=(r=oU[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const a=i.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qa.warn(c.join(" "));return}jc(new dl(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dU="firebase-heartbeat-database",hU=1,rm="firebase-heartbeat-store";let O_=null;function qI(){return O_||(O_=Tz(dU,hU,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(rm)}catch(n){console.warn(n)}}}}).catch(t=>{throw il.create("idb-open",{originalErrorMessage:t.message})})),O_}async function fU(t){try{const n=(await qI()).transaction(rm),r=await n.objectStore(rm).get(HI(t));return await n.done,r}catch(e){if(e instanceof fa)Qa.warn(e.message);else{const n=il.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Qa.warn(n.message)}}}async function eE(t,e){try{const r=(await qI()).transaction(rm,"readwrite");await r.objectStore(rm).put(e,HI(t)),await r.done}catch(n){if(n instanceof fa)Qa.warn(n.message);else{const r=il.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Qa.warn(r.message)}}}function HI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mU=1024,pU=30*24*60*60*1e3;class gU{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new xU(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=tE();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const c=new Date(o.date).valueOf();return Date.now()-c<=pU}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Qa.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=tE(),{heartbeatsToSend:r,unsentEntries:i}=vU(this._heartbeatsCache.heartbeats),a=Pv(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Qa.warn(n),""}}}function tE(){return new Date().toISOString().substring(0,10)}function vU(t,e=mU){const n=[];let r=t.slice();for(const i of t){const a=n.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),nE(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),nE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class xU{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sz()?iz().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await fU(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return eE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return eE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function nE(t){return Pv(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yU(t){jc(new dl("platform-logger",e=>new Az(e),"PRIVATE")),jc(new dl("heartbeat",e=>new gU(e),"PRIVATE")),ea(ww,X2,t),ea(ww,X2,"esm2017"),ea("fire-js","")}yU("");var Wi=function(){return Wi=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Wi.apply(this,arguments)};function Mm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function _U(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function GI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wU=GI,KI=new Am("auth","Firebase",GI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv=new Pb("@firebase/auth");function bU(t,...e){Rv.logLevel<=Pt.WARN&&Rv.warn(`Auth (${$c}): ${t}`,...e)}function Vg(t,...e){Rv.logLevel<=Pt.ERROR&&Rv.error(`Auth (${$c}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(t,...e){throw Mb(t,...e)}function ta(t,...e){return Mb(t,...e)}function Rb(t,e,n){const r=Object.assign(Object.assign({},wU()),{[e]:n});return new Am("auth","Firebase",r).create(e,{appName:t.name})}function yi(t){return Rb(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jU(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&ei(t,"argument-error"),Rb(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Mb(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return KI.create(t,...e)}function nt(t,e,...n){if(!t)throw Mb(e,...n)}function za(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Vg(e),new Error(e)}function Xa(t,e){t||za(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function NU(){return rE()==="http:"||rE()==="https:"}function rE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(NU()||ez()||"connection"in navigator)?navigator.onLine:!0}function EU(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e,n){this.shortDelay=e,this.longDelay=n,Xa(n>e,"Short delay should be less than long delay!"),this.isMobile=Q8()||tz()}get(){return SU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Db(t,e){Xa(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;za("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;za("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;za("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kU=new Dm(3e4,6e4);function ho(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ti(t,e,n,r,i={}){return YI(t,i,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const c=Rm(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:u},a);return J8()||(h.referrerPolicy="no-referrer"),ZI.fetch()(QI(t,t.config.apiHost,n,c),h)})}async function YI(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},CU),e);try{const i=new PU(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw og(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const c=a.ok?o.errorMessage:o.error.message,[u,h]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw og(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw og(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw og(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Rb(t,f,h);ei(t,f)}}catch(i){if(i instanceof fa)throw i;ei(t,"network-request-failed",{message:String(i)})}}async function Om(t,e,n,r,i={}){const a=await Ti(t,e,n,r,i);return"mfaPendingCredential"in a&&ei(t,"multi-factor-auth-required",{_serverResponse:a}),a}function QI(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Db(t.config,i):`${t.config.apiScheme}://${i}`}function TU(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class PU{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ta(this.auth,"network-request-failed")),kU.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function og(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ta(t,e,r);return i.customData._tokenResponse=n,i}function sE(t){return t!==void 0&&t.enterprise!==void 0}class IU{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return TU(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function AU(t,e){return Ti(t,"GET","/v2/recaptchaConfig",ho(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RU(t,e){return Ti(t,"POST","/v1/accounts:delete",e)}async function XI(t,e){return Ti(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tf(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function MU(t,e=!1){const n=zt(t),r=await n.getIdToken(e),i=Ob(r);nt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:Tf(L_(i.auth_time)),issuedAtTime:Tf(L_(i.iat)),expirationTime:Tf(L_(i.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function L_(t){return Number(t)*1e3}function Ob(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Vg("JWT malformed, contained fewer than 3 sections"),null;try{const i=OI(n);return i?JSON.parse(i):(Vg("Failed to decode base64 JWT payload"),null)}catch(i){return Vg("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function iE(t){const e=Ob(t);return nt(e,"internal-error"),nt(typeof e.exp<"u","internal-error"),nt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof fa&&DU(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function DU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tf(this.lastLoginAt),this.creationTime=Tf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mv(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Nc(t,XI(n,{idToken:r}));nt(i==null?void 0:i.users.length,n,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?JI(a.providerUserInfo):[],c=LU(t.providerData,o),u=t.isAnonymous,h=!(t.email&&a.passwordHash)&&!(c!=null&&c.length),f=u?h:!1,p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Sw(a.createdAt,a.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function df(t){const e=zt(t);await Mv(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function LU(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function JI(t){return t.map(e=>{var{providerId:n}=e,r=Mm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FU(t,e){const n=await YI(t,{},async()=>{const r=Rm({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,o=QI(t,i,"/v1/token",`key=${a}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",ZI.fetch()(o,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function VU(t,e){return Ti(t,"POST","/v2/accounts:revokeToken",ho(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){nt(e.idToken,"internal-error"),nt(typeof e.idToken<"u","internal-error"),nt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):iE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){nt(e.length!==0,"internal-error");const n=iE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(nt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await FU(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,o=new ed;return r&&(nt(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(nt(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(nt(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ed,this.toJSON())}_performRefresh(){return za("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eo(t,e){nt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ua{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,a=Mm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new OU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Sw(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Nc(this,this.stsTokenManager.getToken(this.auth,e));return nt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return MU(this,e)}reload(){return df(this)}_assign(e){this!==e&&(nt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ua(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){nt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Mv(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qs(this.auth.app))return Promise.reject(yi(this.auth));const e=await this.getIdToken();return await Nc(this,RU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,a,o,c,u,h,f;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,v=(i=n.email)!==null&&i!==void 0?i:void 0,_=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,N=(o=n.photoURL)!==null&&o!==void 0?o:void 0,j=(c=n.tenantId)!==null&&c!==void 0?c:void 0,S=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,w=(h=n.createdAt)!==null&&h!==void 0?h:void 0,y=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:E,emailVerified:I,isAnonymous:D,providerData:B,stsTokenManager:R}=n;nt(E&&R,e,"internal-error");const F=ed.fromJSON(this.name,R);nt(typeof E=="string",e,"internal-error"),Eo(p,e.name),Eo(v,e.name),nt(typeof I=="boolean",e,"internal-error"),nt(typeof D=="boolean",e,"internal-error"),Eo(_,e.name),Eo(N,e.name),Eo(j,e.name),Eo(S,e.name),Eo(w,e.name),Eo(y,e.name);const V=new Ua({uid:E,auth:e,email:v,emailVerified:I,displayName:p,isAnonymous:D,photoURL:N,phoneNumber:_,tenantId:j,stsTokenManager:F,createdAt:w,lastLoginAt:y});return B&&Array.isArray(B)&&(V.providerData=B.map(k=>Object.assign({},k))),S&&(V._redirectEventId=S),V}static async _fromIdTokenResponse(e,n,r=!1){const i=new ed;i.updateFromServerResponse(n);const a=new Ua({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Mv(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];nt(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?JI(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),c=new ed;c.updateFromIdToken(r);const u=new Ua({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Sw(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE=new Map;function $a(t){Xa(t instanceof Function,"Expected a class definition");let e=aE.get(t);return e?(Xa(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,aE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}eA.type="NONE";const oE=eA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(t,e,n){return`firebase:${t}:${e}:${n}`}class td{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=zg(this.userKey,i.apiKey,a),this.fullPersistenceKey=zg("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ua._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new td($a(oE),e,r);const i=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=i[0]||$a(oE);const o=zg(r,e.config.apiKey,e.name);let c=null;for(const h of n)try{const f=await h._get(o);if(f){const p=Ua._fromJSON(e,f);h!==a&&(c=p),a=h;break}}catch{}const u=i.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new td(a,e,r):(a=u[0],c&&await a._set(o,c.toJSON()),await Promise.all(n.map(async h=>{if(h!==a)try{await h._remove(o)}catch{}})),new td(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(tA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(aA(e))return"Blackberry";if(oA(e))return"Webos";if(nA(e))return"Safari";if((e.includes("chrome/")||rA(e))&&!e.includes("edge/"))return"Chrome";if(iA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function tA(t=Lr()){return/firefox\//i.test(t)}function nA(t=Lr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function rA(t=Lr()){return/crios\//i.test(t)}function sA(t=Lr()){return/iemobile/i.test(t)}function iA(t=Lr()){return/android/i.test(t)}function aA(t=Lr()){return/blackberry/i.test(t)}function oA(t=Lr()){return/webos/i.test(t)}function Lb(t=Lr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function zU(t=Lr()){var e;return Lb(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function UU(){return nz()&&document.documentMode===10}function lA(t=Lr()){return Lb(t)||iA(t)||oA(t)||aA(t)||/windows phone/i.test(t)||sA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(t,e=[]){let n;switch(t){case"Browser":n=lE(Lr());break;case"Worker":n=`${lE(Lr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${$c}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $U{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((o,c)=>{try{const u=e(a);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BU(t,e={}){return Ti(t,"GET","/v2/passwordPolicy",ho(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WU=6;class qU{constructor(e){var n,r,i,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:WU,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,a,o,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(a=u.containsUppercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HU{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cE(this),this.idTokenSubscription=new cE(this),this.beforeStateQueue=new $U(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=KI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=$a(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await td.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await XI(this,{idToken:e}),r=await Ua._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(qs(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(i=u.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return nt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Mv(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=EU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qs(this.app))return Promise.reject(yi(this));const n=e?zt(e):null;return n&&nt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&nt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return qs(this.app)?Promise.reject(yi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qs(this.app)?Promise.reject(yi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($a(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await BU(this),n=new qU(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Am("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await VU(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&$a(e)||this._popupRedirectResolver;nt(n,this,"argument-error"),this.redirectPersistenceManager=await td.create(this,[$a(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(nt(c,this,"internal-error"),c.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return nt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=cA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&bU(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function fo(t){return zt(t)}class cE{constructor(e){this.auth=e,this.observer=null,this.addObserver=uz(n=>this.observer=n)}get next(){return nt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bx={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function GU(t){Bx=t}function uA(t){return Bx.loadJS(t)}function KU(){return Bx.recaptchaEnterpriseScript}function ZU(){return Bx.gapiScript}function YU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const QU="recaptcha-enterprise",XU="NO_RECAPTCHA";class JU{constructor(e){this.type=QU,this.auth=fo(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,c)=>{AU(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new IU(u);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,o(h.siteKey)}}).catch(u=>{c(u)})})}function i(a,o,c){const u=window.grecaptcha;sE(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(h=>{o(h)}).catch(()=>{o(XU)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,o)=>{r(this.auth).then(c=>{if(!n&&sE(window.grecaptcha))i(c,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=KU();u.length!==0&&(u+=c),uA(u).then(()=>{i(c,a,o)}).catch(h=>{o(h)})}}).catch(c=>{o(c)})})}}async function uE(t,e,n,r=!1){const i=new JU(t);let a;try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Ew(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await uE(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await uE(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e$(t,e){const n=$x(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(Iv(a,e??{}))return i;ei(i,"already-initialized")}return n.initialize({options:e})}function t$(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map($a);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function n$(t,e,n){const r=fo(t);nt(r._canInitEmulator,r,"emulator-config-failed"),nt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=dA(e),{host:o,port:c}=r$(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${a}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),s$()}function dA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function r$(t){const e=dA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:dE(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:dE(o)}}}function dE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function s$(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return za("not implemented")}_getIdTokenResponse(e){return za("not implemented")}_linkToIdToken(e,n){return za("not implemented")}_getReauthenticationResolver(e){return za("not implemented")}}async function i$(t,e){return Ti(t,"POST","/v1/accounts:update",e)}async function a$(t,e){return Ti(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o$(t,e){return Om(t,"POST","/v1/accounts:signInWithPassword",ho(t,e))}async function l$(t,e){return Ti(t,"POST","/v1/accounts:sendOobCode",ho(t,e))}async function c$(t,e){return l$(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u$(t,e){return Om(t,"POST","/v1/accounts:signInWithEmailLink",ho(t,e))}async function d$(t,e){return Om(t,"POST","/v1/accounts:signInWithEmailLink",ho(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm extends Fb{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new sm(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new sm(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ew(e,n,"signInWithPassword",o$);case"emailLink":return u$(e,{email:this._email,oobCode:this._password});default:ei(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ew(e,r,"signUpPassword",a$);case"emailLink":return d$(e,{idToken:n,email:this._email,oobCode:this._password});default:ei(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nd(t,e){return Om(t,"POST","/v1/accounts:signInWithIdp",ho(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h$="http://localhost";class Sc extends Fb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Sc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ei("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,a=Mm(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Sc(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return nd(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,nd(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,nd(e,n)}buildRequest(){const e={requestUri:h$,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Rm(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f$(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function m$(t){const e=cf(uf(t)).link,n=e?cf(uf(e)).deep_link_id:null,r=cf(uf(t)).deep_link_id;return(r?cf(uf(r)).link:null)||r||n||e||t}class Vb{constructor(e){var n,r,i,a,o,c;const u=cf(uf(e)),h=(n=u.apiKey)!==null&&n!==void 0?n:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,p=f$((i=u.mode)!==null&&i!==void 0?i:null);nt(h&&f&&p,"argument-error"),this.apiKey=h,this.operation=p,this.code=f,this.continueUrl=(a=u.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=m$(e);try{return new Vb(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(){this.providerId=hl.PROVIDER_ID}static credential(e,n){return sm._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Vb.parseLink(n);return nt(r,"argument-error"),sm._fromEmailAndCode(e,r.code,r.tenantId)}}hl.PROVIDER_ID="password";hl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";hl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm extends zb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo extends Lm{constructor(){super("facebook.com")}static credential(e){return Sc._fromParams({providerId:Fo.PROVIDER_ID,signInMethod:Fo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fo.credentialFromTaggedObject(e)}static credentialFromError(e){return Fo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fo.credential(e.oauthAccessToken)}catch{return null}}}Fo.FACEBOOK_SIGN_IN_METHOD="facebook.com";Fo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La extends Lm{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Sc._fromParams({providerId:La.PROVIDER_ID,signInMethod:La.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return La.credentialFromTaggedObject(e)}static credentialFromError(e){return La.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return La.credential(n,r)}catch{return null}}}La.GOOGLE_SIGN_IN_METHOD="google.com";La.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo extends Lm{constructor(){super("github.com")}static credential(e){return Sc._fromParams({providerId:Vo.PROVIDER_ID,signInMethod:Vo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vo.credentialFromTaggedObject(e)}static credentialFromError(e){return Vo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vo.credential(e.oauthAccessToken)}catch{return null}}}Vo.GITHUB_SIGN_IN_METHOD="github.com";Vo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo extends Lm{constructor(){super("twitter.com")}static credential(e,n){return Sc._fromParams({providerId:zo.PROVIDER_ID,signInMethod:zo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return zo.credentialFromTaggedObject(e)}static credentialFromError(e){return zo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return zo.credential(n,r)}catch{return null}}}zo.TWITTER_SIGN_IN_METHOD="twitter.com";zo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p$(t,e){return Om(t,"POST","/v1/accounts:signUp",ho(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await Ua._fromIdTokenResponse(e,r,i),o=hE(r);return new Ec({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=hE(r);return new Ec({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function hE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv extends fa{constructor(e,n,r,i){var a;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Dv.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Dv(e,n,r,i)}}function hA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Dv._fromErrorAndOperation(t,a,e,r):a})}async function g$(t,e,n=!1){const r=await Nc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ec._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fA(t,e,n=!1){const{auth:r}=t;if(qs(r.app))return Promise.reject(yi(r));const i="reauthenticate";try{const a=await Nc(t,hA(r,i,e,t),n);nt(a.idToken,r,"internal-error");const o=Ob(a.idToken);nt(o,r,"internal-error");const{sub:c}=o;return nt(t.uid===c,r,"user-mismatch"),Ec._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&ei(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mA(t,e,n=!1){if(qs(t.app))return Promise.reject(yi(t));const r="signIn",i=await hA(t,r,e),a=await Ec._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function v$(t,e){return mA(fo(t),e)}async function fE(t,e){return fA(zt(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x$(t,e,n){var r;nt(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),nt(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(nt(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(nt(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pA(t){const e=fo(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function gA(t,e,n){if(qs(t.app))return Promise.reject(yi(t));const r=fo(t),o=await Ew(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",p$).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&pA(t),u}),c=await Ec._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function y$(t,e,n){return qs(t.app)?Promise.reject(yi(t)):v$(zt(t),hl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&pA(t),r})}async function F_(t,e){const n=zt(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&x$(n.auth,i,e);const{email:a}=await c$(n.auth,i);a!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _$(t,e){return Ti(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function im(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=zt(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Nc(r,_$(r.auth,a));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const c=r.providerData.find(({providerId:u})=>u==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function w$(t,e){const n=zt(t);return qs(n.auth.app)?Promise.reject(yi(n.auth)):vA(n,e,null)}function b$(t,e){return vA(zt(t),null,e)}async function vA(t,e,n){const{auth:r}=t,a={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(a.email=e),n&&(a.password=n);const o=await Nc(t,i$(r,a));await t._updateTokensIfNecessary(o,!0)}function j$(t,e,n,r){return zt(t).onIdTokenChanged(e,n,r)}function N$(t,e,n){return zt(t).beforeAuthStateChanged(e,n)}function S$(t,e,n,r){return zt(t).onAuthStateChanged(e,n,r)}function E$(t){return zt(t).signOut()}async function C$(t){return zt(t).delete()}const Ov="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ov,"1"),this.storage.removeItem(Ov),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k$=1e3,T$=10;class yA extends xA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=lA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);UU()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,T$):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},k$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}yA.type="LOCAL";const P$=yA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A extends xA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}_A.type="SESSION";const wA=_A;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I$(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Wx(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(o).map(async h=>h(n.origin,a)),u=await I$(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wx.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A${constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((c,u)=>{const h=Ub("",20);i.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const v=p;if(v.data.eventId===h)switch(v.data.status){case"ack":clearTimeout(f),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(v.data.response);break;default:clearTimeout(f),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(){return window}function R$(t){na().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(){return typeof na().WorkerGlobalScope<"u"&&typeof na().importScripts=="function"}async function M$(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function D$(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function O$(){return bA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA="firebaseLocalStorageDb",L$=1,Lv="firebaseLocalStorage",NA="fbase_key";class Fm{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function qx(t,e){return t.transaction([Lv],e?"readwrite":"readonly").objectStore(Lv)}function F$(){const t=indexedDB.deleteDatabase(jA);return new Fm(t).toPromise()}function Cw(){const t=indexedDB.open(jA,L$);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Lv,{keyPath:NA})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Lv)?e(r):(r.close(),await F$(),e(await Cw()))})})}async function mE(t,e,n){const r=qx(t,!0).put({[NA]:e,value:n});return new Fm(r).toPromise()}async function V$(t,e){const n=qx(t,!1).get(e),r=await new Fm(n).toPromise();return r===void 0?null:r.value}function pE(t,e){const n=qx(t,!0).delete(e);return new Fm(n).toPromise()}const z$=800,U$=3;class SA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Cw(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>U$)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return bA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wx._getInstance(O$()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await M$(),!this.activeServiceWorker)return;this.sender=new A$(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||D$()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Cw();return await mE(e,Ov,"1"),await pE(e,Ov),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>mE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>V$(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>pE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=qx(i,!1).getAll();return new Fm(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),z$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}SA.type="LOCAL";const $$=SA;new Dm(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(t,e){return e?$a(e):(nt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b extends Fb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return nd(e,this._buildIdpRequest())}_linkToIdToken(e,n){return nd(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return nd(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function B$(t){return mA(t.auth,new $b(t),t.bypassAuthState)}function W$(t){const{auth:e,user:n}=t;return nt(n,e,"internal-error"),fA(n,new $b(t),t.bypassAuthState)}async function q$(t){const{auth:e,user:n}=t;return nt(n,e,"internal-error"),g$(n,new $b(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return B$;case"linkViaPopup":case"linkViaRedirect":return q$;case"reauthViaPopup":case"reauthViaRedirect":return W$;default:ei(this.auth,"internal-error")}}resolve(e){Xa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H$=new Dm(2e3,1e4);class Gu extends CA{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Gu.currentPopupAction&&Gu.currentPopupAction.cancel(),Gu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return nt(e,this.auth,"internal-error"),e}async onExecution(){Xa(this.filter.length===1,"Popup operations only handle one event");const e=Ub();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ta(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ta(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Gu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ta(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,H$.get())};e()}}Gu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G$="pendingRedirect",Ug=new Map;class K$ extends CA{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ug.get(this.auth._key());if(!e){try{const r=await Z$(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ug.set(this.auth._key(),e)}return this.bypassAuthState||Ug.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Z$(t,e){const n=TA(e),r=kA(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function Y$(t,e){return kA(t)._set(TA(e),"true")}function Q$(t,e){Ug.set(t._key(),e)}function kA(t){return $a(t._redirectPersistence)}function TA(t){return zg(G$,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X$(t,e,n){return J$(t,e,n)}async function J$(t,e,n){if(qs(t.app))return Promise.reject(yi(t));const r=fo(t);jU(t,e,zb),await r._initializationPromise;const i=EA(r,n);return await Y$(i,r),i._openRedirect(r,e,"signInViaRedirect")}async function e7(t,e){return await fo(t)._initializationPromise,PA(t,e,!1)}async function PA(t,e,n=!1){if(qs(t.app))return Promise.reject(yi(t));const r=fo(t),i=EA(r,e),o=await new K$(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t7=10*60*1e3;class n7{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!r7(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!IA(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ta(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=t7&&this.cachedEventUids.clear(),this.cachedEventUids.has(gE(e))}saveEventToCache(e){this.cachedEventUids.add(gE(e)),this.lastProcessedEventTime=Date.now()}}function gE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function IA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function r7(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return IA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s7(t,e={}){return Ti(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i7=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,a7=/^https?/;async function o7(t){if(t.config.emulator)return;const{authorizedDomains:e}=await s7(t);for(const n of e)try{if(l7(n))return}catch{}ei(t,"unauthorized-domain")}function l7(t){const e=Nw(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!a7.test(n))return!1;if(i7.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c7=new Dm(3e4,6e4);function vE(){const t=na().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function u7(t){return new Promise((e,n)=>{var r,i,a;function o(){vE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vE(),n(ta(t,"network-request-failed"))},timeout:c7.get()})}if(!((i=(r=na().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=na().gapi)===null||a===void 0)&&a.load)o();else{const c=YU("iframefcb");return na()[c]=()=>{gapi.load?o():n(ta(t,"network-request-failed"))},uA(`${ZU()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw $g=null,e})}let $g=null;function d7(t){return $g=$g||u7(t),$g}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h7=new Dm(5e3,15e3),f7="__/auth/iframe",m7="emulator/auth/iframe",p7={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},g7=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function v7(t){const e=t.config;nt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Db(e,m7):`https://${t.config.authDomain}/${f7}`,r={apiKey:e.apiKey,appName:t.name,v:$c},i=g7.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Rm(r).slice(1)}`}async function x7(t){const e=await d7(t),n=na().gapi;return nt(n,t,"internal-error"),e.open({where:document.body,url:v7(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:p7,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const o=ta(t,"network-request-failed"),c=na().setTimeout(()=>{a(o)},h7.get());function u(){na().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y7={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_7=500,w7=600,b7="_blank",j7="http://localhost";class xE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function N7(t,e,n,r=_7,i=w7){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},y7),{width:r.toString(),height:i.toString(),top:a,left:o}),h=Lr().toLowerCase();n&&(c=rA(h)?b7:n),tA(h)&&(e=e||j7,u.scrollbars="yes");const f=Object.entries(u).reduce((v,[_,N])=>`${v}${_}=${N},`,"");if(zU(h)&&c!=="_self")return S7(e||"",c),new xE(null);const p=window.open(e||"",c,f);nt(p,t,"popup-blocked");try{p.focus()}catch{}return new xE(p)}function S7(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E7="__/auth/handler",C7="emulator/auth/handler",k7=encodeURIComponent("fac");async function yE(t,e,n,r,i,a){nt(t.config.authDomain,t,"auth-domain-config-required"),nt(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:$c,eventId:i};if(e instanceof zb){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",cz(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof Lm){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const u=await t._getAppCheckToken(),h=u?`#${k7}=${encodeURIComponent(u)}`:"";return`${T7(t)}?${Rm(c).slice(1)}${h}`}function T7({config:t}){return t.emulator?Db(t,C7):`https://${t.authDomain}/${E7}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_="webStorageSupport";class P7{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wA,this._completeRedirectFn=PA,this._overrideRedirectResult=Q$}async _openPopup(e,n,r,i){var a;Xa((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await yE(e,n,r,Nw(),i);return N7(e,o,Ub())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await yE(e,n,r,Nw(),i);return R$(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(Xa(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await x7(e),r=new n7(e);return n.register("authEvent",i=>(nt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(V_,{type:V_},i=>{var a;const o=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[V_];o!==void 0&&n(!!o),ei(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=o7(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return lA()||nA()||Lb()}}const I7=P7;var _E="@firebase/auth",wE="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A7{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){nt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R7(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function M7(t){jc(new dl("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;nt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cA(t)},h=new HU(r,i,a,u);return t$(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),jc(new dl("auth-internal",e=>{const n=fo(e.getProvider("auth").getImmediate());return(r=>new A7(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ea(_E,wE,R7(t)),ea(_E,wE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D7=5*60,O7=zI("authIdTokenMaxAge")||D7;let bE=null;const L7=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>O7)return;const i=n==null?void 0:n.token;bE!==i&&(bE=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function F7(t=Ab()){const e=$x(t,"auth");if(e.isInitialized())return e.getImmediate();const n=e$(t,{popupRedirectResolver:I7,persistence:[$$,P$,wA]}),r=zI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=L7(a.toString());N$(n,o,()=>o(n.currentUser)),j$(n,c=>o(c))}}const i=LI("auth");return i&&n$(n,`http://${i}`),n}function V7(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}GU({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=ta("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",V7().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});M7("Browser");var jE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cc,AA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,F){function V(){}V.prototype=F.prototype,R.D=F.prototype,R.prototype=new V,R.prototype.constructor=R,R.C=function(k,M,O){for(var P=Array(arguments.length-2),W=2;W<arguments.length;W++)P[W-2]=arguments[W];return F.prototype[M].apply(k,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,F,V){V||(V=0);var k=Array(16);if(typeof F=="string")for(var M=0;16>M;++M)k[M]=F.charCodeAt(V++)|F.charCodeAt(V++)<<8|F.charCodeAt(V++)<<16|F.charCodeAt(V++)<<24;else for(M=0;16>M;++M)k[M]=F[V++]|F[V++]<<8|F[V++]<<16|F[V++]<<24;F=R.g[0],V=R.g[1],M=R.g[2];var O=R.g[3],P=F+(O^V&(M^O))+k[0]+3614090360&4294967295;F=V+(P<<7&4294967295|P>>>25),P=O+(M^F&(V^M))+k[1]+3905402710&4294967295,O=F+(P<<12&4294967295|P>>>20),P=M+(V^O&(F^V))+k[2]+606105819&4294967295,M=O+(P<<17&4294967295|P>>>15),P=V+(F^M&(O^F))+k[3]+3250441966&4294967295,V=M+(P<<22&4294967295|P>>>10),P=F+(O^V&(M^O))+k[4]+4118548399&4294967295,F=V+(P<<7&4294967295|P>>>25),P=O+(M^F&(V^M))+k[5]+1200080426&4294967295,O=F+(P<<12&4294967295|P>>>20),P=M+(V^O&(F^V))+k[6]+2821735955&4294967295,M=O+(P<<17&4294967295|P>>>15),P=V+(F^M&(O^F))+k[7]+4249261313&4294967295,V=M+(P<<22&4294967295|P>>>10),P=F+(O^V&(M^O))+k[8]+1770035416&4294967295,F=V+(P<<7&4294967295|P>>>25),P=O+(M^F&(V^M))+k[9]+2336552879&4294967295,O=F+(P<<12&4294967295|P>>>20),P=M+(V^O&(F^V))+k[10]+4294925233&4294967295,M=O+(P<<17&4294967295|P>>>15),P=V+(F^M&(O^F))+k[11]+2304563134&4294967295,V=M+(P<<22&4294967295|P>>>10),P=F+(O^V&(M^O))+k[12]+1804603682&4294967295,F=V+(P<<7&4294967295|P>>>25),P=O+(M^F&(V^M))+k[13]+4254626195&4294967295,O=F+(P<<12&4294967295|P>>>20),P=M+(V^O&(F^V))+k[14]+2792965006&4294967295,M=O+(P<<17&4294967295|P>>>15),P=V+(F^M&(O^F))+k[15]+1236535329&4294967295,V=M+(P<<22&4294967295|P>>>10),P=F+(M^O&(V^M))+k[1]+4129170786&4294967295,F=V+(P<<5&4294967295|P>>>27),P=O+(V^M&(F^V))+k[6]+3225465664&4294967295,O=F+(P<<9&4294967295|P>>>23),P=M+(F^V&(O^F))+k[11]+643717713&4294967295,M=O+(P<<14&4294967295|P>>>18),P=V+(O^F&(M^O))+k[0]+3921069994&4294967295,V=M+(P<<20&4294967295|P>>>12),P=F+(M^O&(V^M))+k[5]+3593408605&4294967295,F=V+(P<<5&4294967295|P>>>27),P=O+(V^M&(F^V))+k[10]+38016083&4294967295,O=F+(P<<9&4294967295|P>>>23),P=M+(F^V&(O^F))+k[15]+3634488961&4294967295,M=O+(P<<14&4294967295|P>>>18),P=V+(O^F&(M^O))+k[4]+3889429448&4294967295,V=M+(P<<20&4294967295|P>>>12),P=F+(M^O&(V^M))+k[9]+568446438&4294967295,F=V+(P<<5&4294967295|P>>>27),P=O+(V^M&(F^V))+k[14]+3275163606&4294967295,O=F+(P<<9&4294967295|P>>>23),P=M+(F^V&(O^F))+k[3]+4107603335&4294967295,M=O+(P<<14&4294967295|P>>>18),P=V+(O^F&(M^O))+k[8]+1163531501&4294967295,V=M+(P<<20&4294967295|P>>>12),P=F+(M^O&(V^M))+k[13]+2850285829&4294967295,F=V+(P<<5&4294967295|P>>>27),P=O+(V^M&(F^V))+k[2]+4243563512&4294967295,O=F+(P<<9&4294967295|P>>>23),P=M+(F^V&(O^F))+k[7]+1735328473&4294967295,M=O+(P<<14&4294967295|P>>>18),P=V+(O^F&(M^O))+k[12]+2368359562&4294967295,V=M+(P<<20&4294967295|P>>>12),P=F+(V^M^O)+k[5]+4294588738&4294967295,F=V+(P<<4&4294967295|P>>>28),P=O+(F^V^M)+k[8]+2272392833&4294967295,O=F+(P<<11&4294967295|P>>>21),P=M+(O^F^V)+k[11]+1839030562&4294967295,M=O+(P<<16&4294967295|P>>>16),P=V+(M^O^F)+k[14]+4259657740&4294967295,V=M+(P<<23&4294967295|P>>>9),P=F+(V^M^O)+k[1]+2763975236&4294967295,F=V+(P<<4&4294967295|P>>>28),P=O+(F^V^M)+k[4]+1272893353&4294967295,O=F+(P<<11&4294967295|P>>>21),P=M+(O^F^V)+k[7]+4139469664&4294967295,M=O+(P<<16&4294967295|P>>>16),P=V+(M^O^F)+k[10]+3200236656&4294967295,V=M+(P<<23&4294967295|P>>>9),P=F+(V^M^O)+k[13]+681279174&4294967295,F=V+(P<<4&4294967295|P>>>28),P=O+(F^V^M)+k[0]+3936430074&4294967295,O=F+(P<<11&4294967295|P>>>21),P=M+(O^F^V)+k[3]+3572445317&4294967295,M=O+(P<<16&4294967295|P>>>16),P=V+(M^O^F)+k[6]+76029189&4294967295,V=M+(P<<23&4294967295|P>>>9),P=F+(V^M^O)+k[9]+3654602809&4294967295,F=V+(P<<4&4294967295|P>>>28),P=O+(F^V^M)+k[12]+3873151461&4294967295,O=F+(P<<11&4294967295|P>>>21),P=M+(O^F^V)+k[15]+530742520&4294967295,M=O+(P<<16&4294967295|P>>>16),P=V+(M^O^F)+k[2]+3299628645&4294967295,V=M+(P<<23&4294967295|P>>>9),P=F+(M^(V|~O))+k[0]+4096336452&4294967295,F=V+(P<<6&4294967295|P>>>26),P=O+(V^(F|~M))+k[7]+1126891415&4294967295,O=F+(P<<10&4294967295|P>>>22),P=M+(F^(O|~V))+k[14]+2878612391&4294967295,M=O+(P<<15&4294967295|P>>>17),P=V+(O^(M|~F))+k[5]+4237533241&4294967295,V=M+(P<<21&4294967295|P>>>11),P=F+(M^(V|~O))+k[12]+1700485571&4294967295,F=V+(P<<6&4294967295|P>>>26),P=O+(V^(F|~M))+k[3]+2399980690&4294967295,O=F+(P<<10&4294967295|P>>>22),P=M+(F^(O|~V))+k[10]+4293915773&4294967295,M=O+(P<<15&4294967295|P>>>17),P=V+(O^(M|~F))+k[1]+2240044497&4294967295,V=M+(P<<21&4294967295|P>>>11),P=F+(M^(V|~O))+k[8]+1873313359&4294967295,F=V+(P<<6&4294967295|P>>>26),P=O+(V^(F|~M))+k[15]+4264355552&4294967295,O=F+(P<<10&4294967295|P>>>22),P=M+(F^(O|~V))+k[6]+2734768916&4294967295,M=O+(P<<15&4294967295|P>>>17),P=V+(O^(M|~F))+k[13]+1309151649&4294967295,V=M+(P<<21&4294967295|P>>>11),P=F+(M^(V|~O))+k[4]+4149444226&4294967295,F=V+(P<<6&4294967295|P>>>26),P=O+(V^(F|~M))+k[11]+3174756917&4294967295,O=F+(P<<10&4294967295|P>>>22),P=M+(F^(O|~V))+k[2]+718787259&4294967295,M=O+(P<<15&4294967295|P>>>17),P=V+(O^(M|~F))+k[9]+3951481745&4294967295,R.g[0]=R.g[0]+F&4294967295,R.g[1]=R.g[1]+(M+(P<<21&4294967295|P>>>11))&4294967295,R.g[2]=R.g[2]+M&4294967295,R.g[3]=R.g[3]+O&4294967295}r.prototype.u=function(R,F){F===void 0&&(F=R.length);for(var V=F-this.blockSize,k=this.B,M=this.h,O=0;O<F;){if(M==0)for(;O<=V;)i(this,R,O),O+=this.blockSize;if(typeof R=="string"){for(;O<F;)if(k[M++]=R.charCodeAt(O++),M==this.blockSize){i(this,k),M=0;break}}else for(;O<F;)if(k[M++]=R[O++],M==this.blockSize){i(this,k),M=0;break}}this.h=M,this.o+=F},r.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var F=1;F<R.length-8;++F)R[F]=0;var V=8*this.o;for(F=R.length-8;F<R.length;++F)R[F]=V&255,V/=256;for(this.u(R),R=Array(16),F=V=0;4>F;++F)for(var k=0;32>k;k+=8)R[V++]=this.g[F]>>>k&255;return R};function a(R,F){var V=c;return Object.prototype.hasOwnProperty.call(V,R)?V[R]:V[R]=F(R)}function o(R,F){this.h=F;for(var V=[],k=!0,M=R.length-1;0<=M;M--){var O=R[M]|0;k&&O==F||(V[M]=O,k=!1)}this.g=V}var c={};function u(R){return-128<=R&&128>R?a(R,function(F){return new o([F|0],0>F?-1:0)}):new o([R|0],0>R?-1:0)}function h(R){if(isNaN(R)||!isFinite(R))return p;if(0>R)return S(h(-R));for(var F=[],V=1,k=0;R>=V;k++)F[k]=R/V|0,V*=4294967296;return new o(F,0)}function f(R,F){if(R.length==0)throw Error("number format error: empty string");if(F=F||10,2>F||36<F)throw Error("radix out of range: "+F);if(R.charAt(0)=="-")return S(f(R.substring(1),F));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var V=h(Math.pow(F,8)),k=p,M=0;M<R.length;M+=8){var O=Math.min(8,R.length-M),P=parseInt(R.substring(M,M+O),F);8>O?(O=h(Math.pow(F,O)),k=k.j(O).add(h(P))):(k=k.j(V),k=k.add(h(P)))}return k}var p=u(0),v=u(1),_=u(16777216);t=o.prototype,t.m=function(){if(j(this))return-S(this).m();for(var R=0,F=1,V=0;V<this.g.length;V++){var k=this.i(V);R+=(0<=k?k:4294967296+k)*F,F*=4294967296}return R},t.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(N(this))return"0";if(j(this))return"-"+S(this).toString(R);for(var F=h(Math.pow(R,6)),V=this,k="";;){var M=I(V,F).g;V=w(V,M.j(F));var O=((0<V.g.length?V.g[0]:V.h)>>>0).toString(R);if(V=M,N(V))return O+k;for(;6>O.length;)O="0"+O;k=O+k}},t.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function N(R){if(R.h!=0)return!1;for(var F=0;F<R.g.length;F++)if(R.g[F]!=0)return!1;return!0}function j(R){return R.h==-1}t.l=function(R){return R=w(this,R),j(R)?-1:N(R)?0:1};function S(R){for(var F=R.g.length,V=[],k=0;k<F;k++)V[k]=~R.g[k];return new o(V,~R.h).add(v)}t.abs=function(){return j(this)?S(this):this},t.add=function(R){for(var F=Math.max(this.g.length,R.g.length),V=[],k=0,M=0;M<=F;M++){var O=k+(this.i(M)&65535)+(R.i(M)&65535),P=(O>>>16)+(this.i(M)>>>16)+(R.i(M)>>>16);k=P>>>16,O&=65535,P&=65535,V[M]=P<<16|O}return new o(V,V[V.length-1]&-2147483648?-1:0)};function w(R,F){return R.add(S(F))}t.j=function(R){if(N(this)||N(R))return p;if(j(this))return j(R)?S(this).j(S(R)):S(S(this).j(R));if(j(R))return S(this.j(S(R)));if(0>this.l(_)&&0>R.l(_))return h(this.m()*R.m());for(var F=this.g.length+R.g.length,V=[],k=0;k<2*F;k++)V[k]=0;for(k=0;k<this.g.length;k++)for(var M=0;M<R.g.length;M++){var O=this.i(k)>>>16,P=this.i(k)&65535,W=R.i(M)>>>16,X=R.i(M)&65535;V[2*k+2*M]+=P*X,y(V,2*k+2*M),V[2*k+2*M+1]+=O*X,y(V,2*k+2*M+1),V[2*k+2*M+1]+=P*W,y(V,2*k+2*M+1),V[2*k+2*M+2]+=O*W,y(V,2*k+2*M+2)}for(k=0;k<F;k++)V[k]=V[2*k+1]<<16|V[2*k];for(k=F;k<2*F;k++)V[k]=0;return new o(V,0)};function y(R,F){for(;(R[F]&65535)!=R[F];)R[F+1]+=R[F]>>>16,R[F]&=65535,F++}function E(R,F){this.g=R,this.h=F}function I(R,F){if(N(F))throw Error("division by zero");if(N(R))return new E(p,p);if(j(R))return F=I(S(R),F),new E(S(F.g),S(F.h));if(j(F))return F=I(R,S(F)),new E(S(F.g),F.h);if(30<R.g.length){if(j(R)||j(F))throw Error("slowDivide_ only works with positive integers.");for(var V=v,k=F;0>=k.l(R);)V=D(V),k=D(k);var M=B(V,1),O=B(k,1);for(k=B(k,2),V=B(V,2);!N(k);){var P=O.add(k);0>=P.l(R)&&(M=M.add(V),O=P),k=B(k,1),V=B(V,1)}return F=w(R,M.j(F)),new E(M,F)}for(M=p;0<=R.l(F);){for(V=Math.max(1,Math.floor(R.m()/F.m())),k=Math.ceil(Math.log(V)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),O=h(V),P=O.j(F);j(P)||0<P.l(R);)V-=k,O=h(V),P=O.j(F);N(O)&&(O=v),M=M.add(O),R=w(R,P)}return new E(M,R)}t.A=function(R){return I(this,R).h},t.and=function(R){for(var F=Math.max(this.g.length,R.g.length),V=[],k=0;k<F;k++)V[k]=this.i(k)&R.i(k);return new o(V,this.h&R.h)},t.or=function(R){for(var F=Math.max(this.g.length,R.g.length),V=[],k=0;k<F;k++)V[k]=this.i(k)|R.i(k);return new o(V,this.h|R.h)},t.xor=function(R){for(var F=Math.max(this.g.length,R.g.length),V=[],k=0;k<F;k++)V[k]=this.i(k)^R.i(k);return new o(V,this.h^R.h)};function D(R){for(var F=R.g.length+1,V=[],k=0;k<F;k++)V[k]=R.i(k)<<1|R.i(k-1)>>>31;return new o(V,R.h)}function B(R,F){var V=F>>5;F%=32;for(var k=R.g.length-V,M=[],O=0;O<k;O++)M[O]=0<F?R.i(O+V)>>>F|R.i(O+V+1)<<32-F:R.i(O+V);return new o(M,R.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,AA=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=f,cc=o}).apply(typeof jE<"u"?jE:typeof self<"u"?self:typeof window<"u"?window:{});var lg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var RA,hf,MA,Bg,kw,DA,OA,LA;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,C,A){return m==Array.prototype||m==Object.prototype||(m[C]=A.value),m};function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof lg=="object"&&lg];for(var C=0;C<m.length;++C){var A=m[C];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var r=n(this);function i(m,C){if(C)e:{var A=r;m=m.split(".");for(var $=0;$<m.length-1;$++){var J=m[$];if(!(J in A))break e;A=A[J]}m=m[m.length-1],$=A[m],C=C($),C!=$&&C!=null&&e(A,m,{configurable:!0,writable:!0,value:C})}}function a(m,C){m instanceof String&&(m+="");var A=0,$=!1,J={next:function(){if(!$&&A<m.length){var ie=A++;return{value:C(ie,m[ie]),done:!1}}return $=!0,{done:!0,value:void 0}}};return J[Symbol.iterator]=function(){return J},J}i("Array.prototype.values",function(m){return m||function(){return a(this,function(C,A){return A})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(m){var C=typeof m;return C=C!="object"?C:m?Array.isArray(m)?"array":C:"null",C=="array"||C=="object"&&typeof m.length=="number"}function h(m){var C=typeof m;return C=="object"&&m!=null||C=="function"}function f(m,C,A){return m.call.apply(m.bind,arguments)}function p(m,C,A){if(!m)throw Error();if(2<arguments.length){var $=Array.prototype.slice.call(arguments,2);return function(){var J=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(J,$),m.apply(C,J)}}return function(){return m.apply(C,arguments)}}function v(m,C,A){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,v.apply(null,arguments)}function _(m,C){var A=Array.prototype.slice.call(arguments,1);return function(){var $=A.slice();return $.push.apply($,arguments),m.apply(this,$)}}function N(m,C){function A(){}A.prototype=C.prototype,m.aa=C.prototype,m.prototype=new A,m.prototype.constructor=m,m.Qb=function($,J,ie){for(var Ne=Array(arguments.length-2),Bt=2;Bt<arguments.length;Bt++)Ne[Bt-2]=arguments[Bt];return C.prototype[J].apply($,Ne)}}function j(m){const C=m.length;if(0<C){const A=Array(C);for(let $=0;$<C;$++)A[$]=m[$];return A}return[]}function S(m,C){for(let A=1;A<arguments.length;A++){const $=arguments[A];if(u($)){const J=m.length||0,ie=$.length||0;m.length=J+ie;for(let Ne=0;Ne<ie;Ne++)m[J+Ne]=$[Ne]}else m.push($)}}class w{constructor(C,A){this.i=C,this.j=A,this.h=0,this.g=null}get(){let C;return 0<this.h?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}function y(m){return/^[\s\xa0]*$/.test(m)}function E(){var m=c.navigator;return m&&(m=m.userAgent)?m:""}function I(m){return I[" "](m),m}I[" "]=function(){};var D=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function B(m,C,A){for(const $ in m)C.call(A,m[$],$,m)}function R(m,C){for(const A in m)C.call(void 0,m[A],A,m)}function F(m){const C={};for(const A in m)C[A]=m[A];return C}const V="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(m,C){let A,$;for(let J=1;J<arguments.length;J++){$=arguments[J];for(A in $)m[A]=$[A];for(let ie=0;ie<V.length;ie++)A=V[ie],Object.prototype.hasOwnProperty.call($,A)&&(m[A]=$[A])}}function M(m){var C=1;m=m.split(":");const A=[];for(;0<C&&m.length;)A.push(m.shift()),C--;return m.length&&A.push(m.join(":")),A}function O(m){c.setTimeout(()=>{throw m},0)}function P(){var m=q;let C=null;return m.g&&(C=m.g,m.g=m.g.next,m.g||(m.h=null),C.next=null),C}class W{constructor(){this.h=this.g=null}add(C,A){const $=X.get();$.set(C,A),this.h?this.h.next=$:this.g=$,this.h=$}}var X=new w(()=>new ee,m=>m.reset());class ee{constructor(){this.next=this.g=this.h=null}set(C,A){this.h=C,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,U=!1,q=new W,H=()=>{const m=c.Promise.resolve(void 0);Z=()=>{m.then(Q)}};var Q=()=>{for(var m;m=P();){try{m.h.call(m.g)}catch(A){O(A)}var C=X;C.j(m),100>C.h&&(C.h++,m.next=C.g,C.g=m)}U=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ye(m,C){this.type=m,this.g=this.target=C,this.defaultPrevented=!1}ye.prototype.h=function(){this.defaultPrevented=!0};var Ue=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,C=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const A=()=>{};c.addEventListener("test",A,C),c.removeEventListener("test",A,C)}catch{}return m}();function He(m,C){if(ye.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var A=this.type=m.type,$=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=C,C=m.relatedTarget){if(D){e:{try{I(C.nodeName);var J=!0;break e}catch{}J=!1}J||(C=null)}}else A=="mouseover"?C=m.fromElement:A=="mouseout"&&(C=m.toElement);this.relatedTarget=C,$?(this.clientX=$.clientX!==void 0?$.clientX:$.pageX,this.clientY=$.clientY!==void 0?$.clientY:$.pageY,this.screenX=$.screenX||0,this.screenY=$.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:re[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&He.aa.h.call(this)}}N(He,ye);var re={2:"touch",3:"pen",4:"mouse"};He.prototype.h=function(){He.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var ce="closure_listenable_"+(1e6*Math.random()|0),xe=0;function Fe(m,C,A,$,J){this.listener=m,this.proxy=null,this.src=C,this.type=A,this.capture=!!$,this.ha=J,this.key=++xe,this.da=this.fa=!1}function je(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Ce(m){this.src=m,this.g={},this.h=0}Ce.prototype.add=function(m,C,A,$,J){var ie=m.toString();m=this.g[ie],m||(m=this.g[ie]=[],this.h++);var Ne=Me(m,C,$,J);return-1<Ne?(C=m[Ne],A||(C.fa=!1)):(C=new Fe(C,this.src,ie,!!$,J),C.fa=A,m.push(C)),C};function Re(m,C){var A=C.type;if(A in m.g){var $=m.g[A],J=Array.prototype.indexOf.call($,C,void 0),ie;(ie=0<=J)&&Array.prototype.splice.call($,J,1),ie&&(je(C),m.g[A].length==0&&(delete m.g[A],m.h--))}}function Me(m,C,A,$){for(var J=0;J<m.length;++J){var ie=m[J];if(!ie.da&&ie.listener==C&&ie.capture==!!A&&ie.ha==$)return J}return-1}var lt="closure_lm_"+(1e6*Math.random()|0),wt={};function de(m,C,A,$,J){if(Array.isArray(C)){for(var ie=0;ie<C.length;ie++)de(m,C[ie],A,$,J);return null}return A=_e(A),m&&m[ce]?m.K(C,A,h($)?!!$.capture:!1,J):Ye(m,C,A,!1,$,J)}function Ye(m,C,A,$,J,ie){if(!C)throw Error("Invalid event type");var Ne=h(J)?!!J.capture:!!J,Bt=Ie(m);if(Bt||(m[lt]=Bt=new Ce(m)),A=Bt.add(C,A,$,Ne,ie),A.proxy)return A;if($=vt(),A.proxy=$,$.src=m,$.listener=A,m.addEventListener)Ue||(J=Ne),J===void 0&&(J=!1),m.addEventListener(C.toString(),$,J);else if(m.attachEvent)m.attachEvent(te(C.toString()),$);else if(m.addListener&&m.removeListener)m.addListener($);else throw Error("addEventListener and attachEvent are unavailable.");return A}function vt(){function m(A){return C.call(m.src,m.listener,A)}const C=le;return m}function an(m,C,A,$,J){if(Array.isArray(C))for(var ie=0;ie<C.length;ie++)an(m,C[ie],A,$,J);else $=h($)?!!$.capture:!!$,A=_e(A),m&&m[ce]?(m=m.i,C=String(C).toString(),C in m.g&&(ie=m.g[C],A=Me(ie,A,$,J),-1<A&&(je(ie[A]),Array.prototype.splice.call(ie,A,1),ie.length==0&&(delete m.g[C],m.h--)))):m&&(m=Ie(m))&&(C=m.g[C.toString()],m=-1,C&&(m=Me(C,A,$,J)),(A=-1<m?C[m]:null)&&G(A))}function G(m){if(typeof m!="number"&&m&&!m.da){var C=m.src;if(C&&C[ce])Re(C.i,m);else{var A=m.type,$=m.proxy;C.removeEventListener?C.removeEventListener(A,$,m.capture):C.detachEvent?C.detachEvent(te(A),$):C.addListener&&C.removeListener&&C.removeListener($),(A=Ie(C))?(Re(A,m),A.h==0&&(A.src=null,C[lt]=null)):je(m)}}}function te(m){return m in wt?wt[m]:wt[m]="on"+m}function le(m,C){if(m.da)m=!0;else{C=new He(C,this);var A=m.listener,$=m.ha||m.src;m.fa&&G(m),m=A.call($,C)}return m}function Ie(m){return m=m[lt],m instanceof Ce?m:null}var Se="__closure_events_fn_"+(1e9*Math.random()>>>0);function _e(m){return typeof m=="function"?m:(m[Se]||(m[Se]=function(C){return m.handleEvent(C)}),m[Se])}function Ae(){he.call(this),this.i=new Ce(this),this.M=this,this.F=null}N(Ae,he),Ae.prototype[ce]=!0,Ae.prototype.removeEventListener=function(m,C,A,$){an(this,m,C,A,$)};function it(m,C){var A,$=m.F;if($)for(A=[];$;$=$.F)A.push($);if(m=m.M,$=C.type||C,typeof C=="string")C=new ye(C,m);else if(C instanceof ye)C.target=C.target||m;else{var J=C;C=new ye($,m),k(C,J)}if(J=!0,A)for(var ie=A.length-1;0<=ie;ie--){var Ne=C.g=A[ie];J=It(Ne,$,!0,C)&&J}if(Ne=C.g=m,J=It(Ne,$,!0,C)&&J,J=It(Ne,$,!1,C)&&J,A)for(ie=0;ie<A.length;ie++)Ne=C.g=A[ie],J=It(Ne,$,!1,C)&&J}Ae.prototype.N=function(){if(Ae.aa.N.call(this),this.i){var m=this.i,C;for(C in m.g){for(var A=m.g[C],$=0;$<A.length;$++)je(A[$]);delete m.g[C],m.h--}}this.F=null},Ae.prototype.K=function(m,C,A,$){return this.i.add(String(m),C,!1,A,$)},Ae.prototype.L=function(m,C,A,$){return this.i.add(String(m),C,!0,A,$)};function It(m,C,A,$){if(C=m.i.g[String(C)],!C)return!0;C=C.concat();for(var J=!0,ie=0;ie<C.length;++ie){var Ne=C[ie];if(Ne&&!Ne.da&&Ne.capture==A){var Bt=Ne.listener,$n=Ne.ha||Ne.src;Ne.fa&&Re(m.i,Ne),J=Bt.call($n,$)!==!1&&J}}return J&&!$.defaultPrevented}function fr(m,C,A){if(typeof m=="function")A&&(m=v(m,A));else if(m&&typeof m.handleEvent=="function")m=v(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(C)?-1:c.setTimeout(m,C||0)}function Ai(m){m.g=fr(()=>{m.g=null,m.i&&(m.i=!1,Ai(m))},m.l);const C=m.h;m.h=null,m.m.apply(null,C)}class fs extends he{constructor(C,A){super(),this.m=C,this.l=A,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:Ai(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function va(m){he.call(this),this.h=m,this.g={}}N(va,he);var xa=[];function Ri(m){B(m.g,function(C,A){this.g.hasOwnProperty(A)&&G(C)},m),m.g={}}va.prototype.N=function(){va.aa.N.call(this),Ri(this)},va.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var mo=c.JSON.stringify,Xc=c.JSON.parse,ya=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function po(){}po.prototype.h=null;function fp(m){return m.h||(m.h=m.i())}function hh(){}var go={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Jc(){ye.call(this,"d")}N(Jc,ye);function fh(){ye.call(this,"c")}N(fh,ye);var _a={},mp=null;function eu(){return mp=mp||new Ae}_a.La="serverreachability";function pp(m){ye.call(this,_a.La,m)}N(pp,ye);function Ol(m){const C=eu();it(C,new pp(C))}_a.STAT_EVENT="statevent";function tu(m,C){ye.call(this,_a.STAT_EVENT,m),this.stat=C}N(tu,ye);function mr(m){const C=eu();it(C,new tu(C,m))}_a.Ma="timingevent";function gp(m,C){ye.call(this,_a.Ma,m),this.size=C}N(gp,ye);function Ll(m,C){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},C)}function Fl(){this.g=!0}Fl.prototype.xa=function(){this.g=!1};function Rs(m,C,A,$,J,ie){m.info(function(){if(m.g)if(ie)for(var Ne="",Bt=ie.split("&"),$n=0;$n<Bt.length;$n++){var At=Bt[$n].split("=");if(1<At.length){var Yt=At[0];At=At[1];var wn=Yt.split("_");Ne=2<=wn.length&&wn[1]=="type"?Ne+(Yt+"="+At+"&"):Ne+(Yt+"=redacted&")}}else Ne=null;else Ne=ie;return"XMLHTTP REQ ("+$+") [attempt "+J+"]: "+C+`
`+A+`
`+Ne})}function Je(m,C,A,$,J,ie,Ne){m.info(function(){return"XMLHTTP RESP ("+$+") [ attempt "+J+"]: "+C+`
`+A+`
`+ie+" "+Ne})}function wa(m,C,A,$){m.info(function(){return"XMLHTTP TEXT ("+C+"): "+xp(m,A)+($?" "+$:"")})}function vp(m,C){m.info(function(){return"TIMEOUT: "+C})}Fl.prototype.info=function(){};function xp(m,C){if(!m.g)return C;if(!C)return null;try{var A=JSON.parse(C);if(A){for(m=0;m<A.length;m++)if(Array.isArray(A[m])){var $=A[m];if(!(2>$.length)){var J=$[1];if(Array.isArray(J)&&!(1>J.length)){var ie=J[0];if(ie!="noop"&&ie!="stop"&&ie!="close")for(var Ne=1;Ne<J.length;Ne++)J[Ne]=""}}}}return mo(A)}catch{return C}}var Vl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},nu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ru;function ri(){}N(ri,po),ri.prototype.g=function(){return new XMLHttpRequest},ri.prototype.i=function(){return{}},ru=new ri;function si(m,C,A,$){this.j=m,this.i=C,this.l=A,this.R=$||1,this.U=new va(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new yp}function yp(){this.i=null,this.g="",this.h=!1}var _p={},mh={};function ph(m,C,A){m.L=1,m.v=Ds(Cn(C)),m.m=A,m.P=!0,gh(m,null)}function gh(m,C){m.F=Date.now(),iu(m),m.A=Cn(m.v);var A=m.A,$=m.R;Array.isArray($)||($=[String($)]),jp(A.i,"t",$),m.C=0,A=m.j.J,m.h=new yp,m.g=Pp(m.j,A?C:null,!m.m),0<m.O&&(m.M=new fs(v(m.Y,m,m.g),m.O)),C=m.U,A=m.g,$=m.ca;var J="readystatechange";Array.isArray(J)||(J&&(xa[0]=J.toString()),J=xa);for(var ie=0;ie<J.length;ie++){var Ne=de(A,J[ie],$||C.handleEvent,!1,C.h||C);if(!Ne)break;C.g[Ne.key]=Ne}C=m.H?F(m.H):{},m.m?(m.u||(m.u="POST"),C["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,C)):(m.u="GET",m.g.ea(m.A,m.u,null,C)),Ol(),Rs(m.i,m.u,m.A,m.l,m.R,m.m)}si.prototype.ca=function(m){m=m.target;const C=this.M;C&&Fr(m)==3?C.j():this.Y(m)},si.prototype.Y=function(m){try{if(m==this.g)e:{const wn=Fr(this.g);var C=this.g.Ba();const jo=this.g.Z();if(!(3>wn)&&(wn!=3||this.g&&(this.h.h||this.g.oa()||Ah(this.g)))){this.J||wn!=4||C==7||(C==8||0>=jo?Ol(3):Ol(2)),vh(this);var A=this.g.Z();this.X=A;t:if(wp(this)){var $=Ah(this.g);m="";var J=$.length,ie=Fr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ba(this),zl(this);var Ne="";break t}this.h.i=new c.TextDecoder}for(C=0;C<J;C++)this.h.h=!0,m+=this.h.i.decode($[C],{stream:!(ie&&C==J-1)});$.length=0,this.h.g+=m,this.C=0,Ne=this.h.g}else Ne=this.g.oa();if(this.o=A==200,Je(this.i,this.u,this.A,this.l,this.R,wn,A),this.o){if(this.T&&!this.K){t:{if(this.g){var Bt,$n=this.g;if((Bt=$n.g?$n.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(Bt)){var At=Bt;break t}}At=null}if(A=At)wa(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ul(this,A);else{this.o=!1,this.s=3,mr(12),ba(this),zl(this);break e}}if(this.P){A=!0;let Rn;for(;!this.J&&this.C<Ne.length;)if(Rn=su(this,Ne),Rn==mh){wn==4&&(this.s=4,mr(14),A=!1),wa(this.i,this.l,null,"[Incomplete Response]");break}else if(Rn==_p){this.s=4,mr(15),wa(this.i,this.l,Ne,"[Invalid Chunk]"),A=!1;break}else wa(this.i,this.l,Rn,null),Ul(this,Rn);if(wp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wn!=4||Ne.length!=0||this.h.h||(this.s=1,mr(16),A=!1),this.o=this.o&&A,!A)wa(this.i,this.l,Ne,"[Invalid Chunked Response]"),ba(this),zl(this);else if(0<Ne.length&&!this.W){this.W=!0;var Yt=this.j;Yt.g==this&&Yt.ba&&!Yt.M&&(Yt.j.info("Great, no buffering proxy detected. Bytes received: "+Ne.length),mu(Yt),Yt.M=!0,mr(11))}}else wa(this.i,this.l,Ne,null),Ul(this,Ne);wn==4&&ba(this),this.o&&!this.J&&(wn==4?Mh(this.j,this):(this.o=!1,iu(this)))}else Xy(this.g),A==400&&0<Ne.indexOf("Unknown SID")?(this.s=3,mr(12)):(this.s=0,mr(13)),ba(this),zl(this)}}}catch{}finally{}};function wp(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function su(m,C){var A=m.C,$=C.indexOf(`
`,A);return $==-1?mh:(A=Number(C.substring(A,$)),isNaN(A)?_p:($+=1,$+A>C.length?mh:(C=C.slice($,$+A),m.C=$+A,C)))}si.prototype.cancel=function(){this.J=!0,ba(this)};function iu(m){m.S=Date.now()+m.I,bp(m,m.I)}function bp(m,C){if(m.B!=null)throw Error("WatchDog timer not null");m.B=Ll(v(m.ba,m),C)}function vh(m){m.B&&(c.clearTimeout(m.B),m.B=null)}si.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(vp(this.i,this.A),this.L!=2&&(Ol(),mr(17)),ba(this),this.s=2,zl(this)):bp(this,this.S-m)};function zl(m){m.j.G==0||m.J||Mh(m.j,m)}function ba(m){vh(m);var C=m.M;C&&typeof C.ma=="function"&&C.ma(),m.M=null,Ri(m.U),m.g&&(C=m.g,m.g=null,C.abort(),C.ma())}function Ul(m,C){try{var A=m.j;if(A.G!=0&&(A.g==m||Et(A.h,m))){if(!m.K&&Et(A.h,m)&&A.G==3){try{var $=A.Da.g.parse(C)}catch{$=null}if(Array.isArray($)&&$.length==3){var J=$;if(J[0]==0){e:if(!A.u){if(A.g)if(A.g.F+3e3<m.F)gu(A),hu(A);else break e;fu(A),mr(18)}}else A.za=J[1],0<A.za-A.T&&37500>J[2]&&A.F&&A.v==0&&!A.C&&(A.C=Ll(v(A.Za,A),6e3));if(1>=vo(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else Ca(A,11)}else if((m.K||A.g==m)&&gu(A),!y(C))for(J=A.Da.g.parse(C),C=0;C<J.length;C++){let At=J[C];if(A.T=At[0],At=At[1],A.G==2)if(At[0]=="c"){A.K=At[1],A.ia=At[2];const Yt=At[3];Yt!=null&&(A.la=Yt,A.j.info("VER="+A.la));const wn=At[4];wn!=null&&(A.Aa=wn,A.j.info("SVER="+A.Aa));const jo=At[5];jo!=null&&typeof jo=="number"&&0<jo&&($=1.5*jo,A.L=$,A.j.info("backChannelRequestTimeoutMs_="+$)),$=A;const Rn=m.g;if(Rn){const xu=Rn.g?Rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xu){var ie=$.h;ie.g||xu.indexOf("spdy")==-1&&xu.indexOf("quic")==-1&&xu.indexOf("h2")==-1||(ie.j=ie.l,ie.g=new Set,ie.h&&(tn(ie,ie.h),ie.h=null))}if($.D){const Oi=Rn.g?Rn.g.getResponseHeader("X-HTTP-Session-Id"):null;Oi&&($.ya=Oi,ct($.I,$.D,Oi))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-m.F,A.j.info("Handshake RTT: "+A.R+"ms")),$=A;var Ne=m;if($.qa=vu($,$.J?$.ia:null,$.W),Ne.K){Bl($.h,Ne);var Bt=Ne,$n=$.L;$n&&(Bt.I=$n),Bt.B&&(vh(Bt),iu(Bt)),$.g=Ne}else oi($);0<A.i.length&&bo(A)}else At[0]!="stop"&&At[0]!="close"||Ca(A,7);else A.G==3&&(At[0]=="stop"||At[0]=="close"?At[0]=="stop"?Ca(A,7):du(A):At[0]!="noop"&&A.l&&A.l.ta(At),A.v=0)}}Ol(4)}catch{}}var $l=class{constructor(m,C){this.g=m,this.map=C}};function xh(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function yh(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function vo(m){return m.h?1:m.g?m.g.size:0}function Et(m,C){return m.h?m.h==C:m.g?m.g.has(C):!1}function tn(m,C){m.g?m.g.add(C):m.h=C}function Bl(m,C){m.h&&m.h==C?m.h=null:m.g&&m.g.has(C)&&m.g.delete(C)}xh.prototype.cancel=function(){if(this.i=ja(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function ja(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let C=m.i;for(const A of m.g.values())C=C.concat(A.D);return C}return j(m.i)}function xo(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(u(m)){for(var C=[],A=m.length,$=0;$<A;$++)C.push(m[$]);return C}C=[],A=0;for($ in m)C[A++]=m[$];return C}function _h(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(u(m)||typeof m=="string"){var C=[];m=m.length;for(var A=0;A<m;A++)C.push(A);return C}C=[],A=0;for(const $ in m)C[A++]=$;return C}}}function gt(m,C){if(m.forEach&&typeof m.forEach=="function")m.forEach(C,void 0);else if(u(m)||typeof m=="string")Array.prototype.forEach.call(m,C,void 0);else for(var A=_h(m),$=xo(m),J=$.length,ie=0;ie<J;ie++)C.call(void 0,$[ie],A&&A[ie],m)}var hn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wh(m,C){if(m){m=m.split("&");for(var A=0;A<m.length;A++){var $=m[A].indexOf("="),J=null;if(0<=$){var ie=m[A].substring(0,$);J=m[A].substring($+1)}else ie=m[A];C(ie,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function Ms(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof Ms){this.h=m.h,au(this,m.j),this.o=m.o,this.g=m.g,Na(this,m.s),this.l=m.l;var C=m.i,A=new Sa;A.i=C.i,C.g&&(A.g=new Map(C.g),A.h=C.h),Mi(this,A),this.m=m.m}else m&&(C=String(m).match(hn))?(this.h=!1,au(this,C[1]||"",!0),this.o=ii(C[2]||""),this.g=ii(C[3]||"",!0),Na(this,C[4]),this.l=ii(C[5]||"",!0),Mi(this,C[6]||"",!0),this.m=ii(C[7]||"")):(this.h=!1,this.i=new Sa(null,this.h))}Ms.prototype.toString=function(){var m=[],C=this.j;C&&m.push(ai(C,yo,!0),":");var A=this.g;return(A||C=="file")&&(m.push("//"),(C=this.o)&&m.push(ai(C,yo,!0),"@"),m.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&m.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&m.push("/"),m.push(ai(A,A.charAt(0)=="/"?Nh:jh,!0))),(A=this.i.toString())&&m.push("?",A),(A=this.m)&&m.push("#",ai(A,Sh)),m.join("")};function Cn(m){return new Ms(m)}function au(m,C,A){m.j=A?ii(C,!0):C,m.j&&(m.j=m.j.replace(/:$/,""))}function Na(m,C){if(C){if(C=Number(C),isNaN(C)||0>C)throw Error("Bad port number "+C);m.s=C}else m.s=null}function Mi(m,C,A){C instanceof Sa?(m.i=C,Os(m.i,m.h)):(A||(C=ai(C,ou)),m.i=new Sa(C,m.h))}function ct(m,C,A){m.i.set(C,A)}function Ds(m){return ct(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function ii(m,C){return m?C?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function ai(m,C,A){return typeof m=="string"?(m=encodeURI(m).replace(C,bh),A&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function bh(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var yo=/[#\/\?@]/g,jh=/[#\?:]/g,Nh=/[#\?]/g,ou=/[#\?@]/g,Sh=/#/g;function Sa(m,C){this.h=this.g=null,this.i=m||null,this.j=!!C}function ms(m){m.g||(m.g=new Map,m.h=0,m.i&&wh(m.i,function(C,A){m.add(decodeURIComponent(C.replace(/\+/g," ")),A)}))}t=Sa.prototype,t.add=function(m,C){ms(this),this.i=null,m=rt(this,m);var A=this.g.get(m);return A||this.g.set(m,A=[]),A.push(C),this.h+=1,this};function Eh(m,C){ms(m),C=rt(m,C),m.g.has(C)&&(m.i=null,m.h-=m.g.get(C).length,m.g.delete(C))}function lu(m,C){return ms(m),C=rt(m,C),m.g.has(C)}t.forEach=function(m,C){ms(this),this.g.forEach(function(A,$){A.forEach(function(J){m.call(C,J,$,this)},this)},this)},t.na=function(){ms(this);const m=Array.from(this.g.values()),C=Array.from(this.g.keys()),A=[];for(let $=0;$<C.length;$++){const J=m[$];for(let ie=0;ie<J.length;ie++)A.push(C[$])}return A},t.V=function(m){ms(this);let C=[];if(typeof m=="string")lu(this,m)&&(C=C.concat(this.g.get(rt(this,m))));else{m=Array.from(this.g.values());for(let A=0;A<m.length;A++)C=C.concat(m[A])}return C},t.set=function(m,C){return ms(this),this.i=null,m=rt(this,m),lu(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[C]),this.h+=1,this},t.get=function(m,C){return m?(m=this.V(m),0<m.length?String(m[0]):C):C};function jp(m,C,A){Eh(m,C),0<A.length&&(m.i=null,m.g.set(rt(m,C),j(A)),m.h+=A.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],C=Array.from(this.g.keys());for(var A=0;A<C.length;A++){var $=C[A];const ie=encodeURIComponent(String($)),Ne=this.V($);for($=0;$<Ne.length;$++){var J=ie;Ne[$]!==""&&(J+="="+encodeURIComponent(String(Ne[$]))),m.push(J)}}return this.i=m.join("&")};function rt(m,C){return C=String(C),m.j&&(C=C.toLowerCase()),C}function Os(m,C){C&&!m.j&&(ms(m),m.i=null,m.g.forEach(function(A,$){var J=$.toLowerCase();$!=J&&(Eh(this,$),jp(this,J,A))},m)),m.j=C}function Zt(m,C){const A=new Fl;if(c.Image){const $=new Image;$.onload=_(Ls,A,"TestLoadImage: loaded",!0,C,$),$.onerror=_(Ls,A,"TestLoadImage: error",!1,C,$),$.onabort=_(Ls,A,"TestLoadImage: abort",!1,C,$),$.ontimeout=_(Ls,A,"TestLoadImage: timeout",!1,C,$),c.setTimeout(function(){$.ontimeout&&$.ontimeout()},1e4),$.src=m}else C(!1)}function Np(m,C){const A=new Fl,$=new AbortController,J=setTimeout(()=>{$.abort(),Ls(A,"TestPingServer: timeout",!1,C)},1e4);fetch(m,{signal:$.signal}).then(ie=>{clearTimeout(J),ie.ok?Ls(A,"TestPingServer: ok",!0,C):Ls(A,"TestPingServer: server error",!1,C)}).catch(()=>{clearTimeout(J),Ls(A,"TestPingServer: error",!1,C)})}function Ls(m,C,A,$,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),$(A)}catch{}}function Ch(){this.g=new ya}function kh(m,C,A){const $=A||"";try{gt(m,function(J,ie){let Ne=J;h(J)&&(Ne=mo(J)),C.push($+ie+"="+encodeURIComponent(Ne))})}catch(J){throw C.push($+"type="+encodeURIComponent("_badmap")),J}}function Fs(m){this.l=m.Ub||null,this.j=m.eb||!1}N(Fs,po),Fs.prototype.g=function(){return new _o(this.l,this.j)},Fs.prototype.i=function(m){return function(){return m}}({});function _o(m,C){Ae.call(this),this.D=m,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(_o,Ae),t=_o.prototype,t.open=function(m,C){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=C,this.readyState=1,ps(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const C={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(C.body=m),(this.D||c).fetch(new Request(this.A,C)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_n(this)),this.readyState=0},t.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,ps(this)),this.g&&(this.readyState=3,ps(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;wo(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function wo(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}t.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var C=m.value?m.value:new Uint8Array(0);(C=this.v.decode(C,{stream:!m.done}))&&(this.response=this.responseText+=C)}m.done?_n(this):ps(this),this.readyState==3&&wo(this)}},t.Ra=function(m){this.g&&(this.response=this.responseText=m,_n(this))},t.Qa=function(m){this.g&&(this.response=m,_n(this))},t.ga=function(){this.g&&_n(this)};function _n(m){m.readyState=4,m.l=null,m.j=null,m.v=null,ps(m)}t.setRequestHeader=function(m,C){this.u.append(m,C)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],C=this.h.entries();for(var A=C.next();!A.done;)A=A.value,m.push(A[0]+": "+A[1]),A=C.next();return m.join(`\r
`)};function ps(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(_o.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Th(m){let C="";return B(m,function(A,$){C+=$,C+=":",C+=A,C+=`\r
`}),C}function cu(m,C,A){e:{for($ in A){var $=!1;break e}$=!0}$||(A=Th(A),typeof m=="string"?A!=null&&encodeURIComponent(String(A)):ct(m,C,A))}function fn(m){Ae.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(fn,Ae);var Sp=/^https?$/i,Ph=["POST","PUT"];t=fn.prototype,t.Ha=function(m){this.J=m},t.ea=function(m,C,A,$){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);C=C?C.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ru.g(),this.v=this.o?fp(this.o):fp(ru),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(C,String(m),!0),this.B=!1}catch(ie){Ep(this,ie);return}if(m=A||"",A=new Map(this.headers),$)if(Object.getPrototypeOf($)===Object.prototype)for(var J in $)A.set(J,$[J]);else if(typeof $.keys=="function"&&typeof $.get=="function")for(const ie of $.keys())A.set(ie,$.get(ie));else throw Error("Unknown input type for opt_headers: "+String($));$=Array.from(A.keys()).find(ie=>ie.toLowerCase()=="content-type"),J=c.FormData&&m instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Ph,C,void 0))||$||J||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,Ne]of A)this.g.setRequestHeader(ie,Ne);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Jr(this),this.u=!0,this.g.send(m),this.u=!1}catch(ie){Ep(this,ie)}};function Ep(m,C){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=C,m.m=5,Ih(m),uu(m)}function Ih(m){m.A||(m.A=!0,it(m,"complete"),it(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,it(this,"complete"),it(this,"abort"),uu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),uu(this,!0)),fn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Nt(this):this.bb())},t.bb=function(){Nt(this)};function Nt(m){if(m.h&&typeof o<"u"&&(!m.v[1]||Fr(m)!=4||m.Z()!=2)){if(m.u&&Fr(m)==4)fr(m.Ea,0,m);else if(it(m,"readystatechange"),Fr(m)==4){m.h=!1;try{const Ne=m.Z();e:switch(Ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break e;default:C=!1}var A;if(!(A=C)){var $;if($=Ne===0){var J=String(m.D).match(hn)[1]||null;!J&&c.self&&c.self.location&&(J=c.self.location.protocol.slice(0,-1)),$=!Sp.test(J?J.toLowerCase():"")}A=$}if(A)it(m,"complete"),it(m,"success");else{m.m=6;try{var ie=2<Fr(m)?m.g.statusText:""}catch{ie=""}m.l=ie+" ["+m.Z()+"]",Ih(m)}}finally{uu(m)}}}}function uu(m,C){if(m.g){Jr(m);const A=m.g,$=m.v[0]?()=>{}:null;m.g=null,m.v=null,C||it(m,"ready");try{A.onreadystatechange=$}catch{}}}function Jr(m){m.I&&(c.clearTimeout(m.I),m.I=null)}t.isActive=function(){return!!this.g};function Fr(m){return m.g?m.g.readyState:0}t.Z=function(){try{return 2<Fr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(m){if(this.g){var C=this.g.responseText;return m&&C.indexOf(m)==0&&(C=C.substring(m.length)),Xc(C)}};function Ah(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Xy(m){const C={};m=(m.g&&2<=Fr(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let $=0;$<m.length;$++){if(y(m[$]))continue;var A=M(m[$]);const J=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const ie=C[J]||[];C[J]=ie,ie.push(A)}R(C,function($){return $.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ea(m,C,A){return A&&A.internalChannelParams&&A.internalChannelParams[m]||C}function Cp(m){this.Aa=0,this.i=[],this.j=new Fl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ea("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ea("baseRetryDelayMs",5e3,m),this.cb=Ea("retryDelaySeedMs",1e4,m),this.Wa=Ea("forwardChannelMaxRetries",2,m),this.wa=Ea("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new xh(m&&m.concurrentRequestLimit),this.Da=new Ch,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Cp.prototype,t.la=8,t.G=1,t.connect=function(m,C,A,$){mr(0),this.W=m,this.H=C||{},A&&$!==void 0&&(this.H.OSID=A,this.H.OAID=$),this.F=this.X,this.I=vu(this,null,this.W),bo(this)};function du(m){if(kp(m),m.G==3){var C=m.U++,A=Cn(m.I);if(ct(A,"SID",m.K),ct(A,"RID",C),ct(A,"TYPE","terminate"),Wl(m,A),C=new si(m,m.j,C),C.L=2,C.v=Ds(Cn(A)),A=!1,c.navigator&&c.navigator.sendBeacon)try{A=c.navigator.sendBeacon(C.v.toString(),"")}catch{}!A&&c.Image&&(new Image().src=C.v,A=!0),A||(C.g=Pp(C.j,null),C.g.ea(C.v)),C.F=Date.now(),iu(C)}Tp(m)}function hu(m){m.g&&(mu(m),m.g.cancel(),m.g=null)}function kp(m){hu(m),m.u&&(c.clearTimeout(m.u),m.u=null),gu(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&c.clearTimeout(m.s),m.s=null)}function bo(m){if(!yh(m.h)&&!m.s){m.s=!0;var C=m.Ga;Z||H(),U||(Z(),U=!0),q.add(C,m),m.B=0}}function Jy(m,C){return vo(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=C.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=Ll(v(m.Ga,m,C),Dh(m,m.B)),m.B++,!0)}t.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const J=new si(this,this.j,m);let ie=this.o;if(this.S&&(ie?(ie=F(ie),k(ie,this.S)):ie=this.S),this.m!==null||this.O||(J.H=ie,ie=null),this.P)e:{for(var C=0,A=0;A<this.i.length;A++){t:{var $=this.i[A];if("__data__"in $.map&&($=$.map.__data__,typeof $=="string")){$=$.length;break t}$=void 0}if($===void 0)break;if(C+=$,4096<C){C=A;break e}if(C===4096||A===this.i.length-1){C=A+1;break e}}C=1e3}else C=1e3;C=Rh(this,J,C),A=Cn(this.I),ct(A,"RID",m),ct(A,"CVER",22),this.D&&ct(A,"X-HTTP-Session-Id",this.D),Wl(this,A),ie&&(this.O?C="headers="+encodeURIComponent(String(Th(ie)))+"&"+C:this.m&&cu(A,this.m,ie)),tn(this.h,J),this.Ua&&ct(A,"TYPE","init"),this.P?(ct(A,"$req",C),ct(A,"SID","null"),J.T=!0,ph(J,A,null)):ph(J,A,C),this.G=2}}else this.G==3&&(m?gs(this,m):this.i.length==0||yh(this.h)||gs(this))};function gs(m,C){var A;C?A=C.l:A=m.U++;const $=Cn(m.I);ct($,"SID",m.K),ct($,"RID",A),ct($,"AID",m.T),Wl(m,$),m.m&&m.o&&cu($,m.m,m.o),A=new si(m,m.j,A,m.B+1),m.m===null&&(A.H=m.o),C&&(m.i=C.D.concat(m.i)),C=Rh(m,A,1e3),A.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),tn(m.h,A),ph(A,$,C)}function Wl(m,C){m.H&&B(m.H,function(A,$){ct(C,$,A)}),m.l&&gt({},function(A,$){ct(C,$,A)})}function Rh(m,C,A){A=Math.min(m.i.length,A);var $=m.l?v(m.l.Na,m.l,m):null;e:{var J=m.i;let ie=-1;for(;;){const Ne=["count="+A];ie==-1?0<A?(ie=J[0].g,Ne.push("ofs="+ie)):ie=0:Ne.push("ofs="+ie);let Bt=!0;for(let $n=0;$n<A;$n++){let At=J[$n].g;const Yt=J[$n].map;if(At-=ie,0>At)ie=Math.max(0,J[$n].g-100),Bt=!1;else try{kh(Yt,Ne,"req"+At+"_")}catch{$&&$(Yt)}}if(Bt){$=Ne.join("&");break e}}}return m=m.i.splice(0,A),C.D=m,$}function oi(m){if(!m.g&&!m.u){m.Y=1;var C=m.Fa;Z||H(),U||(Z(),U=!0),q.add(C,m),m.v=0}}function fu(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=Ll(v(m.Fa,m),Dh(m,m.v)),m.v++,!0)}t.Fa=function(){if(this.u=null,pu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=Ll(v(this.ab,this),m)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mr(10),hu(this),pu(this))};function mu(m){m.A!=null&&(c.clearTimeout(m.A),m.A=null)}function pu(m){m.g=new si(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var C=Cn(m.qa);ct(C,"RID","rpc"),ct(C,"SID",m.K),ct(C,"AID",m.T),ct(C,"CI",m.F?"0":"1"),!m.F&&m.ja&&ct(C,"TO",m.ja),ct(C,"TYPE","xmlhttp"),Wl(m,C),m.m&&m.o&&cu(C,m.m,m.o),m.L&&(m.g.I=m.L);var A=m.g;m=m.ia,A.L=1,A.v=Ds(Cn(C)),A.m=null,A.P=!0,gh(A,m)}t.Za=function(){this.C!=null&&(this.C=null,hu(this),fu(this),mr(19))};function gu(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function Mh(m,C){var A=null;if(m.g==C){gu(m),mu(m),m.g=null;var $=2}else if(Et(m.h,C))A=C.D,Bl(m.h,C),$=1;else return;if(m.G!=0){if(C.o)if($==1){A=C.m?C.m.length:0,C=Date.now()-C.F;var J=m.B;$=eu(),it($,new gp($,A)),bo(m)}else oi(m);else if(J=C.s,J==3||J==0&&0<C.X||!($==1&&Jy(m,C)||$==2&&fu(m)))switch(A&&0<A.length&&(C=m.h,C.i=C.i.concat(A)),J){case 1:Ca(m,5);break;case 4:Ca(m,10);break;case 3:Ca(m,6);break;default:Ca(m,2)}}}function Dh(m,C){let A=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(A*=2),A*C}function Ca(m,C){if(m.j.info("Error code "+C),C==2){var A=v(m.fb,m),$=m.Xa;const J=!$;$=new Ms($||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||au($,"https"),Ds($),J?Zt($.toString(),A):Np($.toString(),A)}else mr(2);m.G=0,m.l&&m.l.sa(C),Tp(m),kp(m)}t.fb=function(m){m?(this.j.info("Successfully pinged google.com"),mr(2)):(this.j.info("Failed to ping google.com"),mr(1))};function Tp(m){if(m.G=0,m.ka=[],m.l){const C=ja(m.h);(C.length!=0||m.i.length!=0)&&(S(m.ka,C),S(m.ka,m.i),m.h.i.length=0,j(m.i),m.i.length=0),m.l.ra()}}function vu(m,C,A){var $=A instanceof Ms?Cn(A):new Ms(A);if($.g!="")C&&($.g=C+"."+$.g),Na($,$.s);else{var J=c.location;$=J.protocol,C=C?C+"."+J.hostname:J.hostname,J=+J.port;var ie=new Ms(null);$&&au(ie,$),C&&(ie.g=C),J&&Na(ie,J),A&&(ie.l=A),$=ie}return A=m.D,C=m.ya,A&&C&&ct($,A,C),ct($,"VER",m.la),Wl(m,$),$}function Pp(m,C,A){if(C&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return C=m.Ca&&!m.pa?new fn(new Fs({eb:A})):new fn(m.pa),C.Ha(m.J),C}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Oh(){}t=Oh.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ql(){}ql.prototype.g=function(m,C){return new or(m,C)};function or(m,C){Ae.call(this),this.g=new Cp(C),this.l=m,this.h=C&&C.messageUrlParams||null,m=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(m?m["X-WebChannel-Content-Type"]=C.messageContentType:m={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.va&&(m?m["X-WebChannel-Client-Profile"]=C.va:m={"X-WebChannel-Client-Profile":C.va}),this.g.S=m,(m=C&&C.Sb)&&!y(m)&&(this.g.m=m),this.v=C&&C.supportsCrossDomainXhr||!1,this.u=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!y(C)&&(this.g.D=C,m=this.h,m!==null&&C in m&&(m=this.h,C in m&&delete m[C])),this.j=new Vs(this)}N(or,Ae),or.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},or.prototype.close=function(){du(this.g)},or.prototype.o=function(m){var C=this.g;if(typeof m=="string"){var A={};A.__data__=m,m=A}else this.u&&(A={},A.__data__=mo(m),m=A);C.i.push(new $l(C.Ya++,m)),C.G==3&&bo(C)},or.prototype.N=function(){this.g.l=null,delete this.j,du(this.g),delete this.g,or.aa.N.call(this)};function Di(m){Jc.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var C=m.__sm__;if(C){e:{for(const A in C){m=A;break e}m=void 0}(this.i=m)&&(m=this.i,C=C!==null&&m in C?C[m]:void 0),this.data=C}else this.data=m}N(Di,Jc);function Ip(){fh.call(this),this.status=1}N(Ip,fh);function Vs(m){this.g=m}N(Vs,Oh),Vs.prototype.ua=function(){it(this.g,"a")},Vs.prototype.ta=function(m){it(this.g,new Di(m))},Vs.prototype.sa=function(m){it(this.g,new Ip)},Vs.prototype.ra=function(){it(this.g,"b")},ql.prototype.createWebChannel=ql.prototype.g,or.prototype.send=or.prototype.o,or.prototype.open=or.prototype.m,or.prototype.close=or.prototype.close,LA=function(){return new ql},OA=function(){return eu()},DA=_a,kw={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Vl.NO_ERROR=0,Vl.TIMEOUT=8,Vl.HTTP_ERROR=6,Bg=Vl,nu.COMPLETE="complete",MA=nu,hh.EventType=go,go.OPEN="a",go.CLOSE="b",go.ERROR="c",go.MESSAGE="d",Ae.prototype.listen=Ae.prototype.K,hf=hh,fn.prototype.listenOnce=fn.prototype.L,fn.prototype.getLastError=fn.prototype.Ka,fn.prototype.getLastErrorCode=fn.prototype.Ba,fn.prototype.getStatus=fn.prototype.Z,fn.prototype.getResponseJson=fn.prototype.Oa,fn.prototype.getResponseText=fn.prototype.oa,fn.prototype.send=fn.prototype.ea,fn.prototype.setWithCredentials=fn.prototype.Ha,RA=fn}).apply(typeof lg<"u"?lg:typeof self<"u"?self:typeof window<"u"?window:{});const NE="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tr=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Tr.UNAUTHENTICATED=new Tr(null),Tr.GOOGLE_CREDENTIALS=new Tr("google-credentials-uid"),Tr.FIRST_PARTY=new Tr("first-party-uid"),Tr.MOCK_USER=new Tr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kd="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc=new Pb("@firebase/firestore");function Zh(){return Cc.logLevel}function Ke(t,...e){if(Cc.logLevel<=Pt.DEBUG){const n=e.map(Bb);Cc.debug(`Firestore (${Kd}): ${t}`,...n)}}function Ja(t,...e){if(Cc.logLevel<=Pt.ERROR){const n=e.map(Bb);Cc.error(`Firestore (${Kd}): ${t}`,...n)}}function vd(t,...e){if(Cc.logLevel<=Pt.WARN){const n=e.map(Bb);Cc.warn(`Firestore (${Kd}): ${t}`,...n)}}function Bb(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(t="Unexpected state"){const e=`FIRESTORE (${Kd}) INTERNAL ASSERTION FAILED: `+t;throw Ja(e),new Error(e)}function Kt(t,e){t||ut()}function pt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends fa{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class z7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Tr.UNAUTHENTICATED))}shutdown(){}}class U7{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class $7{constructor(e){this.t=e,this.currentUser=Tr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Kt(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let a=new Wa;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Wa,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=a;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},c=u=>{Ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Wa)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Kt(typeof r.accessToken=="string"),new FA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Kt(e===null||typeof e=="string"),new Tr(e)}}class B7{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Tr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class W7{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new B7(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Tr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class q7{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class H7{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Kt(this.o===void 0);const r=a=>{a.error!=null&&Ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.R;return this.R=a.token,Ke("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):Ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Kt(typeof n.token=="string"),this.R=n.token,new q7(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G7(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=G7(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%e.length))}return r}}function Ot(t,e){return t<e?-1:t>e?1:0}function xd(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ke(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ke(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ke(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ir.fromMillis(Date.now())}static fromDate(e){return ir.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ir(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ot(this.nanoseconds,e.nanoseconds):Ot(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ht(e)}static min(){return new ht(new ir(0,0))}static max(){return new ht(new ir(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e,n,r){n===void 0?n=0:n>e.length&&ut(),r===void 0?r=e.length-n:r>e.length-n&&ut(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return am.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof am?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=e.get(i),o=n.get(i);if(a<o)return-1;if(a>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class nn extends am{construct(e,n,r){return new nn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ke(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new nn(n)}static emptyPath(){return new nn([])}}const K7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vr extends am{construct(e,n,r){return new vr(e,n,r)}static isValidIdentifier(e){return K7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new vr(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new ke(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new ke(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ke(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(a(),i++)}if(a(),o)throw new ke(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vr(n)}static emptyPath(){return new vr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.path=e}static fromPath(e){return new tt(nn.fromString(e))}static fromName(e){return new tt(nn.fromString(e).popFirst(5))}static empty(){return new tt(nn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return nn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new tt(new nn(e.slice()))}}function Z7(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ht.fromTimestamp(r===1e9?new ir(n+1,0):new ir(n,r));return new fl(i,tt.empty(),e)}function Y7(t){return new fl(t.readTime,t.key,-1)}class fl{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new fl(ht.min(),tt.empty(),-1)}static max(){return new fl(ht.max(),tt.empty(),-1)}}function Q7(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=tt.comparator(t.documentKey,e.documentKey),n!==0?n:Ot(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X7="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class J7{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vm(t){if(t.code!==ue.FAILED_PRECONDITION||t.message!==X7)throw t;Ke("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ut(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ge((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ge?n:ge.resolve(n)}catch(n){return ge.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ge.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ge.reject(n)}static resolve(e){return new ge((n,r)=>{n(e)})}static reject(e){return new ge((n,r)=>{r(e)})}static waitFor(e){return new ge((n,r)=>{let i=0,a=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++a,o&&a===i&&n()},u=>r(u))}),o=!0,a===i&&n()})}static or(e){let n=ge.resolve(!1);for(const r of e)n=n.next(i=>i?ge.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,a)=>{r.push(n.call(this,i,a))}),this.waitFor(r)}static mapArray(e,n){return new ge((r,i)=>{const a=e.length,o=new Array(a);let c=0;for(let u=0;u<a;u++){const h=u;n(e[h]).next(f=>{o[h]=f,++c,c===a&&r(o)},f=>i(f))}})}static doWhile(e,n){return new ge((r,i)=>{const a=()=>{e()===!0?n().next(()=>{a()},i):r()};a()})}}function eB(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function zm(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Wb.oe=-1;function Hx(t){return t==null}function Fv(t){return t===0&&1/t==-1/0}function tB(t){return typeof t=="number"&&Number.isInteger(t)&&!Fv(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Bc(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function zA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e,n){this.comparator=e,this.root=n||gr.EMPTY}insert(e,n){return new En(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,gr.BLACK,null,null))}remove(e){return new En(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cg(this.root,e,this.comparator,!1)}getReverseIterator(){return new cg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cg(this.root,e,this.comparator,!0)}}class cg{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gr{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??gr.RED,this.left=i??gr.EMPTY,this.right=a??gr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new gr(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return gr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return gr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ut();const e=this.left.check();if(e!==this.right.check())throw ut();return e+(this.isRed()?0:1)}}gr.EMPTY=null,gr.RED=!0,gr.BLACK=!1;gr.EMPTY=new class{constructor(){this.size=0}get key(){throw ut()}get value(){throw ut()}get color(){throw ut()}get left(){throw ut()}get right(){throw ut()}copy(e,n,r,i,a){return this}insert(e,n,r){return new gr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this.comparator=e,this.data=new En(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new EE(this.data.getIterator())}getIteratorFrom(e){return new EE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof _r)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new _r(this.comparator);return n.data=e,n}}class EE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e){this.fields=e,e.sort(vr.comparator)}static empty(){return new bs([])}unionWith(e){let n=new _r(vr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new bs(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return xd(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new UA("Invalid base64 string: "+a):a}}(e);return new br(n)}static fromUint8Array(e){const n=function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a}(e);return new br(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ot(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}br.EMPTY_BYTE_STRING=new br("");const nB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ml(t){if(Kt(!!t),typeof t=="string"){let e=0;const n=nB.exec(t);if(Kt(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Mn(t.seconds),nanos:Mn(t.nanos)}}function Mn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function kc(t){return typeof t=="string"?br.fromBase64String(t):br.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function qb(t){const e=t.mapValue.fields.__previous_value__;return Gx(e)?qb(e):e}function om(t){const e=ml(t.mapValue.fields.__local_write_time__.timestampValue);return new ir(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rB{constructor(e,n,r,i,a,o,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=h}}class lm{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new lm("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof lm&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug={mapValue:{}};function Tc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Gx(t)?4:iB(t)?9007199254740991:sB(t)?10:11:ut()}function ca(t,e){if(t===e)return!0;const n=Tc(t);if(n!==Tc(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return om(t).isEqual(om(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=ml(i.timestampValue),c=ml(a.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return kc(i.bytesValue).isEqual(kc(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return Mn(i.geoPointValue.latitude)===Mn(a.geoPointValue.latitude)&&Mn(i.geoPointValue.longitude)===Mn(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return Mn(i.integerValue)===Mn(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=Mn(i.doubleValue),c=Mn(a.doubleValue);return o===c?Fv(o)===Fv(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return xd(t.arrayValue.values||[],e.arrayValue.values||[],ca);case 10:case 11:return function(i,a){const o=i.mapValue.fields||{},c=a.mapValue.fields||{};if(SE(o)!==SE(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!ca(o[u],c[u])))return!1;return!0}(t,e);default:return ut()}}function cm(t,e){return(t.values||[]).find(n=>ca(n,e))!==void 0}function yd(t,e){if(t===e)return 0;const n=Tc(t),r=Tc(e);if(n!==r)return Ot(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ot(t.booleanValue,e.booleanValue);case 2:return function(a,o){const c=Mn(a.integerValue||a.doubleValue),u=Mn(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return CE(t.timestampValue,e.timestampValue);case 4:return CE(om(t),om(e));case 5:return Ot(t.stringValue,e.stringValue);case 6:return function(a,o){const c=kc(a),u=kc(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const c=a.split("/"),u=o.split("/");for(let h=0;h<c.length&&h<u.length;h++){const f=Ot(c[h],u[h]);if(f!==0)return f}return Ot(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const c=Ot(Mn(a.latitude),Mn(o.latitude));return c!==0?c:Ot(Mn(a.longitude),Mn(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return kE(t.arrayValue,e.arrayValue);case 10:return function(a,o){var c,u,h,f;const p=a.fields||{},v=o.fields||{},_=(c=p.value)===null||c===void 0?void 0:c.arrayValue,N=(u=v.value)===null||u===void 0?void 0:u.arrayValue,j=Ot(((h=_==null?void 0:_.values)===null||h===void 0?void 0:h.length)||0,((f=N==null?void 0:N.values)===null||f===void 0?void 0:f.length)||0);return j!==0?j:kE(_,N)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===ug.mapValue&&o===ug.mapValue)return 0;if(a===ug.mapValue)return 1;if(o===ug.mapValue)return-1;const c=a.fields||{},u=Object.keys(c),h=o.fields||{},f=Object.keys(h);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){const v=Ot(u[p],f[p]);if(v!==0)return v;const _=yd(c[u[p]],h[f[p]]);if(_!==0)return _}return Ot(u.length,f.length)}(t.mapValue,e.mapValue);default:throw ut()}}function CE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ot(t,e);const n=ml(t),r=ml(e),i=Ot(n.seconds,r.seconds);return i!==0?i:Ot(n.nanos,r.nanos)}function kE(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=yd(n[i],r[i]);if(a)return a}return Ot(n.length,r.length)}function _d(t){return Tw(t)}function Tw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ml(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return kc(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return tt.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=Tw(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const o of r)a?a=!1:i+=",",i+=`${o}:${Tw(n.fields[o])}`;return i+"}"}(t.mapValue):ut()}function Vv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Pw(t){return!!t&&"integerValue"in t}function Hb(t){return!!t&&"arrayValue"in t}function TE(t){return!!t&&"nullValue"in t}function PE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Wg(t){return!!t&&"mapValue"in t}function sB(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Pf(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Bc(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Pf(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Pf(t.arrayValue.values[n]);return e}return Object.assign({},t)}function iB(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e){this.value=e}static empty(){return new rs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Wg(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pf(n)}setAll(e){let n=vr.emptyPath(),r={},i=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}o?r[c.lastSegment()]=Pf(o):i.push(c.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());Wg(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ca(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Wg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Bc(n,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new rs(Pf(this.value))}}function $A(t){const e=[];return Bc(t.fields,(n,r)=>{const i=new vr([n]);if(Wg(r)){const a=$A(r.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)}),new bs(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e,n,r,i,a,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=c}static newInvalidDocument(e){return new Ir(e,0,ht.min(),ht.min(),ht.min(),rs.empty(),0)}static newFoundDocument(e,n,r,i){return new Ir(e,1,n,ht.min(),r,i,0)}static newNoDocument(e,n){return new Ir(e,2,n,ht.min(),ht.min(),rs.empty(),0)}static newUnknownDocument(e,n){return new Ir(e,3,n,ht.min(),ht.min(),rs.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ht.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ht.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ir&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ir(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,n){this.position=e,this.inclusive=n}}function IE(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],o=t.position[i];if(a.field.isKeyField()?r=tt.comparator(tt.fromName(o.referenceValue),n.key):r=yd(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function AE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ca(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,n="asc"){this.field=e,this.dir=n}}function aB(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let BA=class{};class Kn extends BA{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new lB(e,n,r):n==="array-contains"?new dB(e,r):n==="in"?new hB(e,r):n==="not-in"?new fB(e,r):n==="array-contains-any"?new mB(e,r):new Kn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new cB(e,r):new uB(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(yd(n,this.value)):n!==null&&Tc(this.value)===Tc(n)&&this.matchesComparison(yd(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ut()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ni extends BA{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Ni(e,n)}matches(e){return WA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function WA(t){return t.op==="and"}function qA(t){return oB(t)&&WA(t)}function oB(t){for(const e of t.filters)if(e instanceof Ni)return!1;return!0}function Iw(t){if(t instanceof Kn)return t.field.canonicalString()+t.op.toString()+_d(t.value);if(qA(t))return t.filters.map(e=>Iw(e)).join(",");{const e=t.filters.map(n=>Iw(n)).join(",");return`${t.op}(${e})`}}function HA(t,e){return t instanceof Kn?function(r,i){return i instanceof Kn&&r.op===i.op&&r.field.isEqual(i.field)&&ca(r.value,i.value)}(t,e):t instanceof Ni?function(r,i){return i instanceof Ni&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,o,c)=>a&&HA(o,i.filters[c]),!0):!1}(t,e):void ut()}function GA(t){return t instanceof Kn?function(n){return`${n.field.canonicalString()} ${n.op} ${_d(n.value)}`}(t):t instanceof Ni?function(n){return n.op.toString()+" {"+n.getFilters().map(GA).join(" ,")+"}"}(t):"Filter"}class lB extends Kn{constructor(e,n,r){super(e,n,r),this.key=tt.fromName(r.referenceValue)}matches(e){const n=tt.comparator(e.key,this.key);return this.matchesComparison(n)}}class cB extends Kn{constructor(e,n){super(e,"in",n),this.keys=KA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class uB extends Kn{constructor(e,n){super(e,"not-in",n),this.keys=KA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function KA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>tt.fromName(r.referenceValue))}class dB extends Kn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Hb(n)&&cm(n.arrayValue,this.value)}}class hB extends Kn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&cm(this.value.arrayValue,n)}}class fB extends Kn{constructor(e,n){super(e,"not-in",n)}matches(e){if(cm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!cm(this.value.arrayValue,n)}}class mB extends Kn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Hb(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>cm(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pB{constructor(e,n=null,r=[],i=[],a=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=c,this.ue=null}}function RE(t,e=null,n=[],r=[],i=null,a=null,o=null){return new pB(t,e,n,r,i,a,o)}function Gb(t){const e=pt(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Iw(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),Hx(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>_d(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>_d(r)).join(",")),e.ue=n}return e.ue}function Kb(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!aB(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!HA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!AE(t.startAt,e.startAt)&&AE(t.endAt,e.endAt)}function Aw(t){return tt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,n=null,r=[],i=[],a=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function gB(t,e,n,r,i,a,o,c){return new Wc(t,e,n,r,i,a,o,c)}function Kx(t){return new Wc(t)}function ME(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Zb(t){return t.collectionGroup!==null}function rd(t){const e=pt(t);if(e.ce===null){e.ce=[];const n=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new _r(vr.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(c=c.add(h.field))})}),c})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.ce.push(new um(a,r))}),n.has(vr.keyField().canonicalString())||e.ce.push(new um(vr.keyField(),r))}return e.ce}function ra(t){const e=pt(t);return e.le||(e.le=vB(e,rd(t))),e.le}function vB(t,e){if(t.limitType==="F")return RE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new um(i.field,a)});const n=t.endAt?new wd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new wd(t.startAt.position,t.startAt.inclusive):null;return RE(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Rw(t,e){const n=t.filters.concat([e]);return new Wc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function zv(t,e,n){return new Wc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Zx(t,e){return Kb(ra(t),ra(e))&&t.limitType===e.limitType}function ZA(t){return`${Gb(ra(t))}|lt:${t.limitType}`}function Iu(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>GA(i)).join(", ")}]`),Hx(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>_d(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>_d(i)).join(",")),`Target(${r})`}(ra(t))}; limitType=${t.limitType})`}function Yx(t,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):tt.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,i){for(const a of rd(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,c,u){const h=IE(o,c,u);return o.inclusive?h<=0:h<0}(r.startAt,rd(r),i)||r.endAt&&!function(o,c,u){const h=IE(o,c,u);return o.inclusive?h>=0:h>0}(r.endAt,rd(r),i))}(t,e)}function xB(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function YA(t){return(e,n)=>{let r=!1;for(const i of rd(t)){const a=yB(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function yB(t,e,n){const r=t.field.isKeyField()?tt.comparator(e.key,n.key):function(a,o,c){const u=o.data.field(a),h=c.data.field(a);return u!==null&&h!==null?yd(u,h):ut()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ut()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Bc(this.inner,(n,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return zA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _B=new En(tt.comparator);function eo(){return _B}const QA=new En(tt.comparator);function ff(...t){let e=QA;for(const n of t)e=e.insert(n.key,n);return e}function XA(t){let e=QA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function rc(){return If()}function JA(){return If()}function If(){return new Zd(t=>t.toString(),(t,e)=>t.isEqual(e))}const wB=new En(tt.comparator),bB=new _r(tt.comparator);function kt(...t){let e=bB;for(const n of t)e=e.add(n);return e}const jB=new _r(Ot);function NB(){return jB}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fv(e)?"-0":e}}function eR(t){return{integerValue:""+t}}function SB(t,e){return tB(e)?eR(e):Yb(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(){this._=void 0}}function EB(t,e,n){return t instanceof dm?function(i,a){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Gx(a)&&(a=qb(a)),a&&(o.fields.__previous_value__=a),{mapValue:o}}(n,e):t instanceof hm?nR(t,e):t instanceof fm?rR(t,e):function(i,a){const o=tR(i,a),c=DE(o)+DE(i.Pe);return Pw(o)&&Pw(i.Pe)?eR(c):Yb(i.serializer,c)}(t,e)}function CB(t,e,n){return t instanceof hm?nR(t,e):t instanceof fm?rR(t,e):n}function tR(t,e){return t instanceof Uv?function(r){return Pw(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class dm extends Qx{}class hm extends Qx{constructor(e){super(),this.elements=e}}function nR(t,e){const n=sR(e);for(const r of t.elements)n.some(i=>ca(i,r))||n.push(r);return{arrayValue:{values:n}}}class fm extends Qx{constructor(e){super(),this.elements=e}}function rR(t,e){let n=sR(e);for(const r of t.elements)n=n.filter(i=>!ca(i,r));return{arrayValue:{values:n}}}class Uv extends Qx{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function DE(t){return Mn(t.integerValue||t.doubleValue)}function sR(t){return Hb(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kB{constructor(e,n){this.field=e,this.transform=n}}function TB(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof hm&&i instanceof hm||r instanceof fm&&i instanceof fm?xd(r.elements,i.elements,ca):r instanceof Uv&&i instanceof Uv?ca(r.Pe,i.Pe):r instanceof dm&&i instanceof dm}(t.transform,e.transform)}class PB{constructor(e,n){this.version=e,this.transformResults=n}}class Gr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Gr}static exists(e){return new Gr(void 0,e)}static updateTime(e){return new Gr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qg(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Xx{}function iR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Jx(t.key,Gr.none()):new Um(t.key,t.data,Gr.none());{const n=t.data,r=rs.empty();let i=new _r(vr.comparator);for(let a of e.fields)if(!i.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),i=i.add(a)}return new Tl(t.key,r,new bs(i.toArray()),Gr.none())}}function IB(t,e,n){t instanceof Um?function(i,a,o){const c=i.value.clone(),u=LE(i.fieldTransforms,a,o.transformResults);c.setAll(u),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Tl?function(i,a,o){if(!qg(i.precondition,a))return void a.convertToUnknownDocument(o.version);const c=LE(i.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(aR(i)),u.setAll(c),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Af(t,e,n,r){return t instanceof Um?function(a,o,c,u){if(!qg(a.precondition,o))return c;const h=a.value.clone(),f=FE(a.fieldTransforms,u,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Tl?function(a,o,c,u){if(!qg(a.precondition,o))return c;const h=FE(a.fieldTransforms,u,o),f=o.data;return f.setAll(aR(a)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(a,o,c){return qg(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function AB(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=tR(r.transform,i||null);a!=null&&(n===null&&(n=rs.empty()),n.set(r.field,a))}return n||null}function OE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&xd(r,i,(a,o)=>TB(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Um extends Xx{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Tl extends Xx{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function aR(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function LE(t,e,n){const r=new Map;Kt(t.length===n.length);for(let i=0;i<n.length;i++){const a=t[i],o=a.transform,c=e.data.field(a.field);r.set(a.field,CB(o,c,n[i]))}return r}function FE(t,e,n){const r=new Map;for(const i of t){const a=i.transform,o=n.data.field(i.field);r.set(i.field,EB(a,o,e))}return r}class Jx extends Xx{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class RB extends Xx{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MB{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&IB(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Af(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Af(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=JA();return this.mutations.forEach(i=>{const a=e.get(i.key),o=a.overlayedDocument;let c=this.applyToLocalView(o,a.mutatedFields);c=n.has(i.key)?null:c;const u=iR(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ht.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),kt())}isEqual(e){return this.batchId===e.batchId&&xd(this.mutations,e.mutations,(n,r)=>OE(n,r))&&xd(this.baseMutations,e.baseMutations,(n,r)=>OE(n,r))}}class Qb{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Kt(e.mutations.length===r.length);let i=function(){return wB}();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new Qb(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let DB=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OB{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wn,Rt;function LB(t){switch(t){default:return ut();case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0}}function oR(t){if(t===void 0)return Ja("GRPC error has no .code"),ue.UNKNOWN;switch(t){case Wn.OK:return ue.OK;case Wn.CANCELLED:return ue.CANCELLED;case Wn.UNKNOWN:return ue.UNKNOWN;case Wn.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case Wn.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case Wn.INTERNAL:return ue.INTERNAL;case Wn.UNAVAILABLE:return ue.UNAVAILABLE;case Wn.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case Wn.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case Wn.NOT_FOUND:return ue.NOT_FOUND;case Wn.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case Wn.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case Wn.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case Wn.ABORTED:return ue.ABORTED;case Wn.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case Wn.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case Wn.DATA_LOSS:return ue.DATA_LOSS;default:return ut()}}(Rt=Wn||(Wn={}))[Rt.OK=0]="OK",Rt[Rt.CANCELLED=1]="CANCELLED",Rt[Rt.UNKNOWN=2]="UNKNOWN",Rt[Rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Rt[Rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Rt[Rt.NOT_FOUND=5]="NOT_FOUND",Rt[Rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Rt[Rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Rt[Rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Rt[Rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Rt[Rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Rt[Rt.ABORTED=10]="ABORTED",Rt[Rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Rt[Rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Rt[Rt.INTERNAL=13]="INTERNAL",Rt[Rt.UNAVAILABLE=14]="UNAVAILABLE",Rt[Rt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FB(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VB=new cc([4294967295,4294967295],0);function VE(t){const e=FB().encode(t),n=new AA;return n.update(e),new Uint8Array(n.digest())}function zE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new cc([n,r],0),new cc([i,a],0)]}class Xb{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new mf(`Invalid padding: ${n}`);if(r<0)throw new mf(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new mf(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new mf(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=cc.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(cc.fromNumber(r)));return i.compare(VB)===1&&(i=new cc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=VE(e),[r,i]=zE(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,i,a);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new Xb(a,i,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;const n=VE(e),[r,i]=zE(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,i,a);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class mf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,$m.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ey(ht.min(),i,new En(Ot),eo(),kt())}}class $m{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new $m(r,n,kt(),kt(),kt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class lR{constructor(e,n){this.targetId=e,this.me=n}}class cR{constructor(e,n,r=br.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class UE{constructor(){this.fe=0,this.ge=BE(),this.pe=br.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=kt(),n=kt(),r=kt();return this.ge.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ut()}}),new $m(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=BE()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Kt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class zB{constructor(e){this.Le=e,this.Be=new Map,this.ke=eo(),this.qe=$E(),this.Qe=new En(Ot)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ut()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const a=i.target;if(Aw(a))if(r===0){const o=new tt(a.path);this.Ue(n,o,Ir.newNoDocument(o,ht.min()))}else Kt(r===1);else{const o=this.Ye(n);if(o!==r){const c=this.Ze(e),u=c?this.Xe(c,e,o):1;if(u!==0){this.je(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let o,c;try{o=kc(r).toUint8Array()}catch(u){if(u instanceof UA)return vd("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Xb(o,i,a)}catch(u){return vd(u instanceof mf?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(a=>{const o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,a,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((a,o)=>{const c=this.Je(o);if(c){if(a.current&&Aw(c.target)){const u=new tt(c.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Ir.newNoDocument(u,e))}a.be&&(n.set(o,a.ve()),a.Ce())}});let r=kt();this.qe.forEach((a,o)=>{let c=!0;o.forEachWhile(u=>{const h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(a))}),this.ke.forEach((a,o)=>o.setReadTime(e));const i=new ey(e,n,this.Qe,this.ke,r);return this.ke=eo(),this.qe=$E(),this.Qe=new En(Ot),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new UE,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new _r(Ot),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Ke("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new UE),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function $E(){return new En(tt.comparator)}function BE(){return new En(tt.comparator)}const UB={asc:"ASCENDING",desc:"DESCENDING"},$B={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BB={and:"AND",or:"OR"};class WB{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Mw(t,e){return t.useProto3Json||Hx(e)?e:{value:e}}function $v(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function qB(t,e){return $v(t,e.toTimestamp())}function sa(t){return Kt(!!t),ht.fromTimestamp(function(n){const r=ml(n);return new ir(r.seconds,r.nanos)}(t))}function Jb(t,e){return Dw(t,e).canonicalString()}function Dw(t,e){const n=function(i){return new nn(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function dR(t){const e=nn.fromString(t);return Kt(gR(e)),e}function Ow(t,e){return Jb(t.databaseId,e.path)}function z_(t,e){const n=dR(e);if(n.get(1)!==t.databaseId.projectId)throw new ke(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ke(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new tt(fR(n))}function hR(t,e){return Jb(t.databaseId,e)}function HB(t){const e=dR(t);return e.length===4?nn.emptyPath():fR(e)}function Lw(t){return new nn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function fR(t){return Kt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function WE(t,e,n){return{name:Ow(t,e),fields:n.value.mapValue.fields}}function GB(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ut()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(h,f){return h.useProto3Json?(Kt(f===void 0||typeof f=="string"),br.fromBase64String(f||"")):(Kt(f===void 0||f instanceof Buffer||f instanceof Uint8Array),br.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(h){const f=h.code===void 0?ue.UNKNOWN:oR(h.code);return new ke(f,h.message||"")}(o);n=new cR(r,i,a,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=z_(t,r.document.name),a=sa(r.document.updateTime),o=r.document.createTime?sa(r.document.createTime):ht.min(),c=new rs({mapValue:{fields:r.document.fields}}),u=Ir.newFoundDocument(i,a,o,c),h=r.targetIds||[],f=r.removedTargetIds||[];n=new Hg(h,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=z_(t,r.document),a=r.readTime?sa(r.readTime):ht.min(),o=Ir.newNoDocument(i,a),c=r.removedTargetIds||[];n=new Hg([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=z_(t,r.document),a=r.removedTargetIds||[];n=new Hg([],a,i,null)}else{if(!("filter"in e))return ut();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,o=new OB(i,a),c=r.targetId;n=new lR(c,o)}}return n}function KB(t,e){let n;if(e instanceof Um)n={update:WE(t,e.key,e.value)};else if(e instanceof Jx)n={delete:Ow(t,e.key)};else if(e instanceof Tl)n={update:WE(t,e.key,e.data),updateMask:rW(e.fieldMask)};else{if(!(e instanceof RB))return ut();n={verify:Ow(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,o){const c=o.transform;if(c instanceof dm)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof hm)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof fm)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Uv)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw ut()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:qB(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ut()}(t,e.precondition)),n}function ZB(t,e){return t&&t.length>0?(Kt(e!==void 0),t.map(n=>function(i,a){let o=i.updateTime?sa(i.updateTime):sa(a);return o.isEqual(ht.min())&&(o=sa(a)),new PB(o,i.transformResults||[])}(n,e))):[]}function YB(t,e){return{documents:[hR(t,e.path)]}}function QB(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=hR(t,i);const a=function(h){if(h.length!==0)return pR(Ni.create(h,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const o=function(h){if(h.length!==0)return h.map(f=>function(v){return{field:Au(v.field),direction:eW(v.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=Mw(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:i}}function XB(t){let e=HB(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Kt(r===1);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let a=[];n.where&&(a=function(p){const v=mR(p);return v instanceof Ni&&qA(v)?v.getFilters():[v]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(v=>function(N){return new um(Ru(N.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(v))}(n.orderBy));let c=null;n.limit&&(c=function(p){let v;return v=typeof p=="object"?p.value:p,Hx(v)?null:v}(n.limit));let u=null;n.startAt&&(u=function(p){const v=!!p.before,_=p.values||[];return new wd(_,v)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const v=!p.before,_=p.values||[];return new wd(_,v)}(n.endAt)),gB(e,i,o,a,c,"F",u,h)}function JB(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ut()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function mR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ru(n.unaryFilter.field);return Kn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ru(n.unaryFilter.field);return Kn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ru(n.unaryFilter.field);return Kn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ru(n.unaryFilter.field);return Kn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ut()}}(t):t.fieldFilter!==void 0?function(n){return Kn.create(Ru(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ut()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ni.create(n.compositeFilter.filters.map(r=>mR(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ut()}}(n.compositeFilter.op))}(t):ut()}function eW(t){return UB[t]}function tW(t){return $B[t]}function nW(t){return BB[t]}function Au(t){return{fieldPath:t.canonicalString()}}function Ru(t){return vr.fromServerFormat(t.fieldPath)}function pR(t){return t instanceof Kn?function(n){if(n.op==="=="){if(PE(n.value))return{unaryFilter:{field:Au(n.field),op:"IS_NAN"}};if(TE(n.value))return{unaryFilter:{field:Au(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(PE(n.value))return{unaryFilter:{field:Au(n.field),op:"IS_NOT_NAN"}};if(TE(n.value))return{unaryFilter:{field:Au(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Au(n.field),op:tW(n.op),value:n.value}}}(t):t instanceof Ni?function(n){const r=n.getFilters().map(i=>pR(i));return r.length===1?r[0]:{compositeFilter:{op:nW(n.op),filters:r}}}(t):ut()}function rW(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function gR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,n,r,i,a=ht.min(),o=ht.min(),c=br.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new Ho(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ho(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ho(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ho(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sW{constructor(e){this.ct=e}}function iW(t){const e=XB({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?zv(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aW{constructor(){this.un=new oW}addToCollectionParentIndex(e,n){return this.un.add(n),ge.resolve()}getCollectionParents(e,n){return ge.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return ge.resolve()}deleteFieldIndex(e,n){return ge.resolve()}deleteAllFieldIndexes(e){return ge.resolve()}createTargetIndexes(e,n){return ge.resolve()}getDocumentsMatchingTarget(e,n){return ge.resolve(null)}getIndexType(e,n){return ge.resolve(0)}getFieldIndexes(e,n){return ge.resolve([])}getNextCollectionGroupToUpdate(e){return ge.resolve(null)}getMinOffset(e,n){return ge.resolve(fl.min())}getMinOffsetFromCollectionGroup(e,n){return ge.resolve(fl.min())}updateCollectionGroup(e,n,r){return ge.resolve()}updateIndexEntries(e,n){return ge.resolve()}}class oW{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new _r(nn.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new _r(nn.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new bd(0)}static kn(){return new bd(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lW{constructor(){this.changes=new Zd(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ir.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ge.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cW{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uW{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Af(r.mutation,i,bs.empty(),ir.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,kt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=kt()){const i=rc();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(a=>{let o=ff();return a.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=rc();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,kt()))}populateOverlays(e,n,r){const i=[];return r.forEach(a=>{n.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,i){let a=eo();const o=If(),c=function(){return If()}();return n.forEach((u,h)=>{const f=r.get(h.key);i.has(h.key)&&(f===void 0||f.mutation instanceof Tl)?a=a.insert(h.key,h):f!==void 0?(o.set(h.key,f.mutation.getFieldMask()),Af(f.mutation,h,f.mutation.getFieldMask(),ir.now())):o.set(h.key,bs.empty())}),this.recalculateAndSaveOverlays(e,a).next(u=>(u.forEach((h,f)=>o.set(h,f)),n.forEach((h,f)=>{var p;return c.set(h,new cW(f,(p=o.get(h))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,n){const r=If();let i=new En((o,c)=>o-c),a=kt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let f=r.get(u)||bs.empty();f=c.applyToLocalView(h,f),r.set(u,f);const p=(i.get(c.batchId)||kt()).add(u);i=i.insert(c.batchId,p)})}).next(()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),h=u.key,f=u.value,p=JA();f.forEach(v=>{if(!a.has(v)){const _=iR(n.get(v),r.get(v));_!==null&&p.set(v,_),a=a.add(v)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return ge.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return tt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Zb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):ge.resolve(rc());let c=-1,u=a;return o.next(h=>ge.forEach(h,(f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),a.get(f)?ge.resolve():this.remoteDocumentCache.getEntry(e,f).next(v=>{u=u.insert(f,v)}))).next(()=>this.populateOverlays(e,h,a)).next(()=>this.computeViews(e,u,h,kt())).next(f=>({batchId:c,changes:XA(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new tt(n)).next(r=>{let i=ff();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let o=ff();return this.indexManager.getCollectionParents(e,a).next(c=>ge.forEach(c,u=>{const h=function(p,v){return new Wc(v,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(f=>{f.forEach((p,v)=>{o=o.insert(p,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i))).next(o=>{a.forEach((u,h)=>{const f=h.getKey();o.get(f)===null&&(o=o.insert(f,Ir.newInvalidDocument(f)))});let c=ff();return o.forEach((u,h)=>{const f=a.get(u);f!==void 0&&Af(f.mutation,h,bs.empty(),ir.now()),Yx(n,h)&&(c=c.insert(u,h))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dW{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return ge.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:sa(i.createTime)}}(n)),ge.resolve()}getNamedQuery(e,n){return ge.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:iW(i.bundledQuery),readTime:sa(i.readTime)}}(n)),ge.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hW{constructor(){this.overlays=new En(tt.comparator),this.Ir=new Map}getOverlay(e,n){return ge.resolve(this.overlays.get(n))}getOverlays(e,n){const r=rc();return ge.forEach(n,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,a)=>{this.ht(e,n,a)}),ge.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(r)),ge.resolve()}getOverlaysForCollection(e,n,r){const i=rc(),a=n.length+1,o=new tt(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===a&&u.largestBatchId>r&&i.set(u.getKey(),u)}return ge.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new En((h,f)=>h-f);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let f=a.get(h.largestBatchId);f===null&&(f=rc(),a=a.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const c=rc(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,f)=>c.set(h,f)),!(c.size()>=i)););return ge.resolve(c)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new DB(n,r));let a=this.Ir.get(n);a===void 0&&(a=kt(),this.Ir.set(n,a)),this.Ir.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fW{constructor(){this.sessionToken=br.EMPTY_BYTE_STRING}getSessionToken(e){return ge.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ge.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(){this.Tr=new _r(cr.Er),this.dr=new _r(cr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new cr(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new cr(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new tt(new nn([])),r=new cr(n,e),i=new cr(n,e+1),a=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),a.push(o.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new tt(new nn([])),r=new cr(n,e),i=new cr(n,e+1);let a=kt();return this.dr.forEachInRange([r,i],o=>{a=a.add(o.key)}),a}containsKey(e){const n=new cr(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class cr{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return tt.comparator(e.key,n.key)||Ot(e.wr,n.wr)}static Ar(e,n){return Ot(e.wr,n.wr)||tt.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mW{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new _r(cr.Er)}checkEmpty(e){return ge.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new MB(a,n,r,i);this.mutationQueue.push(o);for(const c of i)this.br=this.br.add(new cr(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return ge.resolve(o)}lookupMutationBatch(e,n){return ge.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),a=i<0?0:i;return ge.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ge.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ge.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new cr(n,0),i=new cr(n,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,i],o=>{const c=this.Dr(o.wr);a.push(c)}),ge.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new _r(Ot);return n.forEach(i=>{const a=new cr(i,0),o=new cr(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,o],c=>{r=r.add(c.wr)})}),ge.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;tt.isDocumentKey(a)||(a=a.child(""));const o=new cr(new tt(a),0);let c=new _r(Ot);return this.br.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(c=c.add(u.wr)),!0)},o),ge.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Kt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return ge.forEach(n.mutations,i=>{const a=new cr(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new cr(n,0),i=this.br.firstAfterOrEqual(r);return ge.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ge.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pW{constructor(e){this.Mr=e,this.docs=function(){return new En(tt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ge.resolve(r?r.document.mutableCopy():Ir.newInvalidDocument(n))}getEntries(e,n){let r=eo();return n.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Ir.newInvalidDocument(i))}),ge.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=eo();const o=n.path,c=new tt(o.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:h,value:{document:f}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||Q7(Y7(f),r)<=0||(i.has(f.key)||Yx(n,f))&&(a=a.insert(f.key,f.mutableCopy()))}return ge.resolve(a)}getAllFromCollectionGroup(e,n,r,i){ut()}Or(e,n){return ge.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new gW(this)}getSize(e){return ge.resolve(this.size)}}class gW extends lW{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),ge.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vW{constructor(e){this.persistence=e,this.Nr=new Zd(n=>Gb(n),Kb),this.lastRemoteSnapshotVersion=ht.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ej,this.targetCount=0,this.kr=bd.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),ge.resolve()}getLastRemoteSnapshotVersion(e){return ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ge.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ge.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),ge.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new bd(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,ge.resolve()}updateTargetData(e,n){return this.Kn(n),ge.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,ge.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(o),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),ge.waitFor(a).next(()=>i)}getTargetCount(e){return ge.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return ge.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),ge.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach(o=>{a.push(i.markPotentiallyOrphaned(e,o))}),ge.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),ge.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return ge.resolve(r)}containsKey(e,n){return ge.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xW{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Wb(0),this.Kr=!1,this.Kr=!0,this.$r=new fW,this.referenceDelegate=e(this),this.Ur=new vW(this),this.indexManager=new aW,this.remoteDocumentCache=function(i){return new pW(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new sW(n),this.Gr=new dW(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new hW,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new mW(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Ke("MemoryPersistence","Starting transaction:",e);const i=new yW(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(a=>this.referenceDelegate.jr(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Hr(e,n){return ge.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class yW extends J7{constructor(e){super(),this.currentSequenceNumber=e}}class tj{constructor(e){this.persistence=e,this.Jr=new ej,this.Yr=null}static Zr(e){return new tj(e)}get Xr(){if(this.Yr)return this.Yr;throw ut()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),ge.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),ge.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),ge.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(a=>this.Xr.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ge.forEach(this.Xr,r=>{const i=tt.fromPath(r);return this.ei(e,i).next(a=>{a||n.removeEntry(i,ht.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return ge.or([()=>ge.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=kt(),i=kt();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new nj(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _W{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wW{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return rz()?8:eB(Lr())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.Yi(e,n).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.Zi(e,n,i,r).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new _W;return this.Xi(e,n,o).next(c=>{if(a.result=c,this.zi)return this.es(e,n,o,c.size)})}).next(()=>a.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Zh()<=Pt.DEBUG&&Ke("QueryEngine","SDK will not create cache indexes for query:",Iu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ge.resolve()):(Zh()<=Pt.DEBUG&&Ke("QueryEngine","Query:",Iu(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Zh()<=Pt.DEBUG&&Ke("QueryEngine","The SDK decides to create cache indexes for query:",Iu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ra(n))):ge.resolve())}Yi(e,n){if(ME(n))return ge.resolve(null);let r=ra(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=zv(n,null,"F"),r=ra(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const o=kt(...a);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.ts(n,c);return this.ns(n,h,o,u.readTime)?this.Yi(e,zv(n,null,"F")):this.rs(e,h,n,u)}))})))}Zi(e,n,r,i){return ME(n)||i.isEqual(ht.min())?ge.resolve(null):this.Ji.getDocuments(e,r).next(a=>{const o=this.ts(n,a);return this.ns(n,o,r,i)?ge.resolve(null):(Zh()<=Pt.DEBUG&&Ke("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Iu(n)),this.rs(e,o,n,Z7(i,-1)).next(c=>c))})}ts(e,n){let r=new _r(YA(e));return n.forEach((i,a)=>{Yx(e,a)&&(r=r.add(a))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Xi(e,n,r){return Zh()<=Pt.DEBUG&&Ke("QueryEngine","Using full collection scan to execute query:",Iu(n)),this.Ji.getDocumentsMatchingQuery(e,n,fl.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(a=>(n.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bW{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new En(Ot),this._s=new Zd(a=>Gb(a),Kb),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uW(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function jW(t,e,n,r){return new bW(t,e,n,r)}async function vR(t,e){const n=pt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const o=[],c=[];let u=kt();for(const h of i){o.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}for(const h of a){c.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:c}))})})}function NW(t,e){const n=pt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,h,f){const p=h.batch,v=p.keys();let _=ge.resolve();return v.forEach(N=>{_=_.next(()=>f.getEntry(u,N)).next(j=>{const S=h.docVersions.get(N);Kt(S!==null),j.version.compareTo(S)<0&&(p.applyToRemoteDocument(j,h),j.isValidDocument()&&(j.setReadTime(h.commitVersion),f.addEntry(j)))})}),_.next(()=>c.mutationQueue.removeMutationBatch(u,p))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=kt();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(u=u.add(c.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function xR(t){const e=pt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function SW(t,e){const n=pt(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const c=[];e.targetChanges.forEach((f,p)=>{const v=i.get(p);if(!v)return;c.push(n.Ur.removeMatchingKeys(a,f.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(a,f.addedDocuments,p)));let _=v.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(br.EMPTY_BYTE_STRING,ht.min()).withLastLimboFreeSnapshotVersion(ht.min()):f.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(f.resumeToken,r)),i=i.insert(p,_),function(j,S,w){return j.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(v,_,f)&&c.push(n.Ur.updateTargetData(a,_))});let u=eo(),h=kt();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(a,f))}),c.push(EW(a,o,e.documentUpdates).next(f=>{u=f.Ps,h=f.Is})),!r.isEqual(ht.min())){const f=n.Ur.getLastRemoteSnapshotVersion(a).next(p=>n.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r));c.push(f)}return ge.waitFor(c).next(()=>o.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,u,h)).next(()=>u)}).then(a=>(n.os=i,a))}function EW(t,e,n){let r=kt(),i=kt();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let o=eo();return n.forEach((c,u)=>{const h=a.get(c);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(ht.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):Ke("LocalStore","Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function CW(t,e){const n=pt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function kW(t,e){const n=pt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(a=>a?(i=a,ge.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Ho(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Fw(t,e,n){const r=pt(t),i=r.os.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!zm(o))throw o;Ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function qE(t,e,n){const r=pt(t);let i=ht.min(),a=kt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,f){const p=pt(u),v=p._s.get(f);return v!==void 0?ge.resolve(p.os.get(v)):p.Ur.getTargetData(h,f)}(r,o,ra(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,c.targetId).next(u=>{a=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:ht.min(),n?a:kt())).next(c=>(TW(r,xB(e),c),{documents:c,Ts:a})))}function TW(t,e,n){let r=t.us.get(e)||ht.min();n.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.us.set(e,r)}class HE{constructor(){this.activeTargetIds=NB()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class PW{constructor(){this.so=new HE,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new HE,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IW{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dg=null;function U_(){return dg===null?dg=function(){return 268435456+Math.round(2147483648*Math.random())}():dg++,"0x"+dg.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RW{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cr="WebChannelConnection";class MW extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${a}`}get Fo(){return!1}Mo(n,r,i,a,o){const c=U_(),u=this.xo(n,r.toUriEncodedString());Ke("RestConnection",`Sending RPC '${n}' ${c}:`,u,i);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,a,o),this.No(n,u,h,i).then(f=>(Ke("RestConnection",`Received RPC '${n}' ${c}: `,f),f),f=>{throw vd("RestConnection",`RPC '${n}' ${c} failed with error: `,f,"url: ",u,"request:",i),f})}Lo(n,r,i,a,o,c){return this.Mo(n,r,i,a,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Kd}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,o)=>n[o]=a),i&&i.headers.forEach((a,o)=>n[o]=a)}xo(n,r){const i=AW[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const a=U_();return new Promise((o,c)=>{const u=new RA;u.setWithCredentials(!0),u.listenOnce(MA.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Bg.NO_ERROR:const f=u.getResponseJson();Ke(Cr,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(f)),o(f);break;case Bg.TIMEOUT:Ke(Cr,`RPC '${e}' ${a} timed out`),c(new ke(ue.DEADLINE_EXCEEDED,"Request time out"));break;case Bg.HTTP_ERROR:const p=u.getStatus();if(Ke(Cr,`RPC '${e}' ${a} failed with status:`,p,"response text:",u.getResponseText()),p>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const _=v==null?void 0:v.error;if(_&&_.status&&_.message){const N=function(S){const w=S.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(w)>=0?w:ue.UNKNOWN}(_.status);c(new ke(N,_.message))}else c(new ke(ue.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new ke(ue.UNAVAILABLE,"Connection failed."));break;default:ut()}}finally{Ke(Cr,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(i);Ke(Cr,`RPC '${e}' ${a} sending request:`,i),u.send(n,"POST",h,r,15)})}Bo(e,n,r){const i=U_(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=LA(),c=OA(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=a.join("");Ke(Cr,`Creating RPC '${e}' stream ${i}: ${f}`,u);const p=o.createWebChannel(f,u);let v=!1,_=!1;const N=new RW({Io:S=>{_?Ke(Cr,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(v||(Ke(Cr,`Opening RPC '${e}' stream ${i} transport.`),p.open(),v=!0),Ke(Cr,`RPC '${e}' stream ${i} sending:`,S),p.send(S))},To:()=>p.close()}),j=(S,w,y)=>{S.listen(w,E=>{try{y(E)}catch(I){setTimeout(()=>{throw I},0)}})};return j(p,hf.EventType.OPEN,()=>{_||(Ke(Cr,`RPC '${e}' stream ${i} transport opened.`),N.yo())}),j(p,hf.EventType.CLOSE,()=>{_||(_=!0,Ke(Cr,`RPC '${e}' stream ${i} transport closed`),N.So())}),j(p,hf.EventType.ERROR,S=>{_||(_=!0,vd(Cr,`RPC '${e}' stream ${i} transport errored:`,S),N.So(new ke(ue.UNAVAILABLE,"The operation could not be completed")))}),j(p,hf.EventType.MESSAGE,S=>{var w;if(!_){const y=S.data[0];Kt(!!y);const E=y,I=E.error||((w=E[0])===null||w===void 0?void 0:w.error);if(I){Ke(Cr,`RPC '${e}' stream ${i} received error:`,I);const D=I.status;let B=function(V){const k=Wn[V];if(k!==void 0)return oR(k)}(D),R=I.message;B===void 0&&(B=ue.INTERNAL,R="Unknown error status: "+D+" with message "+I.message),_=!0,N.So(new ke(B,R)),p.close()}else Ke(Cr,`RPC '${e}' stream ${i} received:`,y),N.bo(y)}}),j(c,DA.STAT_EVENT,S=>{S.stat===kw.PROXY?Ke(Cr,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===kw.NOPROXY&&Ke(Cr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{N.wo()},0),N}}function $_(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(t){return new WB(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e,n,r=1e3,i=1.5,a=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&Ke("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e,n,r,i,a,o,c,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new yR(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===ue.RESOURCE_EXHAUSTED?(Ja(n.toString()),Ja("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new ke(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class DW extends _R{constructor(e,n,r,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=a}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=GB(this.serializer,e),r=function(a){if(!("targetChange"in a))return ht.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?ht.min():o.readTime?sa(o.readTime):ht.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Lw(this.serializer),n.addTarget=function(a,o){let c;const u=o.target;if(c=Aw(u)?{documents:YB(a,u)}:{query:QB(a,u)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=uR(a,o.resumeToken);const h=Mw(a,o.expectedCount);h!==null&&(c.expectedCount=h)}else if(o.snapshotVersion.compareTo(ht.min())>0){c.readTime=$v(a,o.snapshotVersion.toTimestamp());const h=Mw(a,o.expectedCount);h!==null&&(c.expectedCount=h)}return c}(this.serializer,e);const r=JB(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Lw(this.serializer),n.removeTarget=e,this.a_(n)}}class OW extends _R{constructor(e,n,r,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Kt(!!e.streamToken),this.lastStreamToken=e.streamToken,Kt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Kt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=ZB(e.writeResults,e.commitTime),r=sa(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Lw(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>KB(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LW extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ke(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Mo(e,Dw(n,r),i,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ke(ue.UNKNOWN,a.toString())})}Lo(e,n,r,i,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,Dw(n,r),i,o,c,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ke(ue.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class FW{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ja(n),this.D_=!1):Ke("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VW{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(o=>{r.enqueueAndForget(async()=>{qc(this)&&(Ke("RemoteStore","Restarting streams for network reachability change."),await async function(u){const h=pt(u);h.L_.add(4),await Bm(h),h.q_.set("Unknown"),h.L_.delete(4),await ny(h)}(this))})}),this.q_=new FW(r,i)}}async function ny(t){if(qc(t))for(const e of t.B_)await e(!0)}async function Bm(t){for(const e of t.B_)await e(!1)}function wR(t,e){const n=pt(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),aj(n)?ij(n):Yd(n).r_()&&sj(n,e))}function rj(t,e){const n=pt(t),r=Yd(n);n.N_.delete(e),r.r_()&&bR(n,e),n.N_.size===0&&(r.r_()?r.o_():qc(n)&&n.q_.set("Unknown"))}function sj(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ht.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Yd(t).A_(e)}function bR(t,e){t.Q_.xe(e),Yd(t).R_(e)}function ij(t){t.Q_=new zB({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Yd(t).start(),t.q_.v_()}function aj(t){return qc(t)&&!Yd(t).n_()&&t.N_.size>0}function qc(t){return pt(t).L_.size===0}function jR(t){t.Q_=void 0}async function zW(t){t.q_.set("Online")}async function UW(t){t.N_.forEach((e,n)=>{sj(t,e)})}async function $W(t,e){jR(t),aj(t)?(t.q_.M_(e),ij(t)):t.q_.set("Unknown")}async function BW(t,e,n){if(t.q_.set("Online"),e instanceof cR&&e.state===2&&e.cause)try{await async function(i,a){const o=a.cause;for(const c of a.targetIds)i.N_.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.N_.delete(c),i.Q_.removeTarget(c))}(t,e)}catch(r){Ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Bv(t,r)}else if(e instanceof Hg?t.Q_.Ke(e):e instanceof lR?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ht.min()))try{const r=await xR(t.localStore);n.compareTo(r)>=0&&await function(a,o){const c=a.Q_.rt(o);return c.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const f=a.N_.get(h);f&&a.N_.set(h,f.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,h)=>{const f=a.N_.get(u);if(!f)return;a.N_.set(u,f.withResumeToken(br.EMPTY_BYTE_STRING,f.snapshotVersion)),bR(a,u);const p=new Ho(f.target,u,h,f.sequenceNumber);sj(a,p)}),a.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){Ke("RemoteStore","Failed to raise snapshot:",r),await Bv(t,r)}}async function Bv(t,e,n){if(!zm(e))throw e;t.L_.add(1),await Bm(t),t.q_.set("Offline"),n||(n=()=>xR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ke("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await ny(t)})}function NR(t,e){return e().catch(n=>Bv(t,n,e))}async function ry(t){const e=pt(t),n=pl(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;WW(e);)try{const i=await CW(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,qW(e,i)}catch(i){await Bv(e,i)}SR(e)&&ER(e)}function WW(t){return qc(t)&&t.O_.length<10}function qW(t,e){t.O_.push(e);const n=pl(t);n.r_()&&n.V_&&n.m_(e.mutations)}function SR(t){return qc(t)&&!pl(t).n_()&&t.O_.length>0}function ER(t){pl(t).start()}async function HW(t){pl(t).p_()}async function GW(t){const e=pl(t);for(const n of t.O_)e.m_(n.mutations)}async function KW(t,e,n){const r=t.O_.shift(),i=Qb.from(r,e,n);await NR(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await ry(t)}async function ZW(t,e){e&&pl(t).V_&&await async function(r,i){if(function(o){return LB(o)&&o!==ue.ABORTED}(i.code)){const a=r.O_.shift();pl(r).s_(),await NR(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await ry(r)}}(t,e),SR(t)&&ER(t)}async function KE(t,e){const n=pt(t);n.asyncQueue.verifyOperationInProgress(),Ke("RemoteStore","RemoteStore received new credentials");const r=qc(n);n.L_.add(3),await Bm(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await ny(n)}async function YW(t,e){const n=pt(t);e?(n.L_.delete(2),await ny(n)):e||(n.L_.add(2),await Bm(n),n.q_.set("Unknown"))}function Yd(t){return t.K_||(t.K_=function(n,r,i){const a=pt(n);return a.w_(),new DW(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Eo:zW.bind(null,t),Ro:UW.bind(null,t),mo:$W.bind(null,t),d_:BW.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),aj(t)?ij(t):t.q_.set("Unknown")):(await t.K_.stop(),jR(t))})),t.K_}function pl(t){return t.U_||(t.U_=function(n,r,i){const a=pt(n);return a.w_(),new OW(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:HW.bind(null,t),mo:ZW.bind(null,t),f_:GW.bind(null,t),g_:KW.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await ry(t)):(await t.U_.stop(),t.O_.length>0&&(Ke("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Wa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const o=Date.now()+r,c=new oj(e,n,o,i,a);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ke(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function lj(t,e){if(Ja("AsyncQueue",`${e}: ${t}`),zm(t))return new ke(ue.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e){this.comparator=e?(n,r)=>e(n,r)||tt.comparator(n.key,r.key):(n,r)=>tt.comparator(n.key,r.key),this.keyedMap=ff(),this.sortedSet=new En(this.comparator)}static emptySet(e){return new sd(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof sd)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new sd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(){this.W_=new En(tt.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ut():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class jd{constructor(e,n,r,i,a,o,c,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,a){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new jd(e,n,sd.emptySet(n),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zx(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QW{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class XW{constructor(){this.queries=YE(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=pt(n),a=i.queries;i.queries=YE(),a.forEach((o,c)=>{for(const u of c.j_)u.onError(r)})})(this,new ke(ue.ABORTED,"Firestore shutting down"))}}function YE(){return new Zd(t=>ZA(t),Zx)}async function cj(t,e){const n=pt(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.H_()&&e.J_()&&(r=2):(a=new QW,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await n.onListen(i,!0);break;case 1:a.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const c=lj(o,`Initialization of query '${Iu(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,a),a.j_.push(e),e.Z_(n.onlineState),a.z_&&e.X_(a.z_)&&dj(n)}async function uj(t,e){const n=pt(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const o=a.j_.indexOf(e);o>=0&&(a.j_.splice(o,1),a.j_.length===0?i=e.J_()?0:1:!a.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function JW(t,e){const n=pt(t);let r=!1;for(const i of e){const a=i.query,o=n.queries.get(a);if(o){for(const c of o.j_)c.X_(i)&&(r=!0);o.z_=i}}r&&dj(n)}function eq(t,e,n){const r=pt(t),i=r.queries.get(e);if(i)for(const a of i.j_)a.onError(n);r.queries.delete(e)}function dj(t){t.Y_.forEach(e=>{e.next()})}var Vw,QE;(QE=Vw||(Vw={})).ea="default",QE.Cache="cache";class hj{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new jd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=jd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Vw.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e){this.key=e}}class kR{constructor(e){this.key=e}}class tq{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=kt(),this.mutatedKeys=kt(),this.Aa=YA(e),this.Ra=new sd(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new ZE,i=n?n.Ra:this.Ra;let a=n?n.mutatedKeys:this.mutatedKeys,o=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{const v=i.get(f),_=Yx(this.query,p)?p:null,N=!!v&&this.mutatedKeys.has(v.key),j=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let S=!1;v&&_?v.data.isEqual(_.data)?N!==j&&(r.track({type:3,doc:_}),S=!0):this.ga(v,_)||(r.track({type:2,doc:_}),S=!0,(u&&this.Aa(_,u)>0||h&&this.Aa(_,h)<0)&&(c=!0)):!v&&_?(r.track({type:0,doc:_}),S=!0):v&&!_&&(r.track({type:1,doc:v}),S=!0,(u||h)&&(c=!0)),S&&(_?(o=o.add(_),a=j?a.add(f):a.delete(f)):(o=o.delete(f),a=a.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),a=a.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:c,mutatedKeys:a}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,p)=>function(_,N){const j=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ut()}};return j(_)-j(N)}(f.type,p.type)||this.Aa(f.doc,p.doc)),this.pa(r),i=i!=null&&i;const c=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,h=u!==this.Ea;return this.Ea=u,o.length!==0||h?{snapshot:new jd(this.query,e.Ra,a,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new ZE,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=kt(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new kR(r))}),this.da.forEach(r=>{e.has(r)||n.push(new CR(r))}),n}ba(e){this.Ta=e.Ts,this.da=kt();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return jd.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class nq{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class rq{constructor(e){this.key=e,this.va=!1}}class sq{constructor(e,n,r,i,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Zd(c=>ZA(c),Zx),this.Ma=new Map,this.xa=new Set,this.Oa=new En(tt.comparator),this.Na=new Map,this.La=new ej,this.Ba={},this.ka=new Map,this.qa=bd.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function iq(t,e,n=!0){const r=MR(t);let i;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Da()):i=await TR(r,e,n,!0),i}async function aq(t,e){const n=MR(t);await TR(n,e,!0,!1)}async function TR(t,e,n,r){const i=await kW(t.localStore,ra(e)),a=i.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let c;return r&&(c=await oq(t,e,a,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&wR(t.remoteStore,i),c}async function oq(t,e,n,r,i){t.Ka=(p,v,_)=>async function(j,S,w,y){let E=S.view.ma(w);E.ns&&(E=await qE(j.localStore,S.query,!1).then(({documents:R})=>S.view.ma(R,E)));const I=y&&y.targetChanges.get(S.targetId),D=y&&y.targetMismatches.get(S.targetId)!=null,B=S.view.applyChanges(E,j.isPrimaryClient,I,D);return JE(j,S.targetId,B.wa),B.snapshot}(t,p,v,_);const a=await qE(t.localStore,e,!0),o=new tq(e,a.Ts),c=o.ma(a.documents),u=$m.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=o.applyChanges(c,t.isPrimaryClient,u);JE(t,n,h.wa);const f=new nq(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function lq(t,e,n){const r=pt(t),i=r.Fa.get(e),a=r.Ma.get(i.targetId);if(a.length>1)return r.Ma.set(i.targetId,a.filter(o=>!Zx(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Fw(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&rj(r.remoteStore,i.targetId),zw(r,i.targetId)}).catch(Vm)):(zw(r,i.targetId),await Fw(r.localStore,i.targetId,!0))}async function cq(t,e){const n=pt(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),rj(n.remoteStore,r.targetId))}async function uq(t,e,n){const r=vq(t);try{const i=await function(o,c){const u=pt(o),h=ir.now(),f=c.reduce((_,N)=>_.add(N.key),kt());let p,v;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let N=eo(),j=kt();return u.cs.getEntries(_,f).next(S=>{N=S,N.forEach((w,y)=>{y.isValidDocument()||(j=j.add(w))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,N)).next(S=>{p=S;const w=[];for(const y of c){const E=AB(y,p.get(y.key).overlayedDocument);E!=null&&w.push(new Tl(y.key,E,$A(E.value.mapValue),Gr.exists(!0)))}return u.mutationQueue.addMutationBatch(_,h,w,c)}).next(S=>{v=S;const w=S.applyToLocalDocumentSet(p,j);return u.documentOverlayCache.saveOverlays(_,S.batchId,w)})}).then(()=>({batchId:v.batchId,changes:XA(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,c,u){let h=o.Ba[o.currentUser.toKey()];h||(h=new En(Ot)),h=h.insert(c,u),o.Ba[o.currentUser.toKey()]=h}(r,i.batchId,n),await Wm(r,i.changes),await ry(r.remoteStore)}catch(i){const a=lj(i,"Failed to persist write");n.reject(a)}}async function PR(t,e){const n=pt(t);try{const r=await SW(n.localStore,e);e.targetChanges.forEach((i,a)=>{const o=n.Na.get(a);o&&(Kt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Kt(o.va):i.removedDocuments.size>0&&(Kt(o.va),o.va=!1))}),await Wm(n,r,e)}catch(r){await Vm(r)}}function XE(t,e,n){const r=pt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((a,o)=>{const c=o.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),function(o,c){const u=pt(o);u.onlineState=c;let h=!1;u.queries.forEach((f,p)=>{for(const v of p.j_)v.Z_(c)&&(h=!0)}),h&&dj(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function dq(t,e,n){const r=pt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),a=i&&i.key;if(a){let o=new En(tt.comparator);o=o.insert(a,Ir.newNoDocument(a,ht.min()));const c=kt().add(a),u=new ey(ht.min(),new Map,new En(Ot),o,c);await PR(r,u),r.Oa=r.Oa.remove(a),r.Na.delete(e),fj(r)}else await Fw(r.localStore,e,!1).then(()=>zw(r,e,n)).catch(Vm)}async function hq(t,e){const n=pt(t),r=e.batch.batchId;try{const i=await NW(n.localStore,e);AR(n,r,null),IR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Wm(n,i)}catch(i){await Vm(i)}}async function fq(t,e,n){const r=pt(t);try{const i=await function(o,c){const u=pt(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return u.mutationQueue.lookupMutationBatch(h,c).next(p=>(Kt(p!==null),f=p.keys(),u.mutationQueue.removeMutationBatch(h,p))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>u.localDocuments.getDocuments(h,f))})}(r.localStore,e);AR(r,e,n),IR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Wm(r,i)}catch(i){await Vm(i)}}function IR(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function AR(t,e,n){const r=pt(t);let i=r.Ba[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function zw(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||RR(t,r)})}function RR(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(rj(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),fj(t))}function JE(t,e,n){for(const r of n)r instanceof CR?(t.La.addReference(r.key,e),mq(t,r)):r instanceof kR?(Ke("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||RR(t,r.key)):ut()}function mq(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Ke("SyncEngine","New document in limbo: "+n),t.xa.add(r),fj(t))}function fj(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new tt(nn.fromString(e)),r=t.qa.next();t.Na.set(r,new rq(n)),t.Oa=t.Oa.insert(n,r),wR(t.remoteStore,new Ho(ra(Kx(n.path)),r,"TargetPurposeLimboResolution",Wb.oe))}}async function Wm(t,e,n){const r=pt(t),i=[],a=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{o.push(r.Ka(u,e,n).then(h=>{var f;if((h||n)&&r.isPrimaryClient){const p=h?!h.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(h){i.push(h);const p=nj.Wi(u.targetId,h);a.push(p)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(u,h){const f=pt(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>ge.forEach(h,v=>ge.forEach(v.$i,_=>f.persistence.referenceDelegate.addReference(p,v.targetId,_)).next(()=>ge.forEach(v.Ui,_=>f.persistence.referenceDelegate.removeReference(p,v.targetId,_)))))}catch(p){if(!zm(p))throw p;Ke("LocalStore","Failed to update sequence numbers: "+p)}for(const p of h){const v=p.targetId;if(!p.fromCache){const _=f.os.get(v),N=_.snapshotVersion,j=_.withLastLimboFreeSnapshotVersion(N);f.os=f.os.insert(v,j)}}}(r.localStore,a))}async function pq(t,e){const n=pt(t);if(!n.currentUser.isEqual(e)){Ke("SyncEngine","User change. New user:",e.toKey());const r=await vR(n.localStore,e);n.currentUser=e,function(a,o){a.ka.forEach(c=>{c.forEach(u=>{u.reject(new ke(ue.CANCELLED,o))})}),a.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Wm(n,r.hs)}}function gq(t,e){const n=pt(t),r=n.Na.get(e);if(r&&r.va)return kt().add(r.key);{let i=kt();const a=n.Ma.get(e);if(!a)return i;for(const o of a){const c=n.Fa.get(o);i=i.unionWith(c.view.Va)}return i}}function MR(t){const e=pt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=PR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dq.bind(null,e),e.Ca.d_=JW.bind(null,e.eventManager),e.Ca.$a=eq.bind(null,e.eventManager),e}function vq(t){const e=pt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fq.bind(null,e),e}class Wv{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ty(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return jW(this.persistence,new wW,e.initialUser,this.serializer)}Ga(e){return new xW(tj.Zr,this.serializer)}Wa(e){return new PW}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wv.provider={build:()=>new Wv};class Uw{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>XE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=pq.bind(null,this.syncEngine),await YW(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new XW}()}createDatastore(e){const n=ty(e.databaseInfo.databaseId),r=function(a){return new MW(a)}(e.databaseInfo);return function(a,o,c,u){return new LW(a,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,a,o,c){return new VW(r,i,a,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>XE(this.syncEngine,n,0),function(){return GE.D()?new GE:new IW}())}createSyncEngine(e,n){return function(i,a,o,c,u,h,f){const p=new sq(i,a,o,c,u,h);return f&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const a=pt(i);Ke("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Bm(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Uw.provider={build:()=>new Uw};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ja("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xq{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Tr.UNAUTHENTICATED,this.clientId=VA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async o=>{Ke("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Ke("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=lj(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function B_(t,e){t.asyncQueue.verifyOperationInProgress(),Ke("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await vR(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function eC(t,e){t.asyncQueue.verifyOperationInProgress();const n=await yq(t);Ke("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>KE(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>KE(e.remoteStore,i)),t._onlineComponents=e}async function yq(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ke("FirestoreClient","Using user provided OfflineComponentProvider");try{await B_(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===ue.FAILED_PRECONDITION||i.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;vd("Error using user provided cache. Falling back to memory cache: "+n),await B_(t,new Wv)}}else Ke("FirestoreClient","Using default OfflineComponentProvider"),await B_(t,new Wv);return t._offlineComponents}async function DR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ke("FirestoreClient","Using user provided OnlineComponentProvider"),await eC(t,t._uninitializedComponentsProvider._online)):(Ke("FirestoreClient","Using default OnlineComponentProvider"),await eC(t,new Uw))),t._onlineComponents}function _q(t){return DR(t).then(e=>e.syncEngine)}async function qv(t){const e=await DR(t),n=e.eventManager;return n.onListen=iq.bind(null,e.syncEngine),n.onUnlisten=lq.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=aq.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=cq.bind(null,e.syncEngine),n}function wq(t,e,n={}){const r=new Wa;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,c,u,h){const f=new mj({next:v=>{f.Za(),o.enqueueAndForget(()=>uj(a,p));const _=v.docs.has(c);!_&&v.fromCache?h.reject(new ke(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&v.fromCache&&u&&u.source==="server"?h.reject(new ke(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(v)},error:v=>h.reject(v)}),p=new hj(Kx(c.path),f,{includeMetadataChanges:!0,_a:!0});return cj(a,p)}(await qv(t),t.asyncQueue,e,n,r)),r.promise}function bq(t,e,n={}){const r=new Wa;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,c,u,h){const f=new mj({next:v=>{f.Za(),o.enqueueAndForget(()=>uj(a,p)),v.fromCache&&u.source==="server"?h.reject(new ke(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(v)},error:v=>h.reject(v)}),p=new hj(c,f,{includeMetadataChanges:!0,_a:!0});return cj(a,p)}(await qv(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(t,e,n){if(!n)throw new ke(ue.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function jq(t,e,n,r){if(e===!0&&r===!0)throw new ke(ue.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function nC(t){if(!tt.isDocumentKey(t))throw new ke(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function rC(t){if(tt.isDocumentKey(t))throw new ke(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function sy(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ut()}function Kr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ke(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=sy(t);throw new ke(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Nq(t,e){if(e<=0)throw new ke(ue.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ke(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ke(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}jq("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=OR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ke(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ke(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ke(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class iy{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sC({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ke(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ke(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sC(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new z7;switch(r.type){case"firstParty":return new W7(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ke(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=tC.get(n);r&&(Ke("ComponentProvider","Removing Datastore"),tC.delete(n),r.terminate())}(this),Promise.resolve()}}function Sq(t,e,n,r={}){var i;const a=(t=Kr(t,iy))._getSettings(),o=`${e}:${n}`;if(a.host!=="firestore.googleapis.com"&&a.host!==o&&vd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=Tr.MOCK_USER;else{c=UI(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new ke(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Tr(h)}t._authCredentials=new U7(new FA(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ma(this.firestore,e,this._query)}}class Dr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new al(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Dr(this.firestore,e,this._key)}}class al extends ma{constructor(e,n,r){super(e,n,Kx(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Dr(this.firestore,null,new tt(e))}withConverter(e){return new al(this.firestore,e,this._path)}}function Ft(t,e,...n){if(t=zt(t),LR("collection","path",e),t instanceof iy){const r=nn.fromString(e,...n);return rC(r),new al(t,null,r)}{if(!(t instanceof Dr||t instanceof al))throw new ke(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(nn.fromString(e,...n));return rC(r),new al(t.firestore,null,r)}}function xt(t,e,...n){if(t=zt(t),arguments.length===1&&(e=VA.newId()),LR("doc","path",e),t instanceof iy){const r=nn.fromString(e,...n);return nC(r),new Dr(t,null,new tt(r))}{if(!(t instanceof Dr||t instanceof al))throw new ke(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(nn.fromString(e,...n));return nC(r),new Dr(t.firestore,t instanceof al?t.converter:null,new tt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new yR(this,"async_queue_retry"),this.Vu=()=>{const r=$_();r&&Ke("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=$_();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=$_();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Wa;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!zm(e))throw e;Ke("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(r);throw Ja("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=oj.createAndSchedule(this,e,n,r,a=>this.yu(a));return this.Tu.push(i),i}fu(){this.Eu&&ut()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function aC(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1}(t,["next","error","complete"])}class ua extends iy{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new iC,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new iC(e),this._firestoreClient=void 0,await e}}}function FR(t,e){const n=typeof t=="object"?t:Ab(),r=typeof t=="string"?t:"(default)",i=$x(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=FI("firestore");a&&Sq(i,...a)}return i}function qm(t){if(t._terminated)throw new ke(ue.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Eq(t),t._firestoreClient}function Eq(t){var e,n,r;const i=t._freezeSettings(),a=function(c,u,h,f){return new rB(c,u,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,OR(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new xq(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Nd(br.fromBase64String(e))}catch(n){throw new ke(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Nd(br.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ke(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ke(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ke(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ot(this._lat,e._lat)||Ot(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cq=/^__.*__$/;class kq{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Tl(e,this.data,this.fieldMask,n,this.fieldTransforms):new Um(e,this.data,n,this.fieldTransforms)}}class VR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Tl(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function zR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ut()}}class vj{constructor(e,n,r,i,a,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new vj(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Hv(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(zR(this.Cu)&&Cq.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Tq{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ty(e)}Qu(e,n,r,i=!1){return new vj({Cu:e,methodName:n,qu:r,path:vr.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qd(t){const e=t._freezeSettings(),n=ty(t._databaseId);return new Tq(t._databaseId,!!e.ignoreUndefinedProperties,n)}function xj(t,e,n,r,i,a={}){const o=t.Qu(a.merge||a.mergeFields?2:0,e,n,i);_j("Data must be an object, but it was:",o,r);const c=WR(r,o);let u,h;if(a.merge)u=new bs(o.fieldMask),h=o.fieldTransforms;else if(a.mergeFields){const f=[];for(const p of a.mergeFields){const v=$w(e,p,n);if(!o.contains(v))throw new ke(ue.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);HR(f,v)||f.push(v)}u=new bs(f),h=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,h=o.fieldTransforms;return new kq(new rs(c),u,h)}class oy extends ay{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof oy}}class yj extends ay{_toFieldTransform(e){return new kB(e.path,new dm)}isEqual(e){return e instanceof yj}}function UR(t,e,n,r){const i=t.Qu(1,e,n);_j("Data must be an object, but it was:",i,r);const a=[],o=rs.empty();Bc(r,(u,h)=>{const f=wj(e,u,n);h=zt(h);const p=i.Nu(f);if(h instanceof oy)a.push(f);else{const v=Gm(h,p);v!=null&&(a.push(f),o.set(f,v))}});const c=new bs(a);return new VR(o,c,i.fieldTransforms)}function $R(t,e,n,r,i,a){const o=t.Qu(1,e,n),c=[$w(e,r,n)],u=[i];if(a.length%2!=0)throw new ke(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<a.length;v+=2)c.push($w(e,a[v])),u.push(a[v+1]);const h=[],f=rs.empty();for(let v=c.length-1;v>=0;--v)if(!HR(h,c[v])){const _=c[v];let N=u[v];N=zt(N);const j=o.Nu(_);if(N instanceof oy)h.push(_);else{const S=Gm(N,j);S!=null&&(h.push(_),f.set(_,S))}}const p=new bs(h);return new VR(f,p,o.fieldTransforms)}function BR(t,e,n,r=!1){return Gm(n,t.Qu(r?4:3,e))}function Gm(t,e){if(qR(t=zt(t)))return _j("Unsupported field value:",e,t),WR(t,e);if(t instanceof ay)return function(r,i){if(!zR(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const a=[];let o=0;for(const c of r){let u=Gm(c,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}}(t,e)}return function(r,i){if((r=zt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return SB(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=ir.fromDate(r);return{timestampValue:$v(i.serializer,a)}}if(r instanceof ir){const a=new ir(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:$v(i.serializer,a)}}if(r instanceof pj)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Nd)return{bytesValue:uR(i.serializer,r._byteString)};if(r instanceof Dr){const a=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Jb(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof gj)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return Yb(c.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${sy(r)}`)}(t,e)}function WR(t,e){const n={};return zA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bc(t,(r,i)=>{const a=Gm(i,e.Mu(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function qR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ir||t instanceof pj||t instanceof Nd||t instanceof Dr||t instanceof ay||t instanceof gj)}function _j(t,e,n){if(!qR(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=sy(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function $w(t,e,n){if((e=zt(e))instanceof Hm)return e._internalPath;if(typeof e=="string")return wj(t,e);throw Hv("Field path arguments must be of type string or ",t,!1,void 0,n)}const Pq=new RegExp("[~\\*/\\[\\]]");function wj(t,e,n){if(e.search(Pq)>=0)throw Hv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Hm(...e.split("."))._internalPath}catch{throw Hv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Hv(t,e,n,r,i){const a=r&&!r.isEmpty(),o=i!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new ke(ue.INVALID_ARGUMENT,c+t+u)}function HR(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Dr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Iq(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ly("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Iq extends bj{data(){return super.data()}}function ly(t,e){return typeof e=="string"?wj(t,e):e instanceof Hm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ke(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jj{}class cy extends jj{}function vn(t,e,...n){let r=[];e instanceof jj&&r.push(e),r=r.concat(n),function(a){const o=a.filter(u=>u instanceof Nj).length,c=a.filter(u=>u instanceof uy).length;if(o>1||o>0&&c>0)throw new ke(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class uy extends cy{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new uy(e,n,r)}_apply(e){const n=this._parse(e);return KR(e._query,n),new ma(e.firestore,e.converter,Rw(e._query,n))}_parse(e){const n=Qd(e.firestore);return function(a,o,c,u,h,f,p){let v;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new ke(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){cC(p,f);const _=[];for(const N of p)_.push(lC(u,a,N));v={arrayValue:{values:_}}}else v=lC(u,a,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||cC(p,f),v=BR(c,o,p,f==="in"||f==="not-in");return Kn.create(h,f,v)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Zn(t,e,n){const r=e,i=ly("where",t);return uy._create(i,r,n)}class Nj extends jj{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Nj(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ni.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,a){let o=i;const c=a.getFlattenedFilters();for(const u of c)KR(o,u),o=Rw(o,u)}(e._query,n),new ma(e.firestore,e.converter,Rw(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Sj extends cy{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Sj(e,n)}_apply(e){const n=function(i,a,o){if(i.startAt!==null)throw new ke(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ke(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new um(a,o)}(e._query,this._field,this._direction);return new ma(e.firestore,e.converter,function(i,a){const o=i.explicitOrderBy.concat([a]);return new Wc(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function oC(t,e="asc"){const n=e,r=ly("orderBy",t);return Sj._create(r,n)}class Ej extends cy{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Ej(e,n,r)}_apply(e){return new ma(e.firestore,e.converter,zv(e._query,this._limit,this._limitType))}}function Ks(t){return Nq("limit",t),Ej._create("limit",t,"F")}class Cj extends cy{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Cj(e,n,r)}_apply(e){const n=Rq(e,this.type,this._docOrFields,this._inclusive);return new ma(e.firestore,e.converter,function(i,a){return new Wc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,a,i.endAt)}(e._query,n))}}function Aq(...t){return Cj._create("startAfter",t,!1)}function Rq(t,e,n,r){if(n[0]=zt(n[0]),n[0]instanceof bj)return function(a,o,c,u,h){if(!u)throw new ke(ue.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const f=[];for(const p of rd(a))if(p.field.isKeyField())f.push(Vv(o,u.key));else{const v=u.data.field(p.field);if(Gx(v))throw new ke(ue.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(v===null){const _=p.field.canonicalString();throw new ke(ue.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${_}' (used as the orderBy) does not exist.`)}f.push(v)}return new wd(f,h)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Qd(t.firestore);return function(o,c,u,h,f,p){const v=o.explicitOrderBy;if(f.length>v.length)throw new ke(ue.INVALID_ARGUMENT,`Too many arguments provided to ${h}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const _=[];for(let N=0;N<f.length;N++){const j=f[N];if(v[N].field.isKeyField()){if(typeof j!="string")throw new ke(ue.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${h}(), but got a ${typeof j}`);if(!Zb(o)&&j.indexOf("/")!==-1)throw new ke(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${h}() must be a plain document ID, but '${j}' contains a slash.`);const S=o.path.child(nn.fromString(j));if(!tt.isDocumentKey(S))throw new ke(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${h}() must result in a valid document path, but '${S}' is not because it contains an odd number of segments.`);const w=new tt(S);_.push(Vv(c,w))}else{const S=BR(u,h,j);_.push(S)}}return new wd(_,p)}(t._query,t.firestore._databaseId,i,e,n,r)}}function lC(t,e,n){if(typeof(n=zt(n))=="string"){if(n==="")throw new ke(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Zb(e)&&n.indexOf("/")!==-1)throw new ke(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(nn.fromString(n));if(!tt.isDocumentKey(r))throw new ke(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Vv(t,new tt(r))}if(n instanceof Dr)return Vv(t,n._key);throw new ke(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sy(n)}.`)}function cC(t,e){if(!Array.isArray(t)||t.length===0)throw new ke(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function KR(t,e){const n=function(i,a){for(const o of i)for(const c of o.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ke(ue.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ke(ue.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Mq{convertValue(e,n="none"){switch(Tc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(kc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ut()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Bc(e,(i,a)=>{r[i]=this.convertValue(a,n)}),r}convertVectorValue(e){var n,r,i;const a=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Mn(o.doubleValue));return new gj(a)}convertGeoPoint(e){return new pj(Mn(e.latitude),Mn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=qb(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(om(e));default:return null}}convertTimestamp(e){const n=ml(e);return new ir(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=nn.fromString(e);Kt(gR(r));const i=new lm(r.get(1),r.get(3)),a=new tt(r.popFirst(5));return i.isEqual(n)||Ja(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kj(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ZR extends bj{constructor(e,n,r,i,a,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Gg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ly("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Gg extends ZR{data(e={}){return super.data(e)}}class YR{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new pf(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Gg(this._firestore,this._userDataWriter,r.key,r,new pf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ke(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{const u=new Gg(i._firestore,i._userDataWriter,c.doc.key,c.doc,new pf(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>a||c.type!==3).map(c=>{const u=new Gg(i._firestore,i._userDataWriter,c.doc.key,c.doc,new pf(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,f=-1;return c.type!==0&&(h=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:Dq(c.type),doc:u,oldIndex:h,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Dq(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ut()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(t){t=Kr(t,Dr);const e=Kr(t.firestore,ua);return wq(qm(e),t._key).then(n=>QR(e,t,n))}class Tj extends Mq{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nd(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Dr(this.firestore,null,n)}}function On(t){t=Kr(t,ma);const e=Kr(t.firestore,ua),n=qm(e),r=new Tj(e);return GR(t._query),bq(n,t._query).then(i=>new YR(e,r,t,i))}function sc(t,e,n){t=Kr(t,Dr);const r=Kr(t.firestore,ua),i=kj(t.converter,e,n);return Km(r,[xj(Qd(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Gr.none())])}function Tn(t,e,n,...r){t=Kr(t,Dr);const i=Kr(t.firestore,ua),a=Qd(i);let o;return o=typeof(e=zt(e))=="string"||e instanceof Hm?$R(a,"updateDoc",t._key,e,n,r):UR(a,"updateDoc",t._key,e),Km(i,[o.toMutation(t._key,Gr.exists(!0))])}function Sd(t){return Km(Kr(t.firestore,ua),[new Jx(t._key,Gr.none())])}function gl(t,e){const n=Kr(t.firestore,ua),r=xt(t),i=kj(t.converter,e);return Km(n,[xj(Qd(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Gr.exists(!1))]).then(()=>r)}function uC(t,...e){var n,r,i;t=zt(t);let a={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||aC(e[o])||(a=e[o],o++);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(aC(e[o])){const p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,h,f;if(t instanceof Dr)h=Kr(t.firestore,ua),f=Kx(t._key.path),u={next:p=>{e[o]&&e[o](QR(h,t,p))},error:e[o+1],complete:e[o+2]};else{const p=Kr(t,ma);h=Kr(p.firestore,ua),f=p._query;const v=new Tj(h);u={next:_=>{e[o]&&e[o](new YR(h,v,p,_))},error:e[o+1],complete:e[o+2]},GR(t._query)}return function(v,_,N,j){const S=new mj(j),w=new hj(_,S,N);return v.asyncQueue.enqueueAndForget(async()=>cj(await qv(v),w)),()=>{S.Za(),v.asyncQueue.enqueueAndForget(async()=>uj(await qv(v),w))}}(qm(h),f,c,u)}function Km(t,e){return function(r,i){const a=new Wa;return r.asyncQueue.enqueueAndForget(async()=>uq(await _q(r),i,a)),a.promise}(qm(t),e)}function QR(t,e,n){const r=n.docs.get(e._key),i=new Tj(t);return new ZR(t,i,e._key,r,new pf(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oq{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Qd(e)}set(e,n,r){this._verifyNotCommitted();const i=W_(e,this._firestore),a=kj(i.converter,n,r),o=xj(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Gr.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const a=W_(e,this._firestore);let o;return o=typeof(n=zt(n))=="string"||n instanceof Hm?$R(this._dataReader,"WriteBatch.update",a._key,n,r,i):UR(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(o.toMutation(a._key,Gr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=W_(e,this._firestore);return this._mutations=this._mutations.concat(new Jx(n._key,Gr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ke(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function W_(t,e){if((t=zt(t)).firestore!==e)throw new ke(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function er(){return new yj("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XR(t){return qm(t=Kr(t,ua)),new Oq(t,e=>Km(t,e))}(function(e,n=!0){(function(i){Kd=i})($c),jc(new dl("firestore",(r,{instanceIdentifier:i,options:a})=>{const o=r.getProvider("app").getImmediate(),c=new ua(new $7(r.getProvider("auth-internal")),new H7(r.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ke(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lm(h.options.projectId,f)}(o,i),o);return a=Object.assign({useFetchStreams:n},a),c._setSettings(a),c},"PUBLIC").setMultipleInstances(!0)),ea(NE,"4.7.3",e),ea(NE,"4.7.3","esm2017")})();var Lq="firebase",Fq="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ea(Lq,Fq,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR="firebasestorage.googleapis.com",e4="storageBucket",Vq=2*60*1e3,zq=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An extends fa{constructor(e,n,r=0){super(q_(e),`Firebase Storage: ${n} (${q_(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,An.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return q_(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var In;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(In||(In={}));function q_(t){return"storage/"+t}function Pj(){const t="An unknown error occurred, please check the error payload for server response.";return new An(In.UNKNOWN,t)}function Uq(t){return new An(In.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function $q(t){return new An(In.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Bq(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new An(In.UNAUTHENTICATED,t)}function Wq(){return new An(In.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function qq(t){return new An(In.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Hq(){return new An(In.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Gq(){return new An(In.CANCELED,"User canceled the upload/download.")}function Kq(t){return new An(In.INVALID_URL,"Invalid URL '"+t+"'.")}function Zq(t){return new An(In.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Yq(){return new An(In.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+e4+"' property when initializing the app?")}function Qq(){return new An(In.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Xq(){return new An(In.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Jq(t){return new An(In.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Bw(t){return new An(In.INVALID_ARGUMENT,t)}function t4(){return new An(In.APP_DELETED,"The Firebase app was deleted.")}function eH(t){return new An(In.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Rf(t,e){return new An(In.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Yh(t){throw new An(In.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=js.makeFromUrl(e,n)}catch{return new js(e,"")}if(r.path==="")return r;throw Zq(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function a(I){I.path.charAt(I.path.length-1)==="/"&&(I.path_=I.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function h(I){I.path_=decodeURIComponent(I.path)}const f="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",_=new RegExp(`^https?://${p}/${f}/b/${i}/o${v}`,"i"),N={bucket:1,path:3},j=n===JR?"(?:storage.googleapis.com|storage.cloud.google.com)":n,S="([^?#]*)",w=new RegExp(`^https?://${j}/${i}/${S}`,"i"),E=[{regex:c,indices:u,postModify:a},{regex:_,indices:N,postModify:h},{regex:w,indices:{bucket:1,path:2},postModify:h}];for(let I=0;I<E.length;I++){const D=E[I],B=D.regex.exec(e);if(B){const R=B[D.indices.bucket];let F=B[D.indices.path];F||(F=""),r=new js(R,F),D.postModify(r);break}}if(r==null)throw Kq(e);return r}}class tH{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nH(t,e,n){let r=1,i=null,a=null,o=!1,c=0;function u(){return c===2}let h=!1;function f(...S){h||(h=!0,e.apply(null,S))}function p(S){i=setTimeout(()=>{i=null,t(_,u())},S)}function v(){a&&clearTimeout(a)}function _(S,...w){if(h){v();return}if(S){v(),f.call(null,S,...w);return}if(u()||o){v(),f.call(null,S,...w);return}r<64&&(r*=2);let E;c===1?(c=2,E=0):E=(r+Math.random())*1e3,p(E)}let N=!1;function j(S){N||(N=!0,v(),!h&&(i!==null?(S||(c=2),clearTimeout(i),p(0)):S||(c=1)))}return p(0),a=setTimeout(()=>{o=!0,j(!0)},n),j}function rH(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sH(t){return t!==void 0}function iH(t){return typeof t=="object"&&!Array.isArray(t)}function Ij(t){return typeof t=="string"||t instanceof String}function dC(t){return Aj()&&t instanceof Blob}function Aj(){return typeof Blob<"u"}function hC(t,e,n,r){if(r<e)throw Bw(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Bw(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rj(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function n4(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var uc;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(uc||(uc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aH(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oH{constructor(e,n,r,i,a,o,c,u,h,f,p,v=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=u,this.timeout_=h,this.progressCallback_=f,this.connectionFactory_=p,this.retry=v,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,N)=>{this.resolve_=_,this.reject_=N,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new hg(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=c=>{const u=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,h)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const c=a.getErrorCode()===uc.NO_ERROR,u=a.getStatus();if(!c||aH(u,this.additionalRetryCodes_)&&this.retry){const f=a.getErrorCode()===uc.ABORT;r(!1,new hg(!1,null,f));return}const h=this.successCodes_.indexOf(u)!==-1;r(!0,new hg(h,a))})},n=(r,i)=>{const a=this.resolve_,o=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());sH(u)?a(u):a()}catch(u){o(u)}else if(c!==null){const u=Pj();u.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,u)):o(u)}else if(i.canceled){const u=this.appDelete_?t4():Gq();o(u)}else{const u=Hq();o(u)}};this.canceled_?n(!1,new hg(!1,null,!0)):this.backoffId_=nH(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&rH(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class hg{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function lH(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function cH(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function uH(t,e){e&&(t["X-Firebase-GMPID"]=e)}function dH(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function hH(t,e,n,r,i,a,o=!0){const c=n4(t.urlParams),u=t.url+c,h=Object.assign({},t.headers);return uH(h,e),lH(h,n),cH(h,a),dH(h,r),new oH(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fH(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function mH(...t){const e=fH();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Aj())return new Blob(t);throw new An(In.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function pH(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gH(t){if(typeof atob>"u")throw Jq("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class H_{constructor(e,n){this.data=e,this.contentType=n||null}}function vH(t,e){switch(t){case Gi.RAW:return new H_(r4(e));case Gi.BASE64:case Gi.BASE64URL:return new H_(s4(t,e));case Gi.DATA_URL:return new H_(yH(e),_H(e))}throw Pj()}function r4(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=r,o=t.charCodeAt(++n);r=65536|(a&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function xH(t){let e;try{e=decodeURIComponent(t)}catch{throw Rf(Gi.DATA_URL,"Malformed data URL.")}return r4(e)}function s4(t,e){switch(t){case Gi.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw Rf(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Gi.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw Rf(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=gH(e)}catch(i){throw i.message.includes("polyfill")?i:Rf(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class i4{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Rf(Gi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=wH(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function yH(t){const e=new i4(t);return e.base64?s4(Gi.BASE64,e.rest):xH(e.rest)}function _H(t){return new i4(t).contentType}function wH(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e,n){let r=0,i="";dC(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(dC(this.data_)){const r=this.data_,i=pH(r,e,n);return i===null?null:new Uo(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Uo(r,!0)}}static getBlob(...e){if(Aj()){const n=e.map(r=>r instanceof Uo?r.data_:r);return new Uo(mH.apply(null,n))}else{const n=e.map(o=>Ij(o)?vH(Gi.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let a=0;return n.forEach(o=>{for(let c=0;c<o.length;c++)i[a++]=o[c]}),new Uo(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a4(t){let e;try{e=JSON.parse(t)}catch{return null}return iH(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bH(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function jH(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function o4(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NH(t,e){return e}class zr{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||NH}}let fg=null;function SH(t){return!Ij(t)||t.length<2?t:o4(t)}function l4(){if(fg)return fg;const t=[];t.push(new zr("bucket")),t.push(new zr("generation")),t.push(new zr("metageneration")),t.push(new zr("name","fullPath",!0));function e(a,o){return SH(o)}const n=new zr("name");n.xform=e,t.push(n);function r(a,o){return o!==void 0?Number(o):o}const i=new zr("size");return i.xform=r,t.push(i),t.push(new zr("timeCreated")),t.push(new zr("updated")),t.push(new zr("md5Hash",null,!0)),t.push(new zr("cacheControl",null,!0)),t.push(new zr("contentDisposition",null,!0)),t.push(new zr("contentEncoding",null,!0)),t.push(new zr("contentLanguage",null,!0)),t.push(new zr("contentType",null,!0)),t.push(new zr("metadata","customMetadata",!0)),fg=t,fg}function EH(t,e){function n(){const r=t.bucket,i=t.fullPath,a=new js(r,i);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function CH(t,e,n){const r={};r.type="file";const i=n.length;for(let a=0;a<i;a++){const o=n[a];r[o.local]=o.xform(r,e[o.server])}return EH(r,t),r}function c4(t,e,n){const r=a4(e);return r===null?null:CH(t,r,n)}function kH(t,e,n,r){const i=a4(e);if(i===null||!Ij(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const o=encodeURIComponent;return a.split(",").map(h=>{const f=t.bucket,p=t.fullPath,v="/b/"+o(f)+"/o/"+o(p),_=Rj(v,n,r),N=n4({alt:"media",token:h});return _+N})[0]}function TH(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class u4{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d4(t){if(!t)throw Pj()}function PH(t,e){function n(r,i){const a=c4(t,i,e);return d4(a!==null),a}return n}function IH(t,e){function n(r,i){const a=c4(t,i,e);return d4(a!==null),kH(a,i,t.host,t._protocol)}return n}function h4(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=Wq():i=Bq():n.getStatus()===402?i=$q(t.bucket):n.getStatus()===403?i=qq(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function AH(t){const e=h4(t);function n(r,i){let a=e(r,i);return r.getStatus()===404&&(a=Uq(t.path)),a.serverResponse=i.serverResponse,a}return n}function RH(t,e,n){const r=e.fullServerUrl(),i=Rj(r,t.host,t._protocol),a="GET",o=t.maxOperationRetryTime,c=new u4(i,a,IH(t,n),o);return c.errorHandler=AH(e),c}function MH(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function DH(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=MH(null,e)),r}function OH(t,e,n,r,i){const a=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function c(){let E="";for(let I=0;I<2;I++)E=E+Math.random().toString().slice(2);return E}const u=c();o["Content-Type"]="multipart/related; boundary="+u;const h=DH(e,r,i),f=TH(h,n),p="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+u+`\r
Content-Type: `+h.contentType+`\r
\r
`,v=`\r
--`+u+"--",_=Uo.getBlob(p,r,v);if(_===null)throw Qq();const N={name:h.fullPath},j=Rj(a,t.host,t._protocol),S="POST",w=t.maxUploadRetryTime,y=new u4(j,S,PH(t,n),w);return y.urlParams=N,y.headers=o,y.body=_.uploadData(),y.errorHandler=h4(e),y}class LH{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=uc.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=uc.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=uc.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Yh("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Yh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Yh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Yh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Yh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class FH extends LH{initXhr(){this.xhr_.responseType="text"}}function f4(){return new FH}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,n){this._service=e,n instanceof js?this._location=n:this._location=js.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Pc(e,n)}get root(){const e=new js(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return o4(this._location.path)}get storage(){return this._service}get parent(){const e=bH(this._location.path);if(e===null)return null;const n=new js(this._location.bucket,e);return new Pc(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw eH(e)}}function VH(t,e,n){t._throwIfRoot("uploadBytes");const r=OH(t.storage,t._location,l4(),new Uo(e,!0),n);return t.storage.makeRequestWithTokens(r,f4).then(i=>({metadata:i,ref:t}))}function zH(t){t._throwIfRoot("getDownloadURL");const e=RH(t.storage,t._location,l4());return t.storage.makeRequestWithTokens(e,f4).then(n=>{if(n===null)throw Xq();return n})}function UH(t,e){const n=jH(t._location.path,e),r=new js(t._location.bucket,n);return new Pc(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $H(t){return/^[A-Za-z]+:\/\//.test(t)}function BH(t,e){return new Pc(t,e)}function m4(t,e){if(t instanceof Mj){const n=t;if(n._bucket==null)throw Yq();const r=new Pc(n,n._bucket);return e!=null?m4(r,e):r}else return e!==void 0?UH(t,e):t}function WH(t,e){if(e&&$H(e)){if(t instanceof Mj)return BH(t,e);throw Bw("To use ref(service, url), the first argument must be a Storage instance.")}else return m4(t,e)}function fC(t,e){const n=e==null?void 0:e[e4];return n==null?null:js.makeFromBucketSpec(n,t)}function qH(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:UI(i,t.app.options.projectId))}class Mj{constructor(e,n,r,i,a){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=JR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Vq,this._maxUploadRetryTime=zq,this._requests=new Set,i!=null?this._bucket=js.makeFromBucketSpec(i,this._host):this._bucket=fC(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=js.makeFromBucketSpec(this._url,e):this._bucket=fC(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){hC("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){hC("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Pc(this,e)}_makeRequest(e,n,r,i,a=!0){if(this._deleted)return new tH(t4());{const o=hH(e,this._appId,r,i,n,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const mC="@firebase/storage",pC="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p4="storage";function Dj(t,e,n){return t=zt(t),VH(t,e,n)}function Oj(t){return t=zt(t),zH(t)}function Lj(t,e){return t=zt(t),WH(t,e)}function HH(t=Ab(),e){t=zt(t);const r=$x(t,p4).getImmediate({identifier:e}),i=FI("storage");return i&&GH(r,...i),r}function GH(t,e,n,r={}){qH(t,e,n,r)}function KH(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Mj(n,r,i,e,$c)}function ZH(){jc(new dl(p4,KH,"PUBLIC").setMultipleInstances(!0)),ea(mC,pC,""),ea(mC,pC,"esm2017")}ZH();const YH={apiKey:"AIzaSyDXD6WpZoQNLNU0DAqH1wd3q9Q4vthOWv4",authDomain:"annonces-app-44d27.firebaseapp.com",projectId:"annonces-app-44d27",storageBucket:"annonces-app-44d27.firebasestorage.app",messagingSenderId:"603697837611",appId:"1:603697837611:web:858cf99bb80004d0f25c6e",measurementId:"G-35RWYRR568"},Fj=WI(YH),$i=F7(Fj),De=FR(Fj),Vj=HH(Fj),g4=x.createContext(null),G_=t=>{const e={};return Object.keys(t).forEach(n=>{t[n]!==void 0&&(e[n]=t[n])}),e},yn=()=>{const t=x.useContext(g4);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},QH=({children:t})=>{const[e,n]=x.useState(null),[r,i]=x.useState(null),[a,o]=x.useState(!0),c=async j=>{try{const S=localStorage.getItem("pendingUserData");if(S){const w=JSON.parse(S);console.log("🚨 Données récupérées depuis localStorage:",w);const y=xt(De,"users",j.uid),E=await Ss(y);if(E.exists()){const I=E.data();console.log("📊 Données actuelles dans Firestore:",I);const D={...I,...w,id:j.uid,email:j.email,createdAt:I.createdAt||new Date,lastSeen:new Date},B=G_(D);return await Tn(y,B),console.log("✅ Données récupérées et mises à jour !"),i(D),localStorage.removeItem("pendingUserData"),localStorage.removeItem("pendingUserEmail"),fe.success("Données de profil récupérées !"),!0}}return!1}catch(S){return console.error("❌ Erreur récupération:",S),!1}},u=async(j,S)=>{const w=xt(De,"users",j.uid),y=await Ss(w);if(y.exists()){const E=y.data();if(console.log("📊 Données existantes trouvées:",E),!await c(j)){const D={id:j.uid,email:j.email,lastSeen:new Date};E.displayName||(D.displayName=j.displayName||"Utilisateur"),E.university||(D.university="Université non spécifiée"),E.fieldOfStudy||(D.fieldOfStudy="Non spécifié");const B=G_(D);await Tn(w,B);const R={...E,...B};i(R),console.log("✅ Profil mis à jour sans écraser les données existantes")}}else{const E={id:j.uid,email:j.email,displayName:j.displayName||(S==null?void 0:S.displayName)||"Utilisateur",photoURL:j.photoURL||(S==null?void 0:S.photoURL)||void 0,phone:(S==null?void 0:S.phone)||void 0,isVerified:!1,verificationStatus:"pending",university:(S==null?void 0:S.university)||"Université non spécifiée",otherUniversity:(S==null?void 0:S.otherUniversity)||void 0,studentId:(S==null?void 0:S.studentId)||void 0,graduationYear:(S==null?void 0:S.graduationYear)||new Date().getFullYear()+2,fieldOfStudy:(S==null?void 0:S.fieldOfStudy)||"Non spécifié",otherFieldOfStudy:(S==null?void 0:S.otherFieldOfStudy)||void 0,campus:(S==null?void 0:S.campus)||"Campus principal",bio:(S==null?void 0:S.bio)||void 0,rating:0,reviewCount:0,trustScore:0,co2Saved:0,transactionsCount:0,donationsCount:0,location:"Paris, France",notificationPreferences:{email:!0,push:!0,sms:!1,alerts:!0},createdAt:new Date,lastSeen:new Date},I=G_(E);await sc(w,I),i(E)}},h=async(j,S)=>{try{await y$($i,j,S),fe.success("Connexion réussie !")}catch(w){const y=w instanceof Error?w.message:"Erreur inconnue";throw fe.error("Erreur de connexion : "+y),w}},f=async(j,S,w,y)=>{try{const{user:E}=await gA($i,j,S);await im(E,{displayName:w}),await u(E,y),fe.success("Compte créé avec succès !")}catch(E){const I=E instanceof Error?E.message:"Erreur inconnue";throw fe.error("Erreur lors de la création du compte : "+I),E}},p=async()=>{try{const j=new La;j.setCustomParameters({prompt:"select_account"}),j.addScope("email"),j.addScope("profile"),await X$($i,j)}catch(j){console.error("Google sign in error:",j);const S=j instanceof Error?j.message:"Erreur inconnue";throw fe.error("Erreur de connexion Google : "+S),j}},v=async()=>{try{await E$($i),i(null),fe.success("Déconnexion réussie !")}catch(j){throw fe.error("Erreur lors de la déconnexion"),j}},_=async j=>{if(!(!e||!r))try{const S=xt(De,"users",e.uid),w=Object.fromEntries(Object.entries(j).filter(([,y])=>y!==void 0));if(w.updatedAt=new Date,Object.keys(w).length===0){console.warn("Aucune donnée valide à mettre à jour");return}await Tn(S,w),i({...r,...w}),console.log("Profil mis à jour avec:",w),fe.success("Profil mis à jour !")}catch(S){throw console.error("Erreur mise à jour profil:",S),fe.error("Erreur lors de la mise à jour du profil"),S}};x.useEffect(()=>{const j=S$($i,async w=>{n(w),w?await u(w):i(null),o(!1)});return(async()=>{try{const w=await e7($i);w!=null&&w.user&&(await u(w.user),fe.success("Connexion Google réussie !"))}catch(w){if(console.error("Redirect result error:",w),w&&typeof w=="object"&&"code"in w&&w.code!=="auth/null-user"){const y=w instanceof Error?w.message:"Erreur inconnue";fe.error("Erreur de connexion Google : "+y)}}})(),j},[]);const N={currentUser:e,userProfile:r,loading:a,signIn:h,signUp:f,signInWithGoogle:p,logout:v,updateUserProfile:_};return s.jsx(g4.Provider,{value:N,children:!a&&t})};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XH=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),v4=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var JH={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eG=x.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...c},u)=>x.createElement("svg",{ref:u,...JH,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:v4("lucide",i),...c},[...o.map(([h,f])=>x.createElement(h,f)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=(t,e)=>{const n=x.forwardRef(({className:r,...i},a)=>x.createElement(eG,{ref:a,iconNode:e,className:v4(`lucide-${XH(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tG=me("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K_=me("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=me("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=me("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mm=me("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gC=me("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z_=me("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=me("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nG=me("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=me("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fi=me("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rG=me("Bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sG=me("Blocks",[["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["path",{d:"M10 21V8a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1H3",key:"1fpvtg"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=me("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=me("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=me("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=me("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=me("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=me("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hc=me("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=me("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=me("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iG=me("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aG=me("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oG=me("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ki=me("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mf=me("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=me("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gv=me("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ed=me("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=me("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=me("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=me("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=me("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=me("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lG=me("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kv=me("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=me("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cG=me("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=me("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uG=me("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dG=me("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hG=me("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dy=me("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic=me("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fG=me("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=me("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=me("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xd=me("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mG=me("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=me("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=me("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=me("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vl=me("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pG=me("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gG=me("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _i=me("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=me("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vG=me("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=me("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ic=me("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xG=me("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yG=me("MailCheck",[["path",{d:"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h8",key:"12jkf8"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"m16 19 2 2 4-4",key:"1b14m6"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=me("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=me("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _G=me("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=me("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=me("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=me("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wG=me("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=me("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bG=me("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jG=me("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yC=me("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jd=me("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NG=me("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fc=me("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SG=me("Recycle",[["path",{d:"M7 19H4.815a1.83 1.83 0 0 1-1.57-.881 1.785 1.785 0 0 1-.004-1.784L7.196 9.5",key:"x6z5xu"}],["path",{d:"M11 19h8.203a1.83 1.83 0 0 0 1.556-.89 1.784 1.784 0 0 0 0-1.775l-1.226-2.12",key:"1x4zh5"}],["path",{d:"m14 16-3 3 3 3",key:"f6jyew"}],["path",{d:"M8.293 13.596 7.196 9.5 3.1 10.598",key:"wf1obh"}],["path",{d:"m9.344 5.811 1.093-1.892A1.83 1.83 0 0 1 11.985 3a1.784 1.784 0 0 1 1.546.888l3.943 6.843",key:"9tzpgr"}],["path",{d:"m13.378 9.633 4.096 1.098 1.097-4.096",key:"1oe83g"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=me("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_=me("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EG=me("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=me("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Td=me("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hy=me("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fy=me("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=me("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=me("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=me("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xl=me("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=me("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ww=me("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CG=me("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=me("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kG=me("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pm=me("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hl=me("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TG=me("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PG=me("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=me("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IG=me("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zm=me("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=me("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const my=me("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AG=me("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qw=me("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=me("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=me("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ym=me("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=me("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RG=me("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hw=me("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eh=me("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function _C(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function py(...t){return e=>{let n=!1;const r=t.map(i=>{const a=_C(i,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():_C(t[i],null)}}}}function ot(...t){return x.useCallback(py(...t),t)}function yl(t){const e=DG(t),n=x.forwardRef((r,i)=>{const{children:a,...o}=r,c=x.Children.toArray(a),u=c.find(LG);if(u){const h=u.props.children,f=c.map(p=>p===u?x.Children.count(h)>1?x.Children.only(null):x.isValidElement(h)?h.props.children:null:p);return s.jsx(e,{...o,ref:i,children:x.isValidElement(h)?x.cloneElement(h,void 0,f):null})}return s.jsx(e,{...o,ref:i,children:a})});return n.displayName=`${t}.Slot`,n}var MG=yl("Slot");function DG(t){const e=x.forwardRef((n,r)=>{const{children:i,...a}=n;if(x.isValidElement(i)){const o=VG(i),c=FG(a,i.props);return i.type!==x.Fragment&&(c.ref=r?py(r,o):o),x.cloneElement(i,c)}return x.Children.count(i)>1?x.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var OG=Symbol("radix.slottable");function LG(t){return x.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===OG}function FG(t,e){const n={...e};for(const r in e){const i=t[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?n[r]=(...c)=>{const u=a(...c);return i(...c),u}:i&&(n[r]=i):r==="style"?n[r]={...i,...a}:r==="className"&&(n[r]=[i,a].filter(Boolean).join(" "))}return{...t,...n}}function VG(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function M4(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=M4(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function D4(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=M4(t))&&(r&&(r+=" "),r+=e);return r}const wC=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,bC=D4,gy=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return bC(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:a}=e,o=Object.keys(i).map(h=>{const f=n==null?void 0:n[h],p=a==null?void 0:a[h];if(f===null)return null;const v=wC(f)||wC(p);return i[h][v]}),c=n&&Object.entries(n).reduce((h,f)=>{let[p,v]=f;return v===void 0||(h[p]=v),h},{}),u=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((h,f)=>{let{class:p,className:v,..._}=f;return Object.entries(_).every(N=>{let[j,S]=N;return Array.isArray(S)?S.includes({...a,...c}[j]):{...a,...c}[j]===S})?[...h,p,v]:h},[]);return bC(t,o,u,n==null?void 0:n.class,n==null?void 0:n.className)},$j="-",zG=t=>{const e=$G(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const c=o.split($j);return c[0]===""&&c.length!==1&&c.shift(),O4(c,e)||UG(o)},getConflictingClassGroupIds:(o,c)=>{const u=n[o]||[];return c&&r[o]?[...u,...r[o]]:u}}},O4=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?O4(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const a=t.join($j);return(o=e.validators.find(({validator:c})=>c(a)))==null?void 0:o.classGroupId},jC=/^\[(.+)\]$/,UG=t=>{if(jC.test(t)){const e=jC.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},$G=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return WG(Object.entries(t.classGroups),n).forEach(([a,o])=>{Gw(o,r,a,e)}),r},Gw=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const a=i===""?e:NC(e,i);a.classGroupId=n;return}if(typeof i=="function"){if(BG(i)){Gw(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([a,o])=>{Gw(o,NC(e,a),n,r)})})},NC=(t,e)=>{let n=t;return e.split($j).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},BG=t=>t.isThemeGetter,WG=(t,e)=>e?t.map(([n,r])=>{const i=r.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,c])=>[e+o,c])):a);return[n,i]}):t,qG=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(a,o)=>{n.set(a,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(a){let o=n.get(a);if(o!==void 0)return o;if((o=r.get(a))!==void 0)return i(a,o),o},set(a,o){n.has(a)?n.set(a,o):i(a,o)}}},L4="!",HG=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],a=e.length,o=c=>{const u=[];let h=0,f=0,p;for(let S=0;S<c.length;S++){let w=c[S];if(h===0){if(w===i&&(r||c.slice(S,S+a)===e)){u.push(c.slice(f,S)),f=S+a;continue}if(w==="/"){p=S;continue}}w==="["?h++:w==="]"&&h--}const v=u.length===0?c:c.substring(f),_=v.startsWith(L4),N=_?v.substring(1):v,j=p&&p>f?p-f:void 0;return{modifiers:u,hasImportantModifier:_,baseClassName:N,maybePostfixModifierPosition:j}};return n?c=>n({className:c,parseClassName:o}):o},GG=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},KG=t=>({cache:qG(t.cacheSize),parseClassName:HG(t),...zG(t)}),ZG=/\s+/,YG=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,a=[],o=t.trim().split(ZG);let c="";for(let u=o.length-1;u>=0;u-=1){const h=o[u],{modifiers:f,hasImportantModifier:p,baseClassName:v,maybePostfixModifierPosition:_}=n(h);let N=!!_,j=r(N?v.substring(0,_):v);if(!j){if(!N){c=h+(c.length>0?" "+c:c);continue}if(j=r(v),!j){c=h+(c.length>0?" "+c:c);continue}N=!1}const S=GG(f).join(":"),w=p?S+L4:S,y=w+j;if(a.includes(y))continue;a.push(y);const E=i(j,N);for(let I=0;I<E.length;++I){const D=E[I];a.push(w+D)}c=h+(c.length>0?" "+c:c)}return c};function QG(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=F4(e))&&(r&&(r+=" "),r+=n);return r}const F4=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=F4(t[r]))&&(n&&(n+=" "),n+=e);return n};function XG(t,...e){let n,r,i,a=o;function o(u){const h=e.reduce((f,p)=>p(f),t());return n=KG(h),r=n.cache.get,i=n.cache.set,a=c,c(u)}function c(u){const h=r(u);if(h)return h;const f=YG(u,n);return i(u,f),f}return function(){return a(QG.apply(null,arguments))}}const on=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},V4=/^\[(?:([a-z-]+):)?(.+)\]$/i,JG=/^\d+\/\d+$/,eK=new Set(["px","full","screen"]),tK=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,nK=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,rK=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,sK=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,iK=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Aa=t=>id(t)||eK.has(t)||JG.test(t),Co=t=>th(t,"length",fK),id=t=>!!t&&!Number.isNaN(Number(t)),Q_=t=>th(t,"number",id),Qh=t=>!!t&&Number.isInteger(Number(t)),aK=t=>t.endsWith("%")&&id(t.slice(0,-1)),yt=t=>V4.test(t),ko=t=>tK.test(t),oK=new Set(["length","size","percentage"]),lK=t=>th(t,oK,z4),cK=t=>th(t,"position",z4),uK=new Set(["image","url"]),dK=t=>th(t,uK,pK),hK=t=>th(t,"",mK),Xh=()=>!0,th=(t,e,n)=>{const r=V4.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},fK=t=>nK.test(t)&&!rK.test(t),z4=()=>!1,mK=t=>sK.test(t),pK=t=>iK.test(t),gK=()=>{const t=on("colors"),e=on("spacing"),n=on("blur"),r=on("brightness"),i=on("borderColor"),a=on("borderRadius"),o=on("borderSpacing"),c=on("borderWidth"),u=on("contrast"),h=on("grayscale"),f=on("hueRotate"),p=on("invert"),v=on("gap"),_=on("gradientColorStops"),N=on("gradientColorStopPositions"),j=on("inset"),S=on("margin"),w=on("opacity"),y=on("padding"),E=on("saturate"),I=on("scale"),D=on("sepia"),B=on("skew"),R=on("space"),F=on("translate"),V=()=>["auto","contain","none"],k=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto",yt,e],O=()=>[yt,e],P=()=>["",Aa,Co],W=()=>["auto",id,yt],X=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ee=()=>["solid","dashed","dotted","double","none"],Z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],U=()=>["start","end","center","between","around","evenly","stretch"],q=()=>["","0",yt],H=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Q=()=>[id,yt];return{cacheSize:500,separator:":",theme:{colors:[Xh],spacing:[Aa,Co],blur:["none","",ko,yt],brightness:Q(),borderColor:[t],borderRadius:["none","","full",ko,yt],borderSpacing:O(),borderWidth:P(),contrast:Q(),grayscale:q(),hueRotate:Q(),invert:q(),gap:O(),gradientColorStops:[t],gradientColorStopPositions:[aK,Co],inset:M(),margin:M(),opacity:Q(),padding:O(),saturate:Q(),scale:Q(),sepia:q(),skew:Q(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",yt]}],container:["container"],columns:[{columns:[ko]}],"break-after":[{"break-after":H()}],"break-before":[{"break-before":H()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...X(),yt]}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:V()}],"overscroll-x":[{"overscroll-x":V()}],"overscroll-y":[{"overscroll-y":V()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[j]}],"inset-x":[{"inset-x":[j]}],"inset-y":[{"inset-y":[j]}],start:[{start:[j]}],end:[{end:[j]}],top:[{top:[j]}],right:[{right:[j]}],bottom:[{bottom:[j]}],left:[{left:[j]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Qh,yt]}],basis:[{basis:M()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",yt]}],grow:[{grow:q()}],shrink:[{shrink:q()}],order:[{order:["first","last","none",Qh,yt]}],"grid-cols":[{"grid-cols":[Xh]}],"col-start-end":[{col:["auto",{span:["full",Qh,yt]},yt]}],"col-start":[{"col-start":W()}],"col-end":[{"col-end":W()}],"grid-rows":[{"grid-rows":[Xh]}],"row-start-end":[{row:["auto",{span:[Qh,yt]},yt]}],"row-start":[{"row-start":W()}],"row-end":[{"row-end":W()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",yt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",yt]}],gap:[{gap:[v]}],"gap-x":[{"gap-x":[v]}],"gap-y":[{"gap-y":[v]}],"justify-content":[{justify:["normal",...U()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...U(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...U(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[S]}],mx:[{mx:[S]}],my:[{my:[S]}],ms:[{ms:[S]}],me:[{me:[S]}],mt:[{mt:[S]}],mr:[{mr:[S]}],mb:[{mb:[S]}],ml:[{ml:[S]}],"space-x":[{"space-x":[R]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[R]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",yt,e]}],"min-w":[{"min-w":[yt,e,"min","max","fit"]}],"max-w":[{"max-w":[yt,e,"none","full","min","max","fit","prose",{screen:[ko]},ko]}],h:[{h:[yt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[yt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[yt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[yt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ko,Co]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Q_]}],"font-family":[{font:[Xh]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",yt]}],"line-clamp":[{"line-clamp":["none",id,Q_]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Aa,yt]}],"list-image":[{"list-image":["none",yt]}],"list-style-type":[{list:["none","disc","decimal",yt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ee(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Aa,Co]}],"underline-offset":[{"underline-offset":["auto",Aa,yt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",yt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",yt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...X(),cK]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",lK]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},dK]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[N]}],"gradient-via-pos":[{via:[N]}],"gradient-to-pos":[{to:[N]}],"gradient-from":[{from:[_]}],"gradient-via":[{via:[_]}],"gradient-to":[{to:[_]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...ee(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:ee()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...ee()]}],"outline-offset":[{"outline-offset":[Aa,yt]}],"outline-w":[{outline:[Aa,Co]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[Aa,Co]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",ko,hK]}],"shadow-color":[{shadow:[Xh]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...Z(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Z()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",ko,yt]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[p]}],saturate:[{saturate:[E]}],sepia:[{sepia:[D]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[E]}],"backdrop-sepia":[{"backdrop-sepia":[D]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",yt]}],duration:[{duration:Q()}],ease:[{ease:["linear","in","out","in-out",yt]}],delay:[{delay:Q()}],animate:[{animate:["none","spin","ping","pulse","bounce",yt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[I]}],"scale-x":[{"scale-x":[I]}],"scale-y":[{"scale-y":[I]}],rotate:[{rotate:[Qh,yt]}],"translate-x":[{"translate-x":[F]}],"translate-y":[{"translate-y":[F]}],"skew-x":[{"skew-x":[B]}],"skew-y":[{"skew-y":[B]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",yt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",yt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",yt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Aa,Co,Q_]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},vK=XG(gK);function Xe(...t){return vK(D4(t))}const Kw=gy("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Y=x.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},a)=>{const o=r?MG:"button";return s.jsx(o,{className:Xe(Kw({variant:e,size:n,className:t})),ref:a,...i})});Y.displayName="Button";const We=x.forwardRef(({className:t,type:e,...n},r)=>s.jsx("input",{type:e,className:Xe("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));We.displayName="Input";function Ee(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function xK(t,e){const n=x.createContext(e),r=a=>{const{children:o,...c}=a,u=x.useMemo(()=>c,Object.values(c));return s.jsx(n.Provider,{value:u,children:o})};r.displayName=t+"Provider";function i(a){const o=x.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${t}\``)}return[r,i]}function jr(t,e=[]){let n=[];function r(a,o){const c=x.createContext(o),u=n.length;n=[...n,o];const h=p=>{var w;const{scope:v,children:_,...N}=p,j=((w=v==null?void 0:v[t])==null?void 0:w[u])||c,S=x.useMemo(()=>N,Object.values(N));return s.jsx(j.Provider,{value:S,children:_})};h.displayName=a+"Provider";function f(p,v){var j;const _=((j=v==null?void 0:v[t])==null?void 0:j[u])||c,N=x.useContext(_);if(N)return N;if(o!==void 0)return o;throw new Error(`\`${p}\` must be used within \`${a}\``)}return[h,f]}const i=()=>{const a=n.map(o=>x.createContext(o));return function(c){const u=(c==null?void 0:c[t])||a;return x.useMemo(()=>({[`__scope${t}`]:{...c,[t]:u}}),[c,u])}};return i.scopeName=t,[r,yK(i,...e)]}function yK(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((c,{useScope:u,scopeName:h})=>{const p=u(a)[`__scope${h}`];return{...c,...p}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var Un=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},_K=P1[" useInsertionEffect ".trim().toString()]||Un;function Ts({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,a,o]=wK({defaultProp:e,onChange:n}),c=t!==void 0,u=c?t:i;{const f=x.useRef(t!==void 0);x.useEffect(()=>{const p=f.current;p!==c&&console.warn(`${r} is changing from ${p?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=c},[c,r])}const h=x.useCallback(f=>{var p;if(c){const v=bK(f)?f(t):f;v!==t&&((p=o.current)==null||p.call(o,v))}else a(f)},[c,t,a,o]);return[u,h]}function wK({defaultProp:t,onChange:e}){const[n,r]=x.useState(t),i=x.useRef(n),a=x.useRef(e);return _K(()=>{a.current=e},[e]),x.useEffect(()=>{var o;i.current!==n&&((o=a.current)==null||o.call(a,n),i.current=n)},[n,i]),[n,r,a]}function bK(t){return typeof t=="function"}var jK=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ze=jK.reduce((t,e)=>{const n=yl(`Primitive.${e}`),r=x.forwardRef((i,a)=>{const{asChild:o,...c}=i,u=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(u,{...c,ref:a})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function U4(t,e){t&&Hd.flushSync(()=>t.dispatchEvent(e))}function Qm(t){const e=t+"CollectionProvider",[n,r]=jr(e),[i,a]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=j=>{const{scope:S,children:w}=j,y=Pe.useRef(null),E=Pe.useRef(new Map).current;return s.jsx(i,{scope:S,itemMap:E,collectionRef:y,children:w})};o.displayName=e;const c=t+"CollectionSlot",u=yl(c),h=Pe.forwardRef((j,S)=>{const{scope:w,children:y}=j,E=a(c,w),I=ot(S,E.collectionRef);return s.jsx(u,{ref:I,children:y})});h.displayName=c;const f=t+"CollectionItemSlot",p="data-radix-collection-item",v=yl(f),_=Pe.forwardRef((j,S)=>{const{scope:w,children:y,...E}=j,I=Pe.useRef(null),D=ot(S,I),B=a(f,w);return Pe.useEffect(()=>(B.itemMap.set(I,{ref:I,...E}),()=>void B.itemMap.delete(I))),s.jsx(v,{[p]:"",ref:D,children:y})});_.displayName=f;function N(j){const S=a(t+"CollectionConsumer",j);return Pe.useCallback(()=>{const y=S.collectionRef.current;if(!y)return[];const E=Array.from(y.querySelectorAll(`[${p}]`));return Array.from(S.itemMap.values()).sort((B,R)=>E.indexOf(B.ref.current)-E.indexOf(R.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:o,Slot:h,ItemSlot:_},N,r]}var NK=x.createContext(void 0);function Gc(t){const e=x.useContext(NK);return t||e||"ltr"}function dr(t){const e=x.useRef(t);return x.useEffect(()=>{e.current=t}),x.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function SK(t,e=globalThis==null?void 0:globalThis.document){const n=dr(t);x.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var EK="DismissableLayer",Zw="dismissableLayer.update",CK="dismissableLayer.pointerDownOutside",kK="dismissableLayer.focusOutside",SC,$4=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Xm=x.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:o,onDismiss:c,...u}=t,h=x.useContext($4),[f,p]=x.useState(null),v=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,_]=x.useState({}),N=ot(e,R=>p(R)),j=Array.from(h.layers),[S]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),w=j.indexOf(S),y=f?j.indexOf(f):-1,E=h.layersWithOutsidePointerEventsDisabled.size>0,I=y>=w,D=IK(R=>{const F=R.target,V=[...h.branches].some(k=>k.contains(F));!I||V||(i==null||i(R),o==null||o(R),R.defaultPrevented||c==null||c())},v),B=AK(R=>{const F=R.target;[...h.branches].some(k=>k.contains(F))||(a==null||a(R),o==null||o(R),R.defaultPrevented||c==null||c())},v);return SK(R=>{y===h.layers.size-1&&(r==null||r(R),!R.defaultPrevented&&c&&(R.preventDefault(),c()))},v),x.useEffect(()=>{if(f)return n&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(SC=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(f)),h.layers.add(f),EC(),()=>{n&&h.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=SC)}},[f,v,n,h]),x.useEffect(()=>()=>{f&&(h.layers.delete(f),h.layersWithOutsidePointerEventsDisabled.delete(f),EC())},[f,h]),x.useEffect(()=>{const R=()=>_({});return document.addEventListener(Zw,R),()=>document.removeEventListener(Zw,R)},[]),s.jsx(ze.div,{...u,ref:N,style:{pointerEvents:E?I?"auto":"none":void 0,...t.style},onFocusCapture:Ee(t.onFocusCapture,B.onFocusCapture),onBlurCapture:Ee(t.onBlurCapture,B.onBlurCapture),onPointerDownCapture:Ee(t.onPointerDownCapture,D.onPointerDownCapture)})});Xm.displayName=EK;var TK="DismissableLayerBranch",PK=x.forwardRef((t,e)=>{const n=x.useContext($4),r=x.useRef(null),i=ot(e,r);return x.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),s.jsx(ze.div,{...t,ref:i})});PK.displayName=TK;function IK(t,e=globalThis==null?void 0:globalThis.document){const n=dr(t),r=x.useRef(!1),i=x.useRef(()=>{});return x.useEffect(()=>{const a=c=>{if(c.target&&!r.current){let u=function(){B4(CK,n,h,{discrete:!0})};const h={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=u,e.addEventListener("click",i.current,{once:!0})):u()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function AK(t,e=globalThis==null?void 0:globalThis.document){const n=dr(t),r=x.useRef(!1);return x.useEffect(()=>{const i=a=>{a.target&&!r.current&&B4(kK,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function EC(){const t=new CustomEvent(Zw);document.dispatchEvent(t)}function B4(t,e,n,{discrete:r}){const i=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?U4(i,a):i.dispatchEvent(a)}var X_=0;function vy(){x.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??CC()),document.body.insertAdjacentElement("beforeend",t[1]??CC()),X_++,()=>{X_===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),X_--}},[])}function CC(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var J_="focusScope.autoFocusOnMount",e0="focusScope.autoFocusOnUnmount",kC={bubbles:!1,cancelable:!0},RK="FocusScope",Jm=x.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...o}=t,[c,u]=x.useState(null),h=dr(i),f=dr(a),p=x.useRef(null),v=ot(e,j=>u(j)),_=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(r){let j=function(E){if(_.paused||!c)return;const I=E.target;c.contains(I)?p.current=I:Po(p.current,{select:!0})},S=function(E){if(_.paused||!c)return;const I=E.relatedTarget;I!==null&&(c.contains(I)||Po(p.current,{select:!0}))},w=function(E){if(document.activeElement===document.body)for(const D of E)D.removedNodes.length>0&&Po(c)};document.addEventListener("focusin",j),document.addEventListener("focusout",S);const y=new MutationObserver(w);return c&&y.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",j),document.removeEventListener("focusout",S),y.disconnect()}}},[r,c,_.paused]),x.useEffect(()=>{if(c){PC.add(_);const j=document.activeElement;if(!c.contains(j)){const w=new CustomEvent(J_,kC);c.addEventListener(J_,h),c.dispatchEvent(w),w.defaultPrevented||(MK(VK(W4(c)),{select:!0}),document.activeElement===j&&Po(c))}return()=>{c.removeEventListener(J_,h),setTimeout(()=>{const w=new CustomEvent(e0,kC);c.addEventListener(e0,f),c.dispatchEvent(w),w.defaultPrevented||Po(j??document.body,{select:!0}),c.removeEventListener(e0,f),PC.remove(_)},0)}}},[c,h,f,_]);const N=x.useCallback(j=>{if(!n&&!r||_.paused)return;const S=j.key==="Tab"&&!j.altKey&&!j.ctrlKey&&!j.metaKey,w=document.activeElement;if(S&&w){const y=j.currentTarget,[E,I]=DK(y);E&&I?!j.shiftKey&&w===I?(j.preventDefault(),n&&Po(E,{select:!0})):j.shiftKey&&w===E&&(j.preventDefault(),n&&Po(I,{select:!0})):w===y&&j.preventDefault()}},[n,r,_.paused]);return s.jsx(ze.div,{tabIndex:-1,...o,ref:v,onKeyDown:N})});Jm.displayName=RK;function MK(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Po(r,{select:e}),document.activeElement!==n)return}function DK(t){const e=W4(t),n=TC(e,t),r=TC(e.reverse(),t);return[n,r]}function W4(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function TC(t,e){for(const n of t)if(!OK(n,{upTo:e}))return n}function OK(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function LK(t){return t instanceof HTMLInputElement&&"select"in t}function Po(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&LK(t)&&e&&t.select()}}var PC=FK();function FK(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=IC(t,e),t.unshift(e)},remove(e){var n;t=IC(t,e),(n=t[0])==null||n.resume()}}}function IC(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function VK(t){return t.filter(e=>e.tagName!=="A")}var zK=P1[" useId ".trim().toString()]||(()=>{}),UK=0;function Es(t){const[e,n]=x.useState(zK());return Un(()=>{n(r=>r??String(UK++))},[t]),e?`radix-${e}`:""}const $K=["top","right","bottom","left"],_l=Math.min,_s=Math.max,Yv=Math.round,mg=Math.floor,ia=t=>({x:t,y:t}),BK={left:"right",right:"left",bottom:"top",top:"bottom"},WK={start:"end",end:"start"};function Yw(t,e,n){return _s(t,_l(e,n))}function no(t,e){return typeof t=="function"?t(e):t}function ro(t){return t.split("-")[0]}function nh(t){return t.split("-")[1]}function Bj(t){return t==="x"?"y":"x"}function Wj(t){return t==="y"?"height":"width"}function Zi(t){return["top","bottom"].includes(ro(t))?"y":"x"}function qj(t){return Bj(Zi(t))}function qK(t,e,n){n===void 0&&(n=!1);const r=nh(t),i=qj(t),a=Wj(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(o=Qv(o)),[o,Qv(o)]}function HK(t){const e=Qv(t);return[Qw(t),e,Qw(e)]}function Qw(t){return t.replace(/start|end/g,e=>WK[e])}function GK(t,e,n){const r=["left","right"],i=["right","left"],a=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?a:o;default:return[]}}function KK(t,e,n,r){const i=nh(t);let a=GK(ro(t),n==="start",r);return i&&(a=a.map(o=>o+"-"+i),e&&(a=a.concat(a.map(Qw)))),a}function Qv(t){return t.replace(/left|right|bottom|top/g,e=>BK[e])}function ZK(t){return{top:0,right:0,bottom:0,left:0,...t}}function q4(t){return typeof t!="number"?ZK(t):{top:t,right:t,bottom:t,left:t}}function Xv(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function AC(t,e,n){let{reference:r,floating:i}=t;const a=Zi(e),o=qj(e),c=Wj(o),u=ro(e),h=a==="y",f=r.x+r.width/2-i.width/2,p=r.y+r.height/2-i.height/2,v=r[c]/2-i[c]/2;let _;switch(u){case"top":_={x:f,y:r.y-i.height};break;case"bottom":_={x:f,y:r.y+r.height};break;case"right":_={x:r.x+r.width,y:p};break;case"left":_={x:r.x-i.width,y:p};break;default:_={x:r.x,y:r.y}}switch(nh(e)){case"start":_[o]-=v*(n&&h?-1:1);break;case"end":_[o]+=v*(n&&h?-1:1);break}return _}const YK=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:o}=n,c=a.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(e));let h=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:f,y:p}=AC(h,r,u),v=r,_={},N=0;for(let j=0;j<c.length;j++){const{name:S,fn:w}=c[j],{x:y,y:E,data:I,reset:D}=await w({x:f,y:p,initialPlacement:r,placement:v,strategy:i,middlewareData:_,rects:h,platform:o,elements:{reference:t,floating:e}});f=y??f,p=E??p,_={..._,[S]:{..._[S],...I}},D&&N<=50&&(N++,typeof D=="object"&&(D.placement&&(v=D.placement),D.rects&&(h=D.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):D.rects),{x:f,y:p}=AC(h,v,u)),j=-1)}return{x:f,y:p,placement:v,strategy:i,middlewareData:_}};async function gm(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:a,rects:o,elements:c,strategy:u}=t,{boundary:h="clippingAncestors",rootBoundary:f="viewport",elementContext:p="floating",altBoundary:v=!1,padding:_=0}=no(e,t),N=q4(_),S=c[v?p==="floating"?"reference":"floating":p],w=Xv(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(S)))==null||n?S:S.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(c.floating)),boundary:h,rootBoundary:f,strategy:u})),y=p==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,E=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c.floating)),I=await(a.isElement==null?void 0:a.isElement(E))?await(a.getScale==null?void 0:a.getScale(E))||{x:1,y:1}:{x:1,y:1},D=Xv(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:y,offsetParent:E,strategy:u}):y);return{top:(w.top-D.top+N.top)/I.y,bottom:(D.bottom-w.bottom+N.bottom)/I.y,left:(w.left-D.left+N.left)/I.x,right:(D.right-w.right+N.right)/I.x}}const QK=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:a,platform:o,elements:c,middlewareData:u}=e,{element:h,padding:f=0}=no(t,e)||{};if(h==null)return{};const p=q4(f),v={x:n,y:r},_=qj(i),N=Wj(_),j=await o.getDimensions(h),S=_==="y",w=S?"top":"left",y=S?"bottom":"right",E=S?"clientHeight":"clientWidth",I=a.reference[N]+a.reference[_]-v[_]-a.floating[N],D=v[_]-a.reference[_],B=await(o.getOffsetParent==null?void 0:o.getOffsetParent(h));let R=B?B[E]:0;(!R||!await(o.isElement==null?void 0:o.isElement(B)))&&(R=c.floating[E]||a.floating[N]);const F=I/2-D/2,V=R/2-j[N]/2-1,k=_l(p[w],V),M=_l(p[y],V),O=k,P=R-j[N]-M,W=R/2-j[N]/2+F,X=Yw(O,W,P),ee=!u.arrow&&nh(i)!=null&&W!==X&&a.reference[N]/2-(W<O?k:M)-j[N]/2<0,Z=ee?W<O?W-O:W-P:0;return{[_]:v[_]+Z,data:{[_]:X,centerOffset:W-X-Z,...ee&&{alignmentOffset:Z}},reset:ee}}}),XK=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:a,rects:o,initialPlacement:c,platform:u,elements:h}=e,{mainAxis:f=!0,crossAxis:p=!0,fallbackPlacements:v,fallbackStrategy:_="bestFit",fallbackAxisSideDirection:N="none",flipAlignment:j=!0,...S}=no(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const w=ro(i),y=Zi(c),E=ro(c)===c,I=await(u.isRTL==null?void 0:u.isRTL(h.floating)),D=v||(E||!j?[Qv(c)]:HK(c)),B=N!=="none";!v&&B&&D.push(...KK(c,j,N,I));const R=[c,...D],F=await gm(e,S),V=[];let k=((r=a.flip)==null?void 0:r.overflows)||[];if(f&&V.push(F[w]),p){const W=qK(i,o,I);V.push(F[W[0]],F[W[1]])}if(k=[...k,{placement:i,overflows:V}],!V.every(W=>W<=0)){var M,O;const W=(((M=a.flip)==null?void 0:M.index)||0)+1,X=R[W];if(X&&(!(p==="alignment"?y!==Zi(X):!1)||k.every(U=>U.overflows[0]>0&&Zi(U.placement)===y)))return{data:{index:W,overflows:k},reset:{placement:X}};let ee=(O=k.filter(Z=>Z.overflows[0]<=0).sort((Z,U)=>Z.overflows[1]-U.overflows[1])[0])==null?void 0:O.placement;if(!ee)switch(_){case"bestFit":{var P;const Z=(P=k.filter(U=>{if(B){const q=Zi(U.placement);return q===y||q==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(q=>q>0).reduce((q,H)=>q+H,0)]).sort((U,q)=>U[1]-q[1])[0])==null?void 0:P[0];Z&&(ee=Z);break}case"initialPlacement":ee=c;break}if(i!==ee)return{reset:{placement:ee}}}return{}}}};function RC(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function MC(t){return $K.some(e=>t[e]>=0)}const JK=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=no(t,e);switch(r){case"referenceHidden":{const a=await gm(e,{...i,elementContext:"reference"}),o=RC(a,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:MC(o)}}}case"escaped":{const a=await gm(e,{...i,altBoundary:!0}),o=RC(a,n.floating);return{data:{escapedOffsets:o,escaped:MC(o)}}}default:return{}}}}};async function eZ(t,e){const{placement:n,platform:r,elements:i}=t,a=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=ro(n),c=nh(n),u=Zi(n)==="y",h=["left","top"].includes(o)?-1:1,f=a&&u?-1:1,p=no(e,t);let{mainAxis:v,crossAxis:_,alignmentAxis:N}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return c&&typeof N=="number"&&(_=c==="end"?N*-1:N),u?{x:_*f,y:v*h}:{x:v*h,y:_*f}}const tZ=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:a,placement:o,middlewareData:c}=e,u=await eZ(e,t);return o===((n=c.offset)==null?void 0:n.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:a+u.y,data:{...u,placement:o}}}}},nZ=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:a=!0,crossAxis:o=!1,limiter:c={fn:S=>{let{x:w,y}=S;return{x:w,y}}},...u}=no(t,e),h={x:n,y:r},f=await gm(e,u),p=Zi(ro(i)),v=Bj(p);let _=h[v],N=h[p];if(a){const S=v==="y"?"top":"left",w=v==="y"?"bottom":"right",y=_+f[S],E=_-f[w];_=Yw(y,_,E)}if(o){const S=p==="y"?"top":"left",w=p==="y"?"bottom":"right",y=N+f[S],E=N-f[w];N=Yw(y,N,E)}const j=c.fn({...e,[v]:_,[p]:N});return{...j,data:{x:j.x-n,y:j.y-r,enabled:{[v]:a,[p]:o}}}}}},rZ=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:a,middlewareData:o}=e,{offset:c=0,mainAxis:u=!0,crossAxis:h=!0}=no(t,e),f={x:n,y:r},p=Zi(i),v=Bj(p);let _=f[v],N=f[p];const j=no(c,e),S=typeof j=="number"?{mainAxis:j,crossAxis:0}:{mainAxis:0,crossAxis:0,...j};if(u){const E=v==="y"?"height":"width",I=a.reference[v]-a.floating[E]+S.mainAxis,D=a.reference[v]+a.reference[E]-S.mainAxis;_<I?_=I:_>D&&(_=D)}if(h){var w,y;const E=v==="y"?"width":"height",I=["top","left"].includes(ro(i)),D=a.reference[p]-a.floating[E]+(I&&((w=o.offset)==null?void 0:w[p])||0)+(I?0:S.crossAxis),B=a.reference[p]+a.reference[E]+(I?0:((y=o.offset)==null?void 0:y[p])||0)-(I?S.crossAxis:0);N<D?N=D:N>B&&(N=B)}return{[v]:_,[p]:N}}}},sZ=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:a,platform:o,elements:c}=e,{apply:u=()=>{},...h}=no(t,e),f=await gm(e,h),p=ro(i),v=nh(i),_=Zi(i)==="y",{width:N,height:j}=a.floating;let S,w;p==="top"||p==="bottom"?(S=p,w=v===(await(o.isRTL==null?void 0:o.isRTL(c.floating))?"start":"end")?"left":"right"):(w=p,S=v==="end"?"top":"bottom");const y=j-f.top-f.bottom,E=N-f.left-f.right,I=_l(j-f[S],y),D=_l(N-f[w],E),B=!e.middlewareData.shift;let R=I,F=D;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(F=E),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(R=y),B&&!v){const k=_s(f.left,0),M=_s(f.right,0),O=_s(f.top,0),P=_s(f.bottom,0);_?F=N-2*(k!==0||M!==0?k+M:_s(f.left,f.right)):R=j-2*(O!==0||P!==0?O+P:_s(f.top,f.bottom))}await u({...e,availableWidth:F,availableHeight:R});const V=await o.getDimensions(c.floating);return N!==V.width||j!==V.height?{reset:{rects:!0}}:{}}}};function xy(){return typeof window<"u"}function rh(t){return H4(t)?(t.nodeName||"").toLowerCase():"#document"}function Cs(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function pa(t){var e;return(e=(H4(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function H4(t){return xy()?t instanceof Node||t instanceof Cs(t).Node:!1}function Si(t){return xy()?t instanceof Element||t instanceof Cs(t).Element:!1}function da(t){return xy()?t instanceof HTMLElement||t instanceof Cs(t).HTMLElement:!1}function DC(t){return!xy()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Cs(t).ShadowRoot}function ep(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Ei(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function iZ(t){return["table","td","th"].includes(rh(t))}function yy(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Hj(t){const e=Gj(),n=Si(t)?Ei(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function aZ(t){let e=wl(t);for(;da(e)&&!Pd(e);){if(Hj(e))return e;if(yy(e))return null;e=wl(e)}return null}function Gj(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Pd(t){return["html","body","#document"].includes(rh(t))}function Ei(t){return Cs(t).getComputedStyle(t)}function _y(t){return Si(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function wl(t){if(rh(t)==="html")return t;const e=t.assignedSlot||t.parentNode||DC(t)&&t.host||pa(t);return DC(e)?e.host:e}function G4(t){const e=wl(t);return Pd(e)?t.ownerDocument?t.ownerDocument.body:t.body:da(e)&&ep(e)?e:G4(e)}function vm(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=G4(t),a=i===((r=t.ownerDocument)==null?void 0:r.body),o=Cs(i);if(a){const c=Xw(o);return e.concat(o,o.visualViewport||[],ep(i)?i:[],c&&n?vm(c):[])}return e.concat(i,vm(i,[],n))}function Xw(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function K4(t){const e=Ei(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=da(t),a=i?t.offsetWidth:n,o=i?t.offsetHeight:r,c=Yv(n)!==a||Yv(r)!==o;return c&&(n=a,r=o),{width:n,height:r,$:c}}function Kj(t){return Si(t)?t:t.contextElement}function ad(t){const e=Kj(t);if(!da(e))return ia(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:a}=K4(e);let o=(a?Yv(n.width):n.width)/r,c=(a?Yv(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!c||!Number.isFinite(c))&&(c=1),{x:o,y:c}}const oZ=ia(0);function Z4(t){const e=Cs(t);return!Gj()||!e.visualViewport?oZ:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function lZ(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Cs(t)?!1:e}function Ac(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),a=Kj(t);let o=ia(1);e&&(r?Si(r)&&(o=ad(r)):o=ad(t));const c=lZ(a,n,r)?Z4(a):ia(0);let u=(i.left+c.x)/o.x,h=(i.top+c.y)/o.y,f=i.width/o.x,p=i.height/o.y;if(a){const v=Cs(a),_=r&&Si(r)?Cs(r):r;let N=v,j=Xw(N);for(;j&&r&&_!==N;){const S=ad(j),w=j.getBoundingClientRect(),y=Ei(j),E=w.left+(j.clientLeft+parseFloat(y.paddingLeft))*S.x,I=w.top+(j.clientTop+parseFloat(y.paddingTop))*S.y;u*=S.x,h*=S.y,f*=S.x,p*=S.y,u+=E,h+=I,N=Cs(j),j=Xw(N)}}return Xv({width:f,height:p,x:u,y:h})}function Zj(t,e){const n=_y(t).scrollLeft;return e?e.left+n:Ac(pa(t)).left+n}function Y4(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:Zj(t,r)),a=r.top+e.scrollTop;return{x:i,y:a}}function cZ(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const a=i==="fixed",o=pa(r),c=e?yy(e.floating):!1;if(r===o||c&&a)return n;let u={scrollLeft:0,scrollTop:0},h=ia(1);const f=ia(0),p=da(r);if((p||!p&&!a)&&((rh(r)!=="body"||ep(o))&&(u=_y(r)),da(r))){const _=Ac(r);h=ad(r),f.x=_.x+r.clientLeft,f.y=_.y+r.clientTop}const v=o&&!p&&!a?Y4(o,u,!0):ia(0);return{width:n.width*h.x,height:n.height*h.y,x:n.x*h.x-u.scrollLeft*h.x+f.x+v.x,y:n.y*h.y-u.scrollTop*h.y+f.y+v.y}}function uZ(t){return Array.from(t.getClientRects())}function dZ(t){const e=pa(t),n=_y(t),r=t.ownerDocument.body,i=_s(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=_s(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Zj(t);const c=-n.scrollTop;return Ei(r).direction==="rtl"&&(o+=_s(e.clientWidth,r.clientWidth)-i),{width:i,height:a,x:o,y:c}}function hZ(t,e){const n=Cs(t),r=pa(t),i=n.visualViewport;let a=r.clientWidth,o=r.clientHeight,c=0,u=0;if(i){a=i.width,o=i.height;const h=Gj();(!h||h&&e==="fixed")&&(c=i.offsetLeft,u=i.offsetTop)}return{width:a,height:o,x:c,y:u}}function fZ(t,e){const n=Ac(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,a=da(t)?ad(t):ia(1),o=t.clientWidth*a.x,c=t.clientHeight*a.y,u=i*a.x,h=r*a.y;return{width:o,height:c,x:u,y:h}}function OC(t,e,n){let r;if(e==="viewport")r=hZ(t,n);else if(e==="document")r=dZ(pa(t));else if(Si(e))r=fZ(e,n);else{const i=Z4(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Xv(r)}function Q4(t,e){const n=wl(t);return n===e||!Si(n)||Pd(n)?!1:Ei(n).position==="fixed"||Q4(n,e)}function mZ(t,e){const n=e.get(t);if(n)return n;let r=vm(t,[],!1).filter(c=>Si(c)&&rh(c)!=="body"),i=null;const a=Ei(t).position==="fixed";let o=a?wl(t):t;for(;Si(o)&&!Pd(o);){const c=Ei(o),u=Hj(o);!u&&c.position==="fixed"&&(i=null),(a?!u&&!i:!u&&c.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||ep(o)&&!u&&Q4(t,o))?r=r.filter(f=>f!==o):i=c,o=wl(o)}return e.set(t,r),r}function pZ(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?yy(e)?[]:mZ(e,this._c):[].concat(n),r],c=o[0],u=o.reduce((h,f)=>{const p=OC(e,f,i);return h.top=_s(p.top,h.top),h.right=_l(p.right,h.right),h.bottom=_l(p.bottom,h.bottom),h.left=_s(p.left,h.left),h},OC(e,c,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function gZ(t){const{width:e,height:n}=K4(t);return{width:e,height:n}}function vZ(t,e,n){const r=da(e),i=pa(e),a=n==="fixed",o=Ac(t,!0,a,e);let c={scrollLeft:0,scrollTop:0};const u=ia(0);function h(){u.x=Zj(i)}if(r||!r&&!a)if((rh(e)!=="body"||ep(i))&&(c=_y(e)),r){const _=Ac(e,!0,a,e);u.x=_.x+e.clientLeft,u.y=_.y+e.clientTop}else i&&h();a&&!r&&i&&h();const f=i&&!r&&!a?Y4(i,c):ia(0),p=o.left+c.scrollLeft-u.x-f.x,v=o.top+c.scrollTop-u.y-f.y;return{x:p,y:v,width:o.width,height:o.height}}function t0(t){return Ei(t).position==="static"}function LC(t,e){if(!da(t)||Ei(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return pa(t)===n&&(n=n.ownerDocument.body),n}function X4(t,e){const n=Cs(t);if(yy(t))return n;if(!da(t)){let i=wl(t);for(;i&&!Pd(i);){if(Si(i)&&!t0(i))return i;i=wl(i)}return n}let r=LC(t,e);for(;r&&iZ(r)&&t0(r);)r=LC(r,e);return r&&Pd(r)&&t0(r)&&!Hj(r)?n:r||aZ(t)||n}const xZ=async function(t){const e=this.getOffsetParent||X4,n=this.getDimensions,r=await n(t.floating);return{reference:vZ(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function yZ(t){return Ei(t).direction==="rtl"}const _Z={convertOffsetParentRelativeRectToViewportRelativeRect:cZ,getDocumentElement:pa,getClippingRect:pZ,getOffsetParent:X4,getElementRects:xZ,getClientRects:uZ,getDimensions:gZ,getScale:ad,isElement:Si,isRTL:yZ};function J4(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function wZ(t,e){let n=null,r;const i=pa(t);function a(){var c;clearTimeout(r),(c=n)==null||c.disconnect(),n=null}function o(c,u){c===void 0&&(c=!1),u===void 0&&(u=1),a();const h=t.getBoundingClientRect(),{left:f,top:p,width:v,height:_}=h;if(c||e(),!v||!_)return;const N=mg(p),j=mg(i.clientWidth-(f+v)),S=mg(i.clientHeight-(p+_)),w=mg(f),E={rootMargin:-N+"px "+-j+"px "+-S+"px "+-w+"px",threshold:_s(0,_l(1,u))||1};let I=!0;function D(B){const R=B[0].intersectionRatio;if(R!==u){if(!I)return o();R?o(!1,R):r=setTimeout(()=>{o(!1,1e-7)},1e3)}R===1&&!J4(h,t.getBoundingClientRect())&&o(),I=!1}try{n=new IntersectionObserver(D,{...E,root:i.ownerDocument})}catch{n=new IntersectionObserver(D,E)}n.observe(t)}return o(!0),a}function bZ(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,h=Kj(t),f=i||a?[...h?vm(h):[],...vm(e)]:[];f.forEach(w=>{i&&w.addEventListener("scroll",n,{passive:!0}),a&&w.addEventListener("resize",n)});const p=h&&c?wZ(h,n):null;let v=-1,_=null;o&&(_=new ResizeObserver(w=>{let[y]=w;y&&y.target===h&&_&&(_.unobserve(e),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var E;(E=_)==null||E.observe(e)})),n()}),h&&!u&&_.observe(h),_.observe(e));let N,j=u?Ac(t):null;u&&S();function S(){const w=Ac(t);j&&!J4(j,w)&&n(),j=w,N=requestAnimationFrame(S)}return n(),()=>{var w;f.forEach(y=>{i&&y.removeEventListener("scroll",n),a&&y.removeEventListener("resize",n)}),p==null||p(),(w=_)==null||w.disconnect(),_=null,u&&cancelAnimationFrame(N)}}const jZ=tZ,NZ=nZ,SZ=XK,EZ=sZ,CZ=JK,FC=QK,kZ=rZ,TZ=(t,e,n)=>{const r=new Map,i={platform:_Z,...n},a={...i.platform,_c:r};return YK(t,e,{...i,platform:a})};var PZ=typeof document<"u",IZ=function(){},Kg=PZ?x.useLayoutEffect:IZ;function Jv(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Jv(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const a=i[r];if(!(a==="_owner"&&t.$$typeof)&&!Jv(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function eM(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function VC(t,e){const n=eM(t);return Math.round(e*n)/n}function n0(t){const e=x.useRef(t);return Kg(()=>{e.current=t}),e}function AZ(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:a,floating:o}={},transform:c=!0,whileElementsMounted:u,open:h}=t,[f,p]=x.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[v,_]=x.useState(r);Jv(v,r)||_(r);const[N,j]=x.useState(null),[S,w]=x.useState(null),y=x.useCallback(U=>{U!==B.current&&(B.current=U,j(U))},[]),E=x.useCallback(U=>{U!==R.current&&(R.current=U,w(U))},[]),I=a||N,D=o||S,B=x.useRef(null),R=x.useRef(null),F=x.useRef(f),V=u!=null,k=n0(u),M=n0(i),O=n0(h),P=x.useCallback(()=>{if(!B.current||!R.current)return;const U={placement:e,strategy:n,middleware:v};M.current&&(U.platform=M.current),TZ(B.current,R.current,U).then(q=>{const H={...q,isPositioned:O.current!==!1};W.current&&!Jv(F.current,H)&&(F.current=H,Hd.flushSync(()=>{p(H)}))})},[v,e,n,M,O]);Kg(()=>{h===!1&&F.current.isPositioned&&(F.current.isPositioned=!1,p(U=>({...U,isPositioned:!1})))},[h]);const W=x.useRef(!1);Kg(()=>(W.current=!0,()=>{W.current=!1}),[]),Kg(()=>{if(I&&(B.current=I),D&&(R.current=D),I&&D){if(k.current)return k.current(I,D,P);P()}},[I,D,P,k,V]);const X=x.useMemo(()=>({reference:B,floating:R,setReference:y,setFloating:E}),[y,E]),ee=x.useMemo(()=>({reference:I,floating:D}),[I,D]),Z=x.useMemo(()=>{const U={position:n,left:0,top:0};if(!ee.floating)return U;const q=VC(ee.floating,f.x),H=VC(ee.floating,f.y);return c?{...U,transform:"translate("+q+"px, "+H+"px)",...eM(ee.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:q,top:H}},[n,c,ee.floating,f.x,f.y]);return x.useMemo(()=>({...f,update:P,refs:X,elements:ee,floatingStyles:Z}),[f,P,X,ee,Z])}const RZ=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?FC({element:r.current,padding:i}).fn(n):{}:r?FC({element:r,padding:i}).fn(n):{}}}},MZ=(t,e)=>({...jZ(t),options:[t,e]}),DZ=(t,e)=>({...NZ(t),options:[t,e]}),OZ=(t,e)=>({...kZ(t),options:[t,e]}),LZ=(t,e)=>({...SZ(t),options:[t,e]}),FZ=(t,e)=>({...EZ(t),options:[t,e]}),VZ=(t,e)=>({...CZ(t),options:[t,e]}),zZ=(t,e)=>({...RZ(t),options:[t,e]});var UZ="Arrow",tM=x.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...a}=t;return s.jsx(ze.svg,{...a,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});tM.displayName=UZ;var $Z=tM;function wy(t){const[e,n]=x.useState(void 0);return Un(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let o,c;if("borderBoxSize"in a){const u=a.borderBoxSize,h=Array.isArray(u)?u[0]:u;o=h.inlineSize,c=h.blockSize}else o=t.offsetWidth,c=t.offsetHeight;n({width:o,height:c})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Yj="Popper",[nM,sh]=jr(Yj),[BZ,rM]=nM(Yj),sM=t=>{const{__scopePopper:e,children:n}=t,[r,i]=x.useState(null);return s.jsx(BZ,{scope:e,anchor:r,onAnchorChange:i,children:n})};sM.displayName=Yj;var iM="PopperAnchor",aM=x.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,a=rM(iM,n),o=x.useRef(null),c=ot(e,o);return x.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:s.jsx(ze.div,{...i,ref:c})});aM.displayName=iM;var Qj="PopperContent",[WZ,qZ]=nM(Qj),oM=x.forwardRef((t,e)=>{var ce,xe,Fe,je,Ce,Re;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:a="center",alignOffset:o=0,arrowPadding:c=0,avoidCollisions:u=!0,collisionBoundary:h=[],collisionPadding:f=0,sticky:p="partial",hideWhenDetached:v=!1,updatePositionStrategy:_="optimized",onPlaced:N,...j}=t,S=rM(Qj,n),[w,y]=x.useState(null),E=ot(e,Me=>y(Me)),[I,D]=x.useState(null),B=wy(I),R=(B==null?void 0:B.width)??0,F=(B==null?void 0:B.height)??0,V=r+(a!=="center"?"-"+a:""),k=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},M=Array.isArray(h)?h:[h],O=M.length>0,P={padding:k,boundary:M.filter(GZ),altBoundary:O},{refs:W,floatingStyles:X,placement:ee,isPositioned:Z,middlewareData:U}=AZ({strategy:"fixed",placement:V,whileElementsMounted:(...Me)=>bZ(...Me,{animationFrame:_==="always"}),elements:{reference:S.anchor},middleware:[MZ({mainAxis:i+F,alignmentAxis:o}),u&&DZ({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?OZ():void 0,...P}),u&&LZ({...P}),FZ({...P,apply:({elements:Me,rects:lt,availableWidth:wt,availableHeight:de})=>{const{width:Ye,height:vt}=lt.reference,an=Me.floating.style;an.setProperty("--radix-popper-available-width",`${wt}px`),an.setProperty("--radix-popper-available-height",`${de}px`),an.setProperty("--radix-popper-anchor-width",`${Ye}px`),an.setProperty("--radix-popper-anchor-height",`${vt}px`)}}),I&&zZ({element:I,padding:c}),KZ({arrowWidth:R,arrowHeight:F}),v&&VZ({strategy:"referenceHidden",...P})]}),[q,H]=uM(ee),Q=dr(N);Un(()=>{Z&&(Q==null||Q())},[Z,Q]);const he=(ce=U.arrow)==null?void 0:ce.x,ye=(xe=U.arrow)==null?void 0:xe.y,Ue=((Fe=U.arrow)==null?void 0:Fe.centerOffset)!==0,[He,re]=x.useState();return Un(()=>{w&&re(window.getComputedStyle(w).zIndex)},[w]),s.jsx("div",{ref:W.setFloating,"data-radix-popper-content-wrapper":"",style:{...X,transform:Z?X.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:He,"--radix-popper-transform-origin":[(je=U.transformOrigin)==null?void 0:je.x,(Ce=U.transformOrigin)==null?void 0:Ce.y].join(" "),...((Re=U.hide)==null?void 0:Re.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:s.jsx(WZ,{scope:n,placedSide:q,onArrowChange:D,arrowX:he,arrowY:ye,shouldHideArrow:Ue,children:s.jsx(ze.div,{"data-side":q,"data-align":H,...j,ref:E,style:{...j.style,animation:Z?void 0:"none"}})})})});oM.displayName=Qj;var lM="PopperArrow",HZ={top:"bottom",right:"left",bottom:"top",left:"right"},cM=x.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,a=qZ(lM,r),o=HZ[a.placedSide];return s.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:s.jsx($Z,{...i,ref:n,style:{...i.style,display:"block"}})})});cM.displayName=lM;function GZ(t){return t!==null}var KZ=t=>({name:"transformOrigin",options:t,fn(e){var S,w,y;const{placement:n,rects:r,middlewareData:i}=e,o=((S=i.arrow)==null?void 0:S.centerOffset)!==0,c=o?0:t.arrowWidth,u=o?0:t.arrowHeight,[h,f]=uM(n),p={start:"0%",center:"50%",end:"100%"}[f],v=(((w=i.arrow)==null?void 0:w.x)??0)+c/2,_=(((y=i.arrow)==null?void 0:y.y)??0)+u/2;let N="",j="";return h==="bottom"?(N=o?p:`${v}px`,j=`${-u}px`):h==="top"?(N=o?p:`${v}px`,j=`${r.floating.height+u}px`):h==="right"?(N=`${-u}px`,j=o?p:`${_}px`):h==="left"&&(N=`${r.floating.width+u}px`,j=o?p:`${_}px`),{data:{x:N,y:j}}}});function uM(t){const[e,n="center"]=t.split("-");return[e,n]}var Xj=sM,by=aM,Jj=oM,eN=cM,ZZ="Portal",tp=x.forwardRef((t,e)=>{var c;const{container:n,...r}=t,[i,a]=x.useState(!1);Un(()=>a(!0),[]);const o=n||i&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return o?UV.createPortal(s.jsx(ze.div,{...r,ref:e}),o):null});tp.displayName=ZZ;function YZ(t,e){return x.useReducer((n,r)=>e[n][r]??n,t)}var Nr=t=>{const{present:e,children:n}=t,r=QZ(e),i=typeof n=="function"?n({present:r.isPresent}):x.Children.only(n),a=ot(r.ref,XZ(i));return typeof n=="function"||r.isPresent?x.cloneElement(i,{ref:a}):null};Nr.displayName="Presence";function QZ(t){const[e,n]=x.useState(),r=x.useRef(null),i=x.useRef(t),a=x.useRef("none"),o=t?"mounted":"unmounted",[c,u]=YZ(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const h=pg(r.current);a.current=c==="mounted"?h:"none"},[c]),Un(()=>{const h=r.current,f=i.current;if(f!==t){const v=a.current,_=pg(h);t?u("MOUNT"):_==="none"||(h==null?void 0:h.display)==="none"?u("UNMOUNT"):u(f&&v!==_?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,u]),Un(()=>{if(e){let h;const f=e.ownerDocument.defaultView??window,p=_=>{const j=pg(r.current).includes(_.animationName);if(_.target===e&&j&&(u("ANIMATION_END"),!i.current)){const S=e.style.animationFillMode;e.style.animationFillMode="forwards",h=f.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=S)})}},v=_=>{_.target===e&&(a.current=pg(r.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",p),e.addEventListener("animationend",p),()=>{f.clearTimeout(h),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",p),e.removeEventListener("animationend",p)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:x.useCallback(h=>{r.current=h?getComputedStyle(h):null,n(h)},[])}}function pg(t){return(t==null?void 0:t.animationName)||"none"}function XZ(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var r0="rovingFocusGroup.onEntryFocus",JZ={bubbles:!1,cancelable:!0},np="RovingFocusGroup",[Jw,dM,eY]=Qm(np),[tY,jy]=jr(np,[eY]),[nY,rY]=tY(np),hM=x.forwardRef((t,e)=>s.jsx(Jw.Provider,{scope:t.__scopeRovingFocusGroup,children:s.jsx(Jw.Slot,{scope:t.__scopeRovingFocusGroup,children:s.jsx(sY,{...t,ref:e})})}));hM.displayName=np;var sY=x.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:u,onEntryFocus:h,preventScrollOnEntryFocus:f=!1,...p}=t,v=x.useRef(null),_=ot(e,v),N=Gc(a),[j,S]=Ts({prop:o,defaultProp:c??null,onChange:u,caller:np}),[w,y]=x.useState(!1),E=dr(h),I=dM(n),D=x.useRef(!1),[B,R]=x.useState(0);return x.useEffect(()=>{const F=v.current;if(F)return F.addEventListener(r0,E),()=>F.removeEventListener(r0,E)},[E]),s.jsx(nY,{scope:n,orientation:r,dir:N,loop:i,currentTabStopId:j,onItemFocus:x.useCallback(F=>S(F),[S]),onItemShiftTab:x.useCallback(()=>y(!0),[]),onFocusableItemAdd:x.useCallback(()=>R(F=>F+1),[]),onFocusableItemRemove:x.useCallback(()=>R(F=>F-1),[]),children:s.jsx(ze.div,{tabIndex:w||B===0?-1:0,"data-orientation":r,...p,ref:_,style:{outline:"none",...t.style},onMouseDown:Ee(t.onMouseDown,()=>{D.current=!0}),onFocus:Ee(t.onFocus,F=>{const V=!D.current;if(F.target===F.currentTarget&&V&&!w){const k=new CustomEvent(r0,JZ);if(F.currentTarget.dispatchEvent(k),!k.defaultPrevented){const M=I().filter(ee=>ee.focusable),O=M.find(ee=>ee.active),P=M.find(ee=>ee.id===j),X=[O,P,...M].filter(Boolean).map(ee=>ee.ref.current);pM(X,f)}}D.current=!1}),onBlur:Ee(t.onBlur,()=>y(!1))})})}),fM="RovingFocusGroupItem",mM=x.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:a,children:o,...c}=t,u=Es(),h=a||u,f=rY(fM,n),p=f.currentTabStopId===h,v=dM(n),{onFocusableItemAdd:_,onFocusableItemRemove:N,currentTabStopId:j}=f;return x.useEffect(()=>{if(r)return _(),()=>N()},[r,_,N]),s.jsx(Jw.ItemSlot,{scope:n,id:h,focusable:r,active:i,children:s.jsx(ze.span,{tabIndex:p?0:-1,"data-orientation":f.orientation,...c,ref:e,onMouseDown:Ee(t.onMouseDown,S=>{r?f.onItemFocus(h):S.preventDefault()}),onFocus:Ee(t.onFocus,()=>f.onItemFocus(h)),onKeyDown:Ee(t.onKeyDown,S=>{if(S.key==="Tab"&&S.shiftKey){f.onItemShiftTab();return}if(S.target!==S.currentTarget)return;const w=oY(S,f.orientation,f.dir);if(w!==void 0){if(S.metaKey||S.ctrlKey||S.altKey||S.shiftKey)return;S.preventDefault();let E=v().filter(I=>I.focusable).map(I=>I.ref.current);if(w==="last")E.reverse();else if(w==="prev"||w==="next"){w==="prev"&&E.reverse();const I=E.indexOf(S.currentTarget);E=f.loop?lY(E,I+1):E.slice(I+1)}setTimeout(()=>pM(E))}}),children:typeof o=="function"?o({isCurrentTabStop:p,hasTabStop:j!=null}):o})})});mM.displayName=fM;var iY={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function aY(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function oY(t,e,n){const r=aY(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return iY[r]}function pM(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function lY(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var gM=hM,vM=mM,cY=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Nu=new WeakMap,gg=new WeakMap,vg={},s0=0,xM=function(t){return t&&(t.host||xM(t.parentNode))},uY=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=xM(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},dY=function(t,e,n,r){var i=uY(e,Array.isArray(t)?t:[t]);vg[n]||(vg[n]=new WeakMap);var a=vg[n],o=[],c=new Set,u=new Set(i),h=function(p){!p||c.has(p)||(c.add(p),h(p.parentNode))};i.forEach(h);var f=function(p){!p||u.has(p)||Array.prototype.forEach.call(p.children,function(v){if(c.has(v))f(v);else try{var _=v.getAttribute(r),N=_!==null&&_!=="false",j=(Nu.get(v)||0)+1,S=(a.get(v)||0)+1;Nu.set(v,j),a.set(v,S),o.push(v),j===1&&N&&gg.set(v,!0),S===1&&v.setAttribute(n,"true"),N||v.setAttribute(r,"true")}catch(w){console.error("aria-hidden: cannot operate on ",v,w)}})};return f(e),c.clear(),s0++,function(){o.forEach(function(p){var v=Nu.get(p)-1,_=a.get(p)-1;Nu.set(p,v),a.set(p,_),v||(gg.has(p)||p.removeAttribute(r),gg.delete(p)),_||p.removeAttribute(n)}),s0--,s0||(Nu=new WeakMap,Nu=new WeakMap,gg=new WeakMap,vg={})}},Ny=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=cY(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),dY(r,i,n,"aria-hidden")):function(){return null}},Zg="right-scroll-bar-position",Yg="width-before-scroll-bar",hY="with-scroll-bars-hidden",fY="--removed-body-scroll-bar-size";function i0(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function mY(t,e){var n=x.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var pY=typeof window<"u"?x.useLayoutEffect:x.useEffect,zC=new WeakMap;function gY(t,e){var n=mY(null,function(r){return t.forEach(function(i){return i0(i,r)})});return pY(function(){var r=zC.get(n);if(r){var i=new Set(r),a=new Set(t),o=n.current;i.forEach(function(c){a.has(c)||i0(c,null)}),a.forEach(function(c){i.has(c)||i0(c,o)})}zC.set(n,t)},[t]),n}function vY(t){return t}function xY(t,e){e===void 0&&(e=vY);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(a){var o=e(a,r);return n.push(o),function(){n=n.filter(function(c){return c!==o})}},assignSyncMedium:function(a){for(r=!0;n.length;){var o=n;n=[],o.forEach(a)}n={push:function(c){return a(c)},filter:function(){return n}}},assignMedium:function(a){r=!0;var o=[];if(n.length){var c=n;n=[],c.forEach(a),o=n}var u=function(){var f=o;o=[],f.forEach(a)},h=function(){return Promise.resolve().then(u)};h(),n={push:function(f){o.push(f),h()},filter:function(f){return o=o.filter(f),n}}}};return i}function yY(t){t===void 0&&(t={});var e=xY(null);return e.options=Wi({async:!0,ssr:!1},t),e}var yM=function(t){var e=t.sideCar,n=Mm(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return x.createElement(r,Wi({},n))};yM.isSideCarExport=!0;function _Y(t,e){return t.useMedium(e),yM}var _M=yY(),a0=function(){},Sy=x.forwardRef(function(t,e){var n=x.useRef(null),r=x.useState({onScrollCapture:a0,onWheelCapture:a0,onTouchMoveCapture:a0}),i=r[0],a=r[1],o=t.forwardProps,c=t.children,u=t.className,h=t.removeScrollBar,f=t.enabled,p=t.shards,v=t.sideCar,_=t.noRelative,N=t.noIsolation,j=t.inert,S=t.allowPinchZoom,w=t.as,y=w===void 0?"div":w,E=t.gapMode,I=Mm(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),D=v,B=gY([n,e]),R=Wi(Wi({},I),i);return x.createElement(x.Fragment,null,f&&x.createElement(D,{sideCar:_M,removeScrollBar:h,shards:p,noRelative:_,noIsolation:N,inert:j,setCallbacks:a,allowPinchZoom:!!S,lockRef:n,gapMode:E}),o?x.cloneElement(x.Children.only(c),Wi(Wi({},R),{ref:B})):x.createElement(y,Wi({},R,{className:u,ref:B}),c))});Sy.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Sy.classNames={fullWidth:Yg,zeroRight:Zg};var wY=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function bY(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=wY();return e&&t.setAttribute("nonce",e),t}function jY(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function NY(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var SY=function(){var t=0,e=null;return{add:function(n){t==0&&(e=bY())&&(jY(e,n),NY(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},EY=function(){var t=SY();return function(e,n){x.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},wM=function(){var t=EY(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},CY={left:0,top:0,right:0,gap:0},o0=function(t){return parseInt(t||"",10)||0},kY=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[o0(n),o0(r),o0(i)]},TY=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return CY;var e=kY(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},PY=wM(),od="data-scroll-locked",IY=function(t,e,n,r){var i=t.left,a=t.top,o=t.right,c=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(hY,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(c,"px ").concat(r,`;
  }
  body[`).concat(od,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(c,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Zg,` {
    right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(Yg,` {
    margin-right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(Zg," .").concat(Zg,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Yg," .").concat(Yg,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(od,`] {
    `).concat(fY,": ").concat(c,`px;
  }
`)},UC=function(){var t=parseInt(document.body.getAttribute(od)||"0",10);return isFinite(t)?t:0},AY=function(){x.useEffect(function(){return document.body.setAttribute(od,(UC()+1).toString()),function(){var t=UC()-1;t<=0?document.body.removeAttribute(od):document.body.setAttribute(od,t.toString())}},[])},RY=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;AY();var a=x.useMemo(function(){return TY(i)},[i]);return x.createElement(PY,{styles:IY(a,!e,i,n?"":"!important")})},e1=!1;if(typeof window<"u")try{var xg=Object.defineProperty({},"passive",{get:function(){return e1=!0,!0}});window.addEventListener("test",xg,xg),window.removeEventListener("test",xg,xg)}catch{e1=!1}var Su=e1?{passive:!1}:!1,MY=function(t){return t.tagName==="TEXTAREA"},bM=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!MY(t)&&n[e]==="visible")},DY=function(t){return bM(t,"overflowY")},OY=function(t){return bM(t,"overflowX")},$C=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=jM(t,r);if(i){var a=NM(t,r),o=a[1],c=a[2];if(o>c)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},LY=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},FY=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},jM=function(t,e){return t==="v"?DY(e):OY(e)},NM=function(t,e){return t==="v"?LY(e):FY(e)},VY=function(t,e){return t==="h"&&e==="rtl"?-1:1},zY=function(t,e,n,r,i){var a=VY(t,window.getComputedStyle(e).direction),o=a*r,c=n.target,u=e.contains(c),h=!1,f=o>0,p=0,v=0;do{if(!c)break;var _=NM(t,c),N=_[0],j=_[1],S=_[2],w=j-S-a*N;(N||w)&&jM(t,c)&&(p+=w,v+=N);var y=c.parentNode;c=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!u&&c!==document.body||u&&(e.contains(c)||e===c));return(f&&Math.abs(p)<1||!f&&Math.abs(v)<1)&&(h=!0),h},yg=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},BC=function(t){return[t.deltaX,t.deltaY]},WC=function(t){return t&&"current"in t?t.current:t},UY=function(t,e){return t[0]===e[0]&&t[1]===e[1]},$Y=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},BY=0,Eu=[];function WY(t){var e=x.useRef([]),n=x.useRef([0,0]),r=x.useRef(),i=x.useState(BY++)[0],a=x.useState(wM)[0],o=x.useRef(t);x.useEffect(function(){o.current=t},[t]),x.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var j=_U([t.lockRef.current],(t.shards||[]).map(WC),!0).filter(Boolean);return j.forEach(function(S){return S.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),j.forEach(function(S){return S.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var c=x.useCallback(function(j,S){if("touches"in j&&j.touches.length===2||j.type==="wheel"&&j.ctrlKey)return!o.current.allowPinchZoom;var w=yg(j),y=n.current,E="deltaX"in j?j.deltaX:y[0]-w[0],I="deltaY"in j?j.deltaY:y[1]-w[1],D,B=j.target,R=Math.abs(E)>Math.abs(I)?"h":"v";if("touches"in j&&R==="h"&&B.type==="range")return!1;var F=$C(R,B);if(!F)return!0;if(F?D=R:(D=R==="v"?"h":"v",F=$C(R,B)),!F)return!1;if(!r.current&&"changedTouches"in j&&(E||I)&&(r.current=D),!D)return!0;var V=r.current||D;return zY(V,S,j,V==="h"?E:I)},[]),u=x.useCallback(function(j){var S=j;if(!(!Eu.length||Eu[Eu.length-1]!==a)){var w="deltaY"in S?BC(S):yg(S),y=e.current.filter(function(D){return D.name===S.type&&(D.target===S.target||S.target===D.shadowParent)&&UY(D.delta,w)})[0];if(y&&y.should){S.cancelable&&S.preventDefault();return}if(!y){var E=(o.current.shards||[]).map(WC).filter(Boolean).filter(function(D){return D.contains(S.target)}),I=E.length>0?c(S,E[0]):!o.current.noIsolation;I&&S.cancelable&&S.preventDefault()}}},[]),h=x.useCallback(function(j,S,w,y){var E={name:j,delta:S,target:w,should:y,shadowParent:qY(w)};e.current.push(E),setTimeout(function(){e.current=e.current.filter(function(I){return I!==E})},1)},[]),f=x.useCallback(function(j){n.current=yg(j),r.current=void 0},[]),p=x.useCallback(function(j){h(j.type,BC(j),j.target,c(j,t.lockRef.current))},[]),v=x.useCallback(function(j){h(j.type,yg(j),j.target,c(j,t.lockRef.current))},[]);x.useEffect(function(){return Eu.push(a),t.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:v}),document.addEventListener("wheel",u,Su),document.addEventListener("touchmove",u,Su),document.addEventListener("touchstart",f,Su),function(){Eu=Eu.filter(function(j){return j!==a}),document.removeEventListener("wheel",u,Su),document.removeEventListener("touchmove",u,Su),document.removeEventListener("touchstart",f,Su)}},[]);var _=t.removeScrollBar,N=t.inert;return x.createElement(x.Fragment,null,N?x.createElement(a,{styles:$Y(i)}):null,_?x.createElement(RY,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function qY(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const HY=_Y(_M,WY);var rp=x.forwardRef(function(t,e){return x.createElement(Sy,Wi({},t,{ref:e,sideCar:HY}))});rp.classNames=Sy.classNames;var t1=["Enter"," "],GY=["ArrowDown","PageUp","Home"],SM=["ArrowUp","PageDown","End"],KY=[...GY,...SM],ZY={ltr:[...t1,"ArrowRight"],rtl:[...t1,"ArrowLeft"]},YY={ltr:["ArrowLeft"],rtl:["ArrowRight"]},sp="Menu",[xm,QY,XY]=Qm(sp),[Kc,EM]=jr(sp,[XY,sh,jy]),Ey=sh(),CM=jy(),[JY,Zc]=Kc(sp),[eQ,ip]=Kc(sp),kM=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:i,onOpenChange:a,modal:o=!0}=t,c=Ey(e),[u,h]=x.useState(null),f=x.useRef(!1),p=dr(a),v=Gc(i);return x.useEffect(()=>{const _=()=>{f.current=!0,document.addEventListener("pointerdown",N,{capture:!0,once:!0}),document.addEventListener("pointermove",N,{capture:!0,once:!0})},N=()=>f.current=!1;return document.addEventListener("keydown",_,{capture:!0}),()=>{document.removeEventListener("keydown",_,{capture:!0}),document.removeEventListener("pointerdown",N,{capture:!0}),document.removeEventListener("pointermove",N,{capture:!0})}},[]),s.jsx(Xj,{...c,children:s.jsx(JY,{scope:e,open:n,onOpenChange:p,content:u,onContentChange:h,children:s.jsx(eQ,{scope:e,onClose:x.useCallback(()=>p(!1),[p]),isUsingKeyboardRef:f,dir:v,modal:o,children:r})})})};kM.displayName=sp;var tQ="MenuAnchor",tN=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=Ey(n);return s.jsx(by,{...i,...r,ref:e})});tN.displayName=tQ;var nN="MenuPortal",[nQ,TM]=Kc(nN,{forceMount:void 0}),PM=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:i}=t,a=Zc(nN,e);return s.jsx(nQ,{scope:e,forceMount:n,children:s.jsx(Nr,{present:n||a.open,children:s.jsx(tp,{asChild:!0,container:i,children:r})})})};PM.displayName=nN;var Ys="MenuContent",[rQ,rN]=Kc(Ys),IM=x.forwardRef((t,e)=>{const n=TM(Ys,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,a=Zc(Ys,t.__scopeMenu),o=ip(Ys,t.__scopeMenu);return s.jsx(xm.Provider,{scope:t.__scopeMenu,children:s.jsx(Nr,{present:r||a.open,children:s.jsx(xm.Slot,{scope:t.__scopeMenu,children:o.modal?s.jsx(sQ,{...i,ref:e}):s.jsx(iQ,{...i,ref:e})})})})}),sQ=x.forwardRef((t,e)=>{const n=Zc(Ys,t.__scopeMenu),r=x.useRef(null),i=ot(e,r);return x.useEffect(()=>{const a=r.current;if(a)return Ny(a)},[]),s.jsx(sN,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Ee(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),iQ=x.forwardRef((t,e)=>{const n=Zc(Ys,t.__scopeMenu);return s.jsx(sN,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),aQ=yl("MenuContent.ScrollLock"),sN=x.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:c,onEntryFocus:u,onEscapeKeyDown:h,onPointerDownOutside:f,onFocusOutside:p,onInteractOutside:v,onDismiss:_,disableOutsideScroll:N,...j}=t,S=Zc(Ys,n),w=ip(Ys,n),y=Ey(n),E=CM(n),I=QY(n),[D,B]=x.useState(null),R=x.useRef(null),F=ot(e,R,S.onContentChange),V=x.useRef(0),k=x.useRef(""),M=x.useRef(0),O=x.useRef(null),P=x.useRef("right"),W=x.useRef(0),X=N?rp:x.Fragment,ee=N?{as:aQ,allowPinchZoom:!0}:void 0,Z=q=>{var ce,xe;const H=k.current+q,Q=I().filter(Fe=>!Fe.disabled),he=document.activeElement,ye=(ce=Q.find(Fe=>Fe.ref.current===he))==null?void 0:ce.textValue,Ue=Q.map(Fe=>Fe.textValue),He=xQ(Ue,H,ye),re=(xe=Q.find(Fe=>Fe.textValue===He))==null?void 0:xe.ref.current;(function Fe(je){k.current=je,window.clearTimeout(V.current),je!==""&&(V.current=window.setTimeout(()=>Fe(""),1e3))})(H),re&&setTimeout(()=>re.focus())};x.useEffect(()=>()=>window.clearTimeout(V.current),[]),vy();const U=x.useCallback(q=>{var Q,he;return P.current===((Q=O.current)==null?void 0:Q.side)&&_Q(q,(he=O.current)==null?void 0:he.area)},[]);return s.jsx(rQ,{scope:n,searchRef:k,onItemEnter:x.useCallback(q=>{U(q)&&q.preventDefault()},[U]),onItemLeave:x.useCallback(q=>{var H;U(q)||((H=R.current)==null||H.focus(),B(null))},[U]),onTriggerLeave:x.useCallback(q=>{U(q)&&q.preventDefault()},[U]),pointerGraceTimerRef:M,onPointerGraceIntentChange:x.useCallback(q=>{O.current=q},[]),children:s.jsx(X,{...ee,children:s.jsx(Jm,{asChild:!0,trapped:i,onMountAutoFocus:Ee(a,q=>{var H;q.preventDefault(),(H=R.current)==null||H.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:s.jsx(Xm,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:h,onPointerDownOutside:f,onFocusOutside:p,onInteractOutside:v,onDismiss:_,children:s.jsx(gM,{asChild:!0,...E,dir:w.dir,orientation:"vertical",loop:r,currentTabStopId:D,onCurrentTabStopIdChange:B,onEntryFocus:Ee(u,q=>{w.isUsingKeyboardRef.current||q.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(Jj,{role:"menu","aria-orientation":"vertical","data-state":GM(S.open),"data-radix-menu-content":"",dir:w.dir,...y,...j,ref:F,style:{outline:"none",...j.style},onKeyDown:Ee(j.onKeyDown,q=>{const Q=q.target.closest("[data-radix-menu-content]")===q.currentTarget,he=q.ctrlKey||q.altKey||q.metaKey,ye=q.key.length===1;Q&&(q.key==="Tab"&&q.preventDefault(),!he&&ye&&Z(q.key));const Ue=R.current;if(q.target!==Ue||!KY.includes(q.key))return;q.preventDefault();const re=I().filter(ce=>!ce.disabled).map(ce=>ce.ref.current);SM.includes(q.key)&&re.reverse(),gQ(re)}),onBlur:Ee(t.onBlur,q=>{q.currentTarget.contains(q.target)||(window.clearTimeout(V.current),k.current="")}),onPointerMove:Ee(t.onPointerMove,ym(q=>{const H=q.target,Q=W.current!==q.clientX;if(q.currentTarget.contains(H)&&Q){const he=q.clientX>W.current?"right":"left";P.current=he,W.current=q.clientX}}))})})})})})})});IM.displayName=Ys;var oQ="MenuGroup",iN=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return s.jsx(ze.div,{role:"group",...r,ref:e})});iN.displayName=oQ;var lQ="MenuLabel",AM=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return s.jsx(ze.div,{...r,ref:e})});AM.displayName=lQ;var ex="MenuItem",qC="menu.itemSelect",Cy=x.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...i}=t,a=x.useRef(null),o=ip(ex,t.__scopeMenu),c=rN(ex,t.__scopeMenu),u=ot(e,a),h=x.useRef(!1),f=()=>{const p=a.current;if(!n&&p){const v=new CustomEvent(qC,{bubbles:!0,cancelable:!0});p.addEventListener(qC,_=>r==null?void 0:r(_),{once:!0}),U4(p,v),v.defaultPrevented?h.current=!1:o.onClose()}};return s.jsx(RM,{...i,ref:u,disabled:n,onClick:Ee(t.onClick,f),onPointerDown:p=>{var v;(v=t.onPointerDown)==null||v.call(t,p),h.current=!0},onPointerUp:Ee(t.onPointerUp,p=>{var v;h.current||(v=p.currentTarget)==null||v.click()}),onKeyDown:Ee(t.onKeyDown,p=>{const v=c.searchRef.current!=="";n||v&&p.key===" "||t1.includes(p.key)&&(p.currentTarget.click(),p.preventDefault())})})});Cy.displayName=ex;var RM=x.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...a}=t,o=rN(ex,n),c=CM(n),u=x.useRef(null),h=ot(e,u),[f,p]=x.useState(!1),[v,_]=x.useState("");return x.useEffect(()=>{const N=u.current;N&&_((N.textContent??"").trim())},[a.children]),s.jsx(xm.ItemSlot,{scope:n,disabled:r,textValue:i??v,children:s.jsx(vM,{asChild:!0,...c,focusable:!r,children:s.jsx(ze.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:h,onPointerMove:Ee(t.onPointerMove,ym(N=>{r?o.onItemLeave(N):(o.onItemEnter(N),N.defaultPrevented||N.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ee(t.onPointerLeave,ym(N=>o.onItemLeave(N))),onFocus:Ee(t.onFocus,()=>p(!0)),onBlur:Ee(t.onBlur,()=>p(!1))})})})}),cQ="MenuCheckboxItem",MM=x.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...i}=t;return s.jsx(VM,{scope:t.__scopeMenu,checked:n,children:s.jsx(Cy,{role:"menuitemcheckbox","aria-checked":tx(n)?"mixed":n,...i,ref:e,"data-state":oN(n),onSelect:Ee(i.onSelect,()=>r==null?void 0:r(tx(n)?!0:!n),{checkForDefaultPrevented:!1})})})});MM.displayName=cQ;var DM="MenuRadioGroup",[uQ,dQ]=Kc(DM,{value:void 0,onValueChange:()=>{}}),OM=x.forwardRef((t,e)=>{const{value:n,onValueChange:r,...i}=t,a=dr(r);return s.jsx(uQ,{scope:t.__scopeMenu,value:n,onValueChange:a,children:s.jsx(iN,{...i,ref:e})})});OM.displayName=DM;var LM="MenuRadioItem",FM=x.forwardRef((t,e)=>{const{value:n,...r}=t,i=dQ(LM,t.__scopeMenu),a=n===i.value;return s.jsx(VM,{scope:t.__scopeMenu,checked:a,children:s.jsx(Cy,{role:"menuitemradio","aria-checked":a,...r,ref:e,"data-state":oN(a),onSelect:Ee(r.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,n)},{checkForDefaultPrevented:!1})})})});FM.displayName=LM;var aN="MenuItemIndicator",[VM,hQ]=Kc(aN,{checked:!1}),zM=x.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...i}=t,a=hQ(aN,n);return s.jsx(Nr,{present:r||tx(a.checked)||a.checked===!0,children:s.jsx(ze.span,{...i,ref:e,"data-state":oN(a.checked)})})});zM.displayName=aN;var fQ="MenuSeparator",UM=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return s.jsx(ze.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});UM.displayName=fQ;var mQ="MenuArrow",$M=x.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=Ey(n);return s.jsx(eN,{...i,...r,ref:e})});$M.displayName=mQ;var pQ="MenuSub",[Xle,BM]=Kc(pQ),gf="MenuSubTrigger",WM=x.forwardRef((t,e)=>{const n=Zc(gf,t.__scopeMenu),r=ip(gf,t.__scopeMenu),i=BM(gf,t.__scopeMenu),a=rN(gf,t.__scopeMenu),o=x.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:u}=a,h={__scopeMenu:t.__scopeMenu},f=x.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return x.useEffect(()=>f,[f]),x.useEffect(()=>{const p=c.current;return()=>{window.clearTimeout(p),u(null)}},[c,u]),s.jsx(tN,{asChild:!0,...h,children:s.jsx(RM,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":GM(n.open),...t,ref:py(e,i.onTriggerChange),onClick:p=>{var v;(v=t.onClick)==null||v.call(t,p),!(t.disabled||p.defaultPrevented)&&(p.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Ee(t.onPointerMove,ym(p=>{a.onItemEnter(p),!p.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100))})),onPointerLeave:Ee(t.onPointerLeave,ym(p=>{var _,N;f();const v=(_=n.content)==null?void 0:_.getBoundingClientRect();if(v){const j=(N=n.content)==null?void 0:N.dataset.side,S=j==="right",w=S?-5:5,y=v[S?"left":"right"],E=v[S?"right":"left"];a.onPointerGraceIntentChange({area:[{x:p.clientX+w,y:p.clientY},{x:y,y:v.top},{x:E,y:v.top},{x:E,y:v.bottom},{x:y,y:v.bottom}],side:j}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(p),p.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:Ee(t.onKeyDown,p=>{var _;const v=a.searchRef.current!=="";t.disabled||v&&p.key===" "||ZY[r.dir].includes(p.key)&&(n.onOpenChange(!0),(_=n.content)==null||_.focus(),p.preventDefault())})})})});WM.displayName=gf;var qM="MenuSubContent",HM=x.forwardRef((t,e)=>{const n=TM(Ys,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,a=Zc(Ys,t.__scopeMenu),o=ip(Ys,t.__scopeMenu),c=BM(qM,t.__scopeMenu),u=x.useRef(null),h=ot(e,u);return s.jsx(xm.Provider,{scope:t.__scopeMenu,children:s.jsx(Nr,{present:r||a.open,children:s.jsx(xm.Slot,{scope:t.__scopeMenu,children:s.jsx(sN,{id:c.contentId,"aria-labelledby":c.triggerId,...i,ref:h,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var p;o.isUsingKeyboardRef.current&&((p=u.current)==null||p.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:Ee(t.onFocusOutside,f=>{f.target!==c.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:Ee(t.onEscapeKeyDown,f=>{o.onClose(),f.preventDefault()}),onKeyDown:Ee(t.onKeyDown,f=>{var _;const p=f.currentTarget.contains(f.target),v=YY[o.dir].includes(f.key);p&&v&&(a.onOpenChange(!1),(_=c.trigger)==null||_.focus(),f.preventDefault())})})})})})});HM.displayName=qM;function GM(t){return t?"open":"closed"}function tx(t){return t==="indeterminate"}function oN(t){return tx(t)?"indeterminate":t?"checked":"unchecked"}function gQ(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function vQ(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function xQ(t,e,n){const i=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let o=vQ(t,Math.max(a,0));i.length===1&&(o=o.filter(h=>h!==n));const u=o.find(h=>h.toLowerCase().startsWith(i.toLowerCase()));return u!==n?u:void 0}function yQ(t,e){const{x:n,y:r}=t;let i=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const c=e[a],u=e[o],h=c.x,f=c.y,p=u.x,v=u.y;f>r!=v>r&&n<(p-h)*(r-f)/(v-f)+h&&(i=!i)}return i}function _Q(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return yQ(n,e)}function ym(t){return e=>e.pointerType==="mouse"?t(e):void 0}var wQ=kM,bQ=tN,jQ=PM,NQ=IM,SQ=iN,EQ=AM,CQ=Cy,kQ=MM,TQ=OM,PQ=FM,IQ=zM,AQ=UM,RQ=$M,MQ=WM,DQ=HM,ky="DropdownMenu",[OQ,Jle]=jr(ky,[EM]),Xr=EM(),[LQ,KM]=OQ(ky),ZM=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:i,defaultOpen:a,onOpenChange:o,modal:c=!0}=t,u=Xr(e),h=x.useRef(null),[f,p]=Ts({prop:i,defaultProp:a??!1,onChange:o,caller:ky});return s.jsx(LQ,{scope:e,triggerId:Es(),triggerRef:h,contentId:Es(),open:f,onOpenChange:p,onOpenToggle:x.useCallback(()=>p(v=>!v),[p]),modal:c,children:s.jsx(wQ,{...u,open:f,onOpenChange:p,dir:r,modal:c,children:n})})};ZM.displayName=ky;var YM="DropdownMenuTrigger",QM=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=t,a=KM(YM,n),o=Xr(n);return s.jsx(bQ,{asChild:!0,...o,children:s.jsx(ze.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:py(e,a.triggerRef),onPointerDown:Ee(t.onPointerDown,c=>{!r&&c.button===0&&c.ctrlKey===!1&&(a.onOpenToggle(),a.open||c.preventDefault())}),onKeyDown:Ee(t.onKeyDown,c=>{r||(["Enter"," "].includes(c.key)&&a.onOpenToggle(),c.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});QM.displayName=YM;var FQ="DropdownMenuPortal",XM=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Xr(e);return s.jsx(jQ,{...r,...n})};XM.displayName=FQ;var JM="DropdownMenuContent",eD=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=KM(JM,n),a=Xr(n),o=x.useRef(!1);return s.jsx(NQ,{id:i.contentId,"aria-labelledby":i.triggerId,...a,...r,ref:e,onCloseAutoFocus:Ee(t.onCloseAutoFocus,c=>{var u;o.current||(u=i.triggerRef.current)==null||u.focus(),o.current=!1,c.preventDefault()}),onInteractOutside:Ee(t.onInteractOutside,c=>{const u=c.detail.originalEvent,h=u.button===0&&u.ctrlKey===!0,f=u.button===2||h;(!i.modal||f)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});eD.displayName=JM;var VQ="DropdownMenuGroup",zQ=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Xr(n);return s.jsx(SQ,{...i,...r,ref:e})});zQ.displayName=VQ;var UQ="DropdownMenuLabel",tD=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Xr(n);return s.jsx(EQ,{...i,...r,ref:e})});tD.displayName=UQ;var $Q="DropdownMenuItem",nD=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Xr(n);return s.jsx(CQ,{...i,...r,ref:e})});nD.displayName=$Q;var BQ="DropdownMenuCheckboxItem",rD=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Xr(n);return s.jsx(kQ,{...i,...r,ref:e})});rD.displayName=BQ;var WQ="DropdownMenuRadioGroup",qQ=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Xr(n);return s.jsx(TQ,{...i,...r,ref:e})});qQ.displayName=WQ;var HQ="DropdownMenuRadioItem",sD=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Xr(n);return s.jsx(PQ,{...i,...r,ref:e})});sD.displayName=HQ;var GQ="DropdownMenuItemIndicator",iD=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Xr(n);return s.jsx(IQ,{...i,...r,ref:e})});iD.displayName=GQ;var KQ="DropdownMenuSeparator",aD=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Xr(n);return s.jsx(AQ,{...i,...r,ref:e})});aD.displayName=KQ;var ZQ="DropdownMenuArrow",YQ=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Xr(n);return s.jsx(RQ,{...i,...r,ref:e})});YQ.displayName=ZQ;var QQ="DropdownMenuSubTrigger",oD=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Xr(n);return s.jsx(MQ,{...i,...r,ref:e})});oD.displayName=QQ;var XQ="DropdownMenuSubContent",lD=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Xr(n);return s.jsx(DQ,{...i,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});lD.displayName=XQ;var JQ=ZM,eX=QM,tX=XM,cD=eD,uD=tD,dD=nD,hD=rD,fD=sD,mD=iD,pD=aD,gD=oD,vD=lD;function Pl(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var nX=["color"],rX=x.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Pl(t,nX);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),x.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),sX=["color"],lN=x.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Pl(t,sX);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),x.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),iX=["color"],xD=x.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Pl(t,iX);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),x.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),aX=["color"],oX=x.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Pl(t,aX);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),x.createElement("path",{d:"M8.84182 3.13514C9.04327 3.32401 9.05348 3.64042 8.86462 3.84188L5.43521 7.49991L8.86462 11.1579C9.05348 11.3594 9.04327 11.6758 8.84182 11.8647C8.64036 12.0535 8.32394 12.0433 8.13508 11.8419L4.38508 7.84188C4.20477 7.64955 4.20477 7.35027 4.38508 7.15794L8.13508 3.15794C8.32394 2.95648 8.64036 2.94628 8.84182 3.13514Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),lX=["color"],yD=x.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Pl(t,lX);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),x.createElement("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),cX=["color"],uX=x.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Pl(t,cX);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),x.createElement("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),dX=["color"],hX=x.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Pl(t,dX);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),x.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),fX=["color"],mX=x.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Pl(t,fX);return x.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),x.createElement("path",{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:r}))});const n1=JQ,r1=eX,pX=x.forwardRef(({className:t,inset:e,children:n,...r},i)=>s.jsxs(gD,{ref:i,className:Xe("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[n,s.jsx(yD,{className:"ml-auto h-4 w-4"})]}));pX.displayName=gD.displayName;const gX=x.forwardRef(({className:t,...e},n)=>s.jsx(vD,{ref:n,className:Xe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));gX.displayName=vD.displayName;const nx=x.forwardRef(({className:t,sideOffset:e=4,...n},r)=>s.jsx(tX,{children:s.jsx(cD,{ref:r,sideOffset:e,className:Xe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));nx.displayName=cD.displayName;const Xt=x.forwardRef(({className:t,inset:e,...n},r)=>s.jsx(dD,{ref:r,className:Xe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));Xt.displayName=dD.displayName;const vX=x.forwardRef(({className:t,children:e,checked:n,...r},i)=>s.jsxs(hD,{ref:i,className:Xe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(mD,{children:s.jsx(lN,{className:"h-4 w-4"})})}),e]}));vX.displayName=hD.displayName;const xX=x.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(fD,{ref:r,className:Xe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(mD,{children:s.jsx(mX,{className:"h-4 w-4 fill-current"})})}),e]}));xX.displayName=fD.displayName;const yX=x.forwardRef(({className:t,inset:e,...n},r)=>s.jsx(uD,{ref:r,className:Xe("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));yX.displayName=uD.displayName;const zi=x.forwardRef(({className:t,...e},n)=>s.jsx(pD,{ref:n,className:Xe("-mx-1 my-1 h-px bg-muted",t),...e}));zi.displayName=pD.displayName;var _D={exports:{}},wD={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Id=x;function _X(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wX=typeof Object.is=="function"?Object.is:_X,bX=Id.useState,jX=Id.useEffect,NX=Id.useLayoutEffect,SX=Id.useDebugValue;function EX(t,e){var n=e(),r=bX({inst:{value:n,getSnapshot:e}}),i=r[0].inst,a=r[1];return NX(function(){i.value=n,i.getSnapshot=e,l0(i)&&a({inst:i})},[t,n,e]),jX(function(){return l0(i)&&a({inst:i}),t(function(){l0(i)&&a({inst:i})})},[t]),SX(n),n}function l0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!wX(t,n)}catch{return!0}}function CX(t,e){return e()}var kX=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?CX:EX;wD.useSyncExternalStore=Id.useSyncExternalStore!==void 0?Id.useSyncExternalStore:kX;_D.exports=wD;var bD=_D.exports;function TX(){return bD.useSyncExternalStore(PX,()=>!0,()=>!1)}function PX(){return()=>{}}var cN="Avatar",[IX,ece]=jr(cN),[AX,jD]=IX(cN),ND=x.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[i,a]=x.useState("idle");return s.jsx(AX,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:s.jsx(ze.span,{...r,ref:e})})});ND.displayName=cN;var SD="AvatarImage",ED=x.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:i=()=>{},...a}=t,o=jD(SD,n),c=RX(r,a),u=dr(h=>{i(h),o.onImageLoadingStatusChange(h)});return Un(()=>{c!=="idle"&&u(c)},[c,u]),c==="loaded"?s.jsx(ze.img,{...a,ref:e,src:r}):null});ED.displayName=SD;var CD="AvatarFallback",kD=x.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...i}=t,a=jD(CD,n),[o,c]=x.useState(r===void 0);return x.useEffect(()=>{if(r!==void 0){const u=window.setTimeout(()=>c(!0),r);return()=>window.clearTimeout(u)}},[r]),o&&a.imageLoadingStatus!=="loaded"?s.jsx(ze.span,{...i,ref:e}):null});kD.displayName=CD;function HC(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function RX(t,{referrerPolicy:e,crossOrigin:n}){const r=TX(),i=x.useRef(null),a=r?(i.current||(i.current=new window.Image),i.current):null,[o,c]=x.useState(()=>HC(a,t));return Un(()=>{c(HC(a,t))},[a,t]),Un(()=>{const u=p=>()=>{c(p)};if(!a)return;const h=u("loaded"),f=u("error");return a.addEventListener("load",h),a.addEventListener("error",f),e&&(a.referrerPolicy=e),typeof n=="string"&&(a.crossOrigin=n),()=>{a.removeEventListener("load",h),a.removeEventListener("error",f)}},[a,n,e]),o}var TD=ND,PD=ED,ID=kD;const so=x.forwardRef(({className:t,...e},n)=>s.jsx(TD,{ref:n,className:Xe("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));so.displayName=TD.displayName;const io=x.forwardRef(({className:t,...e},n)=>s.jsx(PD,{ref:n,className:Xe("aspect-square h-full w-full",t),...e}));io.displayName=PD.displayName;const ao=x.forwardRef(({className:t,...e},n)=>s.jsx(ID,{ref:n,className:Xe("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));ao.displayName=ID.displayName;const MX=gy("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function et({className:t,variant:e,...n}){return s.jsx("div",{className:Xe(MX({variant:e}),t),...n})}const DX={},GC=t=>{let e;const n=new Set,r=(f,p)=>{const v=typeof f=="function"?f(e):f;if(!Object.is(v,e)){const _=e;e=p??(typeof v!="object"||v===null)?v:Object.assign({},e,v),n.forEach(N=>N(e,_))}},i=()=>e,u={setState:r,getState:i,getInitialState:()=>h,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{(DX?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},h=e=t(r,i,u);return u},OX=t=>t?GC(t):GC;var AD={exports:{}},RD={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ty=x,LX=bD;function FX(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var VX=typeof Object.is=="function"?Object.is:FX,zX=LX.useSyncExternalStore,UX=Ty.useRef,$X=Ty.useEffect,BX=Ty.useMemo,WX=Ty.useDebugValue;RD.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var a=UX(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=BX(function(){function u(_){if(!h){if(h=!0,f=_,_=r(_),i!==void 0&&o.hasValue){var N=o.value;if(i(N,_))return p=N}return p=_}if(N=p,VX(f,_))return N;var j=r(_);return i!==void 0&&i(N,j)?(f=_,N):(f=_,p=j)}var h=!1,f,p,v=n===void 0?null:n;return[function(){return u(e())},v===null?void 0:function(){return u(v())}]},[e,n,r,i]);var c=zX(t,a[0],a[1]);return $X(function(){o.hasValue=!0,o.value=c},[c]),WX(c),c};AD.exports=RD;var qX=AD.exports;const HX=Sm(qX),MD={},{useDebugValue:GX}=Pe,{useSyncExternalStoreWithSelector:KX}=HX;let KC=!1;const ZX=t=>t;function YX(t,e=ZX,n){(MD?"production":void 0)!=="production"&&n&&!KC&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),KC=!0);const r=KX(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return GX(r),r}const ZC=t=>{(MD?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?OX(t):t,n=(r,i)=>YX(e,r,i);return Object.assign(n,e),n},ih=t=>t?ZC(t):ZC,Gl=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},QX=(t,e,n)=>{const r=[t,e].sort();return`${r[0]}_${r[1]}_${n}`},XX=async(t,e,n,r,i,a,o)=>{try{if(!t||!t.includes("@")){console.log("No valid email address for notification");return}const c=`${window.location.origin}/messages?conversation=${o}`,u=await fetch("/api/send-message-notification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recipientEmail:t,recipientName:e,senderName:n,senderUniversity:r,listingTitle:i,messagePreview:a,conversationUrl:c})});u.ok?console.log("Email notification sent successfully"):console.error("Failed to send email notification:",await u.text())}catch(c){console.error("Error sending email notification:",c)}},Py=ih((t,e)=>({conversations:[],currentConversation:null,messages:[],loading:!1,fetchConversations:n=>{t({loading:!0});const{unsubscribeConversations:r}=e();r&&r();try{const i=vn(Ft(De,"conversations"),Zn("participants","array-contains",n)),a=uC(i,o=>{const c=[];o.docs.forEach(u=>{const h=u.data();h.deletedFor&&h.deletedFor.includes(n)||h.blockedBy&&h.blockedBy.includes(n)||c.push({id:u.id,participants:h.participants||[],listingId:h.listingId||"",listingTitle:h.listingTitle||"",listingImage:h.listingImage,listingPrice:h.listingPrice||0,participantDetails:h.participantDetails||{},lastMessage:h.lastMessage?{...h.lastMessage,sentAt:Gl(h.lastMessage.sentAt)}:void 0,unreadCount:h.unreadCount||{},blockedBy:h.blockedBy||[],deletedFor:h.deletedFor||[],status:h.status||"active",createdAt:Gl(h.createdAt),updatedAt:Gl(h.updatedAt)})}),c.sort((u,h)=>h.updatedAt.getTime()-u.updatedAt.getTime()),t({conversations:c,loading:!1,unsubscribeConversations:a})},o=>{console.error("Error fetching conversations:",o),fe.error("Erreur lors du chargement des conversations"),t({loading:!1})})}catch(i){console.error("Error setting up conversations listener:",i),t({loading:!1})}},fetchMessages:n=>{const{unsubscribeMessages:r}=e();r&&r();try{const i=vn(Ft(De,"conversations",n,"messages")),a=uC(i,o=>{const c=o.docs.map(u=>{const h=u.data();return{id:u.id,conversationId:n,senderId:h.senderId,senderName:h.senderName,senderAvatar:h.senderAvatar,text:h.text,type:h.type||"text",attachments:h.attachments||[],seen:h.seen||!1,sentAt:Gl(h.sentAt)}});c.sort((u,h)=>u.sentAt.getTime()-h.sentAt.getTime()),t({messages:c,unsubscribeMessages:a})},o=>{console.error("Error fetching messages:",o),fe.error("Erreur lors du chargement des messages")})}catch(i){console.error("Error setting up messages listener:",i)}},sendMessage:async(n,r,i,a,o)=>{try{console.log("Sending message:",{conversationId:n,text:r,senderId:i,senderName:a});const c=e().currentConversation;if(!c){console.error("No current conversation");return}if(c.blockedBy&&c.blockedBy.includes(i)){fe.error("Vous ne pouvez pas envoyer de message dans cette conversation");return}const u={conversationId:n,senderId:i,senderName:a,senderAvatar:o||null,text:r,type:"text",seen:!1,sentAt:er()};console.log("Adding message to Firestore:",u);const h=await gl(Ft(De,"conversations",n,"messages"),u);console.log("Message added with ID:",h.id);const f=c.participants.filter(_=>_!==i),p={};f.forEach(_=>{p[`unreadCount.${_}`]=(c.unreadCount[_]||0)+1}),console.log("Updating conversation with:",{lastMessage:{text:r,sentAt:er(),senderId:i,senderName:a},updatedAt:er(),...p});const v=Object.fromEntries(Object.entries(p).filter(([,_])=>_!==void 0));await Tn(xt(De,"conversations",n),{lastMessage:{text:r,sentAt:er(),senderId:i,senderName:a},updatedAt:er(),...v}),f.forEach(async _=>{const N=c.participantDetails[_];if(N&&N.email){const j=c.participantDetails[i];await XX(N.email,N.name,a,(j==null?void 0:j.university)||"Université non spécifiée",c.listingTitle,r,n)}}),console.log("Message sent successfully")}catch(c){console.error("Error sending message:",c),fe.error("Erreur lors de l'envoi du message")}},createConversation:async(n,r,i,a,o,c,u,h,f)=>{try{console.log("Creating conversation:",{listingId:n,buyerId:o,sellerId:c});const p=QX(o,c,n);console.log("Generated conversation ID:",p);const v=await Ss(xt(De,"conversations",p));if(v.exists()){console.log("Conversation already exists, sending message");const S=v.data(),w={id:p,participants:S.participants||[],listingId:S.listingId||"",listingTitle:S.listingTitle||"",listingImage:S.listingImage,listingPrice:S.listingPrice||0,participantDetails:S.participantDetails||{},lastMessage:S.lastMessage?{...S.lastMessage,sentAt:Gl(S.lastMessage.sentAt)}:void 0,unreadCount:S.unreadCount||{},blockedBy:S.blockedBy||[],deletedFor:S.deletedFor||[],status:S.status||"active",createdAt:Gl(S.createdAt),updatedAt:Gl(S.updatedAt)};return t({currentConversation:w}),await e().sendMessage(p,f,o,u.displayName,u.photoURL),p}console.log("Creating new conversation");const _={participants:[o,c],listingId:n,listingTitle:r,listingImage:a||null,listingPrice:i,participantDetails:{[o]:{name:u.displayName,avatar:u.photoURL||null,university:u.university,verified:u.isVerified||!1,email:u.email||null},[c]:{name:h.sellerName,avatar:h.sellerAvatar||null,university:h.sellerUniversity,verified:h.sellerVerified||!1,email:h.email||null}},unreadCount:{[o]:0,[c]:1},status:"active",createdAt:er(),updatedAt:er()};console.log("Setting conversation document:",_);const N=Object.fromEntries(Object.entries(_).filter(([,S])=>S!==void 0));await sc(xt(De,"conversations",p),N);const j={id:p,participants:[o,c],listingId:n,listingTitle:r,listingImage:a||void 0,listingPrice:i,participantDetails:_.participantDetails,unreadCount:_.unreadCount,status:"active",createdAt:new Date,updatedAt:new Date};return t({currentConversation:j}),console.log("Sending initial message"),await e().sendMessage(p,f,o,u.displayName,u.photoURL),p}catch(p){throw console.error("Error creating conversation:",p),fe.error("Erreur lors de la création de la conversation"),p}},markMessagesAsSeen:async(n,r)=>{try{const i=xt(De,"conversations",n),a=Object.fromEntries(Object.entries({[`unreadCount.${r}`]:0}).filter(([,o])=>o!==void 0));await Tn(i,a)}catch(i){console.error("Error marking messages as seen:",i)}},setCurrentConversation:n=>{t({currentConversation:n})},blockUser:async(n,r)=>{try{const i=xt(De,"conversations",n),a=await Ss(i);if(a.exists()){const c=a.data().blockedBy||[];if(!c.includes(r)){const u=Object.fromEntries(Object.entries({blockedBy:[...c,r],status:"blocked",updatedAt:er()}).filter(([,h])=>h!==void 0));await Tn(i,u),fe.success("Utilisateur bloqué")}}}catch(i){console.error("Error blocking user:",i),fe.error("Erreur lors du blocage")}},reportUser:async(n,r,i,a,o)=>{try{const c={reporterId:r,reportedUserId:i,conversationId:n,reason:a,description:o,status:"pending",createdAt:er()},u=Object.fromEntries(Object.entries(c).filter(([,h])=>h!==void 0));await gl(Ft(De,"reports"),u),fe.success("Signalement envoyé")}catch(c){console.error("Error reporting user:",c),fe.error("Erreur lors du signalement")}},deleteConversation:async(n,r)=>{try{const i=xt(De,"conversations",n),a=await Ss(i);if(a.exists()){const o=a.data(),c=o.deletedFor||[];if(!c.includes(r)){const u=[...c,r];if(u.length===o.participants.length)await Sd(i);else{const h=Object.fromEntries(Object.entries({deletedFor:u,updatedAt:er()}).filter(([,f])=>f!==void 0));await Tn(i,h)}fe.success("Conversation supprimée")}}}catch(i){console.error("Error deleting conversation:",i),fe.error("Erreur lors de la suppression")}},findConversationByListing:(n,r)=>{const{conversations:i}=e();return i.find(a=>a.listingId===n&&a.participants.includes(r))||null},cleanup:()=>{const{unsubscribeConversations:n,unsubscribeMessages:r}=e();n&&n(),r&&r(),t({conversations:[],currentConversation:null,messages:[],unsubscribeConversations:void 0,unsubscribeMessages:void 0})}})),JX={};function eJ(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var a;const o=u=>u===null?null:JSON.parse(u,void 0),c=(a=n.getItem(i))!=null?a:null;return c instanceof Promise?c.then(o):o(c)},setItem:(i,a)=>n.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>n.removeItem(i)}}const _m=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return _m(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return _m(r)(n)}}}},tJ=(t,e)=>(n,r,i)=>{let a={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:S=>S,version:0,merge:(S,w)=>({...w,...S}),...e},o=!1;const c=new Set,u=new Set;let h;try{h=a.getStorage()}catch{}if(!h)return t((...S)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...S)},r,i);const f=_m(a.serialize),p=()=>{const S=a.partialize({...r()});let w;const y=f({state:S,version:a.version}).then(E=>h.setItem(a.name,E)).catch(E=>{w=E});if(w)throw w;return y},v=i.setState;i.setState=(S,w)=>{v(S,w),p()};const _=t((...S)=>{n(...S),p()},r,i);let N;const j=()=>{var S;if(!h)return;o=!1,c.forEach(y=>y(r()));const w=((S=a.onRehydrateStorage)==null?void 0:S.call(a,r()))||void 0;return _m(h.getItem.bind(h))(a.name).then(y=>{if(y)return a.deserialize(y)}).then(y=>{if(y)if(typeof y.version=="number"&&y.version!==a.version){if(a.migrate)return a.migrate(y.state,y.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return y.state}).then(y=>{var E;return N=a.merge(y,(E=r())!=null?E:_),n(N,!0),p()}).then(()=>{w==null||w(N,void 0),o=!0,u.forEach(y=>y(N))}).catch(y=>{w==null||w(void 0,y)})};return i.persist={setOptions:S=>{a={...a,...S},S.getStorage&&(h=S.getStorage())},clearStorage:()=>{h==null||h.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>j(),hasHydrated:()=>o,onHydrate:S=>(c.add(S),()=>{c.delete(S)}),onFinishHydration:S=>(u.add(S),()=>{u.delete(S)})},j(),N||_},nJ=(t,e)=>(n,r,i)=>{let a={storage:eJ(()=>localStorage),partialize:j=>j,version:0,merge:(j,S)=>({...S,...j}),...e},o=!1;const c=new Set,u=new Set;let h=a.storage;if(!h)return t((...j)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...j)},r,i);const f=()=>{const j=a.partialize({...r()});return h.setItem(a.name,{state:j,version:a.version})},p=i.setState;i.setState=(j,S)=>{p(j,S),f()};const v=t((...j)=>{n(...j),f()},r,i);i.getInitialState=()=>v;let _;const N=()=>{var j,S;if(!h)return;o=!1,c.forEach(y=>{var E;return y((E=r())!=null?E:v)});const w=((S=a.onRehydrateStorage)==null?void 0:S.call(a,(j=r())!=null?j:v))||void 0;return _m(h.getItem.bind(h))(a.name).then(y=>{if(y)if(typeof y.version=="number"&&y.version!==a.version){if(a.migrate)return[!0,a.migrate(y.state,y.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,y.state];return[!1,void 0]}).then(y=>{var E;const[I,D]=y;if(_=a.merge(D,(E=r())!=null?E:v),n(_,!0),I)return f()}).then(()=>{w==null||w(_,void 0),_=r(),o=!0,u.forEach(y=>y(_))}).catch(y=>{w==null||w(void 0,y)})};return i.persist={setOptions:j=>{a={...a,...j},j.storage&&(h=j.storage)},clearStorage:()=>{h==null||h.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>N(),hasHydrated:()=>o,onHydrate:j=>(c.add(j),()=>{c.delete(j)}),onFinishHydration:j=>(u.add(j),()=>{u.delete(j)})},a.skipHydration||N(),_||v},rJ=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((JX?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),tJ(t,e)):nJ(t,e),sJ=rJ,ah=ih()(sJ((t,e)=>({cart:[],cartTotal:0,addToCart:n=>{const{cart:r}=e(),i=r.find(a=>a.id===n.id);t(i?{cart:r.map(a=>a.id===n.id?{...a,quantity:a.quantity+1}:a),cartTotal:e().cartTotal+n.price}:{cart:[...r,{...n,quantity:1}],cartTotal:e().cartTotal+n.price}),fe.success("Article ajouté au panier")},removeFromCart:n=>{const{cart:r}=e(),i=r.find(a=>a.id===n);i&&t({cart:r.filter(a=>a.id!==n),cartTotal:e().cartTotal-i.price*i.quantity})},updateQuantity:(n,r)=>{const{cart:i}=e(),a=i.find(o=>o.id===n);if(a){const o=r-a.quantity;t({cart:i.map(c=>c.id===n?{...c,quantity:r}:c),cartTotal:e().cartTotal+a.price*o})}},clearCart:()=>{t({cart:[],cartTotal:0})},getCartItemCount:()=>e().cart.reduce((n,r)=>n+r.quantity,0)}),{name:"cart-storage",partialize:t=>({cart:t.cart,cartTotal:t.cartTotal})})),iJ=()=>{var y,E;const{currentUser:t,userProfile:e,logout:n}=yn(),{conversations:r,fetchConversations:i}=Py(),{getCartItemCount:a}=ah(),{theme:o,setTheme:c}=G9(),u=ar(),[h,f]=x.useState(""),p=Pe.useMemo(()=>!t||!r.length?0:r.reduce((I,D)=>{const B=D.unreadCount[t.uid]||0;return I+B},0),[r,t]);x.useEffect(()=>{t&&i(t.uid)},[t,i]);const v=I=>{I.preventDefault(),h.trim()&&u(`/listings?q=${encodeURIComponent(h.trim())}`)},_=async()=>{try{await n(),u("/")}catch(I){console.error("Logout error:",I)}},N=a(),j=localStorage.getItem("pendingUserData"),S=j?JSON.parse(j):{};let w=(e==null?void 0:e.displayName)||S.displayName||"";return!w&&(t!=null&&t.displayName)&&(w=t.displayName),!w&&(t!=null&&t.email)&&(w=t.email.split("@")[0]),w||(w="Utilisateur"),e!=null&&e.university||S.university,((e==null?void 0:e.university)==="Autre université"&&e.otherUniversity||S.university==="Autre université"&&S.otherUniversity)&&(e&&e.otherUniversity||S.otherUniversity),x.useEffect(()=>{j&&(t!=null&&t.emailVerified)},[t,j]),s.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-background/95 backdrop-blur-sm border-b border-border",children:s.jsxs("div",{className:"container mx-auto px-4 h-16 flex items-center justify-between",children:[s.jsxs(Te,{to:"/",className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-primary to-secondary rounded-lg flex items-center justify-center",children:s.jsx(Xd,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{className:"hidden sm:block",children:[s.jsx("span",{className:"font-bold text-xl bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"StudyMarket"}),s.jsx("div",{className:"text-xs text-muted-foreground -mt-1",children:"Étudiants certifiés"})]})]}),s.jsx("form",{onSubmit:v,className:"flex-1 max-w-lg mx-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(We,{type:"text",placeholder:"Rechercher entre étudiants...",value:h,onChange:I=>f(I.target.value),className:"pl-10 w-full"})]})}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("div",{onClick:()=>c(o==="dark"?"light":"dark"),className:"relative cursor-pointer text-foreground hover:text-primary transition-colors","aria-label":"Changer le thème",children:[s.jsx(kG,{className:"h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),s.jsx(wG,{className:"absolute top-0 left-0 h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"})]}),t?s.jsxs(s.Fragment,{children:[s.jsx(Y,{asChild:!0,className:"hidden sm:flex bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90",children:s.jsxs(Te,{to:"/create",children:[s.jsx(fc,{className:"w-4 h-4 mr-2"}),"Publier"]})}),s.jsxs("div",{className:"relative hidden sm:block",children:[s.jsx(Y,{variant:"ghost",size:"icon",asChild:!0,children:s.jsx(Te,{to:"/cart",children:s.jsx(xl,{className:"w-4 h-4"})})}),N>0&&s.jsx(et,{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full border-2 border-background",children:N>99?"99+":N})]}),s.jsx(Y,{variant:"ghost",size:"icon",asChild:!0,children:s.jsx(Te,{to:"/saved-searches",children:s.jsx(fi,{className:"w-4 h-4"})})}),s.jsxs("div",{className:"relative hidden sm:block",children:[s.jsx(Y,{variant:"ghost",size:"icon",asChild:!0,children:s.jsx(Te,{to:"/messages",children:s.jsx(xn,{className:"w-4 h-4"})})}),p>0&&s.jsx(et,{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs min-w-[18px] h-[18px] flex items-center justify-center px-1 rounded-full border-2 border-background",children:p>99?"99+":p})]}),s.jsxs(n1,{children:[s.jsx(r1,{asChild:!0,children:s.jsxs(Y,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:[s.jsxs(so,{className:"h-8 w-8",children:[s.jsx(io,{src:e==null?void 0:e.photoURL}),s.jsx(ao,{children:((E=(y=e==null?void 0:e.displayName)==null?void 0:y[0])==null?void 0:E.toUpperCase())||"U"})]}),(e==null?void 0:e.isVerified)&&s.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full flex items-center justify-center",children:s.jsx(Vt,{className:"w-2 h-2 text-white"})})]})}),s.jsxs(nx,{className:"w-64",align:"end",children:[s.jsx("div",{className:"flex items-center justify-start gap-2 p-2",children:s.jsxs("div",{className:"flex flex-col space-y-1 leading-none",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"font-medium",children:w}),(e==null?void 0:e.isVerified)&&s.jsxs(et,{variant:"secondary",className:"text-xs bg-green-100 text-green-800",children:[s.jsx(Vt,{className:"w-3 h-3 mr-1"}),"Vérifié"]})]}),e&&s.jsx("div",{children:s.jsx("div",{className:"text-xs text-muted-foreground",children:e.university==="Autre université"?e.otherUniversity:e.university})}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[s.jsx(_i,{className:"w-3 h-3 text-green-600"}),s.jsxs("span",{children:[(e==null?void 0:e.co2Saved)||0," kg CO₂ économisés"]})]})]})}),s.jsx(zi,{}),s.jsx(Xt,{asChild:!0,children:s.jsxs(Te,{to:"/profile",className:"cursor-pointer",children:[s.jsx(Zr,{className:"w-4 h-4 mr-2"}),"Mon profil"]})}),s.jsx(Xt,{asChild:!0,children:s.jsxs(Te,{to:"/settings",className:"cursor-pointer",children:[s.jsx(hy,{className:"w-4 h-4 mr-2"}),"Paramètres"]})}),s.jsx(zi,{}),s.jsx(Xt,{asChild:!0,children:s.jsxs(Te,{to:"/orders",className:"cursor-pointer",children:[s.jsx(pn,{className:"w-4 h-4 mr-2"}),"Mes commandes"]})}),s.jsx(Xt,{asChild:!0,children:s.jsxs(Te,{to:"/payments",className:"cursor-pointer",children:[s.jsx(Zm,{className:"w-4 h-4 mr-2"}),"Paiements"]})}),s.jsx(zi,{}),s.jsx(Xt,{asChild:!0,children:s.jsxs(Te,{to:"/favorites",className:"cursor-pointer",children:[s.jsx(Rr,{className:"w-4 h-4 mr-2"}),"Mes favoris"]})}),s.jsx(Xt,{asChild:!0,children:s.jsxs(Te,{to:"/saved-searches",className:"cursor-pointer",children:[s.jsx(zj,{className:"w-4 h-4 mr-2"}),"Alertes sauvegardées"]})}),s.jsx(zi,{}),s.jsx(Xt,{asChild:!0,children:s.jsxs(Te,{to:"/messages",className:"cursor-pointer relative",children:[s.jsx(xn,{className:"w-4 h-4 mr-2"}),"Messages",p>0&&s.jsx(et,{className:"ml-auto bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1",children:p>99?"99+":p})]})}),s.jsx(zi,{}),s.jsx(Xt,{asChild:!0,children:s.jsxs(Te,{to:"/impact",className:"cursor-pointer",children:[s.jsx(_i,{className:"w-4 h-4 mr-2"}),"Mon impact écologique"]})}),s.jsx(zi,{}),s.jsx(Xt,{asChild:!0,children:s.jsxs(Te,{to:"/help",className:"cursor-pointer",children:[s.jsx(Pn,{className:"w-4 h-4 mr-2"}),"Aide & Support"]})}),s.jsx(Xt,{asChild:!0,children:s.jsxs(Te,{to:"/safety",className:"cursor-pointer",children:[s.jsx(Vt,{className:"w-4 h-4 mr-2"}),"Conseils de sécurité"]})}),s.jsx(zi,{}),s.jsxs(Xt,{onClick:_,className:"cursor-pointer text-destructive",children:[s.jsx(xG,{className:"w-4 h-4 mr-2"}),"Se déconnecter"]})]})]}),s.jsx(Y,{size:"icon",asChild:!0,className:"sm:hidden bg-gradient-to-r from-primary to-secondary",children:s.jsx(Te,{to:"/create",children:s.jsx(fc,{className:"w-4 h-4"})})})]}):s.jsxs(s.Fragment,{children:[s.jsx(Y,{variant:"ghost",asChild:!0,children:s.jsx(Te,{to:"/auth",children:"Se connecter"})}),s.jsx(Y,{asChild:!0,className:"bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90",children:s.jsx(Te,{to:"/auth",children:"Rejoindre"})})]}),s.jsxs(n1,{children:[s.jsx(r1,{asChild:!0,className:"sm:hidden",children:s.jsx(Y,{className:"p-2 text-foreground hover:text-primary transition-colors","aria-label":"Menu",children:s.jsx(_G,{className:"w-5 h-5"})})}),s.jsxs(nx,{className:"w-56",align:"end",children:[s.jsx(Xt,{asChild:!0,children:s.jsx(Te,{to:"/listings",className:"cursor-pointer",children:"Toutes les annonces"})}),s.jsx(Xt,{asChild:!0,children:s.jsx(Te,{to:"/listings?transactionType=donation",className:"cursor-pointer",children:"Dons entre étudiants"})}),s.jsx(Xt,{asChild:!0,children:s.jsx(Te,{to:"/listings?transactionType=exchange",className:"cursor-pointer",children:"Troc & Échanges"})}),s.jsx(Xt,{asChild:!0,children:s.jsx(Te,{to:"/listings?category=services",className:"cursor-pointer",children:"Services étudiants"})}),s.jsx(Xt,{asChild:!0,children:s.jsx(Te,{to:"/listings?category=housing",className:"cursor-pointer",children:"Logement & Colocation"})}),s.jsx(Xt,{asChild:!0,children:s.jsx(Te,{to:"/products",className:"cursor-pointer",children:"Boutique"})}),t&&s.jsxs(s.Fragment,{children:[s.jsx(zi,{}),s.jsx(Xt,{asChild:!0,children:s.jsxs(Te,{to:"/create",className:"cursor-pointer",children:[s.jsx(fc,{className:"w-4 h-4 mr-2"}),"Publier une annonce"]})}),s.jsx(Xt,{asChild:!0,children:s.jsxs(Te,{to:"/cart",className:"cursor-pointer relative",children:[s.jsx(xl,{className:"w-4 h-4 mr-2 "}),"Panier",N>0&&s.jsx(et,{className:"ml-auto bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1 ",children:N})]})}),s.jsx(Xt,{asChild:!0,children:s.jsxs(Te,{to:"/messages",className:"cursor-pointer relative",children:[s.jsx(xn,{className:"w-4 h-4 mr-2"}),"Messages",p>0&&s.jsx(et,{className:"ml-auto bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1",children:p>99?"99+":p})]})}),s.jsx(Xt,{asChild:!0,children:s.jsxs(Te,{to:"/favorites",className:"cursor-pointer",children:[s.jsx(Rr,{className:"w-4 h-4 mr-2"}),"Mes favoris"]})})]})]})]})]})]})})};function aJ({icon:t,size:e=32,gradientId:n}){return s.jsxs("svg",{width:e,height:e,viewBox:`0 0 ${e} ${e}`,xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:n,x1:"0",y1:"0",x2:"1",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:"#2ECC71"}),s.jsx("stop",{offset:"100%",stopColor:"#4A90E2"})]})}),s.jsx(t,{width:e,height:e,fill:`url(#${n})`})]})}const oJ=()=>s.jsx("footer",{className:"bg-muted/50 border-t border-border mt-auto",children:s.jsxs("div",{className:"container mx-auto px-4 py-12",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(aJ,{icon:Xd,gradientId:"gradient-footer",size:32}),s.jsxs("div",{children:[s.jsx("span",{className:"font-bold text-xl bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"StudyMarket"}),s.jsx("div",{className:"text-xs text-muted-foreground -mt-1",children:"Étudiants certifiés"})]})]}),s.jsx("p",{className:"text-muted-foreground text-sm",children:"La première plateforme d'échange entre étudiants vérifiés. Achetez, vendez, donnez et échangez en toute sécurité au sein de votre communauté universitaire."}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsx("a",{href:"https://facebook.com/studymarket",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors",children:s.jsx(uG,{className:"w-5 h-5"})}),s.jsx("a",{href:"https://twitter.com/studymarket",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors",children:s.jsx(AG,{className:"w-5 h-5"})}),s.jsx("a",{href:"https://instagram.com/studymarket",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors",children:s.jsx(pG,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold",children:"Navigation"}),s.jsxs("ul",{className:"space-y-2 text-sm",children:[s.jsx("li",{children:s.jsx(Te,{to:"/listings",className:"text-muted-foreground hover:text-primary transition-colors",children:"Toutes les annonces"})}),s.jsx("li",{children:s.jsx(Te,{to:"/listings?transactionType=donation",className:"text-muted-foreground hover:text-primary transition-colors",children:"Dons entre étudiants"})}),s.jsx("li",{children:s.jsx(Te,{to:"/listings?transactionType=exchange",className:"text-muted-foreground hover:text-primary transition-colors",children:"Troc & Échanges"})}),s.jsx("li",{children:s.jsx(Te,{to:"/create",className:"text-muted-foreground hover:text-primary transition-colors",children:"Publier une annonce"})}),s.jsx("li",{children:s.jsx(Te,{to:"/how-it-works",className:"text-muted-foreground hover:text-primary transition-colors",children:"Comment ça marche"})})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold",children:"Catégories populaires"}),s.jsxs("ul",{className:"space-y-2 text-sm",children:[s.jsx("li",{children:s.jsx(Te,{to:"/listings?category=books",className:"text-muted-foreground hover:text-primary transition-colors",children:"Livres & Cours"})}),s.jsx("li",{children:s.jsx(Te,{to:"/listings?category=electronics",className:"text-muted-foreground hover:text-primary transition-colors",children:"Électronique"})}),s.jsx("li",{children:s.jsx(Te,{to:"/listings?category=housing",className:"text-muted-foreground hover:text-primary transition-colors",children:"Logement & Colocation"})}),s.jsx("li",{children:s.jsx(Te,{to:"/listings?category=services",className:"text-muted-foreground hover:text-primary transition-colors",children:"Services étudiants"})}),s.jsx("li",{children:s.jsx(Te,{to:"/listings?category=jobs",className:"text-muted-foreground hover:text-primary transition-colors",children:"Jobs & Stages"})})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold",children:"Sécurité & Confiance"}),s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[s.jsx(Vt,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{children:"Étudiants 100% vérifiés"})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[s.jsx(_i,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{children:"Impact écologique mesuré"})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[s.jsx(us,{className:"w-4 h-4"}),s.jsx("span",{children:"support@studymarket.fr"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{to:"/safety",className:"block text-muted-foreground hover:text-primary transition-colors text-sm",children:"Conseils de sécurité"}),s.jsx(Te,{to:"/verification",className:"block text-muted-foreground hover:text-primary transition-colors text-sm",children:"Processus de vérification"}),s.jsx(Te,{to:"/community-guidelines",className:"block text-muted-foreground hover:text-primary transition-colors text-sm",children:"Règles de la communauté"}),s.jsx(Te,{to:"/help",className:"block text-muted-foreground hover:text-primary transition-colors text-sm",children:"Centre d'aide"})]})]})]}),s.jsxs("div",{className:"border-t border-border mt-8 pt-8 flex flex-col sm:flex-row justify-between items-center",children:[s.jsx("p",{className:"text-muted-foreground text-sm",children:"© 2024 StudyMarket. Tous droits réservés. Plateforme dédiée aux étudiants vérifiés."}),s.jsxs("div",{className:"flex space-x-6 mt-4 sm:mt-0",children:[s.jsx(Te,{to:"/terms",className:"text-muted-foreground hover:text-primary transition-colors text-sm",children:"Conditions d'utilisation"}),s.jsx(Te,{to:"/privacy",className:"text-muted-foreground hover:text-primary transition-colors text-sm",children:"Politique de confidentialité"}),s.jsx(Te,{to:"/cookies",className:"text-muted-foreground hover:text-primary transition-colors text-sm",children:"Cookies"}),s.jsxs("a",{href:"mailto:support@studymarket.fr",className:"text-muted-foreground hover:text-primary transition-colors text-sm flex items-center gap-1",children:[s.jsx(is,{className:"w-3 h-3"}),"Contact"]})]})]})]})}),ae=x.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:Xe("rounded-xl border bg-card text-card-foreground shadow",t),...e}));ae.displayName="Card";const qe=x.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:Xe("flex flex-col space-y-1.5 p-6",t),...e}));qe.displayName="CardHeader";const Ge=x.forwardRef(({className:t,...e},n)=>s.jsx("h3",{ref:n,className:Xe("font-semibold leading-none tracking-tight",t),...e}));Ge.displayName="CardTitle";const Tt=x.forwardRef(({className:t,...e},n)=>s.jsx("p",{ref:n,className:Xe("text-sm text-muted-foreground",t),...e}));Tt.displayName="CardDescription";const oe=x.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:Xe("p-6 pt-0",t),...e}));oe.displayName="CardContent";const DD=x.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:Xe("flex items-center p-6 pt-0",t),...e}));DD.displayName="CardFooter";const rx=t=>{if(t==null)return null;if(Array.isArray(t))return t.map(rx).filter(e=>e!==void 0);if(typeof t=="object"&&t!==null){const e={};return Object.keys(t).forEach(n=>{const r=rx(t[n]);r!==void 0&&(e[n]=r)}),e}return t},YC=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch(e){return console.warn("Error converting timestamp:",e),new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},c0=t=>{var n,r,i,a,o,c;const e=t.data();return{id:t.id,...e,createdAt:YC(e.createdAt),updatedAt:YC(e.updatedAt),title:e.title||"Sans titre",description:e.description||"",price:e.price||0,currency:e.currency||"EUR",category:e.category||"electronics",condition:e.condition||"good",images:e.images||[],tags:e.tags||[],location:{city:((n=e.location)==null?void 0:n.city)||"Paris",state:((r=e.location)==null?void 0:r.state)||"Île-de-France",country:((i=e.location)==null?void 0:i.country)||"France",campus:((a=e.location)==null?void 0:a.campus)||null,university:((o=e.location)==null?void 0:o.university)||null,coordinates:((c=e.location)==null?void 0:c.coordinates)||null},transactionType:e.transactionType||"sale",sellerId:e.sellerId||"",sellerName:e.sellerName||"Utilisateur",sellerAvatar:e.sellerAvatar||null,sellerUniversity:e.sellerUniversity||"Université non spécifiée",sellerVerified:e.sellerVerified||!1,status:e.status||"active",views:e.views||0,likes:e.likes||0,saves:e.saves||0,reportCount:e.reportCount||0,moderationStatus:e.moderationStatus||"approved"}},ap=ih((t,e)=>({listings:[],featuredListings:[],currentListing:null,loading:!1,hasMore:!0,lastDoc:null,fetchListings:async(n={},r=!1)=>{const{listings:i,lastDoc:a}=e();if(!(!r&&!a)){t({loading:!0});try{let o=vn(Ft(De,"listings"),oC("createdAt","desc"),Ks(20));!r&&a&&(o=vn(o,Aq(a)));const c=await On(o);let u=c.docs.map(c0);if(n.category&&n.category!=="all"&&(u=u.filter(f=>f.category===n.category)),n.minPrice!==void 0&&(u=u.filter(f=>f.price>=n.minPrice)),n.maxPrice!==void 0&&(u=u.filter(f=>f.price<=n.maxPrice)),n.query){const f=n.query.toLowerCase();u=u.filter(p=>{var v;return p.title.toLowerCase().includes(f)||p.description.toLowerCase().includes(f)||((v=p.tags)==null?void 0:v.some(_=>_.toLowerCase().includes(f)))})}if(n.condition&&n.condition.length>0&&(u=u.filter(f=>n.condition.includes(f.condition))),n.sortBy)switch(n.sortBy){case"price-asc":u.sort((f,p)=>f.price-p.price);break;case"price-desc":u.sort((f,p)=>p.price-f.price);break;case"date":default:u.sort((f,p)=>new Date(p.createdAt).getTime()-new Date(f.createdAt).getTime());break}const h=c.docs[c.docs.length-1];t({listings:r?u:[...i,...u],lastDoc:h,hasMore:c.docs.length===20,loading:!1})}catch(o){console.error("Error fetching listings:",o),fe.error("Erreur lors du chargement des annonces"),t({loading:!1})}}},fetchFeaturedListings:async()=>{try{console.log("🔍 Fetching featured listings...");const n=vn(Ft(De,"listings"),oC("createdAt","desc"),Ks(6)),r=await On(n);console.log(`📊 Found ${r.docs.length} documents`);const i=r.docs.map((a,o)=>{try{console.log(`🔄 Processing document ${o+1}:`,a.id);const c=c0(a);return console.log(`✅ Successfully converted listing: ${c.title}`),c}catch(c){return console.error(`❌ Error converting document ${a.id}:`,c),{id:a.id,title:"Annonce non disponible",description:"Cette annonce ne peut pas être affichée pour le moment.",price:0,currency:"EUR",category:"electronics",condition:"good",images:[],tags:[],location:{city:"Paris",state:"Île-de-France",country:"France",campus:null,university:null,coordinates:null},transactionType:"sale",sellerId:"",sellerName:"Utilisateur",sellerAvatar:null,sellerUniversity:"Université non spécifiée",sellerVerified:!1,status:"active",views:0,likes:0,saves:0,reportCount:0,moderationStatus:"approved",createdAt:new Date,updatedAt:new Date}}});console.log(`🎉 Successfully processed ${i.length} featured listings`),t({featuredListings:i})}catch(n){console.error("❌ Error fetching featured listings:",n),t({featuredListings:[]})}},fetchListingById:async n=>{t({loading:!0});try{const r=xt(De,"listings",n),i=await Ss(r);if(i.exists()){const a=c0(i);await Tn(r,{views:(a.views||0)+1}),t({currentListing:a,loading:!1})}else t({currentListing:null,loading:!1}),fe.error("Annonce introuvable")}catch(r){console.error("Error fetching listing:",r),fe.error("Erreur lors du chargement de l'annonce"),t({currentListing:null,loading:!1})}},createListing:async n=>{var r,i,a,o,c,u;try{const h=rx({...n,views:0,likes:0,saves:0,reportCount:0,moderationStatus:"approved",status:"active",createdAt:new Date,updatedAt:new Date,location:{city:((r=n.location)==null?void 0:r.city)||"Paris",state:((i=n.location)==null?void 0:i.state)||"Île-de-France",country:((a=n.location)==null?void 0:a.country)||"France",campus:((o=n.location)==null?void 0:o.campus)||null,university:((c=n.location)==null?void 0:c.university)||null,coordinates:((u=n.location)==null?void 0:u.coordinates)||null},currency:n.currency||"EUR",images:n.images||[],tags:n.tags||[],condition:n.condition||"good",transactionType:n.transactionType||"sale"});console.log("Creating listing with data:",h);const f=await gl(Ft(De,"listings"),h);return fe.success("Annonce créée avec succès !"),f.id}catch(h){throw console.error("Error creating listing:",h),fe.error("Erreur lors de la création de l'annonce"),h}},updateListing:async(n,r)=>{try{const i=xt(De,"listings",n),a=rx({...r,updatedAt:new Date});await Tn(i,a);const{listings:o,currentListing:c}=e(),u=o.map(h=>h.id===n?{...h,...r}:h);t({listings:u,currentListing:(c==null?void 0:c.id)===n?{...c,...r}:c}),fe.success("Annonce mise à jour !")}catch(i){throw console.error("Error updating listing:",i),fe.error("Erreur lors de la mise à jour"),i}},deleteListing:async n=>{try{await Sd(xt(De,"listings",n));const{listings:r}=e(),i=r.filter(a=>a.id!==n);t({listings:i}),fe.success("Annonce supprimée !")}catch(r){throw console.error("Error deleting listing:",r),fe.error("Erreur lors de la suppression"),r}},searchListings:async n=>{await e().fetchListings(n,!0)},clearListings:()=>{t({listings:[],lastDoc:null,hasMore:!0,currentListing:null})}})),QC=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},OD=ih((t,e)=>({favorites:[],userFavoriteIds:new Set,loading:!1,fetchUserFavorites:async n=>{if(n){t({loading:!0});try{const r=vn(Ft(De,"favorites"),Zn("userId","==",n),Ks(100)),i=await On(r),a=[],o=new Set;i.forEach(c=>{const u=c.data(),h={id:c.id,...u,createdAt:QC(u.createdAt),updatedAt:QC(u.updatedAt)};a.push(h),o.add(h.listingId)}),a.sort((c,u)=>u.createdAt.getTime()-c.createdAt.getTime()),t({favorites:a,userFavoriteIds:o,loading:!1})}catch(r){console.error("Erreur lors du chargement des favoris:",r),fe.error("Erreur lors du chargement des favoris"),t({loading:!1})}}},addToFavorites:async(n,r)=>{var i;if(!(!n||!r))try{if(e().userFavoriteIds.has(r.id)){fe.info("Déjà dans vos favoris");return}const a={userId:n,listingId:r.id,listingTitle:r.title,listingPrice:r.price,listingImage:((i=r.images)==null?void 0:i[0])||null,listingCategory:r.category,listingTransactionType:r.transactionType,sellerName:r.sellerName,sellerUniversity:r.sellerUniversity,notes:"",tags:r.tags||[],createdAt:er(),updatedAt:er()},c={id:(await gl(Ft(De,"favorites"),a)).id,...a,createdAt:new Date,updatedAt:new Date},{favorites:u,userFavoriteIds:h}=e(),f=new Set(h);f.add(r.id),t({favorites:[c,...u],userFavoriteIds:f});try{await Tn(xt(De,"listings",r.id),{likes:(r.likes||0)+1})}catch(p){console.error("Erreur lors de la mise à jour du compteur de likes:",p)}fe.success("Ajouté aux favoris ❤️")}catch(a){console.error("Erreur lors de l'ajout aux favoris:",a),fe.error("Erreur lors de l'ajout aux favoris")}},removeFromFavorites:async(n,r)=>{if(!(!n||!r))try{const i=vn(Ft(De,"favorites"),Zn("userId","==",n),Zn("listingId","==",r)),a=await On(i);if(a.empty){fe.info("Pas dans vos favoris");return}const o=a.docs[0];await Sd(xt(De,"favorites",o.id));const{favorites:c,userFavoriteIds:u}=e(),h=new Set(u);h.delete(r),t({favorites:c.filter(f=>f.listingId!==r),userFavoriteIds:h});try{const f=xt(De,"listings",r),p=await On(vn(Ft(De,"listings"),Zn("__name__","==",r)));if(!p.empty){const v=p.docs[0].data().likes||0;await Tn(f,{likes:Math.max(0,v-1)})}}catch(f){console.error("Erreur lors de la mise à jour du compteur de likes:",f)}fe.success("Retiré des favoris")}catch(i){console.error("Erreur lors de la suppression des favoris:",i),fe.error("Erreur lors de la suppression des favoris")}},isFavorite:n=>e().userFavoriteIds.has(n),toggleFavorite:async(n,r)=>{const{isFavorite:i,addToFavorites:a,removeFromFavorites:o}=e();i(r.id)?await o(n,r.id):await a(n,r)},clearFavorites:()=>{t({favorites:[],userFavoriteIds:new Set,loading:!1})}})),LD=({listing:t,size:e="default",className:n=""})=>{const{currentUser:r}=yn(),{isFavorite:i,toggleFavorite:a}=OD(),o=ar(),c=i(t.id),u=f=>{if(f.preventDefault(),f.stopPropagation(),!r){fe.error("Connectez-vous pour ajouter aux favoris"),o("/auth");return}a(r.uid,t)},h=()=>{switch(e){case"sm":return"h-8 w-8";case"lg":return"h-10 w-10";default:return"h-9 w-9"}};return s.jsx(Y,{variant:"ghost",size:"icon",onClick:u,className:`${h()} ${c?"text-red-500 hover:text-red-600":"text-blue-500 hover:text-red-500"} ${n}`,"aria-label":c?"Retirer des favoris":"Ajouter aux favoris",children:s.jsx(Rr,{className:`w-4 h-4 ${c?"fill-current text-red-500":"stroke-current text-blue-500"}`,strokeWidth:2,fill:c?"currentColor":"none"})})},FD=({listing:t,size:e="default",showText:n=!0,className:r=""})=>{const i=async o=>{o.preventDefault(),o.stopPropagation();const c={title:t.title,text:`Découvrez cette annonce sur StudyMarket: ${t.title}`,url:window.location.href};try{navigator.share?await navigator.share(c):(await navigator.clipboard.writeText(window.location.href),fe.success("Lien copié dans le presse-papiers"))}catch(u){console.error("Error sharing:",u)}},a=()=>{switch(e){case"sm":return"h-8 w-8";case"lg":return"h-10 w-10";default:return"h-9 w-9"}};return s.jsx(Y,{variant:"ghost",size:"icon",onClick:i,className:`${a()} ${r}`,"aria-label":"Partager",children:s.jsx(fy,{className:"w-4 h-4"})})};function dt(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function hs(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function Br(t,e){const n=dt(t);return isNaN(e)?hs(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function Ci(t,e){const n=dt(t);if(isNaN(e))return hs(t,NaN);if(!e)return n;const r=n.getDate(),i=hs(t,n.getTime());i.setMonth(n.getMonth()+e+1,0);const a=i.getDate();return r>=a?i:(n.setFullYear(i.getFullYear(),i.getMonth(),r),n)}const uN=6048e5,lJ=864e5,_g=43200,XC=1440;let cJ={};function oh(){return cJ}function ha(t,e){var c,u,h,f;const n=oh(),r=(e==null?void 0:e.weekStartsOn)??((u=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((f=(h=n.locale)==null?void 0:h.options)==null?void 0:f.weekStartsOn)??0,i=dt(t),a=i.getDay(),o=(a<r?7:0)+a-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function Rc(t){return ha(t,{weekStartsOn:1})}function VD(t){const e=dt(t),n=e.getFullYear(),r=hs(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=Rc(r),a=hs(t,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const o=Rc(a);return e.getTime()>=i.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function Ad(t){const e=dt(t);return e.setHours(0,0,0,0),e}function Rd(t){const e=dt(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Yi(t,e){const n=Ad(t),r=Ad(e),i=+n-Rd(n),a=+r-Rd(r);return Math.round((i-a)/lJ)}function uJ(t){const e=VD(t),n=hs(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Rc(n)}function s1(t,e){const n=e*7;return Br(t,n)}function dJ(t,e){return Ci(t,e*12)}function hJ(t){let e;return t.forEach(function(n){const r=dt(n);(e===void 0||e<r||isNaN(Number(r)))&&(e=r)}),e||new Date(NaN)}function fJ(t){let e;return t.forEach(n=>{const r=dt(n);(!e||e>r||isNaN(+r))&&(e=r)}),e||new Date(NaN)}function Qg(t,e){const n=dt(t),r=dt(e),i=n.getTime()-r.getTime();return i<0?-1:i>0?1:i}function mJ(t){return hs(t,Date.now())}function as(t,e){const n=Ad(t),r=Ad(e);return+n==+r}function dN(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function pJ(t){if(!dN(t)&&typeof t!="number")return!1;const e=dt(t);return!isNaN(Number(e))}function Md(t,e){const n=dt(t),r=dt(e),i=n.getFullYear()-r.getFullYear(),a=n.getMonth()-r.getMonth();return i*12+a}function gJ(t,e,n){const r=ha(t,n),i=ha(e,n),a=+r-Rd(r),o=+i-Rd(i);return Math.round((a-o)/uN)}function vJ(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function xJ(t,e){return+dt(t)-+dt(e)}function yJ(t){const e=dt(t);return e.setHours(23,59,59,999),e}function Iy(t){const e=dt(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function _J(t){const e=dt(t);return+yJ(e)==+Iy(e)}function wJ(t,e){const n=dt(t),r=dt(e),i=Qg(n,r),a=Math.abs(Md(n,r));let o;if(a<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-i*a);let c=Qg(n,r)===-i;_J(dt(t))&&a===1&&Qg(t,r)===1&&(c=!1),o=i*(a-Number(c))}return o===0?0:o}function bJ(t,e,n){const r=xJ(t,e)/1e3;return vJ(n==null?void 0:n.roundingMethod)(r)}function ds(t){const e=dt(t);return e.setDate(1),e.setHours(0,0,0,0),e}function zD(t){const e=dt(t),n=hs(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function hN(t,e){var c,u,h,f;const n=oh(),r=(e==null?void 0:e.weekStartsOn)??((u=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((f=(h=n.locale)==null?void 0:h.options)==null?void 0:f.weekStartsOn)??0,i=dt(t),a=i.getDay(),o=(a<r?-7:0)+6-(a-r);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function UD(t){return hN(t,{weekStartsOn:1})}const jJ={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},NJ=(t,e,n)=>{let r;const i=jJ[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function ld(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const SJ={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},EJ={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},CJ={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},kJ={date:ld({formats:SJ,defaultWidth:"full"}),time:ld({formats:EJ,defaultWidth:"full"}),dateTime:ld({formats:CJ,defaultWidth:"full"})},TJ={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},PJ=(t,e,n,r)=>TJ[t];function qi(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,c=n!=null&&n.width?String(n.width):o;i=t.formattingValues[c]||t.formattingValues[o]}else{const o=t.defaultWidth,c=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[c]||t.values[o]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const IJ={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},AJ={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},RJ={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},MJ={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},DJ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},OJ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},LJ=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},FJ={ordinalNumber:LJ,era:qi({values:IJ,defaultWidth:"wide"}),quarter:qi({values:AJ,defaultWidth:"wide",argumentCallback:t=>t-1}),month:qi({values:RJ,defaultWidth:"wide"}),day:qi({values:MJ,defaultWidth:"wide"}),dayPeriod:qi({values:DJ,defaultWidth:"wide",formattingValues:OJ,defaultFormattingWidth:"wide"})};function Hi(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const o=a[0],c=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(c)?zJ(c,p=>p.test(o)):VJ(c,p=>p.test(o));let h;h=t.valueCallback?t.valueCallback(u):u,h=n.valueCallback?n.valueCallback(h):h;const f=e.slice(o.length);return{value:h,rest:f}}}function VJ(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function zJ(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function $D(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],a=e.match(t.parsePattern);if(!a)return null;let o=t.valueCallback?t.valueCallback(a[0]):a[0];o=n.valueCallback?n.valueCallback(o):o;const c=e.slice(i.length);return{value:o,rest:c}}}const UJ=/^(\d+)(th|st|nd|rd)?/i,$J=/\d+/i,BJ={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},WJ={any:[/^b/i,/^(a|c)/i]},qJ={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},HJ={any:[/1/i,/2/i,/3/i,/4/i]},GJ={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},KJ={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ZJ={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},YJ={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},QJ={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},XJ={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},JJ={ordinalNumber:$D({matchPattern:UJ,parsePattern:$J,valueCallback:t=>parseInt(t,10)}),era:Hi({matchPatterns:BJ,defaultMatchWidth:"wide",parsePatterns:WJ,defaultParseWidth:"any"}),quarter:Hi({matchPatterns:qJ,defaultMatchWidth:"wide",parsePatterns:HJ,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Hi({matchPatterns:GJ,defaultMatchWidth:"wide",parsePatterns:KJ,defaultParseWidth:"any"}),day:Hi({matchPatterns:ZJ,defaultMatchWidth:"wide",parsePatterns:YJ,defaultParseWidth:"any"}),dayPeriod:Hi({matchPatterns:QJ,defaultMatchWidth:"any",parsePatterns:XJ,defaultParseWidth:"any"})},fN={code:"en-US",formatDistance:NJ,formatLong:kJ,formatRelative:PJ,localize:FJ,match:JJ,options:{weekStartsOn:0,firstWeekContainsDate:1}};function eee(t){const e=dt(t);return Yi(e,zD(e))+1}function BD(t){const e=dt(t),n=+Rc(e)-+uJ(e);return Math.round(n/uN)+1}function WD(t,e){var f,p,v,_;const n=dt(t),r=n.getFullYear(),i=oh(),a=(e==null?void 0:e.firstWeekContainsDate)??((p=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??i.firstWeekContainsDate??((_=(v=i.locale)==null?void 0:v.options)==null?void 0:_.firstWeekContainsDate)??1,o=hs(t,0);o.setFullYear(r+1,0,a),o.setHours(0,0,0,0);const c=ha(o,e),u=hs(t,0);u.setFullYear(r,0,a),u.setHours(0,0,0,0);const h=ha(u,e);return n.getTime()>=c.getTime()?r+1:n.getTime()>=h.getTime()?r:r-1}function tee(t,e){var c,u,h,f;const n=oh(),r=(e==null?void 0:e.firstWeekContainsDate)??((u=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(h=n.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??1,i=WD(t,e),a=hs(t,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),ha(a,e)}function qD(t,e){const n=dt(t),r=+ha(n,e)-+tee(n,e);return Math.round(r/uN)+1}function Wt(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const To={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Wt(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Wt(n+1,2)},d(t,e){return Wt(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Wt(t.getHours()%12||12,e.length)},H(t,e){return Wt(t.getHours(),e.length)},m(t,e){return Wt(t.getMinutes(),e.length)},s(t,e){return Wt(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Wt(i,e.length)}},Cu={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},JC={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return To.y(t,e)},Y:function(t,e,n,r){const i=WD(t,r),a=i>0?i:1-i;if(e==="YY"){const o=a%100;return Wt(o,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):Wt(a,e.length)},R:function(t,e){const n=VD(t);return Wt(n,e.length)},u:function(t,e){const n=t.getFullYear();return Wt(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Wt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Wt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return To.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Wt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=qD(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):Wt(i,e.length)},I:function(t,e,n){const r=BD(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Wt(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):To.d(t,e)},D:function(t,e,n){const r=eee(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Wt(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return Wt(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return Wt(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Wt(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=Cu.noon:r===0?i=Cu.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=Cu.evening:r>=12?i=Cu.afternoon:r>=4?i=Cu.morning:i=Cu.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return To.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):To.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Wt(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Wt(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):To.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):To.s(t,e)},S:function(t,e){return To.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return tk(r);case"XXXX":case"XX":return Xl(r);case"XXXXX":case"XXX":default:return Xl(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return tk(r);case"xxxx":case"xx":return Xl(r);case"xxxxx":case"xxx":default:return Xl(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+ek(r,":");case"OOOO":default:return"GMT"+Xl(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+ek(r,":");case"zzzz":default:return"GMT"+Xl(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return Wt(r,e.length)},T:function(t,e,n){const r=t.getTime();return Wt(r,e.length)}};function ek(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),a=r%60;return a===0?n+String(i):n+String(i)+e+Wt(a,2)}function tk(t,e){return t%60===0?(t>0?"-":"+")+Wt(Math.abs(t)/60,2):Xl(t,e)}function Xl(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Wt(Math.trunc(r/60),2),a=Wt(r%60,2);return n+i+e+a}const nk=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},HD=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},nee=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return nk(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",nk(r,e)).replace("{{time}}",HD(i,e))},ree={p:HD,P:nee},see=/^D+$/,iee=/^Y+$/,aee=["D","DD","YY","YYYY"];function oee(t){return see.test(t)}function lee(t){return iee.test(t)}function cee(t,e,n){const r=uee(t,e,n);if(console.warn(r),aee.includes(t))throw new RangeError(r)}function uee(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const dee=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,hee=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,fee=/^'([^]*?)'?$/,mee=/''/g,pee=/[a-zA-Z]/;function sr(t,e,n){var f,p,v,_,N,j,S,w;const r=oh(),i=(n==null?void 0:n.locale)??r.locale??fN,a=(n==null?void 0:n.firstWeekContainsDate)??((p=(f=n==null?void 0:n.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??r.firstWeekContainsDate??((_=(v=r.locale)==null?void 0:v.options)==null?void 0:_.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((j=(N=n==null?void 0:n.locale)==null?void 0:N.options)==null?void 0:j.weekStartsOn)??r.weekStartsOn??((w=(S=r.locale)==null?void 0:S.options)==null?void 0:w.weekStartsOn)??0,c=dt(t);if(!pJ(c))throw new RangeError("Invalid time value");let u=e.match(hee).map(y=>{const E=y[0];if(E==="p"||E==="P"){const I=ree[E];return I(y,i.formatLong)}return y}).join("").match(dee).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const E=y[0];if(E==="'")return{isToken:!1,value:gee(y)};if(JC[E])return{isToken:!0,value:y};if(E.match(pee))throw new RangeError("Format string contains an unescaped latin alphabet character `"+E+"`");return{isToken:!1,value:y}});i.localize.preprocessor&&(u=i.localize.preprocessor(c,u));const h={firstWeekContainsDate:a,weekStartsOn:o,locale:i};return u.map(y=>{if(!y.isToken)return y.value;const E=y.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&lee(E)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&oee(E))&&cee(E,e,String(t));const I=JC[E[0]];return I(c,E,i.localize,h)}).join("")}function gee(t){const e=t.match(fee);return e?e[1].replace(mee,"'"):t}function vee(t,e,n){const r=oh(),i=(n==null?void 0:n.locale)??r.locale??fN,a=2520,o=Qg(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const c=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o});let u,h;o>0?(u=dt(e),h=dt(t)):(u=dt(t),h=dt(e));const f=bJ(h,u),p=(Rd(h)-Rd(u))/1e3,v=Math.round((f-p)/60);let _;if(v<2)return n!=null&&n.includeSeconds?f<5?i.formatDistance("lessThanXSeconds",5,c):f<10?i.formatDistance("lessThanXSeconds",10,c):f<20?i.formatDistance("lessThanXSeconds",20,c):f<40?i.formatDistance("halfAMinute",0,c):f<60?i.formatDistance("lessThanXMinutes",1,c):i.formatDistance("xMinutes",1,c):v===0?i.formatDistance("lessThanXMinutes",1,c):i.formatDistance("xMinutes",v,c);if(v<45)return i.formatDistance("xMinutes",v,c);if(v<90)return i.formatDistance("aboutXHours",1,c);if(v<XC){const N=Math.round(v/60);return i.formatDistance("aboutXHours",N,c)}else{if(v<a)return i.formatDistance("xDays",1,c);if(v<_g){const N=Math.round(v/XC);return i.formatDistance("xDays",N,c)}else if(v<_g*2)return _=Math.round(v/_g),i.formatDistance("aboutXMonths",_,c)}if(_=wJ(h,u),_<12){const N=Math.round(v/_g);return i.formatDistance("xMonths",N,c)}else{const N=_%12,j=Math.trunc(_/12);return N<3?i.formatDistance("aboutXYears",j,c):N<9?i.formatDistance("overXYears",j,c):i.formatDistance("almostXYears",j+1,c)}}function lh(t,e){return vee(t,mJ(t),e)}function xee(t){const e=dt(t),n=e.getFullYear(),r=e.getMonth(),i=hs(t,0);return i.setFullYear(n,r+1,0),i.setHours(0,0,0,0),i.getDate()}function yee(t){return Math.trunc(+dt(t)/1e3)}function _ee(t){const e=dt(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(0,0,0,0),e}function wee(t,e){return gJ(_ee(t),ds(t),e)+1}function i1(t,e){const n=dt(t),r=dt(e);return n.getTime()>r.getTime()}function GD(t,e){const n=dt(t),r=dt(e);return+n<+r}function mN(t,e){const n=dt(t),r=dt(e);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function bee(t,e){const n=dt(t),r=dt(e);return n.getFullYear()===r.getFullYear()}function u0(t,e){return Br(t,-e)}function d0(t,e){const n=dt(t),r=n.getFullYear(),i=n.getDate(),a=hs(t,0);a.setFullYear(r,e,15),a.setHours(0,0,0,0);const o=xee(a);return n.setMonth(e,Math.min(i,o)),n}function rk(t,e){const n=dt(t);return isNaN(+n)?hs(t,NaN):(n.setFullYear(e),n)}const jee={lessThanXSeconds:{one:"moins d’une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d’une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d’un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu’un an",other:"presque {{count}} ans"}},Nee=(t,e,n)=>{let r;const i=jee[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",String(e)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"dans "+r:"il y a "+r:r},See={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},Eee={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Cee={full:"{{date}} 'à' {{time}}",long:"{{date}} 'à' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},kee={date:ld({formats:See,defaultWidth:"full"}),time:ld({formats:Eee,defaultWidth:"full"}),dateTime:ld({formats:Cee,defaultWidth:"full"})},Tee={lastWeek:"eeee 'dernier à' p",yesterday:"'hier à' p",today:"'aujourd’hui à' p",tomorrow:"'demain à' p'",nextWeek:"eeee 'prochain à' p",other:"P"},Pee=(t,e,n,r)=>Tee[t],Iee={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jésus-Christ","après Jésus-Christ"]},Aee={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2ème trim.","3ème trim.","4ème trim."],wide:["1er trimestre","2ème trimestre","3ème trimestre","4ème trimestre"]},Ree={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],wide:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},Mee={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},Dee={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"après-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l’après-midi",evening:"du soir",night:"du matin"}},Oee=(t,e)=>{const n=Number(t),r=e==null?void 0:e.unit;if(n===0)return"0";const i=["year","week","hour","minute","second"];let a;return n===1?a=r&&i.includes(r)?"ère":"er":a="ème",n+a},Lee=["MMM","MMMM"],Fee={preprocessor:(t,e)=>t.getDate()===1||!e.some(r=>r.isToken&&Lee.includes(r.value))?e:e.map(r=>r.isToken&&r.value==="do"?{isToken:!0,value:"d"}:r),ordinalNumber:Oee,era:qi({values:Iee,defaultWidth:"wide"}),quarter:qi({values:Aee,defaultWidth:"wide",argumentCallback:t=>t-1}),month:qi({values:Ree,defaultWidth:"wide"}),day:qi({values:Mee,defaultWidth:"wide"}),dayPeriod:qi({values:Dee,defaultWidth:"wide"})},Vee=/^(\d+)(ième|ère|ème|er|e)?/i,zee=/\d+/i,Uee={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jésus-Christ|après Jésus-Christ)/i},$ee={any:[/^av/i,/^ap/i]},Bee={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|ème|e)? trim\.?/i,wide:/^[1234](er|ème|e)? trimestre/i},Wee={any:[/1/i,/2/i,/3/i,/4/i]},qee={narrow:/^[jfmasond]/i,abbreviated:/^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\.?/i,wide:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i},Hee={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},Gee={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},Kee={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},Zee={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'après[-\s]midi|du soir|de la nuit)/i},Yee={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},Qee={ordinalNumber:$D({matchPattern:Vee,parsePattern:zee,valueCallback:t=>parseInt(t)}),era:Hi({matchPatterns:Uee,defaultMatchWidth:"wide",parsePatterns:$ee,defaultParseWidth:"any"}),quarter:Hi({matchPatterns:Bee,defaultMatchWidth:"wide",parsePatterns:Wee,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Hi({matchPatterns:qee,defaultMatchWidth:"wide",parsePatterns:Hee,defaultParseWidth:"any"}),day:Hi({matchPatterns:Gee,defaultMatchWidth:"wide",parsePatterns:Kee,defaultParseWidth:"any"}),dayPeriod:Hi({matchPatterns:Zee,defaultMatchWidth:"any",parsePatterns:Yee,defaultParseWidth:"any"})},Mr={code:"fr",formatDistance:Nee,formatLong:kee,formatRelative:Pee,localize:Fee,match:Qee,options:{weekStartsOn:1,firstWeekContainsDate:4}},wm=({listing:t})=>{var p,v,_,N,j,S;const e=(w,y)=>{if(t.transactionType==="donation")return"Gratuit";if(t.transactionType==="exchange")return"Échange";const E=y;try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:E}).format(w)}catch{return`${w} €`}},n=w=>{switch(w){case"new":return"bg-emerald-100 text-emerald-700 border-emerald-200";case"like-new":return"bg-blue-100 text-blue-700 border-blue-200";case"good":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"fair":return"bg-orange-100 text-orange-700 border-orange-200";case"poor":return"bg-red-100 text-red-700 border-red-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},r=w=>{switch(w){case"new":return"Neuf";case"like-new":return"Comme neuf";case"good":return"Bon état";case"fair":return"État correct";case"poor":return"Mauvais état";default:return w}},i=()=>{switch(t.transactionType){case"donation":return s.jsx(kd,{className:"w-3 h-3"});case"exchange":return s.jsx(to,{className:"w-3 h-3"});default:return null}},a=()=>{switch(t.transactionType){case"donation":return"bg-green-500 text-white hover:bg-green-600";case"exchange":return"bg-purple-500 text-white hover:bg-purple-600";default:return"bg-primary text-white hover:bg-primary/90"}},o=w=>{try{let y;if(!w)return"Date inconnue";if(w instanceof Date)y=w;else if(typeof w=="string"||typeof w=="number")y=new Date(w);else if(w&&typeof w.toDate=="function")y=w.toDate();else if(w&&typeof w=="object"&&"seconds"in w)y=new Date(w.seconds*1e3);else return"Date inconnue";return isNaN(y.getTime())?"Date inconnue":lh(y,{addSuffix:!0,locale:Mr})}catch{return"Date inconnue"}},c=t.price||0,u=t.currency||"EUR",h=t.condition||"good",f=t.transactionType||"sale";return s.jsxs(ae,{className:"group relative bg-white dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-800 hover:border-gray-300 dark:hover:border-gray-700 shadow-sm dark:shadow-lg hover:shadow-lg transition-all duration-300 overflow-hidden w-full max-w-sm",children:[s.jsx(Te,{to:`/listing/${t.id}`,className:"block",children:s.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden bg-gray-100",children:[s.jsx("img",{src:((p=t.images)==null?void 0:p[0])||"/assets/image.png",alt:t.title,className:"w-full h-full object-cover group-hover:scale-[1.02] transition-transform duration-500"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/10 via-transparent to-black/20 pointer-events-none"}),s.jsxs("div",{className:"absolute top-3 right-3 flex flex-col gap-2",children:[s.jsx(LD,{listing:t,size:"sm",className:"bg-white/90 backdrop-blur-sm hover:bg-white shadow-sm border-0 rounded-full p-2"}),s.jsx(FD,{listing:t,size:"sm",className:"bg-white/90 backdrop-blur-sm hover:bg-white shadow-sm border-0 rounded-full p-2"})]}),f!=="sale"&&s.jsxs(et,{className:`absolute top-3 left-3 ${a()} border-0 shadow-sm font-medium px-3 py-1.5 rounded-full`,children:[i(),s.jsx("span",{className:"ml-1.5 text-sm",children:f==="donation"?"Don":"Troc"})]}),f==="sale"&&s.jsx(et,{className:`absolute top-3 left-3 ${n(h)} font-medium px-3 py-1.5 rounded-full shadow-sm`,children:r(h)}),t.environmentalImpact&&s.jsxs(et,{className:"absolute bottom-3 left-3 bg-emerald-500 text-white border-0 shadow-sm font-medium px-3 py-1.5 rounded-full",children:[s.jsx(_i,{className:"w-3 h-3 mr-1.5"}),"-",t.environmentalImpact.co2Saved,"kg CO₂"]}),t.images&&t.images.length>1&&s.jsxs("div",{className:"absolute bottom-3 right-3 bg-black/70 backdrop-blur-sm text-white text-sm px-2.5 py-1 rounded-full font-medium",children:["+",t.images.length-1]})]})}),s.jsxs(oe,{className:"p-6 space-y-4",children:[s.jsxs(Te,{to:`/listing/${t.id}`,className:"block",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("span",{className:`text-2xl font-bold ${f==="donation"?"text-green-600":f==="exchange"?"text-purple-600":"text-slate-900 dark:text-white"}`,children:e(c,u)}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500 bg-gray-50 px-2.5 py-1 rounded-full",children:[s.jsx(Cd,{className:"w-3.5 h-3.5"}),s.jsx("span",{className:"font-medium",children:t.views||0})]})]}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white line-clamp-2 mb-3 leading-tight text-left",children:t.title||"Sans titre"}),f==="exchange"&&t.exchangeFor&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 bg-purple-50 px-3 py-2 rounded-lg mb-4",children:[s.jsx(to,{className:"w-4 h-4 text-purple-500"}),s.jsxs("span",{children:[s.jsx("span",{className:"font-medium",children:"Contre:"})," ",t.exchangeFor]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-4",children:[s.jsxs("div",{className:"flex items-center gap-1.5 flex-1 min-w-0",children:[s.jsx(Ar,{className:"w-4 h-4 text-gray-500 dark:text-gray-300"}),s.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-semibold truncate",children:((v=t.location)==null?void 0:v.campus)||((_=t.location)!=null&&_.city&&((N=t.location)!=null&&N.state)?`${t.location.city}, ${t.location.state}`:"Localisation non spécifiée")})]}),s.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0 ml-3",children:[s.jsx(Vn,{className:"w-4 h-4 text-gray-500 dark:text-gray-300"}),s.jsx("span",{className:"text-gray-600 dark:text-gray-300 whitespace-nowrap",children:o(t.createdAt)})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsxs(so,{className:"w-9 h-9 border-2 border-gray-100",children:[s.jsx(io,{src:t.sellerAvatar}),s.jsx(ao,{className:"text-sm bg-gray-100 text-gray-600 font-medium",children:((S=(j=t.sellerName)==null?void 0:j[0])==null?void 0:S.toUpperCase())||"U"})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:"text-sm font-medium text-gray-900 truncate",children:t.sellerName||"Utilisateur"}),t.sellerVerified&&s.jsx(Vt,{className:"w-4 h-4 text-green-500 flex-shrink-0"})]}),s.jsx("span",{className:"text-xs text-gray-500 truncate block text-left",children:s.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-semibold",children:t.sellerUniversity||"Université non spécifiée"})})]})]}),t.aiPriceEstimate&&f==="sale"&&s.jsx(et,{className:"bg-green-50 text-green-700 border-green-200 hover:bg-green-100 text-xs font-medium px-2.5 py-1 rounded-full flex-shrink-0 ml-2",children:"Prix juste ✓"})]})]})]})};var KD={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},sk=Pe.createContext&&Pe.createContext(KD),Xee=["attr","size","title"];function Jee(t,e){if(t==null)return{};var n=ete(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ete(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function sx(){return sx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sx.apply(this,arguments)}function ik(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ix(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ik(Object(n),!0).forEach(function(r){tte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ik(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tte(t,e,n){return e=nte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nte(t){var e=rte(t,"string");return typeof e=="symbol"?e:e+""}function rte(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ZD(t){return t&&t.map((e,n)=>Pe.createElement(e.tag,ix({key:n},e.attr),ZD(e.child)))}function Il(t){return e=>Pe.createElement(ste,sx({attr:ix({},t.attr)},e),ZD(t.child))}function ste(t){var e=n=>{var{attr:r,size:i,title:a}=t,o=Jee(t,Xee),c=i||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),Pe.createElement("svg",sx({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:u,style:ix(ix({color:t.color||n.color},n.style),t.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),a&&Pe.createElement("title",null,a),t.children)};return sk!==void 0?Pe.createElement(sk.Consumer,null,n=>e(n)):e(KD)}function ite(t){return Il({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M16 9.226l-8-6.21-8 6.21v-2.532l8-6.21 8 6.21zM14 9v6h-4v-4h-4v4h-4v-6l6-4.5z"},child:[]}]})(t)}function ate(t){return Il({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M14 2v13h-10.5c-0.829 0-1.5-0.672-1.5-1.5s0.671-1.5 1.5-1.5h9.5v-12h-10c-1.1 0-2 0.9-2 2v12c0 1.1 0.9 2 2 2h12v-14h-1z"},child:[]},{tag:"path",attr:{d:"M3.501 13v0c-0 0-0.001 0-0.001 0-0.276 0-0.5 0.224-0.5 0.5s0.224 0.5 0.5 0.5c0 0 0.001-0 0.001-0v0h9.498v-1h-9.498z"},child:[]}]})(t)}function ote(t){return Il({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0c-2.761 0-5 2.239-5 5 0 5 5 11 5 11s5-6 5-11c0-2.761-2.239-5-5-5zM8 8c-1.657 0-3-1.343-3-3s1.343-3 3-3 3 1.343 3 3-1.343 3-3 3z"},child:[]}]})(t)}function lte(t){return Il({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M11.5 0h-7c-0.825 0-1.5 0.675-1.5 1.5v13c0 0.825 0.675 1.5 1.5 1.5h7c0.825 0 1.5-0.675 1.5-1.5v-13c0-0.825-0.675-1.5-1.5-1.5zM6 0.75h4v0.5h-4v-0.5zM8 15c-0.552 0-1-0.448-1-1s0.448-1 1-1 1 0.448 1 1-0.448 1-1 1zM12 12h-8v-10h8v10z"},child:[]}]})(t)}function cte(t){return Il({attr:{version:"1.1",viewBox:"0 0 18 16"},child:[{tag:"path",attr:{d:"M12 12.041v-0.825c1.102-0.621 2-2.168 2-3.716 0-2.485 0-4.5-3-4.5s-3 2.015-3 4.5c0 1.548 0.898 3.095 2 3.716v0.825c-3.392 0.277-6 1.944-6 3.959h14c0-2.015-2.608-3.682-6-3.959z"},child:[]},{tag:"path",attr:{d:"M5.112 12.427c0.864-0.565 1.939-0.994 3.122-1.256-0.235-0.278-0.449-0.588-0.633-0.922-0.475-0.863-0.726-1.813-0.726-2.748 0-1.344 0-2.614 0.478-3.653 0.464-1.008 1.299-1.633 2.488-1.867-0.264-1.195-0.968-1.98-2.841-1.98-3 0-3 2.015-3 4.5 0 1.548 0.898 3.095 2 3.716v0.825c-3.392 0.277-6 1.944-6 3.959h4.359c0.227-0.202 0.478-0.393 0.753-0.573z"},child:[]}]})(t)}function ute(t){return Il({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5 3c0-1.657 1.343-3 3-3s3 1.343 3 3c0 1.657-1.343 3-3 3s-3-1.343-3-3zM12.001 7h-0.553l-3.111 6.316 1.163-5.816-1.5-1.5-1.5 1.5 1.163 5.816-3.111-6.316h-0.554c-1.999 0-1.999 1.344-1.999 3v5h12v-5c0-1.656 0-3-1.999-3z"},child:[]}]})(t)}function dte(t){return Il({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0c-4.355 0-7.898 3.481-7.998 7.812 0.092-3.779 2.966-6.812 6.498-6.812 3.59 0 6.5 3.134 6.5 7 0 0.828 0.672 1.5 1.5 1.5s1.5-0.672 1.5-1.5c0-4.418-3.582-8-8-8zM8 16c4.355 0 7.898-3.481 7.998-7.812-0.092 3.779-2.966 6.812-6.498 6.812-3.59 0-6.5-3.134-6.5-7 0-0.828-0.672-1.5-1.5-1.5s-1.5 0.672-1.5 1.5c0 4.418 3.582 8 8 8z"},child:[]}]})(t)}function hte(t){return Il({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M12.055 5c0.283-0.201 0.555-0.425 0.804-0.674 0.522-0.522 0.871-1.164 0.983-1.808 0.123-0.706-0.057-1.362-0.494-1.798-0.348-0.348-0.82-0.533-1.365-0.533-0.775 0-1.593 0.372-2.242 1.021-1.039 1.039-1.644 2.472-1.97 3.496-0.241-1.028-0.722-2.416-1.657-3.351-0.501-0.501-1.142-0.759-1.748-0.759-0.495 0-0.965 0.172-1.317 0.523-0.781 0.781-0.675 2.153 0.236 3.064 0.325 0.325 0.705 0.595 1.105 0.819h-3.391v4h1v7h12v-7h1v-4h-2.945zM10.536 2.003c0.433-0.433 0.974-0.692 1.446-0.692 0.167 0 0.402 0.035 0.57 0.203 0.407 0.407 0.178 1.349-0.489 2.016-0.687 0.687-1.61 1.159-2.413 1.47h-0.792c0.29-0.899 0.813-2.132 1.678-2.997zM3.655 2.514c-0.011-0.143-0.001-0.41 0.191-0.601 0.16-0.16 0.372-0.194 0.521-0.194v0c0.332 0 0.679 0.157 0.952 0.429 0.529 0.529 0.965 1.371 1.26 2.436 0.008 0.029 0.016 0.057 0.023 0.086-0.028-0.008-0.057-0.015-0.086-0.023-1.064-0.295-1.906-0.731-2.436-1.26-0.247-0.247-0.403-0.565-0.426-0.872zM7 15h-4v-6.5h4v6.5zM7 8h-5v-2h5v2zM13 15h-4v-6.5h4v6.5zM14 8h-5v-2h5v2z"},child:[]}]})(t)}const fte=()=>{const[t,e]=x.useState(""),n=ar(),r=i=>{i.preventDefault(),t.trim()&&n(`/listings?q=${encodeURIComponent(t.trim())}`)};return s.jsxs("form",{onSubmit:r,className:"flex items-center w-full max-w-2xl mx-auto rounded-full border-2 border-primary/40 bg-white shadow-sm focus-within:ring-2 focus-within:ring-primary/30 transition px-1 sm:px-1",role:"search","aria-label":"Recherche",children:[s.jsx("span",{className:"pl-0 sm:pl-4 text-gray-400",children:s.jsx(xr,{className:"w-5 h-5"})}),s.jsx("input",{type:"text",className:"flex-1 bg-transparent outline-none border-0 px-2 sm:px-4 py-2 sm:py-3 text-base rounded-l-full min-w-0",placeholder:"Rechercher parmi les étudiants de votre région...",value:t,onChange:i=>e(i.target.value),"aria-label":"Rechercher"}),s.jsx("button",{type:"submit",className:"rounded-full bg-gradient-to-r from-primary to-secondary text-white font-semibold px-3 sm:px-6 py-2 m-1 transition hover:from-primary/90 hover:to-secondary/90 focus:outline-none whitespace-nowrap text-sm sm:text-base",children:"Rechercher"})]})},ak={electronics:"/StudyMarket/assets/Icon/Gradient/electronic.svg",books:"/StudyMarket/assets/Icon/Gradient/livre.svg",furniture:"/StudyMarket/assets/Icon/Gradient/mobilier.svg",housing:"/StudyMarket/assets/Icon/Gradient/logement.svg",services:"/StudyMarket/assets/Icon/Gradient/services.svg",jobs:"/StudyMarket/assets/Icon/Gradient/job.svg",donations:"/StudyMarket/assets/Icon/Gradient/don.svg",exchange:"/StudyMarket/assets/Icon/Gradient/troc.svg"},mte=()=>s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/launch.svg",alt:"Trending Up",className:"w-50 h-50"}),pte=()=>s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/handshake.svg",alt:"Trending Up",className:"w-50 h-50"}),gte=()=>s.jsx("img",{src:"/StudyMarket/assets/Icon/Gradient/refresh.svg",alt:"Trending Up",className:"w-50 h-50"}),vte=()=>s.jsx("img",{src:"/StudyMarket/assets/Icon/Bleu/chat.svg",alt:"Trending Up",className:"w-50 h-50"}),xte=[{id:"electronics",name:"Électronique",icon:lte,color:"text-blue-600",description:"Ordinateurs, téléphones, accessoires tech"},{id:"books",name:"Livres & Cours",icon:ate,color:"text-blue-600",description:"Manuels, livres, notes de cours"},{id:"furniture",name:"Mobilier",icon:ite,color:"text-blue-600",description:"Meubles, déco, électroménager"},{id:"housing",name:"Logement",icon:ote,color:"text-blue-600",description:"Colocations, studios, chambres"},{id:"services",name:"Services",icon:cte,color:"text-blue-600",description:"Cours particuliers, aide, babysitting"},{id:"jobs",name:"Jobs & Stages",icon:ute,color:"text-blue-600",description:"Petits boulots, stages, missions"},{id:"donations",name:"Dons",icon:hte,color:"text-blue-600",description:"Objets gratuits, entraide"},{id:"exchange",name:"Troc",icon:dte,color:"text-blue-600",description:"Échanges de services et objets"}],yte=[{icon:Vt,title:"Étudiants vérifiés uniquement",description:'Chaque membre est vérifié avec son adresse universitaire. Badge "Étudiant certifié" sur tous les profils.'},{icon:vte,title:"Chat sécurisé intégré",description:"Messagerie avec proposition de rendez-vous, points de rencontre campus et protection des données."},{icon:_i,title:"Impact écologique mesuré",description:"Suivez votre impact environnemental : CO₂ économisé, ressources préservées grâce à vos achats d'occasion."},{icon:y4,title:"Avis publics et réputation",description:"Système de notation transparent. Consultez les avis avant chaque transaction pour échanger en confiance."}],_te=[{title:"Vendre rapidement",description:"Publiez votre annonce en moins d'une minute",icon:mte,link:"/create",color:"border-2 border-green-500 text-green-500"},{title:"Donner gratuitement",description:"Offrez ce dont vous n'avez plus besoin",icon:pte,link:"/create?type=donation",color:"border-2 border-green-500 text-green-500"},{title:"Proposer un troc",description:"Échangez services et objets sans argent",icon:gte,link:"/create?type=exchange",color:"border-2 border-green-500 text-green-500"}],wte=()=>{const{featuredListings:t,fetchFeaturedListings:e}=ap();return x.useEffect(()=>{e()},[e]),s.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4 bg-gray-50 dark:bg-gray-950 min-h-screen",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-8",children:"Bienvenue sur StudyMarket"}),s.jsx("section",{className:"relative bg-gradient-to-br from-primary/10 via-background to-secondary/10 py-8 sm:py-16 px-4",children:s.jsxs("div",{className:"container mx-auto text-center max-w-4xl",children:[s.jsx("div",{className:"flex items-center justify-center mb-4 sm:mb-6",children:s.jsxs(et,{className:"bg-green-100 text-green-800 border-green-200 px-3 py-1.5 sm:px-4 sm:py-2",children:[s.jsx(Vt,{className:"w-4 h-4 mr-2"}),"Communauté 100% étudiants vérifiés"]})}),s.jsx("h1",{className:"text-2xl sm:text-4xl md:text-5xl font-bold mb-4 sm:mb-6 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"La marketplace des étudiants"}),s.jsx("p",{className:"text-base sm:text-lg text-muted-foreground mb-6 sm:mb-8 max-w-2xl mx-auto",children:"Achetez, vendez, donnez et échangez entre étudiants certifiés de votre région. Sécurisé, écologique et pensé pour la vie étudiante."}),s.jsx("div",{className:"mb-6 sm:mb-8 px-4",children:s.jsx(fte,{})}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-6 sm:mb-8",children:_te.map((n,r)=>s.jsx(Te,{to:n.link,className:"group",children:s.jsx(ae,{className:"border-2 hover:border-primary/20 transition-all duration-300 hover:shadow-lg hover:-translate-y-1",children:s.jsxs(oe,{className:"p-4 text-center",children:[s.jsx("div",{className:`w-12 h-12 ${n.color} rounded-full flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform`,children:s.jsx(n.icon,{})}),s.jsx("h3",{className:"font-semibold mb-1",children:n.title}),s.jsx("p",{className:"text-sm text-muted-foreground",children:n.description})]})})},r))}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[s.jsx(Y,{size:"lg",asChild:!0,className:"bg-gradient-to-r from-primary to-secondary w-full sm:w-auto",children:s.jsxs(Te,{to:"/listings",children:["Parcourir les annonces",s.jsx(mm,{className:"w-4 h-4 ml-2"})]})}),s.jsx(Y,{size:"lg",variant:"outline",asChild:!0,className:"w-full sm:w-auto",children:s.jsx(Te,{to:"/auth",children:"Rejoindre la communauté"})})]})]})}),s.jsx("section",{className:"py-10 sm:py-16 px-4",children:s.jsxs("div",{className:"container mx-auto",children:[s.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-center mb-3 sm:mb-4",children:"Catégories étudiantes"}),s.jsx("p",{className:"text-center text-muted-foreground mb-8 sm:mb-12 max-w-2xl mx-auto text-sm sm:text-base",children:"Des catégories pensées spécifiquement pour la vie étudiante, avec des filtres adaptés à vos besoins"}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:xte.map(n=>n.id==="jobs"?s.jsx(Te,{to:"/jobs",className:"group",children:s.jsx(ae,{className:"h-full transition-all duration-300 hover:shadow-lg hover:-translate-y-1 border-2 hover:border-primary/20",children:s.jsxs(oe,{className:"p-4 text-center",children:[s.jsx("img",{src:ak[n.id],alt:n.name,className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-3"}),s.jsx("h3",{className:"font-semibold text-sm mb-1",children:n.name}),s.jsx("p",{className:"text-xs text-muted-foreground",children:n.description})]})})},n.id):s.jsx(Te,{to:`/listings?category=${n.id}`,className:"group",children:s.jsx(ae,{className:"h-full transition-all duration-300 hover:shadow-lg hover:-translate-y-1 border-2 hover:border-primary/20",children:s.jsxs(oe,{className:"p-4 text-center",children:[s.jsx("img",{src:ak[n.id],alt:n.name,className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-3"}),s.jsx("h3",{className:"font-semibold text-sm mb-1",children:n.name}),s.jsx("p",{className:"text-xs text-muted-foreground",children:n.description})]})})},n.id))})]})}),t.length>0&&s.jsx("section",{className:"py-16 px-4 bg-muted/30",children:s.jsxs("div",{className:"container mx-auto",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-8 sm:mb-12 gap-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-2",children:"Annonces récentes"}),s.jsx("p",{className:"text-muted-foreground",children:"Les dernières offres de la communauté étudiante"})]}),s.jsx(Y,{variant:"outline",asChild:!0,children:s.jsxs(Te,{to:"/listings",children:["Voir tout",s.jsx(mm,{className:"w-4 h-4 ml-2"})]})})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.slice(0,6).map(n=>s.jsx(wm,{listing:n},n.id))})]})}),s.jsx("section",{className:"py-16 px-4",children:s.jsxs("div",{className:"container mx-auto",children:[s.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-center mb-4",children:"Pourquoi StudyMarket ?"}),s.jsx("p",{className:"text-center text-muted-foreground mb-12 max-w-2xl mx-auto",children:"Une plateforme pensée par et pour les étudiants, avec des fonctionnalités uniques pour votre sécurité et votre tranquillité d'esprit"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:yte.map((n,r)=>s.jsx(ae,{className:"border-0 shadow-none",children:s.jsx(oe,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0",children:s.jsx(n.icon,{className:"w-5 h-5 sm:w-6 sm:h-6 text-primary"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-2",children:n.title}),s.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:n.description})]})]})})},r))})]})}),s.jsx("section",{className:"py-16 px-4 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-950/20 dark:to-emerald-950/20",children:s.jsx("div",{className:"container mx-auto text-center",children:s.jsxs("div",{className:"max-w-3xl mx-auto",children:[s.jsx(_i,{className:"w-12 h-12 sm:w-16 sm:h-16 text-green-600 mx-auto mb-6"}),s.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-4",children:"Votre impact écologique compte"}),s.jsx("p",{className:"text-base sm:text-xl text-muted-foreground mb-8",children:"Chaque achat d'occasion évite la production d'un objet neuf. Suivez votre impact environnemental et découvrez combien de CO₂ vous économisez grâce à vos échanges étudiants."}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6 mb-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-green-600 mb-2",children:"2.5T"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"CO₂ économisé par la communauté"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-green-600 mb-2",children:"15K"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Objets donnés cette année"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-green-600 mb-2",children:"8K"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Étudiants engagés"})]})]}),s.jsx(Y,{size:"lg",variant:"outline",className:"border-green-600 text-green-600 hover:bg-green-600 hover:text-white",children:s.jsx(Te,{to:"/impact",className:"cursor-pointer",children:"Découvrir mon impact"})})]})})}),s.jsx("section",{className:"py-16 px-4 bg-gradient-to-r from-primary to-secondary",children:s.jsxs("div",{className:"container mx-auto text-center",children:[s.jsx(Xd,{className:"w-12 h-12 sm:w-16 sm:h-16 text-white mx-auto mb-6"}),s.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-4",children:"Rejoignez la communauté étudiante"}),s.jsx("p",{className:"text-base sm:text-xl text-white/90 mb-8 max-w-2xl mx-auto",children:"Plus de 10 000 étudiants font déjà confiance à StudyMarket pour leurs achats, ventes et échanges. Rejoignez une communauté sûre, vérifiée et solidaire."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsx(Y,{size:"lg",variant:"secondary",asChild:!0,children:s.jsxs(Te,{to:"/auth",children:[s.jsx(Vt,{className:"w-4 h-4 mr-2"}),"Inscription vérifiée"]})}),s.jsx(Y,{size:"lg",variant:"outline",className:"border-white text-white bg-transparent hover:bg-white hover:text-primary",asChild:!0,children:s.jsx(Te,{to:"/listings",children:"Commencer à explorer"})})]})]})})]})};function bm(t,[e,n]){return Math.min(n,Math.max(e,t))}function Ay(t){const e=x.useRef({value:t,previous:t});return x.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var YD=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),bte="VisuallyHidden",jte=x.forwardRef((t,e)=>s.jsx(ze.span,{...t,ref:e,style:{...YD,...t.style}}));jte.displayName=bte;var Nte=[" ","Enter","ArrowUp","ArrowDown"],Ste=[" ","Enter"],Mc="Select",[Ry,My,Ete]=Qm(Mc),[ch,tce]=jr(Mc,[Ete,sh]),Dy=sh(),[Cte,Al]=ch(Mc),[kte,Tte]=ch(Mc),QD=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:a,value:o,defaultValue:c,onValueChange:u,dir:h,name:f,autoComplete:p,disabled:v,required:_,form:N}=t,j=Dy(e),[S,w]=x.useState(null),[y,E]=x.useState(null),[I,D]=x.useState(!1),B=Gc(h),[R,F]=Ts({prop:r,defaultProp:i??!1,onChange:a,caller:Mc}),[V,k]=Ts({prop:o,defaultProp:c,onChange:u,caller:Mc}),M=x.useRef(null),O=S?N||!!S.closest("form"):!0,[P,W]=x.useState(new Set),X=Array.from(P).map(ee=>ee.props.value).join(";");return s.jsx(Xj,{...j,children:s.jsxs(Cte,{required:_,scope:e,trigger:S,onTriggerChange:w,valueNode:y,onValueNodeChange:E,valueNodeHasChildren:I,onValueNodeHasChildrenChange:D,contentId:Es(),value:V,onValueChange:k,open:R,onOpenChange:F,dir:B,triggerPointerDownPosRef:M,disabled:v,children:[s.jsx(Ry.Provider,{scope:e,children:s.jsx(kte,{scope:t.__scopeSelect,onNativeOptionAdd:x.useCallback(ee=>{W(Z=>new Set(Z).add(ee))},[]),onNativeOptionRemove:x.useCallback(ee=>{W(Z=>{const U=new Set(Z);return U.delete(ee),U})},[]),children:n})}),O?s.jsxs(wO,{"aria-hidden":!0,required:_,tabIndex:-1,name:f,autoComplete:p,value:V,onChange:ee=>k(ee.target.value),disabled:v,form:N,children:[V===void 0?s.jsx("option",{value:""}):null,Array.from(P)]},X):null]})})};QD.displayName=Mc;var XD="SelectTrigger",JD=x.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,a=Dy(n),o=Al(XD,n),c=o.disabled||r,u=ot(e,o.onTriggerChange),h=My(n),f=x.useRef("touch"),[p,v,_]=jO(j=>{const S=h().filter(E=>!E.disabled),w=S.find(E=>E.value===o.value),y=NO(S,j,w);y!==void 0&&o.onValueChange(y.value)}),N=j=>{c||(o.onOpenChange(!0),_()),j&&(o.triggerPointerDownPosRef.current={x:Math.round(j.pageX),y:Math.round(j.pageY)})};return s.jsx(by,{asChild:!0,...a,children:s.jsx(ze.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":bO(o.value)?"":void 0,...i,ref:u,onClick:Ee(i.onClick,j=>{j.currentTarget.focus(),f.current!=="mouse"&&N(j)}),onPointerDown:Ee(i.onPointerDown,j=>{f.current=j.pointerType;const S=j.target;S.hasPointerCapture(j.pointerId)&&S.releasePointerCapture(j.pointerId),j.button===0&&j.ctrlKey===!1&&j.pointerType==="mouse"&&(N(j),j.preventDefault())}),onKeyDown:Ee(i.onKeyDown,j=>{const S=p.current!=="";!(j.ctrlKey||j.altKey||j.metaKey)&&j.key.length===1&&v(j.key),!(S&&j.key===" ")&&Nte.includes(j.key)&&(N(),j.preventDefault())})})})});JD.displayName=XD;var eO="SelectValue",tO=x.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:a,placeholder:o="",...c}=t,u=Al(eO,n),{onValueNodeHasChildrenChange:h}=u,f=a!==void 0,p=ot(e,u.onValueNodeChange);return Un(()=>{h(f)},[h,f]),s.jsx(ze.span,{...c,ref:p,style:{pointerEvents:"none"},children:bO(u.value)?s.jsx(s.Fragment,{children:o}):a})});tO.displayName=eO;var Pte="SelectIcon",nO=x.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return s.jsx(ze.span,{"aria-hidden":!0,...i,ref:e,children:r||"▼"})});nO.displayName=Pte;var Ite="SelectPortal",rO=t=>s.jsx(tp,{asChild:!0,...t});rO.displayName=Ite;var Dc="SelectContent",sO=x.forwardRef((t,e)=>{const n=Al(Dc,t.__scopeSelect),[r,i]=x.useState();if(Un(()=>{i(new DocumentFragment)},[]),!n.open){const a=r;return a?Hd.createPortal(s.jsx(iO,{scope:t.__scopeSelect,children:s.jsx(Ry.Slot,{scope:t.__scopeSelect,children:s.jsx("div",{children:t.children})})}),a):null}return s.jsx(aO,{...t,ref:e})});sO.displayName=Dc;var ui=10,[iO,Rl]=ch(Dc),Ate="SelectContentImpl",Rte=yl("SelectContent.RemoveScroll"),aO=x.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:o,side:c,sideOffset:u,align:h,alignOffset:f,arrowPadding:p,collisionBoundary:v,collisionPadding:_,sticky:N,hideWhenDetached:j,avoidCollisions:S,...w}=t,y=Al(Dc,n),[E,I]=x.useState(null),[D,B]=x.useState(null),R=ot(e,ce=>I(ce)),[F,V]=x.useState(null),[k,M]=x.useState(null),O=My(n),[P,W]=x.useState(!1),X=x.useRef(!1);x.useEffect(()=>{if(E)return Ny(E)},[E]),vy();const ee=x.useCallback(ce=>{const[xe,...Fe]=O().map(Re=>Re.ref.current),[je]=Fe.slice(-1),Ce=document.activeElement;for(const Re of ce)if(Re===Ce||(Re==null||Re.scrollIntoView({block:"nearest"}),Re===xe&&D&&(D.scrollTop=0),Re===je&&D&&(D.scrollTop=D.scrollHeight),Re==null||Re.focus(),document.activeElement!==Ce))return},[O,D]),Z=x.useCallback(()=>ee([F,E]),[ee,F,E]);x.useEffect(()=>{P&&Z()},[P,Z]);const{onOpenChange:U,triggerPointerDownPosRef:q}=y;x.useEffect(()=>{if(E){let ce={x:0,y:0};const xe=je=>{var Ce,Re;ce={x:Math.abs(Math.round(je.pageX)-(((Ce=q.current)==null?void 0:Ce.x)??0)),y:Math.abs(Math.round(je.pageY)-(((Re=q.current)==null?void 0:Re.y)??0))}},Fe=je=>{ce.x<=10&&ce.y<=10?je.preventDefault():E.contains(je.target)||U(!1),document.removeEventListener("pointermove",xe),q.current=null};return q.current!==null&&(document.addEventListener("pointermove",xe),document.addEventListener("pointerup",Fe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",xe),document.removeEventListener("pointerup",Fe,{capture:!0})}}},[E,U,q]),x.useEffect(()=>{const ce=()=>U(!1);return window.addEventListener("blur",ce),window.addEventListener("resize",ce),()=>{window.removeEventListener("blur",ce),window.removeEventListener("resize",ce)}},[U]);const[H,Q]=jO(ce=>{const xe=O().filter(Ce=>!Ce.disabled),Fe=xe.find(Ce=>Ce.ref.current===document.activeElement),je=NO(xe,ce,Fe);je&&setTimeout(()=>je.ref.current.focus())}),he=x.useCallback((ce,xe,Fe)=>{const je=!X.current&&!Fe;(y.value!==void 0&&y.value===xe||je)&&(V(ce),je&&(X.current=!0))},[y.value]),ye=x.useCallback(()=>E==null?void 0:E.focus(),[E]),Ue=x.useCallback((ce,xe,Fe)=>{const je=!X.current&&!Fe;(y.value!==void 0&&y.value===xe||je)&&M(ce)},[y.value]),He=r==="popper"?a1:oO,re=He===a1?{side:c,sideOffset:u,align:h,alignOffset:f,arrowPadding:p,collisionBoundary:v,collisionPadding:_,sticky:N,hideWhenDetached:j,avoidCollisions:S}:{};return s.jsx(iO,{scope:n,content:E,viewport:D,onViewportChange:B,itemRefCallback:he,selectedItem:F,onItemLeave:ye,itemTextRefCallback:Ue,focusSelectedItem:Z,selectedItemText:k,position:r,isPositioned:P,searchRef:H,children:s.jsx(rp,{as:Rte,allowPinchZoom:!0,children:s.jsx(Jm,{asChild:!0,trapped:y.open,onMountAutoFocus:ce=>{ce.preventDefault()},onUnmountAutoFocus:Ee(i,ce=>{var xe;(xe=y.trigger)==null||xe.focus({preventScroll:!0}),ce.preventDefault()}),children:s.jsx(Xm,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:ce=>ce.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:s.jsx(He,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:ce=>ce.preventDefault(),...w,...re,onPlaced:()=>W(!0),ref:R,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:Ee(w.onKeyDown,ce=>{const xe=ce.ctrlKey||ce.altKey||ce.metaKey;if(ce.key==="Tab"&&ce.preventDefault(),!xe&&ce.key.length===1&&Q(ce.key),["ArrowUp","ArrowDown","Home","End"].includes(ce.key)){let je=O().filter(Ce=>!Ce.disabled).map(Ce=>Ce.ref.current);if(["ArrowUp","End"].includes(ce.key)&&(je=je.slice().reverse()),["ArrowUp","ArrowDown"].includes(ce.key)){const Ce=ce.target,Re=je.indexOf(Ce);je=je.slice(Re+1)}setTimeout(()=>ee(je)),ce.preventDefault()}})})})})})})});aO.displayName=Ate;var Mte="SelectItemAlignedPosition",oO=x.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,a=Al(Dc,n),o=Rl(Dc,n),[c,u]=x.useState(null),[h,f]=x.useState(null),p=ot(e,R=>f(R)),v=My(n),_=x.useRef(!1),N=x.useRef(!0),{viewport:j,selectedItem:S,selectedItemText:w,focusSelectedItem:y}=o,E=x.useCallback(()=>{if(a.trigger&&a.valueNode&&c&&h&&j&&S&&w){const R=a.trigger.getBoundingClientRect(),F=h.getBoundingClientRect(),V=a.valueNode.getBoundingClientRect(),k=w.getBoundingClientRect();if(a.dir!=="rtl"){const Ce=k.left-F.left,Re=V.left-Ce,Me=R.left-Re,lt=R.width+Me,wt=Math.max(lt,F.width),de=window.innerWidth-ui,Ye=bm(Re,[ui,Math.max(ui,de-wt)]);c.style.minWidth=lt+"px",c.style.left=Ye+"px"}else{const Ce=F.right-k.right,Re=window.innerWidth-V.right-Ce,Me=window.innerWidth-R.right-Re,lt=R.width+Me,wt=Math.max(lt,F.width),de=window.innerWidth-ui,Ye=bm(Re,[ui,Math.max(ui,de-wt)]);c.style.minWidth=lt+"px",c.style.right=Ye+"px"}const M=v(),O=window.innerHeight-ui*2,P=j.scrollHeight,W=window.getComputedStyle(h),X=parseInt(W.borderTopWidth,10),ee=parseInt(W.paddingTop,10),Z=parseInt(W.borderBottomWidth,10),U=parseInt(W.paddingBottom,10),q=X+ee+P+U+Z,H=Math.min(S.offsetHeight*5,q),Q=window.getComputedStyle(j),he=parseInt(Q.paddingTop,10),ye=parseInt(Q.paddingBottom,10),Ue=R.top+R.height/2-ui,He=O-Ue,re=S.offsetHeight/2,ce=S.offsetTop+re,xe=X+ee+ce,Fe=q-xe;if(xe<=Ue){const Ce=M.length>0&&S===M[M.length-1].ref.current;c.style.bottom="0px";const Re=h.clientHeight-j.offsetTop-j.offsetHeight,Me=Math.max(He,re+(Ce?ye:0)+Re+Z),lt=xe+Me;c.style.height=lt+"px"}else{const Ce=M.length>0&&S===M[0].ref.current;c.style.top="0px";const Me=Math.max(Ue,X+j.offsetTop+(Ce?he:0)+re)+Fe;c.style.height=Me+"px",j.scrollTop=xe-Ue+j.offsetTop}c.style.margin=`${ui}px 0`,c.style.minHeight=H+"px",c.style.maxHeight=O+"px",r==null||r(),requestAnimationFrame(()=>_.current=!0)}},[v,a.trigger,a.valueNode,c,h,j,S,w,a.dir,r]);Un(()=>E(),[E]);const[I,D]=x.useState();Un(()=>{h&&D(window.getComputedStyle(h).zIndex)},[h]);const B=x.useCallback(R=>{R&&N.current===!0&&(E(),y==null||y(),N.current=!1)},[E,y]);return s.jsx(Ote,{scope:n,contentWrapper:c,shouldExpandOnScrollRef:_,onScrollButtonChange:B,children:s.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:I},children:s.jsx(ze.div,{...i,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});oO.displayName=Mte;var Dte="SelectPopperPosition",a1=x.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=ui,...a}=t,o=Dy(n);return s.jsx(Jj,{...o,...a,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});a1.displayName=Dte;var[Ote,pN]=ch(Dc,{}),o1="SelectViewport",lO=x.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,a=Rl(o1,n),o=pN(o1,n),c=ot(e,a.onViewportChange),u=x.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),s.jsx(Ry.Slot,{scope:n,children:s.jsx(ze.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Ee(i.onScroll,h=>{const f=h.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:v}=o;if(v!=null&&v.current&&p){const _=Math.abs(u.current-f.scrollTop);if(_>0){const N=window.innerHeight-ui*2,j=parseFloat(p.style.minHeight),S=parseFloat(p.style.height),w=Math.max(j,S);if(w<N){const y=w+_,E=Math.min(N,y),I=y-E;p.style.height=E+"px",p.style.bottom==="0px"&&(f.scrollTop=I>0?I:0,p.style.justifyContent="flex-end")}}}u.current=f.scrollTop})})})]})});lO.displayName=o1;var cO="SelectGroup",[Lte,Fte]=ch(cO),Vte=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Es();return s.jsx(Lte,{scope:n,id:i,children:s.jsx(ze.div,{role:"group","aria-labelledby":i,...r,ref:e})})});Vte.displayName=cO;var uO="SelectLabel",dO=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Fte(uO,n);return s.jsx(ze.div,{id:i.id,...r,ref:e})});dO.displayName=uO;var ax="SelectItem",[zte,hO]=ch(ax),fO=x.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:a,...o}=t,c=Al(ax,n),u=Rl(ax,n),h=c.value===r,[f,p]=x.useState(a??""),[v,_]=x.useState(!1),N=ot(e,y=>{var E;return(E=u.itemRefCallback)==null?void 0:E.call(u,y,r,i)}),j=Es(),S=x.useRef("touch"),w=()=>{i||(c.onValueChange(r),c.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(zte,{scope:n,value:r,disabled:i,textId:j,isSelected:h,onItemTextChange:x.useCallback(y=>{p(E=>E||((y==null?void 0:y.textContent)??"").trim())},[]),children:s.jsx(Ry.ItemSlot,{scope:n,value:r,disabled:i,textValue:f,children:s.jsx(ze.div,{role:"option","aria-labelledby":j,"data-highlighted":v?"":void 0,"aria-selected":h&&v,"data-state":h?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:N,onFocus:Ee(o.onFocus,()=>_(!0)),onBlur:Ee(o.onBlur,()=>_(!1)),onClick:Ee(o.onClick,()=>{S.current!=="mouse"&&w()}),onPointerUp:Ee(o.onPointerUp,()=>{S.current==="mouse"&&w()}),onPointerDown:Ee(o.onPointerDown,y=>{S.current=y.pointerType}),onPointerMove:Ee(o.onPointerMove,y=>{var E;S.current=y.pointerType,i?(E=u.onItemLeave)==null||E.call(u):S.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ee(o.onPointerLeave,y=>{var E;y.currentTarget===document.activeElement&&((E=u.onItemLeave)==null||E.call(u))}),onKeyDown:Ee(o.onKeyDown,y=>{var I;((I=u.searchRef)==null?void 0:I.current)!==""&&y.key===" "||(Ste.includes(y.key)&&w(),y.key===" "&&y.preventDefault())})})})})});fO.displayName=ax;var vf="SelectItemText",mO=x.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...a}=t,o=Al(vf,n),c=Rl(vf,n),u=hO(vf,n),h=Tte(vf,n),[f,p]=x.useState(null),v=ot(e,w=>p(w),u.onItemTextChange,w=>{var y;return(y=c.itemTextRefCallback)==null?void 0:y.call(c,w,u.value,u.disabled)}),_=f==null?void 0:f.textContent,N=x.useMemo(()=>s.jsx("option",{value:u.value,disabled:u.disabled,children:_},u.value),[u.disabled,u.value,_]),{onNativeOptionAdd:j,onNativeOptionRemove:S}=h;return Un(()=>(j(N),()=>S(N)),[j,S,N]),s.jsxs(s.Fragment,{children:[s.jsx(ze.span,{id:u.textId,...a,ref:v}),u.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Hd.createPortal(a.children,o.valueNode):null]})});mO.displayName=vf;var pO="SelectItemIndicator",gO=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return hO(pO,n).isSelected?s.jsx(ze.span,{"aria-hidden":!0,...r,ref:e}):null});gO.displayName=pO;var l1="SelectScrollUpButton",vO=x.forwardRef((t,e)=>{const n=Rl(l1,t.__scopeSelect),r=pN(l1,t.__scopeSelect),[i,a]=x.useState(!1),o=ot(e,r.onScrollButtonChange);return Un(()=>{if(n.viewport&&n.isPositioned){let c=function(){const h=u.scrollTop>0;a(h)};const u=n.viewport;return c(),u.addEventListener("scroll",c),()=>u.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),i?s.jsx(yO,{...t,ref:o,onAutoScroll:()=>{const{viewport:c,selectedItem:u}=n;c&&u&&(c.scrollTop=c.scrollTop-u.offsetHeight)}}):null});vO.displayName=l1;var c1="SelectScrollDownButton",xO=x.forwardRef((t,e)=>{const n=Rl(c1,t.__scopeSelect),r=pN(c1,t.__scopeSelect),[i,a]=x.useState(!1),o=ot(e,r.onScrollButtonChange);return Un(()=>{if(n.viewport&&n.isPositioned){let c=function(){const h=u.scrollHeight-u.clientHeight,f=Math.ceil(u.scrollTop)<h;a(f)};const u=n.viewport;return c(),u.addEventListener("scroll",c),()=>u.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),i?s.jsx(yO,{...t,ref:o,onAutoScroll:()=>{const{viewport:c,selectedItem:u}=n;c&&u&&(c.scrollTop=c.scrollTop+u.offsetHeight)}}):null});xO.displayName=c1;var yO=x.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,a=Rl("SelectScrollButton",n),o=x.useRef(null),c=My(n),u=x.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return x.useEffect(()=>()=>u(),[u]),Un(()=>{var f;const h=c().find(p=>p.ref.current===document.activeElement);(f=h==null?void 0:h.ref.current)==null||f.scrollIntoView({block:"nearest"})},[c]),s.jsx(ze.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:Ee(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Ee(i.onPointerMove,()=>{var h;(h=a.onItemLeave)==null||h.call(a),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Ee(i.onPointerLeave,()=>{u()})})}),Ute="SelectSeparator",_O=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return s.jsx(ze.div,{"aria-hidden":!0,...r,ref:e})});_O.displayName=Ute;var u1="SelectArrow",$te=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Dy(n),a=Al(u1,n),o=Rl(u1,n);return a.open&&o.position==="popper"?s.jsx(eN,{...i,...r,ref:e}):null});$te.displayName=u1;var Bte="SelectBubbleInput",wO=x.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const i=x.useRef(null),a=ot(r,i),o=Ay(e);return x.useEffect(()=>{const c=i.current;if(!c)return;const u=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(u,"value").set;if(o!==e&&f){const p=new Event("change",{bubbles:!0});f.call(c,e),c.dispatchEvent(p)}},[o,e]),s.jsx(ze.select,{...n,style:{...YD,...n.style},ref:a,defaultValue:e})});wO.displayName=Bte;function bO(t){return t===""||t===void 0}function jO(t){const e=dr(t),n=x.useRef(""),r=x.useRef(0),i=x.useCallback(o=>{const c=n.current+o;e(c),function u(h){n.current=h,window.clearTimeout(r.current),h!==""&&(r.current=window.setTimeout(()=>u(""),1e3))}(c)},[e]),a=x.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,a]}function NO(t,e,n){const i=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let o=Wte(t,Math.max(a,0));i.length===1&&(o=o.filter(h=>h!==n));const u=o.find(h=>h.textValue.toLowerCase().startsWith(i.toLowerCase()));return u!==n?u:void 0}function Wte(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var qte=QD,SO=JD,Hte=tO,Gte=nO,Kte=rO,EO=sO,Zte=lO,CO=dO,kO=fO,Yte=mO,Qte=gO,TO=vO,PO=xO,IO=_O;const Jt=qte,en=Hte,qt=x.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(SO,{ref:r,className:Xe("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,s.jsx(Gte,{asChild:!0,children:s.jsx(rX,{className:"h-4 w-4 opacity-50"})})]}));qt.displayName=SO.displayName;const AO=x.forwardRef(({className:t,...e},n)=>s.jsx(TO,{ref:n,className:Xe("flex cursor-default items-center justify-center py-1",t),...e,children:s.jsx(uX,{})}));AO.displayName=TO.displayName;const RO=x.forwardRef(({className:t,...e},n)=>s.jsx(PO,{ref:n,className:Xe("flex cursor-default items-center justify-center py-1",t),...e,children:s.jsx(xD,{})}));RO.displayName=PO.displayName;const Ht=x.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>s.jsx(Kte,{children:s.jsxs(EO,{ref:i,className:Xe("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[s.jsx(AO,{}),s.jsx(Zte,{className:Xe("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),s.jsx(RO,{})]})}));Ht.displayName=EO.displayName;const Xte=x.forwardRef(({className:t,...e},n)=>s.jsx(CO,{ref:n,className:Xe("px-2 py-1.5 text-sm font-semibold",t),...e}));Xte.displayName=CO.displayName;const Ve=x.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(kO,{ref:r,className:Xe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[s.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(Qte,{children:s.jsx(lN,{className:"h-4 w-4"})})}),s.jsx(Yte,{children:e})]}));Ve.displayName=kO.displayName;const Jte=x.forwardRef(({className:t,...e},n)=>s.jsx(IO,{ref:n,className:Xe("-mx-1 my-1 h-px bg-muted",t),...e}));Jte.displayName=IO.displayName;var ene="Separator",ok="horizontal",tne=["horizontal","vertical"],MO=x.forwardRef((t,e)=>{const{decorative:n,orientation:r=ok,...i}=t,a=nne(r)?r:ok,c=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return s.jsx(ze.div,{"data-orientation":a,...c,...i,ref:e})});MO.displayName=ene;function nne(t){return tne.includes(t)}var DO=MO;const Bs=x.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},i)=>s.jsx(DO,{ref:i,decorative:n,orientation:e,className:Xe("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));Bs.displayName=DO.displayName;const h0=[{value:"all",label:"Toutes catégories",icon:null},{value:"electronics",label:"Électronique",icon:Hc},{value:"vehicles",label:"Véhicules",icon:S4},{value:"real-estate",label:"Immobilier",icon:Zv},{value:"fashion",label:"Mode",icon:Uj},{value:"gaming",label:"Jeux & Jouets",icon:fG},{value:"baby",label:"Bébé & Enfant",icon:nG},{value:"business",label:"Équipement Pro",icon:j4}],rne=[{value:"new",label:"Neuf"},{value:"like-new",label:"Comme neuf"},{value:"good",label:"Bon état"},{value:"fair",label:"État correct"},{value:"poor",label:"Mauvais état"}],sne=[{value:"relevance",label:"Pertinence"},{value:"date",label:"Plus récent"},{value:"price-asc",label:"Prix croissant"},{value:"price-desc",label:"Prix décroissant"}],ine="/StudyMarket/assets/Icon/DarkGrey/grille.svg",ane="/StudyMarket/assets/Icon/DarkGrey/list.svg",one=()=>{var w;const[t,e]=Cb(),{listings:n,loading:r,hasMore:i,fetchListings:a,searchListings:o}=ap(),[c,u]=x.useState({query:t.get("q")||"",category:t.get("category")||"",sortBy:"date"}),[h,f]=x.useState("grid"),[p,v]=x.useState(!1);x.useEffect(()=>{const y={query:t.get("q")||"",category:t.get("category")||"",sortBy:"date"};u(y),o(y)},[t,o]);const _=()=>{const y={...c};o(y);const E=new URLSearchParams;y.query&&E.set("q",y.query),y.category&&E.set("category",y.category),e(E)},N=(y,E)=>{const I={...c,[y]:E};u(I)},j=()=>{a(c,!1)},S=()=>{const y={query:"",sortBy:"date"};u(y),o(y),e({})};return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Toutes les annonces"}),s.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 mb-6",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(We,{type:"text",placeholder:"Rechercher des articles...",value:c.query||"",onChange:y=>N("query",y.target.value),onKeyPress:y=>y.key==="Enter"&&_(),className:"pl-10"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Y,{onClick:_,className:"whitespace-nowrap",children:[s.jsx(xr,{className:"w-4 h-4 mr-2"}),"Rechercher"]}),s.jsxs(Y,{variant:"outline",onClick:()=>v(!p),className:"lg:hidden",children:[s.jsx(dy,{className:"w-4 h-4 mr-2"}),"Filtres"]})]})]}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:h0.slice(1,6).map(y=>{const E=y.icon;return s.jsxs(Y,{variant:c.category===y.value?"default":"outline",size:"sm",onClick:()=>N("category",c.category===y.value?"":y.value),className:"flex items-center gap-2",children:[E&&s.jsx(E,{className:"w-4 h-4"}),y.label]},y.value)})})]}),s.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[s.jsx("aside",{className:`lg:w-80 space-y-6 ${p?"block":"hidden lg:block"}`,children:s.jsxs(ae,{children:[s.jsx(qe,{children:s.jsxs(Ge,{className:"flex items-center justify-between",children:[s.jsx("span",{children:"Filtres"}),s.jsx(Y,{variant:"ghost",size:"sm",onClick:S,children:"Effacer"})]})}),s.jsxs(oe,{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Catégorie"}),s.jsxs(Jt,{value:c.category||"all",onValueChange:y=>N("category",y==="all"?"":y),children:[s.jsx(qt,{children:s.jsx(en,{})}),s.jsx(Ht,{children:h0.map(y=>{const E=y.icon;return s.jsx(Ve,{value:y.value,children:s.jsxs("div",{className:"flex items-center gap-2",children:[E&&s.jsx(E,{className:"w-4 h-4"}),y.label]})},y.value)})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Prix"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(We,{type:"number",placeholder:"Min",value:c.minPrice||"",onChange:y=>N("minPrice",y.target.value?parseInt(y.target.value):void 0)}),s.jsx(We,{type:"number",placeholder:"Max",value:c.maxPrice||"",onChange:y=>N("maxPrice",y.target.value?parseInt(y.target.value):void 0)})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium mb-2 block",children:"État"}),s.jsx("div",{className:"space-y-2",children:rne.map(y=>{var E;return s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:((E=c.condition)==null?void 0:E.includes(y.value))||!1,onChange:I=>{const D=c.condition||[],B=I.target.checked?[...D,y.value]:D.filter(R=>R!==y.value);N("condition",B.length>0?B:void 0)},className:"rounded border-border"}),s.jsx("span",{className:"text-sm",children:y.label})]},y.value)})})]}),s.jsx(Y,{onClick:_,className:"w-full",children:"Appliquer les filtres"})]})]})}),s.jsxs("main",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("span",{className:"text-muted-foreground",children:[n.length," résultat(s)"]}),(c.query||c.category||c.minPrice||c.maxPrice)&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Filtres actifs:"}),c.query&&s.jsxs(et,{variant:"secondary",children:['"',c.query,'"']}),c.category&&s.jsx(et,{variant:"secondary",children:(w=h0.find(y=>y.value===c.category))==null?void 0:w.label})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Jt,{value:c.sortBy||"date",onValueChange:y=>N("sortBy",y),children:[s.jsx(qt,{className:"w-40",children:s.jsx(en,{})}),s.jsx(Ht,{children:sne.map(y=>s.jsx(Ve,{value:y.value,children:y.label},y.value))})]}),s.jsx(Bs,{orientation:"vertical",className:"h-6"}),s.jsxs("div",{className:"hidden md:flex border rounded-lg overflow-hidden",children:[s.jsx(Y,{variant:h==="grid"?"default":"ghost",size:"icon",onClick:()=>f("grid"),className:`rounded-none w-15 h-15 ${h==="grid"?"bg-primary text-white":"bg-muted text-muted-foreground"}`,title:"Vue en grille",children:s.jsx("img",{src:ine,alt:"Vue grille",className:"w-5 h-5"})}),s.jsx(Y,{variant:h==="list"?"default":"ghost",size:"icon",onClick:()=>f("list"),className:`rounded-none w-15 h-15 ${h==="list"?"bg-primary text-white":"bg-muted text-muted-foreground"}`,title:"Vue en liste",children:s.jsx("img",{src:ane,alt:"Vue liste",className:"w-5 h-5"})})]})]})]}),r&&n.length===0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((y,E)=>s.jsxs(ae,{className:"animate-pulse",children:[s.jsx("div",{className:"aspect-[4/3] bg-muted"}),s.jsxs(oe,{className:"p-4 space-y-2",children:[s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},E))}):n.length>0?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:`grid gap-8 justify-items-center ${h==="grid"?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3":"grid-cols-1"}`,children:n.map(y=>s.jsx(wm,{listing:y},y.id))}),i&&s.jsx("div",{className:"text-center mt-8",children:s.jsx(Y,{onClick:j,disabled:r,variant:"outline",size:"lg",children:r?"Chargement...":"Charger plus"})})]}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Aucun résultat trouvé"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Essayez de modifier vos critères de recherche"}),s.jsx(Y,{onClick:S,variant:"outline",children:"Effacer les filtres"})]})]})]})]})};var Oy="Dialog",[OO,nce]=jr(Oy),[lne,Pi]=OO(Oy),LO=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:a,modal:o=!0}=t,c=x.useRef(null),u=x.useRef(null),[h,f]=Ts({prop:r,defaultProp:i??!1,onChange:a,caller:Oy});return s.jsx(lne,{scope:e,triggerRef:c,contentRef:u,contentId:Es(),titleId:Es(),descriptionId:Es(),open:h,onOpenChange:f,onOpenToggle:x.useCallback(()=>f(p=>!p),[f]),modal:o,children:n})};LO.displayName=Oy;var FO="DialogTrigger",VO=x.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Pi(FO,n),a=ot(e,i.triggerRef);return s.jsx(ze.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":xN(i.open),...r,ref:a,onClick:Ee(t.onClick,i.onOpenToggle)})});VO.displayName=FO;var gN="DialogPortal",[cne,zO]=OO(gN,{forceMount:void 0}),UO=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,a=Pi(gN,e);return s.jsx(cne,{scope:e,forceMount:n,children:x.Children.map(r,o=>s.jsx(Nr,{present:n||a.open,children:s.jsx(tp,{asChild:!0,container:i,children:o})}))})};UO.displayName=gN;var ox="DialogOverlay",$O=x.forwardRef((t,e)=>{const n=zO(ox,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,a=Pi(ox,t.__scopeDialog);return a.modal?s.jsx(Nr,{present:r||a.open,children:s.jsx(dne,{...i,ref:e})}):null});$O.displayName=ox;var une=yl("DialogOverlay.RemoveScroll"),dne=x.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Pi(ox,n);return s.jsx(rp,{as:une,allowPinchZoom:!0,shards:[i.contentRef],children:s.jsx(ze.div,{"data-state":xN(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Oc="DialogContent",BO=x.forwardRef((t,e)=>{const n=zO(Oc,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,a=Pi(Oc,t.__scopeDialog);return s.jsx(Nr,{present:r||a.open,children:a.modal?s.jsx(hne,{...i,ref:e}):s.jsx(fne,{...i,ref:e})})});BO.displayName=Oc;var hne=x.forwardRef((t,e)=>{const n=Pi(Oc,t.__scopeDialog),r=x.useRef(null),i=ot(e,n.contentRef,r);return x.useEffect(()=>{const a=r.current;if(a)return Ny(a)},[]),s.jsx(WO,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ee(t.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Ee(t.onPointerDownOutside,a=>{const o=a.detail.originalEvent,c=o.button===0&&o.ctrlKey===!0;(o.button===2||c)&&a.preventDefault()}),onFocusOutside:Ee(t.onFocusOutside,a=>a.preventDefault())})}),fne=x.forwardRef((t,e)=>{const n=Pi(Oc,t.__scopeDialog),r=x.useRef(!1),i=x.useRef(!1);return s.jsx(WO,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,c;(o=t.onCloseAutoFocus)==null||o.call(t,a),a.defaultPrevented||(r.current||(c=n.triggerRef.current)==null||c.focus(),a.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:a=>{var u,h;(u=t.onInteractOutside)==null||u.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((h=n.triggerRef.current)==null?void 0:h.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),WO=x.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,...o}=t,c=Pi(Oc,n),u=x.useRef(null),h=ot(e,u);return vy(),s.jsxs(s.Fragment,{children:[s.jsx(Jm,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:s.jsx(Xm,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":xN(c.open),...o,ref:h,onDismiss:()=>c.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(mne,{titleId:c.titleId}),s.jsx(gne,{contentRef:u,descriptionId:c.descriptionId})]})]})}),vN="DialogTitle",qO=x.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Pi(vN,n);return s.jsx(ze.h2,{id:i.titleId,...r,ref:e})});qO.displayName=vN;var HO="DialogDescription",GO=x.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Pi(HO,n);return s.jsx(ze.p,{id:i.descriptionId,...r,ref:e})});GO.displayName=HO;var KO="DialogClose",ZO=x.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Pi(KO,n);return s.jsx(ze.button,{type:"button",...r,ref:e,onClick:Ee(t.onClick,()=>i.onOpenChange(!1))})});ZO.displayName=KO;function xN(t){return t?"open":"closed"}var YO="DialogTitleWarning",[rce,QO]=xK(YO,{contentName:Oc,titleName:vN,docsSlug:"dialog"}),mne=({titleId:t})=>{const e=QO(YO),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return x.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},pne="DialogDescriptionWarning",gne=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${QO(pne).contentName}}.`;return x.useEffect(()=>{var a;const i=(a=t.current)==null?void 0:a.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},vne=LO,xne=VO,yne=UO,XO=$O,JO=BO,eL=qO,tL=GO,_ne=ZO;const aa=vne,cd=xne,wne=yne,nL=x.forwardRef(({className:t,...e},n)=>s.jsx(XO,{ref:n,className:Xe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));nL.displayName=XO.displayName;const wi=x.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(wne,{children:[s.jsx(nL,{}),s.jsxs(JO,{ref:r,className:Xe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,s.jsxs(_ne,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(hX,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));wi.displayName=JO.displayName;const oa=({className:t,...e})=>s.jsx("div",{className:Xe("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});oa.displayName="DialogHeader";const Xg=({className:t,...e})=>s.jsx("div",{className:Xe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Xg.displayName="DialogFooter";const bi=x.forwardRef(({className:t,...e},n)=>s.jsx(eL,{ref:n,className:Xe("text-lg font-semibold leading-none tracking-tight",t),...e}));bi.displayName=eL.displayName;const pc=x.forwardRef(({className:t,...e},n)=>s.jsx(tL,{ref:n,className:Xe("text-sm text-muted-foreground",t),...e}));pc.displayName=tL.displayName;const Qs=x.forwardRef(({className:t,...e},n)=>s.jsx("textarea",{className:Xe("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));Qs.displayName="Textarea";var bne="Label",rL=x.forwardRef((t,e)=>s.jsx(ze.label,{...t,ref:e,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));rL.displayName=bne;var sL=rL;const jne=gy("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),be=x.forwardRef(({className:t,...e},n)=>s.jsx(sL,{ref:n,className:Xe(jne(),t),...e}));be.displayName=sL.displayName;const Nne=gy("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Ut=x.forwardRef(({className:t,variant:e,...n},r)=>s.jsx("div",{ref:r,role:"alert",className:Xe(Nne({variant:e}),t),...n}));Ut.displayName="Alert";const Sne=x.forwardRef(({className:t,...e},n)=>s.jsx("h5",{ref:n,className:Xe("mb-1 font-medium leading-none tracking-tight",t),...e}));Sne.displayName="AlertTitle";const $t=x.forwardRef(({className:t,...e},n)=>s.jsx("div",{ref:n,className:Xe("text-sm [&_p]:leading-relaxed",t),...e}));$t.displayName="AlertDescription";var at=function(){return at=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},at.apply(this,arguments)};function Ene(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function iL(t,e,n){for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function op(t){return t.mode==="multiple"}function lp(t){return t.mode==="range"}function Ly(t){return t.mode==="single"}var Cne={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function kne(t,e){return sr(t,"LLLL y",e)}function Tne(t,e){return sr(t,"d",e)}function Pne(t,e){return sr(t,"LLLL",e)}function Ine(t){return"".concat(t)}function Ane(t,e){return sr(t,"cccccc",e)}function Rne(t,e){return sr(t,"yyyy",e)}var Mne=Object.freeze({__proto__:null,formatCaption:kne,formatDay:Tne,formatMonthCaption:Pne,formatWeekNumber:Ine,formatWeekdayName:Ane,formatYearCaption:Rne}),Dne=function(t,e,n){return sr(t,"do MMMM (EEEE)",n)},One=function(){return"Month: "},Lne=function(){return"Go to next month"},Fne=function(){return"Go to previous month"},Vne=function(t,e){return sr(t,"cccc",e)},zne=function(t){return"Week n. ".concat(t)},Une=function(){return"Year: "},$ne=Object.freeze({__proto__:null,labelDay:Dne,labelMonthDropdown:One,labelNext:Lne,labelPrevious:Fne,labelWeekNumber:zne,labelWeekday:Vne,labelYearDropdown:Une});function Bne(){var t="buttons",e=Cne,n=fN,r={},i={},a=1,o={},c=new Date;return{captionLayout:t,classNames:e,formatters:Mne,labels:$ne,locale:n,modifiersClassNames:r,modifiers:i,numberOfMonths:a,styles:o,today:c,mode:"default"}}function Wne(t){var e=t.fromYear,n=t.toYear,r=t.fromMonth,i=t.toMonth,a=t.fromDate,o=t.toDate;return r?a=ds(r):e&&(a=new Date(e,0,1)),i?o=Iy(i):n&&(o=new Date(n,11,31)),{fromDate:a?Ad(a):void 0,toDate:o?Ad(o):void 0}}var aL=x.createContext(void 0);function qne(t){var e,n=t.initialProps,r=Bne(),i=Wne(n),a=i.fromDate,o=i.toDate,c=(e=n.captionLayout)!==null&&e!==void 0?e:r.captionLayout;c!=="buttons"&&(!a||!o)&&(c="buttons");var u;(Ly(n)||op(n)||lp(n))&&(u=n.onSelect);var h=at(at(at({},r),n),{captionLayout:c,classNames:at(at({},r.classNames),n.classNames),components:at({},n.components),formatters:at(at({},r.formatters),n.formatters),fromDate:a,labels:at(at({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:at(at({},r.modifiers),n.modifiers),modifiersClassNames:at(at({},r.modifiersClassNames),n.modifiersClassNames),onSelect:u,styles:at(at({},r.styles),n.styles),toDate:o});return s.jsx(aL.Provider,{value:h,children:t.children})}function sn(){var t=x.useContext(aL);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function oL(t){var e=sn(),n=e.locale,r=e.classNames,i=e.styles,a=e.formatters.formatCaption;return s.jsx("div",{className:r.caption_label,style:i.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:a(t.displayMonth,{locale:n})})}function Hne(t){return s.jsx("svg",at({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:s.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function lL(t){var e,n,r=t.onChange,i=t.value,a=t.children,o=t.caption,c=t.className,u=t.style,h=sn(),f=(n=(e=h.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&n!==void 0?n:Hne;return s.jsxs("div",{className:c,style:u,children:[s.jsx("span",{className:h.classNames.vhidden,children:t["aria-label"]}),s.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:h.classNames.dropdown,style:h.styles.dropdown,value:i,onChange:r,children:a}),s.jsxs("div",{className:h.classNames.caption_label,style:h.styles.caption_label,"aria-hidden":"true",children:[o,s.jsx(f,{className:h.classNames.dropdown_icon,style:h.styles.dropdown_icon})]})]})}function Gne(t){var e,n=sn(),r=n.fromDate,i=n.toDate,a=n.styles,o=n.locale,c=n.formatters.formatMonthCaption,u=n.classNames,h=n.components,f=n.labels.labelMonthDropdown;if(!r)return s.jsx(s.Fragment,{});if(!i)return s.jsx(s.Fragment,{});var p=[];if(bee(r,i))for(var v=ds(r),_=r.getMonth();_<=i.getMonth();_++)p.push(d0(v,_));else for(var v=ds(new Date),_=0;_<=11;_++)p.push(d0(v,_));var N=function(S){var w=Number(S.target.value),y=d0(ds(t.displayMonth),w);t.onChange(y)},j=(e=h==null?void 0:h.Dropdown)!==null&&e!==void 0?e:lL;return s.jsx(j,{name:"months","aria-label":f(),className:u.dropdown_month,style:a.dropdown_month,onChange:N,value:t.displayMonth.getMonth(),caption:c(t.displayMonth,{locale:o}),children:p.map(function(S){return s.jsx("option",{value:S.getMonth(),children:c(S,{locale:o})},S.getMonth())})})}function Kne(t){var e,n=t.displayMonth,r=sn(),i=r.fromDate,a=r.toDate,o=r.locale,c=r.styles,u=r.classNames,h=r.components,f=r.formatters.formatYearCaption,p=r.labels.labelYearDropdown,v=[];if(!i)return s.jsx(s.Fragment,{});if(!a)return s.jsx(s.Fragment,{});for(var _=i.getFullYear(),N=a.getFullYear(),j=_;j<=N;j++)v.push(rk(zD(new Date),j));var S=function(y){var E=rk(ds(n),Number(y.target.value));t.onChange(E)},w=(e=h==null?void 0:h.Dropdown)!==null&&e!==void 0?e:lL;return s.jsx(w,{name:"years","aria-label":p(),className:u.dropdown_year,style:c.dropdown_year,onChange:S,value:n.getFullYear(),caption:f(n,{locale:o}),children:v.map(function(y){return s.jsx("option",{value:y.getFullYear(),children:f(y,{locale:o})},y.getFullYear())})})}function Zne(t,e){var n=x.useState(t),r=n[0],i=n[1],a=e===void 0?r:e;return[a,i]}function Yne(t){var e=t.month,n=t.defaultMonth,r=t.today,i=e||n||r||new Date,a=t.toDate,o=t.fromDate,c=t.numberOfMonths,u=c===void 0?1:c;if(a&&Md(a,i)<0){var h=-1*(u-1);i=Ci(a,h)}return o&&Md(i,o)<0&&(i=o),ds(i)}function Qne(){var t=sn(),e=Yne(t),n=Zne(e,t.month),r=n[0],i=n[1],a=function(o){var c;if(!t.disableNavigation){var u=ds(o);i(u),(c=t.onMonthChange)===null||c===void 0||c.call(t,u)}};return[r,a]}function Xne(t,e){for(var n=e.reverseMonths,r=e.numberOfMonths,i=ds(t),a=ds(Ci(i,r)),o=Md(a,i),c=[],u=0;u<o;u++){var h=Ci(i,u);c.push(h)}return n&&(c=c.reverse()),c}function Jne(t,e){if(!e.disableNavigation){var n=e.toDate,r=e.pagedNavigation,i=e.numberOfMonths,a=i===void 0?1:i,o=r?a:1,c=ds(t);if(!n)return Ci(c,o);var u=Md(n,t);if(!(u<a))return Ci(c,o)}}function ere(t,e){if(!e.disableNavigation){var n=e.fromDate,r=e.pagedNavigation,i=e.numberOfMonths,a=i===void 0?1:i,o=r?a:1,c=ds(t);if(!n)return Ci(c,-o);var u=Md(c,n);if(!(u<=0))return Ci(c,-o)}}var cL=x.createContext(void 0);function tre(t){var e=sn(),n=Qne(),r=n[0],i=n[1],a=Xne(r,e),o=Jne(r,e),c=ere(r,e),u=function(p){return a.some(function(v){return mN(p,v)})},h=function(p,v){u(p)||(v&&GD(p,v)?i(Ci(p,1+e.numberOfMonths*-1)):i(p))},f={currentMonth:r,displayMonths:a,goToMonth:i,goToDate:h,previousMonth:c,nextMonth:o,isDateDisplayed:u};return s.jsx(cL.Provider,{value:f,children:t.children})}function cp(){var t=x.useContext(cL);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function lk(t){var e,n=sn(),r=n.classNames,i=n.styles,a=n.components,o=cp().goToMonth,c=function(f){o(Ci(f,t.displayIndex?-t.displayIndex:0))},u=(e=a==null?void 0:a.CaptionLabel)!==null&&e!==void 0?e:oL,h=s.jsx(u,{id:t.id,displayMonth:t.displayMonth});return s.jsxs("div",{className:r.caption_dropdowns,style:i.caption_dropdowns,children:[s.jsx("div",{className:r.vhidden,children:h}),s.jsx(Gne,{onChange:c,displayMonth:t.displayMonth}),s.jsx(Kne,{onChange:c,displayMonth:t.displayMonth})]})}function nre(t){return s.jsx("svg",at({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:s.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function rre(t){return s.jsx("svg",at({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:s.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var lx=x.forwardRef(function(t,e){var n=sn(),r=n.classNames,i=n.styles,a=[r.button_reset,r.button];t.className&&a.push(t.className);var o=a.join(" "),c=at(at({},i.button_reset),i.button);return t.style&&Object.assign(c,t.style),s.jsx("button",at({},t,{ref:e,type:"button",className:o,style:c}))});function sre(t){var e,n,r=sn(),i=r.dir,a=r.locale,o=r.classNames,c=r.styles,u=r.labels,h=u.labelPrevious,f=u.labelNext,p=r.components;if(!t.nextMonth&&!t.previousMonth)return s.jsx(s.Fragment,{});var v=h(t.previousMonth,{locale:a}),_=[o.nav_button,o.nav_button_previous].join(" "),N=f(t.nextMonth,{locale:a}),j=[o.nav_button,o.nav_button_next].join(" "),S=(e=p==null?void 0:p.IconRight)!==null&&e!==void 0?e:rre,w=(n=p==null?void 0:p.IconLeft)!==null&&n!==void 0?n:nre;return s.jsxs("div",{className:o.nav,style:c.nav,children:[!t.hidePrevious&&s.jsx(lx,{name:"previous-month","aria-label":v,className:_,style:c.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:i==="rtl"?s.jsx(S,{className:o.nav_icon,style:c.nav_icon}):s.jsx(w,{className:o.nav_icon,style:c.nav_icon})}),!t.hideNext&&s.jsx(lx,{name:"next-month","aria-label":N,className:j,style:c.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:i==="rtl"?s.jsx(w,{className:o.nav_icon,style:c.nav_icon}):s.jsx(S,{className:o.nav_icon,style:c.nav_icon})})]})}function ck(t){var e=sn().numberOfMonths,n=cp(),r=n.previousMonth,i=n.nextMonth,a=n.goToMonth,o=n.displayMonths,c=o.findIndex(function(N){return mN(t.displayMonth,N)}),u=c===0,h=c===o.length-1,f=e>1&&(u||!h),p=e>1&&(h||!u),v=function(){r&&a(r)},_=function(){i&&a(i)};return s.jsx(sre,{displayMonth:t.displayMonth,hideNext:f,hidePrevious:p,nextMonth:i,previousMonth:r,onPreviousClick:v,onNextClick:_})}function ire(t){var e,n=sn(),r=n.classNames,i=n.disableNavigation,a=n.styles,o=n.captionLayout,c=n.components,u=(e=c==null?void 0:c.CaptionLabel)!==null&&e!==void 0?e:oL,h;return i?h=s.jsx(u,{id:t.id,displayMonth:t.displayMonth}):o==="dropdown"?h=s.jsx(lk,{displayMonth:t.displayMonth,id:t.id}):o==="dropdown-buttons"?h=s.jsxs(s.Fragment,{children:[s.jsx(lk,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),s.jsx(ck,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):h=s.jsxs(s.Fragment,{children:[s.jsx(u,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),s.jsx(ck,{displayMonth:t.displayMonth,id:t.id})]}),s.jsx("div",{className:r.caption,style:a.caption,children:h})}function are(t){var e=sn(),n=e.footer,r=e.styles,i=e.classNames.tfoot;return n?s.jsx("tfoot",{className:i,style:r.tfoot,children:s.jsx("tr",{children:s.jsx("td",{colSpan:8,children:n})})}):s.jsx(s.Fragment,{})}function ore(t,e,n){for(var r=n?Rc(new Date):ha(new Date,{locale:t,weekStartsOn:e}),i=[],a=0;a<7;a++){var o=Br(r,a);i.push(o)}return i}function lre(){var t=sn(),e=t.classNames,n=t.styles,r=t.showWeekNumber,i=t.locale,a=t.weekStartsOn,o=t.ISOWeek,c=t.formatters.formatWeekdayName,u=t.labels.labelWeekday,h=ore(i,a,o);return s.jsxs("tr",{style:n.head_row,className:e.head_row,children:[r&&s.jsx("td",{style:n.head_cell,className:e.head_cell}),h.map(function(f,p){return s.jsx("th",{scope:"col",className:e.head_cell,style:n.head_cell,"aria-label":u(f,{locale:i}),children:c(f,{locale:i})},p)})]})}function cre(){var t,e=sn(),n=e.classNames,r=e.styles,i=e.components,a=(t=i==null?void 0:i.HeadRow)!==null&&t!==void 0?t:lre;return s.jsx("thead",{style:r.head,className:n.head,children:s.jsx(a,{})})}function ure(t){var e=sn(),n=e.locale,r=e.formatters.formatDay;return s.jsx(s.Fragment,{children:r(t.date,{locale:n})})}var yN=x.createContext(void 0);function dre(t){if(!op(t.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return s.jsx(yN.Provider,{value:e,children:t.children})}return s.jsx(hre,{initialProps:t.initialProps,children:t.children})}function hre(t){var e=t.initialProps,n=t.children,r=e.selected,i=e.min,a=e.max,o=function(h,f,p){var v,_;(v=e.onDayClick)===null||v===void 0||v.call(e,h,f,p);var N=!!(f.selected&&i&&(r==null?void 0:r.length)===i);if(!N){var j=!!(!f.selected&&a&&(r==null?void 0:r.length)===a);if(!j){var S=r?iL([],r):[];if(f.selected){var w=S.findIndex(function(y){return as(h,y)});S.splice(w,1)}else S.push(h);(_=e.onSelect)===null||_===void 0||_.call(e,S,h,f,p)}}},c={disabled:[]};r&&c.disabled.push(function(h){var f=a&&r.length>a-1,p=r.some(function(v){return as(v,h)});return!!(f&&!p)});var u={selected:r,onDayClick:o,modifiers:c};return s.jsx(yN.Provider,{value:u,children:n})}function _N(){var t=x.useContext(yN);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function fre(t,e){var n=e||{},r=n.from,i=n.to;return r&&i?as(i,t)&&as(r,t)?void 0:as(i,t)?{from:i,to:void 0}:as(r,t)?void 0:i1(r,t)?{from:t,to:i}:{from:r,to:t}:i?i1(t,i)?{from:i,to:t}:{from:t,to:i}:r?GD(t,r)?{from:t,to:r}:{from:r,to:t}:{from:t,to:void 0}}var wN=x.createContext(void 0);function mre(t){if(!lp(t.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return s.jsx(wN.Provider,{value:e,children:t.children})}return s.jsx(pre,{initialProps:t.initialProps,children:t.children})}function pre(t){var e=t.initialProps,n=t.children,r=e.selected,i=r||{},a=i.from,o=i.to,c=e.min,u=e.max,h=function(_,N,j){var S,w;(S=e.onDayClick)===null||S===void 0||S.call(e,_,N,j);var y=fre(_,r);(w=e.onSelect)===null||w===void 0||w.call(e,y,_,N,j)},f={range_start:[],range_end:[],range_middle:[],disabled:[]};if(a?(f.range_start=[a],o?(f.range_end=[o],as(a,o)||(f.range_middle=[{after:a,before:o}])):f.range_end=[a]):o&&(f.range_start=[o],f.range_end=[o]),c&&(a&&!o&&f.disabled.push({after:u0(a,c-1),before:Br(a,c-1)}),a&&o&&f.disabled.push({after:a,before:Br(a,c-1)}),!a&&o&&f.disabled.push({after:u0(o,c-1),before:Br(o,c-1)})),u){if(a&&!o&&(f.disabled.push({before:Br(a,-u+1)}),f.disabled.push({after:Br(a,u-1)})),a&&o){var p=Yi(o,a)+1,v=u-p;f.disabled.push({before:u0(a,v)}),f.disabled.push({after:Br(o,v)})}!a&&o&&(f.disabled.push({before:Br(o,-u+1)}),f.disabled.push({after:Br(o,u-1)}))}return s.jsx(wN.Provider,{value:{selected:r,onDayClick:h,modifiers:f},children:n})}function bN(){var t=x.useContext(wN);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function Jg(t){return Array.isArray(t)?iL([],t):t!==void 0?[t]:[]}function gre(t){var e={};return Object.entries(t).forEach(function(n){var r=n[0],i=n[1];e[r]=Jg(i)}),e}var ki;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(ki||(ki={}));var vre=ki.Selected,Ra=ki.Disabled,xre=ki.Hidden,yre=ki.Today,f0=ki.RangeEnd,m0=ki.RangeMiddle,p0=ki.RangeStart,_re=ki.Outside;function wre(t,e,n){var r,i=(r={},r[vre]=Jg(t.selected),r[Ra]=Jg(t.disabled),r[xre]=Jg(t.hidden),r[yre]=[t.today],r[f0]=[],r[m0]=[],r[p0]=[],r[_re]=[],r);return t.fromDate&&i[Ra].push({before:t.fromDate}),t.toDate&&i[Ra].push({after:t.toDate}),op(t)?i[Ra]=i[Ra].concat(e.modifiers[Ra]):lp(t)&&(i[Ra]=i[Ra].concat(n.modifiers[Ra]),i[p0]=n.modifiers[p0],i[m0]=n.modifiers[m0],i[f0]=n.modifiers[f0]),i}var uL=x.createContext(void 0);function bre(t){var e=sn(),n=_N(),r=bN(),i=wre(e,n,r),a=gre(e.modifiers),o=at(at({},i),a);return s.jsx(uL.Provider,{value:o,children:t.children})}function dL(){var t=x.useContext(uL);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function jre(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function Nre(t){return!!(t&&typeof t=="object"&&"from"in t)}function Sre(t){return!!(t&&typeof t=="object"&&"after"in t)}function Ere(t){return!!(t&&typeof t=="object"&&"before"in t)}function Cre(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function kre(t,e){var n,r=e.from,i=e.to;if(r&&i){var a=Yi(i,r)<0;a&&(n=[i,r],r=n[0],i=n[1]);var o=Yi(t,r)>=0&&Yi(i,t)>=0;return o}return i?as(i,t):r?as(r,t):!1}function Tre(t){return dN(t)}function Pre(t){return Array.isArray(t)&&t.every(dN)}function Ire(t,e){return e.some(function(n){if(typeof n=="boolean")return n;if(Tre(n))return as(t,n);if(Pre(n))return n.includes(t);if(Nre(n))return kre(t,n);if(Cre(n))return n.dayOfWeek.includes(t.getDay());if(jre(n)){var r=Yi(n.before,t),i=Yi(n.after,t),a=r>0,o=i<0,c=i1(n.before,n.after);return c?o&&a:a||o}return Sre(n)?Yi(t,n.after)>0:Ere(n)?Yi(n.before,t)>0:typeof n=="function"?n(t):!1})}function jN(t,e,n){var r=Object.keys(e).reduce(function(a,o){var c=e[o];return Ire(t,c)&&a.push(o),a},[]),i={};return r.forEach(function(a){return i[a]=!0}),n&&!mN(t,n)&&(i.outside=!0),i}function Are(t,e){for(var n=ds(t[0]),r=Iy(t[t.length-1]),i,a,o=n;o<=r;){var c=jN(o,e),u=!c.disabled&&!c.hidden;if(!u){o=Br(o,1);continue}if(c.selected)return o;c.today&&!a&&(a=o),i||(i=o),o=Br(o,1)}return a||i}var Rre=365;function hL(t,e){var n=e.moveBy,r=e.direction,i=e.context,a=e.modifiers,o=e.retry,c=o===void 0?{count:0,lastFocused:t}:o,u=i.weekStartsOn,h=i.fromDate,f=i.toDate,p=i.locale,v={day:Br,week:s1,month:Ci,year:dJ,startOfWeek:function(S){return i.ISOWeek?Rc(S):ha(S,{locale:p,weekStartsOn:u})},endOfWeek:function(S){return i.ISOWeek?UD(S):hN(S,{locale:p,weekStartsOn:u})}},_=v[n](t,r==="after"?1:-1);r==="before"&&h?_=hJ([h,_]):r==="after"&&f&&(_=fJ([f,_]));var N=!0;if(a){var j=jN(_,a);N=!j.disabled&&!j.hidden}return N?_:c.count>Rre?c.lastFocused:hL(_,{moveBy:n,direction:r,context:i,modifiers:a,retry:at(at({},c),{count:c.count+1})})}var fL=x.createContext(void 0);function Mre(t){var e=cp(),n=dL(),r=x.useState(),i=r[0],a=r[1],o=x.useState(),c=o[0],u=o[1],h=Are(e.displayMonths,n),f=i??(c&&e.isDateDisplayed(c))?c:h,p=function(){u(i),a(void 0)},v=function(S){a(S)},_=sn(),N=function(S,w){if(i){var y=hL(i,{moveBy:S,direction:w,context:_,modifiers:n});as(i,y)||(e.goToDate(y,i),v(y))}},j={focusedDay:i,focusTarget:f,blur:p,focus:v,focusDayAfter:function(){return N("day","after")},focusDayBefore:function(){return N("day","before")},focusWeekAfter:function(){return N("week","after")},focusWeekBefore:function(){return N("week","before")},focusMonthBefore:function(){return N("month","before")},focusMonthAfter:function(){return N("month","after")},focusYearBefore:function(){return N("year","before")},focusYearAfter:function(){return N("year","after")},focusStartOfWeek:function(){return N("startOfWeek","before")},focusEndOfWeek:function(){return N("endOfWeek","after")}};return s.jsx(fL.Provider,{value:j,children:t.children})}function NN(){var t=x.useContext(fL);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function Dre(t,e){var n=dL(),r=jN(t,n,e);return r}var SN=x.createContext(void 0);function Ore(t){if(!Ly(t.initialProps)){var e={selected:void 0};return s.jsx(SN.Provider,{value:e,children:t.children})}return s.jsx(Lre,{initialProps:t.initialProps,children:t.children})}function Lre(t){var e=t.initialProps,n=t.children,r=function(a,o,c){var u,h,f;if((u=e.onDayClick)===null||u===void 0||u.call(e,a,o,c),o.selected&&!e.required){(h=e.onSelect)===null||h===void 0||h.call(e,void 0,a,o,c);return}(f=e.onSelect)===null||f===void 0||f.call(e,a,a,o,c)},i={selected:e.selected,onDayClick:r};return s.jsx(SN.Provider,{value:i,children:n})}function mL(){var t=x.useContext(SN);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function Fre(t,e){var n=sn(),r=mL(),i=_N(),a=bN(),o=NN(),c=o.focusDayAfter,u=o.focusDayBefore,h=o.focusWeekAfter,f=o.focusWeekBefore,p=o.blur,v=o.focus,_=o.focusMonthBefore,N=o.focusMonthAfter,j=o.focusYearBefore,S=o.focusYearAfter,w=o.focusStartOfWeek,y=o.focusEndOfWeek,E=function(Z){var U,q,H,Q;Ly(n)?(U=r.onDayClick)===null||U===void 0||U.call(r,t,e,Z):op(n)?(q=i.onDayClick)===null||q===void 0||q.call(i,t,e,Z):lp(n)?(H=a.onDayClick)===null||H===void 0||H.call(a,t,e,Z):(Q=n.onDayClick)===null||Q===void 0||Q.call(n,t,e,Z)},I=function(Z){var U;v(t),(U=n.onDayFocus)===null||U===void 0||U.call(n,t,e,Z)},D=function(Z){var U;p(),(U=n.onDayBlur)===null||U===void 0||U.call(n,t,e,Z)},B=function(Z){var U;(U=n.onDayMouseEnter)===null||U===void 0||U.call(n,t,e,Z)},R=function(Z){var U;(U=n.onDayMouseLeave)===null||U===void 0||U.call(n,t,e,Z)},F=function(Z){var U;(U=n.onDayPointerEnter)===null||U===void 0||U.call(n,t,e,Z)},V=function(Z){var U;(U=n.onDayPointerLeave)===null||U===void 0||U.call(n,t,e,Z)},k=function(Z){var U;(U=n.onDayTouchCancel)===null||U===void 0||U.call(n,t,e,Z)},M=function(Z){var U;(U=n.onDayTouchEnd)===null||U===void 0||U.call(n,t,e,Z)},O=function(Z){var U;(U=n.onDayTouchMove)===null||U===void 0||U.call(n,t,e,Z)},P=function(Z){var U;(U=n.onDayTouchStart)===null||U===void 0||U.call(n,t,e,Z)},W=function(Z){var U;(U=n.onDayKeyUp)===null||U===void 0||U.call(n,t,e,Z)},X=function(Z){var U;switch(Z.key){case"ArrowLeft":Z.preventDefault(),Z.stopPropagation(),n.dir==="rtl"?c():u();break;case"ArrowRight":Z.preventDefault(),Z.stopPropagation(),n.dir==="rtl"?u():c();break;case"ArrowDown":Z.preventDefault(),Z.stopPropagation(),h();break;case"ArrowUp":Z.preventDefault(),Z.stopPropagation(),f();break;case"PageUp":Z.preventDefault(),Z.stopPropagation(),Z.shiftKey?j():_();break;case"PageDown":Z.preventDefault(),Z.stopPropagation(),Z.shiftKey?S():N();break;case"Home":Z.preventDefault(),Z.stopPropagation(),w();break;case"End":Z.preventDefault(),Z.stopPropagation(),y();break}(U=n.onDayKeyDown)===null||U===void 0||U.call(n,t,e,Z)},ee={onClick:E,onFocus:I,onBlur:D,onKeyDown:X,onKeyUp:W,onMouseEnter:B,onMouseLeave:R,onPointerEnter:F,onPointerLeave:V,onTouchCancel:k,onTouchEnd:M,onTouchMove:O,onTouchStart:P};return ee}function Vre(){var t=sn(),e=mL(),n=_N(),r=bN(),i=Ly(t)?e.selected:op(t)?n.selected:lp(t)?r.selected:void 0;return i}function zre(t){return Object.values(ki).includes(t)}function Ure(t,e){var n=[t.classNames.day];return Object.keys(e).forEach(function(r){var i=t.modifiersClassNames[r];if(i)n.push(i);else if(zre(r)){var a=t.classNames["day_".concat(r)];a&&n.push(a)}}),n}function $re(t,e){var n=at({},t.styles.day);return Object.keys(e).forEach(function(r){var i;n=at(at({},n),(i=t.modifiersStyles)===null||i===void 0?void 0:i[r])}),n}function Bre(t,e,n){var r,i,a,o=sn(),c=NN(),u=Dre(t,e),h=Fre(t,u),f=Vre(),p=!!(o.onDayClick||o.mode!=="default");x.useEffect(function(){var B;u.outside||c.focusedDay&&p&&as(c.focusedDay,t)&&((B=n.current)===null||B===void 0||B.focus())},[c.focusedDay,t,n,p,u.outside]);var v=Ure(o,u).join(" "),_=$re(o,u),N=!!(u.outside&&!o.showOutsideDays||u.hidden),j=(a=(i=o.components)===null||i===void 0?void 0:i.DayContent)!==null&&a!==void 0?a:ure,S=s.jsx(j,{date:t,displayMonth:e,activeModifiers:u}),w={style:_,className:v,children:S,role:"gridcell"},y=c.focusTarget&&as(c.focusTarget,t)&&!u.outside,E=c.focusedDay&&as(c.focusedDay,t),I=at(at(at({},w),(r={disabled:u.disabled,role:"gridcell"},r["aria-selected"]=u.selected,r.tabIndex=E||y?0:-1,r)),h),D={isButton:p,isHidden:N,activeModifiers:u,selectedDays:f,buttonProps:I,divProps:w};return D}function Wre(t){var e=x.useRef(null),n=Bre(t.date,t.displayMonth,e);return n.isHidden?s.jsx("div",{role:"gridcell"}):n.isButton?s.jsx(lx,at({name:"day",ref:e},n.buttonProps)):s.jsx("div",at({},n.divProps))}function qre(t){var e=t.number,n=t.dates,r=sn(),i=r.onWeekNumberClick,a=r.styles,o=r.classNames,c=r.locale,u=r.labels.labelWeekNumber,h=r.formatters.formatWeekNumber,f=h(Number(e),{locale:c});if(!i)return s.jsx("span",{className:o.weeknumber,style:a.weeknumber,children:f});var p=u(Number(e),{locale:c}),v=function(_){i(e,n,_)};return s.jsx(lx,{name:"week-number","aria-label":p,className:o.weeknumber,style:a.weeknumber,onClick:v,children:f})}function Hre(t){var e,n,r=sn(),i=r.styles,a=r.classNames,o=r.showWeekNumber,c=r.components,u=(e=c==null?void 0:c.Day)!==null&&e!==void 0?e:Wre,h=(n=c==null?void 0:c.WeekNumber)!==null&&n!==void 0?n:qre,f;return o&&(f=s.jsx("td",{className:a.cell,style:i.cell,children:s.jsx(h,{number:t.weekNumber,dates:t.dates})})),s.jsxs("tr",{className:a.row,style:i.row,children:[f,t.dates.map(function(p){return s.jsx("td",{className:a.cell,style:i.cell,role:"presentation",children:s.jsx(u,{displayMonth:t.displayMonth,date:p})},yee(p))})]})}function uk(t,e,n){for(var r=n!=null&&n.ISOWeek?UD(e):hN(e,n),i=n!=null&&n.ISOWeek?Rc(t):ha(t,n),a=Yi(r,i),o=[],c=0;c<=a;c++)o.push(Br(i,c));var u=o.reduce(function(h,f){var p=n!=null&&n.ISOWeek?BD(f):qD(f,n),v=h.find(function(_){return _.weekNumber===p});return v?(v.dates.push(f),h):(h.push({weekNumber:p,dates:[f]}),h)},[]);return u}function Gre(t,e){var n=uk(ds(t),Iy(t),e);if(e!=null&&e.useFixedWeeks){var r=wee(t,e);if(r<6){var i=n[n.length-1],a=i.dates[i.dates.length-1],o=s1(a,6-r),c=uk(s1(a,1),o,e);n.push.apply(n,c)}}return n}function Kre(t){var e,n,r,i=sn(),a=i.locale,o=i.classNames,c=i.styles,u=i.hideHead,h=i.fixedWeeks,f=i.components,p=i.weekStartsOn,v=i.firstWeekContainsDate,_=i.ISOWeek,N=Gre(t.displayMonth,{useFixedWeeks:!!h,ISOWeek:_,locale:a,weekStartsOn:p,firstWeekContainsDate:v}),j=(e=f==null?void 0:f.Head)!==null&&e!==void 0?e:cre,S=(n=f==null?void 0:f.Row)!==null&&n!==void 0?n:Hre,w=(r=f==null?void 0:f.Footer)!==null&&r!==void 0?r:are;return s.jsxs("table",{id:t.id,className:o.table,style:c.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!u&&s.jsx(j,{}),s.jsx("tbody",{className:o.tbody,style:c.tbody,children:N.map(function(y){return s.jsx(S,{displayMonth:t.displayMonth,dates:y.dates,weekNumber:y.weekNumber},y.weekNumber)})}),s.jsx(w,{displayMonth:t.displayMonth})]})}function Zre(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var Yre=Zre()?x.useLayoutEffect:x.useEffect,g0=!1,Qre=0;function dk(){return"react-day-picker-".concat(++Qre)}function Xre(t){var e,n=t??(g0?dk():null),r=x.useState(n),i=r[0],a=r[1];return Yre(function(){i===null&&a(dk())},[]),x.useEffect(function(){g0===!1&&(g0=!0)},[]),(e=t??i)!==null&&e!==void 0?e:void 0}function Jre(t){var e,n,r=sn(),i=r.dir,a=r.classNames,o=r.styles,c=r.components,u=cp().displayMonths,h=Xre(r.id?"".concat(r.id,"-").concat(t.displayIndex):void 0),f=r.id?"".concat(r.id,"-grid-").concat(t.displayIndex):void 0,p=[a.month],v=o.month,_=t.displayIndex===0,N=t.displayIndex===u.length-1,j=!_&&!N;i==="rtl"&&(e=[_,N],N=e[0],_=e[1]),_&&(p.push(a.caption_start),v=at(at({},v),o.caption_start)),N&&(p.push(a.caption_end),v=at(at({},v),o.caption_end)),j&&(p.push(a.caption_between),v=at(at({},v),o.caption_between));var S=(n=c==null?void 0:c.Caption)!==null&&n!==void 0?n:ire;return s.jsxs("div",{className:p.join(" "),style:v,children:[s.jsx(S,{id:h,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),s.jsx(Kre,{id:f,"aria-labelledby":h,displayMonth:t.displayMonth})]},t.displayIndex)}function ese(t){var e=sn(),n=e.classNames,r=e.styles;return s.jsx("div",{className:n.months,style:r.months,children:t.children})}function tse(t){var e,n,r=t.initialProps,i=sn(),a=NN(),o=cp(),c=x.useState(!1),u=c[0],h=c[1];x.useEffect(function(){i.initialFocus&&a.focusTarget&&(u||(a.focus(a.focusTarget),h(!0)))},[i.initialFocus,u,a.focus,a.focusTarget,a]);var f=[i.classNames.root,i.className];i.numberOfMonths>1&&f.push(i.classNames.multiple_months),i.showWeekNumber&&f.push(i.classNames.with_weeknumber);var p=at(at({},i.styles.root),i.style),v=Object.keys(r).filter(function(N){return N.startsWith("data-")}).reduce(function(N,j){var S;return at(at({},N),(S={},S[j]=r[j],S))},{}),_=(n=(e=r.components)===null||e===void 0?void 0:e.Months)!==null&&n!==void 0?n:ese;return s.jsx("div",at({className:f.join(" "),style:p,dir:i.dir,id:i.id,nonce:r.nonce,title:r.title,lang:r.lang},v,{children:s.jsx(_,{children:o.displayMonths.map(function(N,j){return s.jsx(Jre,{displayIndex:j,displayMonth:N},j)})})}))}function nse(t){var e=t.children,n=Ene(t,["children"]);return s.jsx(qne,{initialProps:n,children:s.jsx(tre,{children:s.jsx(Ore,{initialProps:n,children:s.jsx(dre,{initialProps:n,children:s.jsx(mre,{initialProps:n,children:s.jsx(bre,{children:s.jsx(Mre,{children:e})})})})})})})}function rse(t){return s.jsx(nse,at({},t,{children:s.jsx(tse,{initialProps:t})}))}function pL({className:t,classNames:e,showOutsideDays:n=!0,...r}){return s.jsx(rse,{showOutsideDays:n,className:Xe("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Xe(Kw({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:Xe("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected].day-range-end)]:rounded-r-md",r.mode==="range"?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:Xe(Kw({variant:"ghost"}),"h-8 w-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50  aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...e},components:{IconLeft:({...i})=>s.jsx(oX,{className:"h-4 w-4"}),IconRight:({...i})=>s.jsx(yD,{className:"h-4 w-4"})},...r})}pL.displayName="Calendar";var Fy="Popover",[gL,sce]=jr(Fy,[sh]),up=sh(),[sse,Ml]=gL(Fy),vL=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:i,onOpenChange:a,modal:o=!1}=t,c=up(e),u=x.useRef(null),[h,f]=x.useState(!1),[p,v]=Ts({prop:r,defaultProp:i??!1,onChange:a,caller:Fy});return s.jsx(Xj,{...c,children:s.jsx(sse,{scope:e,contentId:Es(),triggerRef:u,open:p,onOpenChange:v,onOpenToggle:x.useCallback(()=>v(_=>!_),[v]),hasCustomAnchor:h,onCustomAnchorAdd:x.useCallback(()=>f(!0),[]),onCustomAnchorRemove:x.useCallback(()=>f(!1),[]),modal:o,children:n})})};vL.displayName=Fy;var xL="PopoverAnchor",ise=x.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Ml(xL,n),a=up(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:c}=i;return x.useEffect(()=>(o(),()=>c()),[o,c]),s.jsx(by,{...a,...r,ref:e})});ise.displayName=xL;var yL="PopoverTrigger",_L=x.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Ml(yL,n),a=up(n),o=ot(e,i.triggerRef),c=s.jsx(ze.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":SL(i.open),...r,ref:o,onClick:Ee(t.onClick,i.onOpenToggle)});return i.hasCustomAnchor?c:s.jsx(by,{asChild:!0,...a,children:c})});_L.displayName=yL;var EN="PopoverPortal",[ase,ose]=gL(EN,{forceMount:void 0}),wL=t=>{const{__scopePopover:e,forceMount:n,children:r,container:i}=t,a=Ml(EN,e);return s.jsx(ase,{scope:e,forceMount:n,children:s.jsx(Nr,{present:n||a.open,children:s.jsx(tp,{asChild:!0,container:i,children:r})})})};wL.displayName=EN;var Dd="PopoverContent",bL=x.forwardRef((t,e)=>{const n=ose(Dd,t.__scopePopover),{forceMount:r=n.forceMount,...i}=t,a=Ml(Dd,t.__scopePopover);return s.jsx(Nr,{present:r||a.open,children:a.modal?s.jsx(cse,{...i,ref:e}):s.jsx(use,{...i,ref:e})})});bL.displayName=Dd;var lse=yl("PopoverContent.RemoveScroll"),cse=x.forwardRef((t,e)=>{const n=Ml(Dd,t.__scopePopover),r=x.useRef(null),i=ot(e,r),a=x.useRef(!1);return x.useEffect(()=>{const o=r.current;if(o)return Ny(o)},[]),s.jsx(rp,{as:lse,allowPinchZoom:!0,children:s.jsx(jL,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ee(t.onCloseAutoFocus,o=>{var c;o.preventDefault(),a.current||(c=n.triggerRef.current)==null||c.focus()}),onPointerDownOutside:Ee(t.onPointerDownOutside,o=>{const c=o.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,h=c.button===2||u;a.current=h},{checkForDefaultPrevented:!1}),onFocusOutside:Ee(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),use=x.forwardRef((t,e)=>{const n=Ml(Dd,t.__scopePopover),r=x.useRef(!1),i=x.useRef(!1);return s.jsx(jL,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,c;(o=t.onCloseAutoFocus)==null||o.call(t,a),a.defaultPrevented||(r.current||(c=n.triggerRef.current)==null||c.focus(),a.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:a=>{var u,h;(u=t.onInteractOutside)==null||u.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((h=n.triggerRef.current)==null?void 0:h.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),jL=x.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:f,...p}=t,v=Ml(Dd,n),_=up(n);return vy(),s.jsx(Jm,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:s.jsx(Xm,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:f,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:h,onDismiss:()=>v.onOpenChange(!1),children:s.jsx(Jj,{"data-state":SL(v.open),role:"dialog",id:v.contentId,..._,...p,ref:e,style:{...p.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),NL="PopoverClose",dse=x.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Ml(NL,n);return s.jsx(ze.button,{type:"button",...r,ref:e,onClick:Ee(t.onClick,()=>i.onOpenChange(!1))})});dse.displayName=NL;var hse="PopoverArrow",fse=x.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=up(n);return s.jsx(eN,{...i,...r,ref:e})});fse.displayName=hse;function SL(t){return t?"open":"closed"}var mse=vL,pse=_L,gse=wL,EL=bL;const vse=mse,xse=pse,CL=x.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},i)=>s.jsx(gse,{children:s.jsx(EL,{ref:i,align:e,sideOffset:n,className:Xe("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));CL.displayName=EL.displayName;const ku=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},Vy=ih((t,e)=>({paymentMethods:[],paymentRequests:[],loading:!1,initializePaymentMethods:()=>{t({paymentMethods:[{id:"cash",type:"cash",name:"Espèces",icon:"💵",description:"Paiement en liquide lors de la rencontre",fees:0,processingTime:"Immédiat",securityLevel:"medium",available:!0},{id:"transfer",type:"transfer",name:"Virement bancaire",icon:"🏦",description:"Virement SEPA sécurisé",fees:0,processingTime:"1-2 jours ouvrés",securityLevel:"high",available:!0},{id:"paypal",type:"paypal",name:"PayPal",icon:"💳",description:"Paiement sécurisé via PayPal",fees:2.9,processingTime:"Immédiat",securityLevel:"high",available:!0},{id:"lydia",type:"lydia",name:"Lydia",icon:"📱",description:"Paiement mobile instantané",fees:0,processingTime:"Immédiat",securityLevel:"medium",available:!0}]})},createPaymentRequest:async n=>{try{t({loading:!0});const r=e().generateSecurityCode(),i={...n,securityCode:r,status:"pending",createdAt:er(),updatedAt:er()},a=await gl(Ft(De,"paymentRequests"),i),o={id:a.id,...n,securityCode:r,status:"pending",createdAt:new Date,updatedAt:new Date};return t(c=>({paymentRequests:[o,...c.paymentRequests],loading:!1})),fe.success("Demande de paiement créée avec succès"),a.id}catch(r){throw console.error("Erreur lors de la création de la demande de paiement:",r),fe.error("Erreur lors de la création de la demande de paiement"),t({loading:!1}),r}},updatePaymentStatus:async(n,r,i)=>{try{const a={status:r,updatedAt:er()};i&&(a.notes=i),await Tn(xt(De,"paymentRequests",n),a),t(c=>({paymentRequests:c.paymentRequests.map(u=>u.id===n?{...u,status:r,notes:i||u.notes,updatedAt:new Date}:u)}));const o={confirmed:"Paiement confirmé",completed:"Paiement terminé",cancelled:"Paiement annulé",disputed:"Litige signalé"};fe.success(o[r]||"Statut mis à jour")}catch(a){console.error("Erreur lors de la mise à jour du statut:",a),fe.error("Erreur lors de la mise à jour du statut")}},fetchUserPaymentRequests:async n=>{if(n)try{t({loading:!0});const r=vn(Ft(De,"paymentRequests"),Zn("buyerId","==",n),Ks(50)),i=vn(Ft(De,"paymentRequests"),Zn("sellerId","==",n),Ks(50)),[a,o]=await Promise.all([On(r),On(i)]),c=[];a.forEach(u=>{const h=u.data();c.push({id:u.id,...h,createdAt:ku(h.createdAt),updatedAt:ku(h.updatedAt),meetingDateTime:h.meetingDateTime?ku(h.meetingDateTime):void 0})}),o.forEach(u=>{const h=u.data();c.find(f=>f.id===u.id)||c.push({id:u.id,...h,createdAt:ku(h.createdAt),updatedAt:ku(h.updatedAt),meetingDateTime:h.meetingDateTime?ku(h.meetingDateTime):void 0})}),c.sort((u,h)=>h.createdAt.getTime()-u.createdAt.getTime()),t({paymentRequests:c,loading:!1})}catch(r){console.error("Erreur lors du chargement des demandes de paiement:",r),fe.error("Erreur lors du chargement des demandes de paiement"),t({loading:!1})}},generateSecurityCode:()=>Math.random().toString(36).substring(2,8).toUpperCase(),validatePaymentMethod:(n,r)=>{switch(n){case"cash":return!0;case"transfer":return r.bankDetails&&r.bankDetails.iban&&r.bankDetails.accountName;case"paypal":return r.paypalEmail&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.paypalEmail);case"lydia":return r.lydiaPhone&&/^(\+33|0)[1-9](\d{8})$/.test(r.lydiaPhone.replace(/\s/g,""));default:return!1}},calculateFees:(n,r)=>{const{paymentMethods:i}=e(),a=i.find(o=>o.type===r);return a?n*a.fees/100:0},getPaymentInstructions:(n,r)=>{var a,o,c;const i=[];switch(n){case"cash":i.push("💵 Paiement en espèces","📍 Rencontrez-vous au lieu convenu","🔍 Vérifiez l'objet avant de payer","🧾 Demandez un reçu si nécessaire",`🔐 Code de sécurité : ${r.securityCode}`);break;case"transfer":i.push("🏦 Virement bancaire SEPA","📋 Utilisez les coordonnées bancaires fournies","💬 Indiquez la référence de transaction","⏱️ Délai : 1-2 jours ouvrés",`🔐 Code de sécurité : ${r.securityCode}`),(a=r.paymentDetails)!=null&&a.bankDetails&&i.push(`📊 IBAN : ${r.paymentDetails.bankDetails.iban}`,`🏛️ Titulaire : ${r.paymentDetails.bankDetails.accountName}`);break;case"paypal":i.push("💳 Paiement PayPal","📧 Envoyez le paiement à l'adresse email fournie",'🛡️ Utilisez "Biens et services" pour la protection',"⚡ Paiement instantané",`🔐 Code de sécurité : ${r.securityCode}`),(o=r.paymentDetails)!=null&&o.paypalEmail&&i.push(`📧 Email PayPal : ${r.paymentDetails.paypalEmail}`);break;case"lydia":i.push("📱 Paiement Lydia","📞 Envoyez le paiement au numéro fourni","💬 Indiquez la référence de transaction","⚡ Paiement instantané",`🔐 Code de sécurité : ${r.securityCode}`),(c=r.paymentDetails)!=null&&c.lydiaPhone&&i.push(`📞 Numéro Lydia : ${r.paymentDetails.lydiaPhone}`);break}return i}}));var kL="https://js.stripe.com/v3",yse=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/;var _se=function(){for(var e=document.querySelectorAll('script[src^="'.concat(kL,'"]')),n=0;n<e.length;n++){var r=e[n];if(yse.test(r.src))return r}return null},hk=function(e){var n="",r=document.createElement("script");r.src="".concat(kL).concat(n);var i=document.head||document.body;if(!i)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return i.appendChild(r),r},wse=function(e,n){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"2.4.0",startTime:n})},Jh=null,wg=null,bg=null,bse=function(e){return function(){e(new Error("Failed to load Stripe.js"))}},jse=function(e,n){return function(){window.Stripe?e(window.Stripe):n(new Error("Stripe.js not available"))}},Nse=function(e){return Jh!==null?Jh:(Jh=new Promise(function(n,r){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe){n(window.Stripe);return}try{var i=_se();if(!(i&&e)){if(!i)i=hk(e);else if(i&&bg!==null&&wg!==null){var a;i.removeEventListener("load",bg),i.removeEventListener("error",wg),(a=i.parentNode)===null||a===void 0||a.removeChild(i),i=hk(e)}}bg=jse(n,r),wg=bse(r),i.addEventListener("load",bg),i.addEventListener("error",wg)}catch(o){r(o);return}}),Jh.catch(function(n){return Jh=null,Promise.reject(n)}))},Sse=function(e,n,r){if(e===null)return null;var i=e.apply(void 0,n);return wse(i,r),i},ef,TL=!1,PL=function(){return ef||(ef=Nse(null).catch(function(e){return ef=null,Promise.reject(e)}),ef)};Promise.resolve().then(function(){return PL()}).catch(function(t){TL||console.warn(t)});var IL=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];TL=!0;var i=Date.now();return PL().then(function(a){return Sse(a,n,i)})},AL={exports:{}},Ese="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Cse=Ese,kse=Cse;function RL(){}function ML(){}ML.resetWarningCache=RL;var Tse=function(){function t(r,i,a,o,c,u){if(u!==kse){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:ML,resetWarningCache:RL};return n.PropTypes=n,n};AL.exports=Tse();var Pse=AL.exports;const bn=Sm(Pse);function fk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fk(Object(n),!0).forEach(function(r){DL(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ev(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ev=function(e){return typeof e}:ev=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ev(t)}function DL(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OL(t,e){return Ise(t)||Ase(t,e)||Rse(t,e)||Mse()}function Ise(t){if(Array.isArray(t))return t}function Ase(t,e){var n=t&&(typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"]);if(n!=null){var r=[],i=!0,a=!1,o,c;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(u){a=!0,c=u}finally{try{!i&&n.return!=null&&n.return()}finally{if(a)throw c}}return r}}function Rse(t,e){if(t){if(typeof t=="string")return pk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pk(t,e)}}function pk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Mse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var vs=function(e,n,r){var i=!!r,a=Pe.useRef(r);Pe.useEffect(function(){a.current=r},[r]),Pe.useEffect(function(){if(!i||!e)return function(){};var o=function(){a.current&&a.current.apply(a,arguments)};return e.on(n,o),function(){e.off(n,o)}},[i,n,e,a])},d1=function(e){var n=Pe.useRef(e);return Pe.useEffect(function(){n.current=e},[e]),n.current},Od=function(e){return e!==null&&ev(e)==="object"},Dse=function(e){return Od(e)&&typeof e.then=="function"},Ose=function(e){return Od(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},gk="[object Object]",Lse=function t(e,n){if(!Od(e)||!Od(n))return e===n;var r=Array.isArray(e),i=Array.isArray(n);if(r!==i)return!1;var a=Object.prototype.toString.call(e)===gk,o=Object.prototype.toString.call(n)===gk;if(a!==o)return!1;if(!a&&!r)return e===n;var c=Object.keys(e),u=Object.keys(n);if(c.length!==u.length)return!1;for(var h={},f=0;f<c.length;f+=1)h[c[f]]=!0;for(var p=0;p<u.length;p+=1)h[u[p]]=!0;var v=Object.keys(h);if(v.length!==c.length)return!1;var _=e,N=n,j=function(w){return t(_[w],N[w])};return v.every(j)},LL=function(e,n,r){return Od(e)?Object.keys(e).reduce(function(i,a){var o=!Od(n)||!Lse(e[a],n[a]);return r.includes(a)?(o&&console.warn("Unsupported prop change: options.".concat(a," is not a mutable property.")),i):o?mk(mk({},i||{}),{},DL({},a,e[a])):i},null):null},FL="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",vk=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:FL;if(e===null||Ose(e))return e;throw new Error(n)},Fse=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:FL;if(Dse(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(i){return vk(i,n)})};var r=vk(e,n);return r===null?{tag:"empty"}:{tag:"sync",stripe:r}},Vse=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"2.8.1"}),e.registerAppInfo({name:"react-stripe-js",version:"2.8.1",url:"https://stripe.com/docs/stripe-js/react"}))},zy=Pe.createContext(null);zy.displayName="ElementsContext";var VL=function(e,n){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(n," in an <Elements> provider."));return e},zL=function(e){var n=e.stripe,r=e.options,i=e.children,a=Pe.useMemo(function(){return Fse(n)},[n]),o=Pe.useState(function(){return{stripe:a.tag==="sync"?a.stripe:null,elements:a.tag==="sync"?a.stripe.elements(r):null}}),c=OL(o,2),u=c[0],h=c[1];Pe.useEffect(function(){var v=!0,_=function(j){h(function(S){return S.stripe?S:{stripe:j,elements:j.elements(r)}})};return a.tag==="async"&&!u.stripe?a.stripePromise.then(function(N){N&&v&&_(N)}):a.tag==="sync"&&!u.stripe&&_(a.stripe),function(){v=!1}},[a,u,r]);var f=d1(n);Pe.useEffect(function(){f!==null&&f!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[f,n]);var p=d1(r);return Pe.useEffect(function(){if(u.elements){var v=LL(r,p,["clientSecret","fonts"]);v&&u.elements.update(v)}},[r,p,u.elements]),Pe.useEffect(function(){Vse(u.stripe)},[u.stripe]),Pe.createElement(zy.Provider,{value:u},i)};zL.propTypes={stripe:bn.any,options:bn.object};var zse=function(e){var n=Pe.useContext(zy);return VL(n,e)},Use=function(){var e=zse("calls useElements()"),n=e.elements;return n};bn.func.isRequired;var UL=Pe.createContext(null);UL.displayName="CustomCheckoutSdkContext";var $se=function(e,n){if(!e)throw new Error("Could not find CustomCheckoutProvider context; You need to wrap the part of your app that ".concat(n," in an <CustomCheckoutProvider> provider."));return e},Bse=Pe.createContext(null);Bse.displayName="CustomCheckoutContext";bn.any,bn.shape({clientSecret:bn.string.isRequired,elementsOptions:bn.object}).isRequired;var h1=function(e){var n=Pe.useContext(UL),r=Pe.useContext(zy);if(n&&r)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CustomCheckoutProvider> and <Elements> providers."));return n?$se(n,e):VL(r,e)},Wse=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Yn=function(e,n){var r="".concat(Wse(e),"Element"),i=function(u){var h=u.id,f=u.className,p=u.options,v=p===void 0?{}:p,_=u.onBlur,N=u.onFocus,j=u.onReady,S=u.onChange,w=u.onEscape,y=u.onClick,E=u.onLoadError,I=u.onLoaderStart,D=u.onNetworksChange,B=u.onConfirm,R=u.onCancel,F=u.onShippingAddressChange,V=u.onShippingRateChange,k=h1("mounts <".concat(r,">")),M="elements"in k?k.elements:null,O="customCheckoutSdk"in k?k.customCheckoutSdk:null,P=Pe.useState(null),W=OL(P,2),X=W[0],ee=W[1],Z=Pe.useRef(null),U=Pe.useRef(null);vs(X,"blur",_),vs(X,"focus",N),vs(X,"escape",w),vs(X,"click",y),vs(X,"loaderror",E),vs(X,"loaderstart",I),vs(X,"networkschange",D),vs(X,"confirm",B),vs(X,"cancel",R),vs(X,"shippingaddresschange",F),vs(X,"shippingratechange",V),vs(X,"change",S);var q;j&&(e==="expressCheckout"?q=j:q=function(){j(X)}),vs(X,"ready",q),Pe.useLayoutEffect(function(){if(Z.current===null&&U.current!==null&&(M||O)){var Q=null;O?Q=O.createElement(e,v):M&&(Q=M.create(e,v)),Z.current=Q,ee(Q),Q&&Q.mount(U.current)}},[M,O,v]);var H=d1(v);return Pe.useEffect(function(){if(Z.current){var Q=LL(v,H,["paymentRequest"]);Q&&"update"in Z.current&&Z.current.update(Q)}},[v,H]),Pe.useLayoutEffect(function(){return function(){if(Z.current&&typeof Z.current.destroy=="function")try{Z.current.destroy(),Z.current=null}catch{}}},[]),Pe.createElement("div",{id:h,className:f,ref:U})},a=function(u){h1("mounts <".concat(r,">"));var h=u.id,f=u.className;return Pe.createElement("div",{id:h,className:f})},o=n?a:i;return o.propTypes={id:bn.string,className:bn.string,onChange:bn.func,onBlur:bn.func,onFocus:bn.func,onReady:bn.func,onEscape:bn.func,onClick:bn.func,onLoadError:bn.func,onLoaderStart:bn.func,onNetworksChange:bn.func,onConfirm:bn.func,onCancel:bn.func,onShippingAddressChange:bn.func,onShippingRateChange:bn.func,options:bn.object},o.displayName=r,o.__elementType=e,o},Qn=typeof window>"u",qse=Pe.createContext(null);qse.displayName="EmbeddedCheckoutProviderContext";var Hse=function(){var e=h1("calls useStripe()"),n=e.stripe;return n};Yn("auBankAccount",Qn);Yn("card",Qn);Yn("cardNumber",Qn);Yn("cardExpiry",Qn);Yn("cardCvc",Qn);Yn("fpxBank",Qn);Yn("iban",Qn);Yn("idealBank",Qn);Yn("p24Bank",Qn);Yn("epsBank",Qn);Yn("payment",Qn);Yn("expressCheckout",Qn);Yn("currencySelector",Qn);Yn("paymentRequestButton",Qn);Yn("linkAuthentication",Qn);Yn("address",Qn);Yn("shippingAddress",Qn);Yn("paymentMethodMessaging",Qn);Yn("affirmMessage",Qn);Yn("afterpayClearpayMessage",Qn);const Gse=({amount:t,currency:e,onPaymentSuccess:n,onPaymentError:r})=>{Hse(),Use();const[i,a]=x.useState(!1),[o,c]=x.useState(null),u=async h=>{h.preventDefault(),a(!0),c(null);try{await new Promise(p=>setTimeout(p,2e3));const f="pi_"+Math.random().toString(36).substring(2,15);fe.success("Paiement réussi !"),n(f)}catch(f){console.error("Payment error:",f),c(f.message||"Une erreur est survenue lors du paiement"),r(f.message||"Une erreur est survenue lors du paiement")}finally{a(!1)}};return s.jsxs(ae,{children:[s.jsxs(qe,{children:[s.jsxs(Ge,{className:"flex items-center gap-2",children:[s.jsx(Ln,{className:"w-5 h-5"}),"Paiement par carte bancaire"]}),s.jsx(Tt,{children:"Paiement sécurisé via Stripe"})]}),s.jsx(oe,{children:s.jsxs("form",{onSubmit:u,className:"space-y-4",children:[s.jsx("div",{className:"p-4 border rounded-md",children:s.jsx("div",{className:"h-10 flex items-center",children:s.jsx("div",{className:"text-muted-foreground",children:"Formulaire de carte bancaire (simulation)"})})}),o&&s.jsxs(Ut,{className:"border-red-200 bg-red-50",children:[s.jsx(Pn,{className:"h-4 w-4 text-red-600"}),s.jsx($t,{className:"text-red-800",children:o})]}),s.jsxs(Ut,{className:"border-blue-200 bg-blue-50",children:[s.jsx(Ic,{className:"h-4 w-4 text-blue-600"}),s.jsx($t,{className:"text-blue-800",children:"Vos informations de paiement sont sécurisées et cryptées par Stripe."})]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx("p",{children:"Pour tester, utilisez ces cartes :"}),s.jsxs("ul",{className:"list-disc pl-5 mt-1",children:[s.jsx("li",{children:"Succès : 4242 4242 4242 4242"}),s.jsx("li",{children:"Échec : 4000 0000 0000 0002"}),s.jsx("li",{children:"Date : n'importe quelle date future"}),s.jsx("li",{children:"CVC : n'importe quel nombre à 3 chiffres"})]})]}),s.jsx(Y,{type:"submit",disabled:i,className:"w-full bg-gradient-to-r from-primary to-secondary",children:i?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Traitement..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ic,{className:"w-4 h-4 mr-2"}),"Payer ",new Intl.NumberFormat("fr-FR",{style:"currency",currency:e}).format(t)]})})]})})]})},xk=IL("pk_test_51O5JqHLVDYKrxBIwIyiUQOmNk9HFZJKvBz6zJyRNBNjkKSGVEvZKEwlKnwL2JV8PmXVjWSHoZ9XQfKOiLkXGZ9Nh00wPxKdm9p"),Kse=({amount:t,currency:e,onPaymentSuccess:n,onPaymentError:r})=>{const i={appearance:{theme:"stripe"},locale:"fr"};return xk?s.jsx(zL,{stripe:xk,options:i,children:s.jsx(Gse,{amount:t,currency:e,onPaymentSuccess:n,onPaymentError:r})}):s.jsxs(Ut,{className:"border-yellow-200 bg-yellow-50",children:[s.jsx(Pn,{className:"h-4 w-4 text-yellow-600"}),s.jsxs($t,{className:"text-yellow-800",children:[s.jsx("strong",{children:"Configuration Stripe manquante"})," - Veuillez configurer votre clé publique Stripe dans le fichier .env"]})]})},$L=({amount:t,currency:e,onMethodSelect:n,selectedMethod:r})=>{const{paymentMethods:i,calculateFees:a}=Vy(),[o,c]=x.useState({}),[u,h]=x.useState({}),[f,p]=x.useState(null),v=[{id:"card",type:"card",name:"Carte bancaire",icon:Ln,description:"Paiement sécurisé par carte",fees:1.5,processingTime:"Immédiat",securityLevel:"high",available:!0},...i],_=D=>{switch(D){case"card":return Ln;case"cash":return _4;case"transfer":return N4;case"paypal":return Ln;case"lydia":return Hc;default:return Ln}},N=D=>{switch(D){case"high":return"text-green-600 bg-green-100";case"medium":return"text-yellow-600 bg-yellow-100";case"low":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},j=(D,B)=>{var F,V;const R={};switch(D){case"card":return!0;case"transfer":(F=B.bankDetails)!=null&&F.iban?/^[A-Z]{2}\d{2}[A-Z0-9]{4}\d{7}([A-Z0-9]?){0,16}$/.test(B.bankDetails.iban.replace(/\s/g,""))||(R.iban="Format IBAN invalide"):R.iban="IBAN requis",(V=B.bankDetails)!=null&&V.accountName||(R.accountName="Nom du titulaire requis");break;case"paypal":B.paypalEmail?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(B.paypalEmail)||(R.paypalEmail="Format email invalide"):R.paypalEmail="Email PayPal requis";break;case"lydia":B.lydiaPhone?/^(\+33|0)[1-9](\d{8})$/.test(B.lydiaPhone.replace(/\s/g,""))||(R.lydiaPhone="Format de téléphone invalide"):R.lydiaPhone="Numéro de téléphone requis";break}return h(R),Object.keys(R).length===0},S=D=>{if(D==="card"){n(D,{});return}const B=o[D]||{};(D==="cash"||j(D,B))&&n(D,B)},w=(D,B,R)=>{c(F=>({...F,[D]:{...F[D],[B]:R}}))},y=(D,B)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:B||"EUR"}).format(D),E=D=>{p(D),n("card",{stripePaymentId:D})},I=D=>{console.error("Stripe payment error:",D)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Choisissez votre mode de paiement"}),s.jsxs("p",{className:"text-muted-foreground",children:["Montant à payer : ",s.jsx("span",{className:"font-semibold text-primary",children:y(t,e)})]})]}),r==="card"?s.jsx(Kse,{amount:t,currency:e,onPaymentSuccess:E,onPaymentError:I}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:v.map(D=>{var k,M,O,P,W,X,ee,Z;const B=_(D.type),R=D.type==="card"?t*D.fees/100:a(t,D.type),F=t+R,V=r===D.type;return s.jsxs(ae,{className:`cursor-pointer transition-all hover:shadow-md ${V?"ring-2 ring-primary bg-primary/5":""} ${D.available?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>D.available&&S(D.type),children:[s.jsx(qe,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(B,{className:"w-6 h-6 text-primary"})}),s.jsxs("div",{children:[s.jsx(Ge,{className:"text-lg",children:D.name}),s.jsx(Tt,{className:"text-sm",children:D.description})]})]}),V&&s.jsx(Ct,{className:"w-6 h-6 text-green-600"})]})}),s.jsxs(oe,{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Vn,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("span",{children:D.processingTime})]}),s.jsxs(et,{className:N(D.securityLevel),children:[s.jsx(Vt,{className:"w-3 h-3 mr-1"}),D.securityLevel==="high"?"Très sécurisé":D.securityLevel==="medium"?"Sécurisé":"Basique"]})]}),R>0&&s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Montant :"}),s.jsx("span",{children:y(t,e)})]}),s.jsxs("div",{className:"flex justify-between text-orange-600",children:[s.jsxs("span",{children:["Frais (",D.fees,"%) :"]}),s.jsx("span",{children:y(R,e)})]}),s.jsxs("div",{className:"flex justify-between font-semibold border-t pt-1",children:[s.jsx("span",{children:"Total :"}),s.jsx("span",{children:y(F,e)})]})]}),V&&D.type!=="cash"&&D.type!=="card"&&s.jsxs("div",{className:"space-y-3 pt-3 border-t",children:[D.type==="transfer"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx(be,{htmlFor:`iban-${D.id}`,children:"IBAN *"}),s.jsx(We,{id:`iban-${D.id}`,placeholder:"FR76 1234 5678 9012 3456 7890 123",value:((M=(k=o[D.type])==null?void 0:k.bankDetails)==null?void 0:M.iban)||"",onChange:U=>{var q;return w(D.type,"bankDetails",{...(q=o[D.type])==null?void 0:q.bankDetails,iban:U.target.value})},className:u.iban?"border-red-500":""}),u.iban&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.iban})]}),s.jsxs("div",{children:[s.jsx(be,{htmlFor:`account-name-${D.id}`,children:"Nom du titulaire *"}),s.jsx(We,{id:`account-name-${D.id}`,placeholder:"Jean Dupont",value:((P=(O=o[D.type])==null?void 0:O.bankDetails)==null?void 0:P.accountName)||"",onChange:U=>{var q;return w(D.type,"bankDetails",{...(q=o[D.type])==null?void 0:q.bankDetails,accountName:U.target.value})},className:u.accountName?"border-red-500":""}),u.accountName&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.accountName})]}),s.jsxs("div",{children:[s.jsx(be,{htmlFor:`bic-${D.id}`,children:"BIC (optionnel)"}),s.jsx(We,{id:`bic-${D.id}`,placeholder:"BNPAFRPP",value:((X=(W=o[D.type])==null?void 0:W.bankDetails)==null?void 0:X.bic)||"",onChange:U=>{var q;return w(D.type,"bankDetails",{...(q=o[D.type])==null?void 0:q.bankDetails,bic:U.target.value})}})]})]}),D.type==="paypal"&&s.jsxs("div",{children:[s.jsx(be,{htmlFor:`paypal-email-${D.id}`,children:"Email PayPal *"}),s.jsx(We,{id:`paypal-email-${D.id}`,type:"email",placeholder:"votre.email@example.com",value:((ee=o[D.type])==null?void 0:ee.paypalEmail)||"",onChange:U=>w(D.type,"paypalEmail",U.target.value),className:u.paypalEmail?"border-red-500":""}),u.paypalEmail&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.paypalEmail})]}),D.type==="lydia"&&s.jsxs("div",{children:[s.jsx(be,{htmlFor:`lydia-phone-${D.id}`,children:"Numéro de téléphone *"}),s.jsx(We,{id:`lydia-phone-${D.id}`,type:"tel",placeholder:"06 12 34 56 78",value:((Z=o[D.type])==null?void 0:Z.lydiaPhone)||"",onChange:U=>w(D.type,"lydiaPhone",U.target.value),className:u.lydiaPhone?"border-red-500":""}),u.lydiaPhone&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.lydiaPhone})]})]}),V&&D.type!=="card"&&s.jsxs(Ut,{className:"mt-3",children:[s.jsx(vl,{className:"h-4 w-4"}),s.jsxs($t,{children:[D.type==="cash"&&"Rencontrez-vous dans un lieu public et vérifiez l'objet avant de payer.",D.type==="transfer"&&"Le virement sera effectué après confirmation de la transaction. Délai : 1-2 jours ouvrés.",D.type==="paypal"&&"Utilisez l'option 'Biens et services' pour bénéficier de la protection PayPal.",D.type==="lydia"&&"Le paiement Lydia est instantané. Vérifiez le numéro avant d'envoyer."]})]})]})]},D.id)})}),s.jsxs(Ut,{className:"border-yellow-200 bg-yellow-50",children:[s.jsx(Pn,{className:"h-4 w-4 text-yellow-600"}),s.jsxs($t,{className:"text-yellow-800",children:[s.jsx("strong",{children:"Conseils de sécurité :"})," Ne communiquez jamais vos informations bancaires par message. Utilisez uniquement les canaux sécurisés de StudyMarket pour les transactions."]})]})]})};function Zse(t,e){const n=x.useRef(e);x.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const Yse=1;function Qse(t){return Object.freeze({__version:Yse,map:t})}function Xse(t,e){return Object.freeze({...t,...e})}const BL=x.createContext(null),WL=BL.Provider;function qL(){const t=x.useContext(BL);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function Jse(t){function e(n,r){const{instance:i,context:a}=t(n).current;return x.useImperativeHandle(r,()=>i),n.children==null?null:Pe.createElement(WL,{value:a},n.children)}return x.forwardRef(e)}function eie(t){function e(n,r){const{instance:i}=t(n).current;return x.useImperativeHandle(r,()=>i),null}return x.forwardRef(e)}function tie(t,e){const n=x.useRef();x.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function HL(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}var f1={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(p6,function(n){var r="1.9.4";function i(l){var d,g,b,T;for(g=1,b=arguments.length;g<b;g++){T=arguments[g];for(d in T)l[d]=T[d]}return l}var a=Object.create||function(){function l(){}return function(d){return l.prototype=d,new l}}();function o(l,d){var g=Array.prototype.slice;if(l.bind)return l.bind.apply(l,g.call(arguments,1));var b=g.call(arguments,2);return function(){return l.apply(d,b.length?b.concat(g.call(arguments)):arguments)}}var c=0;function u(l){return"_leaflet_id"in l||(l._leaflet_id=++c),l._leaflet_id}function h(l,d,g){var b,T,z,K;return K=function(){b=!1,T&&(z.apply(g,T),T=!1)},z=function(){b?T=arguments:(l.apply(g,arguments),setTimeout(K,d),b=!0)},z}function f(l,d,g){var b=d[1],T=d[0],z=b-T;return l===b&&g?l:((l-T)%z+z)%z+T}function p(){return!1}function v(l,d){if(d===!1)return l;var g=Math.pow(10,d===void 0?6:d);return Math.round(l*g)/g}function _(l){return l.trim?l.trim():l.replace(/^\s+|\s+$/g,"")}function N(l){return _(l).split(/\s+/)}function j(l,d){Object.prototype.hasOwnProperty.call(l,"options")||(l.options=l.options?a(l.options):{});for(var g in d)l.options[g]=d[g];return l.options}function S(l,d,g){var b=[];for(var T in l)b.push(encodeURIComponent(g?T.toUpperCase():T)+"="+encodeURIComponent(l[T]));return(!d||d.indexOf("?")===-1?"?":"&")+b.join("&")}var w=/\{ *([\w_ -]+) *\}/g;function y(l,d){return l.replace(w,function(g,b){var T=d[b];if(T===void 0)throw new Error("No value provided for variable "+g);return typeof T=="function"&&(T=T(d)),T})}var E=Array.isArray||function(l){return Object.prototype.toString.call(l)==="[object Array]"};function I(l,d){for(var g=0;g<l.length;g++)if(l[g]===d)return g;return-1}var D="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function B(l){return window["webkit"+l]||window["moz"+l]||window["ms"+l]}var R=0;function F(l){var d=+new Date,g=Math.max(0,16-(d-R));return R=d+g,window.setTimeout(l,g)}var V=window.requestAnimationFrame||B("RequestAnimationFrame")||F,k=window.cancelAnimationFrame||B("CancelAnimationFrame")||B("CancelRequestAnimationFrame")||function(l){window.clearTimeout(l)};function M(l,d,g){if(g&&V===F)l.call(d);else return V.call(window,o(l,d))}function O(l){l&&k.call(window,l)}var P={__proto__:null,extend:i,create:a,bind:o,get lastId(){return c},stamp:u,throttle:h,wrapNum:f,falseFn:p,formatNum:v,trim:_,splitWords:N,setOptions:j,getParamString:S,template:y,isArray:E,indexOf:I,emptyImageUrl:D,requestFn:V,cancelFn:k,requestAnimFrame:M,cancelAnimFrame:O};function W(){}W.extend=function(l){var d=function(){j(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},g=d.__super__=this.prototype,b=a(g);b.constructor=d,d.prototype=b;for(var T in this)Object.prototype.hasOwnProperty.call(this,T)&&T!=="prototype"&&T!=="__super__"&&(d[T]=this[T]);return l.statics&&i(d,l.statics),l.includes&&(X(l.includes),i.apply(null,[b].concat(l.includes))),i(b,l),delete b.statics,delete b.includes,b.options&&(b.options=g.options?a(g.options):{},i(b.options,l.options)),b._initHooks=[],b.callInitHooks=function(){if(!this._initHooksCalled){g.callInitHooks&&g.callInitHooks.call(this),this._initHooksCalled=!0;for(var z=0,K=b._initHooks.length;z<K;z++)b._initHooks[z].call(this)}},d},W.include=function(l){var d=this.prototype.options;return i(this.prototype,l),l.options&&(this.prototype.options=d,this.mergeOptions(l.options)),this},W.mergeOptions=function(l){return i(this.prototype.options,l),this},W.addInitHook=function(l){var d=Array.prototype.slice.call(arguments,1),g=typeof l=="function"?l:function(){this[l].apply(this,d)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(g),this};function X(l){if(!(typeof L>"u"||!L||!L.Mixin)){l=E(l)?l:[l];for(var d=0;d<l.length;d++)l[d]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ee={on:function(l,d,g){if(typeof l=="object")for(var b in l)this._on(b,l[b],d);else{l=N(l);for(var T=0,z=l.length;T<z;T++)this._on(l[T],d,g)}return this},off:function(l,d,g){if(!arguments.length)delete this._events;else if(typeof l=="object")for(var b in l)this._off(b,l[b],d);else{l=N(l);for(var T=arguments.length===1,z=0,K=l.length;z<K;z++)T?this._off(l[z]):this._off(l[z],d,g)}return this},_on:function(l,d,g,b){if(typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}if(this._listens(l,d,g)===!1){g===this&&(g=void 0);var T={fn:d,ctx:g};b&&(T.once=!0),this._events=this._events||{},this._events[l]=this._events[l]||[],this._events[l].push(T)}},_off:function(l,d,g){var b,T,z;if(this._events&&(b=this._events[l],!!b)){if(arguments.length===1){if(this._firingCount)for(T=0,z=b.length;T<z;T++)b[T].fn=p;delete this._events[l];return}if(typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}var K=this._listens(l,d,g);if(K!==!1){var ne=b[K];this._firingCount&&(ne.fn=p,this._events[l]=b=b.slice()),b.splice(K,1)}}},fire:function(l,d,g){if(!this.listens(l,g))return this;var b=i({},d,{type:l,target:this,sourceTarget:d&&d.sourceTarget||this});if(this._events){var T=this._events[l];if(T){this._firingCount=this._firingCount+1||1;for(var z=0,K=T.length;z<K;z++){var ne=T[z],se=ne.fn;ne.once&&this.off(l,se,ne.ctx),se.call(ne.ctx||this,b)}this._firingCount--}}return g&&this._propagateEvent(b),this},listens:function(l,d,g,b){typeof l!="string"&&console.warn('"string" type argument expected');var T=d;typeof d!="function"&&(b=!!d,T=void 0,g=void 0);var z=this._events&&this._events[l];if(z&&z.length&&this._listens(l,T,g)!==!1)return!0;if(b){for(var K in this._eventParents)if(this._eventParents[K].listens(l,d,g,b))return!0}return!1},_listens:function(l,d,g){if(!this._events)return!1;var b=this._events[l]||[];if(!d)return!!b.length;g===this&&(g=void 0);for(var T=0,z=b.length;T<z;T++)if(b[T].fn===d&&b[T].ctx===g)return T;return!1},once:function(l,d,g){if(typeof l=="object")for(var b in l)this._on(b,l[b],d,!0);else{l=N(l);for(var T=0,z=l.length;T<z;T++)this._on(l[T],d,g,!0)}return this},addEventParent:function(l){return this._eventParents=this._eventParents||{},this._eventParents[u(l)]=l,this},removeEventParent:function(l){return this._eventParents&&delete this._eventParents[u(l)],this},_propagateEvent:function(l){for(var d in this._eventParents)this._eventParents[d].fire(l.type,i({layer:l.target,propagatedFrom:l.target},l),!0)}};ee.addEventListener=ee.on,ee.removeEventListener=ee.clearAllEventListeners=ee.off,ee.addOneTimeEventListener=ee.once,ee.fireEvent=ee.fire,ee.hasEventListeners=ee.listens;var Z=W.extend(ee);function U(l,d,g){this.x=g?Math.round(l):l,this.y=g?Math.round(d):d}var q=Math.trunc||function(l){return l>0?Math.floor(l):Math.ceil(l)};U.prototype={clone:function(){return new U(this.x,this.y)},add:function(l){return this.clone()._add(H(l))},_add:function(l){return this.x+=l.x,this.y+=l.y,this},subtract:function(l){return this.clone()._subtract(H(l))},_subtract:function(l){return this.x-=l.x,this.y-=l.y,this},divideBy:function(l){return this.clone()._divideBy(l)},_divideBy:function(l){return this.x/=l,this.y/=l,this},multiplyBy:function(l){return this.clone()._multiplyBy(l)},_multiplyBy:function(l){return this.x*=l,this.y*=l,this},scaleBy:function(l){return new U(this.x*l.x,this.y*l.y)},unscaleBy:function(l){return new U(this.x/l.x,this.y/l.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=q(this.x),this.y=q(this.y),this},distanceTo:function(l){l=H(l);var d=l.x-this.x,g=l.y-this.y;return Math.sqrt(d*d+g*g)},equals:function(l){return l=H(l),l.x===this.x&&l.y===this.y},contains:function(l){return l=H(l),Math.abs(l.x)<=Math.abs(this.x)&&Math.abs(l.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function H(l,d,g){return l instanceof U?l:E(l)?new U(l[0],l[1]):l==null?l:typeof l=="object"&&"x"in l&&"y"in l?new U(l.x,l.y):new U(l,d,g)}function Q(l,d){if(l)for(var g=d?[l,d]:l,b=0,T=g.length;b<T;b++)this.extend(g[b])}Q.prototype={extend:function(l){var d,g;if(!l)return this;if(l instanceof U||typeof l[0]=="number"||"x"in l)d=g=H(l);else if(l=he(l),d=l.min,g=l.max,!d||!g)return this;return!this.min&&!this.max?(this.min=d.clone(),this.max=g.clone()):(this.min.x=Math.min(d.x,this.min.x),this.max.x=Math.max(g.x,this.max.x),this.min.y=Math.min(d.y,this.min.y),this.max.y=Math.max(g.y,this.max.y)),this},getCenter:function(l){return H((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,l)},getBottomLeft:function(){return H(this.min.x,this.max.y)},getTopRight:function(){return H(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(l){var d,g;return typeof l[0]=="number"||l instanceof U?l=H(l):l=he(l),l instanceof Q?(d=l.min,g=l.max):d=g=l,d.x>=this.min.x&&g.x<=this.max.x&&d.y>=this.min.y&&g.y<=this.max.y},intersects:function(l){l=he(l);var d=this.min,g=this.max,b=l.min,T=l.max,z=T.x>=d.x&&b.x<=g.x,K=T.y>=d.y&&b.y<=g.y;return z&&K},overlaps:function(l){l=he(l);var d=this.min,g=this.max,b=l.min,T=l.max,z=T.x>d.x&&b.x<g.x,K=T.y>d.y&&b.y<g.y;return z&&K},isValid:function(){return!!(this.min&&this.max)},pad:function(l){var d=this.min,g=this.max,b=Math.abs(d.x-g.x)*l,T=Math.abs(d.y-g.y)*l;return he(H(d.x-b,d.y-T),H(g.x+b,g.y+T))},equals:function(l){return l?(l=he(l),this.min.equals(l.getTopLeft())&&this.max.equals(l.getBottomRight())):!1}};function he(l,d){return!l||l instanceof Q?l:new Q(l,d)}function ye(l,d){if(l)for(var g=d?[l,d]:l,b=0,T=g.length;b<T;b++)this.extend(g[b])}ye.prototype={extend:function(l){var d=this._southWest,g=this._northEast,b,T;if(l instanceof He)b=l,T=l;else if(l instanceof ye){if(b=l._southWest,T=l._northEast,!b||!T)return this}else return l?this.extend(re(l)||Ue(l)):this;return!d&&!g?(this._southWest=new He(b.lat,b.lng),this._northEast=new He(T.lat,T.lng)):(d.lat=Math.min(b.lat,d.lat),d.lng=Math.min(b.lng,d.lng),g.lat=Math.max(T.lat,g.lat),g.lng=Math.max(T.lng,g.lng)),this},pad:function(l){var d=this._southWest,g=this._northEast,b=Math.abs(d.lat-g.lat)*l,T=Math.abs(d.lng-g.lng)*l;return new ye(new He(d.lat-b,d.lng-T),new He(g.lat+b,g.lng+T))},getCenter:function(){return new He((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new He(this.getNorth(),this.getWest())},getSouthEast:function(){return new He(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(l){typeof l[0]=="number"||l instanceof He||"lat"in l?l=re(l):l=Ue(l);var d=this._southWest,g=this._northEast,b,T;return l instanceof ye?(b=l.getSouthWest(),T=l.getNorthEast()):b=T=l,b.lat>=d.lat&&T.lat<=g.lat&&b.lng>=d.lng&&T.lng<=g.lng},intersects:function(l){l=Ue(l);var d=this._southWest,g=this._northEast,b=l.getSouthWest(),T=l.getNorthEast(),z=T.lat>=d.lat&&b.lat<=g.lat,K=T.lng>=d.lng&&b.lng<=g.lng;return z&&K},overlaps:function(l){l=Ue(l);var d=this._southWest,g=this._northEast,b=l.getSouthWest(),T=l.getNorthEast(),z=T.lat>d.lat&&b.lat<g.lat,K=T.lng>d.lng&&b.lng<g.lng;return z&&K},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(l,d){return l?(l=Ue(l),this._southWest.equals(l.getSouthWest(),d)&&this._northEast.equals(l.getNorthEast(),d)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ue(l,d){return l instanceof ye?l:new ye(l,d)}function He(l,d,g){if(isNaN(l)||isNaN(d))throw new Error("Invalid LatLng object: ("+l+", "+d+")");this.lat=+l,this.lng=+d,g!==void 0&&(this.alt=+g)}He.prototype={equals:function(l,d){if(!l)return!1;l=re(l);var g=Math.max(Math.abs(this.lat-l.lat),Math.abs(this.lng-l.lng));return g<=(d===void 0?1e-9:d)},toString:function(l){return"LatLng("+v(this.lat,l)+", "+v(this.lng,l)+")"},distanceTo:function(l){return xe.distance(this,re(l))},wrap:function(){return xe.wrapLatLng(this)},toBounds:function(l){var d=180*l/40075017,g=d/Math.cos(Math.PI/180*this.lat);return Ue([this.lat-d,this.lng-g],[this.lat+d,this.lng+g])},clone:function(){return new He(this.lat,this.lng,this.alt)}};function re(l,d,g){return l instanceof He?l:E(l)&&typeof l[0]!="object"?l.length===3?new He(l[0],l[1],l[2]):l.length===2?new He(l[0],l[1]):null:l==null?l:typeof l=="object"&&"lat"in l?new He(l.lat,"lng"in l?l.lng:l.lon,l.alt):d===void 0?null:new He(l,d,g)}var ce={latLngToPoint:function(l,d){var g=this.projection.project(l),b=this.scale(d);return this.transformation._transform(g,b)},pointToLatLng:function(l,d){var g=this.scale(d),b=this.transformation.untransform(l,g);return this.projection.unproject(b)},project:function(l){return this.projection.project(l)},unproject:function(l){return this.projection.unproject(l)},scale:function(l){return 256*Math.pow(2,l)},zoom:function(l){return Math.log(l/256)/Math.LN2},getProjectedBounds:function(l){if(this.infinite)return null;var d=this.projection.bounds,g=this.scale(l),b=this.transformation.transform(d.min,g),T=this.transformation.transform(d.max,g);return new Q(b,T)},infinite:!1,wrapLatLng:function(l){var d=this.wrapLng?f(l.lng,this.wrapLng,!0):l.lng,g=this.wrapLat?f(l.lat,this.wrapLat,!0):l.lat,b=l.alt;return new He(g,d,b)},wrapLatLngBounds:function(l){var d=l.getCenter(),g=this.wrapLatLng(d),b=d.lat-g.lat,T=d.lng-g.lng;if(b===0&&T===0)return l;var z=l.getSouthWest(),K=l.getNorthEast(),ne=new He(z.lat-b,z.lng-T),se=new He(K.lat-b,K.lng-T);return new ye(ne,se)}},xe=i({},ce,{wrapLng:[-180,180],R:6371e3,distance:function(l,d){var g=Math.PI/180,b=l.lat*g,T=d.lat*g,z=Math.sin((d.lat-l.lat)*g/2),K=Math.sin((d.lng-l.lng)*g/2),ne=z*z+Math.cos(b)*Math.cos(T)*K*K,se=2*Math.atan2(Math.sqrt(ne),Math.sqrt(1-ne));return this.R*se}}),Fe=6378137,je={R:Fe,MAX_LATITUDE:85.0511287798,project:function(l){var d=Math.PI/180,g=this.MAX_LATITUDE,b=Math.max(Math.min(g,l.lat),-g),T=Math.sin(b*d);return new U(this.R*l.lng*d,this.R*Math.log((1+T)/(1-T))/2)},unproject:function(l){var d=180/Math.PI;return new He((2*Math.atan(Math.exp(l.y/this.R))-Math.PI/2)*d,l.x*d/this.R)},bounds:function(){var l=Fe*Math.PI;return new Q([-l,-l],[l,l])}()};function Ce(l,d,g,b){if(E(l)){this._a=l[0],this._b=l[1],this._c=l[2],this._d=l[3];return}this._a=l,this._b=d,this._c=g,this._d=b}Ce.prototype={transform:function(l,d){return this._transform(l.clone(),d)},_transform:function(l,d){return d=d||1,l.x=d*(this._a*l.x+this._b),l.y=d*(this._c*l.y+this._d),l},untransform:function(l,d){return d=d||1,new U((l.x/d-this._b)/this._a,(l.y/d-this._d)/this._c)}};function Re(l,d,g,b){return new Ce(l,d,g,b)}var Me=i({},xe,{code:"EPSG:3857",projection:je,transformation:function(){var l=.5/(Math.PI*je.R);return Re(l,.5,-l,.5)}()}),lt=i({},Me,{code:"EPSG:900913"});function wt(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function de(l,d){var g="",b,T,z,K,ne,se;for(b=0,z=l.length;b<z;b++){for(ne=l[b],T=0,K=ne.length;T<K;T++)se=ne[T],g+=(T?"L":"M")+se.x+" "+se.y;g+=d?Je.svg?"z":"x":""}return g||"M0 0"}var Ye=document.documentElement.style,vt="ActiveXObject"in window,an=vt&&!document.addEventListener,G="msLaunchUri"in navigator&&!("documentMode"in document),te=Rs("webkit"),le=Rs("android"),Ie=Rs("android 2")||Rs("android 3"),Se=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),_e=le&&Rs("Google")&&Se<537&&!("AudioNode"in window),Ae=!!window.opera,it=!G&&Rs("chrome"),It=Rs("gecko")&&!te&&!Ae&&!vt,fr=!it&&Rs("safari"),Ai=Rs("phantom"),fs="OTransition"in Ye,va=navigator.platform.indexOf("Win")===0,xa=vt&&"transition"in Ye,Ri="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ie,mo="MozPerspective"in Ye,Xc=!window.L_DISABLE_3D&&(xa||Ri||mo)&&!fs&&!Ai,ya=typeof orientation<"u"||Rs("mobile"),po=ya&&te,fp=ya&&Ri,hh=!window.PointerEvent&&window.MSPointerEvent,go=!!(window.PointerEvent||hh),Jc="ontouchstart"in window||!!window.TouchEvent,fh=!window.L_NO_TOUCH&&(Jc||go),_a=ya&&Ae,mp=ya&&It,eu=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,pp=function(){var l=!1;try{var d=Object.defineProperty({},"passive",{get:function(){l=!0}});window.addEventListener("testPassiveEventSupport",p,d),window.removeEventListener("testPassiveEventSupport",p,d)}catch{}return l}(),Ol=function(){return!!document.createElement("canvas").getContext}(),tu=!!(document.createElementNS&&wt("svg").createSVGRect),mr=!!tu&&function(){var l=document.createElement("div");return l.innerHTML="<svg/>",(l.firstChild&&l.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),gp=!tu&&function(){try{var l=document.createElement("div");l.innerHTML='<v:shape adj="1"/>';var d=l.firstChild;return d.style.behavior="url(#default#VML)",d&&typeof d.adj=="object"}catch{return!1}}(),Ll=navigator.platform.indexOf("Mac")===0,Fl=navigator.platform.indexOf("Linux")===0;function Rs(l){return navigator.userAgent.toLowerCase().indexOf(l)>=0}var Je={ie:vt,ielt9:an,edge:G,webkit:te,android:le,android23:Ie,androidStock:_e,opera:Ae,chrome:it,gecko:It,safari:fr,phantom:Ai,opera12:fs,win:va,ie3d:xa,webkit3d:Ri,gecko3d:mo,any3d:Xc,mobile:ya,mobileWebkit:po,mobileWebkit3d:fp,msPointer:hh,pointer:go,touch:fh,touchNative:Jc,mobileOpera:_a,mobileGecko:mp,retina:eu,passiveEvents:pp,canvas:Ol,svg:tu,vml:gp,inlineSvg:mr,mac:Ll,linux:Fl},wa=Je.msPointer?"MSPointerDown":"pointerdown",vp=Je.msPointer?"MSPointerMove":"pointermove",xp=Je.msPointer?"MSPointerUp":"pointerup",Vl=Je.msPointer?"MSPointerCancel":"pointercancel",nu={touchstart:wa,touchmove:vp,touchend:xp,touchcancel:Vl},ru={touchstart:iu,touchmove:su,touchend:su,touchcancel:su},ri={},si=!1;function yp(l,d,g){return d==="touchstart"&&wp(),ru[d]?(g=ru[d].bind(this,g),l.addEventListener(nu[d],g,!1),g):(console.warn("wrong event specified:",d),p)}function _p(l,d,g){if(!nu[d]){console.warn("wrong event specified:",d);return}l.removeEventListener(nu[d],g,!1)}function mh(l){ri[l.pointerId]=l}function ph(l){ri[l.pointerId]&&(ri[l.pointerId]=l)}function gh(l){delete ri[l.pointerId]}function wp(){si||(document.addEventListener(wa,mh,!0),document.addEventListener(vp,ph,!0),document.addEventListener(xp,gh,!0),document.addEventListener(Vl,gh,!0),si=!0)}function su(l,d){if(d.pointerType!==(d.MSPOINTER_TYPE_MOUSE||"mouse")){d.touches=[];for(var g in ri)d.touches.push(ri[g]);d.changedTouches=[d],l(d)}}function iu(l,d){d.MSPOINTER_TYPE_TOUCH&&d.pointerType===d.MSPOINTER_TYPE_TOUCH&&_n(d),su(l,d)}function bp(l){var d={},g,b;for(b in l)g=l[b],d[b]=g&&g.bind?g.bind(l):g;return l=d,d.type="dblclick",d.detail=2,d.isTrusted=!1,d._simulated=!0,d}var vh=200;function zl(l,d){l.addEventListener("dblclick",d);var g=0,b;function T(z){if(z.detail!==1){b=z.detail;return}if(!(z.pointerType==="mouse"||z.sourceCapabilities&&!z.sourceCapabilities.firesTouchEvents)){var K=Th(z);if(!(K.some(function(se){return se instanceof HTMLLabelElement&&se.attributes.for})&&!K.some(function(se){return se instanceof HTMLInputElement||se instanceof HTMLSelectElement}))){var ne=Date.now();ne-g<=vh?(b++,b===2&&d(bp(z))):b=1,g=ne}}}return l.addEventListener("click",T),{dblclick:d,simDblclick:T}}function ba(l,d){l.removeEventListener("dblclick",d.dblclick),l.removeEventListener("click",d.simDblclick)}var Ul=Na(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),$l=Na(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),xh=$l==="webkitTransition"||$l==="OTransition"?$l+"End":"transitionend";function yh(l){return typeof l=="string"?document.getElementById(l):l}function vo(l,d){var g=l.style[d]||l.currentStyle&&l.currentStyle[d];if((!g||g==="auto")&&document.defaultView){var b=document.defaultView.getComputedStyle(l,null);g=b?b[d]:null}return g==="auto"?null:g}function Et(l,d,g){var b=document.createElement(l);return b.className=d||"",g&&g.appendChild(b),b}function tn(l){var d=l.parentNode;d&&d.removeChild(l)}function Bl(l){for(;l.firstChild;)l.removeChild(l.firstChild)}function ja(l){var d=l.parentNode;d&&d.lastChild!==l&&d.appendChild(l)}function xo(l){var d=l.parentNode;d&&d.firstChild!==l&&d.insertBefore(l,d.firstChild)}function _h(l,d){if(l.classList!==void 0)return l.classList.contains(d);var g=Ms(l);return g.length>0&&new RegExp("(^|\\s)"+d+"(\\s|$)").test(g)}function gt(l,d){if(l.classList!==void 0)for(var g=N(d),b=0,T=g.length;b<T;b++)l.classList.add(g[b]);else if(!_h(l,d)){var z=Ms(l);wh(l,(z?z+" ":"")+d)}}function hn(l,d){l.classList!==void 0?l.classList.remove(d):wh(l,_((" "+Ms(l)+" ").replace(" "+d+" "," ")))}function wh(l,d){l.className.baseVal===void 0?l.className=d:l.className.baseVal=d}function Ms(l){return l.correspondingElement&&(l=l.correspondingElement),l.className.baseVal===void 0?l.className:l.className.baseVal}function Cn(l,d){"opacity"in l.style?l.style.opacity=d:"filter"in l.style&&au(l,d)}function au(l,d){var g=!1,b="DXImageTransform.Microsoft.Alpha";try{g=l.filters.item(b)}catch{if(d===1)return}d=Math.round(d*100),g?(g.Enabled=d!==100,g.Opacity=d):l.style.filter+=" progid:"+b+"(opacity="+d+")"}function Na(l){for(var d=document.documentElement.style,g=0;g<l.length;g++)if(l[g]in d)return l[g];return!1}function Mi(l,d,g){var b=d||new U(0,0);l.style[Ul]=(Je.ie3d?"translate("+b.x+"px,"+b.y+"px)":"translate3d("+b.x+"px,"+b.y+"px,0)")+(g?" scale("+g+")":"")}function ct(l,d){l._leaflet_pos=d,Je.any3d?Mi(l,d):(l.style.left=d.x+"px",l.style.top=d.y+"px")}function Ds(l){return l._leaflet_pos||new U(0,0)}var ii,ai,bh;if("onselectstart"in document)ii=function(){rt(window,"selectstart",_n)},ai=function(){Zt(window,"selectstart",_n)};else{var yo=Na(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ii=function(){if(yo){var l=document.documentElement.style;bh=l[yo],l[yo]="none"}},ai=function(){yo&&(document.documentElement.style[yo]=bh,bh=void 0)}}function jh(){rt(window,"dragstart",_n)}function Nh(){Zt(window,"dragstart",_n)}var ou,Sh;function Sa(l){for(;l.tabIndex===-1;)l=l.parentNode;l.style&&(ms(),ou=l,Sh=l.style.outlineStyle,l.style.outlineStyle="none",rt(window,"keydown",ms))}function ms(){ou&&(ou.style.outlineStyle=Sh,ou=void 0,Sh=void 0,Zt(window,"keydown",ms))}function Eh(l){do l=l.parentNode;while((!l.offsetWidth||!l.offsetHeight)&&l!==document.body);return l}function lu(l){var d=l.getBoundingClientRect();return{x:d.width/l.offsetWidth||1,y:d.height/l.offsetHeight||1,boundingClientRect:d}}var jp={__proto__:null,TRANSFORM:Ul,TRANSITION:$l,TRANSITION_END:xh,get:yh,getStyle:vo,create:Et,remove:tn,empty:Bl,toFront:ja,toBack:xo,hasClass:_h,addClass:gt,removeClass:hn,setClass:wh,getClass:Ms,setOpacity:Cn,testProp:Na,setTransform:Mi,setPosition:ct,getPosition:Ds,get disableTextSelection(){return ii},get enableTextSelection(){return ai},disableImageDrag:jh,enableImageDrag:Nh,preventOutline:Sa,restoreOutline:ms,getSizedParentNode:Eh,getScale:lu};function rt(l,d,g,b){if(d&&typeof d=="object")for(var T in d)Ch(l,T,d[T],g);else{d=N(d);for(var z=0,K=d.length;z<K;z++)Ch(l,d[z],g,b)}return this}var Os="_leaflet_events";function Zt(l,d,g,b){if(arguments.length===1)Np(l),delete l[Os];else if(d&&typeof d=="object")for(var T in d)kh(l,T,d[T],g);else if(d=N(d),arguments.length===2)Np(l,function(ne){return I(d,ne)!==-1});else for(var z=0,K=d.length;z<K;z++)kh(l,d[z],g,b);return this}function Np(l,d){for(var g in l[Os]){var b=g.split(/\d/)[0];(!d||d(b))&&kh(l,b,null,null,g)}}var Ls={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ch(l,d,g,b){var T=d+u(g)+(b?"_"+u(b):"");if(l[Os]&&l[Os][T])return this;var z=function(ne){return g.call(b||l,ne||window.event)},K=z;!Je.touchNative&&Je.pointer&&d.indexOf("touch")===0?z=yp(l,d,z):Je.touch&&d==="dblclick"?z=zl(l,z):"addEventListener"in l?d==="touchstart"||d==="touchmove"||d==="wheel"||d==="mousewheel"?l.addEventListener(Ls[d]||d,z,Je.passiveEvents?{passive:!1}:!1):d==="mouseenter"||d==="mouseleave"?(z=function(ne){ne=ne||window.event,Ph(l,ne)&&K(ne)},l.addEventListener(Ls[d],z,!1)):l.addEventListener(d,K,!1):l.attachEvent("on"+d,z),l[Os]=l[Os]||{},l[Os][T]=z}function kh(l,d,g,b,T){T=T||d+u(g)+(b?"_"+u(b):"");var z=l[Os]&&l[Os][T];if(!z)return this;!Je.touchNative&&Je.pointer&&d.indexOf("touch")===0?_p(l,d,z):Je.touch&&d==="dblclick"?ba(l,z):"removeEventListener"in l?l.removeEventListener(Ls[d]||d,z,!1):l.detachEvent("on"+d,z),l[Os][T]=null}function Fs(l){return l.stopPropagation?l.stopPropagation():l.originalEvent?l.originalEvent._stopped=!0:l.cancelBubble=!0,this}function _o(l){return Ch(l,"wheel",Fs),this}function wo(l){return rt(l,"mousedown touchstart dblclick contextmenu",Fs),l._leaflet_disable_click=!0,this}function _n(l){return l.preventDefault?l.preventDefault():l.returnValue=!1,this}function ps(l){return _n(l),Fs(l),this}function Th(l){if(l.composedPath)return l.composedPath();for(var d=[],g=l.target;g;)d.push(g),g=g.parentNode;return d}function cu(l,d){if(!d)return new U(l.clientX,l.clientY);var g=lu(d),b=g.boundingClientRect;return new U((l.clientX-b.left)/g.x-d.clientLeft,(l.clientY-b.top)/g.y-d.clientTop)}var fn=Je.linux&&Je.chrome?window.devicePixelRatio:Je.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Sp(l){return Je.edge?l.wheelDeltaY/2:l.deltaY&&l.deltaMode===0?-l.deltaY/fn:l.deltaY&&l.deltaMode===1?-l.deltaY*20:l.deltaY&&l.deltaMode===2?-l.deltaY*60:l.deltaX||l.deltaZ?0:l.wheelDelta?(l.wheelDeltaY||l.wheelDelta)/2:l.detail&&Math.abs(l.detail)<32765?-l.detail*20:l.detail?l.detail/-32765*60:0}function Ph(l,d){var g=d.relatedTarget;if(!g)return!0;try{for(;g&&g!==l;)g=g.parentNode}catch{return!1}return g!==l}var Ep={__proto__:null,on:rt,off:Zt,stopPropagation:Fs,disableScrollPropagation:_o,disableClickPropagation:wo,preventDefault:_n,stop:ps,getPropagationPath:Th,getMousePosition:cu,getWheelDelta:Sp,isExternalTarget:Ph,addListener:rt,removeListener:Zt},Ih=Z.extend({run:function(l,d,g,b){this.stop(),this._el=l,this._inProgress=!0,this._duration=g||.25,this._easeOutPower=1/Math.max(b||.5,.2),this._startPos=Ds(l),this._offset=d.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=M(this._animate,this),this._step()},_step:function(l){var d=+new Date-this._startTime,g=this._duration*1e3;d<g?this._runFrame(this._easeOut(d/g),l):(this._runFrame(1),this._complete())},_runFrame:function(l,d){var g=this._startPos.add(this._offset.multiplyBy(l));d&&g._round(),ct(this._el,g),this.fire("step")},_complete:function(){O(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(l){return 1-Math.pow(1-l,this._easeOutPower)}}),Nt=Z.extend({options:{crs:Me,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(l,d){d=j(this,d),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(l),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),d.maxBounds&&this.setMaxBounds(d.maxBounds),d.zoom!==void 0&&(this._zoom=this._limitZoom(d.zoom)),d.center&&d.zoom!==void 0&&this.setView(re(d.center),d.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=$l&&Je.any3d&&!Je.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),rt(this._proxy,xh,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(l,d,g){if(d=d===void 0?this._zoom:this._limitZoom(d),l=this._limitCenter(re(l),d,this.options.maxBounds),g=g||{},this._stop(),this._loaded&&!g.reset&&g!==!0){g.animate!==void 0&&(g.zoom=i({animate:g.animate},g.zoom),g.pan=i({animate:g.animate,duration:g.duration},g.pan));var b=this._zoom!==d?this._tryAnimatedZoom&&this._tryAnimatedZoom(l,d,g.zoom):this._tryAnimatedPan(l,g.pan);if(b)return clearTimeout(this._sizeTimer),this}return this._resetView(l,d,g.pan&&g.pan.noMoveStart),this},setZoom:function(l,d){return this._loaded?this.setView(this.getCenter(),l,{zoom:d}):(this._zoom=l,this)},zoomIn:function(l,d){return l=l||(Je.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+l,d)},zoomOut:function(l,d){return l=l||(Je.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-l,d)},setZoomAround:function(l,d,g){var b=this.getZoomScale(d),T=this.getSize().divideBy(2),z=l instanceof U?l:this.latLngToContainerPoint(l),K=z.subtract(T).multiplyBy(1-1/b),ne=this.containerPointToLatLng(T.add(K));return this.setView(ne,d,{zoom:g})},_getBoundsCenterZoom:function(l,d){d=d||{},l=l.getBounds?l.getBounds():Ue(l);var g=H(d.paddingTopLeft||d.padding||[0,0]),b=H(d.paddingBottomRight||d.padding||[0,0]),T=this.getBoundsZoom(l,!1,g.add(b));if(T=typeof d.maxZoom=="number"?Math.min(d.maxZoom,T):T,T===1/0)return{center:l.getCenter(),zoom:T};var z=b.subtract(g).divideBy(2),K=this.project(l.getSouthWest(),T),ne=this.project(l.getNorthEast(),T),se=this.unproject(K.add(ne).divideBy(2).add(z),T);return{center:se,zoom:T}},fitBounds:function(l,d){if(l=Ue(l),!l.isValid())throw new Error("Bounds are not valid.");var g=this._getBoundsCenterZoom(l,d);return this.setView(g.center,g.zoom,d)},fitWorld:function(l){return this.fitBounds([[-90,-180],[90,180]],l)},panTo:function(l,d){return this.setView(l,this._zoom,{pan:d})},panBy:function(l,d){if(l=H(l).round(),d=d||{},!l.x&&!l.y)return this.fire("moveend");if(d.animate!==!0&&!this.getSize().contains(l))return this._resetView(this.unproject(this.project(this.getCenter()).add(l)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ih,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),d.noMoveStart||this.fire("movestart"),d.animate!==!1){gt(this._mapPane,"leaflet-pan-anim");var g=this._getMapPanePos().subtract(l).round();this._panAnim.run(this._mapPane,g,d.duration||.25,d.easeLinearity)}else this._rawPanBy(l),this.fire("move").fire("moveend");return this},flyTo:function(l,d,g){if(g=g||{},g.animate===!1||!Je.any3d)return this.setView(l,d,g);this._stop();var b=this.project(this.getCenter()),T=this.project(l),z=this.getSize(),K=this._zoom;l=re(l),d=d===void 0?K:d;var ne=Math.max(z.x,z.y),se=ne*this.getZoomScale(K,d),pe=T.distanceTo(b)||1,Oe=1.42,st=Oe*Oe;function bt(Bn){var $p=Bn?-1:1,u6=Bn?se:ne,d6=se*se-ne*ne+$p*st*st*pe*pe,h6=2*u6*st*pe,s_=d6/h6,ES=Math.sqrt(s_*s_+1)-s_,f6=ES<1e-9?-18:Math.log(ES);return f6}function Vr(Bn){return(Math.exp(Bn)-Math.exp(-Bn))/2}function lr(Bn){return(Math.exp(Bn)+Math.exp(-Bn))/2}function zs(Bn){return Vr(Bn)/lr(Bn)}var es=bt(0);function bu(Bn){return ne*(lr(es)/lr(es+Oe*Bn))}function a6(Bn){return ne*(lr(es)*zs(es+Oe*Bn)-Vr(es))/st}function o6(Bn){return 1-Math.pow(1-Bn,1.5)}var l6=Date.now(),NS=(bt(1)-es)/Oe,c6=g.duration?1e3*g.duration:1e3*NS*.8;function SS(){var Bn=(Date.now()-l6)/c6,$p=o6(Bn)*NS;Bn<=1?(this._flyToFrame=M(SS,this),this._move(this.unproject(b.add(T.subtract(b).multiplyBy(a6($p)/pe)),K),this.getScaleZoom(ne/bu($p),K),{flyTo:!0})):this._move(l,d)._moveEnd(!0)}return this._moveStart(!0,g.noMoveStart),SS.call(this),this},flyToBounds:function(l,d){var g=this._getBoundsCenterZoom(l,d);return this.flyTo(g.center,g.zoom,d)},setMaxBounds:function(l){return l=Ue(l),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),l.isValid()?(this.options.maxBounds=l,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(l){var d=this.options.minZoom;return this.options.minZoom=l,this._loaded&&d!==l&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(l):this},setMaxZoom:function(l){var d=this.options.maxZoom;return this.options.maxZoom=l,this._loaded&&d!==l&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(l):this},panInsideBounds:function(l,d){this._enforcingBounds=!0;var g=this.getCenter(),b=this._limitCenter(g,this._zoom,Ue(l));return g.equals(b)||this.panTo(b,d),this._enforcingBounds=!1,this},panInside:function(l,d){d=d||{};var g=H(d.paddingTopLeft||d.padding||[0,0]),b=H(d.paddingBottomRight||d.padding||[0,0]),T=this.project(this.getCenter()),z=this.project(l),K=this.getPixelBounds(),ne=he([K.min.add(g),K.max.subtract(b)]),se=ne.getSize();if(!ne.contains(z)){this._enforcingBounds=!0;var pe=z.subtract(ne.getCenter()),Oe=ne.extend(z).getSize().subtract(se);T.x+=pe.x<0?-Oe.x:Oe.x,T.y+=pe.y<0?-Oe.y:Oe.y,this.panTo(this.unproject(T),d),this._enforcingBounds=!1}return this},invalidateSize:function(l){if(!this._loaded)return this;l=i({animate:!1,pan:!0},l===!0?{animate:!0}:l);var d=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var g=this.getSize(),b=d.divideBy(2).round(),T=g.divideBy(2).round(),z=b.subtract(T);return!z.x&&!z.y?this:(l.animate&&l.pan?this.panBy(z):(l.pan&&this._rawPanBy(z),this.fire("move"),l.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:d,newSize:g}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(l){if(l=this._locateOptions=i({timeout:1e4,watch:!1},l),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var d=o(this._handleGeolocationResponse,this),g=o(this._handleGeolocationError,this);return l.watch?this._locationWatchId=navigator.geolocation.watchPosition(d,g,l):navigator.geolocation.getCurrentPosition(d,g,l),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(l){if(this._container._leaflet_id){var d=l.code,g=l.message||(d===1?"permission denied":d===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:d,message:"Geolocation error: "+g+"."})}},_handleGeolocationResponse:function(l){if(this._container._leaflet_id){var d=l.coords.latitude,g=l.coords.longitude,b=new He(d,g),T=b.toBounds(l.coords.accuracy*2),z=this._locateOptions;if(z.setView){var K=this.getBoundsZoom(T);this.setView(b,z.maxZoom?Math.min(K,z.maxZoom):K)}var ne={latlng:b,bounds:T,timestamp:l.timestamp};for(var se in l.coords)typeof l.coords[se]=="number"&&(ne[se]=l.coords[se]);this.fire("locationfound",ne)}},addHandler:function(l,d){if(!d)return this;var g=this[l]=new d(this);return this._handlers.push(g),this.options[l]&&g.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),tn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(O(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var l;for(l in this._layers)this._layers[l].remove();for(l in this._panes)tn(this._panes[l]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(l,d){var g="leaflet-pane"+(l?" leaflet-"+l.replace("Pane","")+"-pane":""),b=Et("div",g,d||this._mapPane);return l&&(this._panes[l]=b),b},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var l=this.getPixelBounds(),d=this.unproject(l.getBottomLeft()),g=this.unproject(l.getTopRight());return new ye(d,g)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(l,d,g){l=Ue(l),g=H(g||[0,0]);var b=this.getZoom()||0,T=this.getMinZoom(),z=this.getMaxZoom(),K=l.getNorthWest(),ne=l.getSouthEast(),se=this.getSize().subtract(g),pe=he(this.project(ne,b),this.project(K,b)).getSize(),Oe=Je.any3d?this.options.zoomSnap:1,st=se.x/pe.x,bt=se.y/pe.y,Vr=d?Math.max(st,bt):Math.min(st,bt);return b=this.getScaleZoom(Vr,b),Oe&&(b=Math.round(b/(Oe/100))*(Oe/100),b=d?Math.ceil(b/Oe)*Oe:Math.floor(b/Oe)*Oe),Math.max(T,Math.min(z,b))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new U(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(l,d){var g=this._getTopLeftPoint(l,d);return new Q(g,g.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(l){return this.options.crs.getProjectedBounds(l===void 0?this.getZoom():l)},getPane:function(l){return typeof l=="string"?this._panes[l]:l},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(l,d){var g=this.options.crs;return d=d===void 0?this._zoom:d,g.scale(l)/g.scale(d)},getScaleZoom:function(l,d){var g=this.options.crs;d=d===void 0?this._zoom:d;var b=g.zoom(l*g.scale(d));return isNaN(b)?1/0:b},project:function(l,d){return d=d===void 0?this._zoom:d,this.options.crs.latLngToPoint(re(l),d)},unproject:function(l,d){return d=d===void 0?this._zoom:d,this.options.crs.pointToLatLng(H(l),d)},layerPointToLatLng:function(l){var d=H(l).add(this.getPixelOrigin());return this.unproject(d)},latLngToLayerPoint:function(l){var d=this.project(re(l))._round();return d._subtract(this.getPixelOrigin())},wrapLatLng:function(l){return this.options.crs.wrapLatLng(re(l))},wrapLatLngBounds:function(l){return this.options.crs.wrapLatLngBounds(Ue(l))},distance:function(l,d){return this.options.crs.distance(re(l),re(d))},containerPointToLayerPoint:function(l){return H(l).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(l){return H(l).add(this._getMapPanePos())},containerPointToLatLng:function(l){var d=this.containerPointToLayerPoint(H(l));return this.layerPointToLatLng(d)},latLngToContainerPoint:function(l){return this.layerPointToContainerPoint(this.latLngToLayerPoint(re(l)))},mouseEventToContainerPoint:function(l){return cu(l,this._container)},mouseEventToLayerPoint:function(l){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(l))},mouseEventToLatLng:function(l){return this.layerPointToLatLng(this.mouseEventToLayerPoint(l))},_initContainer:function(l){var d=this._container=yh(l);if(d){if(d._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");rt(d,"scroll",this._onScroll,this),this._containerId=u(d)},_initLayout:function(){var l=this._container;this._fadeAnimated=this.options.fadeAnimation&&Je.any3d,gt(l,"leaflet-container"+(Je.touch?" leaflet-touch":"")+(Je.retina?" leaflet-retina":"")+(Je.ielt9?" leaflet-oldie":"")+(Je.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var d=vo(l,"position");d!=="absolute"&&d!=="relative"&&d!=="fixed"&&d!=="sticky"&&(l.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var l=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ct(this._mapPane,new U(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(gt(l.markerPane,"leaflet-zoom-hide"),gt(l.shadowPane,"leaflet-zoom-hide"))},_resetView:function(l,d,g){ct(this._mapPane,new U(0,0));var b=!this._loaded;this._loaded=!0,d=this._limitZoom(d),this.fire("viewprereset");var T=this._zoom!==d;this._moveStart(T,g)._move(l,d)._moveEnd(T),this.fire("viewreset"),b&&this.fire("load")},_moveStart:function(l,d){return l&&this.fire("zoomstart"),d||this.fire("movestart"),this},_move:function(l,d,g,b){d===void 0&&(d=this._zoom);var T=this._zoom!==d;return this._zoom=d,this._lastCenter=l,this._pixelOrigin=this._getNewPixelOrigin(l),b?g&&g.pinch&&this.fire("zoom",g):((T||g&&g.pinch)&&this.fire("zoom",g),this.fire("move",g)),this},_moveEnd:function(l){return l&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return O(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(l){ct(this._mapPane,this._getMapPanePos().subtract(l))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(l){this._targets={},this._targets[u(this._container)]=this;var d=l?Zt:rt;d(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&d(window,"resize",this._onResize,this),Je.any3d&&this.options.transform3DLimit&&(l?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){O(this._resizeRequest),this._resizeRequest=M(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var l=this._getMapPanePos();Math.max(Math.abs(l.x),Math.abs(l.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(l,d){for(var g=[],b,T=d==="mouseout"||d==="mouseover",z=l.target||l.srcElement,K=!1;z;){if(b=this._targets[u(z)],b&&(d==="click"||d==="preclick")&&this._draggableMoved(b)){K=!0;break}if(b&&b.listens(d,!0)&&(T&&!Ph(z,l)||(g.push(b),T))||z===this._container)break;z=z.parentNode}return!g.length&&!K&&!T&&this.listens(d,!0)&&(g=[this]),g},_isClickDisabled:function(l){for(;l&&l!==this._container;){if(l._leaflet_disable_click)return!0;l=l.parentNode}},_handleDOMEvent:function(l){var d=l.target||l.srcElement;if(!(!this._loaded||d._leaflet_disable_events||l.type==="click"&&this._isClickDisabled(d))){var g=l.type;g==="mousedown"&&Sa(d),this._fireDOMEvent(l,g)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(l,d,g){if(l.type==="click"){var b=i({},l);b.type="preclick",this._fireDOMEvent(b,b.type,g)}var T=this._findEventTargets(l,d);if(g){for(var z=[],K=0;K<g.length;K++)g[K].listens(d,!0)&&z.push(g[K]);T=z.concat(T)}if(T.length){d==="contextmenu"&&_n(l);var ne=T[0],se={originalEvent:l};if(l.type!=="keypress"&&l.type!=="keydown"&&l.type!=="keyup"){var pe=ne.getLatLng&&(!ne._radius||ne._radius<=10);se.containerPoint=pe?this.latLngToContainerPoint(ne.getLatLng()):this.mouseEventToContainerPoint(l),se.layerPoint=this.containerPointToLayerPoint(se.containerPoint),se.latlng=pe?ne.getLatLng():this.layerPointToLatLng(se.layerPoint)}for(K=0;K<T.length;K++)if(T[K].fire(d,se,!0),se.originalEvent._stopped||T[K].options.bubblingMouseEvents===!1&&I(this._mouseEvents,d)!==-1)return}},_draggableMoved:function(l){return l=l.dragging&&l.dragging.enabled()?l:this,l.dragging&&l.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var l=0,d=this._handlers.length;l<d;l++)this._handlers[l].disable()},whenReady:function(l,d){return this._loaded?l.call(d||this,{target:this}):this.on("load",l,d),this},_getMapPanePos:function(){return Ds(this._mapPane)||new U(0,0)},_moved:function(){var l=this._getMapPanePos();return l&&!l.equals([0,0])},_getTopLeftPoint:function(l,d){var g=l&&d!==void 0?this._getNewPixelOrigin(l,d):this.getPixelOrigin();return g.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(l,d){var g=this.getSize()._divideBy(2);return this.project(l,d)._subtract(g)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(l,d,g){var b=this._getNewPixelOrigin(g,d);return this.project(l,d)._subtract(b)},_latLngBoundsToNewLayerBounds:function(l,d,g){var b=this._getNewPixelOrigin(g,d);return he([this.project(l.getSouthWest(),d)._subtract(b),this.project(l.getNorthWest(),d)._subtract(b),this.project(l.getSouthEast(),d)._subtract(b),this.project(l.getNorthEast(),d)._subtract(b)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(l){return this.latLngToLayerPoint(l).subtract(this._getCenterLayerPoint())},_limitCenter:function(l,d,g){if(!g)return l;var b=this.project(l,d),T=this.getSize().divideBy(2),z=new Q(b.subtract(T),b.add(T)),K=this._getBoundsOffset(z,g,d);return Math.abs(K.x)<=1&&Math.abs(K.y)<=1?l:this.unproject(b.add(K),d)},_limitOffset:function(l,d){if(!d)return l;var g=this.getPixelBounds(),b=new Q(g.min.add(l),g.max.add(l));return l.add(this._getBoundsOffset(b,d))},_getBoundsOffset:function(l,d,g){var b=he(this.project(d.getNorthEast(),g),this.project(d.getSouthWest(),g)),T=b.min.subtract(l.min),z=b.max.subtract(l.max),K=this._rebound(T.x,-z.x),ne=this._rebound(T.y,-z.y);return new U(K,ne)},_rebound:function(l,d){return l+d>0?Math.round(l-d)/2:Math.max(0,Math.ceil(l))-Math.max(0,Math.floor(d))},_limitZoom:function(l){var d=this.getMinZoom(),g=this.getMaxZoom(),b=Je.any3d?this.options.zoomSnap:1;return b&&(l=Math.round(l/b)*b),Math.max(d,Math.min(g,l))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){hn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(l,d){var g=this._getCenterOffset(l)._trunc();return(d&&d.animate)!==!0&&!this.getSize().contains(g)?!1:(this.panBy(g,d),!0)},_createAnimProxy:function(){var l=this._proxy=Et("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(l),this.on("zoomanim",function(d){var g=Ul,b=this._proxy.style[g];Mi(this._proxy,this.project(d.center,d.zoom),this.getZoomScale(d.zoom,1)),b===this._proxy.style[g]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){tn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var l=this.getCenter(),d=this.getZoom();Mi(this._proxy,this.project(l,d),this.getZoomScale(d,1))},_catchTransitionEnd:function(l){this._animatingZoom&&l.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(l,d,g){if(this._animatingZoom)return!0;if(g=g||{},!this._zoomAnimated||g.animate===!1||this._nothingToAnimate()||Math.abs(d-this._zoom)>this.options.zoomAnimationThreshold)return!1;var b=this.getZoomScale(d),T=this._getCenterOffset(l)._divideBy(1-1/b);return g.animate!==!0&&!this.getSize().contains(T)?!1:(M(function(){this._moveStart(!0,g.noMoveStart||!1)._animateZoom(l,d,!0)},this),!0)},_animateZoom:function(l,d,g,b){this._mapPane&&(g&&(this._animatingZoom=!0,this._animateToCenter=l,this._animateToZoom=d,gt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:l,zoom:d,noUpdate:b}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&hn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function uu(l,d){return new Nt(l,d)}var Jr=W.extend({options:{position:"topright"},initialize:function(l){j(this,l)},getPosition:function(){return this.options.position},setPosition:function(l){var d=this._map;return d&&d.removeControl(this),this.options.position=l,d&&d.addControl(this),this},getContainer:function(){return this._container},addTo:function(l){this.remove(),this._map=l;var d=this._container=this.onAdd(l),g=this.getPosition(),b=l._controlCorners[g];return gt(d,"leaflet-control"),g.indexOf("bottom")!==-1?b.insertBefore(d,b.firstChild):b.appendChild(d),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(tn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(l){this._map&&l&&l.screenX>0&&l.screenY>0&&this._map.getContainer().focus()}}),Fr=function(l){return new Jr(l)};Nt.include({addControl:function(l){return l.addTo(this),this},removeControl:function(l){return l.remove(),this},_initControlPos:function(){var l=this._controlCorners={},d="leaflet-",g=this._controlContainer=Et("div",d+"control-container",this._container);function b(T,z){var K=d+T+" "+d+z;l[T+z]=Et("div",K,g)}b("top","left"),b("top","right"),b("bottom","left"),b("bottom","right")},_clearControlPos:function(){for(var l in this._controlCorners)tn(this._controlCorners[l]);tn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ah=Jr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(l,d,g,b){return g<b?-1:b<g?1:0}},initialize:function(l,d,g){j(this,g),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var b in l)this._addLayer(l[b],b);for(b in d)this._addLayer(d[b],b,!0)},onAdd:function(l){this._initLayout(),this._update(),this._map=l,l.on("zoomend",this._checkDisabledLayers,this);for(var d=0;d<this._layers.length;d++)this._layers[d].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(l){return Jr.prototype.addTo.call(this,l),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(l,d){return this._addLayer(l,d),this._map?this._update():this},addOverlay:function(l,d){return this._addLayer(l,d,!0),this._map?this._update():this},removeLayer:function(l){l.off("add remove",this._onLayerChange,this);var d=this._getLayer(u(l));return d&&this._layers.splice(this._layers.indexOf(d),1),this._map?this._update():this},expand:function(){gt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var l=this._map.getSize().y-(this._container.offsetTop+50);return l<this._section.clientHeight?(gt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=l+"px"):hn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return hn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var l="leaflet-control-layers",d=this._container=Et("div",l),g=this.options.collapsed;d.setAttribute("aria-haspopup",!0),wo(d),_o(d);var b=this._section=Et("section",l+"-list");g&&(this._map.on("click",this.collapse,this),rt(d,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var T=this._layersLink=Et("a",l+"-toggle",d);T.href="#",T.title="Layers",T.setAttribute("role","button"),rt(T,{keydown:function(z){z.keyCode===13&&this._expandSafely()},click:function(z){_n(z),this._expandSafely()}},this),g||this.expand(),this._baseLayersList=Et("div",l+"-base",b),this._separator=Et("div",l+"-separator",b),this._overlaysList=Et("div",l+"-overlays",b),d.appendChild(b)},_getLayer:function(l){for(var d=0;d<this._layers.length;d++)if(this._layers[d]&&u(this._layers[d].layer)===l)return this._layers[d]},_addLayer:function(l,d,g){this._map&&l.on("add remove",this._onLayerChange,this),this._layers.push({layer:l,name:d,overlay:g}),this.options.sortLayers&&this._layers.sort(o(function(b,T){return this.options.sortFunction(b.layer,T.layer,b.name,T.name)},this)),this.options.autoZIndex&&l.setZIndex&&(this._lastZIndex++,l.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Bl(this._baseLayersList),Bl(this._overlaysList),this._layerControlInputs=[];var l,d,g,b,T=0;for(g=0;g<this._layers.length;g++)b=this._layers[g],this._addItem(b),d=d||b.overlay,l=l||!b.overlay,T+=b.overlay?0:1;return this.options.hideSingleBase&&(l=l&&T>1,this._baseLayersList.style.display=l?"":"none"),this._separator.style.display=d&&l?"":"none",this},_onLayerChange:function(l){this._handlingClick||this._update();var d=this._getLayer(u(l.target)),g=d.overlay?l.type==="add"?"overlayadd":"overlayremove":l.type==="add"?"baselayerchange":null;g&&this._map.fire(g,d)},_createRadioElement:function(l,d){var g='<input type="radio" class="leaflet-control-layers-selector" name="'+l+'"'+(d?' checked="checked"':"")+"/>",b=document.createElement("div");return b.innerHTML=g,b.firstChild},_addItem:function(l){var d=document.createElement("label"),g=this._map.hasLayer(l.layer),b;l.overlay?(b=document.createElement("input"),b.type="checkbox",b.className="leaflet-control-layers-selector",b.defaultChecked=g):b=this._createRadioElement("leaflet-base-layers_"+u(this),g),this._layerControlInputs.push(b),b.layerId=u(l.layer),rt(b,"click",this._onInputClick,this);var T=document.createElement("span");T.innerHTML=" "+l.name;var z=document.createElement("span");d.appendChild(z),z.appendChild(b),z.appendChild(T);var K=l.overlay?this._overlaysList:this._baseLayersList;return K.appendChild(d),this._checkDisabledLayers(),d},_onInputClick:function(){if(!this._preventClick){var l=this._layerControlInputs,d,g,b=[],T=[];this._handlingClick=!0;for(var z=l.length-1;z>=0;z--)d=l[z],g=this._getLayer(d.layerId).layer,d.checked?b.push(g):d.checked||T.push(g);for(z=0;z<T.length;z++)this._map.hasLayer(T[z])&&this._map.removeLayer(T[z]);for(z=0;z<b.length;z++)this._map.hasLayer(b[z])||this._map.addLayer(b[z]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var l=this._layerControlInputs,d,g,b=this._map.getZoom(),T=l.length-1;T>=0;T--)d=l[T],g=this._getLayer(d.layerId).layer,d.disabled=g.options.minZoom!==void 0&&b<g.options.minZoom||g.options.maxZoom!==void 0&&b>g.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var l=this._section;this._preventClick=!0,rt(l,"click",_n),this.expand();var d=this;setTimeout(function(){Zt(l,"click",_n),d._preventClick=!1})}}),Xy=function(l,d,g){return new Ah(l,d,g)},Ea=Jr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(l){var d="leaflet-control-zoom",g=Et("div",d+" leaflet-bar"),b=this.options;return this._zoomInButton=this._createButton(b.zoomInText,b.zoomInTitle,d+"-in",g,this._zoomIn),this._zoomOutButton=this._createButton(b.zoomOutText,b.zoomOutTitle,d+"-out",g,this._zoomOut),this._updateDisabled(),l.on("zoomend zoomlevelschange",this._updateDisabled,this),g},onRemove:function(l){l.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(l){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(l.shiftKey?3:1))},_zoomOut:function(l){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(l.shiftKey?3:1))},_createButton:function(l,d,g,b,T){var z=Et("a",g,b);return z.innerHTML=l,z.href="#",z.title=d,z.setAttribute("role","button"),z.setAttribute("aria-label",d),wo(z),rt(z,"click",ps),rt(z,"click",T,this),rt(z,"click",this._refocusOnMap,this),z},_updateDisabled:function(){var l=this._map,d="leaflet-disabled";hn(this._zoomInButton,d),hn(this._zoomOutButton,d),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||l._zoom===l.getMinZoom())&&(gt(this._zoomOutButton,d),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||l._zoom===l.getMaxZoom())&&(gt(this._zoomInButton,d),this._zoomInButton.setAttribute("aria-disabled","true"))}});Nt.mergeOptions({zoomControl:!0}),Nt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ea,this.addControl(this.zoomControl))});var Cp=function(l){return new Ea(l)},du=Jr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(l){var d="leaflet-control-scale",g=Et("div",d),b=this.options;return this._addScales(b,d+"-line",g),l.on(b.updateWhenIdle?"moveend":"move",this._update,this),l.whenReady(this._update,this),g},onRemove:function(l){l.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(l,d,g){l.metric&&(this._mScale=Et("div",d,g)),l.imperial&&(this._iScale=Et("div",d,g))},_update:function(){var l=this._map,d=l.getSize().y/2,g=l.distance(l.containerPointToLatLng([0,d]),l.containerPointToLatLng([this.options.maxWidth,d]));this._updateScales(g)},_updateScales:function(l){this.options.metric&&l&&this._updateMetric(l),this.options.imperial&&l&&this._updateImperial(l)},_updateMetric:function(l){var d=this._getRoundNum(l),g=d<1e3?d+" m":d/1e3+" km";this._updateScale(this._mScale,g,d/l)},_updateImperial:function(l){var d=l*3.2808399,g,b,T;d>5280?(g=d/5280,b=this._getRoundNum(g),this._updateScale(this._iScale,b+" mi",b/g)):(T=this._getRoundNum(d),this._updateScale(this._iScale,T+" ft",T/d))},_updateScale:function(l,d,g){l.style.width=Math.round(this.options.maxWidth*g)+"px",l.innerHTML=d},_getRoundNum:function(l){var d=Math.pow(10,(Math.floor(l)+"").length-1),g=l/d;return g=g>=10?10:g>=5?5:g>=3?3:g>=2?2:1,d*g}}),hu=function(l){return new du(l)},kp='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',bo=Jr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Je.inlineSvg?kp+" ":"")+"Leaflet</a>"},initialize:function(l){j(this,l),this._attributions={}},onAdd:function(l){l.attributionControl=this,this._container=Et("div","leaflet-control-attribution"),wo(this._container);for(var d in l._layers)l._layers[d].getAttribution&&this.addAttribution(l._layers[d].getAttribution());return this._update(),l.on("layeradd",this._addAttribution,this),this._container},onRemove:function(l){l.off("layeradd",this._addAttribution,this)},_addAttribution:function(l){l.layer.getAttribution&&(this.addAttribution(l.layer.getAttribution()),l.layer.once("remove",function(){this.removeAttribution(l.layer.getAttribution())},this))},setPrefix:function(l){return this.options.prefix=l,this._update(),this},addAttribution:function(l){return l?(this._attributions[l]||(this._attributions[l]=0),this._attributions[l]++,this._update(),this):this},removeAttribution:function(l){return l?(this._attributions[l]&&(this._attributions[l]--,this._update()),this):this},_update:function(){if(this._map){var l=[];for(var d in this._attributions)this._attributions[d]&&l.push(d);var g=[];this.options.prefix&&g.push(this.options.prefix),l.length&&g.push(l.join(", ")),this._container.innerHTML=g.join(' <span aria-hidden="true">|</span> ')}}});Nt.mergeOptions({attributionControl:!0}),Nt.addInitHook(function(){this.options.attributionControl&&new bo().addTo(this)});var Jy=function(l){return new bo(l)};Jr.Layers=Ah,Jr.Zoom=Ea,Jr.Scale=du,Jr.Attribution=bo,Fr.layers=Xy,Fr.zoom=Cp,Fr.scale=hu,Fr.attribution=Jy;var gs=W.extend({initialize:function(l){this._map=l},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});gs.addTo=function(l,d){return l.addHandler(d,this),this};var Wl={Events:ee},Rh=Je.touch?"touchstart mousedown":"mousedown",oi=Z.extend({options:{clickTolerance:3},initialize:function(l,d,g,b){j(this,b),this._element=l,this._dragStartTarget=d||l,this._preventOutline=g},enable:function(){this._enabled||(rt(this._dragStartTarget,Rh,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(oi._dragging===this&&this.finishDrag(!0),Zt(this._dragStartTarget,Rh,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(l){if(this._enabled&&(this._moved=!1,!_h(this._element,"leaflet-zoom-anim"))){if(l.touches&&l.touches.length!==1){oi._dragging===this&&this.finishDrag();return}if(!(oi._dragging||l.shiftKey||l.which!==1&&l.button!==1&&!l.touches)&&(oi._dragging=this,this._preventOutline&&Sa(this._element),jh(),ii(),!this._moving)){this.fire("down");var d=l.touches?l.touches[0]:l,g=Eh(this._element);this._startPoint=new U(d.clientX,d.clientY),this._startPos=Ds(this._element),this._parentScale=lu(g);var b=l.type==="mousedown";rt(document,b?"mousemove":"touchmove",this._onMove,this),rt(document,b?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(l){if(this._enabled){if(l.touches&&l.touches.length>1){this._moved=!0;return}var d=l.touches&&l.touches.length===1?l.touches[0]:l,g=new U(d.clientX,d.clientY)._subtract(this._startPoint);!g.x&&!g.y||Math.abs(g.x)+Math.abs(g.y)<this.options.clickTolerance||(g.x/=this._parentScale.x,g.y/=this._parentScale.y,_n(l),this._moved||(this.fire("dragstart"),this._moved=!0,gt(document.body,"leaflet-dragging"),this._lastTarget=l.target||l.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),gt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(g),this._moving=!0,this._lastEvent=l,this._updatePosition())}},_updatePosition:function(){var l={originalEvent:this._lastEvent};this.fire("predrag",l),ct(this._element,this._newPos),this.fire("drag",l)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(l){hn(document.body,"leaflet-dragging"),this._lastTarget&&(hn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Zt(document,"mousemove touchmove",this._onMove,this),Zt(document,"mouseup touchend touchcancel",this._onUp,this),Nh(),ai();var d=this._moved&&this._moving;this._moving=!1,oi._dragging=!1,d&&this.fire("dragend",{noInertia:l,distance:this._newPos.distanceTo(this._startPos)})}});function fu(l,d,g){var b,T=[1,4,2,8],z,K,ne,se,pe,Oe,st,bt;for(z=0,Oe=l.length;z<Oe;z++)l[z]._code=Di(l[z],d);for(ne=0;ne<4;ne++){for(st=T[ne],b=[],z=0,Oe=l.length,K=Oe-1;z<Oe;K=z++)se=l[z],pe=l[K],se._code&st?pe._code&st||(bt=or(pe,se,st,d,g),bt._code=Di(bt,d),b.push(bt)):(pe._code&st&&(bt=or(pe,se,st,d,g),bt._code=Di(bt,d),b.push(bt)),b.push(se));l=b}return l}function mu(l,d){var g,b,T,z,K,ne,se,pe,Oe;if(!l||l.length===0)throw new Error("latlngs not passed");m(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var st=re([0,0]),bt=Ue(l),Vr=bt.getNorthWest().distanceTo(bt.getSouthWest())*bt.getNorthEast().distanceTo(bt.getNorthWest());Vr<1700&&(st=pu(l));var lr=l.length,zs=[];for(g=0;g<lr;g++){var es=re(l[g]);zs.push(d.project(re([es.lat-st.lat,es.lng-st.lng])))}for(ne=se=pe=0,g=0,b=lr-1;g<lr;b=g++)T=zs[g],z=zs[b],K=T.y*z.x-z.y*T.x,se+=(T.x+z.x)*K,pe+=(T.y+z.y)*K,ne+=K*3;ne===0?Oe=zs[0]:Oe=[se/ne,pe/ne];var bu=d.unproject(H(Oe));return re([bu.lat+st.lat,bu.lng+st.lng])}function pu(l){for(var d=0,g=0,b=0,T=0;T<l.length;T++){var z=re(l[T]);d+=z.lat,g+=z.lng,b++}return re([d/b,g/b])}var gu={__proto__:null,clipPolygon:fu,polygonCenter:mu,centroid:pu};function Mh(l,d){if(!d||!l.length)return l.slice();var g=d*d;return l=Pp(l,g),l=Tp(l,g),l}function Dh(l,d,g){return Math.sqrt(Vs(l,d,g,!0))}function Ca(l,d,g){return Vs(l,d,g)}function Tp(l,d){var g=l.length,b=typeof Uint8Array<"u"?Uint8Array:Array,T=new b(g);T[0]=T[g-1]=1,vu(l,T,d,0,g-1);var z,K=[];for(z=0;z<g;z++)T[z]&&K.push(l[z]);return K}function vu(l,d,g,b,T){var z=0,K,ne,se;for(ne=b+1;ne<=T-1;ne++)se=Vs(l[ne],l[b],l[T],!0),se>z&&(K=ne,z=se);z>g&&(d[K]=1,vu(l,d,g,b,K),vu(l,d,g,K,T))}function Pp(l,d){for(var g=[l[0]],b=1,T=0,z=l.length;b<z;b++)Ip(l[b],l[T])>d&&(g.push(l[b]),T=b);return T<z-1&&g.push(l[z-1]),g}var Oh;function ql(l,d,g,b,T){var z=b?Oh:Di(l,g),K=Di(d,g),ne,se,pe;for(Oh=K;;){if(!(z|K))return[l,d];if(z&K)return!1;ne=z||K,se=or(l,d,ne,g,T),pe=Di(se,g),ne===z?(l=se,z=pe):(d=se,K=pe)}}function or(l,d,g,b,T){var z=d.x-l.x,K=d.y-l.y,ne=b.min,se=b.max,pe,Oe;return g&8?(pe=l.x+z*(se.y-l.y)/K,Oe=se.y):g&4?(pe=l.x+z*(ne.y-l.y)/K,Oe=ne.y):g&2?(pe=se.x,Oe=l.y+K*(se.x-l.x)/z):g&1&&(pe=ne.x,Oe=l.y+K*(ne.x-l.x)/z),new U(pe,Oe,T)}function Di(l,d){var g=0;return l.x<d.min.x?g|=1:l.x>d.max.x&&(g|=2),l.y<d.min.y?g|=4:l.y>d.max.y&&(g|=8),g}function Ip(l,d){var g=d.x-l.x,b=d.y-l.y;return g*g+b*b}function Vs(l,d,g,b){var T=d.x,z=d.y,K=g.x-T,ne=g.y-z,se=K*K+ne*ne,pe;return se>0&&(pe=((l.x-T)*K+(l.y-z)*ne)/se,pe>1?(T=g.x,z=g.y):pe>0&&(T+=K*pe,z+=ne*pe)),K=l.x-T,ne=l.y-z,b?K*K+ne*ne:new U(T,z)}function m(l){return!E(l[0])||typeof l[0][0]!="object"&&typeof l[0][0]<"u"}function C(l){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),m(l)}function A(l,d){var g,b,T,z,K,ne,se,pe;if(!l||l.length===0)throw new Error("latlngs not passed");m(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var Oe=re([0,0]),st=Ue(l),bt=st.getNorthWest().distanceTo(st.getSouthWest())*st.getNorthEast().distanceTo(st.getNorthWest());bt<1700&&(Oe=pu(l));var Vr=l.length,lr=[];for(g=0;g<Vr;g++){var zs=re(l[g]);lr.push(d.project(re([zs.lat-Oe.lat,zs.lng-Oe.lng])))}for(g=0,b=0;g<Vr-1;g++)b+=lr[g].distanceTo(lr[g+1])/2;if(b===0)pe=lr[0];else for(g=0,z=0;g<Vr-1;g++)if(K=lr[g],ne=lr[g+1],T=K.distanceTo(ne),z+=T,z>b){se=(z-b)/T,pe=[ne.x-se*(ne.x-K.x),ne.y-se*(ne.y-K.y)];break}var es=d.unproject(H(pe));return re([es.lat+Oe.lat,es.lng+Oe.lng])}var $={__proto__:null,simplify:Mh,pointToSegmentDistance:Dh,closestPointOnSegment:Ca,clipSegment:ql,_getEdgeIntersection:or,_getBitCode:Di,_sqClosestPointOnSegment:Vs,isFlat:m,_flat:C,polylineCenter:A},J={project:function(l){return new U(l.lng,l.lat)},unproject:function(l){return new He(l.y,l.x)},bounds:new Q([-180,-90],[180,90])},ie={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Q([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(l){var d=Math.PI/180,g=this.R,b=l.lat*d,T=this.R_MINOR/g,z=Math.sqrt(1-T*T),K=z*Math.sin(b),ne=Math.tan(Math.PI/4-b/2)/Math.pow((1-K)/(1+K),z/2);return b=-g*Math.log(Math.max(ne,1e-10)),new U(l.lng*d*g,b)},unproject:function(l){for(var d=180/Math.PI,g=this.R,b=this.R_MINOR/g,T=Math.sqrt(1-b*b),z=Math.exp(-l.y/g),K=Math.PI/2-2*Math.atan(z),ne=0,se=.1,pe;ne<15&&Math.abs(se)>1e-7;ne++)pe=T*Math.sin(K),pe=Math.pow((1-pe)/(1+pe),T/2),se=Math.PI/2-2*Math.atan(z*pe)-K,K+=se;return new He(K*d,l.x*d/g)}},Ne={__proto__:null,LonLat:J,Mercator:ie,SphericalMercator:je},Bt=i({},xe,{code:"EPSG:3395",projection:ie,transformation:function(){var l=.5/(Math.PI*ie.R);return Re(l,.5,-l,.5)}()}),$n=i({},xe,{code:"EPSG:4326",projection:J,transformation:Re(1/180,1,-1/180,.5)}),At=i({},ce,{projection:J,transformation:Re(1,0,-1,0),scale:function(l){return Math.pow(2,l)},zoom:function(l){return Math.log(l)/Math.LN2},distance:function(l,d){var g=d.lng-l.lng,b=d.lat-l.lat;return Math.sqrt(g*g+b*b)},infinite:!0});ce.Earth=xe,ce.EPSG3395=Bt,ce.EPSG3857=Me,ce.EPSG900913=lt,ce.EPSG4326=$n,ce.Simple=At;var Yt=Z.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(l){return l.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(l){return l&&l.removeLayer(this),this},getPane:function(l){return this._map.getPane(l?this.options[l]||l:this.options.pane)},addInteractiveTarget:function(l){return this._map._targets[u(l)]=this,this},removeInteractiveTarget:function(l){return delete this._map._targets[u(l)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(l){var d=l.target;if(d.hasLayer(this)){if(this._map=d,this._zoomAnimated=d._zoomAnimated,this.getEvents){var g=this.getEvents();d.on(g,this),this.once("remove",function(){d.off(g,this)},this)}this.onAdd(d),this.fire("add"),d.fire("layeradd",{layer:this})}}});Nt.include({addLayer:function(l){if(!l._layerAdd)throw new Error("The provided object is not a Layer.");var d=u(l);return this._layers[d]?this:(this._layers[d]=l,l._mapToAdd=this,l.beforeAdd&&l.beforeAdd(this),this.whenReady(l._layerAdd,l),this)},removeLayer:function(l){var d=u(l);return this._layers[d]?(this._loaded&&l.onRemove(this),delete this._layers[d],this._loaded&&(this.fire("layerremove",{layer:l}),l.fire("remove")),l._map=l._mapToAdd=null,this):this},hasLayer:function(l){return u(l)in this._layers},eachLayer:function(l,d){for(var g in this._layers)l.call(d,this._layers[g]);return this},_addLayers:function(l){l=l?E(l)?l:[l]:[];for(var d=0,g=l.length;d<g;d++)this.addLayer(l[d])},_addZoomLimit:function(l){(!isNaN(l.options.maxZoom)||!isNaN(l.options.minZoom))&&(this._zoomBoundLayers[u(l)]=l,this._updateZoomLevels())},_removeZoomLimit:function(l){var d=u(l);this._zoomBoundLayers[d]&&(delete this._zoomBoundLayers[d],this._updateZoomLevels())},_updateZoomLevels:function(){var l=1/0,d=-1/0,g=this._getZoomSpan();for(var b in this._zoomBoundLayers){var T=this._zoomBoundLayers[b].options;l=T.minZoom===void 0?l:Math.min(l,T.minZoom),d=T.maxZoom===void 0?d:Math.max(d,T.maxZoom)}this._layersMaxZoom=d===-1/0?void 0:d,this._layersMinZoom=l===1/0?void 0:l,g!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var wn=Yt.extend({initialize:function(l,d){j(this,d),this._layers={};var g,b;if(l)for(g=0,b=l.length;g<b;g++)this.addLayer(l[g])},addLayer:function(l){var d=this.getLayerId(l);return this._layers[d]=l,this._map&&this._map.addLayer(l),this},removeLayer:function(l){var d=l in this._layers?l:this.getLayerId(l);return this._map&&this._layers[d]&&this._map.removeLayer(this._layers[d]),delete this._layers[d],this},hasLayer:function(l){var d=typeof l=="number"?l:this.getLayerId(l);return d in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(l){var d=Array.prototype.slice.call(arguments,1),g,b;for(g in this._layers)b=this._layers[g],b[l]&&b[l].apply(b,d);return this},onAdd:function(l){this.eachLayer(l.addLayer,l)},onRemove:function(l){this.eachLayer(l.removeLayer,l)},eachLayer:function(l,d){for(var g in this._layers)l.call(d,this._layers[g]);return this},getLayer:function(l){return this._layers[l]},getLayers:function(){var l=[];return this.eachLayer(l.push,l),l},setZIndex:function(l){return this.invoke("setZIndex",l)},getLayerId:function(l){return u(l)}}),jo=function(l,d){return new wn(l,d)},Rn=wn.extend({addLayer:function(l){return this.hasLayer(l)?this:(l.addEventParent(this),wn.prototype.addLayer.call(this,l),this.fire("layeradd",{layer:l}))},removeLayer:function(l){return this.hasLayer(l)?(l in this._layers&&(l=this._layers[l]),l.removeEventParent(this),wn.prototype.removeLayer.call(this,l),this.fire("layerremove",{layer:l})):this},setStyle:function(l){return this.invoke("setStyle",l)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var l=new ye;for(var d in this._layers){var g=this._layers[d];l.extend(g.getBounds?g.getBounds():g.getLatLng())}return l}}),xu=function(l,d){return new Rn(l,d)},Oi=W.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(l){j(this,l)},createIcon:function(l){return this._createIcon("icon",l)},createShadow:function(l){return this._createIcon("shadow",l)},_createIcon:function(l,d){var g=this._getIconUrl(l);if(!g){if(l==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var b=this._createImg(g,d&&d.tagName==="IMG"?d:null);return this._setIconStyles(b,l),(this.options.crossOrigin||this.options.crossOrigin==="")&&(b.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),b},_setIconStyles:function(l,d){var g=this.options,b=g[d+"Size"];typeof b=="number"&&(b=[b,b]);var T=H(b),z=H(d==="shadow"&&g.shadowAnchor||g.iconAnchor||T&&T.divideBy(2,!0));l.className="leaflet-marker-"+d+" "+(g.className||""),z&&(l.style.marginLeft=-z.x+"px",l.style.marginTop=-z.y+"px"),T&&(l.style.width=T.x+"px",l.style.height=T.y+"px")},_createImg:function(l,d){return d=d||document.createElement("img"),d.src=l,d},_getIconUrl:function(l){return Je.retina&&this.options[l+"RetinaUrl"]||this.options[l+"Url"]}});function U5(l){return new Oi(l)}var Lh=Oi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(l){return typeof Lh.imagePath!="string"&&(Lh.imagePath=this._detectIconPath()),(this.options.imagePath||Lh.imagePath)+Oi.prototype._getIconUrl.call(this,l)},_stripUrl:function(l){var d=function(g,b,T){var z=b.exec(g);return z&&z[T]};return l=d(l,/^url\((['"])?(.+)\1\)$/,2),l&&d(l,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var l=Et("div","leaflet-default-icon-path",document.body),d=vo(l,"background-image")||vo(l,"backgroundImage");if(document.body.removeChild(l),d=this._stripUrl(d),d)return d;var g=document.querySelector('link[href$="leaflet.css"]');return g?g.href.substring(0,g.href.length-11-1):""}}),iS=gs.extend({initialize:function(l){this._marker=l},addHooks:function(){var l=this._marker._icon;this._draggable||(this._draggable=new oi(l,l,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),gt(l,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&hn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(l){var d=this._marker,g=d._map,b=this._marker.options.autoPanSpeed,T=this._marker.options.autoPanPadding,z=Ds(d._icon),K=g.getPixelBounds(),ne=g.getPixelOrigin(),se=he(K.min._subtract(ne).add(T),K.max._subtract(ne).subtract(T));if(!se.contains(z)){var pe=H((Math.max(se.max.x,z.x)-se.max.x)/(K.max.x-se.max.x)-(Math.min(se.min.x,z.x)-se.min.x)/(K.min.x-se.min.x),(Math.max(se.max.y,z.y)-se.max.y)/(K.max.y-se.max.y)-(Math.min(se.min.y,z.y)-se.min.y)/(K.min.y-se.min.y)).multiplyBy(b);g.panBy(pe,{animate:!1}),this._draggable._newPos._add(pe),this._draggable._startPos._add(pe),ct(d._icon,this._draggable._newPos),this._onDrag(l),this._panRequest=M(this._adjustPan.bind(this,l))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(l){this._marker.options.autoPan&&(O(this._panRequest),this._panRequest=M(this._adjustPan.bind(this,l)))},_onDrag:function(l){var d=this._marker,g=d._shadow,b=Ds(d._icon),T=d._map.layerPointToLatLng(b);g&&ct(g,b),d._latlng=T,l.latlng=T,l.oldLatLng=this._oldLatLng,d.fire("move",l).fire("drag",l)},_onDragEnd:function(l){O(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",l)}}),Ap=Yt.extend({options:{icon:new Lh,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(l,d){j(this,d),this._latlng=re(l)},onAdd:function(l){this._zoomAnimated=this._zoomAnimated&&l.options.markerZoomAnimation,this._zoomAnimated&&l.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(l){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&l.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(l){var d=this._latlng;return this._latlng=re(l),this.update(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},setZIndexOffset:function(l){return this.options.zIndexOffset=l,this.update()},getIcon:function(){return this.options.icon},setIcon:function(l){return this.options.icon=l,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var l=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(l)}return this},_initIcon:function(){var l=this.options,d="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),g=l.icon.createIcon(this._icon),b=!1;g!==this._icon&&(this._icon&&this._removeIcon(),b=!0,l.title&&(g.title=l.title),g.tagName==="IMG"&&(g.alt=l.alt||"")),gt(g,d),l.keyboard&&(g.tabIndex="0",g.setAttribute("role","button")),this._icon=g,l.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&rt(g,"focus",this._panOnFocus,this);var T=l.icon.createShadow(this._shadow),z=!1;T!==this._shadow&&(this._removeShadow(),z=!0),T&&(gt(T,d),T.alt=""),this._shadow=T,l.opacity<1&&this._updateOpacity(),b&&this.getPane().appendChild(this._icon),this._initInteraction(),T&&z&&this.getPane(l.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Zt(this._icon,"focus",this._panOnFocus,this),tn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&tn(this._shadow),this._shadow=null},_setPos:function(l){this._icon&&ct(this._icon,l),this._shadow&&ct(this._shadow,l),this._zIndex=l.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(l){this._icon&&(this._icon.style.zIndex=this._zIndex+l)},_animateZoom:function(l){var d=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center).round();this._setPos(d)},_initInteraction:function(){if(this.options.interactive&&(gt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),iS)){var l=this.options.draggable;this.dragging&&(l=this.dragging.enabled(),this.dragging.disable()),this.dragging=new iS(this),l&&this.dragging.enable()}},setOpacity:function(l){return this.options.opacity=l,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var l=this.options.opacity;this._icon&&Cn(this._icon,l),this._shadow&&Cn(this._shadow,l)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var l=this._map;if(l){var d=this.options.icon.options,g=d.iconSize?H(d.iconSize):H(0,0),b=d.iconAnchor?H(d.iconAnchor):H(0,0);l.panInside(this._latlng,{paddingTopLeft:b,paddingBottomRight:g.subtract(b)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function $5(l,d){return new Ap(l,d)}var No=Yt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(l){this._renderer=l.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(l){return j(this,l),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&l&&Object.prototype.hasOwnProperty.call(l,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Rp=No.extend({options:{fill:!0,radius:10},initialize:function(l,d){j(this,d),this._latlng=re(l),this._radius=this.options.radius},setLatLng:function(l){var d=this._latlng;return this._latlng=re(l),this.redraw(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(l){return this.options.radius=this._radius=l,this.redraw()},getRadius:function(){return this._radius},setStyle:function(l){var d=l&&l.radius||this._radius;return No.prototype.setStyle.call(this,l),this.setRadius(d),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var l=this._radius,d=this._radiusY||l,g=this._clickTolerance(),b=[l+g,d+g];this._pxBounds=new Q(this._point.subtract(b),this._point.add(b))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(l){return l.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function B5(l,d){return new Rp(l,d)}var e_=Rp.extend({initialize:function(l,d,g){if(typeof d=="number"&&(d=i({},g,{radius:d})),j(this,d),this._latlng=re(l),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(l){return this._mRadius=l,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var l=[this._radius,this._radiusY||this._radius];return new ye(this._map.layerPointToLatLng(this._point.subtract(l)),this._map.layerPointToLatLng(this._point.add(l)))},setStyle:No.prototype.setStyle,_project:function(){var l=this._latlng.lng,d=this._latlng.lat,g=this._map,b=g.options.crs;if(b.distance===xe.distance){var T=Math.PI/180,z=this._mRadius/xe.R/T,K=g.project([d+z,l]),ne=g.project([d-z,l]),se=K.add(ne).divideBy(2),pe=g.unproject(se).lat,Oe=Math.acos((Math.cos(z*T)-Math.sin(d*T)*Math.sin(pe*T))/(Math.cos(d*T)*Math.cos(pe*T)))/T;(isNaN(Oe)||Oe===0)&&(Oe=z/Math.cos(Math.PI/180*d)),this._point=se.subtract(g.getPixelOrigin()),this._radius=isNaN(Oe)?0:se.x-g.project([pe,l-Oe]).x,this._radiusY=se.y-K.y}else{var st=b.unproject(b.project(this._latlng).subtract([this._mRadius,0]));this._point=g.latLngToLayerPoint(this._latlng),this._radius=this._point.x-g.latLngToLayerPoint(st).x}this._updateBounds()}});function W5(l,d,g){return new e_(l,d,g)}var ka=No.extend({options:{smoothFactor:1,noClip:!1},initialize:function(l,d){j(this,d),this._setLatLngs(l)},getLatLngs:function(){return this._latlngs},setLatLngs:function(l){return this._setLatLngs(l),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(l){for(var d=1/0,g=null,b=Vs,T,z,K=0,ne=this._parts.length;K<ne;K++)for(var se=this._parts[K],pe=1,Oe=se.length;pe<Oe;pe++){T=se[pe-1],z=se[pe];var st=b(l,T,z,!0);st<d&&(d=st,g=b(l,T,z))}return g&&(g.distance=Math.sqrt(d)),g},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return A(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(l,d){return d=d||this._defaultShape(),l=re(l),d.push(l),this._bounds.extend(l),this.redraw()},_setLatLngs:function(l){this._bounds=new ye,this._latlngs=this._convertLatLngs(l)},_defaultShape:function(){return m(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(l){for(var d=[],g=m(l),b=0,T=l.length;b<T;b++)g?(d[b]=re(l[b]),this._bounds.extend(d[b])):d[b]=this._convertLatLngs(l[b]);return d},_project:function(){var l=new Q;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,l),this._bounds.isValid()&&l.isValid()&&(this._rawPxBounds=l,this._updateBounds())},_updateBounds:function(){var l=this._clickTolerance(),d=new U(l,l);this._rawPxBounds&&(this._pxBounds=new Q([this._rawPxBounds.min.subtract(d),this._rawPxBounds.max.add(d)]))},_projectLatlngs:function(l,d,g){var b=l[0]instanceof He,T=l.length,z,K;if(b){for(K=[],z=0;z<T;z++)K[z]=this._map.latLngToLayerPoint(l[z]),g.extend(K[z]);d.push(K)}else for(z=0;z<T;z++)this._projectLatlngs(l[z],d,g)},_clipPoints:function(){var l=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}var d=this._parts,g,b,T,z,K,ne,se;for(g=0,T=0,z=this._rings.length;g<z;g++)for(se=this._rings[g],b=0,K=se.length;b<K-1;b++)ne=ql(se[b],se[b+1],l,b,!0),ne&&(d[T]=d[T]||[],d[T].push(ne[0]),(ne[1]!==se[b+1]||b===K-2)&&(d[T].push(ne[1]),T++))}},_simplifyPoints:function(){for(var l=this._parts,d=this.options.smoothFactor,g=0,b=l.length;g<b;g++)l[g]=Mh(l[g],d)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(l,d){var g,b,T,z,K,ne,se=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(g=0,z=this._parts.length;g<z;g++)for(ne=this._parts[g],b=0,K=ne.length,T=K-1;b<K;T=b++)if(!(!d&&b===0)&&Dh(l,ne[T],ne[b])<=se)return!0;return!1}});function q5(l,d){return new ka(l,d)}ka._flat=C;var yu=ka.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return mu(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(l){var d=ka.prototype._convertLatLngs.call(this,l),g=d.length;return g>=2&&d[0]instanceof He&&d[0].equals(d[g-1])&&d.pop(),d},_setLatLngs:function(l){ka.prototype._setLatLngs.call(this,l),m(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return m(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var l=this._renderer._bounds,d=this.options.weight,g=new U(d,d);if(l=new Q(l.min.subtract(g),l.max.add(g)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}for(var b=0,T=this._rings.length,z;b<T;b++)z=fu(this._rings[b],l,!0),z.length&&this._parts.push(z)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(l){var d=!1,g,b,T,z,K,ne,se,pe;if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(z=0,se=this._parts.length;z<se;z++)for(g=this._parts[z],K=0,pe=g.length,ne=pe-1;K<pe;ne=K++)b=g[K],T=g[ne],b.y>l.y!=T.y>l.y&&l.x<(T.x-b.x)*(l.y-b.y)/(T.y-b.y)+b.x&&(d=!d);return d||ka.prototype._containsPoint.call(this,l,!0)}});function H5(l,d){return new yu(l,d)}var Ta=Rn.extend({initialize:function(l,d){j(this,d),this._layers={},l&&this.addData(l)},addData:function(l){var d=E(l)?l:l.features,g,b,T;if(d){for(g=0,b=d.length;g<b;g++)T=d[g],(T.geometries||T.geometry||T.features||T.coordinates)&&this.addData(T);return this}var z=this.options;if(z.filter&&!z.filter(l))return this;var K=Mp(l,z);return K?(K.feature=Lp(l),K.defaultOptions=K.options,this.resetStyle(K),z.onEachFeature&&z.onEachFeature(l,K),this.addLayer(K)):this},resetStyle:function(l){return l===void 0?this.eachLayer(this.resetStyle,this):(l.options=i({},l.defaultOptions),this._setLayerStyle(l,this.options.style),this)},setStyle:function(l){return this.eachLayer(function(d){this._setLayerStyle(d,l)},this)},_setLayerStyle:function(l,d){l.setStyle&&(typeof d=="function"&&(d=d(l.feature)),l.setStyle(d))}});function Mp(l,d){var g=l.type==="Feature"?l.geometry:l,b=g?g.coordinates:null,T=[],z=d&&d.pointToLayer,K=d&&d.coordsToLatLng||t_,ne,se,pe,Oe;if(!b&&!g)return null;switch(g.type){case"Point":return ne=K(b),aS(z,l,ne,d);case"MultiPoint":for(pe=0,Oe=b.length;pe<Oe;pe++)ne=K(b[pe]),T.push(aS(z,l,ne,d));return new Rn(T);case"LineString":case"MultiLineString":return se=Dp(b,g.type==="LineString"?0:1,K),new ka(se,d);case"Polygon":case"MultiPolygon":return se=Dp(b,g.type==="Polygon"?1:2,K),new yu(se,d);case"GeometryCollection":for(pe=0,Oe=g.geometries.length;pe<Oe;pe++){var st=Mp({geometry:g.geometries[pe],type:"Feature",properties:l.properties},d);st&&T.push(st)}return new Rn(T);case"FeatureCollection":for(pe=0,Oe=g.features.length;pe<Oe;pe++){var bt=Mp(g.features[pe],d);bt&&T.push(bt)}return new Rn(T);default:throw new Error("Invalid GeoJSON object.")}}function aS(l,d,g,b){return l?l(d,g):new Ap(g,b&&b.markersInheritOptions&&b)}function t_(l){return new He(l[1],l[0],l[2])}function Dp(l,d,g){for(var b=[],T=0,z=l.length,K;T<z;T++)K=d?Dp(l[T],d-1,g):(g||t_)(l[T]),b.push(K);return b}function n_(l,d){return l=re(l),l.alt!==void 0?[v(l.lng,d),v(l.lat,d),v(l.alt,d)]:[v(l.lng,d),v(l.lat,d)]}function Op(l,d,g,b){for(var T=[],z=0,K=l.length;z<K;z++)T.push(d?Op(l[z],m(l[z])?0:d-1,g,b):n_(l[z],b));return!d&&g&&T.length>0&&T.push(T[0].slice()),T}function _u(l,d){return l.feature?i({},l.feature,{geometry:d}):Lp(d)}function Lp(l){return l.type==="Feature"||l.type==="FeatureCollection"?l:{type:"Feature",properties:{},geometry:l}}var r_={toGeoJSON:function(l){return _u(this,{type:"Point",coordinates:n_(this.getLatLng(),l)})}};Ap.include(r_),e_.include(r_),Rp.include(r_),ka.include({toGeoJSON:function(l){var d=!m(this._latlngs),g=Op(this._latlngs,d?1:0,!1,l);return _u(this,{type:(d?"Multi":"")+"LineString",coordinates:g})}}),yu.include({toGeoJSON:function(l){var d=!m(this._latlngs),g=d&&!m(this._latlngs[0]),b=Op(this._latlngs,g?2:d?1:0,!0,l);return d||(b=[b]),_u(this,{type:(g?"Multi":"")+"Polygon",coordinates:b})}}),wn.include({toMultiPoint:function(l){var d=[];return this.eachLayer(function(g){d.push(g.toGeoJSON(l).geometry.coordinates)}),_u(this,{type:"MultiPoint",coordinates:d})},toGeoJSON:function(l){var d=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(d==="MultiPoint")return this.toMultiPoint(l);var g=d==="GeometryCollection",b=[];return this.eachLayer(function(T){if(T.toGeoJSON){var z=T.toGeoJSON(l);if(g)b.push(z.geometry);else{var K=Lp(z);K.type==="FeatureCollection"?b.push.apply(b,K.features):b.push(K)}}}),g?_u(this,{geometries:b,type:"GeometryCollection"}):{type:"FeatureCollection",features:b}}});function oS(l,d){return new Ta(l,d)}var G5=oS,Fp=Yt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(l,d,g){this._url=l,this._bounds=Ue(d),j(this,g)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(gt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){tn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(l){return this.options.opacity=l,this._image&&this._updateOpacity(),this},setStyle:function(l){return l.opacity&&this.setOpacity(l.opacity),this},bringToFront:function(){return this._map&&ja(this._image),this},bringToBack:function(){return this._map&&xo(this._image),this},setUrl:function(l){return this._url=l,this._image&&(this._image.src=l),this},setBounds:function(l){return this._bounds=Ue(l),this._map&&this._reset(),this},getEvents:function(){var l={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var l=this._url.tagName==="IMG",d=this._image=l?this._url:Et("img");if(gt(d,"leaflet-image-layer"),this._zoomAnimated&&gt(d,"leaflet-zoom-animated"),this.options.className&&gt(d,this.options.className),d.onselectstart=p,d.onmousemove=p,d.onload=o(this.fire,this,"load"),d.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),l){this._url=d.src;return}d.src=this._url,d.alt=this.options.alt},_animateZoom:function(l){var d=this._map.getZoomScale(l.zoom),g=this._map._latLngBoundsToNewLayerBounds(this._bounds,l.zoom,l.center).min;Mi(this._image,g,d)},_reset:function(){var l=this._image,d=new Q(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),g=d.getSize();ct(l,d.min),l.style.width=g.x+"px",l.style.height=g.y+"px"},_updateOpacity:function(){Cn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var l=this.options.errorOverlayUrl;l&&this._url!==l&&(this._url=l,this._image.src=l)},getCenter:function(){return this._bounds.getCenter()}}),K5=function(l,d,g){return new Fp(l,d,g)},lS=Fp.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var l=this._url.tagName==="VIDEO",d=this._image=l?this._url:Et("video");if(gt(d,"leaflet-image-layer"),this._zoomAnimated&&gt(d,"leaflet-zoom-animated"),this.options.className&&gt(d,this.options.className),d.onselectstart=p,d.onmousemove=p,d.onloadeddata=o(this.fire,this,"load"),l){for(var g=d.getElementsByTagName("source"),b=[],T=0;T<g.length;T++)b.push(g[T].src);this._url=g.length>0?b:[d.src];return}E(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(d.style,"objectFit")&&(d.style.objectFit="fill"),d.autoplay=!!this.options.autoplay,d.loop=!!this.options.loop,d.muted=!!this.options.muted,d.playsInline=!!this.options.playsInline;for(var z=0;z<this._url.length;z++){var K=Et("source");K.src=this._url[z],d.appendChild(K)}}});function Z5(l,d,g){return new lS(l,d,g)}var cS=Fp.extend({_initImage:function(){var l=this._image=this._url;gt(l,"leaflet-image-layer"),this._zoomAnimated&&gt(l,"leaflet-zoom-animated"),this.options.className&&gt(l,this.options.className),l.onselectstart=p,l.onmousemove=p}});function Y5(l,d,g){return new cS(l,d,g)}var Li=Yt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(l,d){l&&(l instanceof He||E(l))?(this._latlng=re(l),j(this,d)):(j(this,l),this._source=d),this.options.content&&(this._content=this.options.content)},openOn:function(l){return l=arguments.length?l:this._source._map,l.hasLayer(this)||l.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(l){return this._map?this.close():(arguments.length?this._source=l:l=this._source,this._prepareOpen(),this.openOn(l._map)),this},onAdd:function(l){this._zoomAnimated=l._zoomAnimated,this._container||this._initLayout(),l._fadeAnimated&&Cn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),l._fadeAnimated&&Cn(this._container,1),this.bringToFront(),this.options.interactive&&(gt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(l){l._fadeAnimated?(Cn(this._container,0),this._removeTimeout=setTimeout(o(tn,void 0,this._container),200)):tn(this._container),this.options.interactive&&(hn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(l){return this._latlng=re(l),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(l){return this._content=l,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var l={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ja(this._container),this},bringToBack:function(){return this._map&&xo(this._container),this},_prepareOpen:function(l){var d=this._source;if(!d._map)return!1;if(d instanceof Rn){d=null;var g=this._source._layers;for(var b in g)if(g[b]._map){d=g[b];break}if(!d)return!1;this._source=d}if(!l)if(d.getCenter)l=d.getCenter();else if(d.getLatLng)l=d.getLatLng();else if(d.getBounds)l=d.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(l),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var l=this._contentNode,d=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof d=="string")l.innerHTML=d;else{for(;l.hasChildNodes();)l.removeChild(l.firstChild);l.appendChild(d)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var l=this._map.latLngToLayerPoint(this._latlng),d=H(this.options.offset),g=this._getAnchor();this._zoomAnimated?ct(this._container,l.add(g)):d=d.add(l).add(g);var b=this._containerBottom=-d.y,T=this._containerLeft=-Math.round(this._containerWidth/2)+d.x;this._container.style.bottom=b+"px",this._container.style.left=T+"px"}},_getAnchor:function(){return[0,0]}});Nt.include({_initOverlay:function(l,d,g,b){var T=d;return T instanceof l||(T=new l(b).setContent(d)),g&&T.setLatLng(g),T}}),Yt.include({_initOverlay:function(l,d,g,b){var T=g;return T instanceof l?(j(T,b),T._source=this):(T=d&&!b?d:new l(b,this),T.setContent(g)),T}});var Vp=Li.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(l){return l=arguments.length?l:this._source._map,!l.hasLayer(this)&&l._popup&&l._popup.options.autoClose&&l.removeLayer(l._popup),l._popup=this,Li.prototype.openOn.call(this,l)},onAdd:function(l){Li.prototype.onAdd.call(this,l),l.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof No||this._source.on("preclick",Fs))},onRemove:function(l){Li.prototype.onRemove.call(this,l),l.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof No||this._source.off("preclick",Fs))},getEvents:function(){var l=Li.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(l.preclick=this.close),this.options.keepInView&&(l.moveend=this._adjustPan),l},_initLayout:function(){var l="leaflet-popup",d=this._container=Et("div",l+" "+(this.options.className||"")+" leaflet-zoom-animated"),g=this._wrapper=Et("div",l+"-content-wrapper",d);if(this._contentNode=Et("div",l+"-content",g),wo(d),_o(this._contentNode),rt(d,"contextmenu",Fs),this._tipContainer=Et("div",l+"-tip-container",d),this._tip=Et("div",l+"-tip",this._tipContainer),this.options.closeButton){var b=this._closeButton=Et("a",l+"-close-button",d);b.setAttribute("role","button"),b.setAttribute("aria-label","Close popup"),b.href="#close",b.innerHTML='<span aria-hidden="true">&#215;</span>',rt(b,"click",function(T){_n(T),this.close()},this)}},_updateLayout:function(){var l=this._contentNode,d=l.style;d.width="",d.whiteSpace="nowrap";var g=l.offsetWidth;g=Math.min(g,this.options.maxWidth),g=Math.max(g,this.options.minWidth),d.width=g+1+"px",d.whiteSpace="",d.height="";var b=l.offsetHeight,T=this.options.maxHeight,z="leaflet-popup-scrolled";T&&b>T?(d.height=T+"px",gt(l,z)):hn(l,z),this._containerWidth=this._container.offsetWidth},_animateZoom:function(l){var d=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center),g=this._getAnchor();ct(this._container,d.add(g))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var l=this._map,d=parseInt(vo(this._container,"marginBottom"),10)||0,g=this._container.offsetHeight+d,b=this._containerWidth,T=new U(this._containerLeft,-g-this._containerBottom);T._add(Ds(this._container));var z=l.layerPointToContainerPoint(T),K=H(this.options.autoPanPadding),ne=H(this.options.autoPanPaddingTopLeft||K),se=H(this.options.autoPanPaddingBottomRight||K),pe=l.getSize(),Oe=0,st=0;z.x+b+se.x>pe.x&&(Oe=z.x+b-pe.x+se.x),z.x-Oe-ne.x<0&&(Oe=z.x-ne.x),z.y+g+se.y>pe.y&&(st=z.y+g-pe.y+se.y),z.y-st-ne.y<0&&(st=z.y-ne.y),(Oe||st)&&(this.options.keepInView&&(this._autopanning=!0),l.fire("autopanstart").panBy([Oe,st]))}},_getAnchor:function(){return H(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Q5=function(l,d){return new Vp(l,d)};Nt.mergeOptions({closePopupOnClick:!0}),Nt.include({openPopup:function(l,d,g){return this._initOverlay(Vp,l,d,g).openOn(this),this},closePopup:function(l){return l=arguments.length?l:this._popup,l&&l.close(),this}}),Yt.include({bindPopup:function(l,d){return this._popup=this._initOverlay(Vp,this._popup,l,d),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(l){return this._popup&&(this instanceof Rn||(this._popup._source=this),this._popup._prepareOpen(l||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(l){return this._popup&&this._popup.setContent(l),this},getPopup:function(){return this._popup},_openPopup:function(l){if(!(!this._popup||!this._map)){ps(l);var d=l.layer||l.target;if(this._popup._source===d&&!(d instanceof No)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(l.latlng);return}this._popup._source=d,this.openPopup(l.latlng)}},_movePopup:function(l){this._popup.setLatLng(l.latlng)},_onKeyPress:function(l){l.originalEvent.keyCode===13&&this._openPopup(l)}});var zp=Li.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(l){Li.prototype.onAdd.call(this,l),this.setOpacity(this.options.opacity),l.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(l){Li.prototype.onRemove.call(this,l),l.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var l=Li.prototype.getEvents.call(this);return this.options.permanent||(l.preclick=this.close),l},_initLayout:function(){var l="leaflet-tooltip",d=l+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Et("div",d),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+u(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(l){var d,g,b=this._map,T=this._container,z=b.latLngToContainerPoint(b.getCenter()),K=b.layerPointToContainerPoint(l),ne=this.options.direction,se=T.offsetWidth,pe=T.offsetHeight,Oe=H(this.options.offset),st=this._getAnchor();ne==="top"?(d=se/2,g=pe):ne==="bottom"?(d=se/2,g=0):ne==="center"?(d=se/2,g=pe/2):ne==="right"?(d=0,g=pe/2):ne==="left"?(d=se,g=pe/2):K.x<z.x?(ne="right",d=0,g=pe/2):(ne="left",d=se+(Oe.x+st.x)*2,g=pe/2),l=l.subtract(H(d,g,!0)).add(Oe).add(st),hn(T,"leaflet-tooltip-right"),hn(T,"leaflet-tooltip-left"),hn(T,"leaflet-tooltip-top"),hn(T,"leaflet-tooltip-bottom"),gt(T,"leaflet-tooltip-"+ne),ct(T,l)},_updatePosition:function(){var l=this._map.latLngToLayerPoint(this._latlng);this._setPosition(l)},setOpacity:function(l){this.options.opacity=l,this._container&&Cn(this._container,l)},_animateZoom:function(l){var d=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center);this._setPosition(d)},_getAnchor:function(){return H(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),X5=function(l,d){return new zp(l,d)};Nt.include({openTooltip:function(l,d,g){return this._initOverlay(zp,l,d,g).openOn(this),this},closeTooltip:function(l){return l.close(),this}}),Yt.include({bindTooltip:function(l,d){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(zp,this._tooltip,l,d),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(l){if(!(!l&&this._tooltipHandlersAdded)){var d=l?"off":"on",g={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?g.add=this._openTooltip:(g.mouseover=this._openTooltip,g.mouseout=this.closeTooltip,g.click=this._openTooltip,this._map?this._addFocusListeners():g.add=this._addFocusListeners),this._tooltip.options.sticky&&(g.mousemove=this._moveTooltip),this[d](g),this._tooltipHandlersAdded=!l}},openTooltip:function(l){return this._tooltip&&(this instanceof Rn||(this._tooltip._source=this),this._tooltip._prepareOpen(l)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(l){return this._tooltip&&this._tooltip.setContent(l),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(l){var d=typeof l.getElement=="function"&&l.getElement();d&&(rt(d,"focus",function(){this._tooltip._source=l,this.openTooltip()},this),rt(d,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(l){var d=typeof l.getElement=="function"&&l.getElement();d&&d.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(l){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var d=this;this._map.once("moveend",function(){d._openOnceFlag=!1,d._openTooltip(l)});return}this._tooltip._source=l.layer||l.target,this.openTooltip(this._tooltip.options.sticky?l.latlng:void 0)}},_moveTooltip:function(l){var d=l.latlng,g,b;this._tooltip.options.sticky&&l.originalEvent&&(g=this._map.mouseEventToContainerPoint(l.originalEvent),b=this._map.containerPointToLayerPoint(g),d=this._map.layerPointToLatLng(b)),this._tooltip.setLatLng(d)}});var uS=Oi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(l){var d=l&&l.tagName==="DIV"?l:document.createElement("div"),g=this.options;if(g.html instanceof Element?(Bl(d),d.appendChild(g.html)):d.innerHTML=g.html!==!1?g.html:"",g.bgPos){var b=H(g.bgPos);d.style.backgroundPosition=-b.x+"px "+-b.y+"px"}return this._setIconStyles(d,"icon"),d},createShadow:function(){return null}});function J5(l){return new uS(l)}Oi.Default=Lh;var Fh=Yt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Je.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(l){j(this,l)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(l){l._addZoomLimit(this)},onRemove:function(l){this._removeAllTiles(),tn(this._container),l._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ja(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(xo(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(l){return this.options.opacity=l,this._updateOpacity(),this},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var l=this._clampZoom(this._map.getZoom());l!==this._tileZoom&&(this._tileZoom=l,this._updateLevels()),this._update()}return this},getEvents:function(){var l={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=h(this._onMoveEnd,this.options.updateInterval,this)),l.move=this._onMove),this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},createTile:function(){return document.createElement("div")},getTileSize:function(){var l=this.options.tileSize;return l instanceof U?l:new U(l,l)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(l){for(var d=this.getPane().children,g=-l(-1/0,1/0),b=0,T=d.length,z;b<T;b++)z=d[b].style.zIndex,d[b]!==this._container&&z&&(g=l(g,+z));isFinite(g)&&(this.options.zIndex=g+l(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Je.ielt9){Cn(this._container,this.options.opacity);var l=+new Date,d=!1,g=!1;for(var b in this._tiles){var T=this._tiles[b];if(!(!T.current||!T.loaded)){var z=Math.min(1,(l-T.loaded)/200);Cn(T.el,z),z<1?d=!0:(T.active?g=!0:this._onOpaqueTile(T),T.active=!0)}}g&&!this._noPrune&&this._pruneTiles(),d&&(O(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this))}},_onOpaqueTile:p,_initContainer:function(){this._container||(this._container=Et("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var l=this._tileZoom,d=this.options.maxZoom;if(l!==void 0){for(var g in this._levels)g=Number(g),this._levels[g].el.children.length||g===l?(this._levels[g].el.style.zIndex=d-Math.abs(l-g),this._onUpdateLevel(g)):(tn(this._levels[g].el),this._removeTilesAtZoom(g),this._onRemoveLevel(g),delete this._levels[g]);var b=this._levels[l],T=this._map;return b||(b=this._levels[l]={},b.el=Et("div","leaflet-tile-container leaflet-zoom-animated",this._container),b.el.style.zIndex=d,b.origin=T.project(T.unproject(T.getPixelOrigin()),l).round(),b.zoom=l,this._setZoomTransform(b,T.getCenter(),T.getZoom()),p(b.el.offsetWidth),this._onCreateLevel(b)),this._level=b,b}},_onUpdateLevel:p,_onRemoveLevel:p,_onCreateLevel:p,_pruneTiles:function(){if(this._map){var l,d,g=this._map.getZoom();if(g>this.options.maxZoom||g<this.options.minZoom){this._removeAllTiles();return}for(l in this._tiles)d=this._tiles[l],d.retain=d.current;for(l in this._tiles)if(d=this._tiles[l],d.current&&!d.active){var b=d.coords;this._retainParent(b.x,b.y,b.z,b.z-5)||this._retainChildren(b.x,b.y,b.z,b.z+2)}for(l in this._tiles)this._tiles[l].retain||this._removeTile(l)}},_removeTilesAtZoom:function(l){for(var d in this._tiles)this._tiles[d].coords.z===l&&this._removeTile(d)},_removeAllTiles:function(){for(var l in this._tiles)this._removeTile(l)},_invalidateAll:function(){for(var l in this._levels)tn(this._levels[l].el),this._onRemoveLevel(Number(l)),delete this._levels[l];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(l,d,g,b){var T=Math.floor(l/2),z=Math.floor(d/2),K=g-1,ne=new U(+T,+z);ne.z=+K;var se=this._tileCoordsToKey(ne),pe=this._tiles[se];return pe&&pe.active?(pe.retain=!0,!0):(pe&&pe.loaded&&(pe.retain=!0),K>b?this._retainParent(T,z,K,b):!1)},_retainChildren:function(l,d,g,b){for(var T=2*l;T<2*l+2;T++)for(var z=2*d;z<2*d+2;z++){var K=new U(T,z);K.z=g+1;var ne=this._tileCoordsToKey(K),se=this._tiles[ne];if(se&&se.active){se.retain=!0;continue}else se&&se.loaded&&(se.retain=!0);g+1<b&&this._retainChildren(T,z,g+1,b)}},_resetView:function(l){var d=l&&(l.pinch||l.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),d,d)},_animateZoom:function(l){this._setView(l.center,l.zoom,!0,l.noUpdate)},_clampZoom:function(l){var d=this.options;return d.minNativeZoom!==void 0&&l<d.minNativeZoom?d.minNativeZoom:d.maxNativeZoom!==void 0&&d.maxNativeZoom<l?d.maxNativeZoom:l},_setView:function(l,d,g,b){var T=Math.round(d);this.options.maxZoom!==void 0&&T>this.options.maxZoom||this.options.minZoom!==void 0&&T<this.options.minZoom?T=void 0:T=this._clampZoom(T);var z=this.options.updateWhenZooming&&T!==this._tileZoom;(!b||z)&&(this._tileZoom=T,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),T!==void 0&&this._update(l),g||this._pruneTiles(),this._noPrune=!!g),this._setZoomTransforms(l,d)},_setZoomTransforms:function(l,d){for(var g in this._levels)this._setZoomTransform(this._levels[g],l,d)},_setZoomTransform:function(l,d,g){var b=this._map.getZoomScale(g,l.zoom),T=l.origin.multiplyBy(b).subtract(this._map._getNewPixelOrigin(d,g)).round();Je.any3d?Mi(l.el,T,b):ct(l.el,T)},_resetGrid:function(){var l=this._map,d=l.options.crs,g=this._tileSize=this.getTileSize(),b=this._tileZoom,T=this._map.getPixelWorldBounds(this._tileZoom);T&&(this._globalTileRange=this._pxBoundsToTileRange(T)),this._wrapX=d.wrapLng&&!this.options.noWrap&&[Math.floor(l.project([0,d.wrapLng[0]],b).x/g.x),Math.ceil(l.project([0,d.wrapLng[1]],b).x/g.y)],this._wrapY=d.wrapLat&&!this.options.noWrap&&[Math.floor(l.project([d.wrapLat[0],0],b).y/g.x),Math.ceil(l.project([d.wrapLat[1],0],b).y/g.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(l){var d=this._map,g=d._animatingZoom?Math.max(d._animateToZoom,d.getZoom()):d.getZoom(),b=d.getZoomScale(g,this._tileZoom),T=d.project(l,this._tileZoom).floor(),z=d.getSize().divideBy(b*2);return new Q(T.subtract(z),T.add(z))},_update:function(l){var d=this._map;if(d){var g=this._clampZoom(d.getZoom());if(l===void 0&&(l=d.getCenter()),this._tileZoom!==void 0){var b=this._getTiledPixelBounds(l),T=this._pxBoundsToTileRange(b),z=T.getCenter(),K=[],ne=this.options.keepBuffer,se=new Q(T.getBottomLeft().subtract([ne,-ne]),T.getTopRight().add([ne,-ne]));if(!(isFinite(T.min.x)&&isFinite(T.min.y)&&isFinite(T.max.x)&&isFinite(T.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var pe in this._tiles){var Oe=this._tiles[pe].coords;(Oe.z!==this._tileZoom||!se.contains(new U(Oe.x,Oe.y)))&&(this._tiles[pe].current=!1)}if(Math.abs(g-this._tileZoom)>1){this._setView(l,g);return}for(var st=T.min.y;st<=T.max.y;st++)for(var bt=T.min.x;bt<=T.max.x;bt++){var Vr=new U(bt,st);if(Vr.z=this._tileZoom,!!this._isValidTile(Vr)){var lr=this._tiles[this._tileCoordsToKey(Vr)];lr?lr.current=!0:K.push(Vr)}}if(K.sort(function(es,bu){return es.distanceTo(z)-bu.distanceTo(z)}),K.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var zs=document.createDocumentFragment();for(bt=0;bt<K.length;bt++)this._addTile(K[bt],zs);this._level.el.appendChild(zs)}}}},_isValidTile:function(l){var d=this._map.options.crs;if(!d.infinite){var g=this._globalTileRange;if(!d.wrapLng&&(l.x<g.min.x||l.x>g.max.x)||!d.wrapLat&&(l.y<g.min.y||l.y>g.max.y))return!1}if(!this.options.bounds)return!0;var b=this._tileCoordsToBounds(l);return Ue(this.options.bounds).overlaps(b)},_keyToBounds:function(l){return this._tileCoordsToBounds(this._keyToTileCoords(l))},_tileCoordsToNwSe:function(l){var d=this._map,g=this.getTileSize(),b=l.scaleBy(g),T=b.add(g),z=d.unproject(b,l.z),K=d.unproject(T,l.z);return[z,K]},_tileCoordsToBounds:function(l){var d=this._tileCoordsToNwSe(l),g=new ye(d[0],d[1]);return this.options.noWrap||(g=this._map.wrapLatLngBounds(g)),g},_tileCoordsToKey:function(l){return l.x+":"+l.y+":"+l.z},_keyToTileCoords:function(l){var d=l.split(":"),g=new U(+d[0],+d[1]);return g.z=+d[2],g},_removeTile:function(l){var d=this._tiles[l];d&&(tn(d.el),delete this._tiles[l],this.fire("tileunload",{tile:d.el,coords:this._keyToTileCoords(l)}))},_initTile:function(l){gt(l,"leaflet-tile");var d=this.getTileSize();l.style.width=d.x+"px",l.style.height=d.y+"px",l.onselectstart=p,l.onmousemove=p,Je.ielt9&&this.options.opacity<1&&Cn(l,this.options.opacity)},_addTile:function(l,d){var g=this._getTilePos(l),b=this._tileCoordsToKey(l),T=this.createTile(this._wrapCoords(l),o(this._tileReady,this,l));this._initTile(T),this.createTile.length<2&&M(o(this._tileReady,this,l,null,T)),ct(T,g),this._tiles[b]={el:T,coords:l,current:!0},d.appendChild(T),this.fire("tileloadstart",{tile:T,coords:l})},_tileReady:function(l,d,g){d&&this.fire("tileerror",{error:d,tile:g,coords:l});var b=this._tileCoordsToKey(l);g=this._tiles[b],g&&(g.loaded=+new Date,this._map._fadeAnimated?(Cn(g.el,0),O(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this)):(g.active=!0,this._pruneTiles()),d||(gt(g.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:g.el,coords:l})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Je.ielt9||!this._map._fadeAnimated?M(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(l){return l.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(l){var d=new U(this._wrapX?f(l.x,this._wrapX):l.x,this._wrapY?f(l.y,this._wrapY):l.y);return d.z=l.z,d},_pxBoundsToTileRange:function(l){var d=this.getTileSize();return new Q(l.min.unscaleBy(d).floor(),l.max.unscaleBy(d).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var l in this._tiles)if(!this._tiles[l].loaded)return!1;return!0}});function e6(l){return new Fh(l)}var wu=Fh.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(l,d){this._url=l,d=j(this,d),d.detectRetina&&Je.retina&&d.maxZoom>0?(d.tileSize=Math.floor(d.tileSize/2),d.zoomReverse?(d.zoomOffset--,d.minZoom=Math.min(d.maxZoom,d.minZoom+1)):(d.zoomOffset++,d.maxZoom=Math.max(d.minZoom,d.maxZoom-1)),d.minZoom=Math.max(0,d.minZoom)):d.zoomReverse?d.minZoom=Math.min(d.maxZoom,d.minZoom):d.maxZoom=Math.max(d.minZoom,d.maxZoom),typeof d.subdomains=="string"&&(d.subdomains=d.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(l,d){return this._url===l&&d===void 0&&(d=!0),this._url=l,d||this.redraw(),this},createTile:function(l,d){var g=document.createElement("img");return rt(g,"load",o(this._tileOnLoad,this,d,g)),rt(g,"error",o(this._tileOnError,this,d,g)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(g.referrerPolicy=this.options.referrerPolicy),g.alt="",g.src=this.getTileUrl(l),g},getTileUrl:function(l){var d={r:Je.retina?"@2x":"",s:this._getSubdomain(l),x:l.x,y:l.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var g=this._globalTileRange.max.y-l.y;this.options.tms&&(d.y=g),d["-y"]=g}return y(this._url,i(d,this.options))},_tileOnLoad:function(l,d){Je.ielt9?setTimeout(o(l,this,null,d),0):l(null,d)},_tileOnError:function(l,d,g){var b=this.options.errorTileUrl;b&&d.getAttribute("src")!==b&&(d.src=b),l(g,d)},_onTileRemove:function(l){l.tile.onload=null},_getZoomForUrl:function(){var l=this._tileZoom,d=this.options.maxZoom,g=this.options.zoomReverse,b=this.options.zoomOffset;return g&&(l=d-l),l+b},_getSubdomain:function(l){var d=Math.abs(l.x+l.y)%this.options.subdomains.length;return this.options.subdomains[d]},_abortLoading:function(){var l,d;for(l in this._tiles)if(this._tiles[l].coords.z!==this._tileZoom&&(d=this._tiles[l].el,d.onload=p,d.onerror=p,!d.complete)){d.src=D;var g=this._tiles[l].coords;tn(d),delete this._tiles[l],this.fire("tileabort",{tile:d,coords:g})}},_removeTile:function(l){var d=this._tiles[l];if(d)return d.el.setAttribute("src",D),Fh.prototype._removeTile.call(this,l)},_tileReady:function(l,d,g){if(!(!this._map||g&&g.getAttribute("src")===D))return Fh.prototype._tileReady.call(this,l,d,g)}});function dS(l,d){return new wu(l,d)}var hS=wu.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(l,d){this._url=l;var g=i({},this.defaultWmsParams);for(var b in d)b in this.options||(g[b]=d[b]);d=j(this,d);var T=d.detectRetina&&Je.retina?2:1,z=this.getTileSize();g.width=z.x*T,g.height=z.y*T,this.wmsParams=g},onAdd:function(l){this._crs=this.options.crs||l.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var d=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[d]=this._crs.code,wu.prototype.onAdd.call(this,l)},getTileUrl:function(l){var d=this._tileCoordsToNwSe(l),g=this._crs,b=he(g.project(d[0]),g.project(d[1])),T=b.min,z=b.max,K=(this._wmsVersion>=1.3&&this._crs===$n?[T.y,T.x,z.y,z.x]:[T.x,T.y,z.x,z.y]).join(","),ne=wu.prototype.getTileUrl.call(this,l);return ne+S(this.wmsParams,ne,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+K},setParams:function(l,d){return i(this.wmsParams,l),d||this.redraw(),this}});function t6(l,d){return new hS(l,d)}wu.WMS=hS,dS.wms=t6;var Pa=Yt.extend({options:{padding:.1},initialize:function(l){j(this,l),u(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),gt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var l={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(l.zoomanim=this._onAnimZoom),l},_onAnimZoom:function(l){this._updateTransform(l.center,l.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(l,d){var g=this._map.getZoomScale(d,this._zoom),b=this._map.getSize().multiplyBy(.5+this.options.padding),T=this._map.project(this._center,d),z=b.multiplyBy(-g).add(T).subtract(this._map._getNewPixelOrigin(l,d));Je.any3d?Mi(this._container,z,g):ct(this._container,z)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var l in this._layers)this._layers[l]._reset()},_onZoomEnd:function(){for(var l in this._layers)this._layers[l]._project()},_updatePaths:function(){for(var l in this._layers)this._layers[l]._update()},_update:function(){var l=this.options.padding,d=this._map.getSize(),g=this._map.containerPointToLayerPoint(d.multiplyBy(-l)).round();this._bounds=new Q(g,g.add(d.multiplyBy(1+l*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),fS=Pa.extend({options:{tolerance:0},getEvents:function(){var l=Pa.prototype.getEvents.call(this);return l.viewprereset=this._onViewPreReset,l},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Pa.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var l=this._container=document.createElement("canvas");rt(l,"mousemove",this._onMouseMove,this),rt(l,"click dblclick mousedown mouseup contextmenu",this._onClick,this),rt(l,"mouseout",this._handleMouseOut,this),l._leaflet_disable_events=!0,this._ctx=l.getContext("2d")},_destroyContainer:function(){O(this._redrawRequest),delete this._ctx,tn(this._container),Zt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var l;this._redrawBounds=null;for(var d in this._layers)l=this._layers[d],l._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Pa.prototype._update.call(this);var l=this._bounds,d=this._container,g=l.getSize(),b=Je.retina?2:1;ct(d,l.min),d.width=b*g.x,d.height=b*g.y,d.style.width=g.x+"px",d.style.height=g.y+"px",Je.retina&&this._ctx.scale(2,2),this._ctx.translate(-l.min.x,-l.min.y),this.fire("update")}},_reset:function(){Pa.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(l){this._updateDashArray(l),this._layers[u(l)]=l;var d=l._order={layer:l,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=d),this._drawLast=d,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(l){this._requestRedraw(l)},_removePath:function(l){var d=l._order,g=d.next,b=d.prev;g?g.prev=b:this._drawLast=b,b?b.next=g:this._drawFirst=g,delete l._order,delete this._layers[u(l)],this._requestRedraw(l)},_updatePath:function(l){this._extendRedrawBounds(l),l._project(),l._update(),this._requestRedraw(l)},_updateStyle:function(l){this._updateDashArray(l),this._requestRedraw(l)},_updateDashArray:function(l){if(typeof l.options.dashArray=="string"){var d=l.options.dashArray.split(/[, ]+/),g=[],b,T;for(T=0;T<d.length;T++){if(b=Number(d[T]),isNaN(b))return;g.push(b)}l.options._dashArray=g}else l.options._dashArray=l.options.dashArray},_requestRedraw:function(l){this._map&&(this._extendRedrawBounds(l),this._redrawRequest=this._redrawRequest||M(this._redraw,this))},_extendRedrawBounds:function(l){if(l._pxBounds){var d=(l.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Q,this._redrawBounds.extend(l._pxBounds.min.subtract([d,d])),this._redrawBounds.extend(l._pxBounds.max.add([d,d]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var l=this._redrawBounds;if(l){var d=l.getSize();this._ctx.clearRect(l.min.x,l.min.y,d.x,d.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var l,d=this._redrawBounds;if(this._ctx.save(),d){var g=d.getSize();this._ctx.beginPath(),this._ctx.rect(d.min.x,d.min.y,g.x,g.y),this._ctx.clip()}this._drawing=!0;for(var b=this._drawFirst;b;b=b.next)l=b.layer,(!d||l._pxBounds&&l._pxBounds.intersects(d))&&l._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(l,d){if(this._drawing){var g,b,T,z,K=l._parts,ne=K.length,se=this._ctx;if(ne){for(se.beginPath(),g=0;g<ne;g++){for(b=0,T=K[g].length;b<T;b++)z=K[g][b],se[b?"lineTo":"moveTo"](z.x,z.y);d&&se.closePath()}this._fillStroke(se,l)}}},_updateCircle:function(l){if(!(!this._drawing||l._empty())){var d=l._point,g=this._ctx,b=Math.max(Math.round(l._radius),1),T=(Math.max(Math.round(l._radiusY),1)||b)/b;T!==1&&(g.save(),g.scale(1,T)),g.beginPath(),g.arc(d.x,d.y/T,b,0,Math.PI*2,!1),T!==1&&g.restore(),this._fillStroke(g,l)}},_fillStroke:function(l,d){var g=d.options;g.fill&&(l.globalAlpha=g.fillOpacity,l.fillStyle=g.fillColor||g.color,l.fill(g.fillRule||"evenodd")),g.stroke&&g.weight!==0&&(l.setLineDash&&l.setLineDash(d.options&&d.options._dashArray||[]),l.globalAlpha=g.opacity,l.lineWidth=g.weight,l.strokeStyle=g.color,l.lineCap=g.lineCap,l.lineJoin=g.lineJoin,l.stroke())},_onClick:function(l){for(var d=this._map.mouseEventToLayerPoint(l),g,b,T=this._drawFirst;T;T=T.next)g=T.layer,g.options.interactive&&g._containsPoint(d)&&(!(l.type==="click"||l.type==="preclick")||!this._map._draggableMoved(g))&&(b=g);this._fireEvent(b?[b]:!1,l)},_onMouseMove:function(l){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var d=this._map.mouseEventToLayerPoint(l);this._handleMouseHover(l,d)}},_handleMouseOut:function(l){var d=this._hoveredLayer;d&&(hn(this._container,"leaflet-interactive"),this._fireEvent([d],l,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(l,d){if(!this._mouseHoverThrottled){for(var g,b,T=this._drawFirst;T;T=T.next)g=T.layer,g.options.interactive&&g._containsPoint(d)&&(b=g);b!==this._hoveredLayer&&(this._handleMouseOut(l),b&&(gt(this._container,"leaflet-interactive"),this._fireEvent([b],l,"mouseover"),this._hoveredLayer=b)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,l),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(l,d,g){this._map._fireDOMEvent(d,g||d.type,l)},_bringToFront:function(l){var d=l._order;if(d){var g=d.next,b=d.prev;if(g)g.prev=b;else return;b?b.next=g:g&&(this._drawFirst=g),d.prev=this._drawLast,this._drawLast.next=d,d.next=null,this._drawLast=d,this._requestRedraw(l)}},_bringToBack:function(l){var d=l._order;if(d){var g=d.next,b=d.prev;if(b)b.next=g;else return;g?g.prev=b:b&&(this._drawLast=b),d.prev=null,d.next=this._drawFirst,this._drawFirst.prev=d,this._drawFirst=d,this._requestRedraw(l)}}});function mS(l){return Je.canvas?new fS(l):null}var Vh=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(l){return document.createElement("<lvml:"+l+' class="lvml">')}}catch{}return function(l){return document.createElement("<"+l+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),n6={_initContainer:function(){this._container=Et("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Pa.prototype._update.call(this),this.fire("update"))},_initPath:function(l){var d=l._container=Vh("shape");gt(d,"leaflet-vml-shape "+(this.options.className||"")),d.coordsize="1 1",l._path=Vh("path"),d.appendChild(l._path),this._updateStyle(l),this._layers[u(l)]=l},_addPath:function(l){var d=l._container;this._container.appendChild(d),l.options.interactive&&l.addInteractiveTarget(d)},_removePath:function(l){var d=l._container;tn(d),l.removeInteractiveTarget(d),delete this._layers[u(l)]},_updateStyle:function(l){var d=l._stroke,g=l._fill,b=l.options,T=l._container;T.stroked=!!b.stroke,T.filled=!!b.fill,b.stroke?(d||(d=l._stroke=Vh("stroke")),T.appendChild(d),d.weight=b.weight+"px",d.color=b.color,d.opacity=b.opacity,b.dashArray?d.dashStyle=E(b.dashArray)?b.dashArray.join(" "):b.dashArray.replace(/( *, *)/g," "):d.dashStyle="",d.endcap=b.lineCap.replace("butt","flat"),d.joinstyle=b.lineJoin):d&&(T.removeChild(d),l._stroke=null),b.fill?(g||(g=l._fill=Vh("fill")),T.appendChild(g),g.color=b.fillColor||b.color,g.opacity=b.fillOpacity):g&&(T.removeChild(g),l._fill=null)},_updateCircle:function(l){var d=l._point.round(),g=Math.round(l._radius),b=Math.round(l._radiusY||g);this._setPath(l,l._empty()?"M0 0":"AL "+d.x+","+d.y+" "+g+","+b+" 0,"+65535*360)},_setPath:function(l,d){l._path.v=d},_bringToFront:function(l){ja(l._container)},_bringToBack:function(l){xo(l._container)}},Up=Je.vml?Vh:wt,zh=Pa.extend({_initContainer:function(){this._container=Up("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Up("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){tn(this._container),Zt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Pa.prototype._update.call(this);var l=this._bounds,d=l.getSize(),g=this._container;(!this._svgSize||!this._svgSize.equals(d))&&(this._svgSize=d,g.setAttribute("width",d.x),g.setAttribute("height",d.y)),ct(g,l.min),g.setAttribute("viewBox",[l.min.x,l.min.y,d.x,d.y].join(" ")),this.fire("update")}},_initPath:function(l){var d=l._path=Up("path");l.options.className&&gt(d,l.options.className),l.options.interactive&&gt(d,"leaflet-interactive"),this._updateStyle(l),this._layers[u(l)]=l},_addPath:function(l){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(l._path),l.addInteractiveTarget(l._path)},_removePath:function(l){tn(l._path),l.removeInteractiveTarget(l._path),delete this._layers[u(l)]},_updatePath:function(l){l._project(),l._update()},_updateStyle:function(l){var d=l._path,g=l.options;d&&(g.stroke?(d.setAttribute("stroke",g.color),d.setAttribute("stroke-opacity",g.opacity),d.setAttribute("stroke-width",g.weight),d.setAttribute("stroke-linecap",g.lineCap),d.setAttribute("stroke-linejoin",g.lineJoin),g.dashArray?d.setAttribute("stroke-dasharray",g.dashArray):d.removeAttribute("stroke-dasharray"),g.dashOffset?d.setAttribute("stroke-dashoffset",g.dashOffset):d.removeAttribute("stroke-dashoffset")):d.setAttribute("stroke","none"),g.fill?(d.setAttribute("fill",g.fillColor||g.color),d.setAttribute("fill-opacity",g.fillOpacity),d.setAttribute("fill-rule",g.fillRule||"evenodd")):d.setAttribute("fill","none"))},_updatePoly:function(l,d){this._setPath(l,de(l._parts,d))},_updateCircle:function(l){var d=l._point,g=Math.max(Math.round(l._radius),1),b=Math.max(Math.round(l._radiusY),1)||g,T="a"+g+","+b+" 0 1,0 ",z=l._empty()?"M0 0":"M"+(d.x-g)+","+d.y+T+g*2+",0 "+T+-g*2+",0 ";this._setPath(l,z)},_setPath:function(l,d){l._path.setAttribute("d",d)},_bringToFront:function(l){ja(l._path)},_bringToBack:function(l){xo(l._path)}});Je.vml&&zh.include(n6);function pS(l){return Je.svg||Je.vml?new zh(l):null}Nt.include({getRenderer:function(l){var d=l.options.renderer||this._getPaneRenderer(l.options.pane)||this.options.renderer||this._renderer;return d||(d=this._renderer=this._createRenderer()),this.hasLayer(d)||this.addLayer(d),d},_getPaneRenderer:function(l){if(l==="overlayPane"||l===void 0)return!1;var d=this._paneRenderers[l];return d===void 0&&(d=this._createRenderer({pane:l}),this._paneRenderers[l]=d),d},_createRenderer:function(l){return this.options.preferCanvas&&mS(l)||pS(l)}});var gS=yu.extend({initialize:function(l,d){yu.prototype.initialize.call(this,this._boundsToLatLngs(l),d)},setBounds:function(l){return this.setLatLngs(this._boundsToLatLngs(l))},_boundsToLatLngs:function(l){return l=Ue(l),[l.getSouthWest(),l.getNorthWest(),l.getNorthEast(),l.getSouthEast()]}});function r6(l,d){return new gS(l,d)}zh.create=Up,zh.pointsToPath=de,Ta.geometryToLayer=Mp,Ta.coordsToLatLng=t_,Ta.coordsToLatLngs=Dp,Ta.latLngToCoords=n_,Ta.latLngsToCoords=Op,Ta.getFeature=_u,Ta.asFeature=Lp,Nt.mergeOptions({boxZoom:!0});var vS=gs.extend({initialize:function(l){this._map=l,this._container=l._container,this._pane=l._panes.overlayPane,this._resetStateTimeout=0,l.on("unload",this._destroy,this)},addHooks:function(){rt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Zt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){tn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(l){if(!l.shiftKey||l.which!==1&&l.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ii(),jh(),this._startPoint=this._map.mouseEventToContainerPoint(l),rt(document,{contextmenu:ps,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(l){this._moved||(this._moved=!0,this._box=Et("div","leaflet-zoom-box",this._container),gt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(l);var d=new Q(this._point,this._startPoint),g=d.getSize();ct(this._box,d.min),this._box.style.width=g.x+"px",this._box.style.height=g.y+"px"},_finish:function(){this._moved&&(tn(this._box),hn(this._container,"leaflet-crosshair")),ai(),Nh(),Zt(document,{contextmenu:ps,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(l){if(!(l.which!==1&&l.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var d=new ye(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(d).fire("boxzoomend",{boxZoomBounds:d})}},_onKeyDown:function(l){l.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Nt.addInitHook("addHandler","boxZoom",vS),Nt.mergeOptions({doubleClickZoom:!0});var xS=gs.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(l){var d=this._map,g=d.getZoom(),b=d.options.zoomDelta,T=l.originalEvent.shiftKey?g-b:g+b;d.options.doubleClickZoom==="center"?d.setZoom(T):d.setZoomAround(l.containerPoint,T)}});Nt.addInitHook("addHandler","doubleClickZoom",xS),Nt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var yS=gs.extend({addHooks:function(){if(!this._draggable){var l=this._map;this._draggable=new oi(l._mapPane,l._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),l.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),l.on("zoomend",this._onZoomEnd,this),l.whenReady(this._onZoomEnd,this))}gt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){hn(this._map._container,"leaflet-grab"),hn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var l=this._map;if(l._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var d=Ue(this._map.options.maxBounds);this._offsetLimit=he(this._map.latLngToContainerPoint(d.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(d.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;l.fire("movestart").fire("dragstart"),l.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(l){if(this._map.options.inertia){var d=this._lastTime=+new Date,g=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(g),this._times.push(d),this._prunePositions(d)}this._map.fire("move",l).fire("drag",l)},_prunePositions:function(l){for(;this._positions.length>1&&l-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var l=this._map.getSize().divideBy(2),d=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=d.subtract(l).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(l,d){return l-(l-d)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var l=this._draggable._newPos.subtract(this._draggable._startPos),d=this._offsetLimit;l.x<d.min.x&&(l.x=this._viscousLimit(l.x,d.min.x)),l.y<d.min.y&&(l.y=this._viscousLimit(l.y,d.min.y)),l.x>d.max.x&&(l.x=this._viscousLimit(l.x,d.max.x)),l.y>d.max.y&&(l.y=this._viscousLimit(l.y,d.max.y)),this._draggable._newPos=this._draggable._startPos.add(l)}},_onPreDragWrap:function(){var l=this._worldWidth,d=Math.round(l/2),g=this._initialWorldOffset,b=this._draggable._newPos.x,T=(b-d+g)%l+d-g,z=(b+d+g)%l-d-g,K=Math.abs(T+g)<Math.abs(z+g)?T:z;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=K},_onDragEnd:function(l){var d=this._map,g=d.options,b=!g.inertia||l.noInertia||this._times.length<2;if(d.fire("dragend",l),b)d.fire("moveend");else{this._prunePositions(+new Date);var T=this._lastPos.subtract(this._positions[0]),z=(this._lastTime-this._times[0])/1e3,K=g.easeLinearity,ne=T.multiplyBy(K/z),se=ne.distanceTo([0,0]),pe=Math.min(g.inertiaMaxSpeed,se),Oe=ne.multiplyBy(pe/se),st=pe/(g.inertiaDeceleration*K),bt=Oe.multiplyBy(-st/2).round();!bt.x&&!bt.y?d.fire("moveend"):(bt=d._limitOffset(bt,d.options.maxBounds),M(function(){d.panBy(bt,{duration:st,easeLinearity:K,noMoveStart:!0,animate:!0})}))}}});Nt.addInitHook("addHandler","dragging",yS),Nt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var _S=gs.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(l){this._map=l,this._setPanDelta(l.options.keyboardPanDelta),this._setZoomDelta(l.options.zoomDelta)},addHooks:function(){var l=this._map._container;l.tabIndex<=0&&(l.tabIndex="0"),rt(l,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Zt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var l=document.body,d=document.documentElement,g=l.scrollTop||d.scrollTop,b=l.scrollLeft||d.scrollLeft;this._map._container.focus(),window.scrollTo(b,g)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(l){var d=this._panKeys={},g=this.keyCodes,b,T;for(b=0,T=g.left.length;b<T;b++)d[g.left[b]]=[-1*l,0];for(b=0,T=g.right.length;b<T;b++)d[g.right[b]]=[l,0];for(b=0,T=g.down.length;b<T;b++)d[g.down[b]]=[0,l];for(b=0,T=g.up.length;b<T;b++)d[g.up[b]]=[0,-1*l]},_setZoomDelta:function(l){var d=this._zoomKeys={},g=this.keyCodes,b,T;for(b=0,T=g.zoomIn.length;b<T;b++)d[g.zoomIn[b]]=l;for(b=0,T=g.zoomOut.length;b<T;b++)d[g.zoomOut[b]]=-l},_addHooks:function(){rt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Zt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(l){if(!(l.altKey||l.ctrlKey||l.metaKey)){var d=l.keyCode,g=this._map,b;if(d in this._panKeys){if(!g._panAnim||!g._panAnim._inProgress)if(b=this._panKeys[d],l.shiftKey&&(b=H(b).multiplyBy(3)),g.options.maxBounds&&(b=g._limitOffset(H(b),g.options.maxBounds)),g.options.worldCopyJump){var T=g.wrapLatLng(g.unproject(g.project(g.getCenter()).add(b)));g.panTo(T)}else g.panBy(b)}else if(d in this._zoomKeys)g.setZoom(g.getZoom()+(l.shiftKey?3:1)*this._zoomKeys[d]);else if(d===27&&g._popup&&g._popup.options.closeOnEscapeKey)g.closePopup();else return;ps(l)}}});Nt.addInitHook("addHandler","keyboard",_S),Nt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var wS=gs.extend({addHooks:function(){rt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Zt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(l){var d=Sp(l),g=this._map.options.wheelDebounceTime;this._delta+=d,this._lastMousePos=this._map.mouseEventToContainerPoint(l),this._startTime||(this._startTime=+new Date);var b=Math.max(g-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),b),ps(l)},_performZoom:function(){var l=this._map,d=l.getZoom(),g=this._map.options.zoomSnap||0;l._stop();var b=this._delta/(this._map.options.wheelPxPerZoomLevel*4),T=4*Math.log(2/(1+Math.exp(-Math.abs(b))))/Math.LN2,z=g?Math.ceil(T/g)*g:T,K=l._limitZoom(d+(this._delta>0?z:-z))-d;this._delta=0,this._startTime=null,K&&(l.options.scrollWheelZoom==="center"?l.setZoom(d+K):l.setZoomAround(this._lastMousePos,d+K))}});Nt.addInitHook("addHandler","scrollWheelZoom",wS);var s6=600;Nt.mergeOptions({tapHold:Je.touchNative&&Je.safari&&Je.mobile,tapTolerance:15});var bS=gs.extend({addHooks:function(){rt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Zt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(l){if(clearTimeout(this._holdTimeout),l.touches.length===1){var d=l.touches[0];this._startPos=this._newPos=new U(d.clientX,d.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(rt(document,"touchend",_n),rt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",d))},this),s6),rt(document,"touchend touchcancel contextmenu",this._cancel,this),rt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function l(){Zt(document,"touchend",_n),Zt(document,"touchend touchcancel",l)},_cancel:function(){clearTimeout(this._holdTimeout),Zt(document,"touchend touchcancel contextmenu",this._cancel,this),Zt(document,"touchmove",this._onMove,this)},_onMove:function(l){var d=l.touches[0];this._newPos=new U(d.clientX,d.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(l,d){var g=new MouseEvent(l,{bubbles:!0,cancelable:!0,view:window,screenX:d.screenX,screenY:d.screenY,clientX:d.clientX,clientY:d.clientY});g._simulated=!0,d.target.dispatchEvent(g)}});Nt.addInitHook("addHandler","tapHold",bS),Nt.mergeOptions({touchZoom:Je.touch,bounceAtZoomLimits:!0});var jS=gs.extend({addHooks:function(){gt(this._map._container,"leaflet-touch-zoom"),rt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){hn(this._map._container,"leaflet-touch-zoom"),Zt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(l){var d=this._map;if(!(!l.touches||l.touches.length!==2||d._animatingZoom||this._zooming)){var g=d.mouseEventToContainerPoint(l.touches[0]),b=d.mouseEventToContainerPoint(l.touches[1]);this._centerPoint=d.getSize()._divideBy(2),this._startLatLng=d.containerPointToLatLng(this._centerPoint),d.options.touchZoom!=="center"&&(this._pinchStartLatLng=d.containerPointToLatLng(g.add(b)._divideBy(2))),this._startDist=g.distanceTo(b),this._startZoom=d.getZoom(),this._moved=!1,this._zooming=!0,d._stop(),rt(document,"touchmove",this._onTouchMove,this),rt(document,"touchend touchcancel",this._onTouchEnd,this),_n(l)}},_onTouchMove:function(l){if(!(!l.touches||l.touches.length!==2||!this._zooming)){var d=this._map,g=d.mouseEventToContainerPoint(l.touches[0]),b=d.mouseEventToContainerPoint(l.touches[1]),T=g.distanceTo(b)/this._startDist;if(this._zoom=d.getScaleZoom(T,this._startZoom),!d.options.bounceAtZoomLimits&&(this._zoom<d.getMinZoom()&&T<1||this._zoom>d.getMaxZoom()&&T>1)&&(this._zoom=d._limitZoom(this._zoom)),d.options.touchZoom==="center"){if(this._center=this._startLatLng,T===1)return}else{var z=g._add(b)._divideBy(2)._subtract(this._centerPoint);if(T===1&&z.x===0&&z.y===0)return;this._center=d.unproject(d.project(this._pinchStartLatLng,this._zoom).subtract(z),this._zoom)}this._moved||(d._moveStart(!0,!1),this._moved=!0),O(this._animRequest);var K=o(d._move,d,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=M(K,this,!0),_n(l)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,O(this._animRequest),Zt(document,"touchmove",this._onTouchMove,this),Zt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Nt.addInitHook("addHandler","touchZoom",jS),Nt.BoxZoom=vS,Nt.DoubleClickZoom=xS,Nt.Drag=yS,Nt.Keyboard=_S,Nt.ScrollWheelZoom=wS,Nt.TapHold=bS,Nt.TouchZoom=jS,n.Bounds=Q,n.Browser=Je,n.CRS=ce,n.Canvas=fS,n.Circle=e_,n.CircleMarker=Rp,n.Class=W,n.Control=Jr,n.DivIcon=uS,n.DivOverlay=Li,n.DomEvent=Ep,n.DomUtil=jp,n.Draggable=oi,n.Evented=Z,n.FeatureGroup=Rn,n.GeoJSON=Ta,n.GridLayer=Fh,n.Handler=gs,n.Icon=Oi,n.ImageOverlay=Fp,n.LatLng=He,n.LatLngBounds=ye,n.Layer=Yt,n.LayerGroup=wn,n.LineUtil=$,n.Map=Nt,n.Marker=Ap,n.Mixin=Wl,n.Path=No,n.Point=U,n.PolyUtil=gu,n.Polygon=yu,n.Polyline=ka,n.Popup=Vp,n.PosAnimation=Ih,n.Projection=Ne,n.Rectangle=gS,n.Renderer=Pa,n.SVG=zh,n.SVGOverlay=cS,n.TileLayer=wu,n.Tooltip=zp,n.Transformation=Ce,n.Util=P,n.VideoOverlay=lS,n.bind=o,n.bounds=he,n.canvas=mS,n.circle=W5,n.circleMarker=B5,n.control=Fr,n.divIcon=J5,n.extend=i,n.featureGroup=xu,n.geoJSON=oS,n.geoJson=G5,n.gridLayer=e6,n.icon=U5,n.imageOverlay=K5,n.latLng=re,n.latLngBounds=Ue,n.layerGroup=jo,n.map=uu,n.marker=$5,n.point=H,n.polygon=H5,n.polyline=q5,n.popup=Q5,n.rectangle=r6,n.setOptions=j,n.stamp=u,n.svg=pS,n.svgOverlay=Y5,n.tileLayer=dS,n.tooltip=X5,n.transformation=Re,n.version=r,n.videoOverlay=Z5;var i6=window.L;n.noConflict=function(){return window.L=i6,this},window.L=n})})(f1,f1.exports);var Uy=f1.exports;const uh=Sm(Uy);function GL(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function KL(t,e){return e==null?function(r,i){const a=x.useRef();return a.current||(a.current=t(r,i)),a}:function(r,i){const a=x.useRef();a.current||(a.current=t(r,i));const o=x.useRef(r),{instance:c}=a.current;return x.useEffect(function(){o.current!==r&&(e(c,r,o.current),o.current=r)},[c,r,i]),a}}function nie(t,e){x.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var a;(a=e.layerContainer)==null||a.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function ZL(t){return function(n){const r=qL(),i=t(HL(n,r),r);return Zse(r.map,n.attribution),tie(i.current,n.eventHandlers),nie(i.current,r),i}}function rie(t,e){const n=KL(t,e),r=ZL(n);return Jse(r)}function sie(t,e){const n=KL(t,e),r=ZL(n);return eie(r)}function iie(t,e,n){const{opacity:r,zIndex:i}=e;r!=null&&r!==n.opacity&&t.setOpacity(r),i!=null&&i!==n.zIndex&&t.setZIndex(i)}function aie(){return qL().map}function CN(t){const e=aie();return x.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}function m1(){return m1=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},m1.apply(this,arguments)}function oie({bounds:t,boundsOptions:e,center:n,children:r,className:i,id:a,placeholder:o,style:c,whenReady:u,zoom:h,...f},p){const[v]=x.useState({className:i,id:a,style:c}),[_,N]=x.useState(null);x.useImperativeHandle(p,()=>(_==null?void 0:_.map)??null,[_]);const j=x.useCallback(w=>{if(w!==null&&_===null){const y=new Uy.Map(w,f);n!=null&&h!=null?y.setView(n,h):t!=null&&y.fitBounds(t,e),u!=null&&y.whenReady(u),N(Qse(y))}},[]);x.useEffect(()=>()=>{_==null||_.map.remove()},[_]);const S=_?Pe.createElement(WL,{value:_},r):o??null;return Pe.createElement("div",m1({},v,{ref:j}),S)}const kN=x.forwardRef(oie),TN=rie(function({position:e,...n},r){const i=new Uy.Marker(e,n);return GL(i,Xse(r,{overlayContainer:i}))},function(e,n,r){n.position!==r.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),PN=sie(function({url:e,...n},r){const i=new Uy.TileLayer(e,HL(n,r));return GL(i,r)},function(e,n,r){iie(e,n,r);const{url:i}=n;i!=null&&i!==r.url&&e.setUrl(i)});delete uh.Icon.Default.prototype._getIconUrl;uh.Icon.Default.mergeOptions({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"});const lie=({open:t,onOpenChange:e,listing:n})=>{var M;const{currentUser:r,userProfile:i}=yn(),{createPaymentRequest:a,loading:o}=Vy(),[c,u]=x.useState("method"),[h,f]=x.useState(null),[p,v]=x.useState({}),[_,N]=x.useState({location:"",date:void 0,time:"",notes:""}),[j,S]=x.useState(!1),[w,y]=x.useState(null),E=(O,P)=>{f(O),v(P),u("details")},I=async()=>{if(!(!r||!h))try{const O=_.date&&_.time?new Date(`${sr(_.date,"yyyy-MM-dd")} ${_.time}`):void 0;await a({listingId:n.id,buyerId:r.uid,sellerId:n.sellerId,amount:n.price,currency:n.currency||"EUR",paymentMethod:h,meetingLocation:_.location,meetingDateTime:O,paymentDetails:p,notes:_.notes}),e(!1),D()}catch(O){console.error("Erreur lors de la création de la demande:",O)}},D=()=>{u("method"),f(null),v({}),N({location:"",date:void 0,time:"",notes:""})},B=(O,P)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:P||"EUR"}).format(O),R=O=>({cash:"Espèces",transfer:"Virement bancaire",paypal:"PayPal",lydia:"Lydia"})[O]||O;async function F(O,P){return(await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${O}&lon=${P}`)).json()).display_name||""}function V(){return CN({click:async O=>{y([O.latlng.lat,O.latlng.lng]),S(!0);const P=await F(O.latlng.lat,O.latlng.lng);N(W=>({...W,location:P})),S(!1),fe.success("Adresse détectée automatiquement !")}}),w?s.jsx(TN,{position:w}):null}const k=()=>{if(!navigator.geolocation){fe.error("La géolocalisation n'est pas supportée par ce navigateur.");return}S(!0),navigator.geolocation.getCurrentPosition(async O=>{const{latitude:P,longitude:W}=O.coords;y([P,W]);const X=await F(P,W);X&&N(ee=>({...ee,location:X})),S(!1)},()=>{fe.error("Impossible d'accéder à la position."),S(!1)})};return s.jsx(aa,{open:t,onOpenChange:e,children:s.jsxs(wi,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(oa,{children:[s.jsxs(bi,{className:"flex items-center gap-2",children:[s.jsx(Ln,{className:"w-5 h-5"}),"Demande de paiement"]}),s.jsxs(pc,{children:['Créez une demande de paiement sécurisée pour "',n.title,'"']})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[s.jsxs("div",{className:`flex items-center ${c==="method"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${c==="method"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"1"}),s.jsx("span",{className:"ml-2 text-sm font-medium",children:"Mode de paiement"})]}),s.jsx("div",{className:"w-8 h-px bg-muted-foreground"}),s.jsxs("div",{className:`flex items-center ${c==="details"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${c==="details"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"2"}),s.jsx("span",{className:"ml-2 text-sm font-medium",children:"Détails"})]}),s.jsx("div",{className:"w-8 h-px bg-muted-foreground"}),s.jsxs("div",{className:`flex items-center ${c==="confirmation"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${c==="confirmation"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"3"}),s.jsx("span",{className:"ml-2 text-sm font-medium",children:"Confirmation"})]})]}),s.jsx("div",{className:"p-4 bg-muted/50 rounded-lg",children:s.jsxs("div",{className:"flex items-center gap-4",children:[((M=n.images)==null?void 0:M[0])&&s.jsx("img",{src:n.images[0],alt:n.title,className:"w-16 h-16 object-cover rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold",children:n.title}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Vendeur : ",n.sellerName," • ",n.sellerUniversity]}),s.jsx("p",{className:"text-lg font-bold text-primary",children:B(n.price,n.currency||"EUR")})]})]})}),c==="method"&&s.jsx($L,{amount:n.price,currency:n.currency||"EUR",onMethodSelect:E,selectedMethod:h}),c==="details"&&h&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(Ct,{className:"w-5 h-5 text-green-600"}),s.jsxs("span",{className:"font-medium",children:["Mode de paiement sélectionné : ",R(h)]})]}),h==="cash"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[s.jsx(Ar,{className:"w-5 h-5"}),"Détails de la rencontre"]}),s.jsxs("div",{children:[s.jsx(be,{htmlFor:"meeting-location",children:"Lieu de rencontre *"}),s.jsxs("div",{className:"flex gap-2 mt-1",children:[s.jsx(We,{id:"meeting-location",placeholder:"Ex: Bibliothèque universitaire, Hall principal...",value:_.location,onChange:O=>N(P=>({...P,location:O.target.value})),className:"flex-1"}),s.jsx(Y,{type:"button",variant:"outline",onClick:k,disabled:j,title:"Détecter ma position",children:j?s.jsx("span",{className:"animate-spin",children:"📍"}):s.jsx("span",{children:"📍"})})]})]}),s.jsx("div",{className:"mt-3",children:s.jsxs(kN,{center:w||[48.8584,2.2945],zoom:15,style:{height:200,width:"100%"},children:[s.jsx(PN,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"© OpenStreetMap contributors"}),s.jsx(V,{})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(be,{children:"Date de rencontre"}),s.jsxs(vse,{children:[s.jsx(xse,{asChild:!0,children:s.jsxs(Y,{variant:"outline",className:"w-full justify-start text-left font-normal mt-1",children:[s.jsx(Hs,{className:"mr-2 h-4 w-4"}),_.date?sr(_.date,"PPP",{locale:Mr}):s.jsx("span",{children:"Choisir une date"})]})}),s.jsx(CL,{className:"w-auto p-0",children:s.jsx(pL,{mode:"single",selected:_.date,onSelect:O=>N(P=>({...P,date:O})),disabled:O=>O<new Date,initialFocus:!0})})]})]}),s.jsxs("div",{children:[s.jsx(be,{htmlFor:"meeting-time",children:"Heure de rencontre"}),s.jsx(We,{id:"meeting-time",type:"time",value:_.time,onChange:O=>N(P=>({...P,time:O.target.value})),className:"mt-1"})]})]})]}),s.jsxs("div",{children:[s.jsx(be,{htmlFor:"payment-notes",children:"Notes additionnelles (optionnel)"}),s.jsx(Qs,{id:"payment-notes",placeholder:"Informations complémentaires pour le vendeur...",value:_.notes,onChange:O=>N(P=>({...P,notes:O.target.value})),rows:3,className:"mt-1"})]}),s.jsxs(Ut,{className:"border-blue-200 bg-blue-50",children:[s.jsx(Vt,{className:"h-4 w-4 text-blue-600"}),s.jsxs($t,{className:"text-blue-800",children:[s.jsx("strong",{children:"Sécurité :"})," Un code de sécurité unique sera généré pour cette transaction. Partagez-le uniquement avec le vendeur lors de la finalisation du paiement."]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(Y,{variant:"outline",onClick:()=>u("method"),className:"flex-1",children:"Retour"}),s.jsx(Y,{onClick:()=>u("confirmation"),className:"flex-1",disabled:h==="cash"&&!_.location,children:"Continuer"})]})]}),c==="confirmation"&&h&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Récapitulatif de la demande"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Mode de paiement :"}),s.jsx("p",{className:"font-medium",children:R(h)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Montant :"}),s.jsx("p",{className:"font-medium",children:B(n.price,n.currency||"EUR")})]}),h==="cash"&&_.location&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Lieu de rencontre :"}),s.jsx("p",{className:"font-medium",children:_.location})]}),_.date&&_.time&&s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Date et heure :"}),s.jsxs("p",{className:"font-medium",children:[sr(_.date,"PPP",{locale:Mr})," à ",_.time]})]})]})]}),_.notes&&s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground text-sm",children:"Notes :"}),s.jsx("p",{className:"text-sm bg-muted/50 p-2 rounded",children:_.notes})]})]}),s.jsxs(Ut,{children:[s.jsx(vl,{className:"h-4 w-4"}),s.jsx($t,{children:"En créant cette demande, vous vous engagez à effectuer le paiement selon les modalités convenues. Le vendeur recevra une notification et pourra accepter ou refuser votre demande."})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(Y,{variant:"outline",onClick:()=>u("details"),className:"flex-1",children:"Retour"}),s.jsx(Y,{onClick:I,className:"flex-1",disabled:o,children:o?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Création..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ct,{className:"w-4 h-4 mr-2"}),"Créer la demande"]})})]})]})]})]})})},cie=({listing:t,className:e})=>{const{currentUser:n,userProfile:r}=yn(),{createConversation:i,setCurrentConversation:a,conversations:o}=Py(),c=ar(),[u,h]=x.useState(!1),[f,p]=x.useState(!1),[v,_]=x.useState(""),[N,j]=x.useState(""),[S,w]=x.useState(!1);if((n==null?void 0:n.uid)===t.sellerId)return null;const y=o.find(R=>R.listingId===t.id&&R.participants.includes((n==null?void 0:n.uid)||"")&&R.participants.includes(t.sellerId)),E=()=>{if(!n){c("/auth");return}if(y){a(y),c("/messages");return}const R=`Bonjour ${t.sellerName},

Je suis intéressé(e) par votre annonce "${t.title}".

Pourriez-vous me donner plus d'informations ? Je suis disponible pour un rendez-vous si nécessaire.

Cordialement,
${(r==null?void 0:r.displayName)||"Un étudiant intéressé"}`;_(R),j((r==null?void 0:r.email)||""),h(!0)},I=()=>{if(!n){c("/auth");return}p(!0)},D=async()=>{var R;if(!v.trim()||!N.trim()||!n||!r){fe.error("Veuillez remplir tous les champs");return}w(!0);try{const F=await i(t.id,t.title,t.price,(R=t.images)==null?void 0:R[0],n.uid,t.sellerId,{displayName:r.displayName,photoURL:r.photoURL,university:r.university,isVerified:r.isVerified,email:r.email},{sellerName:t.sellerName,sellerAvatar:t.sellerAvatar,sellerUniversity:t.sellerUniversity,sellerVerified:t.sellerVerified,email:t.sellerEmail||null},v.trim());h(!1),fe.success(s.jsxs("div",{className:"flex items-center justify-between w-full",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Message envoyé !"}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["📧 ",t.sellerName," recevra une notification email"]})]}),s.jsxs(Y,{size:"sm",variant:"ghost",onClick:()=>{fe.dismiss(),c("/messages")},className:"ml-2 text-xs",children:["Voir la conversation",s.jsx(mm,{className:"w-3 h-3 ml-1"})]})]}),{duration:6e3,style:{minWidth:"350px"}}),setTimeout(()=>{c("/messages")},2e3)}catch(F){console.error("Erreur lors de l'envoi du message:",F),fe.error("Erreur lors de l'envoi du message")}finally{w(!1)}},B=(R,F)=>{if(t.transactionType==="donation")return"Gratuit";if(t.transactionType==="exchange")return"Échange";const V=F||"EUR";try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:V}).format(R)}catch{return`${R} €`}};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Y,{onClick:E,className:`flex-1 bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 ${e}`,children:[s.jsx(xn,{className:"w-4 h-4 mr-2"}),y?"Continuer la conversation":"Contacter le vendeur"]}),t.transactionType==="sale"&&t.price>0&&s.jsxs(Y,{onClick:I,variant:"outline",className:"flex items-center gap-2",children:[s.jsx(Ln,{className:"w-4 h-4"}),"Payer"]})]}),s.jsx(aa,{open:u,onOpenChange:h,children:s.jsxs(wi,{className:"max-w-md",children:[s.jsx(oa,{children:s.jsxs(bi,{className:"flex items-center gap-2",children:[s.jsx(xn,{className:"w-5 h-5"}),"Contacter le vendeur"]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsxs(so,{className:"w-8 h-8",children:[s.jsx(io,{src:t.sellerAvatar||void 0}),s.jsx(ao,{children:t.sellerName[0]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:t.sellerName}),s.jsx("p",{className:"text-xs text-muted-foreground",children:t.sellerUniversity})]})]}),s.jsx("p",{className:"text-sm font-medium",children:t.title}),s.jsx("p",{className:"text-sm text-primary font-semibold",children:B(t.price,t.currency)})]}),s.jsxs("div",{children:[s.jsx(be,{htmlFor:"contact-email",children:"Votre email"}),s.jsx(We,{id:"contact-email",type:"email",value:N,onChange:R=>j(R.target.value),placeholder:"votre.email@universite.fr",className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(be,{htmlFor:"contact-message",children:"Votre message"}),s.jsx(Qs,{id:"contact-message",value:v,onChange:R=>_(R.target.value),placeholder:"Décrivez votre intérêt pour cette annonce...",rows:6,className:"mt-1"})]}),s.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(vl,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsx("p",{className:"font-medium mb-1",children:"📧 Notification automatique"}),s.jsxs("p",{children:["Votre message sera envoyé via la messagerie StudyMarket ET ",t.sellerName," recevra une notification email pour répondre rapidement."]})]})]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Y,{variant:"outline",onClick:()=>h(!1),className:"flex-1",children:"Annuler"}),s.jsx(Y,{onClick:D,disabled:S||!v.trim()||!N.trim(),className:"flex-1",children:S?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Envoi..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Td,{className:"w-4 h-4 mr-2"}),"Envoyer + Notifier"]})})]})]})]})}),s.jsx(lie,{open:f,onOpenChange:p,listing:t})]})},uie=()=>{var y;const{id:t}=Eb(),e=ar(),{currentUser:n}=yn(),{currentListing:r,loading:i,fetchListingById:a}=ap(),{fetchUserFavorites:o}=OD(),[c,u]=x.useState(0);if(x.useEffect(()=>{t&&a(t)},[t,a]),x.useEffect(()=>{n&&o(n.uid)},[n,o]),i)return s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"animate-pulse space-y-6",children:[s.jsx("div",{className:"h-8 bg-muted rounded w-1/4"}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsx("div",{className:"aspect-square bg-muted rounded-lg"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"h-8 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-6 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-20 bg-muted rounded"})]})]})]})});if(!r)return s.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:s.jsxs("div",{className:"max-w-md mx-auto",children:[s.jsx(Pn,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),s.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Annonce introuvable"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Cette annonce n'existe pas ou a été supprimée."}),s.jsx(Y,{onClick:()=>e("/listings"),children:"Retour aux annonces"})]})});const h=r,f=(n==null?void 0:n.uid)===h.sellerId,p=(E,I)=>{if(h.transactionType==="donation")return"Gratuit";if(h.transactionType==="exchange")return"Échange";const D=I||"EUR";try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:D}).format(E)}catch{return`${E} €`}},v=E=>{switch(E){case"new":return"Neuf";case"like-new":return"Comme neuf";case"good":return"Bon état";case"fair":return"État correct";case"poor":return"Mauvais état";default:return E}},_=E=>{switch(E){case"new":return"bg-green-100 text-green-800 border-green-200";case"like-new":return"bg-blue-100 text-blue-800 border-blue-200";case"good":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"fair":return"bg-orange-100 text-orange-800 border-orange-200";case"poor":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},N=()=>{switch(h.transactionType){case"donation":return s.jsx(kd,{className:"w-4 h-4"});case"exchange":return s.jsx(to,{className:"w-4 h-4"});case"service":return s.jsx(eh,{className:"w-4 h-4"});default:return s.jsx(Kv,{className:"w-4 h-4"})}},j=()=>{switch(h.transactionType){case"donation":return"Don gratuit";case"exchange":return"Troc";case"service":return"Service";default:return"Vente"}},S=()=>{h.images&&h.images.length>1&&u(E=>E===h.images.length-1?0:E+1)},w=()=>{h.images&&h.images.length>1&&u(E=>E===0?h.images.length-1:E-1)};return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"border-b border-border bg-muted/30",children:s.jsx("div",{className:"container mx-auto px-4 py-4",children:s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(Te,{to:"/",className:"hover:text-foreground transition-colors",children:"Accueil"}),s.jsx("span",{children:"/"}),s.jsx(Te,{to:"/listings",className:"hover:text-foreground transition-colors",children:"Annonces"}),s.jsx("span",{children:"/"}),s.jsx("span",{className:"text-foreground",children:h.title})]})})}),s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs(Y,{variant:"ghost",onClick:()=>e(-1),className:"mb-6 -ml-4",children:[s.jsx(dc,{className:"w-4 h-4 mr-2"}),"Retour"]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"relative aspect-[4/3] rounded-lg overflow-hidden bg-muted",children:h.images&&h.images.length>0?s.jsxs(s.Fragment,{children:[s.jsx("img",{src:h.images[c],alt:h.title,className:"w-full h-full object-cover"}),h.images.length>1&&s.jsxs(s.Fragment,{children:[s.jsx("div",{onClick:w,className:"absolute left-4 top-1/2 transform -translate-y-1/2 cursor-pointer text-white hover:text-primary transition-colors bg-black/50 rounded-full p-2","aria-label":"Image précédente",children:s.jsx(oG,{className:"w-6 h-6"})}),s.jsx("div",{onClick:S,className:"absolute right-4 top-1/2 transform -translate-y-1/2 cursor-pointer text-white hover:text-primary transition-colors bg-black/50 rounded-full p-2","aria-label":"Image suivante",children:s.jsx(Ki,{className:"w-6 h-6"})}),s.jsxs("div",{className:"absolute bottom-4 right-4 bg-black/70 text-white px-3 py-1 rounded-full text-sm",children:[c+1," / ",h.images.length]})]}),s.jsxs(aa,{children:[s.jsx(cd,{asChild:!0,children:s.jsx("div",{className:"absolute top-4 right-4 cursor-pointer text-white hover:text-primary transition-colors bg-black/50 rounded-full p-2","aria-label":"Agrandir l'image",children:s.jsx(hc,{className:"w-5 h-5"})})}),s.jsxs(wi,{className:"max-w-4xl",children:[s.jsx(bi,{children:"Image en plein écran de l'annonce"}),s.jsx("img",{src:h.images[c],alt:h.title,className:"w-full h-auto max-h-[80vh] object-contain"})]})]})]}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-muted-foreground",children:[s.jsx(hc,{className:"w-16 h-16 mx-auto mb-4"}),s.jsx("p",{children:"Aucune image disponible"})]})})}),h.images&&h.images.length>1&&s.jsx("div",{className:"grid grid-cols-6 gap-2",children:h.images.map((E,I)=>s.jsx("button",{onClick:()=>u(I),className:`aspect-square rounded-lg overflow-hidden border-2 transition-all ${I===c?"border-primary":"border-transparent hover:border-muted-foreground"}`,children:s.jsx("img",{src:E,alt:`${h.title} ${I+1}`,className:"w-full h-full object-cover"})},I))})]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsx(ae,{children:s.jsx(oe,{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(et,{className:"bg-primary/10 text-primary border-primary/20",children:[N(),s.jsx("span",{className:"ml-1",children:j()})]}),h.sellerVerified&&s.jsxs(et,{className:"bg-green-100 text-green-800 border-green-200",children:[s.jsx(Vt,{className:"w-3 h-3 mr-1"}),"Vérifié"]})]}),s.jsxs("div",{className:"text-3xl font-bold text-primary",children:[p(h.price,h.currency),h.transactionType==="service"&&s.jsx("span",{className:"text-lg text-muted-foreground",children:"/h"})]}),h.transactionType==="exchange"&&h.exchangeFor&&s.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 text-purple-800",children:[s.jsx(to,{className:"w-4 h-4"}),s.jsx("span",{className:"font-medium",children:"Recherche en échange :"})]}),s.jsx("p",{className:"text-purple-700 mt-1",children:h.exchangeFor})]}),h.aiPriceEstimate&&h.transactionType==="sale"&&s.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 text-green-800",children:[s.jsx(Zm,{className:"w-4 h-4"}),s.jsx("span",{className:"font-medium",children:"Prix estimé par IA :"})]}),s.jsxs("p",{className:"text-green-700 text-sm",children:[h.aiPriceEstimate.min,"€ - ",h.aiPriceEstimate.max,"€",s.jsxs("span",{className:"ml-2 text-xs",children:["(Confiance: ",Math.round(h.aiPriceEstimate.confidence*100),"%)"]})]})]}),s.jsx("div",{className:"space-y-3",children:f?s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{to:`/edit-listing/${h.id}`,children:s.jsxs(Y,{variant:"outline",className:"w-full",children:[s.jsx(Zr,{className:"w-4 h-4 mr-2"}),"Modifier l'annonce"]})}),s.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"C'est votre annonce"})]}):s.jsxs(s.Fragment,{children:[s.jsx(cie,{listing:h,className:"w-full"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(LD,{listing:h,size:"lg",showText:!1}),s.jsx(FD,{listing:h,size:"lg",showText:!1})]}),s.jsx("div",{className:"cursor-pointer text-muted-foreground hover:text-destructive transition-colors","aria-label":"Signaler",children:s.jsx(ic,{className:"w-5 h-5"})})]})]})})]})})}),s.jsxs(ae,{children:[s.jsx(qe,{children:s.jsx(Ge,{className:"text-lg",children:"Vendeur"})}),s.jsx(oe,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(so,{className:"w-12 h-12",children:[s.jsx(io,{src:h.sellerAvatar||void 0}),s.jsx(ao,{children:(y=h.sellerName[0])==null?void 0:y.toUpperCase()})]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h3",{className:"font-semibold",children:h.sellerName}),h.sellerVerified&&s.jsx(Vt,{className:"w-4 h-4 text-green-600"})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:h.sellerUniversity})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-semibold",children:"4.8"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Note"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-semibold",children:"23"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Ventes"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-semibold",children:"98%"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Confiance"})]})]})]})})]}),h.environmentalImpact&&s.jsxs(ae,{children:[s.jsx(qe,{children:s.jsxs(Ge,{className:"text-lg flex items-center gap-2",children:[s.jsx(_i,{className:"w-5 h-5 text-green-600"}),"Impact écologique"]})}),s.jsx(oe,{children:s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-green-600 mb-1",children:["-",h.environmentalImpact.co2Saved," kg CO₂"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"économisés en achetant d'occasion"})]})})]})]})]}),s.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs(ae,{children:[s.jsx(qe,{children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-2xl font-bold mb-2",children:h.title}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Cd,{className:"w-4 h-4"}),s.jsxs("span",{children:[h.views," vues"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Vn,{className:"w-4 h-4"}),s.jsx("span",{children:lh(h.createdAt,{addSuffix:!0,locale:Mr})})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ar,{className:"w-4 h-4"}),s.jsx("span",{children:h.location.city})]})]})]}),s.jsx(et,{className:_(h.condition),children:v(h.condition)})]})}),s.jsx(oe,{children:s.jsx("div",{className:"prose prose-sm max-w-none",children:s.jsx("p",{className:"whitespace-pre-wrap",children:h.description})})})]}),h.tags&&h.tags.length>0&&s.jsxs(ae,{children:[s.jsx(qe,{children:s.jsx(Ge,{className:"text-lg",children:"Tags"})}),s.jsx(oe,{children:s.jsx("div",{className:"flex flex-wrap gap-2",children:h.tags.map((E,I)=>s.jsx(et,{variant:"secondary",children:E},I))})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ae,{children:[s.jsx(qe,{children:s.jsxs(Ge,{className:"text-lg flex items-center gap-2",children:[s.jsx(Ar,{className:"w-5 h-5"}),"Localisation"]})}),s.jsxs(oe,{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:h.location.city}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[h.location.state,", ",h.location.country]})]}),h.location.campus&&s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium",children:"Campus"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:h.location.campus})]}),h.location.university&&s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium",children:"Université"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:h.location.university})]})]})]}),s.jsxs(ae,{children:[s.jsx(qe,{children:s.jsxs(Ge,{className:"text-lg flex items-center gap-2",children:[s.jsx(Vt,{className:"w-5 h-5"}),"Conseils de sécurité"]})}),s.jsx(oe,{children:s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Ct,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:"Rencontrez-vous dans un lieu public"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Ct,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:"Vérifiez l'identité de l'autre personne"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Ct,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:"Testez l'objet avant la transaction"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(vl,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:"Utilisez la messagerie StudyMarket"})]})]})})]})]})]})]})]})};var dp=t=>t.type==="checkbox",ac=t=>t instanceof Date,Wr=t=>t==null;const YL=t=>typeof t=="object";var zn=t=>!Wr(t)&&!Array.isArray(t)&&YL(t)&&!ac(t),die=t=>zn(t)&&t.target?dp(t.target)?t.target.checked:t.target.value:t,hie=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,fie=(t,e)=>t.has(hie(e)),mie=t=>{const e=t.constructor&&t.constructor.prototype;return zn(e)&&e.hasOwnProperty("isPrototypeOf")},IN=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function kr(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(IN&&(t instanceof Blob||r))&&(n||zn(t)))if(e=n?[]:{},!n&&!mie(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=kr(t[i]));else return t;return e}var $y=t=>/^\w*$/.test(t),Hn=t=>t===void 0,AN=t=>Array.isArray(t)?t.filter(Boolean):[],RN=t=>AN(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Be=(t,e,n)=>{if(!e||!zn(t))return n;const r=($y(e)?[e]:RN(e)).reduce((i,a)=>Wr(i)?i:i[a],t);return Hn(r)||r===t?Hn(t[e])?n:t[e]:r},Ui=t=>typeof t=="boolean",Qt=(t,e,n)=>{let r=-1;const i=$y(e)?[e]:RN(e),a=i.length,o=a-1;for(;++r<a;){const c=i[r];let u=n;if(r!==o){const h=t[c];u=zn(h)||Array.isArray(h)?h:isNaN(+i[r+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;t[c]=u,t=t[c]}};const yk={BLUR:"blur",FOCUS_OUT:"focusout"},pi={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ma={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},pie=Pe.createContext(null);pie.displayName="HookFormContext";var gie=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const a in t)Object.defineProperty(i,a,{get:()=>{const o=a;return e._proxyFormState[o]!==pi.all&&(e._proxyFormState[o]=!r||pi.all),t[o]}});return i};const vie=typeof window<"u"?x.useLayoutEffect:x.useEffect;var Qi=t=>typeof t=="string",xie=(t,e,n,r,i)=>Qi(t)?(r&&e.watch.add(t),Be(n,t,i)):Array.isArray(t)?t.map(a=>(r&&e.watch.add(a),Be(n,a))):(r&&(e.watchAll=!0),n),QL=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},Df=t=>Array.isArray(t)?t:[t],_k=()=>{let t=[];return{get observers(){return t},next:i=>{for(const a of t)a.next&&a.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(a=>a!==i)}}),unsubscribe:()=>{t=[]}}},p1=t=>Wr(t)||!YL(t);function $o(t,e){if(p1(t)||p1(e))return t===e;if(ac(t)&&ac(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n){const a=t[i];if(!r.includes(i))return!1;if(i!=="ref"){const o=e[i];if(ac(a)&&ac(o)||zn(a)&&zn(o)||Array.isArray(a)&&Array.isArray(o)?!$o(a,o):a!==o)return!1}}return!0}var ts=t=>zn(t)&&!Object.keys(t).length,MN=t=>t.type==="file",gi=t=>typeof t=="function",cx=t=>{if(!IN)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},XL=t=>t.type==="select-multiple",DN=t=>t.type==="radio",yie=t=>DN(t)||dp(t),v0=t=>cx(t)&&t.isConnected;function _ie(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=Hn(t)?r++:t[e[r++]];return t}function wie(t){for(const e in t)if(t.hasOwnProperty(e)&&!Hn(t[e]))return!1;return!0}function Xn(t,e){const n=Array.isArray(e)?e:$y(e)?[e]:RN(e),r=n.length===1?t:_ie(t,n),i=n.length-1,a=n[i];return r&&delete r[a],i!==0&&(zn(r)&&ts(r)||Array.isArray(r)&&wie(r))&&Xn(t,n.slice(0,-1)),t}var JL=t=>{for(const e in t)if(gi(t[e]))return!0;return!1};function ux(t,e={}){const n=Array.isArray(t);if(zn(t)||n)for(const r in t)Array.isArray(t[r])||zn(t[r])&&!JL(t[r])?(e[r]=Array.isArray(t[r])?[]:{},ux(t[r],e[r])):Wr(t[r])||(e[r]=!0);return e}function e3(t,e,n){const r=Array.isArray(t);if(zn(t)||r)for(const i in t)Array.isArray(t[i])||zn(t[i])&&!JL(t[i])?Hn(e)||p1(n[i])?n[i]=Array.isArray(t[i])?ux(t[i],[]):{...ux(t[i])}:e3(t[i],Wr(e)?{}:e[i],n[i]):n[i]=!$o(t[i],e[i]);return n}var tf=(t,e)=>e3(t,e,ux(e));const wk={value:!1,isValid:!1},bk={value:!0,isValid:!0};var t3=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Hn(t[0].attributes.value)?Hn(t[0].value)||t[0].value===""?bk:{value:t[0].value,isValid:!0}:bk:wk}return wk},n3=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>Hn(t)?t:e?t===""?NaN:t&&+t:n&&Qi(t)?new Date(t):r?r(t):t;const jk={isValid:!1,value:null};var r3=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,jk):jk;function Nk(t){const e=t.ref;return MN(e)?e.files:DN(e)?r3(t.refs).value:XL(e)?[...e.selectedOptions].map(({value:n})=>n):dp(e)?t3(t.refs).value:n3(Hn(e.value)?t.ref.value:e.value,t)}var bie=(t,e,n,r)=>{const i={};for(const a of t){const o=Be(e,a);o&&Qt(i,a,o._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},dx=t=>t instanceof RegExp,nf=t=>Hn(t)?t:dx(t)?t.source:zn(t)?dx(t.value)?t.value.source:t.value:t,Sk=t=>({isOnSubmit:!t||t===pi.onSubmit,isOnBlur:t===pi.onBlur,isOnChange:t===pi.onChange,isOnAll:t===pi.all,isOnTouch:t===pi.onTouched});const Ek="AsyncFunction";var jie=t=>!!t&&!!t.validate&&!!(gi(t.validate)&&t.validate.constructor.name===Ek||zn(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===Ek)),Nie=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),Ck=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Of=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const a=Be(t,i);if(a){const{_f:o,...c}=a;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(Of(c,e))break}else if(zn(c)&&Of(c,e))break}}};function kk(t,e,n){const r=Be(t,n);if(r||$y(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const a=i.join("."),o=Be(e,a),c=Be(t,a);if(o&&!Array.isArray(o)&&n!==a)return{name:n};if(c&&c.type)return{name:a,error:c};if(c&&c.root&&c.root.type)return{name:`${a}.root`,error:c.root};i.pop()}return{name:n}}var Sie=(t,e,n,r)=>{n(t);const{name:i,...a}=t;return ts(a)||Object.keys(a).length>=Object.keys(e).length||Object.keys(a).find(o=>e[o]===(!r||pi.all))},Eie=(t,e,n)=>!t||!e||t===e||Df(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),Cie=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,kie=(t,e)=>!AN(Be(t,e)).length&&Xn(t,e),Tie=(t,e,n)=>{const r=Df(Be(t,n));return Qt(r,"root",e[n]),Qt(t,n,r),t},tv=t=>Qi(t);function Tk(t,e,n="validate"){if(tv(t)||Array.isArray(t)&&t.every(tv)||Ui(t)&&!t)return{type:n,message:tv(t)?t:"",ref:e}}var Tu=t=>zn(t)&&!dx(t)?t:{value:t,message:""},Pk=async(t,e,n,r,i,a)=>{const{ref:o,refs:c,required:u,maxLength:h,minLength:f,min:p,max:v,pattern:_,validate:N,name:j,valueAsNumber:S,mount:w}=t._f,y=Be(n,j);if(!w||e.has(j))return{};const E=c?c[0]:o,I=O=>{i&&E.reportValidity&&(E.setCustomValidity(Ui(O)?"":O||""),E.reportValidity())},D={},B=DN(o),R=dp(o),F=B||R,V=(S||MN(o))&&Hn(o.value)&&Hn(y)||cx(o)&&o.value===""||y===""||Array.isArray(y)&&!y.length,k=QL.bind(null,j,r,D),M=(O,P,W,X=Ma.maxLength,ee=Ma.minLength)=>{const Z=O?P:W;D[j]={type:O?X:ee,message:Z,ref:o,...k(O?X:ee,Z)}};if(a?!Array.isArray(y)||!y.length:u&&(!F&&(V||Wr(y))||Ui(y)&&!y||R&&!t3(c).isValid||B&&!r3(c).isValid)){const{value:O,message:P}=tv(u)?{value:!!u,message:u}:Tu(u);if(O&&(D[j]={type:Ma.required,message:P,ref:E,...k(Ma.required,P)},!r))return I(P),D}if(!V&&(!Wr(p)||!Wr(v))){let O,P;const W=Tu(v),X=Tu(p);if(!Wr(y)&&!isNaN(y)){const ee=o.valueAsNumber||y&&+y;Wr(W.value)||(O=ee>W.value),Wr(X.value)||(P=ee<X.value)}else{const ee=o.valueAsDate||new Date(y),Z=H=>new Date(new Date().toDateString()+" "+H),U=o.type=="time",q=o.type=="week";Qi(W.value)&&y&&(O=U?Z(y)>Z(W.value):q?y>W.value:ee>new Date(W.value)),Qi(X.value)&&y&&(P=U?Z(y)<Z(X.value):q?y<X.value:ee<new Date(X.value))}if((O||P)&&(M(!!O,W.message,X.message,Ma.max,Ma.min),!r))return I(D[j].message),D}if((h||f)&&!V&&(Qi(y)||a&&Array.isArray(y))){const O=Tu(h),P=Tu(f),W=!Wr(O.value)&&y.length>+O.value,X=!Wr(P.value)&&y.length<+P.value;if((W||X)&&(M(W,O.message,P.message),!r))return I(D[j].message),D}if(_&&!V&&Qi(y)){const{value:O,message:P}=Tu(_);if(dx(O)&&!y.match(O)&&(D[j]={type:Ma.pattern,message:P,ref:o,...k(Ma.pattern,P)},!r))return I(P),D}if(N){if(gi(N)){const O=await N(y,n),P=Tk(O,E);if(P&&(D[j]={...P,...k(Ma.validate,P.message)},!r))return I(P.message),D}else if(zn(N)){let O={};for(const P in N){if(!ts(O)&&!r)break;const W=Tk(await N[P](y,n),E,P);W&&(O={...W,...k(P,W.message)},I(W.message),r&&(D[j]=O))}if(!ts(O)&&(D[j]={ref:E,...O},!r))return D}}return I(!0),D};const Pie={mode:pi.onSubmit,reValidateMode:pi.onChange,shouldFocusError:!0};function Iie(t={}){let e={...Pie,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:gi(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const r={};let i=zn(e.defaultValues)||zn(e.values)?kr(e.defaultValues||e.values)||{}:{},a=e.shouldUnregister?{}:kr(i),o={action:!1,mount:!1,watch:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},u,h=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let p={...f};const v={array:_k(),state:_k()},_=e.criteriaMode===pi.all,N=G=>te=>{clearTimeout(h),h=setTimeout(G,te)},j=async G=>{if(!e.disabled&&(f.isValid||p.isValid||G)){const te=e.resolver?ts((await R()).errors):await V(r,!0);te!==n.isValid&&v.state.next({isValid:te})}},S=(G,te)=>{!e.disabled&&(f.isValidating||f.validatingFields||p.isValidating||p.validatingFields)&&((G||Array.from(c.mount)).forEach(le=>{le&&(te?Qt(n.validatingFields,le,te):Xn(n.validatingFields,le))}),v.state.next({validatingFields:n.validatingFields,isValidating:!ts(n.validatingFields)}))},w=(G,te=[],le,Ie,Se=!0,_e=!0)=>{if(Ie&&le&&!e.disabled){if(o.action=!0,_e&&Array.isArray(Be(r,G))){const Ae=le(Be(r,G),Ie.argA,Ie.argB);Se&&Qt(r,G,Ae)}if(_e&&Array.isArray(Be(n.errors,G))){const Ae=le(Be(n.errors,G),Ie.argA,Ie.argB);Se&&Qt(n.errors,G,Ae),kie(n.errors,G)}if((f.touchedFields||p.touchedFields)&&_e&&Array.isArray(Be(n.touchedFields,G))){const Ae=le(Be(n.touchedFields,G),Ie.argA,Ie.argB);Se&&Qt(n.touchedFields,G,Ae)}(f.dirtyFields||p.dirtyFields)&&(n.dirtyFields=tf(i,a)),v.state.next({name:G,isDirty:M(G,te),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Qt(a,G,te)},y=(G,te)=>{Qt(n.errors,G,te),v.state.next({errors:n.errors})},E=G=>{n.errors=G,v.state.next({errors:n.errors,isValid:!1})},I=(G,te,le,Ie)=>{const Se=Be(r,G);if(Se){const _e=Be(a,G,Hn(le)?Be(i,G):le);Hn(_e)||Ie&&Ie.defaultChecked||te?Qt(a,G,te?_e:Nk(Se._f)):W(G,_e),o.mount&&j()}},D=(G,te,le,Ie,Se)=>{let _e=!1,Ae=!1;const it={name:G};if(!e.disabled){if(!le||Ie){(f.isDirty||p.isDirty)&&(Ae=n.isDirty,n.isDirty=it.isDirty=M(),_e=Ae!==it.isDirty);const It=$o(Be(i,G),te);Ae=!!Be(n.dirtyFields,G),It?Xn(n.dirtyFields,G):Qt(n.dirtyFields,G,!0),it.dirtyFields=n.dirtyFields,_e=_e||(f.dirtyFields||p.dirtyFields)&&Ae!==!It}if(le){const It=Be(n.touchedFields,G);It||(Qt(n.touchedFields,G,le),it.touchedFields=n.touchedFields,_e=_e||(f.touchedFields||p.touchedFields)&&It!==le)}_e&&Se&&v.state.next(it)}return _e?it:{}},B=(G,te,le,Ie)=>{const Se=Be(n.errors,G),_e=(f.isValid||p.isValid)&&Ui(te)&&n.isValid!==te;if(e.delayError&&le?(u=N(()=>y(G,le)),u(e.delayError)):(clearTimeout(h),u=null,le?Qt(n.errors,G,le):Xn(n.errors,G)),(le?!$o(Se,le):Se)||!ts(Ie)||_e){const Ae={...Ie,..._e&&Ui(te)?{isValid:te}:{},errors:n.errors,name:G};n={...n,...Ae},v.state.next(Ae)}},R=async G=>{S(G,!0);const te=await e.resolver(a,e.context,bie(G||c.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return S(G),te},F=async G=>{const{errors:te}=await R(G);if(G)for(const le of G){const Ie=Be(te,le);Ie?Qt(n.errors,le,Ie):Xn(n.errors,le)}else n.errors=te;return te},V=async(G,te,le={valid:!0})=>{for(const Ie in G){const Se=G[Ie];if(Se){const{_f:_e,...Ae}=Se;if(_e){const it=c.array.has(_e.name),It=Se._f&&jie(Se._f);It&&f.validatingFields&&S([Ie],!0);const fr=await Pk(Se,c.disabled,a,_,e.shouldUseNativeValidation&&!te,it);if(It&&f.validatingFields&&S([Ie]),fr[_e.name]&&(le.valid=!1,te))break;!te&&(Be(fr,_e.name)?it?Tie(n.errors,fr,_e.name):Qt(n.errors,_e.name,fr[_e.name]):Xn(n.errors,_e.name))}!ts(Ae)&&await V(Ae,te,le)}}return le.valid},k=()=>{for(const G of c.unMount){const te=Be(r,G);te&&(te._f.refs?te._f.refs.every(le=>!v0(le)):!v0(te._f.ref))&&ce(G)}c.unMount=new Set},M=(G,te)=>!e.disabled&&(G&&te&&Qt(a,G,te),!$o(H(),i)),O=(G,te,le)=>xie(G,c,{...o.mount?a:Hn(te)?i:Qi(G)?{[G]:te}:te},le,te),P=G=>AN(Be(o.mount?a:i,G,e.shouldUnregister?Be(i,G,[]):[])),W=(G,te,le={})=>{const Ie=Be(r,G);let Se=te;if(Ie){const _e=Ie._f;_e&&(!_e.disabled&&Qt(a,G,n3(te,_e)),Se=cx(_e.ref)&&Wr(te)?"":te,XL(_e.ref)?[..._e.ref.options].forEach(Ae=>Ae.selected=Se.includes(Ae.value)):_e.refs?dp(_e.ref)?_e.refs.forEach(Ae=>{(!Ae.defaultChecked||!Ae.disabled)&&(Array.isArray(Se)?Ae.checked=!!Se.find(it=>it===Ae.value):Ae.checked=Se===Ae.value||!!Se)}):_e.refs.forEach(Ae=>Ae.checked=Ae.value===Se):MN(_e.ref)?_e.ref.value="":(_e.ref.value=Se,_e.ref.type||v.state.next({name:G,values:kr(a)})))}(le.shouldDirty||le.shouldTouch)&&D(G,Se,le.shouldTouch,le.shouldDirty,!0),le.shouldValidate&&q(G)},X=(G,te,le)=>{for(const Ie in te){if(!te.hasOwnProperty(Ie))return;const Se=te[Ie],_e=G+"."+Ie,Ae=Be(r,_e);(c.array.has(G)||zn(Se)||Ae&&!Ae._f)&&!ac(Se)?X(_e,Se,le):W(_e,Se,le)}},ee=(G,te,le={})=>{const Ie=Be(r,G),Se=c.array.has(G),_e=kr(te);Qt(a,G,_e),Se?(v.array.next({name:G,values:kr(a)}),(f.isDirty||f.dirtyFields||p.isDirty||p.dirtyFields)&&le.shouldDirty&&v.state.next({name:G,dirtyFields:tf(i,a),isDirty:M(G,_e)})):Ie&&!Ie._f&&!Wr(_e)?X(G,_e,le):W(G,_e,le),Ck(G,c)&&v.state.next({...n}),v.state.next({name:o.mount?G:void 0,values:kr(a)})},Z=async G=>{o.mount=!0;const te=G.target;let le=te.name,Ie=!0;const Se=Be(r,le),_e=It=>{Ie=Number.isNaN(It)||ac(It)&&isNaN(It.getTime())||$o(It,Be(a,le,It))},Ae=Sk(e.mode),it=Sk(e.reValidateMode);if(Se){let It,fr;const Ai=te.type?Nk(Se._f):die(G),fs=G.type===yk.BLUR||G.type===yk.FOCUS_OUT,va=!Nie(Se._f)&&!e.resolver&&!Be(n.errors,le)&&!Se._f.deps||Cie(fs,Be(n.touchedFields,le),n.isSubmitted,it,Ae),xa=Ck(le,c,fs);Qt(a,le,Ai),fs?(Se._f.onBlur&&Se._f.onBlur(G),u&&u(0)):Se._f.onChange&&Se._f.onChange(G);const Ri=D(le,Ai,fs),mo=!ts(Ri)||xa;if(!fs&&v.state.next({name:le,type:G.type,values:kr(a)}),va)return(f.isValid||p.isValid)&&(e.mode==="onBlur"?fs&&j():fs||j()),mo&&v.state.next({name:le,...xa?{}:Ri});if(!fs&&xa&&v.state.next({...n}),e.resolver){const{errors:Xc}=await R([le]);if(_e(Ai),Ie){const ya=kk(n.errors,r,le),po=kk(Xc,r,ya.name||le);It=po.error,le=po.name,fr=ts(Xc)}}else S([le],!0),It=(await Pk(Se,c.disabled,a,_,e.shouldUseNativeValidation))[le],S([le]),_e(Ai),Ie&&(It?fr=!1:(f.isValid||p.isValid)&&(fr=await V(r,!0)));Ie&&(Se._f.deps&&q(Se._f.deps),B(le,fr,It,Ri))}},U=(G,te)=>{if(Be(n.errors,te)&&G.focus)return G.focus(),1},q=async(G,te={})=>{let le,Ie;const Se=Df(G);if(e.resolver){const _e=await F(Hn(G)?G:Se);le=ts(_e),Ie=G?!Se.some(Ae=>Be(_e,Ae)):le}else G?(Ie=(await Promise.all(Se.map(async _e=>{const Ae=Be(r,_e);return await V(Ae&&Ae._f?{[_e]:Ae}:Ae)}))).every(Boolean),!(!Ie&&!n.isValid)&&j()):Ie=le=await V(r);return v.state.next({...!Qi(G)||(f.isValid||p.isValid)&&le!==n.isValid?{}:{name:G},...e.resolver||!G?{isValid:le}:{},errors:n.errors}),te.shouldFocus&&!Ie&&Of(r,U,G?Se:c.mount),Ie},H=G=>{const te={...o.mount?a:i};return Hn(G)?te:Qi(G)?Be(te,G):G.map(le=>Be(te,le))},Q=(G,te)=>({invalid:!!Be((te||n).errors,G),isDirty:!!Be((te||n).dirtyFields,G),error:Be((te||n).errors,G),isValidating:!!Be(n.validatingFields,G),isTouched:!!Be((te||n).touchedFields,G)}),he=G=>{G&&Df(G).forEach(te=>Xn(n.errors,te)),v.state.next({errors:G?n.errors:{}})},ye=(G,te,le)=>{const Ie=(Be(r,G,{_f:{}})._f||{}).ref,Se=Be(n.errors,G)||{},{ref:_e,message:Ae,type:it,...It}=Se;Qt(n.errors,G,{...It,...te,ref:Ie}),v.state.next({name:G,errors:n.errors,isValid:!1}),le&&le.shouldFocus&&Ie&&Ie.focus&&Ie.focus()},Ue=(G,te)=>gi(G)?v.state.subscribe({next:le=>G(O(void 0,te),le)}):O(G,te,!0),He=G=>v.state.subscribe({next:te=>{Eie(G.name,te.name,G.exact)&&Sie(te,G.formState||f,Ye,G.reRenderRoot)&&G.callback({values:{...a},...n,...te})}}).unsubscribe,re=G=>(o.mount=!0,p={...p,...G.formState},He({...G,formState:p})),ce=(G,te={})=>{for(const le of G?Df(G):c.mount)c.mount.delete(le),c.array.delete(le),te.keepValue||(Xn(r,le),Xn(a,le)),!te.keepError&&Xn(n.errors,le),!te.keepDirty&&Xn(n.dirtyFields,le),!te.keepTouched&&Xn(n.touchedFields,le),!te.keepIsValidating&&Xn(n.validatingFields,le),!e.shouldUnregister&&!te.keepDefaultValue&&Xn(i,le);v.state.next({values:kr(a)}),v.state.next({...n,...te.keepDirty?{isDirty:M()}:{}}),!te.keepIsValid&&j()},xe=({disabled:G,name:te})=>{(Ui(G)&&o.mount||G||c.disabled.has(te))&&(G?c.disabled.add(te):c.disabled.delete(te))},Fe=(G,te={})=>{let le=Be(r,G);const Ie=Ui(te.disabled)||Ui(e.disabled);return Qt(r,G,{...le||{},_f:{...le&&le._f?le._f:{ref:{name:G}},name:G,mount:!0,...te}}),c.mount.add(G),le?xe({disabled:Ui(te.disabled)?te.disabled:e.disabled,name:G}):I(G,!0,te.value),{...Ie?{disabled:te.disabled||e.disabled}:{},...e.progressive?{required:!!te.required,min:nf(te.min),max:nf(te.max),minLength:nf(te.minLength),maxLength:nf(te.maxLength),pattern:nf(te.pattern)}:{},name:G,onChange:Z,onBlur:Z,ref:Se=>{if(Se){Fe(G,te),le=Be(r,G);const _e=Hn(Se.value)&&Se.querySelectorAll&&Se.querySelectorAll("input,select,textarea")[0]||Se,Ae=yie(_e),it=le._f.refs||[];if(Ae?it.find(It=>It===_e):_e===le._f.ref)return;Qt(r,G,{_f:{...le._f,...Ae?{refs:[...it.filter(v0),_e,...Array.isArray(Be(i,G))?[{}]:[]],ref:{type:_e.type,name:G}}:{ref:_e}}}),I(G,!1,void 0,_e)}else le=Be(r,G,{}),le._f&&(le._f.mount=!1),(e.shouldUnregister||te.shouldUnregister)&&!(fie(c.array,G)&&o.action)&&c.unMount.add(G)}}},je=()=>e.shouldFocusError&&Of(r,U,c.mount),Ce=G=>{Ui(G)&&(v.state.next({disabled:G}),Of(r,(te,le)=>{const Ie=Be(r,le);Ie&&(te.disabled=Ie._f.disabled||G,Array.isArray(Ie._f.refs)&&Ie._f.refs.forEach(Se=>{Se.disabled=Ie._f.disabled||G}))},0,!1))},Re=(G,te)=>async le=>{let Ie;le&&(le.preventDefault&&le.preventDefault(),le.persist&&le.persist());let Se=kr(a);if(v.state.next({isSubmitting:!0}),e.resolver){const{errors:_e,values:Ae}=await R();n.errors=_e,Se=Ae}else await V(r);if(c.disabled.size)for(const _e of c.disabled)Qt(Se,_e,void 0);if(Xn(n.errors,"root"),ts(n.errors)){v.state.next({errors:{}});try{await G(Se,le)}catch(_e){Ie=_e}}else te&&await te({...n.errors},le),je(),setTimeout(je);if(v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ts(n.errors)&&!Ie,submitCount:n.submitCount+1,errors:n.errors}),Ie)throw Ie},Me=(G,te={})=>{Be(r,G)&&(Hn(te.defaultValue)?ee(G,kr(Be(i,G))):(ee(G,te.defaultValue),Qt(i,G,kr(te.defaultValue))),te.keepTouched||Xn(n.touchedFields,G),te.keepDirty||(Xn(n.dirtyFields,G),n.isDirty=te.defaultValue?M(G,kr(Be(i,G))):M()),te.keepError||(Xn(n.errors,G),f.isValid&&j()),v.state.next({...n}))},lt=(G,te={})=>{const le=G?kr(G):i,Ie=kr(le),Se=ts(G),_e=Se?i:Ie;if(te.keepDefaultValues||(i=le),!te.keepValues){if(te.keepDirtyValues){const Ae=new Set([...c.mount,...Object.keys(tf(i,a))]);for(const it of Array.from(Ae))Be(n.dirtyFields,it)?Qt(_e,it,Be(a,it)):ee(it,Be(_e,it))}else{if(IN&&Hn(G))for(const Ae of c.mount){const it=Be(r,Ae);if(it&&it._f){const It=Array.isArray(it._f.refs)?it._f.refs[0]:it._f.ref;if(cx(It)){const fr=It.closest("form");if(fr){fr.reset();break}}}}for(const Ae of c.mount)ee(Ae,Be(_e,Ae))}a=kr(_e),v.array.next({values:{..._e}}),v.state.next({values:{..._e}})}c={mount:te.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!f.isValid||!!te.keepIsValid||!!te.keepDirtyValues,o.watch=!!e.shouldUnregister,v.state.next({submitCount:te.keepSubmitCount?n.submitCount:0,isDirty:Se?!1:te.keepDirty?n.isDirty:!!(te.keepDefaultValues&&!$o(G,i)),isSubmitted:te.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Se?{}:te.keepDirtyValues?te.keepDefaultValues&&a?tf(i,a):n.dirtyFields:te.keepDefaultValues&&G?tf(i,G):te.keepDirty?n.dirtyFields:{},touchedFields:te.keepTouched?n.touchedFields:{},errors:te.keepErrors?n.errors:{},isSubmitSuccessful:te.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},wt=(G,te)=>lt(gi(G)?G(a):G,te),de=(G,te={})=>{const le=Be(r,G),Ie=le&&le._f;if(Ie){const Se=Ie.refs?Ie.refs[0]:Ie.ref;Se.focus&&(Se.focus(),te.shouldSelect&&gi(Se.select)&&Se.select())}},Ye=G=>{n={...n,...G}},an={control:{register:Fe,unregister:ce,getFieldState:Q,handleSubmit:Re,setError:ye,_subscribe:He,_runSchema:R,_focusError:je,_getWatch:O,_getDirty:M,_setValid:j,_setFieldArray:w,_setDisabledField:xe,_setErrors:E,_getFieldArray:P,_reset:lt,_resetDefaultValues:()=>gi(e.defaultValues)&&e.defaultValues().then(G=>{wt(G,e.resetOptions),v.state.next({isLoading:!1})}),_removeUnmounted:k,_disableForm:Ce,_subjects:v,_proxyFormState:f,get _fields(){return r},get _formValues(){return a},get _state(){return o},set _state(G){o=G},get _defaultValues(){return i},get _names(){return c},set _names(G){c=G},get _formState(){return n},get _options(){return e},set _options(G){e={...e,...G}}},subscribe:re,trigger:q,register:Fe,handleSubmit:Re,watch:Ue,setValue:ee,getValues:H,reset:wt,resetField:Me,clearErrors:he,unregister:ce,setError:ye,setFocus:de,getFieldState:Q};return{...an,formControl:an}}function gc(t={}){const e=Pe.useRef(void 0),n=Pe.useRef(void 0),[r,i]=Pe.useState({isDirty:!1,isValidating:!1,isLoading:gi(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:gi(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!gi(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...c}=Iie(t);e.current={...c,formState:r}}const a=e.current.control;return a._options=t,vie(()=>{const o=a._subscribe({formState:a._proxyFormState,callback:()=>i({...a._formState}),reRenderRoot:!0});return i(c=>({...c,isReady:!0})),a._formState.isReady=!0,o},[a]),Pe.useEffect(()=>a._disableForm(t.disabled),[a,t.disabled]),Pe.useEffect(()=>{t.mode&&(a._options.mode=t.mode),t.reValidateMode&&(a._options.reValidateMode=t.reValidateMode)},[a,t.mode,t.reValidateMode]),Pe.useEffect(()=>{t.errors&&(a._setErrors(t.errors),a._focusError())},[a,t.errors]),Pe.useEffect(()=>{t.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,t.shouldUnregister]),Pe.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==r.isDirty&&a._subjects.state.next({isDirty:o})}},[a,r.isDirty]),Pe.useEffect(()=>{t.values&&!$o(t.values,n.current)?(a._reset(t.values,a._options.resetOptions),n.current=t.values,i(o=>({...o}))):a._resetDefaultValues()},[a,t.values]),Pe.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),e.current.formState=gie(r,a),e.current}const Ik=(t,e,n)=>{if(t&&"reportValidity"in t){const r=Be(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},s3=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?Ik(r.ref,n,t):r.refs&&r.refs.forEach(i=>Ik(i,n,t))}},Aie=(t,e)=>{e.shouldUseNativeValidation&&s3(t,e);const n={};for(const r in t){const i=Be(e.fields,r),a=Object.assign(t[r]||{},{ref:i&&i.ref});if(Rie(e.names||Object.keys(t),r)){const o=Object.assign({},Be(n,r));Qt(o,"root",a),Qt(n,r,o)}else Qt(n,r,a)}return n},Rie=(t,e)=>t.some(n=>n.startsWith(e+"."));var Mie=function(t,e){for(var n={};t.length;){var r=t[0],i=r.code,a=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var c=r.unionErrors[0].errors[0];n[o]={message:c.message,type:c.code}}else n[o]={message:a,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(f){return f.errors.forEach(function(p){return t.push(p)})}),e){var u=n[o].types,h=u&&u[r.code];n[o]=QL(o,e,n,i,h?[].concat(h,r.message):r.message)}t.shift()}return n},vc=function(t,e,n){return n===void 0&&(n={}),function(r,i,a){try{return Promise.resolve(function(o,c){try{var u=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(h){return a.shouldUseNativeValidation&&s3({},a),{errors:{},values:n.raw?r:h}})}catch(h){return c(h)}return u&&u.then?u.then(void 0,c):u}(0,function(o){if(function(c){return Array.isArray(c==null?void 0:c.errors)}(o))return{values:{},errors:Aie(Mie(o.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw o}))}catch(o){return Promise.reject(o)}}},Lt;(function(t){t.assertEqual=i=>{};function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const a={};for(const o of i)a[o]=o;return a},t.getValidEnumValues=i=>{const a=t.objectKeys(i).filter(c=>typeof i[i[c]]!="number"),o={};for(const c of a)o[c]=i[c];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(a){return i[a]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&a.push(o);return a},t.find=(i,a)=>{for(const o of i)if(a(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,a=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}t.joinValues=r,t.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(Lt||(Lt={}));var Ak;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Ak||(Ak={}));const Ze=Lt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ro=t=>{switch(typeof t){case"undefined":return Ze.undefined;case"string":return Ze.string;case"number":return Number.isNaN(t)?Ze.nan:Ze.number;case"boolean":return Ze.boolean;case"function":return Ze.function;case"bigint":return Ze.bigint;case"symbol":return Ze.symbol;case"object":return Array.isArray(t)?Ze.array:t===null?Ze.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Ze.promise:typeof Map<"u"&&t instanceof Map?Ze.map:typeof Set<"u"&&t instanceof Set?Ze.set:typeof Date<"u"&&t instanceof Date?Ze.date:Ze.object;default:return Ze.unknown}},we=Lt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class oo extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(a){return a.message},r={_errors:[]},i=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let c=r,u=0;for(;u<o.path.length;){const h=o.path[u];u===o.path.length-1?(c[h]=c[h]||{_errors:[]},c[h]._errors.push(n(o))):c[h]=c[h]||{_errors:[]},c=c[h],u++}}};return i(this),r}static assert(e){if(!(e instanceof oo))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Lt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}oo.create=t=>new oo(t);const g1=(t,e)=>{let n;switch(t.code){case we.invalid_type:t.received===Ze.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case we.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Lt.jsonStringifyReplacer)}`;break;case we.unrecognized_keys:n=`Unrecognized key(s) in object: ${Lt.joinValues(t.keys,", ")}`;break;case we.invalid_union:n="Invalid input";break;case we.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Lt.joinValues(t.options)}`;break;case we.invalid_enum_value:n=`Invalid enum value. Expected ${Lt.joinValues(t.options)}, received '${t.received}'`;break;case we.invalid_arguments:n="Invalid function arguments";break;case we.invalid_return_type:n="Invalid function return type";break;case we.invalid_date:n="Invalid date";break;case we.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Lt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case we.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case we.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case we.custom:n="Invalid input";break;case we.invalid_intersection_types:n="Intersection results could not be merged";break;case we.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case we.not_finite:n="Number must be finite";break;default:n=e.defaultError,Lt.assertNever(t)}return{message:n}};let Die=g1;function Oie(){return Die}const Lie=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,a=[...n,...i.path||[]],o={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let c="";const u=r.filter(h=>!!h).slice().reverse();for(const h of u)c=h(o,{data:e,defaultError:c}).message;return{...i,path:a,message:c}};function Le(t,e){const n=Oie(),r=Lie({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===g1?void 0:g1].filter(i=>!!i)});t.common.issues.push(r)}class Ps{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return ft;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const a=await i.key,o=await i.value;r.push({key:a,value:o})}return Ps.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:a,value:o}=i;if(a.status==="aborted"||o.status==="aborted")return ft;a.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[a.value]=o.value)}return{status:e.value,value:r}}}const ft=Object.freeze({status:"aborted"}),xf=t=>({status:"dirty",value:t}),ti=t=>({status:"valid",value:t}),Rk=t=>t.status==="aborted",Mk=t=>t.status==="dirty",Ld=t=>t.status==="valid",hx=t=>typeof Promise<"u"&&t instanceof Promise;var Qe;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Qe||(Qe={}));class bl{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Dk=(t,e)=>{if(Ld(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new oo(t.common.issues);return this._error=n,this._error}}};function jt(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,c)=>{const{message:u}=t;return o.code==="invalid_enum_value"?{message:u??c.defaultError}:typeof c.data>"u"?{message:u??r??c.defaultError}:o.code!=="invalid_type"?{message:c.defaultError}:{message:u??n??c.defaultError}},description:i}}class Dt{get description(){return this._def.description}_getType(e){return Ro(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Ro(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ps,ctx:{common:e.parent.common,data:e.data,parsedType:Ro(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(hx(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ro(e)},i=this._parseSync({data:e,path:r.path,parent:r});return Dk(r,i)}"~validate"(e){var r,i;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ro(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:n});return Ld(a)?{value:a.value}:{issues:n.common.issues}}catch(a){(i=(r=a==null?void 0:a.message)==null?void 0:r.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(a=>Ld(a)?{value:a.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ro(e)},i=this._parse({data:e,path:r.path,parent:r}),a=await(hx(i)?i:Promise.resolve(i));return Dk(r,a)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,a)=>{const o=e(i),c=()=>a.addIssue({code:we.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(c(),!1)):o?!0:(c(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new zd({schema:this,typeName:mt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return ol.create(this,this._def)}nullable(){return Ud.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return la.create(this)}promise(){return gx.create(this,this._def)}or(e){return mx.create([this,e],this._def)}and(e){return px.create(this,e,this._def)}transform(e){return new zd({...jt(this._def),schema:this,typeName:mt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new x1({...jt(this._def),innerType:this,defaultValue:n,typeName:mt.ZodDefault})}brand(){return new aae({typeName:mt.ZodBranded,type:this,...jt(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new y1({...jt(this._def),innerType:this,catchValue:n,typeName:mt.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return ON.create(this,e)}readonly(){return _1.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Fie=/^c[^\s-]{8,}$/i,Vie=/^[0-9a-z]+$/,zie=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Uie=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,$ie=/^[a-z0-9_-]{21}$/i,Bie=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Wie=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,qie=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Hie="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let x0;const Gie=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Kie=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Zie=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Yie=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Qie=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Xie=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,i3="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Jie=new RegExp(`^${i3}$`);function a3(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function eae(t){return new RegExp(`^${a3(t)}$`)}function tae(t){let e=`${i3}T${a3(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function nae(t,e){return!!((e==="v4"||!e)&&Gie.test(t)||(e==="v6"||!e)&&Zie.test(t))}function rae(t,e){if(!Bie.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function sae(t,e){return!!((e==="v4"||!e)&&Kie.test(t)||(e==="v6"||!e)&&Yie.test(t))}class Ko extends Dt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ze.string){const a=this._getOrReturnCtx(e);return Le(a,{code:we.invalid_type,expected:Ze.string,received:a.parsedType}),ft}const r=new Ps;let i;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(i=this._getOrReturnCtx(e,i),Le(i,{code:we.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")e.data.length>a.value&&(i=this._getOrReturnCtx(e,i),Le(i,{code:we.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){const o=e.data.length>a.value,c=e.data.length<a.value;(o||c)&&(i=this._getOrReturnCtx(e,i),o?Le(i,{code:we.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):c&&Le(i,{code:we.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")qie.test(e.data)||(i=this._getOrReturnCtx(e,i),Le(i,{validation:"email",code:we.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")x0||(x0=new RegExp(Hie,"u")),x0.test(e.data)||(i=this._getOrReturnCtx(e,i),Le(i,{validation:"emoji",code:we.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")Uie.test(e.data)||(i=this._getOrReturnCtx(e,i),Le(i,{validation:"uuid",code:we.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")$ie.test(e.data)||(i=this._getOrReturnCtx(e,i),Le(i,{validation:"nanoid",code:we.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")Fie.test(e.data)||(i=this._getOrReturnCtx(e,i),Le(i,{validation:"cuid",code:we.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")Vie.test(e.data)||(i=this._getOrReturnCtx(e,i),Le(i,{validation:"cuid2",code:we.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")zie.test(e.data)||(i=this._getOrReturnCtx(e,i),Le(i,{validation:"ulid",code:we.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),Le(i,{validation:"url",code:we.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Le(i,{validation:"regex",code:we.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(e,i),Le(i,{code:we.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(i=this._getOrReturnCtx(e,i),Le(i,{code:we.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(i=this._getOrReturnCtx(e,i),Le(i,{code:we.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?tae(a).test(e.data)||(i=this._getOrReturnCtx(e,i),Le(i,{code:we.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?Jie.test(e.data)||(i=this._getOrReturnCtx(e,i),Le(i,{code:we.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?eae(a).test(e.data)||(i=this._getOrReturnCtx(e,i),Le(i,{code:we.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?Wie.test(e.data)||(i=this._getOrReturnCtx(e,i),Le(i,{validation:"duration",code:we.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?nae(e.data,a.version)||(i=this._getOrReturnCtx(e,i),Le(i,{validation:"ip",code:we.invalid_string,message:a.message}),r.dirty()):a.kind==="jwt"?rae(e.data,a.alg)||(i=this._getOrReturnCtx(e,i),Le(i,{validation:"jwt",code:we.invalid_string,message:a.message}),r.dirty()):a.kind==="cidr"?sae(e.data,a.version)||(i=this._getOrReturnCtx(e,i),Le(i,{validation:"cidr",code:we.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?Qie.test(e.data)||(i=this._getOrReturnCtx(e,i),Le(i,{validation:"base64",code:we.invalid_string,message:a.message}),r.dirty()):a.kind==="base64url"?Xie.test(e.data)||(i=this._getOrReturnCtx(e,i),Le(i,{validation:"base64url",code:we.invalid_string,message:a.message}),r.dirty()):Lt.assertNever(a);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:we.invalid_string,...Qe.errToObj(r)})}_addCheck(e){return new Ko({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Qe.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Qe.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Qe.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Qe.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Qe.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Qe.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Qe.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Qe.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Qe.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Qe.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Qe.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Qe.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Qe.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Qe.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Qe.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Qe.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Qe.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Qe.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Qe.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Qe.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Qe.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Qe.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Qe.errToObj(n)})}nonempty(e){return this.min(1,Qe.errToObj(e))}trim(){return new Ko({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ko({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ko({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Ko.create=t=>new Ko({checks:[],typeName:mt.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...jt(t)});function iae(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,a=Number.parseInt(t.toFixed(i).replace(".","")),o=Number.parseInt(e.toFixed(i).replace(".",""));return a%o/10**i}class Fd extends Dt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ze.number){const a=this._getOrReturnCtx(e);return Le(a,{code:we.invalid_type,expected:Ze.number,received:a.parsedType}),ft}let r;const i=new Ps;for(const a of this._def.checks)a.kind==="int"?Lt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Le(r,{code:we.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),Le(r,{code:we.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),Le(r,{code:we.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?iae(e.data,a.value)!==0&&(r=this._getOrReturnCtx(e,r),Le(r,{code:we.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Le(r,{code:we.not_finite,message:a.message}),i.dirty()):Lt.assertNever(a);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Qe.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Qe.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Qe.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Qe.toString(n))}setLimit(e,n,r,i){return new Fd({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Qe.toString(i)}]})}_addCheck(e){return new Fd({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Qe.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Qe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Qe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Qe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Qe.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Qe.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Qe.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Qe.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Qe.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Lt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Fd.create=t=>new Fd({checks:[],typeName:mt.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...jt(t)});class jm extends Dt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Ze.bigint)return this._getInvalidInput(e);let r;const i=new Ps;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),Le(r,{code:we.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),Le(r,{code:we.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Le(r,{code:we.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):Lt.assertNever(a);return{status:i.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return Le(n,{code:we.invalid_type,expected:Ze.bigint,received:n.parsedType}),ft}gte(e,n){return this.setLimit("min",e,!0,Qe.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Qe.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Qe.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Qe.toString(n))}setLimit(e,n,r,i){return new jm({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Qe.toString(i)}]})}_addCheck(e){return new jm({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Qe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Qe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Qe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Qe.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Qe.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}jm.create=t=>new jm({checks:[],typeName:mt.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...jt(t)});class Ok extends Dt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ze.boolean){const r=this._getOrReturnCtx(e);return Le(r,{code:we.invalid_type,expected:Ze.boolean,received:r.parsedType}),ft}return ti(e.data)}}Ok.create=t=>new Ok({typeName:mt.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...jt(t)});class fx extends Dt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ze.date){const a=this._getOrReturnCtx(e);return Le(a,{code:we.invalid_type,expected:Ze.date,received:a.parsedType}),ft}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return Le(a,{code:we.invalid_date}),ft}const r=new Ps;let i;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(i=this._getOrReturnCtx(e,i),Le(i,{code:we.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(i=this._getOrReturnCtx(e,i),Le(i,{code:we.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):Lt.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new fx({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Qe.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Qe.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}fx.create=t=>new fx({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:mt.ZodDate,...jt(t)});class Lk extends Dt{_parse(e){if(this._getType(e)!==Ze.symbol){const r=this._getOrReturnCtx(e);return Le(r,{code:we.invalid_type,expected:Ze.symbol,received:r.parsedType}),ft}return ti(e.data)}}Lk.create=t=>new Lk({typeName:mt.ZodSymbol,...jt(t)});class Fk extends Dt{_parse(e){if(this._getType(e)!==Ze.undefined){const r=this._getOrReturnCtx(e);return Le(r,{code:we.invalid_type,expected:Ze.undefined,received:r.parsedType}),ft}return ti(e.data)}}Fk.create=t=>new Fk({typeName:mt.ZodUndefined,...jt(t)});class Vk extends Dt{_parse(e){if(this._getType(e)!==Ze.null){const r=this._getOrReturnCtx(e);return Le(r,{code:we.invalid_type,expected:Ze.null,received:r.parsedType}),ft}return ti(e.data)}}Vk.create=t=>new Vk({typeName:mt.ZodNull,...jt(t)});class zk extends Dt{constructor(){super(...arguments),this._any=!0}_parse(e){return ti(e.data)}}zk.create=t=>new zk({typeName:mt.ZodAny,...jt(t)});class Uk extends Dt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ti(e.data)}}Uk.create=t=>new Uk({typeName:mt.ZodUnknown,...jt(t)});class jl extends Dt{_parse(e){const n=this._getOrReturnCtx(e);return Le(n,{code:we.invalid_type,expected:Ze.never,received:n.parsedType}),ft}}jl.create=t=>new jl({typeName:mt.ZodNever,...jt(t)});class $k extends Dt{_parse(e){if(this._getType(e)!==Ze.undefined){const r=this._getOrReturnCtx(e);return Le(r,{code:we.invalid_type,expected:Ze.void,received:r.parsedType}),ft}return ti(e.data)}}$k.create=t=>new $k({typeName:mt.ZodVoid,...jt(t)});class la extends Dt{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==Ze.array)return Le(n,{code:we.invalid_type,expected:Ze.array,received:n.parsedType}),ft;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,c=n.data.length<i.exactLength.value;(o||c)&&(Le(n,{code:o?we.too_big:we.too_small,minimum:c?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(Le(n,{code:we.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(Le(n,{code:we.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,c)=>i.type._parseAsync(new bl(n,o,n.path,c)))).then(o=>Ps.mergeArray(r,o));const a=[...n.data].map((o,c)=>i.type._parseSync(new bl(n,o,n.path,c)));return Ps.mergeArray(r,a)}get element(){return this._def.type}min(e,n){return new la({...this._def,minLength:{value:e,message:Qe.toString(n)}})}max(e,n){return new la({...this._def,maxLength:{value:e,message:Qe.toString(n)}})}length(e,n){return new la({...this._def,exactLength:{value:e,message:Qe.toString(n)}})}nonempty(e){return this.min(1,e)}}la.create=(t,e)=>new la({type:t,minLength:null,maxLength:null,exactLength:null,typeName:mt.ZodArray,...jt(e)});function Mu(t){if(t instanceof qn){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=ol.create(Mu(r))}return new qn({...t._def,shape:()=>e})}else return t instanceof la?new la({...t._def,type:Mu(t.element)}):t instanceof ol?ol.create(Mu(t.unwrap())):t instanceof Ud?Ud.create(Mu(t.unwrap())):t instanceof Lc?Lc.create(t.items.map(e=>Mu(e))):t}class qn extends Dt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Lt.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==Ze.object){const h=this._getOrReturnCtx(e);return Le(h,{code:we.invalid_type,expected:Ze.object,received:h.parsedType}),ft}const{status:r,ctx:i}=this._processInputParams(e),{shape:a,keys:o}=this._getCached(),c=[];if(!(this._def.catchall instanceof jl&&this._def.unknownKeys==="strip"))for(const h in i.data)o.includes(h)||c.push(h);const u=[];for(const h of o){const f=a[h],p=i.data[h];u.push({key:{status:"valid",value:h},value:f._parse(new bl(i,p,i.path,h)),alwaysSet:h in i.data})}if(this._def.catchall instanceof jl){const h=this._def.unknownKeys;if(h==="passthrough")for(const f of c)u.push({key:{status:"valid",value:f},value:{status:"valid",value:i.data[f]}});else if(h==="strict")c.length>0&&(Le(i,{code:we.unrecognized_keys,keys:c}),r.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const h=this._def.catchall;for(const f of c){const p=i.data[f];u.push({key:{status:"valid",value:f},value:h._parse(new bl(i,p,i.path,f)),alwaysSet:f in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const h=[];for(const f of u){const p=await f.key,v=await f.value;h.push({key:p,value:v,alwaysSet:f.alwaysSet})}return h}).then(h=>Ps.mergeObjectSync(r,h)):Ps.mergeObjectSync(r,u)}get shape(){return this._def.shape()}strict(e){return Qe.errToObj,new qn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var a,o;const i=((o=(a=this._def).errorMap)==null?void 0:o.call(a,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:Qe.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new qn({...this._def,unknownKeys:"strip"})}passthrough(){return new qn({...this._def,unknownKeys:"passthrough"})}extend(e){return new qn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new qn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:mt.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new qn({...this._def,catchall:e})}pick(e){const n={};for(const r of Lt.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new qn({...this._def,shape:()=>n})}omit(e){const n={};for(const r of Lt.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new qn({...this._def,shape:()=>n})}deepPartial(){return Mu(this)}partial(e){const n={};for(const r of Lt.objectKeys(this.shape)){const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}return new qn({...this._def,shape:()=>n})}required(e){const n={};for(const r of Lt.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof ol;)a=a._def.innerType;n[r]=a}return new qn({...this._def,shape:()=>n})}keyof(){return o3(Lt.objectKeys(this.shape))}}qn.create=(t,e)=>new qn({shape:()=>t,unknownKeys:"strip",catchall:jl.create(),typeName:mt.ZodObject,...jt(e)});qn.strictCreate=(t,e)=>new qn({shape:()=>t,unknownKeys:"strict",catchall:jl.create(),typeName:mt.ZodObject,...jt(e)});qn.lazycreate=(t,e)=>new qn({shape:t,unknownKeys:"strip",catchall:jl.create(),typeName:mt.ZodObject,...jt(e)});class mx extends Dt{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(a){for(const c of a)if(c.result.status==="valid")return c.result;for(const c of a)if(c.result.status==="dirty")return n.common.issues.push(...c.ctx.common.issues),c.result;const o=a.map(c=>new oo(c.ctx.common.issues));return Le(n,{code:we.invalid_union,unionErrors:o}),ft}if(n.common.async)return Promise.all(r.map(async a=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let a;const o=[];for(const u of r){const h={...n,common:{...n.common,issues:[]},parent:null},f=u._parseSync({data:n.data,path:n.path,parent:h});if(f.status==="valid")return f;f.status==="dirty"&&!a&&(a={result:f,ctx:h}),h.common.issues.length&&o.push(h.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const c=o.map(u=>new oo(u));return Le(n,{code:we.invalid_union,unionErrors:c}),ft}}get options(){return this._def.options}}mx.create=(t,e)=>new mx({options:t,typeName:mt.ZodUnion,...jt(e)});function v1(t,e){const n=Ro(t),r=Ro(e);if(t===e)return{valid:!0,data:t};if(n===Ze.object&&r===Ze.object){const i=Lt.objectKeys(e),a=Lt.objectKeys(t).filter(c=>i.indexOf(c)!==-1),o={...t,...e};for(const c of a){const u=v1(t[c],e[c]);if(!u.valid)return{valid:!1};o[c]=u.data}return{valid:!0,data:o}}else if(n===Ze.array&&r===Ze.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let a=0;a<t.length;a++){const o=t[a],c=e[a],u=v1(o,c);if(!u.valid)return{valid:!1};i.push(u.data)}return{valid:!0,data:i}}else return n===Ze.date&&r===Ze.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class px extends Dt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(a,o)=>{if(Rk(a)||Rk(o))return ft;const c=v1(a.value,o.value);return c.valid?((Mk(a)||Mk(o))&&n.dirty(),{status:n.value,value:c.data}):(Le(r,{code:we.invalid_intersection_types}),ft)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,o])=>i(a,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}px.create=(t,e,n)=>new px({left:t,right:e,typeName:mt.ZodIntersection,...jt(n)});class Lc extends Dt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ze.array)return Le(r,{code:we.invalid_type,expected:Ze.array,received:r.parsedType}),ft;if(r.data.length<this._def.items.length)return Le(r,{code:we.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ft;!this._def.rest&&r.data.length>this._def.items.length&&(Le(r,{code:we.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...r.data].map((o,c)=>{const u=this._def.items[c]||this._def.rest;return u?u._parse(new bl(r,o,r.path,c)):null}).filter(o=>!!o);return r.common.async?Promise.all(a).then(o=>Ps.mergeArray(n,o)):Ps.mergeArray(n,a)}get items(){return this._def.items}rest(e){return new Lc({...this._def,rest:e})}}Lc.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Lc({items:t,typeName:mt.ZodTuple,rest:null,...jt(e)})};class Bk extends Dt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ze.map)return Le(r,{code:we.invalid_type,expected:Ze.map,received:r.parsedType}),ft;const i=this._def.keyType,a=this._def.valueType,o=[...r.data.entries()].map(([c,u],h)=>({key:i._parse(new bl(r,c,r.path,[h,"key"])),value:a._parse(new bl(r,u,r.path,[h,"value"]))}));if(r.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const u of o){const h=await u.key,f=await u.value;if(h.status==="aborted"||f.status==="aborted")return ft;(h.status==="dirty"||f.status==="dirty")&&n.dirty(),c.set(h.value,f.value)}return{status:n.value,value:c}})}else{const c=new Map;for(const u of o){const h=u.key,f=u.value;if(h.status==="aborted"||f.status==="aborted")return ft;(h.status==="dirty"||f.status==="dirty")&&n.dirty(),c.set(h.value,f.value)}return{status:n.value,value:c}}}}Bk.create=(t,e,n)=>new Bk({valueType:e,keyType:t,typeName:mt.ZodMap,...jt(n)});class Nm extends Dt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ze.set)return Le(r,{code:we.invalid_type,expected:Ze.set,received:r.parsedType}),ft;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(Le(r,{code:we.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(Le(r,{code:we.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const a=this._def.valueType;function o(u){const h=new Set;for(const f of u){if(f.status==="aborted")return ft;f.status==="dirty"&&n.dirty(),h.add(f.value)}return{status:n.value,value:h}}const c=[...r.data.values()].map((u,h)=>a._parse(new bl(r,u,r.path,h)));return r.common.async?Promise.all(c).then(u=>o(u)):o(c)}min(e,n){return new Nm({...this._def,minSize:{value:e,message:Qe.toString(n)}})}max(e,n){return new Nm({...this._def,maxSize:{value:e,message:Qe.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Nm.create=(t,e)=>new Nm({valueType:t,minSize:null,maxSize:null,typeName:mt.ZodSet,...jt(e)});class Wk extends Dt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Wk.create=(t,e)=>new Wk({getter:t,typeName:mt.ZodLazy,...jt(e)});class qk extends Dt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Le(n,{received:n.data,code:we.invalid_literal,expected:this._def.value}),ft}return{status:"valid",value:e.data}}get value(){return this._def.value}}qk.create=(t,e)=>new qk({value:t,typeName:mt.ZodLiteral,...jt(e)});function o3(t,e){return new Vd({values:t,typeName:mt.ZodEnum,...jt(e)})}class Vd extends Dt{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Le(n,{expected:Lt.joinValues(r),received:n.parsedType,code:we.invalid_type}),ft}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return Le(n,{received:n.data,code:we.invalid_enum_value,options:r}),ft}return ti(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Vd.create(e,{...this._def,...n})}exclude(e,n=this._def){return Vd.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Vd.create=o3;class Hk extends Dt{_parse(e){const n=Lt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Ze.string&&r.parsedType!==Ze.number){const i=Lt.objectValues(n);return Le(r,{expected:Lt.joinValues(i),received:r.parsedType,code:we.invalid_type}),ft}if(this._cache||(this._cache=new Set(Lt.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const i=Lt.objectValues(n);return Le(r,{received:r.data,code:we.invalid_enum_value,options:i}),ft}return ti(e.data)}get enum(){return this._def.values}}Hk.create=(t,e)=>new Hk({values:t,typeName:mt.ZodNativeEnum,...jt(e)});class gx extends Dt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ze.promise&&n.common.async===!1)return Le(n,{code:we.invalid_type,expected:Ze.promise,received:n.parsedType}),ft;const r=n.parsedType===Ze.promise?n.data:Promise.resolve(n.data);return ti(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}gx.create=(t,e)=>new gx({type:t,typeName:mt.ZodPromise,...jt(e)});class zd extends Dt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===mt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,a={addIssue:o=>{Le(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const o=i.transform(r.data,a);if(r.common.async)return Promise.resolve(o).then(async c=>{if(n.value==="aborted")return ft;const u=await this._def.schema._parseAsync({data:c,path:r.path,parent:r});return u.status==="aborted"?ft:u.status==="dirty"||n.value==="dirty"?xf(u.value):u});{if(n.value==="aborted")return ft;const c=this._def.schema._parseSync({data:o,path:r.path,parent:r});return c.status==="aborted"?ft:c.status==="dirty"||n.value==="dirty"?xf(c.value):c}}if(i.type==="refinement"){const o=c=>{const u=i.refinement(c,a);if(r.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(r.common.async===!1){const c=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return c.status==="aborted"?ft:(c.status==="dirty"&&n.dirty(),o(c.value),{status:n.value,value:c.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(c=>c.status==="aborted"?ft:(c.status==="dirty"&&n.dirty(),o(c.value).then(()=>({status:n.value,value:c.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Ld(o))return ft;const c=i.transform(o.value,a);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:c}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Ld(o)?Promise.resolve(i.transform(o.value,a)).then(c=>({status:n.value,value:c})):ft);Lt.assertNever(i)}}zd.create=(t,e,n)=>new zd({schema:t,typeName:mt.ZodEffects,effect:e,...jt(n)});zd.createWithPreprocess=(t,e,n)=>new zd({schema:e,effect:{type:"preprocess",transform:t},typeName:mt.ZodEffects,...jt(n)});class ol extends Dt{_parse(e){return this._getType(e)===Ze.undefined?ti(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ol.create=(t,e)=>new ol({innerType:t,typeName:mt.ZodOptional,...jt(e)});class Ud extends Dt{_parse(e){return this._getType(e)===Ze.null?ti(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ud.create=(t,e)=>new Ud({innerType:t,typeName:mt.ZodNullable,...jt(e)});class x1 extends Dt{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Ze.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}x1.create=(t,e)=>new x1({innerType:t,typeName:mt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...jt(e)});class y1 extends Dt{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return hx(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new oo(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new oo(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}y1.create=(t,e)=>new y1({innerType:t,typeName:mt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...jt(e)});class Gk extends Dt{_parse(e){if(this._getType(e)!==Ze.nan){const r=this._getOrReturnCtx(e);return Le(r,{code:we.invalid_type,expected:Ze.nan,received:r.parsedType}),ft}return{status:"valid",value:e.data}}}Gk.create=t=>new Gk({typeName:mt.ZodNaN,...jt(t)});class aae extends Dt{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class ON extends Dt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?ft:a.status==="dirty"?(n.dirty(),xf(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?ft:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new ON({in:e,out:n,typeName:mt.ZodPipeline})}}class _1 extends Dt{_parse(e){const n=this._def.innerType._parse(e),r=i=>(Ld(i)&&(i.value=Object.freeze(i.value)),i);return hx(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}_1.create=(t,e)=>new _1({innerType:t,typeName:mt.ZodReadonly,...jt(e)});var mt;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(mt||(mt={}));const _t=Ko.create,l3=Fd.create;jl.create;const LN=la.create,Yc=qn.create;mx.create;px.create;Lc.create;const oae=Vd.create;gx.create;ol.create;Ud.create;var By="Checkbox",[lae,ice]=jr(By),[cae,FN]=lae(By);function uae(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:i,disabled:a,form:o,name:c,onCheckedChange:u,required:h,value:f="on",internal_do_not_use_render:p}=t,[v,_]=Ts({prop:n,defaultProp:i??!1,onChange:u,caller:By}),[N,j]=x.useState(null),[S,w]=x.useState(null),y=x.useRef(!1),E=N?!!o||!!N.closest("form"):!0,I={checked:v,disabled:a,setChecked:_,control:N,setControl:j,name:c,form:o,value:f,hasConsumerStoppedPropagationRef:y,required:h,defaultChecked:ll(i)?!1:i,isFormControl:E,bubbleInput:S,setBubbleInput:w};return s.jsx(cae,{scope:e,...I,children:dae(p)?p(I):r})}var c3="CheckboxTrigger",u3=x.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},i)=>{const{control:a,value:o,disabled:c,checked:u,required:h,setControl:f,setChecked:p,hasConsumerStoppedPropagationRef:v,isFormControl:_,bubbleInput:N}=FN(c3,t),j=ot(i,f),S=x.useRef(u);return x.useEffect(()=>{const w=a==null?void 0:a.form;if(w){const y=()=>p(S.current);return w.addEventListener("reset",y),()=>w.removeEventListener("reset",y)}},[a,p]),s.jsx(ze.button,{type:"button",role:"checkbox","aria-checked":ll(u)?"mixed":u,"aria-required":h,"data-state":p3(u),"data-disabled":c?"":void 0,disabled:c,value:o,...r,ref:j,onKeyDown:Ee(e,w=>{w.key==="Enter"&&w.preventDefault()}),onClick:Ee(n,w=>{p(y=>ll(y)?!0:!y),N&&_&&(v.current=w.isPropagationStopped(),v.current||w.stopPropagation())})})});u3.displayName=c3;var VN=x.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:i,defaultChecked:a,required:o,disabled:c,value:u,onCheckedChange:h,form:f,...p}=t;return s.jsx(uae,{__scopeCheckbox:n,checked:i,defaultChecked:a,disabled:c,required:o,onCheckedChange:h,name:r,form:f,value:u,internal_do_not_use_render:({isFormControl:v})=>s.jsxs(s.Fragment,{children:[s.jsx(u3,{...p,ref:e,__scopeCheckbox:n}),v&&s.jsx(m3,{__scopeCheckbox:n})]})})});VN.displayName=By;var d3="CheckboxIndicator",h3=x.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...i}=t,a=FN(d3,n);return s.jsx(Nr,{present:r||ll(a.checked)||a.checked===!0,children:s.jsx(ze.span,{"data-state":p3(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...t.style}})})});h3.displayName=d3;var f3="CheckboxBubbleInput",m3=x.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:i,checked:a,defaultChecked:o,required:c,disabled:u,name:h,value:f,form:p,bubbleInput:v,setBubbleInput:_}=FN(f3,t),N=ot(n,_),j=Ay(a),S=wy(r);x.useEffect(()=>{const y=v;if(!y)return;const E=window.HTMLInputElement.prototype,D=Object.getOwnPropertyDescriptor(E,"checked").set,B=!i.current;if(j!==a&&D){const R=new Event("click",{bubbles:B});y.indeterminate=ll(a),D.call(y,ll(a)?!1:a),y.dispatchEvent(R)}},[v,j,a,i]);const w=x.useRef(ll(a)?!1:a);return s.jsx(ze.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??w.current,required:c,disabled:u,name:h,value:f,form:p,...e,tabIndex:-1,ref:N,style:{...e.style,...S,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});m3.displayName=f3;function dae(t){return typeof t=="function"}function ll(t){return t==="indeterminate"}function p3(t){return ll(t)?"indeterminate":t?"checked":"unchecked"}const vx=x.forwardRef(({className:t,...e},n)=>s.jsx(VN,{ref:n,className:Xe("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:s.jsx(h3,{className:Xe("flex items-center justify-center text-current"),children:s.jsx(lN,{className:"h-4 w-4"})})}));vx.displayName=VN.displayName;var g3=["PageUp","PageDown"],v3=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],x3={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},dh="Slider",[w1,hae,fae]=Qm(dh),[y3,ace]=jr(dh,[fae]),[mae,Wy]=y3(dh),_3=x.forwardRef((t,e)=>{const{name:n,min:r=0,max:i=100,step:a=1,orientation:o="horizontal",disabled:c=!1,minStepsBetweenThumbs:u=0,defaultValue:h=[r],value:f,onValueChange:p=()=>{},onValueCommit:v=()=>{},inverted:_=!1,form:N,...j}=t,S=x.useRef(new Set),w=x.useRef(0),E=o==="horizontal"?pae:gae,[I=[],D]=Ts({prop:f,defaultProp:h,onChange:M=>{var P;(P=[...S.current][w.current])==null||P.focus(),p(M)}}),B=x.useRef(I);function R(M){const O=wae(I,M);k(M,O)}function F(M){k(M,w.current)}function V(){const M=B.current[w.current];I[w.current]!==M&&v(I)}function k(M,O,{commit:P}={commit:!1}){const W=Sae(a),X=Eae(Math.round((M-r)/a)*a+r,W),ee=bm(X,[r,i]);D((Z=[])=>{const U=yae(Z,ee,O);if(Nae(U,u*a)){w.current=U.indexOf(ee);const q=String(U)!==String(Z);return q&&P&&v(U),q?U:Z}else return Z})}return s.jsx(mae,{scope:t.__scopeSlider,name:n,disabled:c,min:r,max:i,valueIndexToChangeRef:w,thumbs:S.current,values:I,orientation:o,form:N,children:s.jsx(w1.Provider,{scope:t.__scopeSlider,children:s.jsx(w1.Slot,{scope:t.__scopeSlider,children:s.jsx(E,{"aria-disabled":c,"data-disabled":c?"":void 0,...j,ref:e,onPointerDown:Ee(j.onPointerDown,()=>{c||(B.current=I)}),min:r,max:i,inverted:_,onSlideStart:c?void 0:R,onSlideMove:c?void 0:F,onSlideEnd:c?void 0:V,onHomeKeyDown:()=>!c&&k(r,0,{commit:!0}),onEndKeyDown:()=>!c&&k(i,I.length-1,{commit:!0}),onStepKeyDown:({event:M,direction:O})=>{if(!c){const X=g3.includes(M.key)||M.shiftKey&&v3.includes(M.key)?10:1,ee=w.current,Z=I[ee],U=a*X*O;k(Z+U,ee,{commit:!0})}}})})})})});_3.displayName=dh;var[w3,b3]=y3(dh,{startEdge:"left",endEdge:"right",size:"width",direction:1}),pae=x.forwardRef((t,e)=>{const{min:n,max:r,dir:i,inverted:a,onSlideStart:o,onSlideMove:c,onSlideEnd:u,onStepKeyDown:h,...f}=t,[p,v]=x.useState(null),_=ot(e,E=>v(E)),N=x.useRef(void 0),j=Gc(i),S=j==="ltr",w=S&&!a||!S&&a;function y(E){const I=N.current||p.getBoundingClientRect(),D=[0,I.width],R=zN(D,w?[n,r]:[r,n]);return N.current=I,R(E-I.left)}return s.jsx(w3,{scope:t.__scopeSlider,startEdge:w?"left":"right",endEdge:w?"right":"left",direction:w?1:-1,size:"width",children:s.jsx(j3,{dir:j,"data-orientation":"horizontal",...f,ref:_,style:{...f.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:E=>{const I=y(E.clientX);o==null||o(I)},onSlideMove:E=>{const I=y(E.clientX);c==null||c(I)},onSlideEnd:()=>{N.current=void 0,u==null||u()},onStepKeyDown:E=>{const D=x3[w?"from-left":"from-right"].includes(E.key);h==null||h({event:E,direction:D?-1:1})}})})}),gae=x.forwardRef((t,e)=>{const{min:n,max:r,inverted:i,onSlideStart:a,onSlideMove:o,onSlideEnd:c,onStepKeyDown:u,...h}=t,f=x.useRef(null),p=ot(e,f),v=x.useRef(void 0),_=!i;function N(j){const S=v.current||f.current.getBoundingClientRect(),w=[0,S.height],E=zN(w,_?[r,n]:[n,r]);return v.current=S,E(j-S.top)}return s.jsx(w3,{scope:t.__scopeSlider,startEdge:_?"bottom":"top",endEdge:_?"top":"bottom",size:"height",direction:_?1:-1,children:s.jsx(j3,{"data-orientation":"vertical",...h,ref:p,style:{...h.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:j=>{const S=N(j.clientY);a==null||a(S)},onSlideMove:j=>{const S=N(j.clientY);o==null||o(S)},onSlideEnd:()=>{v.current=void 0,c==null||c()},onStepKeyDown:j=>{const w=x3[_?"from-bottom":"from-top"].includes(j.key);u==null||u({event:j,direction:w?-1:1})}})})}),j3=x.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:i,onSlideEnd:a,onHomeKeyDown:o,onEndKeyDown:c,onStepKeyDown:u,...h}=t,f=Wy(dh,n);return s.jsx(ze.span,{...h,ref:e,onKeyDown:Ee(t.onKeyDown,p=>{p.key==="Home"?(o(p),p.preventDefault()):p.key==="End"?(c(p),p.preventDefault()):g3.concat(v3).includes(p.key)&&(u(p),p.preventDefault())}),onPointerDown:Ee(t.onPointerDown,p=>{const v=p.target;v.setPointerCapture(p.pointerId),p.preventDefault(),f.thumbs.has(v)?v.focus():r(p)}),onPointerMove:Ee(t.onPointerMove,p=>{p.target.hasPointerCapture(p.pointerId)&&i(p)}),onPointerUp:Ee(t.onPointerUp,p=>{const v=p.target;v.hasPointerCapture(p.pointerId)&&(v.releasePointerCapture(p.pointerId),a(p))})})}),N3="SliderTrack",S3=x.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=Wy(N3,n);return s.jsx(ze.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...r,ref:e})});S3.displayName=N3;var b1="SliderRange",E3=x.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=Wy(b1,n),a=b3(b1,n),o=x.useRef(null),c=ot(e,o),u=i.values.length,h=i.values.map(v=>T3(v,i.min,i.max)),f=u>1?Math.min(...h):0,p=100-Math.max(...h);return s.jsx(ze.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...r,ref:c,style:{...t.style,[a.startEdge]:f+"%",[a.endEdge]:p+"%"}})});E3.displayName=b1;var j1="SliderThumb",C3=x.forwardRef((t,e)=>{const n=hae(t.__scopeSlider),[r,i]=x.useState(null),a=ot(e,c=>i(c)),o=x.useMemo(()=>r?n().findIndex(c=>c.ref.current===r):-1,[n,r]);return s.jsx(vae,{...t,ref:a,index:o})}),vae=x.forwardRef((t,e)=>{const{__scopeSlider:n,index:r,name:i,...a}=t,o=Wy(j1,n),c=b3(j1,n),[u,h]=x.useState(null),f=ot(e,y=>h(y)),p=u?o.form||!!u.closest("form"):!0,v=wy(u),_=o.values[r],N=_===void 0?0:T3(_,o.min,o.max),j=_ae(r,o.values.length),S=v==null?void 0:v[c.size],w=S?bae(S,N,c.direction):0;return x.useEffect(()=>{if(u)return o.thumbs.add(u),()=>{o.thumbs.delete(u)}},[u,o.thumbs]),s.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:`calc(${N}% + ${w}px)`},children:[s.jsx(w1.ItemSlot,{scope:t.__scopeSlider,children:s.jsx(ze.span,{role:"slider","aria-label":t["aria-label"]||j,"aria-valuemin":o.min,"aria-valuenow":_,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...a,ref:f,style:_===void 0?{display:"none"}:t.style,onFocus:Ee(t.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),p&&s.jsx(k3,{name:i??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:_},r)]})});C3.displayName=j1;var xae="RadioBubbleInput",k3=x.forwardRef(({__scopeSlider:t,value:e,...n},r)=>{const i=x.useRef(null),a=ot(i,r),o=Ay(e);return x.useEffect(()=>{const c=i.current;if(!c)return;const u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"value").set;if(o!==e&&f){const p=new Event("input",{bubbles:!0});f.call(c,e),c.dispatchEvent(p)}},[o,e]),s.jsx(ze.input,{style:{display:"none"},...n,ref:a,defaultValue:e})});k3.displayName=xae;function yae(t=[],e,n){const r=[...t];return r[n]=e,r.sort((i,a)=>i-a)}function T3(t,e,n){const a=100/(n-e)*(t-e);return bm(a,[0,100])}function _ae(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function wae(t,e){if(t.length===1)return 0;const n=t.map(i=>Math.abs(i-e)),r=Math.min(...n);return n.indexOf(r)}function bae(t,e,n){const r=t/2,a=zN([0,50],[0,r]);return(r-a(e)*n)*n}function jae(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function Nae(t,e){if(e>0){const n=jae(t);return Math.min(...n)>=e}return!0}function zN(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function Sae(t){return(String(t).split(".")[1]||"").length}function Eae(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var P3=_3,Cae=S3,kae=E3,Tae=C3;const I3=x.forwardRef(({className:t,...e},n)=>s.jsxs(P3,{ref:n,className:Xe("relative flex w-full touch-none select-none items-center",t),...e,children:[s.jsx(Cae,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:s.jsx(kae,{className:"absolute h-full bg-primary"})}),s.jsx(Tae,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));I3.displayName=P3.displayName;const hp=Yc({title:_t().min(5,"Le titre doit contenir au moins 5 caractères").max(80,"Le titre ne peut pas dépasser 80 caractères"),description:_t().min(20,"La description doit contenir au moins 20 caractères").max(1e3,"La description ne peut pas dépasser 1000 caractères"),tags:LN(_t()).min(1,"Ajoutez au moins un tag").max(5,"Maximum 5 tags"),meetingLocation:_t().min(1,"Veuillez spécifier un lieu de rencontre")}),Pae=hp.extend({price:_t().min(1,"Le prix est obligatoire").transform(t=>{const e=parseFloat(t.replace(",","."));if(isNaN(e)||e<1)throw new Error("Le prix doit être d'au moins 1€");if(e>1e4)throw new Error("Le prix ne peut pas dépasser 10 000€");return e}),condition:oae(["new","like-new","good","fair"]),paymentMethods:LN(_t()).min(1,"Sélectionnez au moins un mode de paiement")}),Iae=hp.extend({donationReason:_t().min(10,"Expliquez pourquoi vous donnez cet objet").max(140,"Maximum 140 caractères")}),Aae=hp.extend({desiredItems:LN(_t()).min(1,"Ajoutez au moins un objet recherché"),estimatedValue:_t().min(1,"La valeur estimée est obligatoire").transform(t=>{const e=parseFloat(t.replace(",","."));if(isNaN(e)||e<1)throw new Error("La valeur estimée doit être d'au moins 1€");return e})}),Rae=hp.extend({hourlyRate:_t().min(1,"Le tarif horaire est obligatoire").transform(t=>{const e=parseFloat(t.replace(",","."));if(isNaN(e)||e<5)throw new Error("Le tarif horaire doit être d'au moins 5€/h");if(e>200)throw new Error("Le tarif ne peut pas dépasser 200€/h");return e}),duration:l3().min(1,"La durée doit être d'au moins 1 heure").max(720,"Maximum 720 heures"),skills:_t().min(20,"Décrivez vos compétences en détail").max(500,"Maximum 500 caractères"),availability:_t().optional()}),Mae=[{value:"new",label:"Neuf",description:"Jamais utilisé, dans son emballage"},{value:"like-new",label:"Très bon",description:"Utilisé très peu, aucun défaut visible"},{value:"good",label:"Bon",description:"Utilisé mais bien entretenu"},{value:"fair",label:"Correct",description:"Signes d'usure mais fonctionnel"}],Kk=[{value:"cash",label:"Espèces",icon:_4},{value:"transfer",label:"Virement bancaire",icon:Ln},{value:"lydia",label:"Lydia",icon:Hc},{value:"paypal",label:"PayPal",icon:Ln}];delete uh.Icon.Default.prototype._getIconUrl;uh.Icon.Default.mergeOptions({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"});const Dae=()=>{var xe,Fe,je,Ce,Re,Me,lt,wt;const{currentUser:t,userProfile:e}=yn(),{createListing:n}=ap(),r=ar(),[i]=Cb(),[a,o]=x.useState(()=>i.get("type")||"sell"),[c,u]=x.useState([]),[h,f]=x.useState(!1),[p,v]=x.useState(""),[_,N]=x.useState([]),[j,S]=x.useState(!1),[w,y]=x.useState([""]),[E,I]=x.useState(""),[D,B]=x.useState([]),[R,F]=x.useState([1]),[V,k]=x.useState(null),[M,O]=x.useState(!1),W=gc({resolver:vc((()=>{switch(a){case"sell":return Pae;case"gift":return Iae;case"swap":return Aae;case"service":return Rae;default:return hp}})()),defaultValues:{title:"",description:"",price:"",condition:"good",paymentMethods:[],donationReason:"",desiredItems:[],estimatedValue:"",hourlyRate:"",duration:1,skills:"",availability:"",tags:[],meetingLocation:""},mode:"onChange"});x.useEffect(()=>{W.reset({title:"",description:"",price:"",condition:"good",paymentMethods:[],donationReason:"",desiredItems:[],estimatedValue:"",hourlyRate:"",duration:1,skills:"",availability:"",tags:[],meetingLocation:""}),N([]),y([""]),B([]),F([1]),u([])},[a,W]);const X=async de=>{if(!t)throw new Error("User not authenticated");const Ye=Date.now(),vt=`listings/${t.uid}/${Ye}_${de.name}`,an=Lj(Vj,vt),G=await Dj(an,de);return await Oj(G.ref)},ee=async de=>{const Ye=de.target.files;if(!(!Ye||Ye.length===0)){f(!0);try{const an=Array.from(Ye).slice(0,10-c.length).filter(te=>te.size<=15728640).map(te=>X(te)),G=await Promise.all(an);u(te=>[...te,...G])}catch(vt){console.error("Error uploading images:",vt)}finally{f(!1)}}},Z=de=>{u(Ye=>Ye.filter((vt,an)=>an!==de))},U=()=>{if(p.trim()&&!_.includes(p.trim())&&_.length<5){const de=[..._,p.trim()];N(de),W.setValue("tags",de),v("")}},q=de=>{const Ye=_.filter(vt=>vt!==de);N(Ye),W.setValue("tags",Ye)},H=()=>{if(E.trim()){const de=[...w.filter(Ye=>Ye.trim()),E.trim()];y(de),W.setValue("desiredItems",de),I("")}},Q=de=>{const Ye=w.filter((vt,an)=>an!==de);y(Ye),W.setValue("desiredItems",Ye)},he=(de,Ye)=>{const vt=Ye?[...D,de]:D.filter(an=>an!==de);B(vt),W.setValue("paymentMethods",vt)};async function ye(de){const vt=await(await fetch(`https://nominatim.openstreetmap.org/search?format=jsonv2&q=${encodeURIComponent(de)}`)).json();return vt&&vt[0]?[parseFloat(vt[0].lat),parseFloat(vt[0].lon)]:null}x.useEffect(()=>{const de=W.watch("meetingLocation");de&&de.length>5&&ye(de).then(Ye=>{Ye&&k(Ye)})},[W.watch("meetingLocation")]);const Ue=async de=>{if(!(!t||!e)){S(!0);try{const Ye={title:de.title,description:de.description,currency:"EUR",category:"electronics",images:c,tags:de.tags,location:{city:"Paris",state:"Île-de-France",country:"France",campus:e.campus||void 0,university:e.university||void 0,coordinates:void 0},sellerId:t.uid,sellerName:e.displayName,sellerAvatar:e.photoURL,sellerUniversity:e.university,sellerVerified:e.isVerified,status:"active",views:0,likes:0,saves:0,reportCount:0,moderationStatus:"approved"};let vt;switch(a){case"sell":vt={...Ye,price:de.price,condition:de.condition,transactionType:"sale",description:`${de.description}

Modes de paiement acceptés: ${D.map(G=>{var te;return(te=Kk.find(le=>le.value===G))==null?void 0:te.label}).join(", ")}`};break;case"gift":vt={...Ye,price:0,condition:"good",transactionType:"donation",description:`${de.description}

Raison du don: ${de.donationReason}`};break;case"swap":vt={...Ye,price:de.estimatedValue,condition:"good",transactionType:"exchange",exchangeFor:w.filter(G=>G.trim()).join(", "),description:`${de.description}

Recherche en échange: ${w.filter(G=>G.trim()).join(", ")}
Valeur estimée: ${de.estimatedValue}€`};break;case"service":vt={...Ye,price:de.hourlyRate,condition:"new",transactionType:"service",description:`${de.description}

Compétences: ${de.skills}
Tarif: ${de.hourlyRate}€/h
Durée prévue: ${R[0]}h${de.availability?`
Disponibilités: ${de.availability}`:""}`};break;default:throw new Error("Type de transaction non supporté")}console.log("Submitting listing data:",vt);const an=await n(vt);r(`/listing/${an}`)}catch(Ye){console.error("Error creating listing:",Ye)}finally{S(!1)}}},He=()=>{const de=W.formState.errors,Ye=W.watch("title")&&W.watch("description")&&W.watch("meetingLocation")&&_.length>0;switch(a){case"sell":return Ye&&W.watch("price")&&D.length>0&&!de.title&&!de.description&&!de.price;case"gift":return Ye&&W.watch("donationReason")&&!de.title&&!de.description&&!de.donationReason;case"swap":return Ye&&w.some(vt=>vt.trim())&&W.watch("estimatedValue")&&!de.title&&!de.description&&!de.estimatedValue;case"service":return Ye&&W.watch("hourlyRate")&&W.watch("skills")&&!de.title&&!de.description&&!de.hourlyRate&&!de.skills;default:return!1}},re=()=>{if(!navigator.geolocation){alert("La géolocalisation n'est pas supportée par ce navigateur.");return}O(!0),navigator.geolocation.getCurrentPosition(async de=>{const{latitude:Ye,longitude:vt}=de.coords;k([Ye,vt]);const G=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${Ye}&lon=${vt}`)).json();G&&G.display_name&&W.setValue("meetingLocation",G.display_name,{shouldValidate:!0}),O(!1)},()=>{alert("Impossible d'accéder à la position."),O(!1)})};function ce(){return CN({click:async de=>{k([de.latlng.lat,de.latlng.lng]),O(!0);const vt=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${de.latlng.lat}&lon=${de.latlng.lng}`)).json();vt&&vt.display_name&&W.setValue("meetingLocation",vt.display_name,{shouldValidate:!0}),O(!1)}}),V?s.jsx(TN,{position:V}):null}return s.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-2 text-foreground",children:"Créer une annonce"}),s.jsx("p",{className:"text-muted-foreground",children:"Partagez vos objets, services ou recherches avec la communauté étudiante vérifiée"})]}),s.jsxs("form",{onSubmit:W.handleSubmit(Ue),className:"space-y-8",children:[s.jsxs(ae,{children:[s.jsxs(qe,{children:[s.jsxs(Ge,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(Ww,{className:"w-5 h-5"}),"Type d'annonce"]}),s.jsx(Tt,{children:"Le formulaire s'adapte automatiquement selon votre choix"})]}),s.jsx(oe,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(ae,{className:`cursor-pointer transition-all ${a==="sell"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("sell"),children:s.jsxs(oe,{className:"p-4 text-center",children:[s.jsx(Kv,{className:"w-8 h-8 mx-auto mb-2 text-blue-600"}),s.jsx("h3",{className:"font-semibold text-foreground",children:"Vendre"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Vendre un objet"})]})}),s.jsx(ae,{className:`cursor-pointer transition-all ${a==="gift"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("gift"),children:s.jsxs(oe,{className:"p-4 text-center",children:[s.jsx(kd,{className:"w-8 h-8 mx-auto mb-2 text-green-600"}),s.jsx("h3",{className:"font-semibold text-foreground",children:"Donner"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Don gratuit"})]})}),s.jsx(ae,{className:`cursor-pointer transition-all ${a==="swap"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("swap"),children:s.jsxs(oe,{className:"p-4 text-center",children:[s.jsx(to,{className:"w-8 h-8 mx-auto mb-2 text-purple-600"}),s.jsx("h3",{className:"font-semibold text-foreground",children:"Troc"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Échanger des objets"})]})}),s.jsx(ae,{className:`cursor-pointer transition-all ${a==="service"?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"}`,onClick:()=>o("service"),children:s.jsxs(oe,{className:"p-4 text-center",children:[s.jsx(Vn,{className:"w-8 h-8 mx-auto mb-2 text-orange-600"}),s.jsx("h3",{className:"font-semibold text-foreground",children:"Service"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Proposer un service"})]})})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs(ae,{children:[s.jsx(qe,{children:s.jsx(Ge,{className:"text-foreground",children:"Informations principales"})}),s.jsxs(oe,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(be,{htmlFor:"title",className:"text-foreground",children:"Titre * (max 80 caractères)"}),s.jsx(We,{id:"title",placeholder:a==="sell"?"Ex: MacBook Pro 13' M1 - Parfait état":a==="gift"?"Ex: Vélo de ville - Don gratuit":a==="swap"?"Ex: Livre de maths contre livre de physique":"Ex: Cours particuliers de mathématiques",...W.register("title"),className:"mt-1",maxLength:80}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[s.jsx("span",{className:"text-destructive",children:(xe=W.formState.errors.title)==null?void 0:xe.message}),s.jsxs("span",{children:[((Fe=W.watch("title"))==null?void 0:Fe.length)||0,"/80"]})]})]}),s.jsxs("div",{children:[s.jsx(be,{htmlFor:"description",className:"text-foreground",children:"Description détaillée * (max 1000 caractères)"}),s.jsx(Qs,{id:"description",placeholder:a==="sell"?"Décrivez l'état, l'utilisation, la raison de la vente...":a==="gift"?"Décrivez l'objet et pourquoi vous le donnez...":a==="swap"?"Décrivez ce que vous proposez et ce que vous recherchez...":"Décrivez vos compétences, votre expérience, votre méthode...",rows:6,...W.register("description"),className:"mt-1",maxLength:1e3}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[s.jsx("span",{className:"text-destructive",children:(je=W.formState.errors.description)==null?void 0:je.message}),s.jsxs("span",{children:[((Ce=W.watch("description"))==null?void 0:Ce.length)||0,"/1000"]})]})]})]})]}),a==="sell"&&s.jsxs(ae,{children:[s.jsx(qe,{children:s.jsxs(Ge,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(Kv,{className:"w-5 h-5 text-blue-600"}),"Informations de vente"]})}),s.jsxs(oe,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(be,{htmlFor:"price",className:"text-foreground",children:"Prix (€) *"}),s.jsx(We,{id:"price",type:"text",placeholder:"0,00",...W.register("price"),className:"mt-1"}),W.formState.errors.price&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:W.formState.errors.price.message})]}),s.jsxs("div",{children:[s.jsx(be,{htmlFor:"condition",className:"text-foreground",children:"État du produit *"}),s.jsxs(Jt,{onValueChange:de=>W.setValue("condition",de),children:[s.jsx(qt,{className:"mt-1",children:s.jsx(en,{placeholder:"Sélectionnez un état"})}),s.jsx(Ht,{children:Mae.map(de=>s.jsx(Ve,{value:de.value,children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-foreground",children:de.label}),s.jsx("div",{className:"text-xs text-muted-foreground",children:de.description})]})},de.value))})]}),W.formState.errors.condition&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:W.formState.errors.condition.message})]})]}),s.jsxs("div",{children:[s.jsx(be,{className:"text-foreground",children:"Modes de paiement acceptés *"}),s.jsx("div",{className:"grid grid-cols-2 gap-3 mt-2",children:Kk.map(de=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(vx,{id:de.value,checked:D.includes(de.value),onCheckedChange:Ye=>he(de.value,Ye)}),s.jsxs(be,{htmlFor:de.value,className:"flex items-center gap-2 cursor-pointer text-foreground",children:[s.jsx(de.icon,{className:"w-4 h-4"}),de.label]})]},de.value))}),D.length===0&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:"Sélectionnez au moins un mode de paiement"})]})]})]}),a==="gift"&&s.jsxs(ae,{children:[s.jsx(qe,{children:s.jsxs(Ge,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(kd,{className:"w-5 h-5 text-green-600"}),"Informations du don"]})}),s.jsx(oe,{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx(be,{htmlFor:"donationReason",className:"text-foreground",children:"Motif du don * (max 140 caractères)"}),s.jsx(Qs,{id:"donationReason",placeholder:"Ex: Je déménage, plus besoin, fin d'études...",rows:3,...W.register("donationReason"),className:"mt-1",maxLength:140}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[s.jsx("span",{className:"text-destructive",children:(Re=W.formState.errors.donationReason)==null?void 0:Re.message}),s.jsxs("span",{children:[((Me=W.watch("donationReason"))==null?void 0:Me.length)||0,"/140"]})]})]})})]}),a==="swap"&&s.jsxs(ae,{children:[s.jsx(qe,{children:s.jsxs(Ge,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(to,{className:"w-5 h-5 text-purple-600"}),"Informations d'échange"]})}),s.jsxs(oe,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(be,{className:"text-foreground",children:"Objets recherchés * (minimum 1)"}),s.jsxs("div",{className:"space-y-2 mt-2",children:[w.filter(de=>de.trim()).map((de,Ye)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(We,{value:de,readOnly:!0,className:"flex-1"}),s.jsx(Y,{type:"button",variant:"outline",size:"icon",onClick:()=>Q(Ye),children:s.jsx(I4,{className:"w-4 h-4"})})]},Ye)),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(We,{placeholder:"Ex: Livre de physique L2",value:E,onChange:de=>I(de.target.value),onKeyPress:de=>de.key==="Enter"&&(de.preventDefault(),H()),className:"flex-1"}),s.jsx(Y,{type:"button",onClick:H,disabled:!E.trim(),children:s.jsx(fc,{className:"w-4 h-4"})})]})]})]}),s.jsxs("div",{children:[s.jsx(be,{htmlFor:"estimatedValue",className:"text-foreground",children:"Valeur estimée (€) *"}),s.jsx(We,{id:"estimatedValue",type:"text",placeholder:"0,00",...W.register("estimatedValue"),className:"mt-1"}),W.formState.errors.estimatedValue&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:W.formState.errors.estimatedValue.message})]})]})]}),a==="service"&&s.jsxs(ae,{children:[s.jsx(qe,{children:s.jsxs(Ge,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(Vn,{className:"w-5 h-5 text-orange-600"}),"Informations du service"]})}),s.jsxs(oe,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(be,{htmlFor:"skills",className:"text-foreground",children:"Description des compétences *"}),s.jsx(Qs,{id:"skills",placeholder:"Décrivez vos compétences, votre expérience, votre méthode d'enseignement...",rows:4,...W.register("skills"),className:"mt-1",maxLength:500}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[s.jsx("span",{className:"text-destructive",children:(lt=W.formState.errors.skills)==null?void 0:lt.message}),s.jsxs("span",{children:[((wt=W.watch("skills"))==null?void 0:wt.length)||0,"/500"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(be,{htmlFor:"hourlyRate",className:"text-foreground",children:"Tarif horaire (€/h) *"}),s.jsx(We,{id:"hourlyRate",type:"text",placeholder:"15,00",...W.register("hourlyRate"),className:"mt-1"}),W.formState.errors.hourlyRate&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:W.formState.errors.hourlyRate.message})]}),s.jsxs("div",{children:[s.jsxs(be,{className:"text-foreground",children:["Durée prévue: ",R[0],"h"]}),s.jsx(I3,{value:R,onValueChange:de=>{F(de),W.setValue("duration",de[0])},max:720,min:1,step:1,className:"mt-2"}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[s.jsx("span",{children:"1h"}),s.jsx("span",{children:"720h"})]})]})]}),s.jsxs("div",{children:[s.jsx(be,{htmlFor:"availability",className:"text-foreground",children:"Disponibilités (optionnel)"}),s.jsx(We,{id:"availability",placeholder:"Ex: Lundi-Vendredi 18h-20h, Week-ends",...W.register("availability"),className:"mt-1"})]})]})]}),s.jsxs(ae,{children:[s.jsxs(qe,{children:[s.jsxs(Ge,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(hc,{className:"w-5 h-5"}),"Photos ",a==="gift"?"(optionnelles)":"(1-10 photos)"]}),s.jsx(Tt,{children:a==="gift"?"Ajoutez des photos pour donner envie (optionnel)":"Première photo = photo principale. Max 15MB par image."})]}),s.jsx(oe,{children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-4",children:[c.map((de,Ye)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:de,alt:`Photo ${Ye+1}`,className:"w-full h-20 object-cover rounded-lg"}),s.jsx(Y,{type:"button",variant:"destructive",size:"icon",className:"absolute top-1 right-1 w-5 h-5 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>Z(Ye),children:s.jsx(Hw,{className:"w-3 h-3"})}),Ye===0&&s.jsx(et,{className:"absolute bottom-1 left-1 text-xs bg-primary text-primary-foreground",children:"Principale"})]},Ye)),c.length<10&&s.jsxs("label",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg h-20 flex items-center justify-center cursor-pointer hover:border-primary/50 transition-colors",children:[s.jsxs("div",{className:"text-center",children:[h?s.jsx("div",{className:"w-5 h-5 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-1"}):s.jsx(qw,{className:"w-5 h-5 mx-auto mb-1 text-muted-foreground"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:h?"Upload...":"Ajouter"})]}),s.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:ee,className:"hidden",disabled:h})]})]})})]}),s.jsxs(ae,{children:[s.jsx(qe,{children:s.jsxs(Ge,{className:"flex items-center gap-2 text-foreground",children:[s.jsx(pm,{className:"w-5 h-5"}),"Tags et localisation"]})}),s.jsxs(oe,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(be,{className:"text-foreground",children:"Tags * (max 5)"}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:_.map(de=>s.jsxs(et,{variant:"secondary",className:"flex items-center gap-1",children:[de,s.jsx(Y,{type:"button",variant:"ghost",size:"icon",className:"w-4 h-4 p-0 hover:bg-transparent",onClick:()=>q(de),children:s.jsx(Hw,{className:"w-3 h-3"})})]},de))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(We,{placeholder:"Ajouter un tag...",value:p,onChange:de=>v(de.target.value),onKeyPress:de=>de.key==="Enter"&&(de.preventDefault(),U()),className:"flex-1"}),s.jsx(Y,{type:"button",onClick:U,disabled:!p.trim()||_.length>=5,children:"Ajouter"})]}),_.length===0&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:"Ajoutez au moins un tag"})]}),s.jsxs("div",{children:[s.jsx(be,{htmlFor:"meetingLocation",className:"text-foreground",children:"Point de rencontre *"}),s.jsxs("div",{className:"flex gap-2 mt-1",children:[s.jsx(We,{id:"meetingLocation",placeholder:"Ex: Bibliothèque universitaire, Hall principal...",...W.register("meetingLocation"),className:"flex-1"}),s.jsx(Y,{type:"button",variant:"outline",onClick:re,disabled:M,title:"Détecter ma position",children:M?s.jsx("span",{className:"animate-spin",children:"📍"}):s.jsx("span",{children:"📍"})})]}),W.formState.errors.meetingLocation&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:W.formState.errors.meetingLocation.message}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Privilégiez les lieux publics et fréquentés"}),s.jsx("div",{className:"mt-3",children:s.jsxs(kN,{center:V||[48.8584,2.2945],zoom:15,style:{height:200,width:"100%"},children:[s.jsx(PN,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"© OpenStreetMap contributors"}),s.jsx(ce,{})]})})]})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ae,{children:[s.jsx(qe,{children:s.jsxs(Ge,{className:"flex items-center gap-2 text-sm text-foreground",children:[s.jsx(Mf,{className:"w-4 h-4"}),"Validation"]})}),s.jsx(oe,{children:s.jsxs("div",{className:"space-y-2 text-xs",children:[s.jsxs("div",{className:`flex items-center gap-2 ${W.watch("title")&&W.watch("title").length>=5?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${W.watch("title")&&W.watch("title").length>=5?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Titre (5-80 caractères)"})]}),s.jsxs("div",{className:`flex items-center gap-2 ${W.watch("description")&&W.watch("description").length>=20?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${W.watch("description")&&W.watch("description").length>=20?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Description (20-1000 caractères)"})]}),s.jsxs("div",{className:`flex items-center gap-2 ${_.length>0?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${_.length>0?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Tags (1-5)"})]}),s.jsxs("div",{className:`flex items-center gap-2 ${W.watch("meetingLocation")?"text-green-600":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${W.watch("meetingLocation")?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{children:"Point de rencontre"})]})]})})]}),s.jsxs(ae,{children:[s.jsx(qe,{children:s.jsxs(Ge,{className:"flex items-center gap-2 text-sm text-foreground",children:[s.jsx(Vt,{className:"w-4 h-4"}),"Conseils de sécurité"]})}),s.jsx(oe,{children:s.jsxs("div",{className:"space-y-2 text-xs",children:[s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),s.jsx("span",{className:"text-muted-foreground",children:"Rencontrez-vous dans un lieu public"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),s.jsx("span",{className:"text-muted-foreground",children:"Vérifiez l'identité de l'autre personne"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),s.jsx("span",{className:"text-muted-foreground",children:"Testez l'objet avant la transaction"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mt-2 flex-shrink-0"}),s.jsx("span",{className:"text-muted-foreground",children:"Privilégiez les paiements sécurisés"})]})]})})]}),s.jsx(ae,{children:s.jsxs(oe,{className:"pt-6",children:[s.jsx(Y,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 text-white",disabled:j||!He()||h,children:j?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Publication..."]}):h?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Upload des images..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ww,{className:"w-4 h-4 mr-2"}),"Publier l'annonce"]})}),s.jsx("p",{className:"text-xs text-muted-foreground text-center mt-2",children:He()?"Votre annonce sera visible immédiatement":"Complétez tous les champs obligatoires"})]})})]})]})]})]})};var qy="Tabs",[Oae,oce]=jr(qy,[jy]),A3=jy(),[Lae,UN]=Oae(qy),R3=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:a,orientation:o="horizontal",dir:c,activationMode:u="automatic",...h}=t,f=Gc(c),[p,v]=Ts({prop:r,onChange:i,defaultProp:a??"",caller:qy});return s.jsx(Lae,{scope:n,baseId:Es(),value:p,onValueChange:v,orientation:o,dir:f,activationMode:u,children:s.jsx(ze.div,{dir:f,"data-orientation":o,...h,ref:e})})});R3.displayName=qy;var M3="TabsList",D3=x.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,a=UN(M3,n),o=A3(n);return s.jsx(gM,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:r,children:s.jsx(ze.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:e})})});D3.displayName=M3;var O3="TabsTrigger",L3=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...a}=t,o=UN(O3,n),c=A3(n),u=z3(o.baseId,r),h=U3(o.baseId,r),f=r===o.value;return s.jsx(vM,{asChild:!0,...c,focusable:!i,active:f,children:s.jsx(ze.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":h,"data-state":f?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:u,...a,ref:e,onMouseDown:Ee(t.onMouseDown,p=>{!i&&p.button===0&&p.ctrlKey===!1?o.onValueChange(r):p.preventDefault()}),onKeyDown:Ee(t.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&o.onValueChange(r)}),onFocus:Ee(t.onFocus,()=>{const p=o.activationMode!=="manual";!f&&!i&&p&&o.onValueChange(r)})})})});L3.displayName=O3;var F3="TabsContent",V3=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:a,...o}=t,c=UN(F3,n),u=z3(c.baseId,r),h=U3(c.baseId,r),f=r===c.value,p=x.useRef(f);return x.useEffect(()=>{const v=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(v)},[]),s.jsx(Nr,{present:i||f,children:({present:v})=>s.jsx(ze.div,{"data-state":f?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":u,hidden:!v,id:h,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:p.current?"0s":void 0},children:v&&a})})});V3.displayName=F3;function z3(t,e){return`${t}-trigger-${e}`}function U3(t,e){return`${t}-content-${e}`}var Fae=R3,$3=D3,B3=L3,W3=V3;const Qc=Fae,Dl=x.forwardRef(({className:t,...e},n)=>s.jsx($3,{ref:n,className:Xe("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...e}));Dl.displayName=$3.displayName;const cn=x.forwardRef(({className:t,...e},n)=>s.jsx(B3,{ref:n,className:Xe("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...e}));cn.displayName=B3.displayName;const un=x.forwardRef(({className:t,...e},n)=>s.jsx(W3,{ref:n,className:Xe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));un.displayName=W3.displayName;const q3=({currentPhotoURL:t,displayName:e})=>{var w,y;const{currentUser:n,updateUserProfile:r}=yn(),[i,a]=x.useState(!1),[o,c]=x.useState(!1),[u,h]=x.useState(null),[f,p]=x.useState(null),v=x.useRef(null),_=E=>{var B;const I=(B=E.target.files)==null?void 0:B[0];if(!I)return;if(!I.type.startsWith("image/")){fe.error("Veuillez sélectionner une image");return}if(I.size>5*1024*1024){fe.error("L'image ne doit pas dépasser 5MB");return}p(I);const D=new FileReader;D.onload=R=>{var F;h((F=R.target)==null?void 0:F.result)},D.readAsDataURL(I)},N=async()=>{if(!(!f||!n)){c(!0);try{const E=`profile-photos/${n.uid}-${Date.now()}.${f.name.split(".").pop()}`,I=Lj(Vj,E),D=await Dj(I,f),B=await Oj(D.ref);await im(n,{photoURL:B}),await r({photoURL:B}),fe.success("Photo de profil mise à jour !"),a(!1),h(null),p(null)}catch(E){console.error("Erreur lors de l'upload:",E),fe.error("Erreur lors de la mise à jour de la photo")}finally{c(!1)}}},j=async()=>{if(n){c(!0);try{await im(n,{photoURL:null}),await r({photoURL:null}),fe.success("Photo de profil supprimée"),a(!1)}catch(E){console.error("Erreur lors de la suppression:",E),fe.error("Erreur lors de la suppression de la photo")}finally{c(!1)}}},S=()=>{p(null),h(null),v.current&&(v.current.value="")};return s.jsxs(aa,{open:i,onOpenChange:a,children:[s.jsx(cd,{asChild:!0,children:s.jsxs("div",{className:"relative group cursor-pointer",children:[s.jsxs(so,{className:"h-20 w-20",children:[s.jsx(io,{src:t||""}),s.jsx(ao,{className:"text-lg bg-gradient-to-br from-primary to-secondary text-white",children:((w=e[0])==null?void 0:w.toUpperCase())||"U"})]}),s.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(hc,{className:"w-6 h-6 text-white"})}),s.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-primary rounded-full flex items-center justify-center border-2 border-background",children:s.jsx(hc,{className:"w-3 h-3 text-white"})})]})}),s.jsxs(wi,{className:"max-w-md",children:[s.jsx(oa,{children:s.jsxs(bi,{className:"flex items-center gap-2",children:[s.jsx(hc,{className:"w-5 h-5"}),"Photo de profil"]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex justify-center",children:s.jsxs(so,{className:"h-32 w-32",children:[s.jsx(io,{src:u||t||""}),s.jsx(ao,{className:"text-2xl bg-gradient-to-br from-primary to-secondary text-white",children:((y=e[0])==null?void 0:y.toUpperCase())||"U"})]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("input",{ref:v,type:"file",accept:"image/*",onChange:_,className:"hidden"}),f?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"text-sm text-muted-foreground text-center",children:[s.jsx("p",{className:"font-medium",children:f.name}),s.jsxs("p",{children:[(f.size/1024/1024).toFixed(2)," MB"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Y,{onClick:S,variant:"outline",className:"flex-1",disabled:o,children:"Annuler"}),s.jsx(Y,{onClick:N,className:"flex-1",disabled:o,children:o?s.jsxs(s.Fragment,{children:[s.jsx(qr,{className:"w-4 h-4 mr-2 animate-spin"}),"Upload..."]}):s.jsxs(s.Fragment,{children:[s.jsx(qw,{className:"w-4 h-4 mr-2"}),"Confirmer"]})})]})]}):s.jsxs("div",{className:"space-y-3",children:[s.jsxs(Y,{onClick:()=>{var E;return(E=v.current)==null?void 0:E.click()},variant:"outline",className:"w-full",children:[s.jsx(qw,{className:"w-4 h-4 mr-2"}),"Choisir une photo"]}),t&&s.jsxs(Y,{onClick:j,variant:"outline",disabled:o,className:"w-full text-destructive hover:text-destructive",children:[o?s.jsx(qr,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(Hw,{className:"w-4 h-4 mr-2"}),"Supprimer la photo"]})]})]}),s.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[s.jsx("p",{children:"• Formats acceptés : JPG, PNG, GIF"}),s.jsx("p",{children:"• Taille maximale : 5MB"}),s.jsx("p",{children:"• Recommandé : image carrée, minimum 200x200px"})]})]})]})]})},Ur=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(typeof t=="object"&&t!==null&&"toDate"in t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return typeof t=="object"&&t!==null&&"seconds"in t&&typeof t.seconds=="number"?new Date(t.seconds*1e3):new Date},Vae=()=>{const{currentUser:t,userProfile:e}=yn(),[n,r]=x.useState([]),[i,a]=x.useState([]),[o,c]=x.useState([]),[u,h]=x.useState(null),[f,p]=x.useState({totalListings:0,activeListings:0,totalReviews:0,averageRating:0,totalFavorites:0}),[v,_]=x.useState({profile:!0,listings:!0,reviews:!0,favorites:!0}),[N,j]=x.useState({}),[S,w]=x.useState(null),[y,E]=x.useState(""),I=async()=>{if(t)try{_(ce=>({...ce,profile:!0}));const re=await Ss(xt(De,"users",t.uid));if(re.exists()){const ce=re.data();h({...ce,createdAt:Ur(ce.createdAt),updatedAt:Ur(ce.updatedAt)})}else console.log("Aucun document utilisateur trouvé dans Firestore"),h(null)}catch(re){console.error("Erreur lors du chargement du profil:",re),h(null)}finally{_(re=>({...re,profile:!1}))}};x.useEffect(()=>{t&&(I(),D(),B(),R())},[t]);const D=async()=>{if(t)try{_(je=>({...je,listings:!0}));const re=vn(Ft(De,"listings"),Zn("sellerId","==",t.uid),Ks(20)),ce=await On(re),xe=[];ce.forEach(je=>{const Ce=je.data();xe.push({id:je.id,...Ce,createdAt:Ur(Ce.createdAt),updatedAt:Ur(Ce.updatedAt)})}),xe.sort((je,Ce)=>Ur(Ce.createdAt).getTime()-Ur(je.createdAt).getTime()),r(xe);const Fe=xe.filter(je=>je.status==="active");p(je=>({...je,totalListings:xe.length,activeListings:Fe.length}))}catch(re){console.error("Erreur lors du chargement des annonces:",re)}finally{_(re=>({...re,listings:!1}))}},B=async()=>{if(t)try{_(Me=>({...Me,reviews:!0}));const re=vn(Ft(De,"reviews"),Zn("revieweeId","==",t.uid),Ks(10)),ce=await On(re),xe=[];ce.forEach(Me=>{const lt=Me.data();xe.push({id:Me.id,...lt,replies:Array.isArray(lt.replies)?lt.replies.map(wt=>({...wt,createdAt:wt.createdAt instanceof Date?wt.createdAt:wt.createdAt&&typeof wt.createdAt.toDate=="function"?wt.createdAt.toDate():new Date})):[],likes:Array.isArray(lt.likes)?lt.likes:[],dislikes:Array.isArray(lt.dislikes)?lt.dislikes:[],createdAt:Ur(lt.createdAt)})}),xe.sort((Me,lt)=>Ur(lt.createdAt).getTime()-Ur(Me.createdAt).getTime()),a(xe);const Fe=Array.from(new Set(xe.map(Me=>Me.reviewerId))),je={...N};await Promise.all(Fe.map(async Me=>{if(!je[Me]){const lt=await Ss(xt(De,"users",Me));if(lt.exists()){const wt=lt.data();je[Me]={displayName:wt.displayName||"Utilisateur",photoURL:wt.photoURL||void 0}}else je[Me]={displayName:""}}})),j(je);const Ce=xe.reduce((Me,lt)=>Me+lt.rating,0),Re=xe.length>0?Ce/xe.length:0;p(Me=>({...Me,totalReviews:xe.length,averageRating:Math.round(Re*10)/10}))}catch(re){console.error("Erreur lors du chargement des avis:",re)}finally{_(re=>({...re,reviews:!1}))}},R=async()=>{if(t)try{_(Fe=>({...Fe,favorites:!0}));const re=vn(Ft(De,"favorites"),Zn("userId","==",t.uid),Ks(20)),ce=await On(re),xe=[];if(ce.forEach(Fe=>{const je=Fe.data();xe.push({id:Fe.id,...je,createdAt:Ur(je.createdAt)})}),xe.sort((Fe,je)=>Ur(je.createdAt).getTime()-Ur(Fe.createdAt).getTime()),p(Fe=>({...Fe,totalFavorites:xe.length})),xe.length>0){const Fe=xe.slice(0,6).map(async Ce=>{try{const Re=await Ss(xt(De,"listings",Ce.listingId));if(Re.exists()){const Me=Re.data();return{id:Re.id,...Me,createdAt:Ur(Me.createdAt),updatedAt:Ur(Me.updatedAt)}}return null}catch(Re){return console.error("Erreur lors du chargement d'une annonce favorite:",Re),null}}),je=await Promise.all(Fe);c(je.filter(Ce=>Ce!==null))}}catch(re){console.error("Erreur lors du chargement des favoris:",re)}finally{_(re=>({...re,favorites:!1}))}},F=re=>{if(!re)return"Date inconnue";try{const ce=Ur(re);return isNaN(ce.getTime())?"Date invalide":lh(ce,{addSuffix:!0,locale:Mr})}catch{return"Date invalide"}},V=re=>Array.from({length:5},(ce,xe)=>s.jsx(Go,{className:`h-4 w-4 ${xe<re?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},xe)),k=localStorage.getItem("pendingUserData"),M=k?JSON.parse(k):{};let O=(u==null?void 0:u.displayName)||(e==null?void 0:e.displayName)||M.displayName||"";!O&&(t!=null&&t.displayName)&&(O=t.displayName),!O&&(t!=null&&t.email)&&(O=t.email.split("@")[0]),O||(O="Utilisateur");let P=(u==null?void 0:u.university)||(e==null?void 0:e.university)||M.university||"";if((u==null?void 0:u.university)==="Autre université"&&u.otherUniversity||(e==null?void 0:e.university)==="Autre université"&&e.otherUniversity||M.university==="Autre université"&&M.otherUniversity){const re=u==null?void 0:u.otherUniversity,ce=e==null?void 0:e.otherUniversity,xe=M.otherUniversity;P=re||ce||xe||"Université personnalisée"}P||(P="Université spécifiée lors de l'inscription");let W=(u==null?void 0:u.fieldOfStudy)||(e==null?void 0:e.fieldOfStudy)||M.fieldOfStudy||"";if((u==null?void 0:u.fieldOfStudy)==="Autre"&&u.otherFieldOfStudy||(e==null?void 0:e.fieldOfStudy)==="Autre"&&e.otherFieldOfStudy||M.fieldOfStudy==="Autre"&&M.otherFieldOfStudy){const re=u==null?void 0:u.otherFieldOfStudy,ce=e==null?void 0:e.otherFieldOfStudy,xe=M.otherFieldOfStudy;W=re||ce||xe||"Filière personnalisée"}W||(W="Filière non spécifiée");const X=(u==null?void 0:u.graduationYear)||(e==null?void 0:e.graduationYear)||M.graduationYear||"",ee=(u==null?void 0:u.email)||(e==null?void 0:e.email)||M.email||(t==null?void 0:t.email)||"",Z=(u==null?void 0:u.photoURL)||(e==null?void 0:e.photoURL)||"",U=(u==null?void 0:u.createdAt)||(e==null?void 0:e.createdAt),q=(u==null?void 0:u.isVerified)||(e==null?void 0:e.isVerified),H=(u==null?void 0:u.location)||(e==null?void 0:e.location)||"",Q=(u==null?void 0:u.co2Saved)||(e==null?void 0:e.co2Saved)||0,he=t&&e&&t.uid===e.id,ye=async re=>{if(t)try{const ce=xt(De,"reviews",re),xe=i.find(Ce=>Ce.id===re);if(!xe)return;const Fe=xe.likes||[],je=xe.dislikes||[];Fe.includes(t.uid)?await Tn(ce,{likes:Fe.filter(Ce=>Ce!==t.uid)}):await Tn(ce,{likes:[...Fe,t.uid],dislikes:je.filter(Ce=>Ce!==t.uid)}),a(Ce=>Ce.map(Re=>{if(Re.id===re){const Me=Re.likes||[],lt=Re.dislikes||[];return Me.includes(t.uid)?{...Re,likes:Me.filter(wt=>wt!==t.uid)}:{...Re,likes:[...Me,t.uid],dislikes:lt.filter(wt=>wt!==t.uid)}}return Re}))}catch(ce){console.error("Error liking review:",ce),nr.error("Erreur lors du like")}},Ue=async re=>{if(t)try{const ce=xt(De,"reviews",re),xe=i.find(Ce=>Ce.id===re);if(!xe)return;const Fe=xe.likes||[],je=xe.dislikes||[];je.includes(t.uid)?await Tn(ce,{dislikes:je.filter(Ce=>Ce!==t.uid)}):await Tn(ce,{dislikes:[...je,t.uid],likes:Fe.filter(Ce=>Ce!==t.uid)}),a(Ce=>Ce.map(Re=>{if(Re.id===re){const Me=Re.likes||[],lt=Re.dislikes||[];return lt.includes(t.uid)?{...Re,dislikes:lt.filter(wt=>wt!==t.uid)}:{...Re,dislikes:[...lt,t.uid],likes:Me.filter(wt=>wt!==t.uid)}}return Re}))}catch(ce){console.error("Error disliking review:",ce),nr.error("Erreur lors du dislike")}},He=async re=>{if(!(!t||!y.trim()))try{const ce=xt(De,"reviews",re),xe=i.find(je=>je.id===re);if(!xe)return;const Fe={userId:t.uid,comment:y.trim(),createdAt:new Date};await Tn(ce,{replies:[...xe.replies||[],Fe]}),a(je=>je.map(Ce=>Ce.id===re?{...Ce,replies:[...Ce.replies||[],Fe]}:Ce)),E(""),w(null),nr.success("Réponse envoyée")}catch(ce){console.error("Error replying to review:",ce),nr.error("Erreur lors de l'envoi de la réponse")}};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsx(ae,{children:s.jsx(qe,{className:"text-left",children:s.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-4 sm:space-x-4 text-center sm:text-left",children:[s.jsxs("div",{className:"relative flex-shrink-0 mx-auto sm:mx-0",children:[s.jsx(q3,{currentPhotoURL:Z,displayName:O}),q&&s.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center border-2 border-background",children:s.jsx(Vt,{className:"w-3 h-3 text-white"})})]}),s.jsxs("div",{className:"flex-1 w-full",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-2 mb-1",children:[s.jsx(Ge,{className:"text-2xl text-center sm:text-left w-full sm:w-auto",children:O}),q&&s.jsxs(et,{className:"bg-green-100 text-green-800 border-green-200 mt-2 sm:mt-0",children:[s.jsx(Vt,{className:"w-3 h-3 mr-1"}),"Vérifié"]})]}),s.jsx(Tt,{className:"text-base text-center sm:text-left break-all",children:ee}),s.jsxs("div",{className:"flex flex-col gap-1 mt-2 text-muted-foreground text-center sm:text-left",children:[s.jsxs("div",{children:[s.jsx(Zr,{className:"h-4 w-4 mr-1 inline"})," Université : ",s.jsx("span",{className:"text-sm",children:P})]}),s.jsxs("div",{children:[s.jsx(Xd,{className:"h-4 w-4 mr-1 inline"})," Filière : ",s.jsx("span",{className:"text-sm",children:W})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-bold",children:"Année de diplôme :"})," ",s.jsx("span",{className:"text-sm",children:X})]})]}),H&&s.jsxs("div",{className:"flex items-center justify-center sm:justify-start mt-1 text-muted-foreground text-center sm:text-left",children:[s.jsx(Ar,{className:"h-4 w-4 mr-1"}),s.jsx("span",{className:"text-sm",children:H})]}),s.jsxs("div",{className:"flex items-center justify-center sm:justify-start mt-1 text-muted-foreground text-center sm:text-left",children:[s.jsx(Hs,{className:"h-4 w-4 mr-1"}),s.jsxs("span",{className:"text-sm",children:["Membre depuis ",F(U)]})]}),Q&&Q>0&&s.jsxs("div",{className:"flex items-center justify-center sm:justify-start mt-1 text-green-600 text-center sm:text-left",children:[s.jsx(_i,{className:"h-4 w-4 mr-1"}),s.jsxs("span",{className:"text-sm font-medium",children:[Q," kg CO₂ économisés"]})]})]})]})})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(ae,{children:s.jsx(oe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(pn,{className:"h-5 w-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:v.listings?s.jsx("div",{className:"h-8 w-8 bg-muted animate-pulse rounded"}):f.totalListings}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Annonces totales"})]})]})})}),s.jsx(ae,{children:s.jsx(oe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Zm,{className:"h-5 w-5 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:v.listings?s.jsx("div",{className:"h-8 w-8 bg-muted animate-pulse rounded"}):f.activeListings}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Annonces actives"})]})]})})}),s.jsx(ae,{children:s.jsx(oe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Go,{className:"h-5 w-5 text-yellow-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:v.reviews?s.jsx("div",{className:"h-8 w-8 bg-muted animate-pulse rounded"}):f.averageRating||"—"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Note moyenne"})]})]})})}),s.jsx(ae,{children:s.jsx(oe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Rr,{className:"h-5 w-5 text-red-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:v.favorites?s.jsx("div",{className:"h-8 w-8 bg-muted animate-pulse rounded"}):f.totalFavorites}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Favoris"})]})]})})})]}),s.jsxs(Qc,{defaultValue:"listings",className:"space-y-4",children:[s.jsxs(Dl,{className:"grid w-full grid-cols-3",children:[s.jsxs(cn,{value:"listings",className:"flex items-center gap-1 text-xs sm:text-sm",children:[s.jsx(pn,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Mes Annonces"}),s.jsx("span",{className:"sm:hidden",children:"Annonces"}),!v.listings&&f.totalListings>0&&s.jsx(et,{variant:"secondary",className:"ml-1 text-[10px] px-1 py-0.5",children:f.totalListings})]}),s.jsxs(cn,{value:"reviews",className:"flex items-center gap-1 text-xs sm:text-sm",children:[s.jsx(Go,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Avis Reçus"}),s.jsx("span",{className:"sm:hidden",children:"Avis"}),!v.reviews&&f.totalReviews>0&&s.jsx(et,{variant:"secondary",className:"ml-1 text-[10px] px-1 py-0.5",children:f.totalReviews})]}),s.jsxs(cn,{value:"favorites",className:"flex items-center gap-1 text-xs sm:text-sm",children:[s.jsx(Rr,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Favoris"}),s.jsx("span",{className:"sm:hidden",children:"Favoris"}),!v.favorites&&f.totalFavorites>0&&s.jsx(et,{variant:"secondary",className:"ml-1 text-[10px] px-1 py-0.5",children:f.totalFavorites})]})]}),s.jsx(un,{value:"listings",className:"space-y-4",children:s.jsxs(ae,{children:[s.jsxs(qe,{children:[s.jsxs(Ge,{className:"flex items-center gap-2",children:[s.jsx(pn,{className:"w-5 h-5"}),"Mes Annonces"]}),s.jsx(Tt,{children:"Gérez vos annonces publiées sur StudyMarket"})]}),s.jsx(oe,{children:v.listings?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:3}).map((re,ce)=>s.jsxs(ae,{className:"animate-pulse",children:[s.jsx("div",{className:"aspect-[4/3] bg-muted"}),s.jsxs(oe,{className:"p-4 space-y-2",children:[s.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},ce))}):n.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(pn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune annonce"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous n'avez pas encore publié d'annonces."}),s.jsx(Y,{asChild:!0,children:s.jsx(Te,{to:"/create",children:"Publier ma première annonce"})})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(re=>s.jsx(wm,{listing:re},re.id))})})]})}),s.jsx(un,{value:"reviews",className:"space-y-4",children:s.jsxs(ae,{children:[s.jsxs(qe,{children:[s.jsxs(Ge,{className:"flex items-center gap-2",children:[s.jsx(Go,{className:"w-5 h-5"}),"Avis Reçus"]}),s.jsx(Tt,{children:"Les avis laissés par d'autres étudiants"})]}),s.jsx(oe,{children:v.reviews?s.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((re,ce)=>s.jsxs("div",{className:"border rounded-lg p-4 animate-pulse",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"flex space-x-1",children:Array.from({length:5}).map((xe,Fe)=>s.jsx("div",{className:"w-4 h-4 bg-muted rounded"},Fe))}),s.jsx("div",{className:"h-4 w-20 bg-muted rounded"})]}),s.jsx("div",{className:"h-4 bg-muted rounded w-full mb-2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/3"})]},ce))}):i.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(xn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucun avis"}),s.jsx("p",{className:"text-muted-foreground",children:"Aucun avis reçu pour le moment. Les avis apparaîtront après vos premières transactions."})]}):s.jsx("div",{className:"space-y-4",children:i.map(re=>{var ce,xe,Fe,je,Ce,Re;return s.jsxs("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"flex",children:V(re.rating)}),s.jsxs(et,{variant:"secondary",className:"text-xs",children:[re.rating,"/5"]})]}),s.jsx("span",{className:"text-sm text-muted-foreground",children:F(re.createdAt)})]}),s.jsx("p",{className:"text-foreground mb-3 leading-relaxed text-left",children:re.comment}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[s.jsxs("span",{className:"flex items-center gap-2 font-medium",children:[((ce=N[re.reviewerId])==null?void 0:ce.photoURL)&&s.jsx("img",{src:N[re.reviewerId].photoURL,alt:"avatar",className:"w-7 h-7 rounded-full object-cover"}),re.reviewerId===t.uid?(e==null?void 0:e.displayName)||"Vous":(xe=N[re.reviewerId])!=null&&xe.displayName?N[re.reviewerId].displayName:s.jsx("span",{className:"inline-block bg-gray-200 text-gray-600 px-2 py-0.5 rounded text-xs",children:"Profil supprimé"})]}),s.jsx(et,{variant:"outline",className:"text-xs",children:re.reviewType==="buyer"?"Acheteur":"Vendeur"})]}),s.jsxs("div",{className:"mt-3 flex items-center gap-4",children:[s.jsxs(Y,{variant:"ghost",size:"sm",className:`flex items-center gap-1 ${(Fe=re.likes)!=null&&Fe.includes((t==null?void 0:t.uid)||"")?"text-primary":""}`,onClick:()=>ye(re.id),children:[s.jsx(PG,{className:"w-4 h-4"}),s.jsx("span",{children:((je=re.likes)==null?void 0:je.length)||0})]}),s.jsxs(Y,{variant:"ghost",size:"sm",className:`flex items-center gap-1 ${(Ce=re.dislikes)!=null&&Ce.includes((t==null?void 0:t.uid)||"")?"text-destructive":""}`,onClick:()=>Ue(re.id),children:[s.jsx(TG,{className:"w-4 h-4"}),s.jsx("span",{children:((Re=re.dislikes)==null?void 0:Re.length)||0})]}),s.jsxs(Y,{variant:"ghost",size:"sm",className:"flex items-center gap-1",onClick:()=>w(S===re.id?null:re.id),children:[s.jsx(xn,{className:"w-4 h-4"}),s.jsx("span",{children:"Répondre"})]})]}),S===re.id&&s.jsxs("div",{className:"mt-3 space-y-2",children:[s.jsx(Qs,{placeholder:"Votre réponse...",value:y,onChange:Me=>E(Me.target.value),className:"min-h-[80px]"}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(Y,{variant:"outline",size:"sm",onClick:()=>{w(null),E("")},children:"Annuler"}),s.jsx(Y,{size:"sm",onClick:()=>He(re.id),disabled:!y.trim(),children:"Envoyer"})]})]}),re.replies&&re.replies.length>0&&s.jsx("div",{className:"mt-4 space-y-3 pl-4 border-l-2 border-muted",children:re.replies.map((Me,lt)=>{var wt;return s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"font-medium",children:he&&Me.userId===(t==null?void 0:t.uid)?"Vous":((wt=N[Me.userId])==null?void 0:wt.displayName)||"Utilisateur"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:F(Me.createdAt)})]}),s.jsx("p",{className:"text-muted-foreground text-left",children:Me.comment})]},lt)})})]},re.id)})})})]})}),s.jsx(un,{value:"favorites",className:"space-y-4",children:s.jsxs(ae,{children:[s.jsxs(qe,{children:[s.jsxs(Ge,{className:"flex items-center gap-2",children:[s.jsx(Rr,{className:"w-5 h-5"}),"Mes Favoris"]}),s.jsx(Tt,{children:"Les annonces que vous avez ajoutées à vos favoris"})]}),s.jsx(oe,{children:v.favorites?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:3}).map((re,ce)=>s.jsxs(ae,{className:"animate-pulse",children:[s.jsx("div",{className:"aspect-[4/3] bg-muted"}),s.jsxs(oe,{className:"p-4 space-y-2",children:[s.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},ce))}):o.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Rr,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucun favori"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous n'avez pas encore d'annonces favorites. Explorez les annonces et ajoutez-les à vos favoris !"}),s.jsx(Y,{asChild:!0,children:s.jsx(Te,{to:"/create",children:"Publier ma première annonce"})})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(re=>s.jsx(wm,{listing:re},re.id))})})]})})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(ae,{children:s.jsx(oe,{className:"pt-6",children:s.jsx("p",{className:"text-center text-muted-foreground",children:"Vous devez être connecté pour voir votre profil."})})})})};var Hy="Switch",[zae,lce]=jr(Hy),[Uae,$ae]=zae(Hy),H3=x.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:a,required:o,disabled:c,value:u="on",onCheckedChange:h,form:f,...p}=t,[v,_]=x.useState(null),N=ot(e,E=>_(E)),j=x.useRef(!1),S=v?f||!!v.closest("form"):!0,[w,y]=Ts({prop:i,defaultProp:a??!1,onChange:h,caller:Hy});return s.jsxs(Uae,{scope:n,checked:w,disabled:c,children:[s.jsx(ze.button,{type:"button",role:"switch","aria-checked":w,"aria-required":o,"data-state":Y3(w),"data-disabled":c?"":void 0,disabled:c,value:u,...p,ref:N,onClick:Ee(t.onClick,E=>{y(I=>!I),S&&(j.current=E.isPropagationStopped(),j.current||E.stopPropagation())})}),S&&s.jsx(Z3,{control:v,bubbles:!j.current,name:r,value:u,checked:w,required:o,disabled:c,form:f,style:{transform:"translateX(-100%)"}})]})});H3.displayName=Hy;var G3="SwitchThumb",K3=x.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,i=$ae(G3,n);return s.jsx(ze.span,{"data-state":Y3(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})});K3.displayName=G3;var Bae="SwitchBubbleInput",Z3=x.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...i},a)=>{const o=x.useRef(null),c=ot(o,a),u=Ay(n),h=wy(e);return x.useEffect(()=>{const f=o.current;if(!f)return;const p=window.HTMLInputElement.prototype,_=Object.getOwnPropertyDescriptor(p,"checked").set;if(u!==n&&_){const N=new Event("click",{bubbles:r});_.call(f,n),f.dispatchEvent(N)}},[u,n,r]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:c,style:{...i.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Z3.displayName=Bae;function Y3(t){return t?"checked":"unchecked"}var Q3=H3,Wae=K3;const Jn=x.forwardRef(({className:t,...e},n)=>s.jsx(Q3,{className:Xe("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:s.jsx(Wae,{className:Xe("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));Jn.displayName=Q3.displayName;const qae=Yc({displayName:_t().min(2,"Le nom doit contenir au moins 2 caractères"),bio:_t().max(500,"La bio ne peut pas dépasser 500 caractères").optional(),phone:_t().optional(),university:_t().min(1,"Veuillez sélectionner votre université"),fieldOfStudy:_t().min(1,"Veuillez indiquer votre filière"),graduationYear:l3().min(2020).max(2035),campus:_t().optional(),location:_t().optional()}),Hae=Yc({currentPassword:_t().min(6,"Le mot de passe actuel est requis"),newPassword:_t().min(6,"Le nouveau mot de passe doit contenir au moins 6 caractères"),confirmPassword:_t()}).refine(t=>t.newPassword===t.confirmPassword,{message:"Les mots de passe ne correspondent pas",path:["confirmPassword"]}),Gae=Yc({newEmail:_t().email("Email invalide"),password:_t().min(6,"Mot de passe requis pour changer l'email")}),Kae=["Sorbonne Université","Université Paris-Dauphine","École Polytechnique","ENS Paris","CentraleSupélec","MINES ParisTech","HEC Paris","ESSEC","ESCP","Université Paris 1 Panthéon-Sorbonne","Université Paris Cité","Sciences Po Paris","Université de Lyon","Université de Marseille","Université de Toulouse","Université de Bordeaux","Université de Lille","Université de Strasbourg","Université de Nantes","Université de Montpellier","Autre université"],Zae=["Informatique","Ingénierie","Commerce/Management","Droit","Médecine","Sciences","Lettres/Langues","Sciences Humaines","Arts","Architecture","Économie","Psychologie","Communication","Design","Autre"],Yae=()=>{var W,X,ee,Z,U,q;const{currentUser:t,userProfile:e,updateUserProfile:n,logout:r}=yn(),i=ar(),[a,o]=x.useState("profile"),[c,u]=x.useState(!1),[h,f]=x.useState(!1),[p,v]=x.useState(!1),[_,N]=x.useState(!1),[j,S]=x.useState(""),[w,y]=x.useState({email:((W=e==null?void 0:e.notificationPreferences)==null?void 0:W.email)??!0,push:((X=e==null?void 0:e.notificationPreferences)==null?void 0:X.push)??!0,sms:((ee=e==null?void 0:e.notificationPreferences)==null?void 0:ee.sms)??!1,alerts:((Z=e==null?void 0:e.notificationPreferences)==null?void 0:Z.alerts)??!0,messages:!0,listings:!0,reviews:!0,marketing:!1}),[E,I]=x.useState({profileVisibility:"public",showEmail:!1,showPhone:!1,showUniversity:!0,allowMessages:!0,showOnlineStatus:!0}),D=gc({resolver:vc(qae),defaultValues:{displayName:(e==null?void 0:e.displayName)||"",bio:(e==null?void 0:e.bio)||"",phone:(e==null?void 0:e.phone)||"",university:(e==null?void 0:e.university)||"",fieldOfStudy:(e==null?void 0:e.fieldOfStudy)||"",graduationYear:(e==null?void 0:e.graduationYear)||new Date().getFullYear()+2,campus:(e==null?void 0:e.campus)||"",location:(e==null?void 0:e.location)||""}}),B=gc({resolver:vc(Hae)}),R=gc({resolver:vc(Gae)});x.useEffect(()=>{var H,Q,he,ye;e&&(D.reset({displayName:e.displayName||"",bio:e.bio||"",phone:e.phone||"",university:e.university||"",fieldOfStudy:e.fieldOfStudy||"",graduationYear:e.graduationYear||new Date().getFullYear()+2,campus:e.campus||"",location:e.location||""}),y({email:((H=e.notificationPreferences)==null?void 0:H.email)??!0,push:((Q=e.notificationPreferences)==null?void 0:Q.push)??!0,sms:((he=e.notificationPreferences)==null?void 0:he.sms)??!1,alerts:((ye=e.notificationPreferences)==null?void 0:ye.alerts)??!0,messages:!0,listings:!0,reviews:!0,marketing:!1}))},[e,D]);const F=async H=>{u(!0);try{await n({displayName:H.displayName,bio:H.bio||null,phone:H.phone||null,university:H.university,fieldOfStudy:H.fieldOfStudy,graduationYear:H.graduationYear,campus:H.campus||null,location:H.location||null}),fe.success("Profil mis à jour avec succès !")}catch(Q){console.error("Erreur lors de la mise à jour du profil:",Q),fe.error("Erreur lors de la mise à jour du profil")}finally{u(!1)}},V=async()=>{u(!0);try{await n({notificationPreferences:{email:w.email,push:w.push,sms:w.sms,alerts:w.alerts}}),fe.success("Préférences de notification mises à jour !")}catch(H){console.error("Erreur lors de la mise à jour des notifications:",H),fe.error("Erreur lors de la mise à jour des notifications")}finally{u(!1)}},k=async H=>{if(t){u(!0);try{const Q=hl.credential(t.email,H.currentPassword);await fE(t,Q),await b$(t,H.newPassword),fe.success("Mot de passe mis à jour avec succès !"),v(!1),B.reset()}catch(Q){console.error("Erreur lors du changement de mot de passe:",Q),Q.code==="auth/wrong-password"?fe.error("Mot de passe actuel incorrect"):fe.error("Erreur lors du changement de mot de passe")}finally{u(!1)}}},M=async H=>{if(t){u(!0);try{const Q=hl.credential(t.email,H.password);await fE(t,Q),await w$(t,H.newEmail),await n({email:H.newEmail}),fe.success("Email mis à jour avec succès !"),N(!1),R.reset()}catch(Q){console.error("Erreur lors du changement d'email:",Q),Q.code==="auth/wrong-password"?fe.error("Mot de passe incorrect"):Q.code==="auth/email-already-in-use"?fe.error("Cet email est déjà utilisé"):fe.error("Erreur lors du changement d'email")}finally{u(!1)}}},O=async()=>{if(!(!t||j!=="SUPPRIMER")){u(!0);try{const H=XR(De),Q=["listings","conversations","reviews","favorites","reports"];for(const he of Q){const ye=vn(Ft(De,he),Zn("userId","==",t.uid));(await On(ye)).forEach(He=>{H.delete(He.ref)})}H.delete(xt(De,"users",t.uid)),await H.commit(),await C$(t),fe.success("Compte supprimé avec succès"),i("/")}catch(H){console.error("Erreur lors de la suppression du compte:",H),fe.error("Erreur lors de la suppression du compte")}finally{u(!1)}}},P=async()=>{if(t){u(!0);try{const H={profile:e,listings:[],conversations:[],reviews:[],favorites:[]},Q=vn(Ft(De,"listings"),Zn("sellerId","==",t.uid)),he=await On(Q);H.listings=he.docs.map(Me=>({id:Me.id,...Me.data()}));const ye=vn(Ft(De,"conversations"),Zn("participants","array-contains",t.uid)),Ue=await On(ye);H.conversations=Ue.docs.map(Me=>({id:Me.id,...Me.data()}));const He=vn(Ft(De,"reviews"),Zn("revieweeId","==",t.uid)),re=await On(He);H.reviews=re.docs.map(Me=>({id:Me.id,...Me.data()}));const ce=vn(Ft(De,"favorites"),Zn("userId","==",t.uid)),xe=await On(ce);H.favorites=xe.docs.map(Me=>({id:Me.id,...Me.data()}));const Fe=JSON.stringify(H,null,2),je=new Blob([Fe],{type:"application/json"}),Ce=URL.createObjectURL(je),Re=document.createElement("a");Re.href=Ce,Re.download=`studymarket-data-${new Date().toISOString().split("T")[0]}.json`,Re.click(),URL.revokeObjectURL(Ce),fe.success("Données exportées avec succès !")}catch(H){console.error("Erreur lors de l'export des données:",H),fe.error("Erreur lors de l'export des données")}finally{u(!1)}}};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[s.jsx(hy,{className:"w-8 h-8"}),"Paramètres"]}),s.jsx("p",{className:"text-muted-foreground",children:"Gérez votre profil, vos préférences et votre sécurité"})]}),s.jsxs(Qc,{value:a,onValueChange:o,className:"space-y-6",children:[s.jsxs(Dl,{className:"grid w-full grid-cols-5",children:[s.jsxs(cn,{value:"profile",className:"flex items-center gap-2",children:[s.jsx(Zr,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Profil"})]}),s.jsxs(cn,{value:"notifications",className:"flex items-center gap-2",children:[s.jsx(fi,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Notifications"})]}),s.jsxs(cn,{value:"privacy",className:"flex items-center gap-2",children:[s.jsx(Cd,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Confidentialité"})]}),s.jsxs(cn,{value:"security",className:"flex items-center gap-2",children:[s.jsx(Vt,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Sécurité"})]}),s.jsxs(cn,{value:"data",className:"flex items-center gap-2",children:[s.jsx(Zs,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Données"})]})]}),s.jsx(un,{value:"profile",className:"space-y-6",children:s.jsxs(ae,{children:[s.jsxs(qe,{children:[s.jsxs(Ge,{className:"flex items-center gap-2",children:[s.jsx(Zr,{className:"w-5 h-5"}),"Informations personnelles"]}),s.jsx(Tt,{children:"Mettez à jour vos informations de profil et vos préférences"})]}),s.jsxs(oe,{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(q3,{currentPhotoURL:(e==null?void 0:e.photoURL)||"",displayName:(e==null?void 0:e.displayName)||t.email||"Utilisateur"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium",children:"Photo de profil"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Cliquez sur votre avatar pour changer votre photo"})]})]}),s.jsx(Bs,{}),s.jsxs("form",{onSubmit:D.handleSubmit(F),className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(be,{htmlFor:"displayName",children:"Nom complet *"}),s.jsx(We,{id:"displayName",...D.register("displayName"),placeholder:"Votre nom complet"}),D.formState.errors.displayName&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:D.formState.errors.displayName.message})]}),s.jsxs("div",{children:[s.jsx(be,{htmlFor:"phone",children:"Téléphone"}),s.jsx(We,{id:"phone",type:"tel",...D.register("phone"),placeholder:"+33 6 12 34 56 78"})]})]}),s.jsxs("div",{children:[s.jsx(be,{htmlFor:"bio",children:"Biographie"}),s.jsx(Qs,{id:"bio",...D.register("bio"),placeholder:"Parlez-nous de vous...",rows:3,maxLength:500}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[((U=D.watch("bio"))==null?void 0:U.length)||0,"/500 caractères"]})]}),s.jsx(Bs,{}),s.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[s.jsx(Xd,{className:"w-4 h-4"}),"Informations académiques"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(be,{htmlFor:"university",children:"Université *"}),s.jsxs(Jt,{value:D.watch("university"),onValueChange:H=>D.setValue("university",H),children:[s.jsx(qt,{children:s.jsx(en,{placeholder:"Sélectionnez votre université"})}),s.jsx(Ht,{children:Kae.map(H=>s.jsx(Ve,{value:H,children:H},H))})]}),D.formState.errors.university&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:D.formState.errors.university.message})]}),s.jsxs("div",{children:[s.jsx(be,{htmlFor:"fieldOfStudy",children:"Filière d'études *"}),s.jsxs(Jt,{value:D.watch("fieldOfStudy"),onValueChange:H=>D.setValue("fieldOfStudy",H),children:[s.jsx(qt,{children:s.jsx(en,{placeholder:"Sélectionnez votre filière"})}),s.jsx(Ht,{children:Zae.map(H=>s.jsx(Ve,{value:H,children:H},H))})]}),D.formState.errors.fieldOfStudy&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:D.formState.errors.fieldOfStudy.message})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(be,{htmlFor:"graduationYear",children:"Année de diplôme *"}),s.jsxs(Jt,{value:(q=D.watch("graduationYear"))==null?void 0:q.toString(),onValueChange:H=>D.setValue("graduationYear",parseInt(H)),children:[s.jsx(qt,{children:s.jsx(en,{placeholder:"Année de diplôme"})}),s.jsx(Ht,{children:Array.from({length:16},(H,Q)=>2020+Q).map(H=>s.jsx(Ve,{value:H.toString(),children:H},H))})]}),D.formState.errors.graduationYear&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:D.formState.errors.graduationYear.message})]}),s.jsxs("div",{children:[s.jsx(be,{htmlFor:"campus",children:"Campus"}),s.jsx(We,{id:"campus",...D.register("campus"),placeholder:"Campus principal"})]})]}),s.jsxs("div",{children:[s.jsx(be,{htmlFor:"location",children:"Localisation"}),s.jsx(We,{id:"location",...D.register("location"),placeholder:"Paris, France"})]}),s.jsx(Y,{type:"submit",disabled:c,className:"w-full",children:c?s.jsxs(s.Fragment,{children:[s.jsx(qr,{className:"w-4 h-4 mr-2 animate-spin"}),"Sauvegarde..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Y_,{className:"w-4 h-4 mr-2"}),"Sauvegarder les modifications"]})})]})]})]})}),s.jsx(un,{value:"notifications",className:"space-y-6",children:s.jsxs(ae,{children:[s.jsxs(qe,{children:[s.jsxs(Ge,{className:"flex items-center gap-2",children:[s.jsx(fi,{className:"w-5 h-5"}),"Préférences de notification"]}),s.jsx(Tt,{children:"Choisissez comment vous souhaitez être notifié"})]}),s.jsxs(oe,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Canaux de notification"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(us,{className:"w-4 h-4 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Email"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevez des notifications par email"})]})]}),s.jsx(Jn,{checked:w.email,onCheckedChange:H=>y(Q=>({...Q,email:H}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Hc,{className:"w-4 h-4 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Notifications push"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications dans le navigateur"})]})]}),s.jsx(Jn,{checked:w.push,onCheckedChange:H=>y(Q=>({...Q,push:H}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Jd,{className:"w-4 h-4 text-purple-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"SMS"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications par SMS (bientôt disponible)"})]})]}),s.jsx(Jn,{checked:w.sms,onCheckedChange:H=>y(Q=>({...Q,sms:H})),disabled:!0})]})]})]}),s.jsx(Bs,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Types de notifications"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(xn,{className:"w-4 h-4 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Messages"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouveaux messages et conversations"})]})]}),s.jsx(Jn,{checked:w.messages,onCheckedChange:H=>y(Q=>({...Q,messages:H}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(pn,{className:"w-4 h-4 text-orange-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Annonces"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouvelles annonces correspondant à vos recherches"})]})]}),s.jsx(Jn,{checked:w.listings,onCheckedChange:H=>y(Q=>({...Q,listings:H}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Go,{className:"w-4 h-4 text-yellow-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Avis et évaluations"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouveaux avis sur vos transactions"})]})]}),s.jsx(Jn,{checked:w.reviews,onCheckedChange:H=>y(Q=>({...Q,reviews:H}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(fi,{className:"w-4 h-4 text-red-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Alertes de sécurité"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Alertes importantes et mises à jour de sécurité"})]})]}),s.jsx(Jn,{checked:w.alerts,onCheckedChange:H=>y(Q=>({...Q,alerts:H}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(bG,{className:"w-4 h-4 text-pink-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Marketing"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouvelles fonctionnalités et promotions"})]})]}),s.jsx(Jn,{checked:w.marketing,onCheckedChange:H=>y(Q=>({...Q,marketing:H}))})]})]})]}),s.jsx(Y,{onClick:V,disabled:c,className:"w-full",children:c?s.jsxs(s.Fragment,{children:[s.jsx(qr,{className:"w-4 h-4 mr-2 animate-spin"}),"Sauvegarde..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Y_,{className:"w-4 h-4 mr-2"}),"Sauvegarder les préférences"]})})]})]})}),s.jsx(un,{value:"privacy",className:"space-y-6",children:s.jsxs(ae,{children:[s.jsxs(qe,{children:[s.jsxs(Ge,{className:"flex items-center gap-2",children:[s.jsx(Cd,{className:"w-5 h-5"}),"Confidentialité et visibilité"]}),s.jsx(Tt,{children:"Contrôlez qui peut voir vos informations"})]}),s.jsxs(oe,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Visibilité du profil"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Profil public"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre profil est visible par tous les étudiants vérifiés"})]}),s.jsx(Jn,{checked:E.profileVisibility==="public",onCheckedChange:H=>I(Q=>({...Q,profileVisibility:H?"public":"private"}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Afficher l'email"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre email est visible sur votre profil public"})]}),s.jsx(Jn,{checked:E.showEmail,onCheckedChange:H=>I(Q=>({...Q,showEmail:H}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Afficher le téléphone"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre numéro de téléphone est visible sur votre profil"})]}),s.jsx(Jn,{checked:E.showPhone,onCheckedChange:H=>I(Q=>({...Q,showPhone:H}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Afficher l'université"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre université est visible sur votre profil"})]}),s.jsx(Jn,{checked:E.showUniversity,onCheckedChange:H=>I(Q=>({...Q,showUniversity:H}))})]})]})]}),s.jsx(Bs,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Interactions"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Autoriser les messages"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Les autres étudiants peuvent vous envoyer des messages"})]}),s.jsx(Jn,{checked:E.allowMessages,onCheckedChange:H=>I(Q=>({...Q,allowMessages:H}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Statut en ligne"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Afficher quand vous êtes en ligne"})]}),s.jsx(Jn,{checked:E.showOnlineStatus,onCheckedChange:H=>I(Q=>({...Q,showOnlineStatus:H}))})]})]})]}),s.jsxs(Ut,{children:[s.jsx(Vt,{className:"h-4 w-4"}),s.jsx($t,{children:"Vos informations personnelles sont toujours protégées et ne sont jamais partagées avec des tiers sans votre consentement."})]})]})]})}),s.jsx(un,{value:"security",className:"space-y-6",children:s.jsxs(ae,{children:[s.jsxs(qe,{children:[s.jsxs(Ge,{className:"flex items-center gap-2",children:[s.jsx(Vt,{className:"w-5 h-5"}),"Sécurité du compte"]}),s.jsx(Tt,{children:"Gérez la sécurité de votre compte StudyMarket"})]}),s.jsxs(oe,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Informations du compte"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(us,{className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"font-medium",children:"Email"})]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:t.email}),s.jsxs(aa,{open:_,onOpenChange:N,children:[s.jsx(cd,{asChild:!0,children:s.jsx(Y,{variant:"outline",size:"sm",children:"Changer l'email"})}),s.jsxs(wi,{children:[s.jsxs(oa,{children:[s.jsx(bi,{children:"Changer l'adresse email"}),s.jsx(pc,{children:"Entrez votre nouveau email et votre mot de passe actuel"})]}),s.jsxs("form",{onSubmit:R.handleSubmit(M),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(be,{htmlFor:"newEmail",children:"Nouvel email"}),s.jsx(We,{id:"newEmail",type:"email",...R.register("newEmail"),placeholder:"nouveau@email.com"}),R.formState.errors.newEmail&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:R.formState.errors.newEmail.message})]}),s.jsxs("div",{children:[s.jsx(be,{htmlFor:"emailPassword",children:"Mot de passe actuel"}),s.jsx(We,{id:"emailPassword",type:"password",...R.register("password"),placeholder:"••••••••"}),R.formState.errors.password&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:R.formState.errors.password.message})]}),s.jsxs(Xg,{children:[s.jsx(Y,{type:"button",variant:"outline",onClick:()=>N(!1),children:"Annuler"}),s.jsxs(Y,{type:"submit",disabled:c,children:[c?s.jsx(qr,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(Y_,{className:"w-4 h-4 mr-2"}),"Changer l'email"]})]})]})]})]})]}),s.jsxs("div",{className:"p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Ic,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{className:"font-medium",children:"Mot de passe"})]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Dernière modification : il y a 30 jours"}),s.jsxs(aa,{open:p,onOpenChange:v,children:[s.jsx(cd,{asChild:!0,children:s.jsx(Y,{variant:"outline",size:"sm",children:"Changer le mot de passe"})}),s.jsxs(wi,{children:[s.jsxs(oa,{children:[s.jsx(bi,{children:"Changer le mot de passe"}),s.jsx(pc,{children:"Entrez votre mot de passe actuel et votre nouveau mot de passe"})]}),s.jsxs("form",{onSubmit:B.handleSubmit(k),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(be,{htmlFor:"currentPassword",children:"Mot de passe actuel"}),s.jsx(We,{id:"currentPassword",type:"password",...B.register("currentPassword"),placeholder:"••••••••"}),B.formState.errors.currentPassword&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:B.formState.errors.currentPassword.message})]}),s.jsxs("div",{children:[s.jsx(be,{htmlFor:"newPassword",children:"Nouveau mot de passe"}),s.jsx(We,{id:"newPassword",type:"password",...B.register("newPassword"),placeholder:"••••••••"}),B.formState.errors.newPassword&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:B.formState.errors.newPassword.message})]}),s.jsxs("div",{children:[s.jsx(be,{htmlFor:"confirmPassword",children:"Confirmer le nouveau mot de passe"}),s.jsx(We,{id:"confirmPassword",type:"password",...B.register("confirmPassword"),placeholder:"••••••••"}),B.formState.errors.confirmPassword&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:B.formState.errors.confirmPassword.message})]}),s.jsxs(Xg,{children:[s.jsx(Y,{type:"button",variant:"outline",onClick:()=>v(!1),children:"Annuler"}),s.jsxs(Y,{type:"submit",disabled:c,children:[c?s.jsx(qr,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(gG,{className:"w-4 h-4 mr-2"}),"Changer le mot de passe"]})]})]})]})]})]})]})]}),s.jsx(Bs,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Vérification du compte"}),s.jsx("div",{className:"p-4 border rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${e!=null&&e.isVerified?"bg-green-500":"bg-yellow-500"}`}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:e!=null&&e.isVerified?"Compte vérifié":"Vérification en attente"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e!=null&&e.isVerified?"Votre statut étudiant a été vérifié":"Votre statut étudiant est en cours de vérification"})]})]}),e!=null&&e.isVerified?s.jsxs(et,{className:"bg-green-100 text-green-800",children:[s.jsx(Ct,{className:"w-3 h-3 mr-1"}),"Vérifié"]}):s.jsx(et,{variant:"outline",children:"En attente"})]})})]}),s.jsxs(Ut,{children:[s.jsx(Vt,{className:"h-4 w-4"}),s.jsx($t,{children:"Pour votre sécurité, nous vous recommandons d'utiliser un mot de passe fort et de le changer régulièrement."})]})]})]})}),s.jsxs(un,{value:"data",className:"space-y-6",children:[s.jsxs(ae,{children:[s.jsxs(qe,{children:[s.jsxs(Ge,{className:"flex items-center gap-2",children:[s.jsx(Zs,{className:"w-5 h-5"}),"Gestion des données"]}),s.jsx(Tt,{children:"Exportez ou supprimez vos données personnelles"})]}),s.jsxs(oe,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Exporter mes données"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Téléchargez une copie de toutes vos données StudyMarket au format JSON."}),s.jsxs(Y,{onClick:P,disabled:c,variant:"outline",children:[c?s.jsx(qr,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(Zs,{className:"w-4 h-4 mr-2"}),"Exporter mes données"]})]}),s.jsx(Bs,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium text-destructive",children:"Zone de danger"}),s.jsxs(Ut,{className:"border-destructive",children:[s.jsx(Pn,{className:"h-4 w-4"}),s.jsx($t,{children:"La suppression de votre compte est irréversible. Toutes vos données seront définitivement supprimées."})]}),s.jsxs(aa,{open:h,onOpenChange:f,children:[s.jsx(cd,{asChild:!0,children:s.jsxs(Y,{variant:"destructive",children:[s.jsx(qa,{className:"w-4 h-4 mr-2"}),"Supprimer mon compte"]})}),s.jsxs(wi,{children:[s.jsxs(oa,{children:[s.jsx(bi,{className:"text-destructive",children:"Supprimer définitivement le compte"}),s.jsxs(pc,{children:["Cette action est irréversible. Toutes vos données seront supprimées :",s.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[s.jsx("li",{children:"Profil utilisateur"}),s.jsx("li",{children:"Toutes vos annonces"}),s.jsx("li",{children:"Conversations et messages"}),s.jsx("li",{children:"Avis et évaluations"}),s.jsx("li",{children:"Favoris et recherches sauvegardées"})]})]})]}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx(be,{htmlFor:"deleteConfirm",children:'Tapez "SUPPRIMER" pour confirmer'}),s.jsx(We,{id:"deleteConfirm",value:j,onChange:H=>S(H.target.value),placeholder:"SUPPRIMER"})]})}),s.jsxs(Xg,{children:[s.jsx(Y,{variant:"outline",onClick:()=>f(!1),children:"Annuler"}),s.jsxs(Y,{variant:"destructive",onClick:O,disabled:j!=="SUPPRIMER"||c,children:[c?s.jsx(qr,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(qa,{className:"w-4 h-4 mr-2"}),"Supprimer définitivement"]})]})]})]})]})]})]}),s.jsxs(ae,{children:[s.jsx(qe,{children:s.jsxs(Ge,{className:"flex items-center gap-2",children:[s.jsx(Gv,{className:"w-5 h-5"}),"Informations légales"]})}),s.jsx(oe,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(Y,{variant:"outline",asChild:!0,children:s.jsxs("a",{href:"/terms",target:"_blank",className:"flex items-center gap-2",children:[s.jsx(is,{className:"w-4 h-4"}),"Conditions d'utilisation"]})}),s.jsx(Y,{variant:"outline",asChild:!0,children:s.jsxs("a",{href:"/privacy",target:"_blank",className:"flex items-center gap-2",children:[s.jsx(is,{className:"w-4 h-4"}),"Politique de confidentialité"]})}),s.jsx(Y,{variant:"outline",asChild:!0,children:s.jsxs("a",{href:"/cookies",target:"_blank",className:"flex items-center gap-2",children:[s.jsx(is,{className:"w-4 h-4"}),"Politique des cookies"]})}),s.jsx(Y,{variant:"outline",asChild:!0,children:s.jsxs("a",{href:"/support",target:"_blank",className:"flex items-center gap-2",children:[s.jsx(is,{className:"w-4 h-4"}),"Centre d'aide"]})})]})})]})]})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(ae,{children:s.jsx(oe,{className:"pt-6",children:s.jsx("p",{className:"text-center text-muted-foreground",children:"Vous devez être connecté pour accéder aux paramètres."})})})})};var $N="Progress",BN=100,[Qae,cce]=jr($N),[Xae,Jae]=Qae($N),X3=x.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:i,getValueLabel:a=eoe,...o}=t;(i||i===0)&&!Zk(i)&&console.error(toe(`${i}`,"Progress"));const c=Zk(i)?i:BN;r!==null&&!Yk(r,c)&&console.error(noe(`${r}`,"Progress"));const u=Yk(r,c)?r:null,h=xx(u)?a(u,c):void 0;return s.jsx(Xae,{scope:n,value:u,max:c,children:s.jsx(ze.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":xx(u)?u:void 0,"aria-valuetext":h,role:"progressbar","data-state":t5(u,c),"data-value":u??void 0,"data-max":c,...o,ref:e})})});X3.displayName=$N;var J3="ProgressIndicator",e5=x.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,i=Jae(J3,n);return s.jsx(ze.div,{"data-state":t5(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:e})});e5.displayName=J3;function eoe(t,e){return`${Math.round(t/e*100)}%`}function t5(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function xx(t){return typeof t=="number"}function Zk(t){return xx(t)&&!isNaN(t)&&t>0}function Yk(t,e){return xx(t)&&!isNaN(t)&&t<=e&&t>=0}function toe(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${BN}\`.`}function noe(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${BN} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var n5=X3,roe=e5;const r5=x.forwardRef(({className:t,value:e,...n},r)=>s.jsx(n5,{ref:r,className:Xe("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",t),...n,children:s.jsx(roe,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));r5.displayName=n5.displayName;const Kl={electronics:{category:"Électronique",icon:Hc,color:"text-blue-600",co2PerItem:85,waterPerItem:1200,energyPerItem:450,wastePerItem:2.5,description:"Smartphones, ordinateurs, accessoires tech"},books:{category:"Livres & Cours",icon:w4,color:"text-green-600",co2PerItem:8.5,waterPerItem:85,energyPerItem:12,wastePerItem:.8,description:"Manuels, livres, notes de cours"},furniture:{category:"Mobilier",icon:Zv,color:"text-purple-600",co2PerItem:45,waterPerItem:350,energyPerItem:180,wastePerItem:15,description:"Meubles, déco, électroménager"},clothing:{category:"Vêtements",icon:Uj,color:"text-pink-600",co2PerItem:22,waterPerItem:2700,energyPerItem:35,wastePerItem:.5,description:"Vêtements, chaussures, accessoires"}},soe=[{id:"first_transaction",name:"Premier Pas",icon:"🌱",threshold:1,description:"Première transaction écologique"},{id:"co2_saver_10",name:"Éco-Warrior",icon:"🌍",threshold:10,description:"10 kg CO₂ économisés"},{id:"co2_saver_50",name:"Planète Protecteur",icon:"🛡️",threshold:50,description:"50 kg CO₂ économisés"},{id:"co2_saver_100",name:"Héros Climatique",icon:"🦸",threshold:100,description:"100 kg CO₂ économisés"},{id:"water_saver",name:"Gardien de l'Eau",icon:"💧",threshold:1e3,description:"1000L d'eau économisés"},{id:"recycling_master",name:"Maître du Recyclage",icon:"♻️",threshold:20,description:"20 transactions de seconde main"},{id:"donation_hero",name:"Ange du Don",icon:"😇",threshold:5,description:"5 dons gratuits"},{id:"monthly_champion",name:"Champion Mensuel",icon:"🏆",threshold:10,description:"10 transactions en un mois"}],Pu=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},ioe=()=>{const{currentUser:t,userProfile:e}=yn(),[n,r]=x.useState({totalCo2Saved:0,totalWaterSaved:0,totalEnergySaved:0,totalWasteAvoided:0,transactionsByCategory:{},monthlyImpact:[],badges:[],rank:"Débutant",percentile:0}),[i,a]=x.useState([]),[o,c]=x.useState(!0),[u,h]=x.useState("all");x.useEffect(()=>{t&&f()},[t,u]);const f=async()=>{if(t){c(!0);try{const y=vn(Ft(De,"listings"),Zn("sellerId","==",t.uid)),E=await On(y),I=[];E.forEach(B=>{const R=B.data();I.push({id:B.id,...R,createdAt:Pu(R.createdAt),updatedAt:Pu(R.updatedAt)})}),a(I);const D=p(I,u);r(D),await j(D)}catch(y){console.error("Erreur lors du chargement des données environnementales:",y)}finally{c(!1)}}},p=(y,E)=>{const I=new Date;let D=y;if(E==="month"){const X=new Date(I.getFullYear(),I.getMonth()-1,I.getDate());D=y.filter(ee=>Pu(ee.createdAt)>=X)}else if(E==="year"){const X=new Date(I.getFullYear()-1,I.getMonth(),I.getDate());D=y.filter(ee=>Pu(ee.createdAt)>=X)}let B=0,R=0,F=0,V=0;const k={};D.forEach(X=>{const ee=Kl[X.category]||Kl.electronics,Z=1;let U=1;X.transactionType==="donation"?U=1.2:X.transactionType==="exchange"&&(U=.8),B+=ee.co2PerItem*Z*U,R+=ee.waterPerItem*Z*U,F+=ee.energyPerItem*Z*U,V+=ee.wastePerItem*Z*U,k[X.category]=(k[X.category]||0)+1});const M=v(y),O=_(y,B,R),{rank:P,percentile:W}=N(B,y.length);return{totalCo2Saved:Math.round(B*10)/10,totalWaterSaved:Math.round(R),totalEnergySaved:Math.round(F*10)/10,totalWasteAvoided:Math.round(V*10)/10,transactionsByCategory:k,monthlyImpact:M,badges:O,rank:P,percentile:W}},v=y=>{const E={};for(let I=11;I>=0;I--){const D=new Date;D.setMonth(D.getMonth()-I);const B=D.toISOString().slice(0,7);E[B]={co2Saved:0,transactions:0,waterSaved:0,energySaved:0}}return y.forEach(I=>{const B=Pu(I.createdAt).toISOString().slice(0,7);if(E[B]){const R=Kl[I.category]||Kl.electronics;let F=1;I.transactionType==="donation"?F=1.2:I.transactionType==="exchange"&&(F=.8),E[B].co2Saved+=R.co2PerItem*F,E[B].waterSaved+=R.waterPerItem*F,E[B].energySaved+=R.energyPerItem*F,E[B].transactions+=1}}),Object.entries(E).map(([I,D])=>({month:I,co2Saved:Math.round(D.co2Saved*10)/10,transactions:D.transactions,waterSaved:Math.round(D.waterSaved),energySaved:Math.round(D.energySaved*10)/10}))},_=(y,E,I)=>{const D=[];y.length>=1&&D.push("first_transaction"),E>=10&&D.push("co2_saver_10"),E>=50&&D.push("co2_saver_50"),E>=100&&D.push("co2_saver_100"),I>=1e3&&D.push("water_saver"),y.length>=20&&D.push("recycling_master"),y.filter(V=>V.transactionType==="donation").length>=5&&D.push("donation_hero");const R=new Date().toISOString().slice(0,7);return y.filter(V=>Pu(V.createdAt).toISOString().slice(0,7)===R).length>=10&&D.push("monthly_champion"),D},N=(y,E)=>{let I="Débutant",D=0;return y>=200?(I="Légende Écologique",D=95):y>=100?(I="Maître Environnemental",D=85):y>=50?(I="Expert Vert",D=70):y>=25?(I="Éco-Warrior",D=50):y>=10?(I="Protecteur",D=30):y>=5&&(I="Apprenti Vert",D=15),{rank:I,percentile:D}},j=async y=>{if(t)try{const E=xt(De,"users",t.uid);await Tn(E,{co2Saved:y.totalCo2Saved,environmentalRank:y.rank,environmentalBadges:y.badges,lastEnvironmentalUpdate:new Date})}catch(E){console.error("Erreur lors de la mise à jour des données environnementales:",E)}},S=async()=>{const y=`🌍 Mon impact écologique sur StudyMarket :

🌱 ${n.totalCo2Saved} kg CO₂ économisés
💧 ${n.totalWaterSaved} L d'eau préservés
⚡ ${n.totalEnergySaved} kWh d'énergie économisés
🏆 Rang : ${n.rank}

Rejoignez la communauté étudiante éco-responsable ! 🎓`;if(navigator.share)try{await navigator.share({title:"Mon Impact Écologique - StudyMarket",text:y,url:window.location.origin})}catch{navigator.clipboard.writeText(y)}else navigator.clipboard.writeText(y)},w=()=>{const y={user:e==null?void 0:e.displayName,date:new Date().toISOString(),impact:n,transactions:i.length,period:u},E=new Blob([JSON.stringify(y,null,2)],{type:"application/json"}),I=URL.createObjectURL(E),D=document.createElement("a");D.href=I,D.download=`impact-ecologique-${new Date().toISOString().slice(0,10)}.json`,D.click(),URL.revokeObjectURL(I)};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(_i,{className:"w-8 h-8 text-green-600"}),"Mon Impact Écologique"]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Découvrez votre contribution à la protection de l'environnement"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Y,{variant:"outline",onClick:S,className:"flex items-center gap-2",children:[s.jsx(fy,{className:"w-4 h-4"}),"Partager"]}),s.jsxs(Y,{variant:"outline",onClick:w,className:"flex items-center gap-2",children:[s.jsx(Zs,{className:"w-4 h-4"}),"Exporter"]})]})]}),s.jsx(ae,{children:s.jsx(oe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Hs,{className:"w-5 h-5 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:"Période d'analyse :"})]}),s.jsx("div",{className:"flex gap-2",children:[{key:"month",label:"Ce mois"},{key:"year",label:"Cette année"},{key:"all",label:"Tout"}].map(y=>s.jsx(Y,{variant:u===y.key?"default":"outline",size:"sm",onClick:()=>h(y.key),children:y.label},y.key))})]})})}),o?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Array.from({length:4}).map((y,E)=>s.jsx(ae,{className:"animate-pulse",children:s.jsx(oe,{className:"pt-6",children:s.jsx("div",{className:"h-16 bg-muted rounded"})})},E))}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(ae,{className:"border-green-200 bg-green-50/50",children:s.jsxs(oe,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-green-700",children:n.totalCo2Saved}),s.jsx("p",{className:"text-sm text-green-600",children:"kg CO₂ économisés"})]}),s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(_i,{className:"w-6 h-6 text-green-600"})})]}),s.jsxs("div",{className:"mt-2 text-xs text-green-600",children:["≈ ",Math.round(n.totalCo2Saved/2.3)," km en voiture évités"]})]})}),s.jsx(ae,{className:"border-blue-200 bg-blue-50/50",children:s.jsxs(oe,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-blue-700",children:n.totalWaterSaved.toLocaleString()}),s.jsx("p",{className:"text-sm text-blue-600",children:"L d'eau préservés"})]}),s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(vC,{className:"w-6 h-6 text-blue-600"})})]}),s.jsxs("div",{className:"mt-2 text-xs text-blue-600",children:["≈ ",Math.round(n.totalWaterSaved/150)," douches économisées"]})]})}),s.jsx(ae,{className:"border-yellow-200 bg-yellow-50/50",children:s.jsxs(oe,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-yellow-700",children:n.totalEnergySaved}),s.jsx("p",{className:"text-sm text-yellow-600",children:"kWh économisés"})]}),s.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center",children:s.jsx(eh,{className:"w-6 h-6 text-yellow-600"})})]}),s.jsxs("div",{className:"mt-2 text-xs text-yellow-600",children:["≈ ",Math.round(n.totalEnergySaved/3.5)," jours d'électricité"]})]})}),s.jsx(ae,{className:"border-purple-200 bg-purple-50/50",children:s.jsxs(oe,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-purple-700",children:n.totalWasteAvoided}),s.jsx("p",{className:"text-sm text-purple-600",children:"kg déchets évités"})]}),s.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:s.jsx(SG,{className:"w-6 h-6 text-purple-600"})})]}),s.jsxs("div",{className:"mt-2 text-xs text-purple-600",children:["≈ ",Math.round(n.totalWasteAvoided/.5)," sacs poubelle évités"]})]})})]}),s.jsxs(ae,{children:[s.jsx(qe,{children:s.jsxs(Ge,{className:"flex items-center gap-2",children:[s.jsx(y4,{className:"w-5 h-5 text-yellow-600"}),"Votre Rang Écologique"]})}),s.jsxs(oe,{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold text-primary",children:n.rank}),s.jsxs("p",{className:"text-muted-foreground",children:["Vous êtes dans le top ",100-n.percentile,"% des utilisateurs"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-3xl",children:"🏆"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Rang actuel"})]})]}),s.jsx(r5,{value:n.percentile,className:"h-3"}),s.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground mt-2",children:[s.jsx("span",{children:"Débutant"}),s.jsx("span",{children:"Légende Écologique"})]})]})]}),s.jsxs(Qc,{defaultValue:"overview",className:"space-y-4",children:[s.jsxs(Dl,{className:"grid w-full grid-cols-4",children:[s.jsx(cn,{value:"overview",children:"Vue d'ensemble"}),s.jsx(cn,{value:"categories",children:"Par catégorie"}),s.jsx(cn,{value:"badges",children:"Badges"}),s.jsx(cn,{value:"methodology",children:"Méthodologie"})]}),s.jsxs(un,{value:"overview",className:"space-y-6",children:[s.jsxs(ae,{children:[s.jsxs(qe,{children:[s.jsxs(Ge,{className:"flex items-center gap-2",children:[s.jsx(E4,{className:"w-5 h-5"}),"Évolution Mensuelle"]}),s.jsx(Tt,{children:"Votre impact environnemental au cours des 12 derniers mois"})]}),s.jsx(oe,{children:s.jsx("div",{className:"space-y-4",children:n.monthlyImpact.slice(-6).map((y,E)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),s.jsx("span",{className:"font-medium",children:new Date(y.month+"-01").toLocaleDateString("fr-FR",{month:"long",year:"numeric"})})]}),s.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"font-semibold text-green-600",children:[y.co2Saved," kg"]}),s.jsx("div",{className:"text-muted-foreground",children:"CO₂"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"font-semibold text-blue-600",children:[y.waterSaved," L"]}),s.jsx("div",{className:"text-muted-foreground",children:"Eau"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-semibold text-primary",children:y.transactions}),s.jsx("div",{className:"text-muted-foreground",children:"Transactions"})]})]})]},y.month))})})]}),s.jsxs(ae,{children:[s.jsxs(qe,{children:[s.jsxs(Ge,{className:"flex items-center gap-2",children:[s.jsx(k4,{className:"w-5 h-5"}),"Équivalences Concrètes"]}),s.jsx(Tt,{children:"Votre impact traduit en équivalences du quotidien"})]}),s.jsx(oe,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-50 rounded-lg",children:[s.jsx(S4,{className:"w-8 h-8 text-green-600"}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold",children:[Math.round(n.totalCo2Saved/2.3)," km"]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"de trajet en voiture évités"})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-blue-50 rounded-lg",children:[s.jsx(IG,{className:"w-8 h-8 text-blue-600"}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold",children:[Math.round(n.totalCo2Saved/22)," arbres"]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"plantés (équivalent CO₂)"})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-yellow-50 rounded-lg",children:[s.jsx(dG,{className:"w-8 h-8 text-yellow-600"}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold",children:[Math.round(n.totalEnergySaved/24)," jours"]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"de consommation électrique"})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-purple-50 rounded-lg",children:[s.jsx(vC,{className:"w-8 h-8 text-purple-600"}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold",children:[Math.round(n.totalWaterSaved/150)," douches"]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"de 10 minutes économisées"})]})]})]})})]})]}),s.jsx(un,{value:"categories",className:"space-y-6",children:s.jsxs(ae,{children:[s.jsxs(qe,{children:[s.jsxs(Ge,{className:"flex items-center gap-2",children:[s.jsx(pn,{className:"w-5 h-5"}),"Impact par Catégorie"]}),s.jsx(Tt,{children:"Détail de votre impact selon les types d'objets échangés"})]}),s.jsx(oe,{children:s.jsx("div",{className:"space-y-4",children:Object.entries(n.transactionsByCategory).map(([y,E])=>{const I=Kl[y]||Kl.electronics,D=I.icon,B=E*I.co2PerItem;return s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-muted flex items-center justify-center",children:s.jsx(D,{className:`w-5 h-5 ${I.color}`})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:I.category}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[E," transaction",E>1?"s":""]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-semibold text-green-600",children:[Math.round(B*10)/10," kg CO₂"]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[Math.round(E*I.waterPerItem)," L eau"]})]})]},y)})})})]})}),s.jsx(un,{value:"badges",className:"space-y-6",children:s.jsxs(ae,{children:[s.jsxs(qe,{children:[s.jsxs(Ge,{className:"flex items-center gap-2",children:[s.jsx(Ww,{className:"w-5 h-5"}),"Badges Écologiques"]}),s.jsx(Tt,{children:"Vos récompenses pour votre engagement environnemental"})]}),s.jsx(oe,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:soe.map(y=>{const E=n.badges.includes(y.id);return s.jsx("div",{className:`p-4 rounded-lg border-2 transition-all ${E?"border-green-200 bg-green-50":"border-gray-200 bg-gray-50 opacity-60"}`,children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl mb-2",children:y.icon}),s.jsx("h3",{className:`font-semibold ${E?"text-green-800":"text-gray-600"}`,children:y.name}),s.jsx("p",{className:`text-sm ${E?"text-green-600":"text-gray-500"}`,children:y.description}),E&&s.jsx(et,{className:"mt-2 bg-green-100 text-green-800",children:"Obtenu !"})]})},y.id)})})})]})}),s.jsx(un,{value:"methodology",className:"space-y-6",children:s.jsxs(ae,{children:[s.jsxs(qe,{children:[s.jsxs(Ge,{className:"flex items-center gap-2",children:[s.jsx(vl,{className:"w-5 h-5"}),"Méthodologie de Calcul"]}),s.jsx(Tt,{children:"Comment nous calculons votre impact environnemental"})]}),s.jsxs(oe,{className:"space-y-6",children:[s.jsxs(Ut,{children:[s.jsx(vl,{className:"h-4 w-4"}),s.jsx($t,{children:"Nos calculs sont basés sur des études scientifiques et des données de l'ADEME (Agence de l'Environnement et de la Maîtrise de l'Énergie)."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Principe de Base"}),s.jsx("p",{className:"text-muted-foreground",children:"Chaque objet acheté d'occasion évite la production d'un objet neuf. Nous calculons l'impact environnemental évité en nous basant sur l'empreinte carbone, hydrique et énergétique de la production de chaque catégorie d'objets."}),s.jsx("h3",{className:"text-lg font-semibold",children:"Facteurs de Calcul par Catégorie"}),s.jsx("div",{className:"space-y-3",children:Object.entries(Kl).map(([y,E])=>{const I=E.icon;return s.jsxs("div",{className:"p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(I,{className:`w-4 h-4 ${E.color}`}),s.jsx("span",{className:"font-medium",children:E.category})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"CO₂:"}),s.jsxs("span",{className:"ml-1 font-medium",children:[E.co2PerItem," kg"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Eau:"}),s.jsxs("span",{className:"ml-1 font-medium",children:[E.waterPerItem," L"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Énergie:"}),s.jsxs("span",{className:"ml-1 font-medium",children:[E.energyPerItem," kWh"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Déchets:"}),s.jsxs("span",{className:"ml-1 font-medium",children:[E.wastePerItem," kg"]})]})]})]},y)})}),s.jsx("h3",{className:"text-lg font-semibold",children:"Facteurs de Pondération"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(kd,{className:"w-4 h-4 text-green-600"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Dons gratuits :"})," +20% d'impact (encourage le partage)"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(to,{className:"w-4 h-4 text-purple-600"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Échanges/Troc :"})," -20% d'impact (pas de transaction monétaire)"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pn,{className:"w-4 h-4 text-blue-600"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Ventes :"})," Impact standard (100%)"]})]})]}),s.jsx("h3",{className:"text-lg font-semibold",children:"Sources et Références"}),s.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[s.jsx("li",{children:"• ADEME - Base Carbone® pour les facteurs d'émission"}),s.jsx("li",{children:"• Water Footprint Network pour l'empreinte hydrique"}),s.jsx("li",{children:"• IEA (International Energy Agency) pour l'énergie"}),s.jsx("li",{children:"• Ellen MacArthur Foundation pour l'économie circulaire"})]})]})]})]})})]})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(ae,{children:s.jsxs(oe,{className:"pt-6 text-center",children:[s.jsx(_i,{className:"w-12 h-12 text-green-600 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir votre impact"}),s.jsx("p",{className:"text-muted-foreground",children:"Découvrez combien vous contribuez à la protection de l'environnement"})]})})})},jg=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},yx=t=>{if(t==null)return null;if(Array.isArray(t))return t.map(yx).filter(e=>e!==void 0);if(typeof t=="object"&&t!==null){const e={};return Object.keys(t).forEach(n=>{const r=yx(t[n]);r!==void 0&&(e[n]=r)}),e}return t},Qk=[{value:"all",label:"Toutes catégories"},{value:"electronics",label:"Électronique"},{value:"books",label:"Livres & Cours"},{value:"furniture",label:"Mobilier"},{value:"clothing",label:"Vêtements"},{value:"services",label:"Services"},{value:"housing",label:"Logement"},{value:"jobs",label:"Jobs & Stages"}],Xk=[{value:"all",label:"Tous types"},{value:"sale",label:"Vente"},{value:"donation",label:"Don"},{value:"exchange",label:"Échange"},{value:"service",label:"Service"}],aoe=[{value:"all",label:"Toutes universités"},{value:"sorbonne",label:"Sorbonne Université"},{value:"dauphine",label:"Université Paris-Dauphine"},{value:"polytechnique",label:"École Polytechnique"},{value:"ens",label:"ENS Paris"},{value:"centrale",label:"CentraleSupélec"}],ooe=()=>{const{currentUser:t,userProfile:e}=yn(),[n,r]=x.useState([]),[i,a]=x.useState([]),[o,c]=x.useState({totalSearches:0,activeAlerts:0,totalMatches:0,newMatches:0}),[u,h]=x.useState({searches:!0,matches:!0,creating:!1,updating:!1}),[f,p]=x.useState(!1),[v,_]=x.useState(null),[N,j]=x.useState({name:"",query:"",category:"all",transactionType:"all",university:"all",minPrice:"",maxPrice:"",alertsEnabled:!0,notificationFrequency:"daily",notificationMethods:{email:!0,push:!0,sms:!1}});x.useEffect(()=>{t&&(S(),w())},[t]);const S=async()=>{if(t)try{h(W=>({...W,searches:!0}));const k=vn(Ft(De,"savedSearches"),Zn("userId","==",t.uid),Ks(50)),M=await On(k),O=[];M.forEach(W=>{const X=W.data();O.push({id:W.id,...X,createdAt:jg(X.createdAt),updatedAt:jg(X.updatedAt),lastNotified:X.lastNotified?jg(X.lastNotified):void 0})}),O.sort((W,X)=>X.createdAt.getTime()-W.createdAt.getTime()),r(O);const P=O.filter(W=>W.alertsEnabled).length;c(W=>({...W,totalSearches:O.length,activeAlerts:P}))}catch(k){console.error("Erreur lors du chargement des recherches sauvegardées:",k),fe.error("Erreur lors du chargement des recherches sauvegardées")}finally{h(k=>({...k,searches:!1}))}},w=async()=>{if(t)try{h(W=>({...W,matches:!0}));const k=vn(Ft(De,"alertMatches"),Zn("userId","==",t.uid),Ks(100)),M=await On(k),O=[];M.forEach(W=>{const X=W.data();O.push({id:W.id,...X,matchedAt:jg(X.matchedAt)})}),O.sort((W,X)=>X.matchedAt.getTime()-W.matchedAt.getTime()),a(O);const P=O.filter(W=>!W.seen).length;c(W=>({...W,totalMatches:O.length,newMatches:P}))}catch(k){console.error("Erreur lors du chargement des correspondances:",k),fe.error("Erreur lors du chargement des correspondances")}finally{h(k=>({...k,matches:!1}))}},y=async()=>{if(!t||!N.name.trim()){fe.error("Veuillez remplir le nom de la recherche");return}h(k=>({...k,creating:!0}));try{const k={};if(N.query&&N.query.trim()&&(k.query=N.query.trim()),N.category&&N.category!=="all"&&(k.category=N.category),N.transactionType&&N.transactionType!=="all"&&(k.transactionType=N.transactionType),N.university&&N.university!=="all"&&(k.university=N.university),N.minPrice&&N.minPrice.trim()){const P=parseFloat(N.minPrice);!isNaN(P)&&P>=0&&(k.minPrice=P)}if(N.maxPrice&&N.maxPrice.trim()){const P=parseFloat(N.maxPrice);!isNaN(P)&&P>=0&&(k.maxPrice=P)}const M={userId:t.uid,name:N.name.trim(),filters:k,alertsEnabled:N.alertsEnabled,notificationFrequency:N.notificationFrequency,notificationMethods:{email:N.notificationMethods.email,push:N.notificationMethods.push,sms:N.notificationMethods.sms},matchCount:0,createdAt:new Date,updatedAt:new Date},O=yx(M);await gl(Ft(De,"savedSearches"),O),fe.success("Alerte créée avec succès !"),p(!1),R(),S()}catch(k){console.error("Erreur lors de la création de l'alerte:",k),fe.error("Erreur lors de la création de l'alerte")}finally{h(k=>({...k,creating:!1}))}},E=async(k,M)=>{try{h(P=>({...P,updating:!0}));const O=yx({...M,updatedAt:new Date});await Tn(xt(De,"savedSearches",k),O),fe.success("Recherche mise à jour !"),S()}catch(O){console.error("Erreur lors de la mise à jour:",O),fe.error("Erreur lors de la mise à jour")}finally{h(O=>({...O,updating:!1}))}},I=async k=>{if(window.confirm("Êtes-vous sûr de vouloir supprimer cette recherche sauvegardée ?"))try{await Sd(xt(De,"savedSearches",k)),fe.success("Recherche supprimée !"),S()}catch(M){console.error("Erreur lors de la suppression:",M),fe.error("Erreur lors de la suppression")}},D=async(k,M)=>{await E(k,{alertsEnabled:M})},B=async k=>{try{await Tn(xt(De,"alertMatches",k),{seen:!0,seenAt:new Date}),w()}catch(M){console.error("Erreur lors du marquage comme vu:",M)}},R=()=>{j({name:"",query:"",category:"all",transactionType:"all",university:"all",minPrice:"",maxPrice:"",alertsEnabled:!0,notificationFrequency:"daily",notificationMethods:{email:!0,push:!0,sms:!1}}),_(null)},F=k=>{try{return lh(k,{addSuffix:!0,locale:Mr})}catch{return"Date inconnue"}},V=k=>{const M=[];if(k.query&&M.push(`"${k.query}"`),k.category&&k.category!=="all"){const O=Qk.find(P=>P.value===k.category);O&&M.push(O.label)}if(k.transactionType&&k.transactionType!=="all"){const O=Xk.find(P=>P.value===k.transactionType);O&&M.push(O.label)}return k.minPrice!==void 0&&M.push(`≥ ${k.minPrice}€`),k.maxPrice!==void 0&&M.push(`≤ ${k.maxPrice}€`),M.length>0?M.join(" • "):"Tous les critères"};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(fi,{className:"w-8 h-8 text-primary"}),"Mes Alertes",o.totalSearches>0&&s.jsx(et,{variant:"secondary\\",className:"ml-1",children:o.totalSearches})]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Gérez vos recherches sauvegardées et recevez des notifications"})]}),s.jsxs(aa,{open:f,onOpenChange:p,children:[s.jsx(cd,{asChild:!0,children:s.jsxs(Y,{className:"bg-gradient-to-r from-primary to-secondary",children:[s.jsx(fc,{className:"w-4 h-4 mr-2"}),"Nouvelle Alerte"]})}),s.jsxs(wi,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(oa,{children:[s.jsxs(bi,{className:"flex items-center gap-2",children:[s.jsx(Hl,{className:"w-5 h-5"}),"Créer une Alerte Personnalisée"]}),s.jsx(pc,{children:"Définissez vos critères de recherche et recevez des notifications pour les nouvelles annonces correspondantes"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx(be,{htmlFor:"alert-name",children:"Nom de l'alerte *"}),s.jsx(We,{id:"alert-name",value:N.name,onChange:k=>j(M=>({...M,name:k.target.value})),placeholder:"Ex: MacBook Pro pas cher",className:"mt-1"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[s.jsx(dy,{className:"w-4 h-4"}),"Critères de Recherche"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(be,{htmlFor:"search-query",children:"Mots-clés"}),s.jsx(We,{id:"search-query",value:N.query,onChange:k=>j(M=>({...M,query:k.target.value})),placeholder:"Ex: MacBook, iPhone, livre...",className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(be,{htmlFor:"search-category",children:"Catégorie"}),s.jsxs(Jt,{value:N.category,onValueChange:k=>j(M=>({...M,category:k})),children:[s.jsx(qt,{className:"mt-1",children:s.jsx(en,{})}),s.jsx(Ht,{children:Qk.map(k=>s.jsx(Ve,{value:k.value,children:k.label},k.value))})]})]}),s.jsxs("div",{children:[s.jsx(be,{htmlFor:"transaction-type",children:"Type de transaction"}),s.jsxs(Jt,{value:N.transactionType,onValueChange:k=>j(M=>({...M,transactionType:k})),children:[s.jsx(qt,{className:"mt-1",children:s.jsx(en,{})}),s.jsx(Ht,{children:Xk.map(k=>s.jsx(Ve,{value:k.value,children:k.label},k.value))})]})]}),s.jsxs("div",{children:[s.jsx(be,{htmlFor:"search-university",children:"Université"}),s.jsxs(Jt,{value:N.university,onValueChange:k=>j(M=>({...M,university:k})),children:[s.jsx(qt,{className:"mt-1",children:s.jsx(en,{})}),s.jsx(Ht,{children:aoe.map(k=>s.jsx(Ve,{value:k.value,children:k.label},k.value))})]})]}),s.jsxs("div",{children:[s.jsx(be,{htmlFor:"min-price",children:"Prix minimum (€)"}),s.jsx(We,{id:"min-price",type:"number",value:N.minPrice,onChange:k=>j(M=>({...M,minPrice:k.target.value})),placeholder:"0",className:"mt-1",min:"0"})]}),s.jsxs("div",{children:[s.jsx(be,{htmlFor:"max-price",children:"Prix maximum (€)"}),s.jsx(We,{id:"max-price",type:"number",value:N.maxPrice,onChange:k=>j(M=>({...M,maxPrice:k.target.value})),placeholder:"1000",className:"mt-1",min:"0"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[s.jsx(fi,{className:"w-4 h-4"}),"Notifications"]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(be,{htmlFor:"alerts-enabled",children:"Activer les notifications"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevoir des alertes pour cette recherche"})]}),s.jsx(Jn,{id:"alerts-enabled",checked:N.alertsEnabled,onCheckedChange:k=>j(M=>({...M,alertsEnabled:k}))})]}),N.alertsEnabled&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx(be,{children:"Fréquence des notifications"}),s.jsx("div",{className:"mt-2 space-y-2",children:[{value:"instant",label:"Instantané",description:"Dès qu'une nouvelle annonce correspond"},{value:"daily",label:"Quotidien",description:"Un résumé par jour"},{value:"weekly",label:"Hebdomadaire",description:"Un résumé par semaine"}].map(k=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",id:k.value,name:"frequency",value:k.value,checked:N.notificationFrequency===k.value,onChange:M=>j(O=>({...O,notificationFrequency:M.target.value})),className:"rounded border-border"}),s.jsx(be,{htmlFor:k.value,className:"cursor-pointer",children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:k.label}),s.jsx("div",{className:"text-sm text-muted-foreground",children:k.description})]})})]},k.value))})]}),s.jsxs("div",{children:[s.jsx(be,{children:"Méthodes de notification"}),s.jsxs("div",{className:"mt-2 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(us,{className:"w-4 h-4 text-blue-600"}),s.jsx(be,{htmlFor:"email-notifications",children:"Email"})]}),s.jsx(Jn,{id:"email-notifications",checked:N.notificationMethods.email,onCheckedChange:k=>j(M=>({...M,notificationMethods:{...M.notificationMethods,email:k}}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(fi,{className:"w-4 h-4 text-green-600"}),s.jsx(be,{htmlFor:"push-notifications",children:"Notifications push"})]}),s.jsx(Jn,{id:"push-notifications",checked:N.notificationMethods.push,onCheckedChange:k=>j(M=>({...M,notificationMethods:{...M.notificationMethods,push:k}}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xC,{className:"w-4 h-4 text-purple-600"}),s.jsx(be,{htmlFor:"sms-notifications",children:"SMS"}),s.jsx(et,{variant:"outline",className:"text-xs",children:"Bientôt"})]}),s.jsx(Jn,{id:"sms-notifications",checked:N.notificationMethods.sms,onCheckedChange:k=>j(M=>({...M,notificationMethods:{...M.notificationMethods,sms:k}})),disabled:!0})]})]})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[s.jsx(Y,{variant:"outline",onClick:()=>p(!1),children:"Annuler"}),s.jsx(Y,{onClick:y,disabled:u.creating||!N.name.trim(),children:u.creating?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Création..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Hl,{className:"w-4 h-4 mr-2"}),"Créer l'alerte"]})})]})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(ae,{children:s.jsx(oe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:o.totalSearches}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recherches sauvées"})]}),s.jsx(xr,{className:"w-8 h-8 text-blue-600"})]})})}),s.jsx(ae,{children:s.jsx(oe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:o.activeAlerts}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Alertes actives"})]}),s.jsx(fi,{className:"w-8 h-8 text-green-600"})]})})}),s.jsx(ae,{children:s.jsx(oe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:o.totalMatches}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Correspondances"})]}),s.jsx(Hl,{className:"w-8 h-8 text-purple-600"})]})})}),s.jsx(ae,{children:s.jsx(oe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-orange-600",children:o.newMatches}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Nouvelles"})]}),s.jsx(eh,{className:"w-8 h-8 text-orange-600"})]})})})]}),s.jsxs(Qc,{defaultValue:"searches",className:"space-y-4",children:[s.jsxs(Dl,{className:"grid w-full grid-cols-2",children:[s.jsxs(cn,{value:"searches",className:"flex items-center gap-2",children:[s.jsx(xr,{className:"w-4 h-4"}),"Mes Recherches",o.totalSearches>0&&s.jsx(et,{variant:"secondary\\",className:"ml-1",children:o.totalSearches})]}),s.jsxs(cn,{value:"matches",className:"flex items-center gap-2",children:[s.jsx(Hl,{className:"w-4 h-4"}),"Correspondances",o.newMatches>0&&s.jsx(et,{className:"ml-1 bg-orange-500",children:o.newMatches})]})]}),s.jsx(un,{value:"searches",className:"space-y-4",children:s.jsxs(ae,{children:[s.jsxs(qe,{children:[s.jsxs(Ge,{className:"flex items-center gap-2",children:[s.jsx(zj,{className:"w-5 h-5"}),"Recherches Sauvegardées"]}),s.jsx(Tt,{children:"Gérez vos alertes et critères de recherche personnalisés"})]}),s.jsx(oe,{children:u.searches?s.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((k,M)=>s.jsxs("div",{className:"border rounded-lg p-4 animate-pulse",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"h-5 bg-muted rounded w-1/3"}),s.jsx("div",{className:"h-6 bg-muted rounded w-16"})]}),s.jsx("div",{className:"h-4 bg-muted rounded w-2/3 mb-2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]},M))}):n.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(xr,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune recherche sauvegardée"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Créez votre première alerte pour être notifié des nouvelles annonces"}),s.jsxs(Y,{onClick:()=>p(!0),children:[s.jsx(fc,{className:"w-4 h-4 mr-2"}),"Créer ma première alerte"]})]}):s.jsx("div",{className:"space-y-4",children:n.map(k=>s.jsxs("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h3",{className:"font-semibold",children:k.name}),k.alertsEnabled?s.jsxs(et,{className:"bg-green-100 text-green-800",children:[s.jsx(fi,{className:"w-3 h-3 mr-1"}),"Actif"]}):s.jsxs(et,{variant:"secondary",children:[s.jsx(yC,{className:"w-3 h-3 mr-1"}),"Pausé"]})]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:V(k.filters)}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Hs,{className:"w-3 h-3"}),"Créé ",F(k.createdAt)]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Hl,{className:"w-3 h-3"}),k.matchCount," correspondance",k.matchCount!==1?"s":""]}),k.lastNotified&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(fi,{className:"w-3 h-3"}),"Dernière alerte ",F(k.lastNotified)]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>D(k.id,!k.alertsEnabled),title:k.alertsEnabled?"Désactiver les alertes":"Activer les alertes",children:k.alertsEnabled?s.jsx(yC,{className:"w-4 h-4"}):s.jsx(NG,{className:"w-4 h-4"})}),s.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>{var M,O;_(k),j({name:k.name,query:k.filters.query||"",category:k.filters.category||"all",transactionType:k.filters.transactionType||"all",university:k.filters.university||"all",minPrice:((M=k.filters.minPrice)==null?void 0:M.toString())||"",maxPrice:((O=k.filters.maxPrice)==null?void 0:O.toString())||"",alertsEnabled:k.alertsEnabled,notificationFrequency:k.notificationFrequency,notificationMethods:k.notificationMethods}),p(!0)},title:"Modifier",children:s.jsx(CG,{className:"w-4 h-4"})}),s.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>I(k.id),title:"Supprimer",className:"text-destructive hover:text-destructive",children:s.jsx(qa,{className:"w-4 h-4"})})]})]}),k.alertsEnabled&&s.jsxs("div",{className:"flex items-center gap-4 text-xs bg-muted/50 rounded p-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Vn,{className:"w-3 h-3"}),s.jsxs("span",{children:["Fréquence: ",k.notificationFrequency==="instant"?"Instantané":k.notificationFrequency==="daily"?"Quotidien":"Hebdomadaire"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[k.notificationMethods.email&&s.jsx(us,{className:"w-3 h-3 text-blue-600\\",title:"Email activé"}),k.notificationMethods.push&&s.jsx(fi,{className:"w-3 h-3 text-green-600\\",title:"Push activé"}),k.notificationMethods.sms&&s.jsx(xC,{className:"w-3 h-3 text-purple-600\\",title:"SMS activé"})]})]})]},k.id))})})]})}),s.jsx(un,{value:"matches",className:"space-y-4",children:s.jsxs(ae,{children:[s.jsxs(qe,{children:[s.jsxs(Ge,{className:"flex items-center gap-2",children:[s.jsx(Hl,{className:"w-5 h-5"}),"Correspondances Trouvées"]}),s.jsx(Tt,{children:"Les annonces qui correspondent à vos critères de recherche"})]}),s.jsx(oe,{children:u.matches?s.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((k,M)=>s.jsx("div",{className:"border rounded-lg p-4 animate-pulse",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-16 h-16 bg-muted rounded"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]})},M))}):i.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Hl,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune correspondance"}),s.jsx("p",{className:"text-muted-foreground",children:"Aucune annonce ne correspond encore à vos critères. Les nouvelles correspondances apparaîtront ici."})]}):s.jsx("div",{className:"space-y-4",children:i.map(k=>s.jsx("div",{className:`border rounded-lg p-4 transition-colors ${k.seen?"hover:bg-muted/50":"bg-blue-50 border-blue-200"}`,children:s.jsxs("div",{className:"flex items-center gap-4",children:[k.listingImage?s.jsx("img",{src:k.listingImage,alt:k.listingTitle,className:"w-16 h-16 object-cover rounded"}):s.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsx(Package,{className:"w-6 h-6 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx("h3",{className:"font-semibold",children:k.listingTitle}),s.jsxs("div",{className:"flex items-center gap-2",children:[!k.seen&&s.jsx(et,{className:"bg-blue-500",children:"Nouveau"}),s.jsx("span",{className:"font-semibold text-primary",children:k.listingPrice===0?"Gratuit":`${k.listingPrice}€`})]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Vn,{className:"w-3 h-3"}),"Trouvé ",F(k.matchedAt)]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Y,{variant:"outline",size:"sm",onClick:()=>B(k.id),disabled:k.seen,children:k.seen?s.jsxs(s.Fragment,{children:[s.jsx(Ct,{className:"w-3 h-3 mr-1"}),"Vu"]}):s.jsxs(s.Fragment,{children:[s.jsx(Cd,{className:"w-3 h-3 mr-1"}),"Marquer comme vu"]})}),s.jsxs(Y,{size:"sm",onClick:()=>window.open(`/listing/${k.listingId}`,"_blank"),children:[s.jsx(is,{className:"w-3 h-3 mr-1"}),"Voir l'annonce"]})]})]})]})]})},k.id))})})]})})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(ae,{children:s.jsxs(oe,{className:"pt-6 text-center",children:[s.jsx(xr,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour gérer vos alertes"}),s.jsx("p",{className:"text-muted-foreground",children:"Créez des alertes personnalisées pour être notifié des nouvelles annonces"})]})})})},Ng=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},Jk=[{value:"all",label:"Toutes catégories",icon:pn},{value:"electronics",label:"Électronique",icon:Hc},{value:"books",label:"Livres & Cours",icon:w4},{value:"furniture",label:"Mobilier",icon:Zv},{value:"clothing",label:"Vêtements",icon:Uj},{value:"services",label:"Services",icon:Ym},{value:"housing",label:"Logement",icon:Zv},{value:"jobs",label:"Jobs & Stages",icon:j4}],loe=[{value:"all",label:"Tous types",icon:pn},{value:"sale",label:"Vente",icon:Kv},{value:"donation",label:"Don",icon:kd},{value:"exchange",label:"Échange",icon:to},{value:"service",label:"Service",icon:Ym}],coe=[{value:"recent",label:"Plus récents",icon:Vn},{value:"oldest",label:"Plus anciens",icon:Hs},{value:"price-asc",label:"Prix croissant",icon:gC},{value:"price-desc",label:"Prix décroissant",icon:x4},{value:"title",label:"Titre A-Z",icon:gC},{value:"category",label:"Par catégorie",icon:pm}],uoe=()=>{const{currentUser:t,userProfile:e}=yn(),[n,r]=x.useState([]),[i,a]=x.useState([]),[o,c]=x.useState({totalFavorites:0,byCategory:{},byTransactionType:{},averagePrice:0,recentlyAdded:0,availableCount:0,soldCount:0}),[u,h]=x.useState({favorites:!0,listings:!0,removing:!1}),[f,p]=x.useState({search:"",category:"all",transactionType:"all",priceRange:"all",availability:"all"}),[v,_]=x.useState("recent"),[N,j]=x.useState("grid"),[S,w]=x.useState([]);x.useEffect(()=>{t&&y()},[t]),x.useEffect(()=>{n.length>0&&E()},[n]);const y=async()=>{if(t)try{h(ee=>({...ee,favorites:!0}));const P=vn(Ft(De,"favorites"),Zn("userId","==",t.uid),Ks(100)),W=await On(P),X=[];W.forEach(ee=>{const Z=ee.data();X.push({id:ee.id,...Z,createdAt:Ng(Z.createdAt),updatedAt:Ng(Z.updatedAt)})}),X.sort((ee,Z)=>Z.createdAt.getTime()-ee.createdAt.getTime()),r(X),I(X)}catch(P){console.error("Erreur lors du chargement des favoris:",P),fe.error("Erreur lors du chargement des favoris")}finally{h(P=>({...P,favorites:!1}))}},E=async()=>{try{h(ee=>({...ee,listings:!0}));const P=n.map(async ee=>{try{const Z=await Ss(xt(De,"listings",ee.listingId));if(Z.exists()){const U=Z.data();return{id:Z.id,...U,createdAt:Ng(U.createdAt),updatedAt:Ng(U.updatedAt)}}return null}catch(Z){return console.error(`Erreur lors du chargement de l'annonce ${ee.listingId}:`,Z),null}}),X=(await Promise.all(P)).filter(ee=>ee!==null);a(X)}catch(P){console.error("Erreur lors du chargement des annonces favorites:",P)}finally{h(P=>({...P,listings:!1}))}},I=P=>{const W={},X={};let ee=0,Z=0;const U=new Date;U.setDate(U.getDate()-7);let q=0;P.forEach(H=>{W[H.listingCategory]=(W[H.listingCategory]||0)+1,X[H.listingTransactionType]=(X[H.listingTransactionType]||0)+1,H.listingPrice>0&&(ee+=H.listingPrice,Z++),H.createdAt>=U&&q++}),c({totalFavorites:P.length,byCategory:W,byTransactionType:X,averagePrice:Z>0?Math.round(ee/Z):0,recentlyAdded:q,availableCount:P.length,soldCount:0})},D=async P=>{try{await Sd(xt(De,"favorites",P)),fe.success("Favori supprimé"),y()}catch(W){console.error("Erreur lors de la suppression:",W),fe.error("Erreur lors de la suppression")}},B=async()=>{if(S.length!==0&&window.confirm(`Supprimer ${S.length} favori(s) sélectionné(s) ?`)){h(P=>({...P,removing:!0}));try{const P=S.map(W=>Sd(xt(De,"favorites",W)));await Promise.all(P),fe.success(`${S.length} favori(s) supprimé(s)`),w([]),y()}catch(P){console.error("Erreur lors de la suppression multiple:",P),fe.error("Erreur lors de la suppression")}finally{h(P=>({...P,removing:!1}))}}},R=()=>{const P={user:e==null?void 0:e.displayName,exportDate:new Date().toISOString(),totalFavorites:n.length,favorites:n.map(Z=>({title:Z.listingTitle,price:Z.listingPrice,category:Z.listingCategory,transactionType:Z.listingTransactionType,seller:Z.sellerName,university:Z.sellerUniversity,addedDate:Z.createdAt.toISOString(),notes:Z.notes||"",tags:Z.tags}))},W=new Blob([JSON.stringify(P,null,2)],{type:"application/json"}),X=URL.createObjectURL(W),ee=document.createElement("a");ee.href=X,ee.download=`mes-favoris-${new Date().toISOString().slice(0,10)}.json`,ee.click(),URL.revokeObjectURL(X)},F=async()=>{const P=`🌟 Mes favoris StudyMarket :

📚 ${o.totalFavorites} annonces sauvegardées
💰 Prix moyen : ${o.averagePrice}€
🆕 ${o.recentlyAdded} ajoutées cette semaine

Découvrez la marketplace étudiante ! 🎓`;if(navigator.share)try{await navigator.share({title:"Mes Favoris - StudyMarket",text:P,url:window.location.origin})}catch{navigator.clipboard.writeText(P),fe.success("Lien copié dans le presse-papiers")}else navigator.clipboard.writeText(P),fe.success("Lien copié dans le presse-papiers")},V=()=>{let P=n;if(f.search){const W=f.search.toLowerCase();P=P.filter(X=>X.listingTitle.toLowerCase().includes(W)||X.sellerName.toLowerCase().includes(W)||X.tags.some(ee=>ee.toLowerCase().includes(W)))}if(f.category!=="all"&&(P=P.filter(W=>W.listingCategory===f.category)),f.transactionType!=="all"&&(P=P.filter(W=>W.listingTransactionType===f.transactionType)),f.priceRange!=="all")switch(f.priceRange){case"free":P=P.filter(W=>W.listingPrice===0);break;case"under-50":P=P.filter(W=>W.listingPrice>0&&W.listingPrice<50);break;case"50-200":P=P.filter(W=>W.listingPrice>=50&&W.listingPrice<=200);break;case"over-200":P=P.filter(W=>W.listingPrice>200);break}switch(v){case"recent":P.sort((W,X)=>X.createdAt.getTime()-W.createdAt.getTime());break;case"oldest":P.sort((W,X)=>W.createdAt.getTime()-X.createdAt.getTime());break;case"price-asc":P.sort((W,X)=>W.listingPrice-X.listingPrice);break;case"price-desc":P.sort((W,X)=>X.listingPrice-W.listingPrice);break;case"title":P.sort((W,X)=>W.listingTitle.localeCompare(X.listingTitle));break;case"category":P.sort((W,X)=>W.listingCategory.localeCompare(X.listingCategory));break}return P},k=P=>{try{return lh(P,{addSuffix:!0,locale:Mr})}catch{return"Date inconnue"}},M=(P,W)=>W==="donation"?"Gratuit":W==="exchange"?"Échange":P===0?"Gratuit":new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(P),O=V();return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(Rr,{className:"w-8 h-8 text-red-500"}),"Mes Favoris",o.totalFavorites>0&&s.jsx(et,{variant:"secondary\\",className:"ml-1",children:o.totalFavorites})]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Retrouvez toutes vos annonces sauvegardées"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Y,{variant:"outline",onClick:F,className:"flex items-center gap-2",children:[s.jsx(fy,{className:"w-4 h-4"}),"Partager"]}),s.jsxs(Y,{variant:"outline",onClick:R,className:"flex items-center gap-2",children:[s.jsx(Zs,{className:"w-4 h-4"}),"Exporter"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(ae,{children:s.jsx(oe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:o.totalFavorites}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Favoris totaux"})]}),s.jsx(Rr,{className:"w-8 h-8 text-red-500"})]})})}),s.jsx(ae,{children:s.jsx(oe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-2xl font-bold",children:[o.averagePrice,"€"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Prix moyen"})]}),s.jsx(Zm,{className:"w-8 h-8 text-green-600"})]})})}),s.jsx(ae,{children:s.jsx(oe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:o.recentlyAdded}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Cette semaine"})]}),s.jsx(eh,{className:"w-8 h-8 text-orange-600"})]})})}),s.jsx(ae,{children:s.jsx(oe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:Object.keys(o.byCategory).length}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Catégories"})]}),s.jsx(pm,{className:"w-8 h-8 text-purple-600"})]})})})]}),s.jsx(ae,{children:s.jsx(oe,{className:"pt-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(We,{placeholder:"Rechercher dans vos favoris...",value:f.search,onChange:P=>p(W=>({...W,search:P.target.value})),className:"pl-10"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Jt,{value:v,onValueChange:_,children:[s.jsx(qt,{className:"w-40",children:s.jsx(en,{})}),s.jsx(Ht,{children:coe.map(P=>s.jsx(Ve,{value:P.value,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(P.icon,{className:"w-4 h-4"}),P.label]})},P.value))})]}),s.jsxs("div",{className:"flex border rounded-lg overflow-hidden",children:[s.jsx(Y,{variant:N==="grid"?"default":"ghost",size:"icon",onClick:()=>j("grid"),className:"rounded-none",children:s.jsx(mG,{className:"w-4 h-4"})}),s.jsx(Y,{variant:N==="list"?"default":"ghost",size:"icon",onClick:()=>j("list"),className:"rounded-none",children:s.jsx(vG,{className:"w-4 h-4"})})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs(Jt,{value:f.category,onValueChange:P=>p(W=>({...W,category:P})),children:[s.jsx(qt,{children:s.jsx(en,{placeholder:"Catégorie"})}),s.jsx(Ht,{children:Jk.map(P=>s.jsx(Ve,{value:P.value,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(P.icon,{className:"w-4 h-4"}),P.label]})},P.value))})]}),s.jsxs(Jt,{value:f.transactionType,onValueChange:P=>p(W=>({...W,transactionType:P})),children:[s.jsx(qt,{children:s.jsx(en,{placeholder:"Type"})}),s.jsx(Ht,{children:loe.map(P=>s.jsx(Ve,{value:P.value,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(P.icon,{className:"w-4 h-4"}),P.label]})},P.value))})]}),s.jsxs(Jt,{value:f.priceRange,onValueChange:P=>p(W=>({...W,priceRange:P})),children:[s.jsx(qt,{children:s.jsx(en,{placeholder:"Prix"})}),s.jsxs(Ht,{children:[s.jsx(Ve,{value:"all",children:"Tous les prix"}),s.jsx(Ve,{value:"free",children:"Gratuit"}),s.jsx(Ve,{value:"under-50",children:"Moins de 50€"}),s.jsx(Ve,{value:"50-200",children:"50€ - 200€"}),s.jsx(Ve,{value:"over-200",children:"Plus de 200€"})]})]}),s.jsxs(Jt,{value:f.availability,onValueChange:P=>p(W=>({...W,availability:P})),children:[s.jsx(qt,{children:s.jsx(en,{placeholder:"Disponibilité"})}),s.jsxs(Ht,{children:[s.jsx(Ve,{value:"all",children:"Toutes"}),s.jsx(Ve,{value:"available",children:"Disponibles"}),s.jsx(Ve,{value:"sold",children:"Vendues"}),s.jsx(Ve,{value:"reserved",children:"Réservées"})]})]})]}),S.length>0&&s.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsxs("span",{className:"text-sm font-medium text-blue-800",children:[S.length," favori(s) sélectionné(s)"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Y,{variant:"outline",size:"sm",onClick:()=>w([]),children:"Désélectionner"}),s.jsx(Y,{variant:"destructive",size:"sm",onClick:B,disabled:u.removing,children:u.removing?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin mr-1"}),"Suppression..."]}):s.jsxs(s.Fragment,{children:[s.jsx(qa,{className:"w-3 h-3 mr-1"}),"Supprimer"]})})]})]})]})})}),s.jsx("div",{className:"space-y-4",children:u.favorites?s.jsx("div",{className:`grid gap-6 ${N==="grid"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3":"grid-cols-1"}`,children:Array.from({length:6}).map((P,W)=>s.jsxs(ae,{className:"animate-pulse",children:[s.jsx("div",{className:"aspect-[4/3] bg-muted"}),s.jsxs(oe,{className:"p-4 space-y-2",children:[s.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]})]},W))}):O.length===0?s.jsx(ae,{children:s.jsx(oe,{className:"pt-12 pb-12 text-center",children:n.length===0?s.jsxs(s.Fragment,{children:[s.jsx(Rr,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun favori"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas encore ajouté d'annonces à vos favoris. Explorez les annonces et cliquez sur ❤️ pour les sauvegarder !"}),s.jsx(Y,{asChild:!0,children:s.jsxs("a",{href:"/listings",children:[s.jsx(xr,{className:"w-4 h-4 mr-2"}),"Explorer les annonces"]})})]}):s.jsxs(s.Fragment,{children:[s.jsx(dy,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun résultat"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Aucun favori ne correspond à vos critères de recherche. Essayez de modifier vos filtres."}),s.jsx(Y,{variant:"outline",onClick:()=>p({search:"",category:"all",transactionType:"all",priceRange:"all",availability:"all"}),children:"Réinitialiser les filtres"})]})})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("p",{className:"text-muted-foreground",children:[O.length," favori(s) trouvé(s)",O.length!==n.length&&` sur ${n.length}`]}),s.jsx(Y,{variant:"outline",size:"sm",onClick:()=>{S.length===O.length?w([]):w(O.map(P=>P.id))},children:S.length===O.length?"Désélectionner tout":"Sélectionner tout"})]}),N==="grid"?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:O.map(P=>{const W=i.find(X=>X.id===P.listingId);return s.jsxs("div",{className:"relative group",children:[s.jsx("div",{className:"absolute top-2 left-2 z-10",children:s.jsx("input",{type:"checkbox",checked:S.includes(P.id),onChange:X=>{X.target.checked?w(ee=>[...ee,P.id]):w(ee=>ee.filter(Z=>Z!==P.id))},className:"w-4 h-4 rounded border-border bg-background"})}),s.jsx("div",{className:"absolute top-2 right-2 z-10 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(Y,{variant:"destructive",size:"icon",className:"w-8 h-8",onClick:()=>D(P.id),children:s.jsx(qa,{className:"w-4 h-4"})})}),W?s.jsx(wm,{listing:W}):s.jsxs(ae,{children:[s.jsx("div",{className:"aspect-[4/3] bg-muted flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-muted-foreground",children:[s.jsx(Mf,{className:"w-8 h-8 mx-auto mb-2"}),s.jsx("p",{className:"text-sm",children:"Annonce non disponible"})]})}),s.jsxs(oe,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold mb-2",children:P.listingTitle}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:M(P.listingPrice,P.listingTransactionType)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Ajouté ",k(P.createdAt)]})]})]})]},P.id)})}):s.jsx("div",{className:"space-y-4",children:O.map(P=>{var X;const W=i.find(ee=>ee.id===P.listingId);return s.jsx(ae,{className:"hover:shadow-md transition-shadow",children:s.jsx(oe,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("input",{type:"checkbox",checked:S.includes(P.id),onChange:ee=>{ee.target.checked?w(Z=>[...Z,P.id]):w(Z=>Z.filter(U=>U!==P.id))},className:"w-4 h-4 rounded border-border"}),s.jsx("div",{className:"w-20 h-20 bg-muted rounded-lg flex items-center justify-center flex-shrink-0",children:P.listingImage?s.jsx("img",{src:P.listingImage,alt:P.listingTitle,className:"w-full h-full object-cover rounded-lg"}):s.jsx(pn,{className:"w-8 h-8 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx("h3",{className:"font-semibold truncate",children:P.listingTitle}),s.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[s.jsx("span",{className:"font-semibold text-primary",children:M(P.listingPrice,P.listingTransactionType)}),(W==null?void 0:W.status)&&s.jsx(et,{variant:W.status==="active"?"default":"secondary",children:W.status==="active"?"Disponible":W.status==="sold"?"Vendu":"Réservé"})]})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-2",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Zr,{className:"w-3 h-3"}),P.sellerName]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Ar,{className:"w-3 h-3"}),P.sellerUniversity]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(pm,{className:"w-3 h-3"}),(X=Jk.find(ee=>ee.value===P.listingCategory))==null?void 0:X.label]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs text-muted-foreground",children:["Ajouté ",k(P.createdAt)]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Y,{variant:"outline",size:"sm",onClick:()=>window.open(`/listing/${P.listingId}`,"_blank"),children:[s.jsx(is,{className:"w-3 h-3 mr-1"}),"Voir"]}),s.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>D(P.id),className:"text-destructive hover:text-destructive",children:s.jsx(qa,{className:"w-3 h-3"})})]})]})]})]})})},P.id)})})]})})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(ae,{children:s.jsxs(oe,{className:"pt-6 text-center",children:[s.jsx(Rr,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir vos favoris"}),s.jsx("p",{className:"text-muted-foreground",children:"Sauvegardez vos annonces préférées et retrouvez-les facilement"})]})})})},y0=({request:t,userRole:e,onStatusUpdate:n})=>{const{updatePaymentStatus:r,getPaymentInstructions:i}=Vy(),a=N=>{switch(N){case"pending":return Vn;case"confirmed":return Ct;case"completed":return Ct;case"cancelled":return Ed;case"disputed":return Pn;default:return Vn}},o=N=>{switch(N){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"confirmed":return"bg-blue-100 text-blue-800 border-blue-200";case"completed":return"bg-green-100 text-green-800 border-green-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";case"disputed":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},c=N=>{switch(N){case"pending":return"En attente";case"confirmed":return"Confirmé";case"completed":return"Terminé";case"cancelled":return"Annulé";case"disputed":return"Litige";default:return N}},u=N=>({cash:"Espèces",transfer:"Virement bancaire",paypal:"PayPal",lydia:"Lydia"})[N]||N,h=(N,j)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:j||"EUR"}).format(N),f=(N,j)=>{navigator.clipboard.writeText(N),fe.success(`${j} copié dans le presse-papiers`)},p=async N=>{try{await r(t.id,N),n==null||n(N)}catch(j){console.error("Erreur lors de la mise à jour du statut:",j)}},v=a(t.status),_=i(t.paymentMethod,t);return s.jsxs(ae,{className:"w-full",children:[s.jsx(qe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(Ln,{className:"w-6 h-6 text-primary"})}),s.jsxs("div",{children:[s.jsxs(Ge,{className:"text-lg",children:["Paiement ",u(t.paymentMethod)]}),s.jsxs(Tt,{children:[h(t.amount,t.currency)," • ",e==="buyer"?"Achat":"Vente"]})]})]}),s.jsxs(et,{className:o(t.status),children:[s.jsx(v,{className:"w-3 h-3 mr-1"}),c(t.status)]})]})}),s.jsxs(oe,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Créé le :"}),s.jsx("p",{className:"font-medium",children:sr(t.createdAt,"PPP à HH:mm",{locale:Mr})})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Dernière mise à jour :"}),s.jsx("p",{className:"font-medium",children:sr(t.updatedAt,"PPP à HH:mm",{locale:Mr})})]})]}),t.paymentMethod==="cash"&&t.meetingLocation&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[s.jsx(Ar,{className:"w-4 h-4"}),"Détails de la rencontre"]}),s.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg space-y-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground text-sm",children:"Lieu :"}),s.jsx("p",{className:"font-medium",children:t.meetingLocation})]}),t.meetingDateTime&&s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground text-sm",children:"Date et heure :"}),s.jsx("p",{className:"font-medium",children:sr(t.meetingDateTime,"PPP à HH:mm",{locale:Mr})})]})]})]}),t.securityCode&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[s.jsx(Vt,{className:"w-4 h-4"}),"Code de sécurité"]}),s.jsxs("div",{className:"flex items-center gap-2 bg-muted/50 p-3 rounded-lg",children:[s.jsx("code",{className:"font-mono text-lg font-bold",children:t.securityCode}),s.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>f(t.securityCode,"Code de sécurité"),children:s.jsx(C4,{className:"w-4 h-4"})})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Partagez ce code uniquement avec votre interlocuteur lors de la finalisation du paiement."})]}),t.status==="confirmed"&&_.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium",children:"Instructions de paiement"}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 p-3 rounded-lg",children:s.jsx("ul",{className:"space-y-1 text-sm",children:_.map((N,j)=>s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-blue-600 mt-0.5",children:"•"}),s.jsx("span",{children:N})]},j))})})]}),t.notes&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium",children:"Notes"}),s.jsx("p",{className:"text-sm bg-muted/50 p-3 rounded-lg",children:t.notes})]}),s.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e==="seller"&&t.status==="pending"&&s.jsxs(s.Fragment,{children:[s.jsxs(Y,{onClick:()=>p("confirmed"),className:"flex-1",children:[s.jsx(Ct,{className:"w-4 h-4 mr-2"}),"Accepter"]}),s.jsxs(Y,{variant:"outline",onClick:()=>p("cancelled"),className:"flex-1",children:[s.jsx(Ed,{className:"w-4 h-4 mr-2"}),"Refuser"]})]}),e==="buyer"&&t.status==="confirmed"&&s.jsxs(Y,{onClick:()=>p("completed"),className:"flex-1",children:[s.jsx(Ct,{className:"w-4 h-4 mr-2"}),"Marquer comme payé"]}),e==="seller"&&t.status==="confirmed"&&s.jsxs(Y,{onClick:()=>p("completed"),className:"flex-1",children:[s.jsx(Ct,{className:"w-4 h-4 mr-2"}),"Confirmer la réception"]}),(t.status==="pending"||t.status==="confirmed")&&s.jsxs(Y,{variant:"outline",onClick:()=>p("disputed"),className:"text-orange-600 hover:text-orange-700",children:[s.jsx(Pn,{className:"w-4 h-4 mr-2"}),"Signaler un problème"]})]}),t.status==="pending"&&e==="buyer"&&s.jsxs(Ut,{children:[s.jsx(Vn,{className:"h-4 w-4"}),s.jsx($t,{children:"Votre demande de paiement a été envoyée au vendeur. Vous recevrez une notification dès qu'il l'aura acceptée."})]}),t.status==="confirmed"&&e==="buyer"&&s.jsxs(Ut,{className:"border-green-200 bg-green-50",children:[s.jsx(Ct,{className:"h-4 w-4 text-green-600"}),s.jsx($t,{className:"text-green-800",children:"Le vendeur a accepté votre demande ! Suivez les instructions ci-dessus pour effectuer le paiement."})]}),t.status==="completed"&&s.jsxs(Ut,{className:"border-green-200 bg-green-50",children:[s.jsx(Ct,{className:"h-4 w-4 text-green-600"}),s.jsx($t,{className:"text-green-800",children:"Transaction terminée avec succès ! Merci d'avoir utilisé StudyMarket."})]}),t.status==="disputed"&&s.jsxs(Ut,{className:"border-orange-200 bg-orange-50",children:[s.jsx(Pn,{className:"h-4 w-4 text-orange-600"}),s.jsx($t,{className:"text-orange-800",children:"Un litige a été signalé. Notre équipe support va examiner la situation et vous contacter sous 24h."})]})]})]})},doe=()=>{const{currentUser:t,userProfile:e}=yn(),{paymentRequests:n,loading:r,fetchUserPaymentRequests:i,initializePaymentMethods:a}=Vy(),[o,c]=x.useState(""),[u,h]=x.useState("all"),[f,p]=x.useState("all"),[v,_]=x.useState({totalRequests:0,pendingRequests:0,completedRequests:0,totalAmount:0,averageAmount:0,byMethod:{},byStatus:{}});x.useEffect(()=>{a()},[a]),x.useEffect(()=>{t&&i(t.uid)},[t,i]),x.useEffect(()=>{N()},[n]);const N=()=>{const I={},D={};let B=0;n.forEach(R=>{I[R.paymentMethod]=(I[R.paymentMethod]||0)+1,D[R.status]=(D[R.status]||0)+1,B+=R.amount}),_({totalRequests:n.length,pendingRequests:D.pending||0,completedRequests:D.completed||0,totalAmount:B,averageAmount:n.length>0?B/n.length:0,byMethod:I,byStatus:D})},j=()=>n.filter(I=>{const D=!o||I.listingId.toLowerCase().includes(o.toLowerCase())||I.id.toLowerCase().includes(o.toLowerCase()),B=u==="all"||I.status===u,R=f==="all"||I.paymentMethod===f;return D&&B&&R}),S=()=>j().filter(I=>I.buyerId===(t==null?void 0:t.uid)),w=()=>j().filter(I=>I.sellerId===(t==null?void 0:t.uid)),y=I=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(I),E=()=>{const I={user:e==null?void 0:e.displayName,exportDate:new Date().toISOString(),stats:v,payments:n.map(F=>({id:F.id,amount:F.amount,currency:F.currency,method:F.paymentMethod,status:F.status,role:F.buyerId===(t==null?void 0:t.uid)?"buyer":"seller",createdAt:F.createdAt.toISOString(),updatedAt:F.updatedAt.toISOString()}))},D=new Blob([JSON.stringify(I,null,2)],{type:"application/json"}),B=URL.createObjectURL(D),R=document.createElement("a");R.href=B,R.download=`paiements-${new Date().toISOString().slice(0,10)}.json`,R.click(),URL.revokeObjectURL(B)};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(RG,{className:"w-8 h-8 text-primary"}),"Mes Paiements",v.totalRequests>0&&s.jsx(et,{variant:"secondary\\",className:"ml-1",children:v.totalRequests})]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Gérez vos demandes de paiement et suivez vos transactions"})]}),s.jsxs(Y,{variant:"outline",onClick:E,className:"flex items-center gap-2",children:[s.jsx(Zs,{className:"w-4 h-4"}),"Exporter"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(ae,{children:s.jsx(oe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:v.totalRequests}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Demandes totales"})]}),s.jsx(Ln,{className:"w-8 h-8 text-blue-600"})]})})}),s.jsx(ae,{children:s.jsx(oe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:v.pendingRequests}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"En attente"})]}),s.jsx(Vn,{className:"w-8 h-8 text-orange-600"})]})})}),s.jsx(ae,{children:s.jsx(oe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:v.completedRequests}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Terminées"})]}),s.jsx(Ct,{className:"w-8 h-8 text-green-600"})]})})}),s.jsx(ae,{children:s.jsx(oe,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold",children:y(v.totalAmount)}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Montant total"})]}),s.jsx(Zm,{className:"w-8 h-8 text-purple-600"})]})})})]}),s.jsx(ae,{children:s.jsx(oe,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(We,{placeholder:"Rechercher par ID de transaction...",value:o,onChange:I=>c(I.target.value),className:"pl-10"})]}),s.jsxs(Jt,{value:u,onValueChange:h,children:[s.jsx(qt,{className:"w-40",children:s.jsx(en,{placeholder:"Statut"})}),s.jsxs(Ht,{children:[s.jsx(Ve,{value:"all",children:"Tous les statuts"}),s.jsx(Ve,{value:"pending",children:"En attente"}),s.jsx(Ve,{value:"confirmed",children:"Confirmé"}),s.jsx(Ve,{value:"completed",children:"Terminé"}),s.jsx(Ve,{value:"cancelled",children:"Annulé"}),s.jsx(Ve,{value:"disputed",children:"Litige"})]})]}),s.jsxs(Jt,{value:f,onValueChange:p,children:[s.jsx(qt,{className:"w-40",children:s.jsx(en,{placeholder:"Méthode"})}),s.jsxs(Ht,{children:[s.jsx(Ve,{value:"all",children:"Toutes les méthodes"}),s.jsx(Ve,{value:"cash",children:"Espèces"}),s.jsx(Ve,{value:"transfer",children:"Virement"}),s.jsx(Ve,{value:"paypal",children:"PayPal"}),s.jsx(Ve,{value:"lydia",children:"Lydia"})]})]})]})})}),s.jsxs(Qc,{defaultValue:"all",className:"space-y-4",children:[s.jsxs(Dl,{className:"grid w-full grid-cols-3",children:[s.jsxs(cn,{value:"all",className:"flex items-center gap-2",children:[s.jsx(Ln,{className:"w-4 h-4"}),"Toutes",v.totalRequests>0&&s.jsx(et,{variant:"secondary\\",className:"ml-1",children:v.totalRequests})]}),s.jsxs(cn,{value:"purchases",className:"flex items-center gap-2",children:[s.jsx(Z_,{className:"w-4 h-4"}),"Mes achats",S().length>0&&s.jsx(et,{variant:"secondary\\",className:"ml-1",children:S().length})]}),s.jsxs(cn,{value:"sales",className:"flex items-center gap-2",children:[s.jsx(K_,{className:"w-4 h-4"}),"Mes ventes",w().length>0&&s.jsx(et,{variant:"secondary\\",className:"ml-1",children:w().length})]})]}),s.jsx(un,{value:"all",className:"space-y-4",children:s.jsxs(ae,{children:[s.jsxs(qe,{children:[s.jsxs(Ge,{className:"flex items-center gap-2",children:[s.jsx(E4,{className:"w-5 h-5"}),"Toutes les Demandes de Paiement"]}),s.jsx(Tt,{children:"Historique complet de vos transactions"})]}),s.jsx(oe,{children:r?s.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((I,D)=>s.jsxs("div",{className:"border rounded-lg p-4 animate-pulse",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"h-5 bg-muted rounded w-1/3"}),s.jsx("div",{className:"h-6 bg-muted rounded w-16"})]}),s.jsx("div",{className:"h-4 bg-muted rounded w-2/3 mb-2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]},D))}):j().length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Ln,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune demande de paiement"}),s.jsx("p",{className:"text-muted-foreground",children:n.length===0?"Vous n'avez pas encore de demandes de paiement.":"Aucune demande ne correspond à vos critères de recherche."})]}):s.jsx("div",{className:"space-y-4",children:j().map(I=>s.jsx(y0,{request:I,userRole:I.buyerId===t.uid?"buyer":"seller"},I.id))})})]})}),s.jsx(un,{value:"purchases",className:"space-y-4",children:s.jsxs(ae,{children:[s.jsxs(qe,{children:[s.jsxs(Ge,{className:"flex items-center gap-2",children:[s.jsx(Z_,{className:"w-5 h-5"}),"Mes Achats"]}),s.jsx(Tt,{children:"Demandes de paiement que vous avez initiées"})]}),s.jsx(oe,{children:S().length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Z_,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucun achat"}),s.jsx("p",{className:"text-muted-foreground",children:"Vous n'avez pas encore initié de demandes de paiement pour vos achats."})]}):s.jsx("div",{className:"space-y-4",children:S().map(I=>s.jsx(y0,{request:I,userRole:"buyer"},I.id))})})]})}),s.jsx(un,{value:"sales",className:"space-y-4",children:s.jsxs(ae,{children:[s.jsxs(qe,{children:[s.jsxs(Ge,{className:"flex items-center gap-2",children:[s.jsx(K_,{className:"w-5 h-5"}),"Mes Ventes"]}),s.jsx(Tt,{children:"Demandes de paiement reçues pour vos annonces"})]}),s.jsx(oe,{children:w().length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(K_,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune vente"}),s.jsx("p",{className:"text-muted-foreground",children:"Vous n'avez pas encore reçu de demandes de paiement pour vos annonces."})]}):s.jsx("div",{className:"space-y-4",children:w().map(I=>s.jsx(y0,{request:I,userRole:"seller"},I.id))})})]})})]}),s.jsxs(Ut,{className:"border-blue-200 bg-blue-50",children:[s.jsx(Vt,{className:"h-4 w-4 text-blue-600"}),s.jsxs($t,{className:"text-blue-800",children:[s.jsx("strong",{children:"Conseils de sécurité :"})," Ne communiquez jamais vos informations bancaires par message privé. Utilisez uniquement les canaux sécurisés de StudyMarket pour vos transactions."]})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(ae,{children:s.jsxs(oe,{className:"pt-6 text-center",children:[s.jsx(Ln,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir vos paiements"}),s.jsx("p",{className:"text-muted-foreground",children:"Gérez vos demandes de paiement et suivez vos transactions"})]})})})};var Gy="Collapsible",[hoe,s5]=jr(Gy),[foe,WN]=hoe(Gy),i5=x.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:i,disabled:a,onOpenChange:o,...c}=t,[u,h]=Ts({prop:r,defaultProp:i??!1,onChange:o,caller:Gy});return s.jsx(foe,{scope:n,disabled:a,contentId:Es(),open:u,onOpenToggle:x.useCallback(()=>h(f=>!f),[h]),children:s.jsx(ze.div,{"data-state":HN(u),"data-disabled":a?"":void 0,...c,ref:e})})});i5.displayName=Gy;var a5="CollapsibleTrigger",o5=x.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,i=WN(a5,n);return s.jsx(ze.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":HN(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...r,ref:e,onClick:Ee(t.onClick,i.onOpenToggle)})});o5.displayName=a5;var qN="CollapsibleContent",l5=x.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=WN(qN,t.__scopeCollapsible);return s.jsx(Nr,{present:n||i.open,children:({present:a})=>s.jsx(moe,{...r,ref:e,present:a})})});l5.displayName=qN;var moe=x.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:i,...a}=t,o=WN(qN,n),[c,u]=x.useState(r),h=x.useRef(null),f=ot(e,h),p=x.useRef(0),v=p.current,_=x.useRef(0),N=_.current,j=o.open||c,S=x.useRef(j),w=x.useRef(void 0);return x.useEffect(()=>{const y=requestAnimationFrame(()=>S.current=!1);return()=>cancelAnimationFrame(y)},[]),Un(()=>{const y=h.current;if(y){w.current=w.current||{transitionDuration:y.style.transitionDuration,animationName:y.style.animationName},y.style.transitionDuration="0s",y.style.animationName="none";const E=y.getBoundingClientRect();p.current=E.height,_.current=E.width,S.current||(y.style.transitionDuration=w.current.transitionDuration,y.style.animationName=w.current.animationName),u(r)}},[o.open,r]),s.jsx(ze.div,{"data-state":HN(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!j,...a,ref:f,style:{"--radix-collapsible-content-height":v?`${v}px`:void 0,"--radix-collapsible-content-width":N?`${N}px`:void 0,...t.style},children:j&&i})});function HN(t){return t?"open":"closed"}var poe=i5,goe=o5,voe=l5,Ii="Accordion",xoe=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[GN,yoe,_oe]=Qm(Ii),[Ky,uce]=jr(Ii,[_oe,s5]),KN=s5(),c5=Pe.forwardRef((t,e)=>{const{type:n,...r}=t,i=r,a=r;return s.jsx(GN.Provider,{scope:t.__scopeAccordion,children:n==="multiple"?s.jsx(Noe,{...a,ref:e}):s.jsx(joe,{...i,ref:e})})});c5.displayName=Ii;var[u5,woe]=Ky(Ii),[d5,boe]=Ky(Ii,{collapsible:!1}),joe=Pe.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},collapsible:a=!1,...o}=t,[c,u]=Ts({prop:n,defaultProp:r??"",onChange:i,caller:Ii});return s.jsx(u5,{scope:t.__scopeAccordion,value:Pe.useMemo(()=>c?[c]:[],[c]),onItemOpen:u,onItemClose:Pe.useCallback(()=>a&&u(""),[a,u]),children:s.jsx(d5,{scope:t.__scopeAccordion,collapsible:a,children:s.jsx(h5,{...o,ref:e})})})}),Noe=Pe.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...a}=t,[o,c]=Ts({prop:n,defaultProp:r??[],onChange:i,caller:Ii}),u=Pe.useCallback(f=>c((p=[])=>[...p,f]),[c]),h=Pe.useCallback(f=>c((p=[])=>p.filter(v=>v!==f)),[c]);return s.jsx(u5,{scope:t.__scopeAccordion,value:o,onItemOpen:u,onItemClose:h,children:s.jsx(d5,{scope:t.__scopeAccordion,collapsible:!0,children:s.jsx(h5,{...a,ref:e})})})}),[Soe,Zy]=Ky(Ii),h5=Pe.forwardRef((t,e)=>{const{__scopeAccordion:n,disabled:r,dir:i,orientation:a="vertical",...o}=t,c=Pe.useRef(null),u=ot(c,e),h=yoe(n),p=Gc(i)==="ltr",v=Ee(t.onKeyDown,_=>{var F;if(!xoe.includes(_.key))return;const N=_.target,j=h().filter(V=>{var k;return!((k=V.ref.current)!=null&&k.disabled)}),S=j.findIndex(V=>V.ref.current===N),w=j.length;if(S===-1)return;_.preventDefault();let y=S;const E=0,I=w-1,D=()=>{y=S+1,y>I&&(y=E)},B=()=>{y=S-1,y<E&&(y=I)};switch(_.key){case"Home":y=E;break;case"End":y=I;break;case"ArrowRight":a==="horizontal"&&(p?D():B());break;case"ArrowDown":a==="vertical"&&D();break;case"ArrowLeft":a==="horizontal"&&(p?B():D());break;case"ArrowUp":a==="vertical"&&B();break}const R=y%w;(F=j[R].ref.current)==null||F.focus()});return s.jsx(Soe,{scope:n,disabled:r,direction:i,orientation:a,children:s.jsx(GN.Slot,{scope:n,children:s.jsx(ze.div,{...o,"data-orientation":a,ref:u,onKeyDown:r?void 0:v})})})}),_x="AccordionItem",[Eoe,ZN]=Ky(_x),f5=Pe.forwardRef((t,e)=>{const{__scopeAccordion:n,value:r,...i}=t,a=Zy(_x,n),o=woe(_x,n),c=KN(n),u=Es(),h=r&&o.value.includes(r)||!1,f=a.disabled||t.disabled;return s.jsx(Eoe,{scope:n,open:h,disabled:f,triggerId:u,children:s.jsx(poe,{"data-orientation":a.orientation,"data-state":y5(h),...c,...i,ref:e,disabled:f,open:h,onOpenChange:p=>{p?o.onItemOpen(r):o.onItemClose(r)}})})});f5.displayName=_x;var m5="AccordionHeader",p5=Pe.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=Zy(Ii,n),a=ZN(m5,n);return s.jsx(ze.h3,{"data-orientation":i.orientation,"data-state":y5(a.open),"data-disabled":a.disabled?"":void 0,...r,ref:e})});p5.displayName=m5;var N1="AccordionTrigger",g5=Pe.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=Zy(Ii,n),a=ZN(N1,n),o=boe(N1,n),c=KN(n);return s.jsx(GN.ItemSlot,{scope:n,children:s.jsx(goe,{"aria-disabled":a.open&&!o.collapsible||void 0,"data-orientation":i.orientation,id:a.triggerId,...c,...r,ref:e})})});g5.displayName=N1;var v5="AccordionContent",x5=Pe.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=Zy(Ii,n),a=ZN(v5,n),o=KN(n);return s.jsx(voe,{role:"region","aria-labelledby":a.triggerId,"data-orientation":i.orientation,...o,...r,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});x5.displayName=v5;function y5(t){return t?"open":"closed"}var Coe=c5,koe=f5,Toe=p5,_5=g5,w5=x5;const Poe=Coe,b5=x.forwardRef(({className:t,...e},n)=>s.jsx(koe,{ref:n,className:Xe("border-b",t),...e}));b5.displayName="AccordionItem";const j5=x.forwardRef(({className:t,children:e,...n},r)=>s.jsx(Toe,{className:"flex",children:s.jsxs(_5,{ref:r,className:Xe("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...n,children:[e,s.jsx(xD,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})}));j5.displayName=_5.displayName;const N5=x.forwardRef(({className:t,children:e,...n},r)=>s.jsx(w5,{ref:r,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:s.jsx("div",{className:Xe("pb-4 pt-0",t),children:e})}));N5.displayName=w5.displayName;const eT=[{category:"Compte et Inscription",icon:Ym,questions:[{question:"Comment créer un compte étudiant vérifié ?",answer:'Pour créer votre compte, utilisez votre adresse email universitaire (ex: prenom.nom@univ-exemple.fr). Notre système vérifie automatiquement votre statut étudiant. Vous recevrez un badge "Étudiant certifié" une fois la vérification terminée.'},{question:"Pourquoi mon université n'est pas reconnue ?",answer:"Nous ajoutons régulièrement de nouvelles universités. Si la vôtre n'apparaît pas, contactez-nous avec votre carte étudiante et nous l'ajouterons rapidement à notre base de données."},{question:"Comment modifier mes informations de profil ?",answer:'Rendez-vous dans "Mon profil" depuis le menu utilisateur. Vous pouvez modifier votre photo, bio, université, et préférences de notification. Certaines informations nécessitent une re-vérification.'},{question:"Puis-je avoir plusieurs comptes ?",answer:"Non, un seul compte par personne est autorisé. Cela garantit la confiance et la sécurité de notre communauté étudiante."}]},{category:"Achats et Ventes",icon:Ln,questions:[{question:"Comment publier une annonce ?",answer:'Cliquez sur "Publier" dans le menu principal. Remplissez le formulaire avec photos, description détaillée, prix et lieu de rencontre. Votre annonce sera visible immédiatement après publication.'},{question:"Quels modes de paiement sont acceptés ?",answer:"Nous recommandons les paiements sécurisés : espèces lors de la remise en main propre, virements bancaires, Lydia, ou PayPal. Évitez les paiements à distance sans garantie."},{question:"Comment fixer le bon prix ?",answer:"Notre IA vous suggère une fourchette de prix basée sur l'état et la catégorie. Consultez les annonces similaires et considérez l'état réel de votre objet. Les prix justes se vendent plus rapidement."},{question:"Que faire si un acheteur ne se présente pas ?",answer:"Contactez-le via notre messagerie. Si pas de réponse sous 24h, vous pouvez signaler le comportement et remettre votre annonce en ligne. Nous prenons ces situations au sérieux."}]},{category:"Sécurité et Confiance",icon:Vt,questions:[{question:"Comment éviter les arnaques ?",answer:"Rencontrez-vous toujours en personne dans un lieu public (campus, bibliothèque). Vérifiez l'identité avec la carte étudiante. Ne payez jamais à l'avance sans avoir vu l'objet. Utilisez notre système de signalement en cas de doute."},{question:"Où se rencontrer en sécurité ?",answer:`Privilégiez les lieux publics de votre campus : bibliothèques, halls d'entrée, cafétérias. Évitez les parkings isolés ou les domiciles privés. Certaines universités ont des "zones d'échange sécurisées".`},{question:"Comment signaler un utilisateur suspect ?",answer:'Utilisez le bouton "Signaler" sur le profil ou dans la conversation. Décrivez précisément le problème. Notre équipe examine tous les signalements sous 24h et prend les mesures appropriées.'},{question:"Que faire en cas de litige ?",answer:"Contactez d'abord l'autre partie via notre messagerie. Si pas de résolution, utilisez notre service de médiation gratuit. En dernier recours, contactez le support avec toutes les preuves (captures, messages)."}]},{category:"Messagerie et Communication",icon:xn,questions:[{question:"Comment contacter un vendeur ?",answer:`Cliquez sur "Contacter le vendeur" sur l'annonce. Rédigez un message poli et précis. Le vendeur recevra une notification email et pourra vous répondre via notre messagerie sécurisée.`},{question:"Pourquoi mes messages ne sont pas lus ?",answer:"Les utilisateurs reçoivent des notifications email mais peuvent avoir des délais de réponse. Soyez patient (24-48h). Si pas de réponse, l'annonce est peut-être déjà vendue ou l'utilisateur inactif."},{question:"Puis-je partager mes coordonnées ?",answer:"Oui, mais seulement après les premiers échanges via notre messagerie. Cela nous permet de garder une trace en cas de problème et de vous protéger contre le spam."},{question:"Comment bloquer un utilisateur ?",answer:`Dans la conversation, cliquez sur les trois points puis "Bloquer". L'utilisateur ne pourra plus vous contacter. Vous pouvez débloquer depuis vos paramètres si nécessaire.`}]},{category:"Impact Écologique",icon:Rr,questions:[{question:"Comment est calculé mon impact CO₂ ?",answer:"Chaque objet acheté d'occasion évite la production d'un neuf. Nous calculons le CO₂ économisé selon des données ADEME : 85kg pour un smartphone, 8.5kg pour un livre, etc. Votre total s'affiche dans votre profil."},{question:"Qu'est-ce que les badges écologiques ?",answer:'Vous gagnez des badges selon vos actions : "Premier Pas" (1ère transaction), "Éco-Warrior" (10kg CO₂), "Héros Climatique" (100kg CO₂). Ils apparaissent sur votre profil et motivent la communauté.'},{question:"Comment améliorer mon rang écologique ?",answer:"Multipliez les transactions d'occasion, privilégiez les dons (bonus +20%), participez aux échanges. Plus vous économisez de CO₂, plus votre rang augmente : Débutant → Éco-Warrior → Maître Environnemental → Légende Écologique."}]},{category:"Technique et Bugs",icon:hy,questions:[{question:"L'application ne fonctionne pas correctement",answer:"Essayez de vider le cache de votre navigateur (Ctrl+F5) ou utilisez un autre navigateur. Vérifiez votre connexion internet. Si le problème persiste, contactez-nous avec votre navigateur et système d'exploitation."},{question:"Je ne reçois pas les notifications email",answer:'Vérifiez vos spams/courriers indésirables. Ajoutez notifications@studymarket.fr à vos contacts. Vérifiez vos préférences de notification dans "Paramètres". Certains emails universitaires bloquent les notifications externes.'},{question:"Mes photos ne s'uploadent pas",answer:"Vérifiez que vos images font moins de 15MB et sont au format JPG/PNG. Essayez de les redimensionner. Si vous êtes sur mobile, autorisez l'accès à la galerie dans les paramètres de votre navigateur."},{question:"Comment supprimer mon compte ?",answer:'Rendez-vous dans "Paramètres" > "Compte" > "Supprimer mon compte". Cette action est irréversible et supprime toutes vos données. Vos annonces actives seront automatiquement retirées.'}]}],Ioe=[{title:"Chat en direct",description:"Réponse immédiate pendant les heures ouvrables",icon:xn,action:"Démarrer le chat",available:!0,hours:"Lun-Ven 9h-18h"},{title:"Email Support",description:"Réponse sous 24h maximum",icon:us,action:"support@studymarket.fr",available:!0,hours:"24h/7j"},{title:"Téléphone",description:"Pour les urgences uniquement",icon:Jd,action:"01 23 45 67 89",available:!1,hours:"Bientôt disponible"},{title:"Centre de ressources",description:"Guides détaillés et tutoriels",icon:b4,action:"Consulter les guides",available:!0,hours:"Toujours accessible"}],Aoe=[{title:"Guide du vendeur débutant",description:"Tout savoir pour vendre efficacement",icon:Go,duration:"5 min",type:"Article"},{title:"Sécurité : éviter les arnaques",description:"Reconnaître et éviter les situations dangereuses",icon:Vt,duration:"3 min",type:"Vidéo"},{title:"Optimiser ses annonces",description:"Photos, descriptions et prix pour vendre vite",icon:eh,duration:"7 min",type:"Article"},{title:"Impact écologique expliqué",description:"Comment nous calculons votre empreinte carbone",icon:Rr,duration:"4 min",type:"Infographie"}],Roe=()=>{const{currentUser:t,userProfile:e}=yn(),[n,r]=x.useState(""),[i,a]=x.useState("all"),[o,c]=x.useState({subject:"",category:"",message:"",priority:"normal"}),[u,h]=x.useState(!1),f=eT.filter(v=>{if(i!=="all"&&v.category!==i)return!1;if(n){const _=n.toLowerCase();return v.questions.some(N=>N.question.toLowerCase().includes(_)||N.answer.toLowerCase().includes(_))}return!0}),p=async v=>{if(v.preventDefault(),!o.subject||!o.message){fe.error("Veuillez remplir tous les champs obligatoires");return}h(!0);try{await new Promise(_=>setTimeout(_,1e3)),fe.success("Votre message a été envoyé ! Nous vous répondrons sous 24h."),c({subject:"",category:"",message:"",priority:"normal"})}catch{fe.error("Erreur lors de l'envoi. Veuillez réessayer.")}finally{h(!1)}};return s.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4 bg-gray-50 dark:bg-gray-950 min-h-screen",children:[s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"flex items-center justify-center gap-2 mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center",children:s.jsx(Gv,{className:"w-6 h-6 text-white"})})}),s.jsx("h1",{className:"text-4xl font-bold",children:"Centre d'Aide StudyMarket"}),s.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Trouvez rapidement les réponses à vos questions ou contactez notre équipe support"})]}),s.jsx(ae,{children:s.jsx(oe,{className:"pt-6",children:s.jsxs("div",{className:"relative max-w-2xl mx-auto",children:[s.jsx(xr,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-muted-foreground"}),s.jsx(We,{type:"text",placeholder:"Rechercher dans l'aide... (ex: comment vendre, sécurité, notifications)",value:n,onChange:v=>r(v.target.value),className:"pl-12 h-14 text-lg"})]})})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Ioe.map((v,_)=>s.jsx(ae,{className:`transition-all hover:shadow-lg ${v.available?"hover:-translate-y-1":"opacity-60"}`,children:s.jsxs(oe,{className:"pt-6 text-center",children:[s.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-4 ${v.available?"bg-primary/10 text-primary":"bg-muted text-muted-foreground"}`,children:s.jsx(v.icon,{className:"w-6 h-6"})}),s.jsx("h3",{className:"font-semibold mb-2",children:v.title}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:v.description}),s.jsx("div",{className:"text-xs text-muted-foreground mb-3",children:v.hours}),s.jsx(Y,{variant:v.available?"default":"secondary",size:"sm",disabled:!v.available,className:"w-full",children:v.action})]})},_))}),s.jsxs(Qc,{defaultValue:"faq",className:"space-y-6",children:[s.jsxs(Dl,{className:"grid w-full grid-cols-3",children:[s.jsxs(cn,{value:"faq",className:"flex items-center gap-2",children:[s.jsx(Gv,{className:"w-4 h-4"}),"FAQ"]}),s.jsxs(cn,{value:"guides",className:"flex items-center gap-2",children:[s.jsx(b4,{className:"w-4 h-4"}),"Guides"]}),s.jsxs(cn,{value:"contact",className:"flex items-center gap-2",children:[s.jsx(xn,{className:"w-4 h-4"}),"Contact"]})]}),s.jsxs(un,{value:"faq",className:"space-y-6",children:[s.jsx(ae,{children:s.jsx(oe,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx(Y,{variant:i==="all"?"default":"outline",size:"sm",onClick:()=>a("all"),children:"Toutes les catégories"}),eT.map(v=>s.jsxs(Y,{variant:i===v.category?"default":"outline",size:"sm",onClick:()=>a(v.category),className:"flex items-center gap-2",children:[s.jsx(v.icon,{className:"w-4 h-4"}),v.category]},v.category))]})})}),f.length===0?s.jsx(ae,{children:s.jsxs(oe,{className:"pt-12 pb-12 text-center",children:[s.jsx(xr,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun résultat trouvé"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Essayez avec d'autres mots-clés ou contactez notre support"}),s.jsx(Y,{variant:"outline",onClick:()=>r(""),children:"Effacer la recherche"})]})}):s.jsx("div",{className:"space-y-6",children:f.map((v,_)=>s.jsxs(ae,{children:[s.jsx(qe,{children:s.jsxs(Ge,{className:"flex items-center gap-2",children:[s.jsx(v.icon,{className:"w-5 h-5"}),v.category]})}),s.jsx(oe,{children:s.jsx(Poe,{type:"single",collapsible:!0,className:"w-full",children:v.questions.map((N,j)=>s.jsxs(b5,{value:`${_}-${j}`,children:[s.jsx(j5,{className:"text-left",children:N.question}),s.jsx(N5,{className:"text-muted-foreground leading-relaxed",children:N.answer})]},j))})})]},_))})]}),s.jsxs(un,{value:"guides",className:"space-y-6",children:[s.jsxs(ae,{children:[s.jsxs(qe,{children:[s.jsxs(Ge,{className:"flex items-center gap-2",children:[s.jsx(P4,{className:"w-5 h-5"}),"Guides et Tutoriels"]}),s.jsx(Tt,{children:"Apprenez à utiliser StudyMarket comme un pro avec nos guides détaillés"})]}),s.jsx(oe,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Aoe.map((v,_)=>s.jsx("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center flex-shrink-0",children:s.jsx(v.icon,{className:"w-6 h-6 text-primary"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("h3",{className:"font-semibold",children:v.title}),s.jsx(et,{variant:"outline",className:"text-xs",children:v.type})]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:v.description}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[s.jsx(Vn,{className:"w-3 h-3"}),v.duration]}),s.jsxs(Y,{size:"sm",variant:"outline",children:[s.jsx(is,{className:"w-3 h-3 mr-1"}),"Lire"]})]})]})]})},_))})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(ae,{children:s.jsxs(oe,{className:"pt-6 text-center",children:[s.jsx(R4,{className:"w-8 h-8 text-blue-600 mx-auto mb-3"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Tutoriels Vidéo"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Apprenez visuellement avec nos vidéos courtes"}),s.jsxs(Y,{variant:"outline",size:"sm",children:[s.jsx(is,{className:"w-3 h-3 mr-1"}),"Voir les vidéos"]})]})}),s.jsx(ae,{children:s.jsxs(oe,{className:"pt-6 text-center",children:[s.jsx(Zs,{className:"w-8 h-8 text-green-600 mx-auto mb-3"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Ressources PDF"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Téléchargez nos guides au format PDF"}),s.jsxs(Y,{variant:"outline",size:"sm",children:[s.jsx(Zs,{className:"w-3 h-3 mr-1"}),"Télécharger"]})]})}),s.jsx(ae,{children:s.jsxs(oe,{className:"pt-6 text-center",children:[s.jsx(Ym,{className:"w-8 h-8 text-purple-600 mx-auto mb-3"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Communauté"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Échangez avec d'autres étudiants"}),s.jsxs(Y,{variant:"outline",size:"sm",children:[s.jsx(is,{className:"w-3 h-3 mr-1"}),"Rejoindre"]})]})})]})]}),s.jsx(un,{value:"contact",className:"space-y-6",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs(ae,{children:[s.jsxs(qe,{children:[s.jsxs(Ge,{className:"flex items-center gap-2",children:[s.jsx(Td,{className:"w-5 h-5"}),"Contactez notre équipe"]}),s.jsx(Tt,{children:"Décrivez votre problème en détail pour une réponse rapide et précise"})]}),s.jsx(oe,{children:s.jsxs("form",{onSubmit:p,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(be,{htmlFor:"subject",children:"Sujet *"}),s.jsx(We,{id:"subject",value:o.subject,onChange:v=>c(_=>({..._,subject:v.target.value})),placeholder:"Résumez votre problème en quelques mots",className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(be,{htmlFor:"category",children:"Catégorie"}),s.jsxs(Jt,{value:o.category,onValueChange:v=>c(_=>({..._,category:v})),children:[s.jsx(qt,{className:"mt-1",children:s.jsx(en,{placeholder:"Sélectionnez une catégorie"})}),s.jsxs(Ht,{children:[s.jsx(Ve,{value:"account",children:"Compte et profil"}),s.jsx(Ve,{value:"listing",children:"Annonces"}),s.jsx(Ve,{value:"payment",children:"Paiements"}),s.jsx(Ve,{value:"security",children:"Sécurité"}),s.jsx(Ve,{value:"technical",children:"Problème technique"}),s.jsx(Ve,{value:"other",children:"Autre"})]})]})]}),s.jsxs("div",{children:[s.jsx(be,{htmlFor:"priority",children:"Priorité"}),s.jsxs(Jt,{value:o.priority,onValueChange:v=>c(_=>({..._,priority:v})),children:[s.jsx(qt,{className:"mt-1",children:s.jsx(en,{})}),s.jsxs(Ht,{children:[s.jsx(Ve,{value:"low",children:"Basse - Question générale"}),s.jsx(Ve,{value:"normal",children:"Normale - Besoin d'aide"}),s.jsx(Ve,{value:"high",children:"Haute - Problème bloquant"}),s.jsx(Ve,{value:"urgent",children:"Urgente - Sécurité/Arnaque"})]})]})]}),s.jsxs("div",{children:[s.jsx(be,{htmlFor:"message",children:"Message *"}),s.jsx(Qs,{id:"message",value:o.message,onChange:v=>c(_=>({..._,message:v.target.value})),placeholder:"Décrivez votre problème en détail. Plus vous donnez d'informations, plus nous pourrons vous aider efficacement.",rows:6,className:"mt-1"})]}),t&&s.jsxs(Ut,{children:[s.jsx(Ct,{className:"h-4 w-4"}),s.jsxs($t,{children:["Nous vous répondrons à l'adresse ",s.jsx("strong",{children:t.email})]})]}),s.jsx(Y,{type:"submit",className:"w-full",disabled:u||!o.subject||!o.message,children:u?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Envoi en cours..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Td,{className:"w-4 h-4 mr-2"}),"Envoyer le message"]})})]})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ae,{children:[s.jsx(qe,{children:s.jsxs(Ge,{className:"flex items-center gap-2",children:[s.jsx(Vn,{className:"w-5 h-5"}),"Temps de réponse"]})}),s.jsxs(oe,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Questions générales"}),s.jsx(et,{variant:"secondary",children:"24h"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Problèmes techniques"}),s.jsx(et,{variant:"secondary",children:"12h"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Urgences sécurité"}),s.jsx(et,{className:"bg-red-500",children:"2h"})]})]})]}),s.jsxs(ae,{children:[s.jsx(qe,{children:s.jsxs(Ge,{className:"flex items-center gap-2",children:[s.jsx(k4,{className:"w-5 h-5"}),"Autres moyens de contact"]})}),s.jsxs(oe,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(us,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Email direct"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"support@studymarket.fr"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(xn,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Chat en direct"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Lun-Ven 9h-18h"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Hc,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Application mobile"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Bientôt disponible"})]})]})]})]}),s.jsxs(ae,{children:[s.jsx(qe,{children:s.jsxs(Ge,{className:"flex items-center gap-2",children:[s.jsx(eh,{className:"w-5 h-5"}),"État du système"]})}),s.jsxs(oe,{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Plateforme web"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),s.jsx("span",{className:"text-sm text-green-600",children:"Opérationnel"})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Messagerie"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),s.jsx("span",{className:"text-sm text-green-600",children:"Opérationnel"})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Notifications email"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),s.jsx("span",{className:"text-sm text-yellow-600",children:"Maintenance"})]})]}),s.jsxs(Y,{variant:"outline",size:"sm",className:"w-full mt-3",children:[s.jsx(is,{className:"w-3 h-3 mr-1"}),"Page de statut complète"]})]})]})]})]})})]})]})},Moe=[{category:"Rencontres et Échanges",icon:Ar,color:"text-blue-600",tips:[{title:"Choisissez des lieux publics",description:"Rencontrez-vous toujours dans des endroits fréquentés : bibliothèques universitaires, halls d'entrée, cafétérias du campus.",type:"do",icon:Ct},{title:"Évitez les lieux isolés",description:"Ne vous donnez jamais rendez-vous dans des parkings souterrains, domiciles privés ou endroits déserts.",type:"dont",icon:Ed},{title:"Prévenez un proche",description:"Informez toujours quelqu'un de votre rendez-vous : lieu, heure, personne rencontrée.",type:"do",icon:Ct},{title:"Rencontrez en journée",description:"Privilégiez les rendez-vous en journée, évitez les rencontres tardives ou nocturnes.",type:"do",icon:Ct}]},{category:"Vérification d'Identité",icon:A4,color:"text-green-600",tips:[{title:"Demandez la carte étudiante",description:"Vérifiez toujours l'identité avec la carte étudiante. C'est votre garantie de sécurité.",type:"do",icon:Ct},{title:"Vérifiez le profil StudyMarket",description:"Consultez le profil : badge vérifié, avis, nombre de transactions, ancienneté du compte.",type:"do",icon:Ct},{title:"Méfiez-vous des profils récents",description:"Soyez prudent avec les comptes créés récemment sans historique de transactions.",type:"dont",icon:Pn},{title:"Utilisez la messagerie StudyMarket",description:"Gardez une trace de vos échanges via notre messagerie sécurisée.",type:"do",icon:Ct}]},{category:"Paiements Sécurisés",icon:Ln,color:"text-purple-600",tips:[{title:"Payez à la remise",description:"Ne payez qu'après avoir inspecté l'objet et lors de la remise en main propre.",type:"do",icon:Ct},{title:"Évitez les paiements à l'avance",description:"Ne versez jamais d'acompte ou de paiement intégral avant d'avoir vu l'objet.",type:"dont",icon:Ed},{title:"Utilisez des moyens traçables",description:"Privilégiez Lydia, PayPal, virements ou espèces. Évitez les cryptomonnaies.",type:"do",icon:Ct},{title:"Méfiez-vous des prix trop bas",description:"Un iPhone à 50€ ou un MacBook à 200€ sont probablement des arnaques.",type:"dont",icon:Pn}]},{category:"Communication",icon:xn,color:"text-orange-600",tips:[{title:"Restez poli et respectueux",description:"Maintenez un ton courtois dans tous vos échanges, même en cas de désaccord.",type:"do",icon:Ct},{title:"Posez des questions précises",description:"Demandez des détails sur l'état, l'âge, la raison de la vente, les défauts éventuels.",type:"do",icon:Ct},{title:"Méfiez-vous de l'urgence",description:'Les vendeurs qui pressent ("achetez maintenant", "dernière chance") sont suspects.',type:"dont",icon:Pn},{title:"Gardez les preuves",description:"Conservez les captures d'écran des conversations en cas de litige.",type:"do",icon:Ct}]}],Doe=[{title:"Prix anormalement bas",description:"Un objet vendu bien en-dessous de sa valeur marchande",severity:"high",icon:Pn},{title:"Paiement demandé à l'avance",description:"Demande d'acompte ou paiement avant la rencontre",severity:"high",icon:Ln},{title:"Refus de se rencontrer",description:"Propose uniquement l'envoi postal ou la livraison",severity:"high",icon:Ar},{title:"Photos de mauvaise qualité",description:"Images floues, prises sur internet ou très peu nombreuses",severity:"medium",icon:hc},{title:"Profil incomplet",description:"Pas de photo de profil, peu d'informations, compte récent",severity:"medium",icon:Ym},{title:"Communication étrange",description:"Français approximatif, réponses évasives, pression temporelle",severity:"medium",icon:xn},{title:"Changement de lieu",description:"Modifie le lieu de rendez-vous au dernier moment",severity:"medium",icon:Vn},{title:"Demande d'informations personnelles",description:"Veut votre adresse, RIB, ou autres données sensibles",severity:"high",icon:Ic}],Ooe=[{title:"Urgence immédiate",description:"Danger physique, menaces, agression",contact:"17 (Police)",icon:Jd,color:"text-red-600"},{title:"Signalement StudyMarket",description:"Comportement suspect, arnaque, violation des règles",contact:`Bouton "Signaler" dans l'app`,icon:ic,color:"text-orange-600"},{title:"Support StudyMarket",description:"Questions, aide, médiation de conflit",contact:"support@studymarket.fr",icon:xn,color:"text-blue-600"},{title:"Sécurité Campus",description:"Incidents sur le campus universitaire",contact:"Service sécurité de votre université",icon:Vt,color:"text-green-600"}],Loe=()=>s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"flex items-center justify-center gap-2 mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center",children:s.jsx(Vt,{className:"w-6 h-6 text-white"})})}),s.jsx("h1",{className:"text-4xl font-bold",children:"Sécurité & Conseils"}),s.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"Votre sécurité est notre priorité. Suivez ces conseils pour des échanges sereins et sécurisés entre étudiants."})]}),s.jsxs(Ut,{className:"border-green-200 bg-green-50",children:[s.jsx(Vt,{className:"h-4 w-4 text-green-600"}),s.jsx($t,{className:"text-green-800",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Rappel important :"})," Rencontrez-vous toujours dans un lieu public du campus et vérifiez l'identité avec la carte étudiante."]}),s.jsxs(Y,{variant:"outline",size:"sm",className:"ml-4 border-green-300 text-green-700 hover:bg-green-100",children:[s.jsx(Zs,{className:"w-3 h-3 mr-1"}),"Guide PDF"]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(ae,{children:s.jsxs(oe,{className:"pt-6 text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(Vt,{className:"w-6 h-6 text-green-600"})}),s.jsx("div",{className:"text-2xl font-bold text-green-600",children:"99.8%"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Transactions sécurisées"})]})}),s.jsx(ae,{children:s.jsxs(oe,{className:"pt-6 text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(A4,{className:"w-6 h-6 text-blue-600"})}),s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"100%"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Étudiants vérifiés"})]})}),s.jsx(ae,{children:s.jsxs(oe,{className:"pt-6 text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(Vn,{className:"w-6 h-6 text-purple-600"})}),s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"< 2h"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Réponse aux signalements"})]})}),s.jsx(ae,{children:s.jsxs(oe,{className:"pt-6 text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(Go,{className:"w-6 h-6 text-orange-600"})}),s.jsx("div",{className:"text-2xl font-bold text-orange-600",children:"4.9/5"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Satisfaction sécurité"})]})})]}),s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Guide de Sécurité Complet"}),s.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Suivez ces conseils essentiels pour des échanges en toute sécurité"})]}),Moe.map((t,e)=>s.jsxs(ae,{children:[s.jsx(qe,{children:s.jsxs(Ge,{className:"flex items-center gap-2",children:[s.jsx(t.icon,{className:`w-6 h-6 ${t.color}`}),t.category]})}),s.jsx(oe,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.tips.map((n,r)=>s.jsx("div",{className:`p-4 rounded-lg border-2 ${n.type==="do"?"border-green-200 bg-green-50":n.type==="dont"?"border-red-200 bg-red-50":"border-orange-200 bg-orange-50"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(n.icon,{className:`w-5 h-5 mt-0.5 ${n.type==="do"?"text-green-600":n.type==="dont"?"text-red-600":"text-orange-600"}`}),s.jsxs("div",{children:[s.jsx("h4",{className:`font-semibold mb-2 ${n.type==="do"?"text-green-800":n.type==="dont"?"text-red-800":"text-orange-800"}`,children:n.title}),s.jsx("p",{className:`text-sm ${n.type==="do"?"text-green-700":n.type==="dont"?"text-red-700":"text-orange-700"}`,children:n.description})]})]})},r))})})]},e))]}),s.jsxs(ae,{children:[s.jsxs(qe,{children:[s.jsxs(Ge,{className:"flex items-center gap-2",children:[s.jsx(Pn,{className:"w-6 h-6 text-red-600"}),"Signaux d'Alarme à Reconnaître"]}),s.jsx(Tt,{children:"Ces comportements doivent vous alerter et vous inciter à la prudence"})]}),s.jsx(oe,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Doe.map((t,e)=>s.jsx("div",{className:`p-4 rounded-lg border-2 ${t.severity==="high"?"border-red-200 bg-red-50":"border-orange-200 bg-orange-50"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(t.icon,{className:`w-5 h-5 mt-0.5 ${t.severity==="high"?"text-red-600":"text-orange-600"}`}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("h4",{className:`font-semibold ${t.severity==="high"?"text-red-800":"text-orange-800"}`,children:t.title}),s.jsx(et,{variant:t.severity==="high"?"destructive":"secondary",className:"text-xs",children:t.severity==="high"?"Danger":"Attention"})]}),s.jsx("p",{className:`text-sm ${t.severity==="high"?"text-red-700":"text-orange-700"}`,children:t.description})]})]})},e))})})]}),s.jsxs(ae,{children:[s.jsxs(qe,{children:[s.jsxs(Ge,{className:"flex items-center gap-2",children:[s.jsx(Jd,{className:"w-6 h-6 text-blue-600"}),"Contacts d'Urgence et Signalement"]}),s.jsx(Tt,{children:"En cas de problème, voici qui contacter selon la situation"})]}),s.jsx(oe,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Ooe.map((t,e)=>s.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg",children:[s.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${t.color==="text-red-600"?"bg-red-100":t.color==="text-orange-600"?"bg-orange-100":t.color==="text-blue-600"?"bg-blue-100":"bg-green-100"}`,children:s.jsx(t.icon,{className:`w-6 h-6 ${t.color}`})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-semibold mb-1",children:t.title}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:t.description}),s.jsx("div",{className:`font-medium ${t.color}`,children:t.contact})]})]},e))})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(ae,{children:s.jsxs(oe,{className:"pt-6 text-center",children:[s.jsx(hG,{className:"w-12 h-12 text-blue-600 mx-auto mb-4"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Guide Complet PDF"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Téléchargez notre guide de sécurité complet"}),s.jsxs(Y,{variant:"outline",className:"w-full",children:[s.jsx(Zs,{className:"w-4 h-4 mr-2"}),"Télécharger"]})]})}),s.jsx(ae,{children:s.jsxs(oe,{className:"pt-6 text-center",children:[s.jsx(Gv,{className:"w-12 h-12 text-green-600 mx-auto mb-4"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Centre d'Aide"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Questions fréquentes sur la sécurité"}),s.jsx(Y,{variant:"outline",className:"w-full",asChild:!0,children:s.jsxs(Te,{to:"/help",children:[s.jsx(is,{className:"w-4 h-4 mr-2"}),"Consulter l'aide"]})})]})}),s.jsx(ae,{children:s.jsxs(oe,{className:"pt-6 text-center",children:[s.jsx(xn,{className:"w-12 h-12 text-purple-600 mx-auto mb-4"}),s.jsx("h3",{className:"font-semibold mb-2",children:"Signaler un Problème"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Contactez notre équipe de sécurité"}),s.jsxs(Y,{variant:"outline",className:"w-full",children:[s.jsx(ic,{className:"w-4 h-4 mr-2"}),"Faire un signalement"]})]})})]}),s.jsxs(Ut,{className:"border-blue-200 bg-blue-50",children:[s.jsx(P4,{className:"h-4 w-4 text-blue-600"}),s.jsxs($t,{className:"text-blue-800",children:[s.jsx("strong",{children:"Rappel :"})," En cas de doute, n'hésitez pas à annuler la transaction. Votre sécurité vaut plus que n'importe quel objet. L'équipe StudyMarket est là pour vous aider 24h/7j."]})]})]});function Foe(t,e){return x.useReducer((n,r)=>e[n][r]??n,t)}var YN="ScrollArea",[S5,dce]=jr(YN),[Voe,ni]=S5(YN),E5=x.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:a=600,...o}=t,[c,u]=x.useState(null),[h,f]=x.useState(null),[p,v]=x.useState(null),[_,N]=x.useState(null),[j,S]=x.useState(null),[w,y]=x.useState(0),[E,I]=x.useState(0),[D,B]=x.useState(!1),[R,F]=x.useState(!1),V=ot(e,M=>u(M)),k=Gc(i);return s.jsx(Voe,{scope:n,type:r,dir:k,scrollHideDelay:a,scrollArea:c,viewport:h,onViewportChange:f,content:p,onContentChange:v,scrollbarX:_,onScrollbarXChange:N,scrollbarXEnabled:D,onScrollbarXEnabledChange:B,scrollbarY:j,onScrollbarYChange:S,scrollbarYEnabled:R,onScrollbarYEnabledChange:F,onCornerWidthChange:y,onCornerHeightChange:I,children:s.jsx(ze.div,{dir:k,...o,ref:V,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":E+"px",...t.style}})})});E5.displayName=YN;var C5="ScrollAreaViewport",k5=x.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:i,...a}=t,o=ni(C5,n),c=x.useRef(null),u=ot(e,c,o.onViewportChange);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),s.jsx(ze.div,{"data-radix-scroll-area-viewport":"",...a,ref:u,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:s.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});k5.displayName=C5;var ga="ScrollAreaScrollbar",QN=x.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=ni(ga,t.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=i,c=t.orientation==="horizontal";return x.useEffect(()=>(c?a(!0):o(!0),()=>{c?a(!1):o(!1)}),[c,a,o]),i.type==="hover"?s.jsx(zoe,{...r,ref:e,forceMount:n}):i.type==="scroll"?s.jsx(Uoe,{...r,ref:e,forceMount:n}):i.type==="auto"?s.jsx(T5,{...r,ref:e,forceMount:n}):i.type==="always"?s.jsx(XN,{...r,ref:e}):null});QN.displayName=ga;var zoe=x.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=ni(ga,t.__scopeScrollArea),[a,o]=x.useState(!1);return x.useEffect(()=>{const c=i.scrollArea;let u=0;if(c){const h=()=>{window.clearTimeout(u),o(!0)},f=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return c.addEventListener("pointerenter",h),c.addEventListener("pointerleave",f),()=>{window.clearTimeout(u),c.removeEventListener("pointerenter",h),c.removeEventListener("pointerleave",f)}}},[i.scrollArea,i.scrollHideDelay]),s.jsx(Nr,{present:n||a,children:s.jsx(T5,{"data-state":a?"visible":"hidden",...r,ref:e})})}),Uoe=x.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=ni(ga,t.__scopeScrollArea),a=t.orientation==="horizontal",o=Qy(()=>u("SCROLL_END"),100),[c,u]=Foe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return x.useEffect(()=>{if(c==="idle"){const h=window.setTimeout(()=>u("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(h)}},[c,i.scrollHideDelay,u]),x.useEffect(()=>{const h=i.viewport,f=a?"scrollLeft":"scrollTop";if(h){let p=h[f];const v=()=>{const _=h[f];p!==_&&(u("SCROLL"),o()),p=_};return h.addEventListener("scroll",v),()=>h.removeEventListener("scroll",v)}},[i.viewport,a,u,o]),s.jsx(Nr,{present:n||c!=="hidden",children:s.jsx(XN,{"data-state":c==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Ee(t.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:Ee(t.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),T5=x.forwardRef((t,e)=>{const n=ni(ga,t.__scopeScrollArea),{forceMount:r,...i}=t,[a,o]=x.useState(!1),c=t.orientation==="horizontal",u=Qy(()=>{if(n.viewport){const h=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;o(c?h:f)}},10);return $d(n.viewport,u),$d(n.content,u),s.jsx(Nr,{present:r||a,children:s.jsx(XN,{"data-state":a?"visible":"hidden",...i,ref:e})})}),XN=x.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,i=ni(ga,t.__scopeScrollArea),a=x.useRef(null),o=x.useRef(0),[c,u]=x.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=M5(c.viewport,c.content),f={...r,sizes:c,onSizesChange:u,hasThumb:h>0&&h<1,onThumbChange:v=>a.current=v,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:v=>o.current=v};function p(v,_){return Goe(v,o.current,c,_)}return n==="horizontal"?s.jsx($oe,{...f,ref:e,onThumbPositionChange:()=>{if(i.viewport&&a.current){const v=i.viewport.scrollLeft,_=tT(v,c,i.dir);a.current.style.transform=`translate3d(${_}px, 0, 0)`}},onWheelScroll:v=>{i.viewport&&(i.viewport.scrollLeft=v)},onDragScroll:v=>{i.viewport&&(i.viewport.scrollLeft=p(v,i.dir))}}):n==="vertical"?s.jsx(Boe,{...f,ref:e,onThumbPositionChange:()=>{if(i.viewport&&a.current){const v=i.viewport.scrollTop,_=tT(v,c);a.current.style.transform=`translate3d(0, ${_}px, 0)`}},onWheelScroll:v=>{i.viewport&&(i.viewport.scrollTop=v)},onDragScroll:v=>{i.viewport&&(i.viewport.scrollTop=p(v))}}):null}),$oe=x.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,a=ni(ga,t.__scopeScrollArea),[o,c]=x.useState(),u=x.useRef(null),h=ot(e,u,a.onScrollbarXChange);return x.useEffect(()=>{u.current&&c(getComputedStyle(u.current))},[u]),s.jsx(I5,{"data-orientation":"horizontal",...i,ref:h,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Yy(n)+"px",...t.style},onThumbPointerDown:f=>t.onThumbPointerDown(f.x),onDragScroll:f=>t.onDragScroll(f.x),onWheelScroll:(f,p)=>{if(a.viewport){const v=a.viewport.scrollLeft+f.deltaX;t.onWheelScroll(v),O5(v,p)&&f.preventDefault()}},onResize:()=>{u.current&&a.viewport&&o&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:bx(o.paddingLeft),paddingEnd:bx(o.paddingRight)}})}})}),Boe=x.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,a=ni(ga,t.__scopeScrollArea),[o,c]=x.useState(),u=x.useRef(null),h=ot(e,u,a.onScrollbarYChange);return x.useEffect(()=>{u.current&&c(getComputedStyle(u.current))},[u]),s.jsx(I5,{"data-orientation":"vertical",...i,ref:h,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Yy(n)+"px",...t.style},onThumbPointerDown:f=>t.onThumbPointerDown(f.y),onDragScroll:f=>t.onDragScroll(f.y),onWheelScroll:(f,p)=>{if(a.viewport){const v=a.viewport.scrollTop+f.deltaY;t.onWheelScroll(v),O5(v,p)&&f.preventDefault()}},onResize:()=>{u.current&&a.viewport&&o&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:bx(o.paddingTop),paddingEnd:bx(o.paddingBottom)}})}})}),[Woe,P5]=S5(ga),I5=x.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:c,onThumbPositionChange:u,onDragScroll:h,onWheelScroll:f,onResize:p,...v}=t,_=ni(ga,n),[N,j]=x.useState(null),S=ot(e,V=>j(V)),w=x.useRef(null),y=x.useRef(""),E=_.viewport,I=r.content-r.viewport,D=dr(f),B=dr(u),R=Qy(p,10);function F(V){if(w.current){const k=V.clientX-w.current.left,M=V.clientY-w.current.top;h({x:k,y:M})}}return x.useEffect(()=>{const V=k=>{const M=k.target;(N==null?void 0:N.contains(M))&&D(k,I)};return document.addEventListener("wheel",V,{passive:!1}),()=>document.removeEventListener("wheel",V,{passive:!1})},[E,N,I,D]),x.useEffect(B,[r,B]),$d(N,R),$d(_.content,R),s.jsx(Woe,{scope:n,scrollbar:N,hasThumb:i,onThumbChange:dr(a),onThumbPointerUp:dr(o),onThumbPositionChange:B,onThumbPointerDown:dr(c),children:s.jsx(ze.div,{...v,ref:S,style:{position:"absolute",...v.style},onPointerDown:Ee(t.onPointerDown,V=>{V.button===0&&(V.target.setPointerCapture(V.pointerId),w.current=N.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",_.viewport&&(_.viewport.style.scrollBehavior="auto"),F(V))}),onPointerMove:Ee(t.onPointerMove,F),onPointerUp:Ee(t.onPointerUp,V=>{const k=V.target;k.hasPointerCapture(V.pointerId)&&k.releasePointerCapture(V.pointerId),document.body.style.webkitUserSelect=y.current,_.viewport&&(_.viewport.style.scrollBehavior=""),w.current=null})})})}),wx="ScrollAreaThumb",A5=x.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=P5(wx,t.__scopeScrollArea);return s.jsx(Nr,{present:n||i.hasThumb,children:s.jsx(qoe,{ref:e,...r})})}),qoe=x.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...i}=t,a=ni(wx,n),o=P5(wx,n),{onThumbPositionChange:c}=o,u=ot(e,p=>o.onThumbChange(p)),h=x.useRef(void 0),f=Qy(()=>{h.current&&(h.current(),h.current=void 0)},100);return x.useEffect(()=>{const p=a.viewport;if(p){const v=()=>{if(f(),!h.current){const _=Koe(p,c);h.current=_,c()}};return c(),p.addEventListener("scroll",v),()=>p.removeEventListener("scroll",v)}},[a.viewport,f,c]),s.jsx(ze.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Ee(t.onPointerDownCapture,p=>{const _=p.target.getBoundingClientRect(),N=p.clientX-_.left,j=p.clientY-_.top;o.onThumbPointerDown({x:N,y:j})}),onPointerUp:Ee(t.onPointerUp,o.onThumbPointerUp)})});A5.displayName=wx;var JN="ScrollAreaCorner",R5=x.forwardRef((t,e)=>{const n=ni(JN,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?s.jsx(Hoe,{...t,ref:e}):null});R5.displayName=JN;var Hoe=x.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,i=ni(JN,n),[a,o]=x.useState(0),[c,u]=x.useState(0),h=!!(a&&c);return $d(i.scrollbarX,()=>{var p;const f=((p=i.scrollbarX)==null?void 0:p.offsetHeight)||0;i.onCornerHeightChange(f),u(f)}),$d(i.scrollbarY,()=>{var p;const f=((p=i.scrollbarY)==null?void 0:p.offsetWidth)||0;i.onCornerWidthChange(f),o(f)}),h?s.jsx(ze.div,{...r,ref:e,style:{width:a,height:c,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function bx(t){return t?parseInt(t,10):0}function M5(t,e){const n=t/e;return isNaN(n)?0:n}function Yy(t){const e=M5(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function Goe(t,e,n,r="ltr"){const i=Yy(n),a=i/2,o=e||a,c=i-o,u=n.scrollbar.paddingStart+o,h=n.scrollbar.size-n.scrollbar.paddingEnd-c,f=n.content-n.viewport,p=r==="ltr"?[0,f]:[f*-1,0];return D5([u,h],p)(t)}function tT(t,e,n="ltr"){const r=Yy(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-i,o=e.content-e.viewport,c=a-r,u=n==="ltr"?[0,o]:[o*-1,0],h=bm(t,u);return D5([0,o],[0,c])(h)}function D5(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function O5(t,e){return t>0&&t<e}var Koe=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function i(){const a={left:t.scrollLeft,top:t.scrollTop},o=n.left!==a.left,c=n.top!==a.top;(o||c)&&e(),n=a,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function Qy(t,e){const n=dr(t),r=x.useRef(0);return x.useEffect(()=>()=>window.clearTimeout(r.current),[]),x.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function $d(t,e){const n=dr(e);Un(()=>{let r=0;if(t){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(t),()=>{window.cancelAnimationFrame(r),i.unobserve(t)}}},[t,n])}var L5=E5,Zoe=k5,Yoe=R5;const eS=x.forwardRef(({className:t,children:e,...n},r)=>s.jsxs(L5,{ref:r,className:Xe("relative overflow-hidden",t),...n,children:[s.jsx(Zoe,{className:"h-full w-full rounded-[inherit]",children:e}),s.jsx(F5,{}),s.jsx(Yoe,{})]}));eS.displayName=L5.displayName;const F5=x.forwardRef(({className:t,orientation:e="vertical",...n},r)=>s.jsx(QN,{ref:r,orientation:e,className:Xe("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:s.jsx(A5,{className:"relative flex-1 rounded-full bg-border"})}));F5.displayName=QN.displayName;const nT=({conversations:t,loading:e,searchQuery:n,setSearchQuery:r,currentConversation:i,currentUser:a,onSelectConversation:o})=>{const c=t.filter(f=>{const p=f.participants.find(_=>_!==(a==null?void 0:a.uid)),v=p?f.participantDetails[p]:null;return(v==null?void 0:v.name.toLowerCase().includes(n.toLowerCase()))||f.listingTitle.toLowerCase().includes(n.toLowerCase())}),u=f=>f===0?"Gratuit":new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(f),h=f=>{const p=f.participants.find(v=>v!==(a==null?void 0:a.uid));return p?f.participantDetails[p]:null};return s.jsxs("div",{className:"w-full lg:w-72 xl:w-80 border-r border-border bg-muted/20 flex flex-col h-full",children:[s.jsxs("div",{className:"p-3 border-b border-border bg-background/95 backdrop-blur",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xn,{className:"w-5 h-5 text-primary"}),s.jsx("h1",{className:"text-lg font-semibold",children:"Messages"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Y,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Filtrer",children:s.jsx(dy,{className:"w-4 h-4"})}),s.jsx(Y,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Trier",children:s.jsx(x4,{className:"w-4 h-4"})}),s.jsx(Y,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Paramètres",children:s.jsx(hy,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(xr,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(We,{placeholder:"Rechercher conversations...",value:n,onChange:f=>r(f.target.value),className:"pl-9 h-9 text-sm"})]})]}),s.jsx(eS,{className:"flex-1",children:e?s.jsx("div",{className:"p-2 space-y-2",children:Array.from({length:5}).map((f,p)=>s.jsx("div",{className:"animate-pulse",children:s.jsxs("div",{className:"flex items-center gap-2 p-2",children:[s.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:s.jsx(Zr,{className:"w-5 h-5 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1 space-y-1",children:[s.jsx("div",{className:"h-3 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-2 bg-muted rounded w-1/2"})]})]})},p))}):c.length===0?s.jsxs("div",{className:"p-6 text-center",children:[s.jsx(xn,{className:"w-10 h-10 text-muted-foreground mx-auto mb-3"}),s.jsx("h3",{className:"font-medium mb-1 text-sm",children:"Aucune conversation"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:n?s.jsxs(s.Fragment,{children:[s.jsx(xr,{className:"w-3 h-3 inline mr-1"}),'Aucun résultat pour "',n,'"']}):s.jsxs(s.Fragment,{children:[s.jsx(us,{className:"w-3 h-3 inline mr-1"}),"Vos conversations apparaîtront ici"]})})]}):s.jsx("div",{className:"p-1",children:c.map(f=>{var N,j;const p=h(f),v=f.unreadCount[a==null?void 0:a.uid]||0,_=(i==null?void 0:i.id)===f.id;return s.jsx("div",{onClick:()=>o(f),className:`p-2 rounded-md cursor-pointer transition-colors hover:bg-accent/50 ${_?"bg-accent":""}`,children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsxs("div",{className:"relative",children:[s.jsxs(so,{className:"w-10 h-10",children:[s.jsx(io,{src:p==null?void 0:p.avatar}),s.jsx(ao,{className:"text-xs bg-gradient-to-br from-primary to-secondary text-white",children:((j=(N=p==null?void 0:p.name)==null?void 0:N[0])==null?void 0:j.toUpperCase())||s.jsx(Zr,{className:"w-4 h-4"})})]}),(p==null?void 0:p.verified)&&s.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 rounded-full flex items-center justify-center",children:s.jsx(Vt,{className:"w-1.5 h-1.5 text-white"})})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[s.jsxs("h3",{className:"font-medium text-xs truncate flex items-center gap-1",children:[s.jsx(Zr,{className:"w-3 h-3 text-muted-foreground"}),(p==null?void 0:p.name)||"Utilisateur"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[f.lastMessage&&s.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[s.jsx(Vn,{className:"w-3 h-3"}),lh(f.lastMessage.sentAt,{addSuffix:!0,locale:Mr})]}),v>0&&s.jsx(et,{className:"bg-red-500 text-white text-xs min-w-[16px] h-4 flex items-center justify-center px-1",children:v>99?"99+":v})]})]}),s.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[f.listingImage?s.jsx("img",{src:f.listingImage,alt:"",className:"w-3 h-3 rounded object-cover"}):s.jsx(T4,{className:"w-3 h-3 text-muted-foreground"}),s.jsx("span",{className:"text-xs text-muted-foreground truncate flex-1",children:f.listingTitle}),s.jsxs("span",{className:"text-xs font-medium text-primary flex items-center gap-1",children:[f.listingPrice===0?s.jsx(Rr,{className:"w-3 h-3 text-green-600"}):s.jsx("span",{children:"€"}),u(f.listingPrice)]})]}),f.lastMessage&&s.jsxs("p",{className:"text-xs text-muted-foreground truncate flex items-center gap-1",children:[f.lastMessage.senderId===(a==null?void 0:a.uid)?s.jsx(Td,{className:"w-3 h-3"}):s.jsx(xn,{className:"w-3 h-3"}),f.lastMessage.senderId===(a==null?void 0:a.uid)&&"Vous: ",f.lastMessage.text]})]})]})},f.id)})})})]})},rT=({conversation:t,messages:e,loading:n,currentUser:r,onBack:i})=>{var H,Q;const{sendMessage:a,markMessagesAsSeen:o,blockUser:c,reportUser:u,deleteConversation:h}=Py(),[f,p]=x.useState(""),[v,_]=x.useState(40),[N,j]=x.useState(!1),[S,w]=x.useState(!1),[y,E]=x.useState(""),[I,D]=x.useState(""),B=x.useRef(null),R=x.useRef(null),F=()=>{var he;(he=R.current)==null||he.scrollIntoView({behavior:"smooth"})},V=x.useCallback(()=>{const he=B.current;if(!he)return;he.style.height="auto";const ye=Math.max(40,Math.min(he.scrollHeight,120));_(ye)},[]),k=x.useCallback(he=>{const ye=he.target.value;p(ye),j(!!ye.trim()),setTimeout(V,0)},[V]),M=async()=>{if(!f.trim()||!t||!r)return;const he=f.trim();p(""),j(!1),_(40),await a(t.id,he,r.uid,r.displayName||"Utilisateur",r.photoURL)},O=he=>{he.key==="Enter"&&!he.shiftKey&&(he.preventDefault(),M())},P=async()=>{!t||!r||await c(t.id,r.uid)},W=async()=>{if(!t||!r||!y.trim())return;const he=t.participants.find(ye=>ye!==r.uid);he&&(await u(t.id,r.uid,he,y,I),w(!1),E(""),D(""))},X=async()=>{!t||!r||(await h(t.id,r.uid),i())};if(x.useEffect(()=>{t&&r&&o(t.id,r.uid)},[t,r,o]),x.useEffect(F,[e]),!t)return s.jsx("div",{className:"flex-1 flex items-center justify-center bg-background",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(xn,{className:"w-8 h-8 text-white"})}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Sélectionnez une conversation"}),s.jsxs("p",{className:"text-muted-foreground flex items-center justify-center gap-2",children:[s.jsx(xr,{className:"w-4 h-4"}),"Choisissez une conversation pour commencer à discuter"]})]})});const ee=t.participants.find(he=>he!==(r==null?void 0:r.uid)),Z=ee?t.participantDetails[ee]:null,U=he=>{const ye=new Date,Ue=new Date(he);return Ue.toDateString()===ye.toDateString()?Ue.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}):Math.floor((ye.getTime()-Ue.getTime())/(1e3*60*60*24))<7?Ue.toLocaleDateString("fr-FR",{weekday:"short",hour:"2-digit",minute:"2-digit"}):Ue.toLocaleDateString("fr-FR",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})},q=he=>he.senderId!==(r==null?void 0:r.uid)?null:he.seen?s.jsx(iG,{className:"w-3 h-3 text-blue-500"}):s.jsx(aG,{className:"w-3 h-3 text-muted-foreground"});return s.jsxs("div",{className:"flex-1 flex flex-col bg-background h-full",children:[s.jsxs("div",{className:"p-3 border-b border-border bg-background/95 backdrop-blur shrink-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx(Y,{variant:"ghost",size:"icon",onClick:i,className:"lg:hidden h-8 w-8",children:s.jsx(dc,{className:"w-4 h-4"})}),s.jsxs(so,{className:"w-8 h-8",children:[s.jsx(io,{src:Z==null?void 0:Z.avatar}),s.jsx(ao,{className:"text-xs bg-gradient-to-br from-primary to-secondary text-white",children:((Q=(H=Z==null?void 0:Z.name)==null?void 0:H[0])==null?void 0:Q.toUpperCase())||s.jsx(Zr,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("h2",{className:"font-semibold truncate text-sm flex items-center gap-1",children:[s.jsx(Zr,{className:"w-3 h-3 text-muted-foreground"}),(Z==null?void 0:Z.name)||"Utilisateur"]}),(Z==null?void 0:Z.verified)&&s.jsx(Vt,{className:"w-3 h-3 text-green-600"})]}),s.jsxs("p",{className:"text-xs text-muted-foreground truncate flex items-center gap-1",children:[s.jsx(Ar,{className:"w-3 h-3"}),Z==null?void 0:Z.university]})]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Y,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Appeler",children:s.jsx(Jd,{className:"w-4 h-4"})}),s.jsx(Y,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Vidéo",children:s.jsx(R4,{className:"w-4 h-4"})}),s.jsxs(n1,{children:[s.jsx(r1,{asChild:!0,children:s.jsx(Y,{variant:"ghost",size:"icon",className:"h-8 w-8",children:s.jsx(lG,{className:"w-4 h-4"})})}),s.jsxs(nx,{align:"end",children:[s.jsx(Xt,{asChild:!0,children:s.jsxs(Te,{to:`/listing/${t.listingId}`,className:"flex items-center",children:[s.jsx(is,{className:"w-4 h-4 mr-2"}),"Voir l'annonce"]})}),s.jsxs(Xt,{children:[s.jsx(Go,{className:"w-4 h-4 mr-2"}),"Marquer comme favori"]}),s.jsxs(Xt,{children:[s.jsx(tG,{className:"w-4 h-4 mr-2"}),"Archiver"]}),s.jsx(zi,{}),s.jsxs(Xt,{onClick:()=>w(!0),children:[s.jsx(ic,{className:"w-4 h-4 mr-2"}),"Signaler"]}),s.jsxs(Xt,{onClick:P,children:[s.jsx(sG,{className:"w-4 h-4 mr-2"}),"Bloquer"]}),s.jsxs(Xt,{onClick:X,className:"text-destructive",children:[s.jsx(qa,{className:"w-4 h-4 mr-2"}),"Supprimer"]})]})]})]})]}),s.jsx(ae,{className:"mt-2",children:s.jsx(oe,{className:"p-2",children:s.jsxs("div",{className:"flex items-center gap-2",children:[t.listingImage?s.jsx("img",{src:t.listingImage,alt:"",className:"w-8 h-8 rounded object-cover"}):s.jsx("div",{className:"w-8 h-8 bg-muted rounded flex items-center justify-center",children:s.jsx(T4,{className:"w-4 h-4 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("h3",{className:"font-medium text-xs truncate flex items-center gap-1",children:[s.jsx(zj,{className:"w-3 h-3 text-muted-foreground"}),t.listingTitle]}),s.jsx("p",{className:"text-sm font-semibold text-primary flex items-center gap-1",children:t.listingPrice===0?s.jsxs(s.Fragment,{children:[s.jsx(Rr,{className:"w-3 h-3 text-green-600"}),"Gratuit"]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-xs",children:"€"}),new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(t.listingPrice)]})})]}),s.jsx(Y,{variant:"outline",size:"sm",asChild:!0,className:"h-7 text-xs px-2",children:s.jsxs(Te,{to:`/listing/${t.listingId}`,className:"flex items-center gap-1",children:[s.jsx(is,{className:"w-3 h-3"}),"Voir"]})})]})})})]}),s.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[s.jsx(eS,{className:"flex-1 p-3",children:s.jsxs("div",{className:"space-y-3",children:[n?s.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((he,ye)=>s.jsx("div",{className:"animate-pulse",children:s.jsx("div",{className:`flex ${ye%2===0?"justify-start":"justify-end"}`,children:s.jsxs("div",{className:"max-w-xs",children:[s.jsx("div",{className:"h-3 bg-muted rounded w-3/4 mb-1"}),s.jsx("div",{className:"h-8 bg-muted rounded"})]})})},ye))}):e.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(xn,{className:"w-6 h-6 text-white"})}),s.jsx("h3",{className:"font-medium mb-2",children:"Aucun message"}),s.jsxs("p",{className:"text-sm text-muted-foreground flex items-center justify-center gap-2",children:[s.jsx(Td,{className:"w-4 h-4"}),"Commencez la conversation en envoyant un message"]})]}):e.map(he=>{const ye=he.senderId===(r==null?void 0:r.uid);return s.jsx("div",{className:`flex ${ye?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`max-w-[75%] lg:max-w-[60%] ${ye?"order-2":"order-1"}`,children:[s.jsx("div",{className:`rounded-2xl px-4 py-2 ${ye?"bg-primary text-primary-foreground rounded-br-md":"bg-muted text-foreground rounded-bl-md"}`,children:s.jsx("p",{className:"text-sm whitespace-pre-wrap leading-relaxed",children:he.text})}),s.jsxs("div",{className:`flex items-center gap-1 mt-1 text-xs text-muted-foreground ${ye?"justify-end":"justify-start"}`,children:[s.jsx(Vn,{className:"w-3 h-3"}),s.jsx("span",{children:U(he.sentAt)}),q(he)]})]})},he.id)}),s.jsx("div",{ref:R})]})}),s.jsxs("div",{className:"p-3 border-t border-border bg-background/95 backdrop-blur shrink-0",children:[s.jsxs("div",{className:"flex items-end gap-2 bg-muted/30 rounded-2xl border relative",children:[s.jsx(Qs,{ref:B,value:f,placeholder:"Tapez votre message...",onChange:k,onKeyDown:O,rows:1,style:{height:v,transition:"height 0.15s ease-out",overflow:"hidden"},className:"min-h-[40px] max-h-[120px] resize-none border-0 bg-transparent focus:ring-0 focus:outline-none placeholder:text-muted-foreground/60 text-sm leading-relaxed py-2.5 px-4 pr-12 rounded-2xl"}),s.jsx(Y,{onClick:M,disabled:!f.trim(),size:"sm",className:"absolute right-1.5 bottom-1.5 h-7 w-7 p-0 rounded-full bg-gradient-to-r from-primary to-secondary",children:s.jsx(Td,{className:"h-3.5 w-3.5"})})]}),N&&s.jsxs("div",{className:"text-xs text-muted-foreground mt-1 px-2 flex items-center gap-1",children:[s.jsx(xn,{className:"w-3 h-3 animate-pulse"}),"En cours de frappe..."]})]})]}),s.jsx(aa,{open:S,onOpenChange:w,children:s.jsxs(wi,{children:[s.jsx(oa,{children:s.jsxs(bi,{className:"flex items-center gap-2",children:[s.jsx(ic,{className:"w-5 h-5 text-red-500"}),"Signaler cet utilisateur"]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs(be,{htmlFor:"report-reason",className:"flex items-center gap-2",children:[s.jsx(Pn,{className:"w-4 h-4"}),"Motif du signalement"]}),s.jsxs(Jt,{value:y,onValueChange:E,children:[s.jsx(qt,{children:s.jsx(en,{placeholder:"Sélectionnez un motif"})}),s.jsxs(Ht,{children:[s.jsx(Ve,{value:"spam",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(us,{className:"w-4 h-4"}),"Spam"]})}),s.jsx(Ve,{value:"harassment",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Pn,{className:"w-4 h-4"}),"Harcèlement"]})}),s.jsx(Ve,{value:"inappropriate",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ic,{className:"w-4 h-4"}),"Contenu inapproprié"]})}),s.jsx(Ve,{value:"scam",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Pn,{className:"w-4 h-4"}),"Arnaque"]})}),s.jsx(Ve,{value:"other",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(vl,{className:"w-4 h-4"}),"Autre"]})})]})]})]}),s.jsxs("div",{children:[s.jsxs(be,{htmlFor:"report-description",className:"flex items-center gap-2",children:[s.jsx(xn,{className:"w-4 h-4"}),"Description (optionnel)"]}),s.jsx(Qs,{id:"report-description",value:I,onChange:he=>D(he.target.value),placeholder:"Décrivez le problème...",rows:3})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(Y,{variant:"outline",onClick:()=>w(!1),children:"Annuler"}),s.jsxs(Y,{onClick:W,disabled:!y,className:"bg-red-500 hover:bg-red-600",children:[s.jsx(ic,{className:"w-4 h-4 mr-2"}),"Signaler"]})]})]})]})})]})},Qoe=()=>{const{currentUser:t,userProfile:e}=yn(),{conversations:n,currentConversation:r,messages:i,loading:a,fetchConversations:o,fetchMessages:c,setCurrentConversation:u,cleanup:h}=Py(),[f,p]=x.useState(""),[v,_]=x.useState(!1);x.useEffect(()=>(t&&o(t.uid),()=>{h()}),[t,o,h]),x.useEffect(()=>{r&&c(r.id)},[r,c]);const N=S=>{u(S),_(!0)},j=()=>{_(!1),u(null)};return t?s.jsxs("div",{className:"h-[calc(100vh-64px)] flex overflow-hidden",children:[s.jsx("div",{className:"lg:hidden w-full h-full",children:v?s.jsx(rT,{conversation:r,messages:i,loading:a,currentUser:t,onBack:j}):s.jsx(nT,{conversations:n,loading:a,searchQuery:f,setSearchQuery:p,currentConversation:r,setCurrentConversation:u,currentUser:t,onSelectConversation:N})}),s.jsxs("div",{className:"hidden lg:flex w-full h-full",children:[s.jsx(nT,{conversations:n,loading:a,searchQuery:f,setSearchQuery:p,currentConversation:r,setCurrentConversation:u,currentUser:t,onSelectConversation:N}),s.jsx(rT,{conversation:r,messages:i,loading:a,currentUser:t,onBack:j})]})]}):s.jsxs("div",{className:"container mx-auto px-4 py-8 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(xn,{className:"w-8 h-8 text-white"})}),s.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Connectez-vous pour accéder à vos messages"}),s.jsxs("p",{className:"text-muted-foreground mb-6 flex items-center justify-center gap-2",children:[s.jsx(Zr,{className:"w-4 h-4"}),"Vous devez être connecté pour voir et envoyer des messages."]}),s.jsx(Y,{asChild:!0,className:"bg-gradient-to-r from-primary to-secondary",children:s.jsxs(Te,{to:"/auth",className:"flex items-center gap-2",children:[s.jsx(Zr,{className:"w-4 h-4"}),"Se connecter"]})})]})};var nv={linear:function(t,e,n,r){var i=n-e;return i*t/r+e},easeInQuad:function(t,e,n,r){var i=n-e;return i*(t/=r)*t+e},easeOutQuad:function(t,e,n,r){var i=n-e;return-i*(t/=r)*(t-2)+e},easeInOutQuad:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,r){var i=n-e;return i*(t/=r)*t*t+e},easeOutCubic:function(t,e,n,r){var i=n-e;return i*((t=t/r-1)*t*t+1)+e},easeInOutCubic:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,n,r){var i=n-e;return i*(t/=r)*t*t*t+e},easeOutQuart:function(t,e,n,r){var i=n-e;return-i*((t=t/r-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,n,r){var i=n-e;return i*(t/=r)*t*t*t*t+e},easeOutQuint:function(t,e,n,r){var i=n-e;return i*((t=t/r-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,n,r){var i=n-e;return-i*Math.cos(t/r*(Math.PI/2))+i+e},easeOutSine:function(t,e,n,r){var i=n-e;return i*Math.sin(t/r*(Math.PI/2))+e},easeInOutSine:function(t,e,n,r){var i=n-e;return-i/2*(Math.cos(Math.PI*t/r)-1)+e},easeInExpo:function(t,e,n,r){var i=n-e;return t==0?e:i*Math.pow(2,10*(t/r-1))+e},easeOutExpo:function(t,e,n,r){var i=n-e;return t==r?e+i:i*(-Math.pow(2,-10*t/r)+1)+e},easeInOutExpo:function(t,e,n,r){var i=n-e;return t===0?e:t===r?e+i:(t/=r/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(-Math.pow(2,-10*--t)+2)+e},easeInCirc:function(t,e,n,r){var i=n-e;return-i*(Math.sqrt(1-(t/=r)*t)-1)+e},easeOutCirc:function(t,e,n,r){var i=n-e;return i*Math.sqrt(1-(t=t/r-1)*t)+e},easeInOutCirc:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,n,r){var i=n-e,a,o,c;return c=1.70158,o=0,a=i,t===0?e:(t/=r)===1?e+i:(o||(o=r*.3),a<Math.abs(i)?(a=i,c=o/4):c=o/(2*Math.PI)*Math.asin(i/a),-(a*Math.pow(2,10*(t-=1))*Math.sin((t*r-c)*(2*Math.PI)/o))+e)},easeOutElastic:function(t,e,n,r){var i=n-e,a,o,c;return c=1.70158,o=0,a=i,t===0?e:(t/=r)===1?e+i:(o||(o=r*.3),a<Math.abs(i)?(a=i,c=o/4):c=o/(2*Math.PI)*Math.asin(i/a),a*Math.pow(2,-10*t)*Math.sin((t*r-c)*(2*Math.PI)/o)+i+e)},easeInOutElastic:function(t,e,n,r){var i=n-e,a,o,c;return c=1.70158,o=0,a=i,t===0?e:(t/=r/2)===2?e+i:(o||(o=r*(.3*1.5)),a<Math.abs(i)?(a=i,c=o/4):c=o/(2*Math.PI)*Math.asin(i/a),t<1?-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*r-c)*(2*Math.PI)/o))+e:a*Math.pow(2,-10*(t-=1))*Math.sin((t*r-c)*(2*Math.PI)/o)*.5+i+e)},easeInBack:function(t,e,n,r,i){var a=n-e;return i===void 0&&(i=1.70158),a*(t/=r)*t*((i+1)*t-i)+e},easeOutBack:function(t,e,n,r,i){var a=n-e;return i===void 0&&(i=1.70158),a*((t=t/r-1)*t*((i+1)*t+i)+1)+e},easeInOutBack:function(t,e,n,r,i){var a=n-e;return i===void 0&&(i=1.70158),(t/=r/2)<1?a/2*(t*t*(((i*=1.525)+1)*t-i))+e:a/2*((t-=2)*t*(((i*=1.525)+1)*t+i)+2)+e},easeInBounce:function(t,e,n,r){var i=n-e,a;return a=nv.easeOutBounce(r-t,0,i,r),i-a+e},easeOutBounce:function(t,e,n,r){var i=n-e;return(t/=r)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,n,r){var i=n-e,a;return t<r/2?(a=nv.easeInBounce(t*2,0,i,r),a*.5+e):(a=nv.easeOutBounce(t*2-r,0,i,r),a*.5+i*.5+e)}},Xoe=nv;function Joe(t){return t*Math.PI/180}function xs(t,e){return t+Math.random()*(e-t)}function ele(t,e){return Math.floor(t+Math.random()*(e-t+1))}var Lf;(function(t){t[t.Circle=0]="Circle",t[t.Square=1]="Square",t[t.Strip=2]="Strip"})(Lf||(Lf={}));var Mo;(function(t){t[t.Positive=1]="Positive",t[t.Negative=-1]="Negative"})(Mo||(Mo={}));const tle=1e3/60;class nle{constructor(e,n,r,i){this.getOptions=n;const{colors:a,initialVelocityX:o,initialVelocityY:c}=this.getOptions();this.context=e,this.x=r,this.y=i,this.w=xs(5,20),this.h=xs(5,20),this.radius=xs(5,10),this.vx=typeof o=="number"?xs(-o,o):xs(o.min,o.max),this.vy=typeof c=="number"?xs(-c,0):xs(c.min,c.max),this.shape=ele(0,2),this.angle=Joe(xs(0,360)),this.angularSpin=xs(-.2,.2),this.color=a[Math.floor(Math.random()*a.length)],this.rotateY=xs(0,1),this.rotationDirection=xs(0,1)?Mo.Positive:Mo.Negative}update(e){const{gravity:n,wind:r,friction:i,opacity:a,drawShape:o}=this.getOptions(),c=e/tle;this.x+=this.vx*c,this.y+=this.vy*c,this.vy+=n*c,this.vx+=r*c,this.vx*=i**c,this.vy*=i**c,this.rotateY>=1&&this.rotationDirection===Mo.Positive?this.rotationDirection=Mo.Negative:this.rotateY<=-1&&this.rotationDirection===Mo.Negative&&(this.rotationDirection=Mo.Positive);const u=.1*this.rotationDirection*c;if(this.rotateY+=u,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=a,this.context.lineCap="round",this.context.lineWidth=2,o&&typeof o=="function")o.call(this,this.context);else switch(this.shape){case Lf.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case Lf.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case Lf.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class rle{constructor(e,n){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=i=>{this.particles.splice(i,1)},this.getParticle=()=>{const i=xs(this.x,this.w+this.x),a=xs(this.y,this.h+this.y);return new nle(this.context,this.getOptions,i,a)},this.animate=i=>{const{canvas:a,context:o,particlesGenerated:c,lastNumberOfPieces:u}=this,{run:h,recycle:f,numberOfPieces:p,debug:v,tweenFunction:_,tweenDuration:N}=this.getOptions();if(!h)return!1;const j=this.particles.length,S=f?j:c;if(S<p){u!==p&&(this.tweenProgress=0,this.tweenFrom=S,this.lastNumberOfPieces=p),this.tweenProgress=Math.min(N,Math.max(0,this.tweenProgress+i));const w=_(this.tweenProgress,this.tweenFrom,p,N),y=Math.round(w-S);for(let E=0;E<y;E++)this.particles.push(this.getParticle());this.particlesGenerated+=y}v&&(o.font="12px sans-serif",o.fillStyle="#333",o.textAlign="right",o.fillText(`Particles: ${j}`,a.width-10,a.height-20));for(let w=this.particles.length-1;w>=0;w--){const y=this.particles[w];y.update(i),(y.y>a.height||y.y<-100||y.x>a.width+100||y.x<-100)&&(f&&S<=p?this.particles[w]=this.getParticle():this.removeParticleAt(w))}return j>0||S<p},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.getOptions=n}}const tS={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:Xoe.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class sle{constructor(e,n){this.lastFrameTime=0,this.setOptionsWithDefaults=i=>{const a={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...a,...tS,...i},Object.assign(this,i.confettiSource)},this.update=(i=0)=>{const{options:{run:a,onConfettiComplete:o,frameRate:c},canvas:u,context:h}=this,f=Math.min(i-this.lastFrameTime,50);if(c&&f<1e3/c){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=i-(c?f%c:0),a&&(h.fillStyle="white",h.clearRect(0,0,u.width,u.height)),this.generator.animate(f)?this.rafId=requestAnimationFrame(this.update):(o&&typeof o=="function"&&this.generator.particlesGenerated>0&&o.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.generator=new rle(this.canvas,()=>this.options),this.options=n,this.update()}get options(){return this._options}set options(e){var i,a;const n=(i=this._options)==null?void 0:i.run,r=(a=this._options)==null?void 0:a.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof e.recycle=="boolean"&&e.recycle&&r===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof e.run=="boolean"&&e.run&&n===!1&&this.update()}}const ile=Pe.createRef();class nS extends Pe.Component{constructor(e){super(e),this.canvas=Pe.createRef(),this.canvas=e.canvasRef||ile}componentDidMount(){if(this.canvas.current){const e=_0(this.props)[0];this.confetti=new sle(this.canvas.current,e)}}componentDidUpdate(){const e=_0(this.props)[0];this.confetti&&(this.confetti.options=e)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[e,n]=_0(this.props),r={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...n.style};return s.jsx("canvas",{width:e.width,height:e.height,ref:this.canvas,...n,style:r})}}nS.defaultProps={...tS};nS.displayName="ReactConfetti";function _0(t){const e={},n={},r={},i=[...Object.keys(tS),"confettiSource","drawShape","onConfettiComplete","frameRate"],a=["canvasRef"];for(const o in t){const c=t[o];i.includes(o)?e[o]=c:a.includes(o)?a[o]=c:r[o]=c}return[e,r,n]}const ale=Pe.forwardRef((t,e)=>s.jsx(nS,{canvasRef:e,...t})),ole=({open:t,loading:e,email:n,onResend:r,onCheck:i,onClose:a,verified:o})=>s.jsx(aa,{open:t,children:s.jsxs(wi,{className:"max-w-md text-center",children:[o&&s.jsx(ale,{width:window.innerWidth,height:window.innerHeight,numberOfPieces:250,recycle:!1}),s.jsxs(oa,{children:[s.jsxs(bi,{className:"flex items-center justify-center gap-2 text-lg",children:[o?s.jsx(jG,{className:"w-6 h-6 text-green-500 animate-bounce"}):s.jsx(yG,{className:"w-5 h-5 text-primary"}),o?"Félicitations !":"Vérifie ton email"]}),s.jsx(pc,{children:o?"Ton compte est maintenant activé. Tu peux accéder à la plateforme.":`Un lien de confirmation a été envoyé à ${n}. Clique dessus pour activer ton compte.`})]}),!o&&s.jsxs("div",{className:"space-y-3 mt-2",children:[s.jsxs("p",{className:"text-muted-foreground text-sm",children:["Pense à vérifier tes spams. ",s.jsx("br",{}),"La vérification est automatique dès que tu as cliqué sur le lien."]}),s.jsxs(Y,{onClick:i,disabled:e,className:"w-full",children:[e?s.jsx(qr,{className:"w-4 h-4 mr-2 animate-spin"}):null,"J'ai validé mon email"]}),s.jsxs(Y,{onClick:r,variant:"outline",disabled:e,className:"w-full",children:[e?s.jsx(qr,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Renvoyer l'email"]})]}),o&&s.jsxs("div",{className:"space-y-3 mt-4",children:[s.jsx("p",{className:"text-green-600 font-semibold text-lg",children:"Bienvenue sur StudyMarket !"}),s.jsx(Y,{onClick:a,className:"w-full bg-gradient-to-r from-primary to-secondary",children:"Accéder au site"})]})]})}),lle=Yc({email:_t().email("Email invalide"),password:_t().min(6,"Le mot de passe doit contenir au moins 6 caractères")}),cle=Yc({displayName:_t().min(2,"Le nom doit contenir au moins 2 caractères"),email:_t().email("Email invalide").refine(t=>["univ-","edu","gmail.com","ac.","student.","etudiant.","etu.","sorbonne-universite.fr","sorbonne-nouvelle.fr","dauphine.psl.eu","polytechnique.edu","ens.fr","centralesupelec.fr","mines-paristech.fr"].some(n=>t.includes(n)),"Vous devez utiliser une adresse email universitaire"),university:_t().min(1,"Veuillez sélectionner votre université"),otherUniversity:_t().optional(),fieldOfStudy:_t().min(1,"Veuillez indiquer votre filière"),otherFieldOfStudy:_t().optional(),graduationYear:_t().min(1,"Veuillez indiquer votre année de diplôme"),password:_t().min(6,"Le mot de passe doit contenir au moins 6 caractères"),confirmPassword:_t()}).refine(t=>t.password===t.confirmPassword,{message:"Les mots de passe ne correspondent pas",path:["confirmPassword"]}).refine(t=>t.university==="Autre université"?!!t.otherUniversity&&t.otherUniversity.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre université",path:["otherUniversity"]}).refine(t=>t.fieldOfStudy==="Autre"?!!t.otherFieldOfStudy&&t.otherFieldOfStudy.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre filière",path:["otherFieldOfStudy"]}),ule=Yc({university:_t().min(1,"Veuillez sélectionner votre université"),otherUniversity:_t().optional(),fieldOfStudy:_t().min(1,"Veuillez indiquer votre filière"),otherFieldOfStudy:_t().optional(),graduationYear:_t().min(1,"Veuillez indiquer votre année de diplôme"),displayName:_t().min(2,"Le nom doit contenir au moins 2 caractères")}).refine(t=>t.university==="Autre université"?!!t.otherUniversity&&t.otherUniversity.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre université",path:["otherUniversity"]}).refine(t=>t.fieldOfStudy==="Autre"?!!t.otherFieldOfStudy&&t.otherFieldOfStudy.trim().length>1:!0,{message:"Veuillez indiquer le nom de votre filière",path:["otherFieldOfStudy"]}),sT=["Sorbonne Université","Université Paris-Dauphine","École Polytechnique","ENS Paris","CentraleSupélec","MINES ParisTech","HEC Paris","ESSEC","ESCP","Université Paris 1 Panthéon-Sorbonne","Université Paris 3 Sorbonne","Université Paris Cité","Sciences Po Paris","Autre université"],iT=["Informatique","Ingénierie","Commerce/Management","Droit","Médecine","Sciences","Lettres/Langues","Sciences Humaines","Arts","Architecture","Autre"],dle=t=>["univ-","edu","ac.","student.","etudiant.","etu.","sorbonne-universite.fr","sorbonne-nouvelle.fr","dauphine.psl.eu","polytechnique.edu","ens.fr","centralesupelec.fr","mines-paristech.fr"].some(n=>t.includes(n)),hle=()=>{var Z,U;const{currentUser:t,signIn:e,signInWithGoogle:n,fetchUserProfile:r}=yn(),[i,a]=x.useState(!1),[o,c]=x.useState(!1),[u,h]=x.useState(!1),[f,p]=x.useState(!1),[v,_]=x.useState(""),[N,j]=x.useState(""),[S,w]=x.useState(!1),[y,E]=x.useState(null);uo();const[I,D]=x.useState(!1),[B,R]=x.useState(!1),[F,V]=x.useState(!1),k=ar(),M=gc({resolver:vc(lle),defaultValues:{email:"",password:""}}),O=gc({resolver:vc(cle),defaultValues:{displayName:"",email:"",university:"",otherUniversity:"",fieldOfStudy:"",otherFieldOfStudy:"",graduationYear:"",password:"",confirmPassword:""}}),P=gc({resolver:vc(ule),defaultValues:{university:"",fieldOfStudy:"",graduationYear:""}});if(x.useEffect(()=>{(async()=>{if(t)try{const H=await Ss(xt(De,"users",t.uid));if(H.exists()){const Q=H.data();if(!(t.emailVerified||t.providerData.some(ye=>ye.providerId==="google.com"))&&!Q.emailVerified){j(t.email||""),p(!0),D(!0),V(!1);return}}else{if(t.providerData.some(he=>he.providerId==="google.com")){if(!dle(t.email||"")){_("Vous devez utiliser une adresse email universitaire"),$i.signOut();return}E({email:t.email,displayName:t.displayName,photoURL:t.photoURL,uid:t.uid}),w(!0);return}const Q=localStorage.getItem("pendingUserData");if(Q&&t.emailVerified){const he=JSON.parse(Q),ye=Object.fromEntries(Object.entries(he).filter(([,Ue])=>Ue!==void 0));await sc(xt(De,"users",t.uid),ye),await r(t.uid),localStorage.removeItem("pendingUserData"),localStorage.removeItem("pendingUserEmail"),window.location.reload()}}}catch(H){console.error("Error checking user profile:",H)}})()},[t,r]),x.useEffect(()=>{let q=null;return f&&t&&!t.emailVerified&&(q=setInterval(async()=>{await df(t),t.emailVerified&&(p(!1),j(""),_(""),window.location.reload())},5e3)),()=>{q&&clearInterval(q)}},[f,t]),x.useEffect(()=>{t?t.emailVerified?(D(!1),V(!1)):(j(t.email||""),D(!0),V(!1)):(D(!1),V(!1))},[t]),x.useEffect(()=>{let q=null;return I&&t&&!t.emailVerified&&(q=setInterval(async()=>{await df(t),t.emailVerified&&(V(!0),q&&clearInterval(q))},5e3)),()=>{q&&clearInterval(q)}},[I,t]),S&&y)return s.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-8",children:s.jsxs(ae,{className:"w-full max-w-md",children:[s.jsxs(qe,{className:"text-center",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:s.jsx(EG,{className:"w-6 h-6 text-green-600"})})}),s.jsx(Ge,{className:"text-2xl text-green-600",children:"Complétez votre profil étudiant"}),s.jsx(Tt,{children:"Dernière étape pour accéder à StudyMarket"})]}),s.jsxs(oe,{className:"space-y-4",children:[s.jsxs(Ut,{children:[s.jsx(Ct,{className:"h-4 w-4"}),s.jsxs($t,{children:["Connecté avec ",s.jsx("strong",{children:y.email})]})]}),v&&s.jsxs(Ut,{variant:"destructive",children:[s.jsx(Mf,{className:"h-4 w-4"}),s.jsx($t,{children:v})]}),s.jsxs("form",{onSubmit:P.handleSubmit(async q=>{h(!0),_("");try{const H=q.university==="Autre université"?q.otherUniversity:q.university,Q=q.fieldOfStudy==="Autre"?q.otherFieldOfStudy:q.fieldOfStudy,he=Object.fromEntries(Object.entries(q).filter(([,ye])=>ye!==void 0));if(await sc(xt(De,"users",y.uid),{email:y.email,displayName:he.displayName,photoURL:y.photoURL,university:H,otherUniversity:q.university==="Autre université"?q.otherUniversity:void 0,fieldOfStudy:Q,otherFieldOfStudy:q.fieldOfStudy==="Autre"?q.otherFieldOfStudy:void 0,graduationYear:parseInt(q.graduationYear),createdAt:new Date().toISOString(),emailVerified:!0,isStudent:!0,provider:"google",profileCompleted:!0}),t&&y.displayName)try{await im(t,{displayName:he.displayName})}catch{}await r(y.uid),w(!1),window.location.reload()}catch(H){console.error("Error completing profile:",H),_("Erreur lors de la sauvegarde du profil")}finally{h(!1)}}),className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(be,{htmlFor:"university",children:"Université"}),s.jsxs(Jt,{onValueChange:q=>P.setValue("university",q),value:P.watch("university"),children:[s.jsx(qt,{children:s.jsx(en,{placeholder:"Sélectionnez votre université"})}),s.jsx(Ht,{children:sT.map(q=>s.jsx(Ve,{value:q,children:q},q))})]}),P.watch("university")==="Autre université"&&s.jsx(We,{id:"otherUniversity",type:"text",placeholder:"Nom de votre université",...P.register("otherUniversity"),className:"mt-2"}),P.formState.errors.university&&s.jsx("p",{className:"text-sm text-destructive",children:P.formState.errors.university.message}),P.watch("university")==="Autre université"&&P.formState.errors.otherUniversity&&s.jsx("p",{className:"text-sm text-destructive",children:P.formState.errors.otherUniversity.message})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(be,{htmlFor:"fieldOfStudy",children:"Filière"}),s.jsxs(Jt,{onValueChange:q=>P.setValue("fieldOfStudy",q),value:P.watch("fieldOfStudy"),children:[s.jsx(qt,{children:s.jsx(en,{placeholder:"Filière"})}),s.jsx(Ht,{children:iT.map(q=>s.jsx(Ve,{value:q,children:q},q))})]}),P.watch("fieldOfStudy")==="Autre"&&s.jsx(We,{id:"otherFieldOfStudy",type:"text",placeholder:"Nom de votre filière",...P.register("otherFieldOfStudy"),className:"mt-2"}),P.formState.errors.fieldOfStudy&&s.jsx("p",{className:"text-sm text-destructive",children:P.formState.errors.fieldOfStudy.message}),P.watch("fieldOfStudy")==="Autre"&&P.formState.errors.otherFieldOfStudy&&s.jsx("p",{className:"text-sm text-destructive",children:P.formState.errors.otherFieldOfStudy.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(be,{htmlFor:"graduationYear",children:"Année de diplôme"}),s.jsxs(Jt,{onValueChange:q=>P.setValue("graduationYear",q),children:[s.jsx(qt,{children:s.jsx(en,{placeholder:"Année"})}),s.jsx(Ht,{children:Array.from({length:8},(q,H)=>2024+H).map(q=>s.jsx(Ve,{value:q.toString(),children:q},q))})]}),P.formState.errors.graduationYear&&s.jsx("p",{className:"text-sm text-destructive",children:P.formState.errors.graduationYear.message})]})]}),s.jsxs(Y,{type:"submit",className:"w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800",disabled:u,children:[u?s.jsx(qr,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Finaliser mon inscription"]})]}),s.jsx(Y,{variant:"outline",onClick:()=>{$i.signOut(),w(!1),E(null)},className:"w-full",children:"Se déconnecter et recommencer"})]})]})});if(f)return s.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-8",children:s.jsxs(ae,{className:"w-full max-w-md",children:[s.jsxs(qe,{className:"text-center",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:s.jsx(us,{className:"w-6 h-6 text-blue-600"})})}),s.jsx(Ge,{className:"text-2xl text-blue-600",children:"Vérifiez votre email"}),s.jsxs(Tt,{children:["Un lien d'activation a été envoyé à ",s.jsx("strong",{children:N}),".",s.jsx("br",{}),"Cliquez sur le lien pour activer votre compte.",s.jsx("br",{}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"(Vous pouvez fermer cette page et revenir après avoir validé l'email)"})]})]}),s.jsxs(oe,{className:"space-y-4",children:[s.jsxs(Ut,{children:[s.jsx(Ct,{className:"h-4 w-4"}),s.jsxs($t,{children:["Nous avons envoyé un lien d'activation à ",s.jsx("strong",{children:N}),".",s.jsx("br",{}),s.jsx("span",{className:"text-xs",children:"Vérifiez vos spams si vous ne le trouvez pas."})]})]}),s.jsxs("div",{className:"text-sm text-muted-foreground space-y-2",children:[s.jsx("p",{children:s.jsx("strong",{children:"Important :"})}),s.jsx("p",{children:"• Cliquez sur le lien dans l'email pour activer votre compte"}),s.jsx("p",{children:"• Vérifiez votre boîte de réception et vos spams"}),s.jsx("p",{children:"• Le lien expire dans 24h"})]}),s.jsxs(Y,{onClick:async()=>{if(t){h(!0);try{await F_(t),_(""),alert("Email d'activation renvoyé !")}catch(q){_("Erreur lors de l'envoi de l'email"),console.error("Error resending verification:",q)}h(!1)}},variant:"outline",className:"w-full",disabled:u||!t,children:[u?s.jsx(qr,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(us,{className:"w-4 h-4 mr-2"}),"Renvoyer l'email d'activation"]}),s.jsx(Y,{onClick:async()=>{if(t){h(!0);try{await df(t),t.emailVerified?(p(!1),j(""),_(""),window.location.reload()):_("L'email n'est pas encore validé. Pensez à vérifier vos spams.")}catch{_("Erreur lors de la vérification de l'état de l'email")}h(!1)}},variant:"secondary",className:"w-full",disabled:u||!t,children:"J'ai déjà validé mon email"}),v&&s.jsxs(Ut,{variant:"destructive",children:[s.jsx(Mf,{className:"h-4 w-4"}),s.jsx($t,{children:v})]}),s.jsx(Y,{variant:"link",onClick:()=>{p(!1),j(""),_(""),t&&$i.signOut()},className:"w-full",children:"Retour à l'inscription"})]})]})});const W=async q=>{h(!0),_("");try{await e(q.email,q.password),k("/")}catch(H){H.code==="auth/invalid-credential"?_("Email ou mot de passe incorrect"):H.code==="auth/user-not-found"?_("Aucun compte trouvé avec cet email"):H.code==="auth/user-disabled"?_("Ce compte a été désactivé"):H.code==="auth/too-many-requests"?_("Trop de tentatives. Réessayez plus tard."):_("Erreur de connexion: "+(H.message||"Erreur inconnue")),console.error("Sign in error:",H)}finally{h(!1)}},X=async q=>{h(!0),_("");try{const Q=(await gA($i,q.email,q.password)).user;await F_(Q,{url:`${window.location.origin}/auth`,handleCodeInApp:!1});const he=q.university==="Autre université"?q.otherUniversity:q.university,ye=q.fieldOfStudy==="Autre"?q.otherFieldOfStudy:q.fieldOfStudy,Ue=Object.fromEntries(Object.entries(q).filter(([,re])=>re!==void 0)),He={displayName:Ue.displayName,university:he,otherUniversity:q.university==="Autre université"?q.otherUniversity:void 0,fieldOfStudy:ye,otherFieldOfStudy:q.fieldOfStudy==="Autre"?q.otherFieldOfStudy:void 0,graduationYear:parseInt(Ue.graduationYear),email:q.email,createdAt:new Date().toISOString(),emailVerified:!0,isStudent:!0,provider:"email"};await sc(xt(De,"users",Q.uid),He),await r(Q.uid),j(q.email),D(!0),V(!1),Q&&await im(Q,{displayName:Ue.displayName}),window.location.reload()}catch(H){console.error("Sign up error:",H),H.code==="auth/email-already-in-use"?_("Cette adresse email est déjà utilisée"):H.code==="auth/weak-password"?_("Le mot de passe est trop faible"):H.code==="auth/invalid-email"?_("Adresse email invalide"):_("Erreur lors de la création du compte")}finally{h(!1)}},ee=async()=>{h(!0),_("");try{await n()}catch(q){q.code==="auth/popup-closed-by-user"?_("Connexion annulée"):q.code==="auth/popup-blocked"?_("Popup bloquée par le navigateur"):q.code==="auth/account-exists-with-different-credential"?_("Un compte existe déjà avec cet email"):_("Erreur de connexion avec Google: "+(q.message||"Erreur inconnue")),console.error("Google sign in error:",q)}finally{h(!1)}};return x.useEffect(()=>{(async()=>{if(t&&t.emailVerified&&!(await Ss(xt(De,"users",t.uid))).exists()){const Q=localStorage.getItem("pendingUserData");if(Q){const he=JSON.parse(Q),ye=Object.fromEntries(Object.entries(he).filter(([,Ue])=>Ue!==void 0));await sc(xt(De,"users",t.uid),ye),await r(t.uid),localStorage.removeItem("pendingUserData"),localStorage.removeItem("pendingUserEmail"),window.location.reload()}}})()},[t,r]),s.jsxs("div",{className:"min-h-screen flex items-center justify-center px-2 sm:px-0",children:[s.jsxs(ae,{className:"w-full max-w-md mx-auto px-2 py-4 sm:px-6",children:[s.jsxs(qe,{className:"text-center",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-secondary rounded-lg flex items-center justify-center",children:s.jsx(Xd,{className:"w-6 h-6 text-white"})})}),s.jsx(Ge,{className:"text-2xl",children:i?"Rejoindre StudyMarket":"Se connecter"}),s.jsx(Tt,{children:i?"Inscription sécurisée pour étudiants":"Connectez-vous à votre compte étudiant"}),i&&s.jsx("div",{className:"flex items-center justify-center gap-2 mt-4",children:s.jsxs(et,{className:"bg-blue-100 text-blue-800 border-blue-200",children:[s.jsx(Vt,{className:"w-3 h-3 mr-1"}),"Email universitaire requis"]})})]}),s.jsxs(oe,{className:"space-y-6",children:[v&&s.jsxs(Ut,{variant:"destructive",children:[s.jsx(Mf,{className:"h-4 w-4"}),s.jsx($t,{children:v})]}),s.jsxs(Y,{variant:"outline",className:"w-full",onClick:ee,disabled:u,children:[u?s.jsx(qr,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsxs("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",children:[s.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{fill:"currentColor",d:"M12 1c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continuer avec Google Éducation"]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx(Bs,{className:"w-full"})}),s.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:s.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Ou avec votre email universitaire"})})]}),s.jsxs("form",{onSubmit:i?O.handleSubmit(X):M.handleSubmit(W),className:"space-y-4",children:[i&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(be,{htmlFor:"displayName",children:"Nom complet"}),s.jsxs("div",{className:"relative",children:[s.jsx(Zr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(We,{id:"displayName",type:"text",placeholder:"Votre nom complet",className:"pl-10",...O.register("displayName")})]}),O.formState.errors.displayName&&s.jsx("p",{className:"text-sm text-destructive",children:O.formState.errors.displayName.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(be,{htmlFor:"email",children:"Email universitaire"}),s.jsxs("div",{className:"relative",children:[s.jsx(us,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(We,{id:"email",type:"email",placeholder:"prenom.nom@univ-exemple.fr",className:"pl-10",...i?O.register("email"):M.register("email")})]}),(i?O.formState.errors.email:M.formState.errors.email)&&s.jsx("p",{className:"text-sm text-destructive",children:(Z=i?O.formState.errors.email:M.formState.errors.email)==null?void 0:Z.message}),i&&s.jsx("p",{className:"text-xs text-muted-foreground",children:"Un lien d'activation sera envoyé à cette adresse"})]}),i&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(be,{htmlFor:"university",children:"Université"}),s.jsxs(Jt,{onValueChange:q=>O.setValue("university",q),value:O.watch("university"),children:[s.jsx(qt,{children:s.jsx(en,{placeholder:"Sélectionnez votre université"})}),s.jsx(Ht,{children:sT.map(q=>s.jsx(Ve,{value:q,children:q},q))})]}),O.watch("university")==="Autre université"&&s.jsx(We,{id:"otherUniversity",type:"text",placeholder:"Nom de votre université",...O.register("otherUniversity"),className:"mt-2"}),O.formState.errors.university&&s.jsx("p",{className:"text-sm text-destructive",children:O.formState.errors.university.message}),O.watch("university")==="Autre université"&&O.formState.errors.otherUniversity&&s.jsx("p",{className:"text-sm text-destructive",children:O.formState.errors.otherUniversity.message})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(be,{htmlFor:"fieldOfStudy",children:"Filière"}),s.jsxs(Jt,{onValueChange:q=>O.setValue("fieldOfStudy",q),value:O.watch("fieldOfStudy"),children:[s.jsx(qt,{children:s.jsx(en,{placeholder:"Filière"})}),s.jsx(Ht,{children:iT.map(q=>s.jsx(Ve,{value:q,children:q},q))})]}),O.watch("fieldOfStudy")==="Autre"&&s.jsx(We,{id:"otherFieldOfStudy",type:"text",placeholder:"Nom de votre filière",...O.register("otherFieldOfStudy"),className:"mt-2"}),O.formState.errors.fieldOfStudy&&s.jsx("p",{className:"text-sm text-destructive",children:O.formState.errors.fieldOfStudy.message}),O.watch("fieldOfStudy")==="Autre"&&O.formState.errors.otherFieldOfStudy&&s.jsx("p",{className:"text-sm text-destructive",children:O.formState.errors.otherFieldOfStudy.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(be,{htmlFor:"graduationYear",children:"Année de diplôme"}),s.jsxs(Jt,{onValueChange:q=>O.setValue("graduationYear",q),children:[s.jsx(qt,{children:s.jsx(en,{placeholder:"Année"})}),s.jsx(Ht,{children:Array.from({length:8},(q,H)=>2024+H).map(q=>s.jsx(Ve,{value:q.toString(),children:q},q))})]}),O.formState.errors.graduationYear&&s.jsx("p",{className:"text-sm text-destructive",children:O.formState.errors.graduationYear.message})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(be,{htmlFor:"password",children:"Mot de passe"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ic,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(We,{id:"password",type:o?"text":"password",placeholder:"••••••••",className:"pl-10 pr-10",...i?O.register("password"):M.register("password")}),s.jsx(Y,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-1/2 transform -translate-y-1/2 h-full px-3",onClick:()=>c(!o),children:o?s.jsx(cG,{className:"w-4 h-4"}):s.jsx(Cd,{className:"w-4 h-4"})})]}),(i?O.formState.errors.password:M.formState.errors.password)&&s.jsx("p",{className:"text-sm text-destructive",children:(U=i?O.formState.errors.password:M.formState.errors.password)==null?void 0:U.message})]}),i&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(be,{htmlFor:"confirmPassword",children:"Confirmer le mot de passe"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ic,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(We,{id:"confirmPassword",type:o?"text":"password",placeholder:"••••••••",className:"pl-10",...O.register("confirmPassword")})]}),O.formState.errors.confirmPassword&&s.jsx("p",{className:"text-sm text-destructive",children:O.formState.errors.confirmPassword.message})]}),s.jsxs(Y,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90",disabled:u,children:[u?s.jsx(qr,{className:"w-4 h-4 mr-2 animate-spin"}):null,i?"Créer le compte et envoyer l'email":"Se connecter"]})]}),s.jsx("div",{className:"w-full",children:s.jsx(Y,{variant:"link",onClick:()=>a(!i),disabled:u,className:"w-full flex justify-center items-center text-center break-words px-1",children:i?"Déjà un compte ? Se connecter":"Pas encore de compte ? S'inscrire"})}),i&&s.jsx("div",{className:"text-center text-xs text-muted-foreground",children:"En créant un compte, vous acceptez nos conditions d'utilisation. Seules les adresses email universitaires sont acceptées."})]})]}),s.jsx(ole,{open:I,loading:B,email:N,onResend:async()=>{R(!0);try{t&&await F_(t)}finally{R(!1)}},onCheck:async()=>{R(!0);try{t&&(await df(t),t.emailVerified&&V(!0))}finally{R(!1)}},onClose:()=>{D(!1),V(!1),k("/")},verified:F})]})},ci=({children:t})=>{const{currentUser:e}=yn(),n=uo();return e?s.jsx(s.Fragment,{children:t}):s.jsx(I9,{to:"/auth",state:{from:n},replace:!0})},V5=({cart:t,total:e,showCheckoutButton:n=!0})=>{const r=ar(),i=e,a=0,o=0,c=i+a-o,u=h=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(h);return s.jsxs(ae,{children:[s.jsx(qe,{children:s.jsxs(Ge,{className:"flex items-center gap-2",children:[s.jsx(xl,{className:"w-5 h-5"}),"Récapitulatif de commande"]})}),s.jsx(oe,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("span",{className:"text-muted-foreground",children:["Articles (",t.reduce((h,f)=>h+f.quantity,0),")"]}),s.jsx("span",{children:u(i)})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("span",{className:"flex items-center gap-1 text-muted-foreground",children:[s.jsx(my,{className:"w-4 h-4"}),"Livraison"]}),s.jsx("span",{className:"text-green-600 font-medium",children:"Gratuite"})]}),o>0,s.jsx(Bs,{}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-semibold",children:"Total"}),s.jsx("span",{className:"font-bold text-lg",children:u(c)})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"* TVA incluse"}),n&&s.jsxs(Y,{onClick:()=>r("/checkout"),className:"w-full mt-4 bg-gradient-to-r from-primary to-secondary",disabled:t.length===0,children:[s.jsx(Ln,{className:"mr-2 h-4 w-4"}),"Procéder au paiement",s.jsx(Ki,{className:"ml-2 h-4 w-4"})]})]})})]})},fle=()=>{const{currentUser:t}=yn(),{cart:e,updateQuantity:n,removeFromCart:r,clearCart:i,cartTotal:a}=ah(),o=ar(),[c,u]=x.useState(""),[h,f]=x.useState(!1),p=(N,j)=>{if(!(j<1)){if(j>10){fe.error("Maximum 10 articles par produit");return}n(N,j)}},v=N=>{r(N),fe.success("Article retiré du panier")},_=()=>{c.trim()&&(f(!0),setTimeout(()=>{c.toLowerCase()==="etudiant10"?fe.success("Code promo appliqué : 10% de réduction"):fe.error("Code promo invalide ou expiré"),f(!1)},1e3))};return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs(Y,{variant:"ghost",onClick:()=>o(-1),className:"-ml-4",children:[s.jsx(dc,{className:"w-4 h-4 mr-2"}),"Retour"]}),s.jsxs("div",{className:"flex items-center justify-between mt-4",children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(xl,{className:"w-8 h-8"}),"Mon Panier"]}),e.length>0&&s.jsxs(Y,{variant:"outline",onClick:i,className:"text-destructive hover:text-destructive",children:[s.jsx(qa,{className:"w-4 h-4 mr-2"}),"Vider le panier"]})]})]}),e.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(xl,{className:"w-8 h-8 text-muted-foreground"})}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Votre panier est vide"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas encore ajouté d'articles à votre panier."}),s.jsx(Y,{asChild:!0,children:s.jsxs(Te,{to:"/products",children:[s.jsx(mc,{className:"w-4 h-4 mr-2"}),"Parcourir les produits"]})})]}):s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2",children:[s.jsxs(ae,{children:[s.jsx(qe,{children:s.jsxs(Ge,{className:"flex items-center justify-between",children:[s.jsxs("span",{children:["Articles (",e.reduce((N,j)=>N+j.quantity,0),")"]}),s.jsxs(Y,{variant:"ghost",size:"sm",onClick:()=>o("/products"),children:[s.jsx(mc,{className:"w-4 h-4 mr-2"}),"Continuer mes achats"]})]})}),s.jsx(oe,{children:s.jsx("div",{className:"space-y-4",children:e.map(N=>s.jsxs("div",{className:"flex items-center gap-4 p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[N.image?s.jsx("img",{src:N.image,alt:N.name,className:"w-20 h-20 object-cover rounded"}):s.jsx("div",{className:"w-20 h-20 bg-muted rounded flex items-center justify-center",children:s.jsx(mc,{className:"w-8 h-8 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold",children:N.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:N.seller}),s.jsxs("div",{className:"flex items-center mt-2",children:[s.jsx(Y,{variant:"outline",size:"icon",className:"h-8 w-8 rounded-r-none",onClick:()=>p(N.id,N.quantity-1),disabled:N.quantity<=1,children:s.jsx(I4,{className:"h-3 w-3"})}),s.jsx(We,{type:"number",value:N.quantity,onChange:j=>{const S=parseInt(j.target.value);isNaN(S)||p(N.id,S)},className:"h-8 w-12 rounded-none text-center [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),s.jsx(Y,{variant:"outline",size:"icon",className:"h-8 w-8 rounded-l-none",onClick:()=>p(N.id,N.quantity+1),disabled:N.quantity>=10,children:s.jsx(fc,{className:"h-3 w-3"})})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(N.price*N.quantity)}),s.jsxs(Y,{variant:"ghost",size:"sm",onClick:()=>v(N.id),className:"text-destructive hover:text-destructive mt-2",children:[s.jsx(qa,{className:"h-3 w-3 mr-1"}),"Supprimer"]})]})]},N.id))})})]}),s.jsx(ae,{className:"mt-6",children:s.jsxs(oe,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(pm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(We,{placeholder:"Code promo",value:c,onChange:N=>u(N.target.value),className:"pl-10"})]}),s.jsx(Y,{onClick:_,disabled:!c.trim()||h,children:h?s.jsxs(s.Fragment,{children:[s.jsx(to,{className:"w-4 h-4 mr-2 animate-spin"}),"Application..."]}):"Appliquer"})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:'Essayez le code "ETUDIANT10" pour 10% de réduction'})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(V5,{cart:e,total:a,showCheckoutButton:!0}),!t&&s.jsxs(Ut,{className:"border-orange-200 bg-orange-50",children:[s.jsx(Pn,{className:"h-4 w-4 text-orange-600"}),s.jsx($t,{className:"text-orange-800",children:"Vous devez être connecté pour finaliser votre commande."})]})]})]})]})},Sg=t=>{if(!t)return new Date;if(t instanceof Date)return t;if(t&&typeof t.toDate=="function")try{return t.toDate()}catch{return new Date}if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?new Date:e}return t&&typeof t=="object"&&t.seconds?new Date(t.seconds*1e3):new Date},rS=ih((t,e)=>({orders:[],loading:!1,fetchUserOrders:async n=>{if(n)try{t({loading:!0});const r=vn(Ft(De,"orders"),Zn("userId","==",n),Ks(100)),i=await On(r),a=[];i.forEach(o=>{const c=o.data();a.push({id:o.id,...c,createdAt:Sg(c.createdAt),updatedAt:Sg(c.updatedAt)})}),a.sort((o,c)=>c.createdAt.getTime()-o.createdAt.getTime()),t({orders:a,loading:!1})}catch(r){console.error("Error fetching orders:",r),fe.error("Erreur lors du chargement des commandes"),t({loading:!1})}},getOrderById:async n=>{try{const r=await Ss(xt(De,"orders",n));if(r.exists()){const i=r.data();return{id:r.id,...i,createdAt:Sg(i.createdAt),updatedAt:Sg(i.updatedAt)}}return null}catch(r){return console.error("Error getting order:",r),fe.error("Erreur lors du chargement de la commande"),null}},createOrder:async n=>{try{const r=Math.random().toString(36).substring(2,8).toUpperCase(),i={...n,securityCode:r,createdAt:er(),updatedAt:er()},a=await gl(Ft(De,"orders"),i),o={id:a.id,...n,createdAt:new Date,updatedAt:new Date};return t(c=>({orders:[o,...c.orders]})),fe.success("Commande créée avec succès !"),a.id}catch(r){throw console.error("Error creating order:",r),fe.error("Erreur lors de la création de la commande"),r}},updateOrderStatus:async(n,r,i)=>{try{const a={status:r,updatedAt:er()};i&&(a.notes=i),await Tn(xt(De,"orders",n),a),t(o=>({orders:o.orders.map(c=>c.id===n?{...c,status:r,notes:i||c.notes,updatedAt:new Date}:c)})),fe.success(`Statut de la commande mis à jour : ${r}`)}catch(a){console.error("Error updating order status:",a),fe.error("Erreur lors de la mise à jour du statut")}},cancelOrder:async(n,r)=>{try{await Tn(xt(De,"orders",n),{status:"cancelled",notes:r,updatedAt:er()}),t(i=>({orders:i.orders.map(a=>a.id===n?{...a,status:"cancelled",notes:r,updatedAt:new Date}:a)})),fe.success("Commande annulée")}catch(i){console.error("Error cancelling order:",i),fe.error("Erreur lors de l'annulation de la commande")}}})),mle=()=>{const{currentUser:t,userProfile:e}=yn(),n=ar(),r=uo(),{cart:i,cartTotal:a,clearCart:o}=ah(),{createOrder:c}=rS(),[u,h]=x.useState("shipping"),[f,p]=x.useState(!1),[v,_]=x.useState(null),[N,j]=x.useState({}),[S,w]=x.useState({fullName:(e==null?void 0:e.displayName)||"",email:(e==null?void 0:e.email)||"",phone:(e==null?void 0:e.phone)||"",address:"",city:"",postalCode:"",country:"France",university:(e==null?void 0:e.university)||"",saveInfo:!0}),[y,E]=x.useState({}),[I,D]=x.useState(!1);x.useEffect(()=>{var M;i.length===0&&!((M=r.state)!=null&&M.directCheckout)&&(n("/cart"),fe.error("Votre panier est vide"))},[i,n,r]);const B=()=>{const M={};return S.fullName||(M.fullName="Nom complet requis"),S.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(S.email)||(M.email="Format d'email invalide"):M.email="Email requis",S.phone||(M.phone="Téléphone requis"),S.address||(M.address="Adresse requise"),S.city||(M.city="Ville requise"),S.postalCode||(M.postalCode="Code postal requis"),E(M),Object.keys(M).length===0},R=M=>{M.preventDefault(),B()&&(h("payment"),window.scrollTo(0,0))},F=(M,O)=>{_(M),j(O),M==="card"&&O.stripePaymentId&&(h("review"),window.scrollTo(0,0))},V=()=>{if(!v){fe.error("Veuillez sélectionner un mode de paiement");return}h("review"),window.scrollTo(0,0)},k=async()=>{if(!t){n("/auth");return}if(!I){fe.error("Veuillez accepter les conditions générales");return}p(!0);try{const M={userId:t.uid,items:i,total:a,shipping:S,payment:{method:v,details:N,transactionId:N.stripePaymentId},status:v==="card"?"processing":"pending"},O=await c(M);o(),n(`/order-confirmation/${O}`)}catch(M){console.error("Error placing order:",M),fe.error("Erreur lors de la création de la commande")}finally{p(!1)}};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs(Y,{variant:"ghost",onClick:()=>n(-1),className:"-ml-4",children:[s.jsx(dc,{className:"w-4 h-4 mr-2"}),"Retour"]}),s.jsx("h1",{className:"text-3xl font-bold mt-4",children:"Finaliser votre commande"}),s.jsxs("div",{className:"flex items-center mt-6",children:[s.jsxs("div",{className:`flex items-center ${u==="shipping"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${u==="shipping"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"1"}),s.jsx("span",{className:"ml-2 font-medium",children:"Livraison"})]}),s.jsx(Ki,{className:"mx-2 text-muted-foreground"}),s.jsxs("div",{className:`flex items-center ${u==="payment"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${u==="payment"||u==="review"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"2"}),s.jsx("span",{className:"ml-2 font-medium",children:"Paiement"})]}),s.jsx(Ki,{className:"mx-2 text-muted-foreground"}),s.jsxs("div",{className:`flex items-center ${u==="review"?"text-primary":"text-muted-foreground"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${u==="review"?"border-primary bg-primary text-white":"border-muted-foreground"}`,children:"3"}),s.jsx("span",{className:"ml-2 font-medium",children:"Vérification"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[u==="shipping"&&s.jsxs(ae,{children:[s.jsxs(qe,{children:[s.jsxs(Ge,{className:"flex items-center gap-2",children:[s.jsx(my,{className:"w-5 h-5"}),"Informations de livraison"]}),s.jsx(Tt,{children:"Entrez vos coordonnées pour la livraison"})]}),s.jsx(oe,{children:s.jsxs("form",{onSubmit:R,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs(be,{htmlFor:"fullName",className:"flex items-center gap-1",children:[s.jsx(Zr,{className:"w-4 h-4"}),"Nom complet *"]}),s.jsx(We,{id:"fullName",value:S.fullName,onChange:M=>w({...S,fullName:M.target.value}),className:y.fullName?"border-red-500":""}),y.fullName&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:y.fullName})]}),s.jsxs("div",{children:[s.jsxs(be,{htmlFor:"email",className:"flex items-center gap-1",children:[s.jsx(us,{className:"w-4 h-4"}),"Email *"]}),s.jsx(We,{id:"email",type:"email",value:S.email,onChange:M=>w({...S,email:M.target.value}),className:y.email?"border-red-500":""}),y.email&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:y.email})]}),s.jsxs("div",{children:[s.jsxs(be,{htmlFor:"phone",className:"flex items-center gap-1",children:[s.jsx(Jd,{className:"w-4 h-4"}),"Téléphone *"]}),s.jsx(We,{id:"phone",value:S.phone,onChange:M=>w({...S,phone:M.target.value}),className:y.phone?"border-red-500":""}),y.phone&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:y.phone})]}),s.jsxs("div",{children:[s.jsxs(be,{htmlFor:"university",className:"flex items-center gap-1",children:[s.jsx(Ar,{className:"w-4 h-4"}),"Université"]}),s.jsx(We,{id:"university",value:S.university,onChange:M=>w({...S,university:M.target.value})})]})]}),s.jsxs("div",{children:[s.jsxs(be,{htmlFor:"address",className:"flex items-center gap-1",children:[s.jsx(Ar,{className:"w-4 h-4"}),"Adresse *"]}),s.jsx(We,{id:"address",value:S.address,onChange:M=>w({...S,address:M.target.value}),className:y.address?"border-red-500":""}),y.address&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:y.address})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsxs(be,{htmlFor:"city",className:"flex items-center gap-1",children:[s.jsx(Ar,{className:"w-4 h-4"}),"Ville *"]}),s.jsx(We,{id:"city",value:S.city,onChange:M=>w({...S,city:M.target.value}),className:y.city?"border-red-500":""}),y.city&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:y.city})]}),s.jsxs("div",{children:[s.jsxs(be,{htmlFor:"postalCode",className:"flex items-center gap-1",children:[s.jsx(Ar,{className:"w-4 h-4"}),"Code postal *"]}),s.jsx(We,{id:"postalCode",value:S.postalCode,onChange:M=>w({...S,postalCode:M.target.value}),className:y.postalCode?"border-red-500":""}),y.postalCode&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:y.postalCode})]}),s.jsxs("div",{children:[s.jsxs(be,{htmlFor:"country",className:"flex items-center gap-1",children:[s.jsx(Ar,{className:"w-4 h-4"}),"Pays *"]}),s.jsx(We,{id:"country",value:S.country,onChange:M=>w({...S,country:M.target.value}),disabled:!0})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 mt-4",children:[s.jsx(vx,{id:"saveInfo",checked:S.saveInfo,onCheckedChange:M=>w({...S,saveInfo:M})}),s.jsx(be,{htmlFor:"saveInfo",children:"Sauvegarder ces informations pour mes prochaines commandes"})]}),s.jsx("div",{className:"pt-4 flex justify-end",children:s.jsxs(Y,{type:"submit",className:"w-full md:w-auto",children:["Continuer vers le paiement",s.jsx(Ki,{className:"ml-2 h-4 w-4"})]})})]})})]}),u==="payment"&&s.jsxs(ae,{children:[s.jsxs(qe,{children:[s.jsxs(Ge,{className:"flex items-center gap-2",children:[s.jsx(Ln,{className:"w-5 h-5"}),"Méthode de paiement"]}),s.jsx(Tt,{children:"Choisissez votre mode de paiement préféré"})]}),s.jsx(oe,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsx($L,{amount:a,currency:"EUR",onMethodSelect:F,selectedMethod:v}),s.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[s.jsxs(Y,{variant:"outline",onClick:()=>h("shipping"),children:[s.jsx(dc,{className:"mr-2 h-4 w-4"}),"Retour"]}),s.jsxs(Y,{onClick:V,disabled:!v||v==="card"&&!N.stripePaymentId,children:["Vérifier la commande",s.jsx(Ki,{className:"ml-2 h-4 w-4"})]})]})]})})]}),u==="review"&&s.jsxs(ae,{children:[s.jsxs(qe,{children:[s.jsxs(Ge,{className:"flex items-center gap-2",children:[s.jsx(Ct,{className:"w-5 h-5"}),"Vérification de la commande"]}),s.jsx(Tt,{children:"Vérifiez les détails de votre commande avant de confirmer"})]}),s.jsx(oe,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"font-semibold",children:"Informations de livraison"}),s.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>h("shipping"),children:"Modifier"})]}),s.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[s.jsx("p",{className:"font-medium",children:S.fullName}),s.jsx("p",{children:S.address}),s.jsxs("p",{children:[S.postalCode," ",S.city,", ",S.country]}),s.jsx("p",{children:S.email}),s.jsx("p",{children:S.phone})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"font-semibold",children:"Méthode de paiement"}),s.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>h("payment"),children:"Modifier"})]}),s.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[s.jsxs("p",{className:"font-medium",children:[v==="card"&&"Carte bancaire",v==="paypal"&&"PayPal",v==="transfer"&&"Virement bancaire",v==="cash"&&"Paiement à la livraison",v==="lydia"&&"Lydia"]}),v==="card"&&N.stripePaymentId&&s.jsxs("p",{className:"text-green-600 text-sm",children:[s.jsx(Ct,{className:"w-3 h-3 inline mr-1"}),"Paiement autorisé"]}),v==="paypal"&&N.paypalEmail&&s.jsx("p",{children:N.paypalEmail}),v==="lydia"&&N.lydiaPhone&&s.jsx("p",{children:N.lydiaPhone})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold mb-2",children:["Articles (",i.length,")"]}),s.jsx("div",{className:"space-y-3",children:i.map(M=>s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg",children:[M.image&&s.jsx("img",{src:M.image,alt:M.name,className:"w-16 h-16 object-cover rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:M.name}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantité: ",M.quantity]})]}),s.jsx("p",{className:"font-semibold",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(M.price*M.quantity)})]},M.id))})]}),s.jsx("div",{className:"pt-4 border-t",children:s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx(vx,{id:"terms",checked:I,onCheckedChange:M=>D(M)}),s.jsxs("div",{children:[s.jsx(be,{htmlFor:"terms",className:"font-medium",children:"J'accepte les conditions générales de vente"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"En passant commande, vous acceptez nos conditions générales de vente et notre politique de confidentialité."})]})]})}),s.jsxs("div",{className:"flex justify-between pt-4",children:[s.jsxs(Y,{variant:"outline",onClick:()=>h("payment"),children:[s.jsx(dc,{className:"mr-2 h-4 w-4"}),"Retour"]}),s.jsx(Y,{onClick:k,disabled:f||!I,className:"bg-gradient-to-r from-primary to-secondary",children:f?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Traitement..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ic,{className:"mr-2 h-4 w-4"}),"Confirmer la commande"]})})]})]})})]})]}),s.jsxs("div",{children:[s.jsx(V5,{cart:i,total:a,showCheckoutButton:!1}),s.jsxs(Ut,{className:"mt-4 border-blue-200 bg-blue-50",children:[s.jsx(Vt,{className:"h-4 w-4 text-blue-600"}),s.jsxs($t,{className:"text-blue-800",children:[s.jsx("strong",{children:"Paiement sécurisé :"})," Toutes vos informations sont cryptées et sécurisées."]})]}),s.jsx(ae,{className:"mt-4",children:s.jsx(oe,{className:"pt-6",children:s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(vl,{className:"w-5 h-5 text-muted-foreground mt-0.5"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium",children:"Besoin d'aide ?"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Notre équipe est disponible 7j/7 pour vous aider avec votre commande."}),s.jsx(Y,{variant:"link",className:"p-0 h-auto text-sm",children:"Contacter le support"})]})]})})})})]})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:s.jsx(ae,{children:s.jsxs(oe,{className:"pt-6",children:[s.jsx(xl,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour finaliser votre achat"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous devez être connecté pour accéder au processus de paiement"}),s.jsx(Y,{onClick:()=>n("/auth"),children:"Se connecter"})]})})})},ple=()=>{const{currentUser:t}=yn(),{orders:e,fetchUserOrders:n,loading:r}=rS(),i=ar(),[a,o]=x.useState(""),[c,u]=x.useState("all"),[h,f]=x.useState("date-desc"),[p,v]=x.useState("all");x.useEffect(()=>{t&&n(t.uid)},[t,n]);const _=()=>e.filter(w=>{const y=!a||w.id.toLowerCase().includes(a.toLowerCase()),E=c==="all"||w.status===c;let I=!0;if(p!=="all"){const D=new Date(w.createdAt),B=new Date;if(p==="last-30-days"){const R=new Date;R.setDate(B.getDate()-30),I=D>=R}else if(p==="last-6-months"){const R=new Date;R.setMonth(B.getMonth()-6),I=D>=R}}return y&&E&&I}).sort((w,y)=>h==="date-desc"?new Date(y.createdAt).getTime()-new Date(w.createdAt).getTime():h==="date-asc"?new Date(w.createdAt).getTime()-new Date(y.createdAt).getTime():h==="total-desc"?y.total-w.total:h==="total-asc"?w.total-y.total:0),N=w=>{switch(w){case"pending":return s.jsxs(et,{className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:[s.jsx(Vn,{className:"w-3 h-3 mr-1"}),"En attente"]});case"processing":return s.jsxs(et,{className:"bg-blue-100 text-blue-800 border-blue-200",children:[s.jsx(pn,{className:"w-3 h-3 mr-1"}),"En traitement"]});case"shipped":return s.jsxs(et,{className:"bg-purple-100 text-purple-800 border-purple-200",children:[s.jsx(my,{className:"w-3 h-3 mr-1"}),"Expédiée"]});case"delivered":return s.jsxs(et,{className:"bg-green-100 text-green-800 border-green-200",children:[s.jsx(Ct,{className:"w-3 h-3 mr-1"}),"Livrée"]});case"cancelled":return s.jsxs(et,{className:"bg-red-100 text-red-800 border-red-200",children:[s.jsx(Ed,{className:"w-3 h-3 mr-1"}),"Annulée"]});default:return s.jsx(et,{children:w})}},j=w=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(w),S=()=>{const w={user:(t==null?void 0:t.displayName)||(t==null?void 0:t.email),date:new Date().toISOString(),orders:e.map(D=>({id:D.id,date:D.createdAt,status:D.status,total:D.total,items:D.items.length}))},y=new Blob([JSON.stringify(w,null,2)],{type:"application/json"}),E=URL.createObjectURL(y),I=document.createElement("a");I.href=E,I.download=`commandes-${new Date().toISOString().slice(0,10)}.json`,I.click(),URL.revokeObjectURL(E)};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(pn,{className:"w-8 h-8"}),"Mes Commandes"]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Suivez et gérez toutes vos commandes"})]}),s.jsxs(Y,{variant:"outline",onClick:S,className:"flex items-center gap-2",children:[s.jsx(Zs,{className:"w-4 h-4"}),"Exporter"]})]}),s.jsx(ae,{children:s.jsx(oe,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(We,{placeholder:"Rechercher par numéro de commande...",value:a,onChange:w=>o(w.target.value),className:"pl-10"})]}),s.jsxs(Jt,{value:c,onValueChange:u,children:[s.jsx(qt,{className:"w-40",children:s.jsx(en,{placeholder:"Statut"})}),s.jsxs(Ht,{children:[s.jsx(Ve,{value:"all",children:"Tous les statuts"}),s.jsx(Ve,{value:"pending",children:"En attente"}),s.jsx(Ve,{value:"processing",children:"En traitement"}),s.jsx(Ve,{value:"shipped",children:"Expédiée"}),s.jsx(Ve,{value:"delivered",children:"Livrée"}),s.jsx(Ve,{value:"cancelled",children:"Annulée"})]})]}),s.jsxs(Jt,{value:p,onValueChange:v,children:[s.jsx(qt,{className:"w-40",children:s.jsx(en,{placeholder:"Période"})}),s.jsxs(Ht,{children:[s.jsx(Ve,{value:"all",children:"Toutes les périodes"}),s.jsx(Ve,{value:"last-30-days",children:"30 derniers jours"}),s.jsx(Ve,{value:"last-6-months",children:"6 derniers mois"})]})]}),s.jsxs(Jt,{value:h,onValueChange:f,children:[s.jsx(qt,{className:"w-40",children:s.jsx(en,{placeholder:"Trier par"})}),s.jsxs(Ht,{children:[s.jsx(Ve,{value:"date-desc",children:"Date (récent → ancien)"}),s.jsx(Ve,{value:"date-asc",children:"Date (ancien → récent)"}),s.jsx(Ve,{value:"total-desc",children:"Prix (élevé → bas)"}),s.jsx(Ve,{value:"total-asc",children:"Prix (bas → élevé)"})]})]})]})})}),s.jsxs(Qc,{defaultValue:"all",className:"space-y-4",children:[s.jsxs(Dl,{className:"grid w-full grid-cols-4",children:[s.jsx(cn,{value:"all",children:"Toutes"}),s.jsx(cn,{value:"active",children:"En cours"}),s.jsx(cn,{value:"completed",children:"Terminées"}),s.jsx(cn,{value:"cancelled",children:"Annulées"})]}),s.jsx(un,{value:"all",className:"space-y-4",children:r?s.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((w,y)=>s.jsx(ae,{className:"animate-pulse",children:s.jsxs(oe,{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between mb-4",children:[s.jsx("div",{className:"h-6 bg-muted rounded w-1/4"}),s.jsx("div",{className:"h-6 bg-muted rounded w-1/6"})]}),s.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2"})]})},y))}):_().length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(pn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande trouvée"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:e.length===0?"Vous n'avez pas encore passé de commande.":"Aucune commande ne correspond à vos critères de recherche."}),s.jsx(Y,{asChild:!0,children:s.jsxs(Te,{to:"/listings",children:[s.jsx(mc,{className:"w-4 h-4 mr-2"}),"Parcourir les produits"]})})]}):s.jsx("div",{className:"space-y-4",children:_().map(w=>s.jsx(ae,{className:"hover:shadow-md transition-shadow",children:s.jsxs(oe,{className:"p-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs("h3",{className:"font-semibold",children:["Commande #",w.id.slice(0,8)]}),N(w.status)]}),s.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[s.jsx(Hs,{className:"w-3 h-3"}),sr(new Date(w.createdAt),"dd MMMM yyyy",{locale:Mr})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold",children:j(w.total)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[w.items.length," article",w.items.length>1?"s":""]})]}),s.jsx(Y,{asChild:!0,children:s.jsxs(Te,{to:`/order/${w.id}`,children:["Détails",s.jsx(Ki,{className:"ml-1 w-4 h-4"})]})})]})]}),s.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[w.items.slice(0,4).map((y,E)=>s.jsx("div",{className:"flex-shrink-0",children:y.image?s.jsx("img",{src:y.image,alt:y.name,className:"w-16 h-16 object-cover rounded"}):s.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsx(pn,{className:"w-6 h-6 text-muted-foreground"})})},E)),w.items.length>4&&s.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsxs("span",{className:"text-sm font-medium",children:["+",w.items.length-4]})})]})]})},w.id))})}),s.jsx(un,{value:"active",className:"space-y-4",children:_().filter(w=>["pending","processing","shipped"].includes(w.status)).length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Vn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande en cours"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas de commandes en cours de traitement."})]}):s.jsx("div",{className:"space-y-4",children:_().filter(w=>["pending","processing","shipped"].includes(w.status)).map(w=>s.jsx(ae,{className:"hover:shadow-md transition-shadow",children:s.jsxs(oe,{className:"p-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs("h3",{className:"font-semibold",children:["Commande #",w.id.slice(0,8)]}),N(w.status)]}),s.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[s.jsx(Hs,{className:"w-3 h-3"}),sr(new Date(w.createdAt),"dd MMMM yyyy",{locale:Mr})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold",children:j(w.total)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[w.items.length," article",w.items.length>1?"s":""]})]}),s.jsx(Y,{asChild:!0,children:s.jsxs(Te,{to:`/order/${w.id}`,children:["Détails",s.jsx(Ki,{className:"ml-1 w-4 h-4"})]})})]})]}),s.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[w.items.slice(0,4).map((y,E)=>s.jsx("div",{className:"flex-shrink-0",children:y.image?s.jsx("img",{src:y.image,alt:y.name,className:"w-16 h-16 object-cover rounded"}):s.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsx(pn,{className:"w-6 h-6 text-muted-foreground"})})},E)),w.items.length>4&&s.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsxs("span",{className:"text-sm font-medium",children:["+",w.items.length-4]})})]})]})},w.id))})}),s.jsx(un,{value:"completed",className:"space-y-4",children:_().filter(w=>w.status==="delivered").length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Ct,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande terminée"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas encore de commandes livrées."})]}):s.jsx("div",{className:"space-y-4",children:_().filter(w=>w.status==="delivered").map(w=>s.jsx(ae,{className:"hover:shadow-md transition-shadow",children:s.jsxs(oe,{className:"p-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs("h3",{className:"font-semibold",children:["Commande #",w.id.slice(0,8)]}),N(w.status)]}),s.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[s.jsx(Hs,{className:"w-3 h-3"}),sr(new Date(w.createdAt),"dd MMMM yyyy",{locale:Mr})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold",children:j(w.total)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[w.items.length," article",w.items.length>1?"s":""]})]}),s.jsx(Y,{asChild:!0,children:s.jsxs(Te,{to:`/order/${w.id}`,children:["Détails",s.jsx(Ki,{className:"ml-1 w-4 h-4"})]})})]})]}),s.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[w.items.slice(0,4).map((y,E)=>s.jsx("div",{className:"flex-shrink-0",children:y.image?s.jsx("img",{src:y.image,alt:y.name,className:"w-16 h-16 object-cover rounded"}):s.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsx(pn,{className:"w-6 h-6 text-muted-foreground"})})},E)),w.items.length>4&&s.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsxs("span",{className:"text-sm font-medium",children:["+",w.items.length-4]})})]})]})},w.id))})}),s.jsx(un,{value:"cancelled",className:"space-y-4",children:_().filter(w=>w.status==="cancelled").length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Ed,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Aucune commande annulée"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas de commandes annulées."})]}):s.jsx("div",{className:"space-y-4",children:_().filter(w=>w.status==="cancelled").map(w=>s.jsx(ae,{className:"hover:shadow-md transition-shadow",children:s.jsxs(oe,{className:"p-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs("h3",{className:"font-semibold",children:["Commande #",w.id.slice(0,8)]}),N(w.status)]}),s.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[s.jsx(Hs,{className:"w-3 h-3"}),sr(new Date(w.createdAt),"dd MMMM yyyy",{locale:Mr})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold",children:j(w.total)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[w.items.length," article",w.items.length>1?"s":""]})]}),s.jsx(Y,{asChild:!0,children:s.jsxs(Te,{to:`/order/${w.id}`,children:["Détails",s.jsx(Ki,{className:"ml-1 w-4 h-4"})]})})]})]}),s.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[w.items.slice(0,4).map((y,E)=>s.jsx("div",{className:"flex-shrink-0",children:y.image?s.jsx("img",{src:y.image,alt:y.name,className:"w-16 h-16 object-cover rounded"}):s.jsx("div",{className:"w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsx(pn,{className:"w-6 h-6 text-muted-foreground"})})},E)),w.items.length>4&&s.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-muted rounded flex items-center justify-center",children:s.jsxs("span",{className:"text-sm font-medium",children:["+",w.items.length-4]})})]})]})},w.id))})})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:s.jsx(ae,{children:s.jsxs(oe,{className:"pt-6",children:[s.jsx(pn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Connectez-vous pour voir vos commandes"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous devez être connecté pour accéder à l'historique de vos commandes"}),s.jsx(Y,{onClick:()=>i("/auth"),children:"Se connecter"})]})})})},gle=()=>{var f,p;const{orderId:t}=Eb(),{getOrderById:e}=rS(),[n,r]=x.useState(null),[i,a]=x.useState(!0);x.useEffect(()=>{(async()=>{if(t)try{a(!0);const _=await e(t);r(_)}catch(_){console.error("Error loading order:",_)}finally{a(!1)}})()},[t,e]);const o=v=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(v),c=v=>({card:"Carte bancaire",paypal:"PayPal",transfer:"Virement bancaire",cash:"Paiement à la livraison"})[v]||v,u=()=>{const v=new Date,_=new Date(v);return _.setDate(v.getDate()+3),sr(_,"EEEE d MMMM",{locale:Mr})},h=()=>{navigator.clipboard.writeText(t||""),fe.success("Numéro de commande copié !")};return i?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx("div",{className:"max-w-3xl mx-auto",children:s.jsxs("div",{className:"animate-pulse space-y-4",children:[s.jsx("div",{className:"h-8 bg-muted rounded w-3/4 mx-auto"}),s.jsx("div",{className:"h-4 bg-muted rounded w-1/2 mx-auto"}),s.jsx("div",{className:"h-32 bg-muted rounded"}),s.jsx("div",{className:"h-64 bg-muted rounded"})]})})}):n?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"max-w-3xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Ct,{className:"w-8 h-8 text-green-600"})}),s.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Commande confirmée !"}),s.jsxs("p",{className:"text-muted-foreground",children:["Merci pour votre commande. Vous recevrez un email de confirmation à ",n.shipping.email,"."]})]}),s.jsxs(ae,{className:"mb-6",children:[s.jsx(qe,{children:s.jsxs(Ge,{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(pn,{className:"w-5 h-5"}),"Détails de la commande"]}),s.jsx(et,{className:"bg-green-100 text-green-800 border-green-200",children:n.status==="pending"?"En attente":n.status==="processing"?"En traitement":n.status==="shipped"?"Expédiée":n.status==="delivered"?"Livrée":"Confirmée"})]})}),s.jsx(oe,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Numéro de commande"}),s.jsxs("p",{className:"font-medium flex items-center gap-2",children:[t,s.jsx(Y,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:h,children:s.jsx(C4,{className:"h-3 w-3"})})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Date"}),s.jsx("p",{className:"font-medium",children:sr(new Date(n.createdAt),"dd/MM/yyyy")})]})]}),s.jsx(Bs,{}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Articles"}),s.jsx("div",{className:"space-y-3",children:n.items.map((v,_)=>s.jsxs("div",{className:"flex items-center gap-3",children:[v.image&&s.jsx("img",{src:v.image,alt:v.name,className:"w-16 h-16 object-cover rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:v.name}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantité: ",v.quantity]})]}),s.jsx("p",{className:"font-semibold",children:o(v.price*v.quantity)})]},_))})]}),s.jsx(Bs,{}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Sous-total"}),s.jsx("span",{children:o(n.total)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Livraison"}),s.jsx("span",{className:"text-green-600",children:"Gratuite"})]}),s.jsxs("div",{className:"flex justify-between font-bold",children:[s.jsx("span",{children:"Total"}),s.jsx("span",{children:o(n.total)})]})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[s.jsxs(ae,{children:[s.jsx(qe,{children:s.jsxs(Ge,{className:"flex items-center gap-2 text-base",children:[s.jsx(my,{className:"w-4 h-4"}),"Livraison"]})}),s.jsx(oe,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"font-medium",children:n.shipping.fullName}),s.jsx("p",{children:n.shipping.address}),s.jsxs("p",{children:[n.shipping.postalCode," ",n.shipping.city,", ",n.shipping.country]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:n.shipping.phone}),s.jsx("div",{className:"pt-2 mt-2 border-t",children:s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Hs,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("span",{children:["Livraison estimée: ",u()]})]})})]})})]}),s.jsxs(ae,{children:[s.jsx(qe,{children:s.jsxs(Ge,{className:"flex items-center gap-2 text-base",children:[s.jsx(Ln,{className:"w-4 h-4"}),"Paiement"]})}),s.jsx(oe,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"font-medium",children:c(n.payment.method)}),n.payment.method==="card"&&((f=n.payment.details)==null?void 0:f.cardNumber)&&s.jsxs("p",{children:["Carte se terminant par ",n.payment.details.cardNumber.slice(-4)]}),n.payment.method==="paypal"&&((p=n.payment.details)==null?void 0:p.paypalEmail)&&s.jsx("p",{children:n.payment.details.paypalEmail}),n.payment.method==="transfer"&&s.jsxs(Ut,{className:"mt-2",children:[s.jsx(Pn,{className:"h-4 w-4"}),s.jsx($t,{children:"Veuillez effectuer le virement dans les 48h pour valider votre commande."})]}),s.jsx("div",{className:"pt-2 mt-2 border-t",children:s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Vn,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("span",{children:["Statut: ",n.status==="pending"?"En attente":"Confirmé"]})]})})]})})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsx(Y,{variant:"outline",className:"flex-1",asChild:!0,children:s.jsxs(Te,{to:"/orders",children:[s.jsx(pn,{className:"mr-2 h-4 w-4"}),"Mes commandes"]})}),s.jsxs(Y,{variant:"outline",className:"flex-1",children:[s.jsx(Zs,{className:"mr-2 h-4 w-4"}),"Télécharger la facture"]}),s.jsx(Y,{className:"flex-1 bg-gradient-to-r from-primary to-secondary",asChild:!0,children:s.jsxs(Te,{to:"/listings",children:[s.jsx(mc,{className:"mr-2 h-4 w-4"}),"Continuer mes achats"]})})]}),s.jsxs("div",{className:"mt-8 text-center",children:[s.jsx("p",{className:"text-muted-foreground mb-2",children:"Besoin d'aide avec votre commande ?"}),s.jsxs("div",{className:"flex justify-center gap-4",children:[s.jsxs(Y,{variant:"link",className:"text-primary",children:[s.jsx(us,{className:"mr-2 h-4 w-4"}),"Contacter le support"]}),s.jsxs(Y,{variant:"link",className:"text-primary",children:[s.jsx(mm,{className:"mr-2 h-4 w-4"}),"FAQ"]})]})]})]})}):s.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:s.jsx(ae,{children:s.jsxs(oe,{className:"pt-6",children:[s.jsx(Pn,{className:"w-12 h-12 text-orange-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Commande introuvable"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Nous n'avons pas pu trouver les détails de cette commande."}),s.jsx(Y,{asChild:!0,children:s.jsx(Te,{to:"/orders",children:"Voir mes commandes"})})]})})})},vle=({id:t,name:e,description:n,price:r,currency:i,image:a,mode:o})=>{const{currentUser:c}=yn(),{addToCart:u}=ah(),h=ar(),f=(_,N)=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:N}).format(_),p=()=>{if(!c){fe.error("Veuillez vous connecter pour ajouter au panier"),h("/auth");return}u({id:t,name:e,price:r,image:a,seller:"StudyMarket",sellerId:"system",listingId:t})},v=()=>{if(!c){fe.error("Veuillez vous connecter pour acheter"),h("/auth");return}u({id:t,name:e,price:r,image:a,seller:"StudyMarket",sellerId:"system",listingId:t}),h("/checkout")};return s.jsxs(ae,{className:"bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 shadow-md dark:shadow-lg border border-gray-200 dark:border-gray-800 overflow-hidden transition-all hover:shadow-lg",children:[s.jsxs("div",{className:"aspect-video relative overflow-hidden",children:[a?s.jsx("img",{src:a,alt:e,className:"w-full h-full object-cover transition-transform hover:scale-105"}):s.jsx("div",{className:"w-full h-full bg-muted flex items-center justify-center",children:s.jsx(rG,{className:"w-12 h-12 text-muted-foreground"})}),s.jsx(et,{className:"absolute top-2 right-2 bg-primary",children:o==="subscription"?"Abonnement":"Achat unique"})]}),s.jsxs(qe,{children:[s.jsx(Ge,{children:e}),s.jsx(Tt,{children:n})]}),s.jsx(oe,{children:s.jsxs("div",{className:"text-2xl font-bold text-primary",children:[f(r,i),o==="subscription"&&s.jsx("span",{className:"text-sm text-muted-foreground ml-1",children:"/mois"})]})}),s.jsxs(DD,{className:"flex gap-2",children:[s.jsxs(Y,{variant:"outline",className:"flex-1",onClick:p,children:[s.jsx(xl,{className:"w-4 h-4 mr-2"}),"Ajouter"]}),s.jsx(Y,{className:"flex-1 bg-gradient-to-r from-primary to-secondary",onClick:v,children:"Acheter"})]})]})},S1=[{id:"prod_ST3q24zsLbS28p",name:"Bicyclette",description:"Vélo",priceId:"price_1RY7iN2XLhzYQhT9ErigqaGg",price:10,currency:"EUR",mode:"payment",image:"https://images.pexels.com/photos/100582/pexels-photo-100582.jpeg?auto=compress&cs=tinysrgb&w=800"}],xle=t=>S1.find(e=>e.priceId===t),yle="pk_test_51O5JqHLVDYKrxBIwIyiUQOmNk9HFZJKvBz6zJyRNBNjkKSGVEvZKEwlKnwL2JV8PmXVjWSHoZ9XQfKOiLkXGZ9Nh00wPxKdm9p";IL(yle);async function _le(){return{customer_id:"cus_mock123",subscription_id:"sub_mock123",subscription_status:"active",price_id:"price_1RY7iN2XLhzYQhT9ErigqaGg",current_period_start:Math.floor(Date.now()/1e3)-86400*15,current_period_end:Math.floor(Date.now()/1e3)+86400*15,cancel_at_period_end:!1,payment_method_brand:"visa",payment_method_last4:"4242"}}async function wle(){return[{order_id:"ord_mock123",checkout_session_id:"cs_mock123",payment_intent_id:"pi_mock123",amount_subtotal:1e3,amount_total:1e3,currency:"eur",payment_status:"paid",order_status:"completed",order_date:new Date().toISOString()}]}const ble=()=>{const{getCartItemCount:t}=ah(),e=ar(),n=t();return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs(Y,{variant:"ghost",onClick:()=>e(-1),className:"-ml-4",children:[s.jsx(dc,{className:"w-4 h-4 mr-2"}),"Retour"]}),s.jsxs("div",{className:"flex items-center justify-between mt-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(mc,{className:"w-8 h-8"}),"Boutique"]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Découvrez nos produits et services"})]}),n>0&&s.jsxs(Y,{onClick:()=>e("/cart"),className:"flex items-center gap-2",children:[s.jsx(xl,{className:"w-4 h-4"}),"Panier (",n,")"]})]})]}),!1,s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:S1.map(r=>s.jsx(vle,{id:r.id,name:r.name,description:r.description,price:r.price,currency:r.currency,image:r.image,mode:r.mode},r.id))}),S1.length===0&&s.jsx(ae,{className:"text-center py-12",children:s.jsxs(oe,{className:"pt-6",children:[s.jsx(pn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Aucun produit disponible"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Revenez bientôt pour découvrir nos nouveaux produits."})]})})]})},jle=()=>{const[t]=Cb(),e=ar(),{currentUser:n}=yn(),{clearCart:r}=ah(),[i,a]=x.useState(!0),[o,c]=x.useState(null),[u,h]=x.useState(null),[f,p]=x.useState(null),v=t.get("session_id"),_=t.get("type")==="subscription";x.useEffect(()=>{r();async function j(){if(n)try{if(a(!0),_){const w=await _le();c(w)}else{const y=(await wle())[0];h(y)}}catch(w){console.error("Error fetching checkout result:",w),p("Impossible de charger les détails de votre achat")}finally{a(!1)}}const S=setTimeout(()=>{j()},2e3);return()=>clearTimeout(S)},[n,_,v,r]);const N=()=>{if(_&&(o!=null&&o.price_id)){const j=xle(o.price_id);return j?j.name:"Abonnement"}else if(u)return"Commande";return"Achat"};return n?i?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"max-w-md mx-auto text-center",children:[s.jsx(qr,{className:"w-12 h-12 animate-spin text-primary mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Traitement de votre paiement..."}),s.jsx("p",{className:"text-muted-foreground",children:"Veuillez patienter pendant que nous confirmons votre transaction."})]})}):f?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"max-w-md mx-auto",children:[s.jsxs(Ut,{className:"border-red-200 bg-red-50",children:[s.jsx(Pn,{className:"h-4 w-4 text-red-600"}),s.jsx($t,{className:"text-red-800",children:f})]}),s.jsx("div",{className:"mt-4 text-center",children:s.jsx(Y,{asChild:!0,children:s.jsx(Te,{to:"/",children:"Retour à l'accueil"})})})]})}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"max-w-md mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Ct,{className:"w-8 h-8 text-green-600"})}),s.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Merci pour votre achat !"}),s.jsxs("p",{className:"text-muted-foreground",children:["Votre ",_?"abonnement":"commande"," a été confirmé",_?"":"e","."]})]}),s.jsxs(ae,{className:"mb-6",children:[s.jsx(qe,{children:s.jsxs(Ge,{className:"flex items-center gap-2",children:[_?s.jsx(Ln,{className:"w-5 h-5"}):s.jsx(pn,{className:"w-5 h-5"}),N()]})}),s.jsx(oe,{children:s.jsx("div",{className:"space-y-4",children:_&&o?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Statut:"}),s.jsx("span",{className:"font-medium",children:o.subscription_status==="active"?"Actif":o.subscription_status==="trialing"?"Période d'essai":o.subscription_status})]}),o.current_period_end&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Prochain renouvellement:"}),s.jsx("span",{className:"font-medium",children:new Date(o.current_period_end*1e3).toLocaleDateString("fr-FR")})]}),o.payment_method_brand&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Méthode de paiement:"}),s.jsxs("span",{className:"font-medium",children:[o.payment_method_brand.toUpperCase()," •••• ",o.payment_method_last4]})]})]}):u?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Numéro de commande:"}),s.jsx("span",{className:"font-medium",children:u.order_id})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Date:"}),s.jsx("span",{className:"font-medium",children:new Date(u.order_date).toLocaleDateString("fr-FR")})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Montant:"}),s.jsx("span",{className:"font-medium",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:u.currency}).format(u.amount_total/100)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Statut:"}),s.jsx("span",{className:"font-medium",children:u.order_status==="completed"?"Complété":u.order_status==="pending"?"En attente":u.order_status})]})]}):s.jsx("p",{children:"Merci pour votre achat. Vous recevrez un email de confirmation."})})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs(Ut,{className:"bg-blue-50 border-blue-200",children:[s.jsx(Hs,{className:"h-4 w-4 text-blue-600"}),s.jsx($t,{className:"text-blue-800",children:_?"Vous pouvez gérer votre abonnement à tout moment depuis votre compte.":"Vous recevrez un email de confirmation avec les détails de votre commande."})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsx(Y,{variant:"outline",className:"flex-1",asChild:!0,children:s.jsxs(Te,{to:"/orders",children:[s.jsx(pn,{className:"mr-2 h-4 w-4"}),"Mes commandes"]})}),s.jsx(Y,{className:"flex-1 bg-gradient-to-r from-primary to-secondary",asChild:!0,children:s.jsxs(Te,{to:"/products",children:[s.jsx(mc,{className:"mr-2 h-4 w-4"}),"Continuer mes achats",s.jsx(mm,{className:"ml-2 h-4 w-4"})]})})]})]})]})}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"max-w-md mx-auto",children:[s.jsxs(Ut,{className:"border-orange-200 bg-orange-50",children:[s.jsx(Pn,{className:"h-4 w-4 text-orange-600"}),s.jsx($t,{className:"text-orange-800",children:"Vous devez être connecté pour voir les détails de votre achat."})]}),s.jsx("div",{className:"mt-4 text-center",children:s.jsx(Y,{onClick:()=>e("/auth"),children:"Se connecter"})})]})})};delete uh.Icon.Default.prototype._getIconUrl;uh.Icon.Default.mergeOptions({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"});function Nle({position:t,onChange:e}){function n(){return CN({click(r){e([r.latlng.lat,r.latlng.lng])}}),t?s.jsx(TN,{position:t}):null}return s.jsxs(kN,{center:t||[48.8584,2.2945],zoom:15,style:{height:300,width:"100%"},children:[s.jsx(PN,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"© OpenStreetMap contributors"}),s.jsx(n,{})]})}const Sle=[{value:"electronics",label:"Électronique"},{value:"books",label:"Livres & Cours"},{value:"furniture",label:"Mobilier"},{value:"clothing",label:"Vêtements"},{value:"services",label:"Services"},{value:"housing",label:"Logement"},{value:"jobs",label:"Jobs & Stages"},{value:"donations",label:"Dons"},{value:"exchange",label:"Troc"}],Ele=()=>{const{id:t}=Eb(),e=ar(),{currentUser:n}=yn(),{fetchListingById:r,updateListing:i,currentListing:a,loading:o}=ap(),[c,u]=x.useState({title:"",description:"",price:"",images:[]}),[h,f]=x.useState([]),[p,v]=x.useState(!1),[_,N]=x.useState(null),[j,S]=x.useState(""),[w,y]=x.useState([]),[E,I]=x.useState(""),[D,B]=x.useState(""),[R,F]=x.useState(null),[V,k]=x.useState(!1);x.useEffect(()=>{t&&r(t)},[t,r]),x.useEffect(()=>{var U;a&&(u({title:a.title||"",description:a.description||"",price:((U=a.price)==null?void 0:U.toString())||"",images:a.images||[]}),S(a.category||""),y(a.tags||[]),B(a.meetingLocation||""),a.coordinates&&F(a.coordinates))},[a]);const M=U=>{u({...c,[U.target.name]:U.target.value})},O=U=>{if(!U.target.files)return;const q=Array.from(U.target.files);f(H=>[...H,...q])},P=U=>{u({...c,images:c.images.filter((q,H)=>H!==U)})},W=U=>{f(h.filter((q,H)=>H!==U))},X=()=>{E.trim()&&!w.includes(E.trim())&&w.length<5&&(y([...w,E.trim()]),I(""))},ee=U=>{y(w.filter(q=>q!==U))},Z=async U=>{if(U.preventDefault(),!(!t||!n)){v(!0);try{let q=[];h.length>0&&(q=await Promise.all(h.map(Q=>Cle(Q,n.uid))));const H=[...c.images,...q];await i(t,{...c,price:parseFloat(c.price),images:H,category:j,tags:w,meetingLocation:D,coordinates:R}),e(`/listing/${t}`)}catch{N("Erreur lors de la mise à jour de l'annonce")}finally{v(!1)}}};return o?s.jsx("div",{children:"Chargement..."}):a?_?s.jsx("div",{className:"text-red-500",children:_}):s.jsx("form",{onSubmit:Z,className:"max-w-lg mx-auto mt-10",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 border border-gray-100",children:[s.jsx("h2",{className:"text-2xl font-bold mb-8 text-center",children:"Modifier mon annonce"}),s.jsxs("div",{className:"mb-5",children:[s.jsx(be,{htmlFor:"title",className:"block mb-1 text-gray-700",children:"Titre"}),s.jsx(We,{id:"title",name:"title",value:c.title,onChange:M,placeholder:"Titre",className:"w-full"})]}),s.jsxs("div",{className:"mb-5",children:[s.jsx(be,{htmlFor:"description",className:"block mb-1 text-gray-700",children:"Description"}),s.jsx(Qs,{id:"description",name:"description",value:c.description,onChange:M,placeholder:"Description",className:"w-full",rows:4})]}),s.jsxs("div",{className:"mb-5",children:[s.jsx(be,{htmlFor:"price",className:"block mb-1 text-gray-700",children:"Prix (€)"}),s.jsx(We,{id:"price",name:"price",value:c.price,onChange:M,placeholder:"Prix",type:"number",min:0,className:"w-full"})]}),s.jsxs("div",{className:"mb-5",children:[s.jsx(be,{htmlFor:"category",className:"block mb-1 text-gray-700",children:"Catégorie"}),s.jsxs("select",{id:"category",name:"category",value:j,onChange:U=>S(U.target.value),className:"w-full border rounded px-3 py-2 bg-gray-50",required:!0,children:[s.jsx("option",{value:"",children:"Sélectionnez une catégorie"}),Sle.map(U=>s.jsx("option",{value:U.value,children:U.label},U.value))]})]}),s.jsxs("div",{className:"mb-5",children:[s.jsx(be,{htmlFor:"meetingLocation",className:"block mb-1 text-gray-700",children:"Point de rencontre"}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx(We,{id:"meetingLocation",name:"meetingLocation",value:D,onChange:U=>B(U.target.value),placeholder:"Ex: Bibliothèque universitaire, Hall principal...",className:"flex-1"}),s.jsx(Y,{type:"button",variant:"outline",onClick:async()=>{if(!navigator.geolocation)return alert("Géolocalisation non supportée");k(!0),navigator.geolocation.getCurrentPosition(async U=>{const{latitude:q,longitude:H}=U.coords;F([q,H]);const Q=await aT(q,H);B(Q),k(!1)},()=>k(!1))},disabled:V,children:"📍"})]}),s.jsx("div",{className:"mt-3",children:s.jsx(Nle,{position:R,onChange:async U=>{F(U);const q=await aT(U[0],U[1]);B(q)}})})]}),s.jsxs("div",{className:"mb-5",children:[s.jsx(be,{className:"block mb-1 text-gray-700",children:"Tags (max 5)"}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:w.map(U=>s.jsxs("span",{className:"bg-gray-100 rounded px-2 py-1 flex items-center gap-1 text-sm",children:[U,s.jsx(Y,{type:"button",size:"icon",variant:"ghost",className:"w-4 h-4 p-0",onClick:()=>ee(U),children:"×"})]},U))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(We,{placeholder:"Ajouter un tag...",value:E,onChange:U=>I(U.target.value),onKeyDown:U=>U.key==="Enter"&&(U.preventDefault(),X()),className:"flex-1"}),s.jsx(Y,{type:"button",onClick:X,disabled:!E.trim()||w.length>=5,children:"Ajouter"})]})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx(be,{className:"block mb-1 text-gray-700",children:"Photos"}),s.jsxs("div",{className:"flex flex-wrap gap-4 mt-2",children:[c.images.map((U,q)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:U,alt:`photo-${q}`,className:"w-20 h-20 object-cover rounded-lg border border-gray-200"}),s.jsx(Y,{type:"button",size:"icon",variant:"destructive",className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition",onClick:()=>P(q),children:"×"})]},q)),h.map((U,q)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:URL.createObjectURL(U),alt:`new-photo-${q}`,className:"w-20 h-20 object-cover rounded-lg border border-gray-200"}),s.jsx(Y,{type:"button",size:"icon",variant:"destructive",className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition",onClick:()=>W(q),children:"×"})]},q)),s.jsxs("label",{className:"w-20 h-20 flex items-center justify-center border-2 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100 transition",children:[s.jsx("span",{className:"text-2xl text-gray-400",children:"+"}),s.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:O,disabled:p})]})]})]}),s.jsx(Y,{type:"submit",className:"w-full",disabled:p,children:p?"Enregistrement...":"Enregistrer les modifications"}),_&&s.jsx("div",{className:"text-red-500 text-center mt-2",children:_})]})}):s.jsx("div",{className:"text-red-500",children:"Annonce introuvable"})};async function Cle(t,e){const n=Date.now(),r=`listings/${e}/${n}_${t.name}`,i=Lj(Vj,r),a=await Dj(i,t);return await Oj(a.ref)}async function aT(t,e){return(await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${t}&lon=${e}`)).json()).display_name}async function kle(t){try{return(await(await fetch(`https://remotive.com/api/remote-jobs?search=${encodeURIComponent(t)}`)).json()).jobs.map(r=>({id:r.id.toString(),title:r.title,company:r.company_name,company_logo:r.company_logo_url,location:r.candidate_required_location,description:r.description,url:r.url,source:"Remotive",publication_date:r.publication_date,contract_type:r.job_type,remote:r.remote,tags:r.tags}))}catch(e){return console.error("Erreur Remotive:",e),[]}}async function Tle(t){try{return((await(await fetch("https://jooble.org/api/167d4120-b9bf-4c78-b340-83d55ef013fc",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keywords:t,location:"France"})})).json()).jobs||[]).map((r,i)=>({id:r.id||`jooble-${i}`,title:r.title,company:r.company,location:r.location,description:r.snippet,url:r.link,source:"Jooble",publication_date:r.date}))}catch(e){return console.error("Erreur Jooble:",e),[]}}async function Ple(t){try{return((await(await fetch(`https://jsearch.p.rapidapi.com/search?query=${encodeURIComponent(t)}&location=France`,{headers:{"X-RapidAPI-Key":"685dd8c263msh87410947d828a2ep1772d3jsn329584c927b7","X-RapidAPI-Host":"jsearch.p.rapidapi.com"}})).json()).data||[]).map(r=>({id:r.job_id,title:r.job_title,company:r.employer_name,company_logo:r.employer_logo,location:r.job_city||r.job_country,description:r.job_description,url:r.job_apply_link,source:"JSearch",publication_date:r.job_posted_at_datetime_utc,contract_type:r.job_employment_type,remote:r.job_is_remote,tags:r.job_tags}))}catch(e){return console.error("Erreur JSearch:",e),[]}}async function Ile(t){try{const e=`https://api.adzuna.com/v1/api/jobs/fr/search/1?app_id=f9025803&app_key=70805f677e7ed58080609ad89bd18a47&results_per_page=20&what=${encodeURIComponent(t)}&where=France`;return((await(await fetch(e)).json()).results||[]).map(i=>{var o,c;const a=i;return{id:a.id,title:a.title,company:(o=a.company)==null?void 0:o.display_name,location:(c=a.location)==null?void 0:c.display_name,description:a.description,url:a.redirect_url,source:"Adzuna",publication_date:a.created,contract_type:a.contract_type}})}catch(e){return console.error("Erreur Adzuna:",e),[]}}async function Ale(t){try{const e=`https://www.themuse.com/api/public/jobs?location=France&page=1&category=${encodeURIComponent(t)}`;return((await(await fetch(e)).json()).results||[]).map(i=>{var o,c;const a=i;return{id:a.id,title:a.name,company:(o=a.company)==null?void 0:o.name,location:Array.isArray(a.locations)?a.locations.map(u=>u.name).join(", "):"",description:a.contents,url:(c=a.refs)==null?void 0:c.landing_page,source:"The Muse",publication_date:a.publication_date}})}catch(e){return console.error("Erreur The Muse:",e),[]}}async function Rle(t){try{const e=`https://linkedin-job-search-api.p.rapidapi.com/active-jb-7d?limit=10&offset=0&location_filter=France&keywords=${encodeURIComponent(t)}`;return((await(await fetch(e,{headers:{"X-RapidAPI-Key":"685dd8c263msh87410947d828a2ep1772d3jsn329584c927b7","X-RapidAPI-Host":"linkedin-job-search-api.p.rapidapi.com"}})).json()).jobs||[]).map((i,a)=>{const o=i;return{id:o.job_id||`linkedin-${a}`,title:o.title,company:o.company,location:o.location,description:o.description,url:o.job_url,source:"LinkedIn",publication_date:o.posted_date}})}catch(e){return console.error("Erreur LinkedIn:",e),[]}}async function z5(t){try{console.log("🔍 Recherche Algolia avec query:",t||"*");const e="Q3E5Y56YF4",n="ff26b6f0fa03bc6384566ea42dfe0ab4",i=`https://${e}-dsn.algolia.net/1/indexes/study-market-jobs/query`,a={query:t||"*",hitsPerPage:1e3,page:0,attributesToRetrieve:["*"],typoTolerance:!0,ignorePlurals:!0,removeStopWords:!0,analyticsTags:["job-search"]};console.log("🧪 Recherche dans l'index: study-market-jobs"),console.log("🔗 URL:",i),console.log("📊 Récupération de toutes les offres disponibles...");let o=[],c=0;const u=10;for(;c<u;){const f={...a,page:c},p=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json","X-Algolia-API-Key":n,"X-Algolia-Application-Id":e},body:JSON.stringify(f)});if(!p.ok)throw new Error(`HTTP error! status: ${p.status}`);const v=await p.json(),_=v.hits||[],N=v.nbHits||0;if(console.log(`📄 Page ${c+1}: ${_.length} offres récupérées`),_.length===0){console.log("✅ Plus d'offres à récupérer");break}if(o=o.concat(_),o.length>=N){console.log(`✅ Toutes les ${N} offres récupérées`);break}c++}return console.log(`📊 Total: ${o.length} offres récupérées depuis l'index "study-market-jobs"`),o.length===0?(console.log("ℹ️ Aucun résultat trouvé dans l'index study-market-jobs"),[]):(console.log("🔍 Structure du premier hit:",JSON.stringify(o[0],null,2)),o.map((f,p)=>{const v=f,_=()=>v.objectID||v.id||v.job_id||v._id||`algolia-${p}`,N=()=>v.title||v.job_title||v.position||v.name||"Titre non spécifié",j=()=>v.company||v.company_name||v.employer||v.employer_name||"Entreprise non spécifiée",S=()=>v.location||v.city||v.country||v.address||"France",w=()=>v.description||v.summary||v.job_description||v.content||"",y=()=>v.url||v.apply_url||v.job_url||v.link||"#",E=()=>v.publication_date||v.date||v.posted_date||v.created_at||"",I=()=>v.contract_type||v.job_type||v.employment_type||v.type||"";return{id:_(),title:N(),company:j(),company_logo:v.company_logo||v.logo||"",location:S(),description:w(),url:y(),source:"Algolia",publication_date:E(),contract_type:I(),remote:!!(v.remote||v.is_remote||v.remote_ok),tags:Array.isArray(v.tags)?v.tags:Array.isArray(v.skills)?v.skills:[]}}))}catch(e){throw console.error("❌ Erreur complète Algolia:",e),new Error(`Erreur Algolia: ${e instanceof Error?e.message:"Erreur inconnue"}`)}}async function Mle(t){console.log("🚀 Début de la recherche pour:",t);const e=[{name:"Remotive",func:kle},{name:"Jooble",func:Tle},{name:"JSearch",func:Ple},{name:"Adzuna",func:Ile},{name:"The Muse",func:Ale},{name:"LinkedIn",func:Rle},{name:"Algolia",func:z5}],r=(await Promise.allSettled(e.map(async a=>{console.log(`🔄 Appel API ${a.name}...`);try{const o=await a.func(t);return console.log(`✅ ${a.name}: ${o.length} offres récupérées`),o}catch(o){return console.error(`❌ ${a.name} a échoué:`,o),[]}}))).filter(a=>a.status==="fulfilled").flatMap(a=>a.value||[]);console.log(`📋 Total final: ${r.length} offres de ${e.length} sources`);const i=r.reduce((a,o)=>(a[o.source||"unknown"]=(a[o.source||"unknown"]||0)+1,a),{});return console.log("📊 Résumé par source:",i),r}function sS(t){return Object.fromEntries(Object.entries(t).filter(([,e])=>e!==void 0))}async function Dle(t,e){await gl(Ft(De,"users",t,"favoriteJobs"),sS(e))}async function oT(t){const e=vn(Ft(De,"users",t,"favoriteJobs"));return(await On(e)).docs.map(r=>({...r.data(),id:r.id}))}async function Ole(t,e){const n=XR(De),r=Ft(De,"users",t,"searchedJobs");e.forEach(i=>{const a=xt(r);n.set(a,sS(i))}),await n.commit()}async function Lle(t,e,n){const r=FR(),i=xt(r,"jobOffersCache",t),a=new Date().toISOString(),o=Array.isArray(n)?n.map(c=>sS(c)):[];await sc(i,{[e]:{jobs:o,fetchedAt:a}},{merge:!0})}const Fle=({image:t,title:e,subtitle:n,location:r,date:i,isFavorite:a=!1,onFavoriteToggle:o,url:c,companyName:u})=>{const h=()=>{c&&window.open(c,"_blank","noopener,noreferrer")},f=v=>{v.stopPropagation(),o&&o()},p=v=>{v.stopPropagation()};return s.jsxs("div",{className:"job-card group relative flex flex-col rounded-[12px] bg-white dark:bg-gray-900 shadow-md dark:shadow-lg overflow-hidden transition-all duration-300 ease-in-out hover:scale-[1.02] hover:shadow-2xl min-h-[320px] md:min-h-[420px] font-sans cursor-pointer",style:{minHeight:320},onClick:h,children:[s.jsxs("div",{className:"card-image relative w-full aspect-[16/9] overflow-hidden",style:{minHeight:160,maxHeight:180},children:[s.jsx("img",{src:t,alt:e,className:"w-full h-full object-cover",style:{objectFit:"cover",minHeight:160,maxHeight:180},onError:v=>{const _=v.target;_.src.endsWith("/assets/job-default.jpg")||(_.src="/assets/job-default.jpg")}}),s.jsx("div",{className:"overlay absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-black/70 pointer-events-none"}),s.jsxs("div",{className:"absolute top-2 right-2 md:top-3 md:right-3 flex flex-col gap-1 md:gap-2 z-10",children:[s.jsx("button",{className:"bg-white/90 dark:bg-gray-800/90 rounded-full p-1.5 md:p-2 shadow hover:bg-blue-100 dark:hover:bg-blue-900 transition","aria-label":a?"Retirer des favoris":"Ajouter aux favoris",onClick:f,children:s.jsx(Rr,{className:a?"fill-red-500 text-red-500":"text-blue-400 dark:text-blue-300",strokeWidth:2,size:18,"aria-hidden":"true"})}),s.jsx("button",{className:"bg-white/90 dark:bg-gray-800/90 rounded-full p-1.5 md:p-2 shadow hover:bg-blue-100 dark:hover:bg-blue-900 transition","aria-label":"Partager",onClick:p,children:s.jsx(fy,{className:"text-blue-400 dark:text-blue-300",strokeWidth:2,size:18,"aria-hidden":"true"})})]})]}),u&&s.jsxs("div",{className:"flex items-center gap-1 md:gap-2 mb-2 px-3 md:px-5 pt-3",children:[s.jsx(N4,{className:"w-4 h-4 md:w-5 md:h-5 text-blue-400 dark:text-blue-300","aria-hidden":"true"}),s.jsx("span",{className:"text-gray-700 dark:text-gray-200 font-medium text-xs md:text-sm",children:u})]}),s.jsxs("div",{className:"card-content flex-1 flex flex-col px-3 md:px-5 py-2 text-left bg-white/80 dark:bg-gray-900/80 backdrop-blur-md justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"job-title font-bold text-base md:text-lg mb-1 leading-tight break-words font-sans text-gray-900 dark:text-gray-100",children:e}),n&&s.jsx("div",{className:"text-sm font-semibold text-blue-700 dark:text-blue-300 mb-2 bg-blue-50 dark:bg-blue-900 px-2 py-1 rounded",children:n})]}),s.jsxs("div",{className:"flex items-center gap-4 mt-4 w-full",children:[s.jsxs("div",{className:"flex items-center text-gray-500 dark:text-gray-300 text-sm gap-2",children:[s.jsx(Ar,{className:"w-4 h-4 text-blue-400 dark:text-blue-300","aria-hidden":"true"}),s.jsx("span",{children:r})]}),i&&s.jsxs("div",{className:"flex items-center text-xs text-gray-400 ml-auto",children:[s.jsx(Hs,{className:"w-4 h-4 mr-1","aria-hidden":"true"}),i]})]})]})]})},Vle="3eFVqLX19mBYTUVCMxhpPH156xmJ8K5ccP5TBwH5R2h90pHMmgb638AS";async function zle(t){const e=await fetch(`https://api.pexels.com/v1/search?query=${encodeURIComponent(t)}&per_page=1`,{headers:{Authorization:Vle}});if(!e.ok)return null;const n=await e.json();return n.photos&&n.photos.length>0?n.photos[0].src.large:null}function Ule(t){const e=typeof t=="string"?new Date(t):t,r=Math.floor((new Date().getTime()-e.getTime())/(1e3*60*60*24));return r===0?"aujourd'hui":r===1?"hier":r===2?"avant-hier":e.toLocaleDateString("fr-FR")}const rf=12;function $le(t){var c,u;const e={marketing:"marketing, digital, social media, office",developpeur:"developer, code, computer, laptop, programming, team",developer:"developer, code, computer, laptop, programming, team",business:"business, meeting, office, people, suit",stage:"internship, young people, learning, teamwork",alternance:"apprenticeship, student, learning, office",cdi:"career, professional, office, team",remote:"remote work, home office, laptop",design:"design, creative, digital, graphics",data:"data, analytics, charts, computer",sales:"sales, business, meeting, handshake"};let n="professional, office, business";const r=((c=t.title)==null?void 0:c.toLowerCase())||"",i=((u=t.contract_type)==null?void 0:u.toLowerCase())||"";for(const h in e)if(r.includes(h)||i.includes(h)){n=e[h];break}const a=t.location?`, ${t.location}`:"",o=t.company?`, ${t.company}`:"";return`${t.title}${o}${a}, ${n}`.trim()}const Ble=()=>{const[t,e]=x.useState(""),[n,r]=x.useState([]),[i,a]=x.useState(!1),{currentUser:o}=yn(),[c,u]=x.useState([]),[h,f]=x.useState(1),[p,v]=x.useState({}),[_,N]=x.useState(null),[j,S]=x.useState(!1),[w,y]=x.useState(null);x.useEffect(()=>{(async()=>{if(o)try{const M=await oT(o.uid);u(M)}catch(M){console.error("Erreur lors du chargement des favoris:",M)}})()},[o]),x.useEffect(()=>{(async()=>{try{console.log("🧪 Test de connexion Algolia...");const M=await z5("");console.log("✅ Test Algolia réussi:",M.length,"offres trouvées"),M.length===0&&console.log("⚠️ Aucune offre dans l'index Algolia")}catch(M){console.error("❌ Erreur test Algolia:",M)}})()},[]),x.useEffect(()=>{if(n.length===0)return;(async()=>{const M={},O={},P=(h-1)*rf,W=P+rf,X=n.slice(P,W);for(const ee of X){const Z=$le(ee),U=ee.id+ee.source;if(p[U]){M[U]=p[U];continue}if(O[Z]){M[U]=O[Z];continue}try{const q=await zle(Z);q?(O[Z]=q,M[U]=q):M[U]="/assets/job-default.jpg"}catch(q){console.warn("Erreur chargement image pour",ee.title,q),M[U]="/assets/job-default.jpg"}}v(ee=>({...ee,...M}))})()},[n,h,p]),x.useEffect(()=>{E("")},[]);const E=async k=>{const M=k??t;a(!0),N(null),S(!0);try{console.log("🔍 Recherche avec query:",M);const O=await Mle(M);console.log("📊 Résultats par source:");const P=O.reduce((W,X)=>(W[X.source||"unknown"]=(W[X.source||"unknown"]||0)+1,W),{});if(console.table(P),r(O),f(1),o&&O.length>0)try{await Ole(o.uid,O);const W={};for(const X of O){const ee=X.source||"unknown";W[ee]||(W[ee]=[]),W[ee].push(X)}for(const X in W)await Lle(o.uid,X,W[X])}catch(W){console.error("Erreur Firestore:",W)}O.length===0&&N("Aucune offre trouvée pour cette recherche. Essayez avec des mots-clés différents.")}catch(O){console.error("❌ Erreur lors de la recherche:",O),N("Erreur lors de la recherche : "+(O instanceof Error?O.message:String(O)))}finally{a(!1)}},I=async k=>{if(!o){alert("Vous devez être connecté pour ajouter aux favoris.");return}try{if(c.some(O=>O.id===k.id&&O.source===k.source)){alert("Cette offre est déjà dans vos favoris !");return}await Dle(o.uid,k),u(O=>[...O,k]),alert("Offre ajoutée aux favoris !")}catch(M){console.error("Erreur ajout favori:",M),alert("Erreur lors de l'ajout aux favoris.")}},D=async()=>{if(!o){alert("Vous devez être connecté pour voir vos favoris.");return}try{const k=await oT(o.uid);u(k),console.log("Favoris chargés:",k.length)}catch(k){console.error("Erreur chargement favoris:",k),alert("Erreur lors du chargement des favoris.")}},B=w?n.filter(k=>(k.source||"unknown")===w):n,R=Math.ceil(B.length/rf),F=B.slice((h-1)*rf,h*rf),V=n.reduce((k,M)=>{const O=M.source||"unknown";return k[O]=(k[O]||0)+1,k},{});return s.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 py-4 bg-gray-50 dark:bg-gray-950 min-h-screen",children:[s.jsx("h1",{className:"text-2xl font-bold mb-4 text-gray-900 dark:text-gray-100",children:"Recherche d'emploi"}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-2 mb-4",children:[s.jsx("input",{className:"border rounded px-3 py-2 flex-1 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 border-gray-300 dark:border-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",value:t,onChange:k=>e(k.target.value),placeholder:"Ex: développeur, marketing, designer...",onKeyPress:k=>k.key==="Enter"&&E()}),s.jsx("button",{className:"bg-blue-600 dark:bg-blue-700 text-white px-4 py-2 rounded hover:bg-blue-700 dark:hover:bg-blue-800 transition disabled:opacity-50",onClick:()=>E(),disabled:i,children:i?"Recherche...":"Tout rechercher"}),s.jsxs("button",{onClick:D,className:"bg-yellow-500 dark:bg-yellow-600 text-white px-4 py-2 rounded hover:bg-yellow-600 dark:hover:bg-yellow-700 transition",children:["Mes favoris (",c.length,")"]})]}),j&&s.jsxs("div",{className:"mb-4 p-4 bg-white dark:bg-gray-800 rounded-lg shadow",children:[s.jsxs("div",{className:"text-gray-600 dark:text-gray-300 font-medium mb-2",children:[n.length," offres trouvées"]}),Object.keys(V).length>0&&s.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[s.jsxs("button",{className:`text-xs px-2 py-1 rounded ${w?"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300":"bg-blue-200 text-blue-900 font-bold"}`,onClick:()=>{y(null),f(1)},children:["Tous: ",n.length]}),Object.entries(V).map(([k,M])=>s.jsxs("button",{className:`text-xs px-2 py-1 rounded ${w===k?"bg-blue-500 text-white font-bold":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,onClick:()=>{y(k),f(1)},children:[k,": ",M]},k))]})]}),F.length>0&&s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 md:gap-6 mb-6",children:F.map(k=>s.jsx(Fle,{image:p[k.id+k.source]||"/assets/job-default.jpg",companyName:k.company||void 0,title:k.title||"Titre non spécifié",subtitle:k.contract_type,location:k.location||"Non spécifié",date:k.publication_date?Ule(k.publication_date):void 0,isFavorite:c.some(M=>M.id===k.id&&M.source===k.source),onFavoriteToggle:()=>I(k),url:k.url},`${k.id}-${k.source}`))}),R>1&&s.jsxs("div",{className:"flex justify-center items-center gap-1 md:gap-2 mb-6 overflow-x-auto px-1 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:[s.jsx("button",{className:"px-3 py-1 rounded border bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 border-gray-300 dark:border-gray-700 disabled:opacity-50",onClick:()=>f(h-1),disabled:h===1,children:"Précédent"}),Array.from({length:R}).map((k,M)=>{const O=M+1,P=O===h;return O===1||O===2||O===R||O===R-1||Math.abs(O-h)<=1?s.jsx("button",{className:`px-3 py-1 rounded border ${P?"bg-blue-600 text-white font-bold":"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 border-gray-300 dark:border-gray-700"} transition`,onClick:()=>f(O),disabled:P,children:O},O):O===3&&h>5||O===R-2&&h<R-4?s.jsx("span",{children:"..."},O):null}),s.jsx("button",{className:"px-3 py-1 rounded border bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 border-gray-300 dark:border-gray-700 disabled:opacity-50",onClick:()=>f(h+1),disabled:h===R,children:"Suivant"})]}),c.length>0&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[s.jsxs("h2",{className:"font-bold text-xl mb-4 text-gray-900 dark:text-gray-100",children:["Mes offres favorites (",c.length,")"]}),s.jsx("div",{className:"space-y-4",children:c.map(k=>s.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900 rounded-lg shadow p-4 border border-yellow-200 dark:border-yellow-700",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-1",children:k.title}),s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:[k.company," — ",k.location]}),s.jsxs("div",{className:"flex gap-2",children:[k.contract_type&&s.jsx("span",{className:"text-xs bg-blue-100 dark:bg-blue-800 text-blue-700 dark:text-blue-300 px-2 py-1 rounded",children:k.contract_type}),s.jsx("span",{className:"text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-2 py-1 rounded",children:k.source})]})]}),s.jsx("div",{className:"flex gap-2 ml-4",children:s.jsx("a",{href:k.url,target:"_blank",rel:"noopener noreferrer",className:"bg-blue-500 dark:bg-blue-700 text-white px-3 py-2 rounded hover:bg-blue-700 dark:hover:bg-blue-800 transition text-sm",children:"Voir l'offre"})})]})},`fav-${k.id}-${k.source}`))})]}),n.length===0&&!i&&j&&s.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400 mt-8 bg-white dark:bg-gray-800 rounded-lg p-8",children:[s.jsx("p",{className:"text-lg mb-2",children:"Aucune offre trouvée"}),s.jsx("p",{className:"text-sm",children:"Essayez avec des mots-clés différents ou vérifiez votre configuration API."})]}),!j&&s.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400 mt-8 bg-white dark:bg-gray-800 rounded-lg p-8",children:[s.jsx("p",{className:"text-lg mb-2",children:"Commencez votre recherche"}),s.jsx("p",{className:"text-sm",children:`Saisissez des mots-clés et cliquez sur "Rechercher" pour trouver des offres d'emploi.`})]}),_&&s.jsx("div",{className:"text-center text-red-500 dark:text-red-400 mt-8 bg-red-50 dark:bg-red-900/20 rounded-lg p-6 border border-red-200 dark:border-red-800",children:s.jsx("p",{className:"font-semibold text-base",children:_})}),i&&s.jsx("div",{className:"text-center mt-8",children:s.jsxs("div",{className:"inline-flex items-center text-blue-600 dark:text-blue-400",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-current mr-3"}),"Recherche en cours..."]})})]})};function Wle({children:t}){const[e,n]=Pe.useState(null);return Pe.useEffect(()=>{const r=i=>{n(i.error||new Error(i.message))};return window.addEventListener("error",r),()=>window.removeEventListener("error",r)},[]),e?s.jsxs("div",{style:{color:"red",padding:"2rem",textAlign:"center"},children:["Une erreur est survenue : ",e.message]}):s.jsx(s.Fragment,{children:t})}function qle(){return s.jsx(K9,{attribute:"class",defaultTheme:"light",enableSystem:!0,children:s.jsx(QH,{children:s.jsxs(U9,{children:[s.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[s.jsx(iJ,{}),s.jsx("main",{className:"flex-1 pt-16",children:s.jsx(Wle,{children:s.jsxs(R9,{children:[s.jsx(mn,{path:"/",element:s.jsx(wte,{})}),s.jsx(mn,{path:"/listings",element:s.jsx(one,{})}),s.jsx(mn,{path:"/listing/:id",element:s.jsx(uie,{})}),s.jsx(mn,{path:"/auth",element:s.jsx(hle,{})}),s.jsx(mn,{path:"/help",element:s.jsx(Roe,{})}),s.jsx(mn,{path:"/safety",element:s.jsx(Loe,{})}),s.jsx(mn,{path:"/cart",element:s.jsx(fle,{})}),s.jsx(mn,{path:"/products",element:s.jsx(ble,{})}),s.jsx(mn,{path:"/checkout/success",element:s.jsx(jle,{})}),s.jsx(mn,{path:"/checkout",element:s.jsx(ci,{children:s.jsx(mle,{})})}),s.jsx(mn,{path:"/orders",element:s.jsx(ci,{children:s.jsx(ple,{})})}),s.jsx(mn,{path:"/order-confirmation/:orderId",element:s.jsx(ci,{children:s.jsx(gle,{})})}),s.jsx(mn,{path:"/create",element:s.jsx(ci,{children:s.jsx(Dae,{})})}),s.jsx(mn,{path:"/profile",element:s.jsx(ci,{children:s.jsx(Vae,{})})}),s.jsx(mn,{path:"/settings",element:s.jsx(ci,{children:s.jsx(Yae,{})})}),s.jsx(mn,{path:"/impact",element:s.jsx(ci,{children:s.jsx(ioe,{})})}),s.jsx(mn,{path:"/saved-searches",element:s.jsx(ci,{children:s.jsx(ooe,{})})}),s.jsx(mn,{path:"/favorites",element:s.jsx(ci,{children:s.jsx(uoe,{})})}),s.jsx(mn,{path:"/payments",element:s.jsx(ci,{children:s.jsx(doe,{})})}),s.jsx(mn,{path:"/messages",element:s.jsx(ci,{children:s.jsx(Qoe,{})})}),s.jsx(mn,{path:"/edit-listing/:id",element:s.jsx(Ele,{})}),s.jsx(mn,{path:"/jobs",element:s.jsx(Ble,{})}),s.jsx(mn,{path:"*",element:s.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:"Page non trouvée (404)"})})]})})}),s.jsx(oJ,{})]}),s.jsx($8,{position:"top-right",toastOptions:{duration:4e3,style:{background:"hsl(var(--background))",color:"hsl(var(--foreground))",border:"1px solid hsl(var(--border))"}}})]})})})}_I(document.getElementById("root")).render(s.jsx(x.StrictMode,{children:s.jsx(qle,{})}));
